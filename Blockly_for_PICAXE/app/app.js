function isExternal(e) {
    return e && 0 == e.lastIndexOf("http", 0) && -1 == e.lastIndexOf(window.location.host)
}

function styles(e, t) {
    function o(n) {
        var i = "";
        if (isExternal(n.href)) return console.warn("Cannot include styles from other hosts: " + n.href), i;
        var r = n.cssRules;
        if (null != r)
            for (var s = 0; s < r.length; s++) {
                var a = r[s];
                if ("undefined" != typeof a.style) {
                    var l = null;
                    try {
                        l = e.querySelector(a.selectorText)
                    } catch (c) {
                        console.warn('Invalid CSS selector "' + a.selectorText + '"', c)
                    }
                    if (l && -1 == a.selectorText.indexOf("blocklySelected")) {
                        var u = t ? t(a.selectorText) : a.selectorText;
                        i += u + " { " + a.style.cssText + " }\n"
                    } else a.cssText.match(/^@font-face/) && (i += a.cssText + "\n")
                } else "undefined" != typeof a.styleSheet && (i += o(a.styleSheet))
            }
        return i
    }
    for (var n = "", i = document.styleSheets, r = 0; r < i.length; r++) n += o(i[r]);
    return n
}

function dataURItoBlob(e) {
    var t;
    t = e.split(",")[0].indexOf("base64") >= 0 ? atob(e.split(",")[1]) : unescape(e.split(",")[1]);
    for (var o = e.split(",")[0].split(":")[1].split(";")[0], n = new Uint8Array(t.length), i = 0; i < t.length; i++) n[i] = t.charCodeAt(i);
    return new Blob([n], {
        type: o
    })
}
var requirejs, require, define;
! function(global) {
    function isFunction(e) {
        return "[object Function]" === ostring.call(e)
    }

    function isArray(e) {
        return "[object Array]" === ostring.call(e)
    }

    function each(e, t) {
        if (e) {
            var o;
            for (o = 0; o < e.length && (!e[o] || !t(e[o], o, e)); o += 1);
        }
    }

    function eachReverse(e, t) {
        if (e) {
            var o;
            for (o = e.length - 1; o > -1 && (!e[o] || !t(e[o], o, e)); o -= 1);
        }
    }

    function hasProp(e, t) {
        return hasOwn.call(e, t)
    }

    function getOwn(e, t) {
        return hasProp(e, t) && e[t]
    }

    function eachProp(e, t) {
        var o;
        for (o in e)
            if (hasProp(e, o) && t(e[o], o)) break
    }

    function mixin(e, t, o, n) {
        return t && eachProp(t, function(t, i) {
            !o && hasProp(e, i) || (!n || "object" != typeof t || !t || isArray(t) || isFunction(t) || t instanceof RegExp ? e[i] = t : (e[i] || (e[i] = {}), mixin(e[i], t, o, n)))
        }), e
    }

    function bind(e, t) {
        return function() {
            return t.apply(e, arguments)
        }
    }

    function scripts() {
        return document.getElementsByTagName("script")
    }

    function defaultOnError(e) {
        throw e
    }

    function getGlobal(e) {
        if (!e) return e;
        var t = global;
        return each(e.split("."), function(e) {
            t = t[e]
        }), t
    }

    function makeError(e, t, o, n) {
        var i = new Error(t + "\nhttp://requirejs.org/docs/errors.html#" + e);
        return i.requireType = e, i.requireModules = n, o && (i.originalError = o), i
    }

    function newContext(e) {
        function t(e) {
            var t, o;
            for (t = 0; t < e.length; t++)
                if (o = e[t], "." === o) e.splice(t, 1), t -= 1;
                else if (".." === o) {
                if (0 === t || 1 === t && ".." === e[2] || ".." === e[t - 1]) continue;
                t > 0 && (e.splice(t - 1, 2), t -= 2)
            }
        }

        function o(e, o, n) {
            var i, r, s, a, l, c, u, g, p, h, d, f, m = o && o.split("/"),
                y = S.map,
                v = y && y["*"];
            if (e && (e = e.split("/"), u = e.length - 1, S.nodeIdCompat && jsSuffixRegExp.test(e[u]) && (e[u] = e[u].replace(jsSuffixRegExp, "")), "." === e[0].charAt(0) && m && (f = m.slice(0, m.length - 1), e = f.concat(e)), t(e), e = e.join("/")), n && y && (m || v)) {
                s = e.split("/");
                e: for (a = s.length; a > 0; a -= 1) {
                    if (c = s.slice(0, a).join("/"), m)
                        for (l = m.length; l > 0; l -= 1)
                            if (r = getOwn(y, m.slice(0, l).join("/")), r && (r = getOwn(r, c))) {
                                g = r, p = a;
                                break e
                            }!h && v && getOwn(v, c) && (h = getOwn(v, c), d = a)
                }!g && h && (g = h, p = d), g && (s.splice(0, p, g), e = s.join("/"))
            }
            return i = getOwn(S.pkgs, e), i ? i : e
        }

        function n(e) {
            isBrowser && each(scripts(), function(t) {
                return t.getAttribute("data-requiremodule") === e && t.getAttribute("data-requirecontext") === b.contextName ? (t.parentNode.removeChild(t), !0) : void 0
            })
        }

        function i(e) {
            var t = getOwn(S.paths, e);
            return t && isArray(t) && t.length > 1 ? (t.shift(), b.require.undef(e), b.makeRequire(null, {
                skipMap: !0
            })([e]), !0) : void 0
        }

        function r(e) {
            var t, o = e ? e.indexOf("!") : -1;
            return o > -1 && (t = e.substring(0, o), e = e.substring(o + 1, e.length)), [t, e]
        }

        function s(e, t, n, i) {
            var s, a, l, c, u = null,
                g = t ? t.name : null,
                p = e,
                h = !0,
                d = "";
            return e || (h = !1, e = "_@r" + (N += 1)), c = r(e), u = c[0], e = c[1], u && (u = o(u, g, i), a = getOwn(x, u)), e && (u ? d = a && a.normalize ? a.normalize(e, function(e) {
                return o(e, g, i)
            }) : -1 === e.indexOf("!") ? o(e, g, i) : e : (d = o(e, g, i), c = r(d), u = c[0], d = c[1], n = !0, s = b.nameToUrl(d))), l = !u || a || n ? "" : "_unnormalized" + (R += 1), {
                prefix: u,
                name: d,
                parentMap: t,
                unnormalized: !!l,
                url: s,
                originalName: p,
                isDefine: h,
                id: (u ? u + "!" + d : d) + l
            }
        }

        function a(e) {
            var t = e.id,
                o = getOwn(T, t);
            return o || (o = T[t] = new b.Module(e)), o
        }

        function l(e, t, o) {
            var n = e.id,
                i = getOwn(T, n);
            !hasProp(x, n) || i && !i.defineEmitComplete ? (i = a(e), i.error && "error" === t ? o(i.error) : i.on(t, o)) : "defined" === t && o(x[n])
        }

        function c(e, t) {
            var o = e.requireModules,
                n = !1;
            t ? t(e) : (each(o, function(t) {
                var o = getOwn(T, t);
                o && (o.error = e, o.events.error && (n = !0, o.emit("error", e)))
            }), n || req.onError(e))
        }

        function u() {
            globalDefQueue.length && (apsp.apply(B, [B.length, 0].concat(globalDefQueue)), globalDefQueue = [])
        }

        function g(e) {
            delete T[e], delete k[e]
        }

        function p(e, t, o) {
            var n = e.map.id;
            e.error ? e.emit("error", e.error) : (t[n] = !0, each(e.depMaps, function(n, i) {
                var r = n.id,
                    s = getOwn(T, r);
                !s || e.depMatched[i] || o[r] || (getOwn(t, r) ? (e.defineDep(i, x[r]), e.check()) : p(s, t, o))
            }), o[n] = !0)
        }

        function h() {
            var e, t, o = 1e3 * S.waitSeconds,
                r = o && b.startTime + o < (new Date).getTime(),
                s = [],
                a = [],
                l = !1,
                u = !0;
            if (!v) {
                if (v = !0, eachProp(k, function(e) {
                        var o = e.map,
                            c = o.id;
                        if (e.enabled && (o.isDefine || a.push(e), !e.error))
                            if (!e.inited && r) i(c) ? (t = !0, l = !0) : (s.push(c), n(c));
                            else if (!e.inited && e.fetched && o.isDefine && (l = !0, !o.prefix)) return u = !1
                    }), r && s.length) return e = makeError("timeout", "Load timeout for modules: " + s, null, s), e.contextName = b.contextName, c(e);
                u && each(a, function(e) {
                    p(e, {}, {})
                }), r && !t || !l || !isBrowser && !isWebWorker || E || (E = setTimeout(function() {
                    E = 0, h()
                }, 50)), v = !1
            }
        }

        function d(e) {
            hasProp(x, e[0]) || a(s(e[0], null, !0)).init(e[1], e[2])
        }

        function f(e, t, o, n) {
            e.detachEvent && !isOpera ? n && e.detachEvent(n, t) : e.removeEventListener(o, t, !1)
        }

        function m(e) {
            var t = e.currentTarget || e.srcElement;
            return f(t, b.onScriptLoad, "load", "onreadystatechange"), f(t, b.onScriptError, "error"), {
                node: t,
                id: t && t.getAttribute("data-requiremodule")
            }
        }

        function y() {
            var e;
            for (u(); B.length;) {
                if (e = B.shift(), null === e[0]) return c(makeError("mismatch", "Mismatched anonymous define() module: " + e[e.length - 1]));
                d(e)
            }
        }
        var v, _, b, C, E, S = {
                waitSeconds: 7,
                baseUrl: "./",
                paths: {},
                bundles: {},
                pkgs: {},
                shim: {},
                config: {}
            },
            T = {},
            k = {},
            A = {},
            B = [],
            x = {},
            w = {},
            I = {},
            N = 1,
            R = 1;
        return C = {
            require: function(e) {
                return e.require ? e.require : e.require = b.makeRequire(e.map)
            },
            exports: function(e) {
                return e.usingExports = !0, e.map.isDefine ? e.exports ? x[e.map.id] = e.exports : e.exports = x[e.map.id] = {} : void 0
            },
            module: function(e) {
                return e.module ? e.module : e.module = {
                    id: e.map.id,
                    uri: e.map.url,
                    config: function() {
                        return getOwn(S.config, e.map.id) || {}
                    },
                    exports: e.exports || (e.exports = {})
                }
            }
        }, _ = function(e) {
            this.events = getOwn(A, e.id) || {}, this.map = e, this.shim = getOwn(S.shim, e.id), this.depExports = [], this.depMaps = [], this.depMatched = [], this.pluginMaps = {}, this.depCount = 0
        }, _.prototype = {
            init: function(e, t, o, n) {
                n = n || {}, this.inited || (this.factory = t, o ? this.on("error", o) : this.events.error && (o = bind(this, function(e) {
                    this.emit("error", e)
                })), this.depMaps = e && e.slice(0), this.errback = o, this.inited = !0, this.ignore = n.ignore, n.enabled || this.enabled ? this.enable() : this.check())
            },
            defineDep: function(e, t) {
                this.depMatched[e] || (this.depMatched[e] = !0, this.depCount -= 1, this.depExports[e] = t)
            },
            fetch: function() {
                if (!this.fetched) {
                    this.fetched = !0, b.startTime = (new Date).getTime();
                    var e = this.map;
                    return this.shim ? void b.makeRequire(this.map, {
                        enableBuildCallback: !0
                    })(this.shim.deps || [], bind(this, function() {
                        return e.prefix ? this.callPlugin() : this.load()
                    })) : e.prefix ? this.callPlugin() : this.load()
                }
            },
            load: function() {
                var e = this.map.url;
                w[e] || (w[e] = !0, b.load(this.map.id, e))
            },
            check: function() {
                if (this.enabled && !this.enabling) {
                    var e, t, o = this.map.id,
                        n = this.depExports,
                        i = this.exports,
                        r = this.factory;
                    if (this.inited) {
                        if (this.error) this.emit("error", this.error);
                        else if (!this.defining) {
                            if (this.defining = !0, this.depCount < 1 && !this.defined) {
                                if (isFunction(r)) {
                                    if (this.events.error && this.map.isDefine || req.onError !== defaultOnError) try {
                                        i = b.execCb(o, r, n, i)
                                    } catch (s) {
                                        e = s
                                    } else i = b.execCb(o, r, n, i);
                                    if (this.map.isDefine && void 0 === i && (t = this.module, t ? i = t.exports : this.usingExports && (i = this.exports)), e) return e.requireMap = this.map, e.requireModules = this.map.isDefine ? [this.map.id] : null, e.requireType = this.map.isDefine ? "define" : "require", c(this.error = e)
                                } else i = r;
                                this.exports = i, this.map.isDefine && !this.ignore && (x[o] = i, req.onResourceLoad && req.onResourceLoad(b, this.map, this.depMaps)), g(o), this.defined = !0
                            }
                            this.defining = !1, this.defined && !this.defineEmitted && (this.defineEmitted = !0, this.emit("defined", this.exports), this.defineEmitComplete = !0)
                        }
                    } else this.fetch()
                }
            },
            callPlugin: function() {
                var e = this.map,
                    t = e.id,
                    n = s(e.prefix);
                this.depMaps.push(n), l(n, "defined", bind(this, function(n) {
                    var i, r, u, p = getOwn(I, this.map.id),
                        h = this.map.name,
                        d = this.map.parentMap ? this.map.parentMap.name : null,
                        f = b.makeRequire(e.parentMap, {
                            enableBuildCallback: !0
                        });
                    return this.map.unnormalized ? (n.normalize && (h = n.normalize(h, function(e) {
                        return o(e, d, !0)
                    }) || ""), r = s(e.prefix + "!" + h, this.map.parentMap), l(r, "defined", bind(this, function(e) {
                        this.init([], function() {
                            return e
                        }, null, {
                            enabled: !0,
                            ignore: !0
                        })
                    })), u = getOwn(T, r.id), void(u && (this.depMaps.push(r), this.events.error && u.on("error", bind(this, function(e) {
                        this.emit("error", e)
                    })), u.enable()))) : p ? (this.map.url = b.nameToUrl(p), void this.load()) : (i = bind(this, function(e) {
                        this.init([], function() {
                            return e
                        }, null, {
                            enabled: !0
                        })
                    }), i.error = bind(this, function(e) {
                        this.inited = !0, this.error = e, e.requireModules = [t], eachProp(T, function(e) {
                            0 === e.map.id.indexOf(t + "_unnormalized") && g(e.map.id)
                        }), c(e)
                    }), i.fromText = bind(this, function(o, n) {
                        var r = e.name,
                            l = s(r),
                            u = useInteractive;
                        n && (o = n), u && (useInteractive = !1), a(l), hasProp(S.config, t) && (S.config[r] = S.config[t]);
                        try {
                            req.exec(o)
                        } catch (g) {
                            return c(makeError("fromtexteval", "fromText eval for " + t + " failed: " + g, g, [t]))
                        }
                        u && (useInteractive = !0), this.depMaps.push(l), b.completeLoad(r), f([r], i)
                    }), void n.load(e.name, f, i, S))
                })), b.enable(n, this), this.pluginMaps[n.id] = n
            },
            enable: function() {
                k[this.map.id] = this, this.enabled = !0, this.enabling = !0, each(this.depMaps, bind(this, function(e, t) {
                    var o, n, i;
                    if ("string" == typeof e) {
                        if (e = s(e, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap), this.depMaps[t] = e, i = getOwn(C, e.id)) return void(this.depExports[t] = i(this));
                        this.depCount += 1, l(e, "defined", bind(this, function(e) {
                            this.undefed || (this.defineDep(t, e), this.check())
                        })), this.errback ? l(e, "error", bind(this, this.errback)) : this.events.error && l(e, "error", bind(this, function(e) {
                            this.emit("error", e)
                        }))
                    }
                    o = e.id, n = T[o], hasProp(C, o) || !n || n.enabled || b.enable(e, this)
                })), eachProp(this.pluginMaps, bind(this, function(e) {
                    var t = getOwn(T, e.id);
                    t && !t.enabled && b.enable(e, this)
                })), this.enabling = !1, this.check()
            },
            on: function(e, t) {
                var o = this.events[e];
                o || (o = this.events[e] = []), o.push(t)
            },
            emit: function(e, t) {
                each(this.events[e], function(e) {
                    e(t)
                }), "error" === e && delete this.events[e]
            }
        }, b = {
            config: S,
            contextName: e,
            registry: T,
            defined: x,
            urlFetched: w,
            defQueue: B,
            Module: _,
            makeModuleMap: s,
            nextTick: req.nextTick,
            onError: c,
            configure: function(e) {
                e.baseUrl && "/" !== e.baseUrl.charAt(e.baseUrl.length - 1) && (e.baseUrl += "/");
                var t = S.shim,
                    o = {
                        paths: !0,
                        bundles: !0,
                        config: !0,
                        map: !0
                    };
                eachProp(e, function(e, t) {
                    o[t] ? (S[t] || (S[t] = {}), mixin(S[t], e, !0, !0)) : S[t] = e
                }), e.bundles && eachProp(e.bundles, function(e, t) {
                    each(e, function(e) {
                        e !== t && (I[e] = t)
                    })
                }), e.shim && (eachProp(e.shim, function(e, o) {
                    isArray(e) && (e = {
                        deps: e
                    }), !e.exports && !e.init || e.exportsFn || (e.exportsFn = b.makeShimExports(e)), t[o] = e
                }), S.shim = t), e.packages && each(e.packages, function(e) {
                    var t, o;
                    e = "string" == typeof e ? {
                        name: e
                    } : e, o = e.name, t = e.location, t && (S.paths[o] = e.location), S.pkgs[o] = e.name + "/" + (e.main || "main").replace(currDirRegExp, "").replace(jsSuffixRegExp, "")
                }), eachProp(T, function(e, t) {
                    e.inited || e.map.unnormalized || (e.map = s(t, null, !0))
                }), (e.deps || e.callback) && b.require(e.deps || [], e.callback)
            },
            makeShimExports: function(e) {
                function t() {
                    var t;
                    return e.init && (t = e.init.apply(global, arguments)), t || e.exports && getGlobal(e.exports)
                }
                return t
            },
            makeRequire: function(t, i) {
                function r(o, n, l) {
                    var u, g, p;
                    return i.enableBuildCallback && n && isFunction(n) && (n.__requireJsBuild = !0), "string" == typeof o ? isFunction(n) ? c(makeError("requireargs", "Invalid require call"), l) : t && hasProp(C, o) ? C[o](T[t.id]) : req.get ? req.get(b, o, t, r) : (g = s(o, t, !1, !0), u = g.id, hasProp(x, u) ? x[u] : c(makeError("notloaded", 'Module name "' + u + '" has not been loaded yet for context: ' + e + (t ? "" : ". Use require([])")))) : (y(), b.nextTick(function() {
                        y(), p = a(s(null, t)), p.skipMap = i.skipMap, p.init(o, n, l, {
                            enabled: !0
                        }), h()
                    }), r)
                }
                return i = i || {}, mixin(r, {
                    isBrowser: isBrowser,
                    toUrl: function(e) {
                        var n, i = e.lastIndexOf("."),
                            r = e.split("/")[0],
                            s = "." === r || ".." === r;
                        return -1 !== i && (!s || i > 1) && (n = e.substring(i, e.length), e = e.substring(0, i)), b.nameToUrl(o(e, t && t.id, !0), n, !0)
                    },
                    defined: function(e) {
                        return hasProp(x, s(e, t, !1, !0).id)
                    },
                    specified: function(e) {
                        return e = s(e, t, !1, !0).id, hasProp(x, e) || hasProp(T, e)
                    }
                }), t || (r.undef = function(e) {
                    u();
                    var o = s(e, t, !0),
                        i = getOwn(T, e);
                    i.undefed = !0, n(e), delete x[e], delete w[o.url], delete A[e], eachReverse(B, function(t, o) {
                        t[0] === e && B.splice(o, 1)
                    }), i && (i.events.defined && (A[e] = i.events), g(e))
                }), r
            },
            enable: function(e) {
                var t = getOwn(T, e.id);
                t && a(e).enable()
            },
            completeLoad: function(e) {
                var t, o, n, r = getOwn(S.shim, e) || {},
                    s = r.exports;
                for (u(); B.length;) {
                    if (o = B.shift(), null === o[0]) {
                        if (o[0] = e, t) break;
                        t = !0
                    } else o[0] === e && (t = !0);
                    d(o)
                }
                if (n = getOwn(T, e), !t && !hasProp(x, e) && n && !n.inited) {
                    if (!(!S.enforceDefine || s && getGlobal(s))) return i(e) ? void 0 : c(makeError("nodefine", "No define call for " + e, null, [e]));
                    d([e, r.deps || [], r.exportsFn])
                }
                h()
            },
            nameToUrl: function(e, t, o) {
                var n, i, r, s, a, l, c, u = getOwn(S.pkgs, e);
                if (u && (e = u), c = getOwn(I, e)) return b.nameToUrl(c, t, o);
                if (req.jsExtRegExp.test(e)) a = e + (t || "");
                else {
                    for (n = S.paths, i = e.split("/"), r = i.length; r > 0; r -= 1)
                        if (s = i.slice(0, r).join("/"), l = getOwn(n, s)) {
                            isArray(l) && (l = l[0]), i.splice(0, r, l);
                            break
                        }
                    a = i.join("/"), a += t || (/^data\:|\?/.test(a) || o ? "" : ".js"), a = ("/" === a.charAt(0) || a.match(/^[\w\+\.\-]+:/) ? "" : S.baseUrl) + a
                }
                return S.urlArgs ? a + ((-1 === a.indexOf("?") ? "?" : "&") + S.urlArgs) : a
            },
            load: function(e, t) {
                req.load(b, e, t)
            },
            execCb: function(e, t, o, n) {
                return t.apply(n, o)
            },
            onScriptLoad: function(e) {
                if ("load" === e.type || readyRegExp.test((e.currentTarget || e.srcElement).readyState)) {
                    interactiveScript = null;
                    var t = m(e);
                    b.completeLoad(t.id)
                }
            },
            onScriptError: function(e) {
                var t = m(e);
                return i(t.id) ? void 0 : c(makeError("scripterror", "Script error for: " + t.id, e, [t.id]))
            }
        }, b.require = b.makeRequire(), b
    }

    function getInteractiveScript() {
        return interactiveScript && "interactive" === interactiveScript.readyState ? interactiveScript : (eachReverse(scripts(), function(e) {
            return "interactive" === e.readyState ? interactiveScript = e : void 0
        }), interactiveScript)
    }
    var req, s, head, baseElement, dataMain, src, interactiveScript, currentlyAddingScript, mainScript, subPath, version = "2.1.19",
        commentRegExp = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,
        cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
        jsSuffixRegExp = /\.js$/,
        currDirRegExp = /^\.\//,
        op = Object.prototype,
        ostring = op.toString,
        hasOwn = op.hasOwnProperty,
        ap = Array.prototype,
        apsp = ap.splice,
        isBrowser = !("undefined" == typeof window || "undefined" == typeof navigator || !window.document),
        isWebWorker = !isBrowser && "undefined" != typeof importScripts,
        readyRegExp = isBrowser && "PLAYSTATION 3" === navigator.platform ? /^complete$/ : /^(complete|loaded)$/,
        defContextName = "_",
        isOpera = "undefined" != typeof opera && "[object Opera]" === opera.toString(),
        contexts = {},
        cfg = {},
        globalDefQueue = [],
        useInteractive = !1;
    if ("undefined" == typeof define) {
        if ("undefined" != typeof requirejs) {
            if (isFunction(requirejs)) return;
            cfg = requirejs, requirejs = void 0
        }
        "undefined" == typeof require || isFunction(require) || (cfg = require, require = void 0), req = requirejs = function(e, t, o, n) {
            var i, r, s = defContextName;
            return isArray(e) || "string" == typeof e || (r = e, isArray(t) ? (e = t, t = o, o = n) : e = []), r && r.context && (s = r.context), i = getOwn(contexts, s), i || (i = contexts[s] = req.s.newContext(s)), r && i.configure(r), i.require(e, t, o)
        }, req.config = function(e) {
            return req(e)
        }, req.nextTick = "undefined" != typeof setTimeout ? function(e) {
            setTimeout(e, 4)
        } : function(e) {
            e()
        }, require || (require = req), req.version = version, req.jsExtRegExp = /^\/|:|\?|\.js$/, req.isBrowser = isBrowser, s = req.s = {
            contexts: contexts,
            newContext: newContext
        }, req({}), each(["toUrl", "undef", "defined", "specified"], function(e) {
            req[e] = function() {
                var t = contexts[defContextName];
                return t.require[e].apply(t, arguments)
            }
        }), isBrowser && (head = s.head = document.getElementsByTagName("head")[0], baseElement = document.getElementsByTagName("base")[0], baseElement && (head = s.head = baseElement.parentNode)), req.onError = defaultOnError, req.createNode = function(e, t, o) {
            var n = e.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script");
            return n.type = e.scriptType || "text/javascript", n.charset = "utf-8", n.async = !0, n
        }, req.load = function(e, t, o) {
            var n, i = e && e.config || {};
            if (isBrowser) return n = req.createNode(i, t, o), i.onNodeCreated && i.onNodeCreated(n, i, t, o), n.setAttribute("data-requirecontext", e.contextName), n.setAttribute("data-requiremodule", t), !n.attachEvent || n.attachEvent.toString && n.attachEvent.toString().indexOf("[native code") < 0 || isOpera ? (n.addEventListener("load", e.onScriptLoad, !1), n.addEventListener("error", e.onScriptError, !1)) : (useInteractive = !0, n.attachEvent("onreadystatechange", e.onScriptLoad)), n.src = o, currentlyAddingScript = n, baseElement ? head.insertBefore(n, baseElement) : head.appendChild(n), currentlyAddingScript = null, n;
            if (isWebWorker) try {
                importScripts(o), e.completeLoad(t)
            } catch (r) {
                e.onError(makeError("importscripts", "importScripts failed for " + t + " at " + o, r, [t]))
            }
        }, isBrowser && !cfg.skipDataMain && eachReverse(scripts(), function(e) {
            return head || (head = e.parentNode), dataMain = e.getAttribute("data-main"), dataMain ? (mainScript = dataMain, cfg.baseUrl || (src = mainScript.split("/"), mainScript = src.pop(), subPath = src.length ? src.join("/") + "/" : "./", cfg.baseUrl = subPath), mainScript = mainScript.replace(jsSuffixRegExp, ""), req.jsExtRegExp.test(mainScript) && (mainScript = dataMain), cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript], !0) : void 0
        }), define = function(e, t, o) {
            var n, i;
            "string" != typeof e && (o = t, t = e, e = null), isArray(t) || (o = t, t = null), !t && isFunction(o) && (t = [], o.length && (o.toString().replace(commentRegExp, "").replace(cjsRequireRegExp, function(e, o) {
                t.push(o)
            }), t = (1 === o.length ? ["require"] : ["require", "exports", "module"]).concat(t))), useInteractive && (n = currentlyAddingScript || getInteractiveScript(), n && (e || (e = n.getAttribute("data-requiremodule")), i = contexts[n.getAttribute("data-requirecontext")])), (i ? i.defQueue : globalDefQueue).push([e, t, o])
        }, define.amd = {
            jQuery: !0
        }, req.exec = function(text) {
            return eval(text)
        }, req(cfg)
    }
}(this), define("requireLib", function() {}),
    function(e, t) {
        "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function(e) {
            if (!e.document) throw new Error("jQuery requires a window with a document");
            return t(e)
        } : t(e)
    }("undefined" != typeof window ? window : this, function(e, t) {
        function o(e) {
            var t = "length" in e && e.length,
                o = ie.type(e);
            return "function" === o || ie.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === o || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
        }

        function n(e, t, o) {
            if (ie.isFunction(t)) return ie.grep(e, function(e, n) {
                return !!t.call(e, n, e) !== o
            });
            if (t.nodeType) return ie.grep(e, function(e) {
                return e === t !== o
            });
            if ("string" == typeof t) {
                if (pe.test(t)) return ie.filter(t, e, o);
                t = ie.filter(t, e)
            }
            return ie.grep(e, function(e) {
                return ie.inArray(e, t) >= 0 !== o
            })
        }

        function i(e, t) {
            do e = e[t]; while (e && 1 !== e.nodeType);
            return e
        }

        function r(e) {
            var t = be[e] = {};
            return ie.each(e.match(_e) || [], function(e, o) {
                t[o] = !0
            }), t
        }

        function s() {
            de.addEventListener ? (de.removeEventListener("DOMContentLoaded", a, !1), e.removeEventListener("load", a, !1)) : (de.detachEvent("onreadystatechange", a), e.detachEvent("onload", a))
        }

        function a() {
            (de.addEventListener || "load" === event.type || "complete" === de.readyState) && (s(), ie.ready())
        }

        function l(e, t, o) {
            if (void 0 === o && 1 === e.nodeType) {
                var n = "data-" + t.replace(ke, "-$1").toLowerCase();
                if (o = e.getAttribute(n), "string" == typeof o) {
                    try {
                        o = "true" === o ? !0 : "false" === o ? !1 : "null" === o ? null : +o + "" === o ? +o : Te.test(o) ? ie.parseJSON(o) : o
                    } catch (i) {}
                    ie.data(e, t, o)
                } else o = void 0
            }
            return o
        }

        function c(e) {
            var t;
            for (t in e)
                if (("data" !== t || !ie.isEmptyObject(e[t])) && "toJSON" !== t) return !1;
            return !0
        }

        function u(e, t, o, n) {
            if (ie.acceptData(e)) {
                var i, r, s = ie.expando,
                    a = e.nodeType,
                    l = a ? ie.cache : e,
                    c = a ? e[s] : e[s] && s;
                if (c && l[c] && (n || l[c].data) || void 0 !== o || "string" != typeof t) return c || (c = a ? e[s] = z.pop() || ie.guid++ : s), l[c] || (l[c] = a ? {} : {
                    toJSON: ie.noop
                }), "object" != typeof t && "function" != typeof t || (n ? l[c] = ie.extend(l[c], t) : l[c].data = ie.extend(l[c].data, t)), r = l[c], n || (r.data || (r.data = {}), r = r.data), void 0 !== o && (r[ie.camelCase(t)] = o), "string" == typeof t ? (i = r[t], null == i && (i = r[ie.camelCase(t)])) : i = r, i
            }
        }

        function g(e, t, o) {
            if (ie.acceptData(e)) {
                var n, i, r = e.nodeType,
                    s = r ? ie.cache : e,
                    a = r ? e[ie.expando] : ie.expando;
                if (s[a]) {
                    if (t && (n = o ? s[a] : s[a].data)) {
                        ie.isArray(t) ? t = t.concat(ie.map(t, ie.camelCase)) : t in n ? t = [t] : (t = ie.camelCase(t), t = t in n ? [t] : t.split(" ")), i = t.length;
                        for (; i--;) delete n[t[i]];
                        if (o ? !c(n) : !ie.isEmptyObject(n)) return
                    }(o || (delete s[a].data, c(s[a]))) && (r ? ie.cleanData([e], !0) : oe.deleteExpando || s != s.window ? delete s[a] : s[a] = null)
                }
            }
        }

        function p() {
            return !0
        }

        function h() {
            return !1
        }

        function d() {
            try {
                return de.activeElement
            } catch (e) {}
        }

        function f(e) {
            var t = Me.split("|"),
                o = e.createDocumentFragment();
            if (o.createElement)
                for (; t.length;) o.createElement(t.pop());
            return o
        }

        function m(e, t) {
            var o, n, i = 0,
                r = typeof e.getElementsByTagName !== Se ? e.getElementsByTagName(t || "*") : typeof e.querySelectorAll !== Se ? e.querySelectorAll(t || "*") : void 0;
            if (!r)
                for (r = [], o = e.childNodes || e; null != (n = o[i]); i++) !t || ie.nodeName(n, t) ? r.push(n) : ie.merge(r, m(n, t));
            return void 0 === t || t && ie.nodeName(e, t) ? ie.merge([e], r) : r
        }

        function y(e) {
            Ie.test(e.type) && (e.defaultChecked = e.checked)
        }

        function v(e, t) {
            return ie.nodeName(e, "table") && ie.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
        }

        function _(e) {
            return e.type = (null !== ie.find.attr(e, "type")) + "/" + e.type, e
        }

        function b(e) {
            var t = Xe.exec(e.type);
            return t ? e.type = t[1] : e.removeAttribute("type"), e
        }

        function C(e, t) {
            for (var o, n = 0; null != (o = e[n]); n++) ie._data(o, "globalEval", !t || ie._data(t[n], "globalEval"))
        }

        function E(e, t) {
            if (1 === t.nodeType && ie.hasData(e)) {
                var o, n, i, r = ie._data(e),
                    s = ie._data(t, r),
                    a = r.events;
                if (a) {
                    delete s.handle, s.events = {};
                    for (o in a)
                        for (n = 0, i = a[o].length; i > n; n++) ie.event.add(t, o, a[o][n])
                }
                s.data && (s.data = ie.extend({}, s.data))
            }
        }

        function S(e, t) {
            var o, n, i;
            if (1 === t.nodeType) {
                if (o = t.nodeName.toLowerCase(), !oe.noCloneEvent && t[ie.expando]) {
                    i = ie._data(t);
                    for (n in i.events) ie.removeEvent(t, n, i.handle);
                    t.removeAttribute(ie.expando)
                }
                "script" === o && t.text !== e.text ? (_(t).text = e.text, b(t)) : "object" === o ? (t.parentNode && (t.outerHTML = e.outerHTML), oe.html5Clone && e.innerHTML && !ie.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : "input" === o && Ie.test(e.type) ? (t.defaultChecked = t.checked = e.checked, t.value !== e.value && (t.value = e.value)) : "option" === o ? t.defaultSelected = t.selected = e.defaultSelected : "input" !== o && "textarea" !== o || (t.defaultValue = e.defaultValue)
            }
        }

        function T(t, o) {
            var n, i = ie(o.createElement(t)).appendTo(o.body),
                r = e.getDefaultComputedStyle && (n = e.getDefaultComputedStyle(i[0])) ? n.display : ie.css(i[0], "display");
            return i.detach(), r
        }

        function k(e) {
            var t = de,
                o = Ze[e];
            return o || (o = T(e, t), "none" !== o && o || (Je = (Je || ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement), t = (Je[0].contentWindow || Je[0].contentDocument).document, t.write(), t.close(), o = T(e, t), Je.detach()), Ze[e] = o), o
        }

        function A(e, t) {
            return {
                get: function() {
                    var o = e();
                    if (null != o) return o ? void delete this.get : (this.get = t).apply(this, arguments)
                }
            }
        }

        function B(e, t) {
            if (t in e) return t;
            for (var o = t.charAt(0).toUpperCase() + t.slice(1), n = t, i = pt.length; i--;)
                if (t = pt[i] + o, t in e) return t;
            return n
        }

        function x(e, t) {
            for (var o, n, i, r = [], s = 0, a = e.length; a > s; s++) n = e[s], n.style && (r[s] = ie._data(n, "olddisplay"), o = n.style.display, t ? (r[s] || "none" !== o || (n.style.display = ""), "" === n.style.display && xe(n) && (r[s] = ie._data(n, "olddisplay", k(n.nodeName)))) : (i = xe(n), (o && "none" !== o || !i) && ie._data(n, "olddisplay", i ? o : ie.css(n, "display"))));
            for (s = 0; a > s; s++) n = e[s], n.style && (t && "none" !== n.style.display && "" !== n.style.display || (n.style.display = t ? r[s] || "" : "none"));
            return e
        }

        function w(e, t, o) {
            var n = lt.exec(t);
            return n ? Math.max(0, n[1] - (o || 0)) + (n[2] || "px") : t
        }

        function I(e, t, o, n, i) {
            for (var r = o === (n ? "border" : "content") ? 4 : "width" === t ? 1 : 0, s = 0; 4 > r; r += 2) "margin" === o && (s += ie.css(e, o + Be[r], !0, i)), n ? ("content" === o && (s -= ie.css(e, "padding" + Be[r], !0, i)), "margin" !== o && (s -= ie.css(e, "border" + Be[r] + "Width", !0, i))) : (s += ie.css(e, "padding" + Be[r], !0, i), "padding" !== o && (s += ie.css(e, "border" + Be[r] + "Width", !0, i)));
            return s
        }

        function N(e, t, o) {
            var n = !0,
                i = "width" === t ? e.offsetWidth : e.offsetHeight,
                r = et(e),
                s = oe.boxSizing && "border-box" === ie.css(e, "boxSizing", !1, r);
            if (0 >= i || null == i) {
                if (i = tt(e, t, r), (0 > i || null == i) && (i = e.style[t]), nt.test(i)) return i;
                n = s && (oe.boxSizingReliable() || i === e.style[t]), i = parseFloat(i) || 0
            }
            return i + I(e, t, o || (s ? "border" : "content"), n, r) + "px"
        }

        function R(e, t, o, n, i) {
            return new R.prototype.init(e, t, o, n, i)
        }

        function L() {
            return setTimeout(function() {
                ht = void 0
            }), ht = ie.now()
        }

        function O(e, t) {
            var o, n = {
                    height: e
                },
                i = 0;
            for (t = t ? 1 : 0; 4 > i; i += 2 - t) o = Be[i], n["margin" + o] = n["padding" + o] = e;
            return t && (n.opacity = n.width = e), n
        }

        function D(e, t, o) {
            for (var n, i = (_t[t] || []).concat(_t["*"]), r = 0, s = i.length; s > r; r++)
                if (n = i[r].call(o, t, e)) return n
        }

        function M(e, t, o) {
            var n, i, r, s, a, l, c, u, g = this,
                p = {},
                h = e.style,
                d = e.nodeType && xe(e),
                f = ie._data(e, "fxshow");
            o.queue || (a = ie._queueHooks(e, "fx"), null == a.unqueued && (a.unqueued = 0, l = a.empty.fire, a.empty.fire = function() {
                a.unqueued || l()
            }), a.unqueued++, g.always(function() {
                g.always(function() {
                    a.unqueued--, ie.queue(e, "fx").length || a.empty.fire()
                })
            })), 1 === e.nodeType && ("height" in t || "width" in t) && (o.overflow = [h.overflow, h.overflowX, h.overflowY], c = ie.css(e, "display"), u = "none" === c ? ie._data(e, "olddisplay") || k(e.nodeName) : c, "inline" === u && "none" === ie.css(e, "float") && (oe.inlineBlockNeedsLayout && "inline" !== k(e.nodeName) ? h.zoom = 1 : h.display = "inline-block")), o.overflow && (h.overflow = "hidden", oe.shrinkWrapBlocks() || g.always(function() {
                h.overflow = o.overflow[0], h.overflowX = o.overflow[1], h.overflowY = o.overflow[2]
            }));
            for (n in t)
                if (i = t[n], ft.exec(i)) {
                    if (delete t[n], r = r || "toggle" === i, i === (d ? "hide" : "show")) {
                        if ("show" !== i || !f || void 0 === f[n]) continue;
                        d = !0
                    }
                    p[n] = f && f[n] || ie.style(e, n)
                } else c = void 0;
            if (ie.isEmptyObject(p)) "inline" === ("none" === c ? k(e.nodeName) : c) && (h.display = c);
            else {
                f ? "hidden" in f && (d = f.hidden) : f = ie._data(e, "fxshow", {}), r && (f.hidden = !d), d ? ie(e).show() : g.done(function() {
                    ie(e).hide()
                }), g.done(function() {
                    var t;
                    ie._removeData(e, "fxshow");
                    for (t in p) ie.style(e, t, p[t])
                });
                for (n in p) s = D(d ? f[n] : 0, n, g), n in f || (f[n] = s.start, d && (s.end = s.start, s.start = "width" === n || "height" === n ? 1 : 0))
            }
        }

        function P(e, t) {
            var o, n, i, r, s;
            for (o in e)
                if (n = ie.camelCase(o), i = t[n], r = e[o], ie.isArray(r) && (i = r[1], r = e[o] = r[0]), o !== n && (e[n] = r, delete e[o]), s = ie.cssHooks[n], s && "expand" in s) {
                    r = s.expand(r), delete e[n];
                    for (o in r) o in e || (e[o] = r[o], t[o] = i)
                } else t[n] = i
        }

        function F(e, t, o) {
            var n, i, r = 0,
                s = vt.length,
                a = ie.Deferred().always(function() {
                    delete l.elem
                }),
                l = function() {
                    if (i) return !1;
                    for (var t = ht || L(), o = Math.max(0, c.startTime + c.duration - t), n = o / c.duration || 0, r = 1 - n, s = 0, l = c.tweens.length; l > s; s++) c.tweens[s].run(r);
                    return a.notifyWith(e, [c, r, o]), 1 > r && l ? o : (a.resolveWith(e, [c]), !1)
                },
                c = a.promise({
                    elem: e,
                    props: ie.extend({}, t),
                    opts: ie.extend(!0, {
                        specialEasing: {}
                    }, o),
                    originalProperties: t,
                    originalOptions: o,
                    startTime: ht || L(),
                    duration: o.duration,
                    tweens: [],
                    createTween: function(t, o) {
                        var n = ie.Tween(e, c.opts, t, o, c.opts.specialEasing[t] || c.opts.easing);
                        return c.tweens.push(n), n
                    },
                    stop: function(t) {
                        var o = 0,
                            n = t ? c.tweens.length : 0;
                        if (i) return this;
                        for (i = !0; n > o; o++) c.tweens[o].run(1);
                        return t ? a.resolveWith(e, [c, t]) : a.rejectWith(e, [c, t]), this
                    }
                }),
                u = c.props;
            for (P(u, c.opts.specialEasing); s > r; r++)
                if (n = vt[r].call(c, e, u, c.opts)) return n;
            return ie.map(u, D, c), ie.isFunction(c.opts.start) && c.opts.start.call(e, c), ie.fx.timer(ie.extend(l, {
                elem: e,
                anim: c,
                queue: c.opts.queue
            })), c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always)
        }

        function H(e) {
            return function(t, o) {
                "string" != typeof t && (o = t, t = "*");
                var n, i = 0,
                    r = t.toLowerCase().match(_e) || [];
                if (ie.isFunction(o))
                    for (; n = r[i++];) "+" === n.charAt(0) ? (n = n.slice(1) || "*", (e[n] = e[n] || []).unshift(o)) : (e[n] = e[n] || []).push(o)
            }
        }

        function U(e, t, o, n) {
            function i(a) {
                var l;
                return r[a] = !0, ie.each(e[a] || [], function(e, a) {
                    var c = a(t, o, n);
                    return "string" != typeof c || s || r[c] ? s ? !(l = c) : void 0 : (t.dataTypes.unshift(c), i(c), !1)
                }), l
            }
            var r = {},
                s = e === Gt;
            return i(t.dataTypes[0]) || !r["*"] && i("*")
        }

        function V(e, t) {
            var o, n, i = ie.ajaxSettings.flatOptions || {};
            for (n in t) void 0 !== t[n] && ((i[n] ? e : o || (o = {}))[n] = t[n]);
            return o && ie.extend(!0, e, o), e
        }

        function W(e, t, o) {
            for (var n, i, r, s, a = e.contents, l = e.dataTypes;
                "*" === l[0];) l.shift(), void 0 === i && (i = e.mimeType || t.getResponseHeader("Content-Type"));
            if (i)
                for (s in a)
                    if (a[s] && a[s].test(i)) {
                        l.unshift(s);
                        break
                    }
            if (l[0] in o) r = l[0];
            else {
                for (s in o) {
                    if (!l[0] || e.converters[s + " " + l[0]]) {
                        r = s;
                        break
                    }
                    n || (n = s)
                }
                r = r || n
            }
            return r ? (r !== l[0] && l.unshift(r), o[r]) : void 0
        }

        function G(e, t, o, n) {
            var i, r, s, a, l, c = {},
                u = e.dataTypes.slice();
            if (u[1])
                for (s in e.converters) c[s.toLowerCase()] = e.converters[s];
            for (r = u.shift(); r;)
                if (e.responseFields[r] && (o[e.responseFields[r]] = t), !l && n && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = r, r = u.shift())
                    if ("*" === r) r = l;
                    else if ("*" !== l && l !== r) {
                if (s = c[l + " " + r] || c["* " + r], !s)
                    for (i in c)
                        if (a = i.split(" "), a[1] === r && (s = c[l + " " + a[0]] || c["* " + a[0]])) {
                            s === !0 ? s = c[i] : c[i] !== !0 && (r = a[0], u.unshift(a[1]));
                            break
                        }
                if (s !== !0)
                    if (s && e["throws"]) t = s(t);
                    else try {
                        t = s(t)
                    } catch (g) {
                        return {
                            state: "parsererror",
                            error: s ? g : "No conversion from " + l + " to " + r
                        }
                    }
            }
            return {
                state: "success",
                data: t
            }
        }

        function K(e, t, o, n) {
            var i;
            if (ie.isArray(t)) ie.each(t, function(t, i) {
                o || Xt.test(e) ? n(e, i) : K(e + "[" + ("object" == typeof i ? t : "") + "]", i, o, n)
            });
            else if (o || "object" !== ie.type(t)) n(e, t);
            else
                for (i in t) K(e + "[" + i + "]", t[i], o, n)
        }

        function j() {
            try {
                return new e.XMLHttpRequest
            } catch (t) {}
        }

        function Y() {
            try {
                return new e.ActiveXObject("Microsoft.XMLHTTP")
            } catch (t) {}
        }

        function X(e) {
            return ie.isWindow(e) ? e : 9 === e.nodeType ? e.defaultView || e.parentWindow : !1
        }
        var z = [],
            q = z.slice,
            $ = z.concat,
            Q = z.push,
            J = z.indexOf,
            Z = {},
            ee = Z.toString,
            te = Z.hasOwnProperty,
            oe = {},
            ne = "1.11.3",
            ie = function(e, t) {
                return new ie.fn.init(e, t)
            },
            re = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
            se = /^-ms-/,
            ae = /-([\da-z])/gi,
            le = function(e, t) {
                return t.toUpperCase()
            };
        ie.fn = ie.prototype = {
            jquery: ne,
            constructor: ie,
            selector: "",
            length: 0,
            toArray: function() {
                return q.call(this)
            },
            get: function(e) {
                return null != e ? 0 > e ? this[e + this.length] : this[e] : q.call(this)
            },
            pushStack: function(e) {
                var t = ie.merge(this.constructor(), e);
                return t.prevObject = this, t.context = this.context, t
            },
            each: function(e, t) {
                return ie.each(this, e, t)
            },
            map: function(e) {
                return this.pushStack(ie.map(this, function(t, o) {
                    return e.call(t, o, t)
                }))
            },
            slice: function() {
                return this.pushStack(q.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            eq: function(e) {
                var t = this.length,
                    o = +e + (0 > e ? t : 0);
                return this.pushStack(o >= 0 && t > o ? [this[o]] : [])
            },
            end: function() {
                return this.prevObject || this.constructor(null)
            },
            push: Q,
            sort: z.sort,
            splice: z.splice
        }, ie.extend = ie.fn.extend = function() {
            var e, t, o, n, i, r, s = arguments[0] || {},
                a = 1,
                l = arguments.length,
                c = !1;
            for ("boolean" == typeof s && (c = s, s = arguments[a] || {}, a++), "object" == typeof s || ie.isFunction(s) || (s = {}), a === l && (s = this, a--); l > a; a++)
                if (null != (i = arguments[a]))
                    for (n in i) e = s[n], o = i[n], s !== o && (c && o && (ie.isPlainObject(o) || (t = ie.isArray(o))) ? (t ? (t = !1, r = e && ie.isArray(e) ? e : []) : r = e && ie.isPlainObject(e) ? e : {}, s[n] = ie.extend(c, r, o)) : void 0 !== o && (s[n] = o));
            return s
        }, ie.extend({
            expando: "jQuery" + (ne + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function(e) {
                throw new Error(e)
            },
            noop: function() {},
            isFunction: function(e) {
                return "function" === ie.type(e)
            },
            isArray: Array.isArray || function(e) {
                return "array" === ie.type(e)
            },
            isWindow: function(e) {
                return null != e && e == e.window
            },
            isNumeric: function(e) {
                return !ie.isArray(e) && e - parseFloat(e) + 1 >= 0
            },
            isEmptyObject: function(e) {
                var t;
                for (t in e) return !1;
                return !0
            },
            isPlainObject: function(e) {
                var t;
                if (!e || "object" !== ie.type(e) || e.nodeType || ie.isWindow(e)) return !1;
                try {
                    if (e.constructor && !te.call(e, "constructor") && !te.call(e.constructor.prototype, "isPrototypeOf")) return !1
                } catch (o) {
                    return !1
                }
                if (oe.ownLast)
                    for (t in e) return te.call(e, t);
                for (t in e);
                return void 0 === t || te.call(e, t)
            },
            type: function(e) {
                return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? Z[ee.call(e)] || "object" : typeof e
            },
            globalEval: function(t) {
                t && ie.trim(t) && (e.execScript || function(t) {
                    e.eval.call(e, t)
                })(t)
            },
            camelCase: function(e) {
                return e.replace(se, "ms-").replace(ae, le)
            },
            nodeName: function(e, t) {
                return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
            },
            each: function(e, t, n) {
                var i, r = 0,
                    s = e.length,
                    a = o(e);
                if (n) {
                    if (a)
                        for (; s > r && (i = t.apply(e[r], n), i !== !1); r++);
                    else
                        for (r in e)
                            if (i = t.apply(e[r], n), i === !1) break
                } else if (a)
                    for (; s > r && (i = t.call(e[r], r, e[r]), i !== !1); r++);
                else
                    for (r in e)
                        if (i = t.call(e[r], r, e[r]), i === !1) break; return e
            },
            trim: function(e) {
                return null == e ? "" : (e + "").replace(re, "")
            },
            makeArray: function(e, t) {
                var n = t || [];
                return null != e && (o(Object(e)) ? ie.merge(n, "string" == typeof e ? [e] : e) : Q.call(n, e)), n
            },
            inArray: function(e, t, o) {
                var n;
                if (t) {
                    if (J) return J.call(t, e, o);
                    for (n = t.length, o = o ? 0 > o ? Math.max(0, n + o) : o : 0; n > o; o++)
                        if (o in t && t[o] === e) return o
                }
                return -1
            },
            merge: function(e, t) {
                for (var o = +t.length, n = 0, i = e.length; o > n;) e[i++] = t[n++];
                if (o !== o)
                    for (; void 0 !== t[n];) e[i++] = t[n++];
                return e.length = i, e
            },
            grep: function(e, t, o) {
                for (var n, i = [], r = 0, s = e.length, a = !o; s > r; r++) n = !t(e[r], r), n !== a && i.push(e[r]);
                return i
            },
            map: function(e, t, n) {
                var i, r = 0,
                    s = e.length,
                    a = o(e),
                    l = [];
                if (a)
                    for (; s > r; r++) i = t(e[r], r, n), null != i && l.push(i);
                else
                    for (r in e) i = t(e[r], r, n), null != i && l.push(i);
                return $.apply([], l)
            },
            guid: 1,
            proxy: function(e, t) {
                var o, n, i;
                return "string" == typeof t && (i = e[t], t = e, e = i), ie.isFunction(e) ? (o = q.call(arguments, 2), n = function() {
                    return e.apply(t || this, o.concat(q.call(arguments)))
                }, n.guid = e.guid = e.guid || ie.guid++, n) : void 0
            },
            now: function() {
                return +new Date
            },
            support: oe
        }), ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
            Z["[object " + t + "]"] = t.toLowerCase()
        });
        var ce = function(e) {
            function t(e, t, o, n) {
                var i, r, s, a, l, c, g, h, d, f;
                if ((t ? t.ownerDocument || t : U) !== R && N(t), t = t || R, o = o || [], a = t.nodeType, "string" != typeof e || !e || 1 !== a && 9 !== a && 11 !== a) return o;
                if (!n && O) {
                    if (11 !== a && (i = ve.exec(e)))
                        if (s = i[1]) {
                            if (9 === a) {
                                if (r = t.getElementById(s), !r || !r.parentNode) return o;
                                if (r.id === s) return o.push(r), o
                            } else if (t.ownerDocument && (r = t.ownerDocument.getElementById(s)) && F(t, r) && r.id === s) return o.push(r), o
                        } else {
                            if (i[2]) return J.apply(o, t.getElementsByTagName(e)), o;
                            if ((s = i[3]) && C.getElementsByClassName) return J.apply(o, t.getElementsByClassName(s)), o
                        }
                    if (C.qsa && (!D || !D.test(e))) {
                        if (h = g = H, d = t, f = 1 !== a && e, 1 === a && "object" !== t.nodeName.toLowerCase()) {
                            for (c = k(e), (g = t.getAttribute("id")) ? h = g.replace(be, "\\$&") : t.setAttribute("id", h), h = "[id='" + h + "'] ", l = c.length; l--;) c[l] = h + p(c[l]);
                            d = _e.test(e) && u(t.parentNode) || t, f = c.join(",")
                        }
                        if (f) try {
                            return J.apply(o, d.querySelectorAll(f)), o
                        } catch (m) {} finally {
                            g || t.removeAttribute("id")
                        }
                    }
                }
                return B(e.replace(le, "$1"), t, o, n)
            }

            function o() {
                function e(o, n) {
                    return t.push(o + " ") > E.cacheLength && delete e[t.shift()], e[o + " "] = n
                }
                var t = [];
                return e
            }

            function n(e) {
                return e[H] = !0, e
            }

            function i(e) {
                var t = R.createElement("div");
                try {
                    return !!e(t)
                } catch (o) {
                    return !1
                } finally {
                    t.parentNode && t.parentNode.removeChild(t), t = null
                }
            }

            function r(e, t) {
                for (var o = e.split("|"), n = e.length; n--;) E.attrHandle[o[n]] = t
            }

            function s(e, t) {
                var o = t && e,
                    n = o && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || X) - (~e.sourceIndex || X);
                if (n) return n;
                if (o)
                    for (; o = o.nextSibling;)
                        if (o === t) return -1;
                return e ? 1 : -1
            }

            function a(e) {
                return function(t) {
                    var o = t.nodeName.toLowerCase();
                    return "input" === o && t.type === e
                }
            }

            function l(e) {
                return function(t) {
                    var o = t.nodeName.toLowerCase();
                    return ("input" === o || "button" === o) && t.type === e
                }
            }

            function c(e) {
                return n(function(t) {
                    return t = +t, n(function(o, n) {
                        for (var i, r = e([], o.length, t), s = r.length; s--;) o[i = r[s]] && (o[i] = !(n[i] = o[i]))
                    })
                })
            }

            function u(e) {
                return e && "undefined" != typeof e.getElementsByTagName && e
            }

            function g() {}

            function p(e) {
                for (var t = 0, o = e.length, n = ""; o > t; t++) n += e[t].value;
                return n
            }

            function h(e, t, o) {
                var n = t.dir,
                    i = o && "parentNode" === n,
                    r = W++;
                return t.first ? function(t, o, r) {
                    for (; t = t[n];)
                        if (1 === t.nodeType || i) return e(t, o, r)
                } : function(t, o, s) {
                    var a, l, c = [V, r];
                    if (s) {
                        for (; t = t[n];)
                            if ((1 === t.nodeType || i) && e(t, o, s)) return !0
                    } else
                        for (; t = t[n];)
                            if (1 === t.nodeType || i) {
                                if (l = t[H] || (t[H] = {}), (a = l[n]) && a[0] === V && a[1] === r) return c[2] = a[2];
                                if (l[n] = c, c[2] = e(t, o, s)) return !0
                            }
                }
            }

            function d(e) {
                return e.length > 1 ? function(t, o, n) {
                    for (var i = e.length; i--;)
                        if (!e[i](t, o, n)) return !1;
                    return !0
                } : e[0]
            }

            function f(e, o, n) {
                for (var i = 0, r = o.length; r > i; i++) t(e, o[i], n);
                return n
            }

            function m(e, t, o, n, i) {
                for (var r, s = [], a = 0, l = e.length, c = null != t; l > a; a++)(r = e[a]) && (o && !o(r, n, i) || (s.push(r), c && t.push(a)));
                return s
            }

            function y(e, t, o, i, r, s) {
                return i && !i[H] && (i = y(i)), r && !r[H] && (r = y(r, s)), n(function(n, s, a, l) {
                    var c, u, g, p = [],
                        h = [],
                        d = s.length,
                        y = n || f(t || "*", a.nodeType ? [a] : a, []),
                        v = !e || !n && t ? y : m(y, p, e, a, l),
                        _ = o ? r || (n ? e : d || i) ? [] : s : v;
                    if (o && o(v, _, a, l), i)
                        for (c = m(_, h), i(c, [], a, l), u = c.length; u--;)(g = c[u]) && (_[h[u]] = !(v[h[u]] = g));
                    if (n) {
                        if (r || e) {
                            if (r) {
                                for (c = [], u = _.length; u--;)(g = _[u]) && c.push(v[u] = g);
                                r(null, _ = [], c, l)
                            }
                            for (u = _.length; u--;)(g = _[u]) && (c = r ? ee(n, g) : p[u]) > -1 && (n[c] = !(s[c] = g))
                        }
                    } else _ = m(_ === s ? _.splice(d, _.length) : _), r ? r(null, s, _, l) : J.apply(s, _)
                })
            }

            function v(e) {
                for (var t, o, n, i = e.length, r = E.relative[e[0].type], s = r || E.relative[" "], a = r ? 1 : 0, l = h(function(e) {
                        return e === t
                    }, s, !0), c = h(function(e) {
                        return ee(t, e) > -1
                    }, s, !0), u = [function(e, o, n) {
                        var i = !r && (n || o !== x) || ((t = o).nodeType ? l(e, o, n) : c(e, o, n));
                        return t = null, i
                    }]; i > a; a++)
                    if (o = E.relative[e[a].type]) u = [h(d(u), o)];
                    else {
                        if (o = E.filter[e[a].type].apply(null, e[a].matches), o[H]) {
                            for (n = ++a; i > n && !E.relative[e[n].type]; n++);
                            return y(a > 1 && d(u), a > 1 && p(e.slice(0, a - 1).concat({
                                value: " " === e[a - 2].type ? "*" : ""
                            })).replace(le, "$1"), o, n > a && v(e.slice(a, n)), i > n && v(e = e.slice(n)), i > n && p(e))
                        }
                        u.push(o)
                    }
                return d(u)
            }

            function _(e, o) {
                var i = o.length > 0,
                    r = e.length > 0,
                    s = function(n, s, a, l, c) {
                        var u, g, p, h = 0,
                            d = "0",
                            f = n && [],
                            y = [],
                            v = x,
                            _ = n || r && E.find.TAG("*", c),
                            b = V += null == v ? 1 : Math.random() || .1,
                            C = _.length;
                        for (c && (x = s !== R && s); d !== C && null != (u = _[d]); d++) {
                            if (r && u) {
                                for (g = 0; p = e[g++];)
                                    if (p(u, s, a)) {
                                        l.push(u);
                                        break
                                    }
                                c && (V = b)
                            }
                            i && ((u = !p && u) && h--, n && f.push(u))
                        }
                        if (h += d, i && d !== h) {
                            for (g = 0; p = o[g++];) p(f, y, s, a);
                            if (n) {
                                if (h > 0)
                                    for (; d--;) f[d] || y[d] || (y[d] = $.call(l));
                                y = m(y)
                            }
                            J.apply(l, y), c && !n && y.length > 0 && h + o.length > 1 && t.uniqueSort(l)
                        }
                        return c && (V = b, x = v), f
                    };
                return i ? n(s) : s
            }
            var b, C, E, S, T, k, A, B, x, w, I, N, R, L, O, D, M, P, F, H = "sizzle" + 1 * new Date,
                U = e.document,
                V = 0,
                W = 0,
                G = o(),
                K = o(),
                j = o(),
                Y = function(e, t) {
                    return e === t && (I = !0), 0
                },
                X = 1 << 31,
                z = {}.hasOwnProperty,
                q = [],
                $ = q.pop,
                Q = q.push,
                J = q.push,
                Z = q.slice,
                ee = function(e, t) {
                    for (var o = 0, n = e.length; n > o; o++)
                        if (e[o] === t) return o;
                    return -1
                },
                te = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                oe = "[\\x20\\t\\r\\n\\f]",
                ne = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                ie = ne.replace("w", "w#"),
                re = "\\[" + oe + "*(" + ne + ")(?:" + oe + "*([*^$|!~]?=)" + oe + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + ie + "))|)" + oe + "*\\]",
                se = ":(" + ne + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + re + ")*)|.*)\\)|)",
                ae = new RegExp(oe + "+", "g"),
                le = new RegExp("^" + oe + "+|((?:^|[^\\\\])(?:\\\\.)*)" + oe + "+$", "g"),
                ce = new RegExp("^" + oe + "*," + oe + "*"),
                ue = new RegExp("^" + oe + "*([>+~]|" + oe + ")" + oe + "*"),
                ge = new RegExp("=" + oe + "*([^\\]'\"]*?)" + oe + "*\\]", "g"),
                pe = new RegExp(se),
                he = new RegExp("^" + ie + "$"),
                de = {
                    ID: new RegExp("^#(" + ne + ")"),
                    CLASS: new RegExp("^\\.(" + ne + ")"),
                    TAG: new RegExp("^(" + ne.replace("w", "w*") + ")"),
                    ATTR: new RegExp("^" + re),
                    PSEUDO: new RegExp("^" + se),
                    CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + oe + "*(even|odd|(([+-]|)(\\d*)n|)" + oe + "*(?:([+-]|)" + oe + "*(\\d+)|))" + oe + "*\\)|)", "i"),
                    bool: new RegExp("^(?:" + te + ")$", "i"),
                    needsContext: new RegExp("^" + oe + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + oe + "*((?:-\\d)?\\d*)" + oe + "*\\)|)(?=[^-]|$)", "i")
                },
                fe = /^(?:input|select|textarea|button)$/i,
                me = /^h\d$/i,
                ye = /^[^{]+\{\s*\[native \w/,
                ve = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                _e = /[+~]/,
                be = /'|\\/g,
                Ce = new RegExp("\\\\([\\da-f]{1,6}" + oe + "?|(" + oe + ")|.)", "ig"),
                Ee = function(e, t, o) {
                    var n = "0x" + t - 65536;
                    return n !== n || o ? t : 0 > n ? String.fromCharCode(n + 65536) : String.fromCharCode(n >> 10 | 55296, 1023 & n | 56320)
                },
                Se = function() {
                    N()
                };
            try {
                J.apply(q = Z.call(U.childNodes), U.childNodes), q[U.childNodes.length].nodeType
            } catch (Te) {
                J = {
                    apply: q.length ? function(e, t) {
                        Q.apply(e, Z.call(t))
                    } : function(e, t) {
                        for (var o = e.length, n = 0; e[o++] = t[n++];);
                        e.length = o - 1
                    }
                }
            }
            C = t.support = {}, T = t.isXML = function(e) {
                var t = e && (e.ownerDocument || e).documentElement;
                return t ? "HTML" !== t.nodeName : !1
            }, N = t.setDocument = function(e) {
                var t, o, n = e ? e.ownerDocument || e : U;
                return n !== R && 9 === n.nodeType && n.documentElement ? (R = n, L = n.documentElement, o = n.defaultView, o && o !== o.top && (o.addEventListener ? o.addEventListener("unload", Se, !1) : o.attachEvent && o.attachEvent("onunload", Se)), O = !T(n), C.attributes = i(function(e) {
                    return e.className = "i", !e.getAttribute("className")
                }), C.getElementsByTagName = i(function(e) {
                    return e.appendChild(n.createComment("")), !e.getElementsByTagName("*").length
                }), C.getElementsByClassName = ye.test(n.getElementsByClassName), C.getById = i(function(e) {
                    return L.appendChild(e).id = H, !n.getElementsByName || !n.getElementsByName(H).length
                }), C.getById ? (E.find.ID = function(e, t) {
                    if ("undefined" != typeof t.getElementById && O) {
                        var o = t.getElementById(e);
                        return o && o.parentNode ? [o] : []
                    }
                }, E.filter.ID = function(e) {
                    var t = e.replace(Ce, Ee);
                    return function(e) {
                        return e.getAttribute("id") === t
                    }
                }) : (delete E.find.ID, E.filter.ID = function(e) {
                    var t = e.replace(Ce, Ee);
                    return function(e) {
                        var o = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id");
                        return o && o.value === t
                    }
                }), E.find.TAG = C.getElementsByTagName ? function(e, t) {
                    return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : C.qsa ? t.querySelectorAll(e) : void 0
                } : function(e, t) {
                    var o, n = [],
                        i = 0,
                        r = t.getElementsByTagName(e);
                    if ("*" === e) {
                        for (; o = r[i++];) 1 === o.nodeType && n.push(o);
                        return n
                    }
                    return r
                }, E.find.CLASS = C.getElementsByClassName && function(e, t) {
                    return O ? t.getElementsByClassName(e) : void 0
                }, M = [], D = [], (C.qsa = ye.test(n.querySelectorAll)) && (i(function(e) {
                    L.appendChild(e).innerHTML = "<a id='" + H + "'></a><select id='" + H + "-\f]' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && D.push("[*^$]=" + oe + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || D.push("\\[" + oe + "*(?:value|" + te + ")"), e.querySelectorAll("[id~=" + H + "-]").length || D.push("~="), e.querySelectorAll(":checked").length || D.push(":checked"), e.querySelectorAll("a#" + H + "+*").length || D.push(".#.+[+~]")
                }), i(function(e) {
                    var t = n.createElement("input");
                    t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && D.push("name" + oe + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || D.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), D.push(",.*:")
                })), (C.matchesSelector = ye.test(P = L.matches || L.webkitMatchesSelector || L.mozMatchesSelector || L.oMatchesSelector || L.msMatchesSelector)) && i(function(e) {
                    C.disconnectedMatch = P.call(e, "div"), P.call(e, "[s!='']:x"), M.push("!=", se)
                }), D = D.length && new RegExp(D.join("|")), M = M.length && new RegExp(M.join("|")), t = ye.test(L.compareDocumentPosition), F = t || ye.test(L.contains) ? function(e, t) {
                    var o = 9 === e.nodeType ? e.documentElement : e,
                        n = t && t.parentNode;
                    return e === n || !(!n || 1 !== n.nodeType || !(o.contains ? o.contains(n) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(n)))
                } : function(e, t) {
                    if (t)
                        for (; t = t.parentNode;)
                            if (t === e) return !0;
                    return !1
                }, Y = t ? function(e, t) {
                    if (e === t) return I = !0, 0;
                    var o = !e.compareDocumentPosition - !t.compareDocumentPosition;
                    return o ? o : (o = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, 1 & o || !C.sortDetached && t.compareDocumentPosition(e) === o ? e === n || e.ownerDocument === U && F(U, e) ? -1 : t === n || t.ownerDocument === U && F(U, t) ? 1 : w ? ee(w, e) - ee(w, t) : 0 : 4 & o ? -1 : 1)
                } : function(e, t) {
                    if (e === t) return I = !0, 0;
                    var o, i = 0,
                        r = e.parentNode,
                        a = t.parentNode,
                        l = [e],
                        c = [t];
                    if (!r || !a) return e === n ? -1 : t === n ? 1 : r ? -1 : a ? 1 : w ? ee(w, e) - ee(w, t) : 0;
                    if (r === a) return s(e, t);
                    for (o = e; o = o.parentNode;) l.unshift(o);
                    for (o = t; o = o.parentNode;) c.unshift(o);
                    for (; l[i] === c[i];) i++;
                    return i ? s(l[i], c[i]) : l[i] === U ? -1 : c[i] === U ? 1 : 0
                }, n) : R
            }, t.matches = function(e, o) {
                return t(e, null, null, o)
            }, t.matchesSelector = function(e, o) {
                if ((e.ownerDocument || e) !== R && N(e), o = o.replace(ge, "='$1']"), C.matchesSelector && O && (!M || !M.test(o)) && (!D || !D.test(o))) try {
                    var n = P.call(e, o);
                    if (n || C.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n
                } catch (i) {}
                return t(o, R, null, [e]).length > 0
            }, t.contains = function(e, t) {
                return (e.ownerDocument || e) !== R && N(e), F(e, t)
            }, t.attr = function(e, t) {
                (e.ownerDocument || e) !== R && N(e);
                var o = E.attrHandle[t.toLowerCase()],
                    n = o && z.call(E.attrHandle, t.toLowerCase()) ? o(e, t, !O) : void 0;
                return void 0 !== n ? n : C.attributes || !O ? e.getAttribute(t) : (n = e.getAttributeNode(t)) && n.specified ? n.value : null
            }, t.error = function(e) {
                throw new Error("Syntax error, unrecognized expression: " + e)
            }, t.uniqueSort = function(e) {
                var t, o = [],
                    n = 0,
                    i = 0;
                if (I = !C.detectDuplicates, w = !C.sortStable && e.slice(0), e.sort(Y), I) {
                    for (; t = e[i++];) t === e[i] && (n = o.push(i));
                    for (; n--;) e.splice(o[n], 1)
                }
                return w = null, e
            }, S = t.getText = function(e) {
                var t, o = "",
                    n = 0,
                    i = e.nodeType;
                if (i) {
                    if (1 === i || 9 === i || 11 === i) {
                        if ("string" == typeof e.textContent) return e.textContent;
                        for (e = e.firstChild; e; e = e.nextSibling) o += S(e)
                    } else if (3 === i || 4 === i) return e.nodeValue
                } else
                    for (; t = e[n++];) o += S(t);
                return o
            }, E = t.selectors = {
                cacheLength: 50,
                createPseudo: n,
                match: de,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function(e) {
                        return e[1] = e[1].replace(Ce, Ee), e[3] = (e[3] || e[4] || e[5] || "").replace(Ce, Ee), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                    },
                    CHILD: function(e) {
                        return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]), e
                    },
                    PSEUDO: function(e) {
                        var t, o = !e[6] && e[2];
                        return de.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : o && pe.test(o) && (t = k(o, !0)) && (t = o.indexOf(")", o.length - t) - o.length) && (e[0] = e[0].slice(0, t), e[2] = o.slice(0, t)), e.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function(e) {
                        var t = e.replace(Ce, Ee).toLowerCase();
                        return "*" === e ? function() {
                            return !0
                        } : function(e) {
                            return e.nodeName && e.nodeName.toLowerCase() === t
                        }
                    },
                    CLASS: function(e) {
                        var t = G[e + " "];
                        return t || (t = new RegExp("(^|" + oe + ")" + e + "(" + oe + "|$)")) && G(e, function(e) {
                            return t.test("string" == typeof e.className && e.className || "undefined" != typeof e.getAttribute && e.getAttribute("class") || "")
                        })
                    },
                    ATTR: function(e, o, n) {
                        return function(i) {
                            var r = t.attr(i, e);
                            return null == r ? "!=" === o : o ? (r += "", "=" === o ? r === n : "!=" === o ? r !== n : "^=" === o ? n && 0 === r.indexOf(n) : "*=" === o ? n && r.indexOf(n) > -1 : "$=" === o ? n && r.slice(-n.length) === n : "~=" === o ? (" " + r.replace(ae, " ") + " ").indexOf(n) > -1 : "|=" === o ? r === n || r.slice(0, n.length + 1) === n + "-" : !1) : !0
                        }
                    },
                    CHILD: function(e, t, o, n, i) {
                        var r = "nth" !== e.slice(0, 3),
                            s = "last" !== e.slice(-4),
                            a = "of-type" === t;
                        return 1 === n && 0 === i ? function(e) {
                            return !!e.parentNode
                        } : function(t, o, l) {
                            var c, u, g, p, h, d, f = r !== s ? "nextSibling" : "previousSibling",
                                m = t.parentNode,
                                y = a && t.nodeName.toLowerCase(),
                                v = !l && !a;
                            if (m) {
                                if (r) {
                                    for (; f;) {
                                        for (g = t; g = g[f];)
                                            if (a ? g.nodeName.toLowerCase() === y : 1 === g.nodeType) return !1;
                                        d = f = "only" === e && !d && "nextSibling"
                                    }
                                    return !0
                                }
                                if (d = [s ? m.firstChild : m.lastChild], s && v) {
                                    for (u = m[H] || (m[H] = {}), c = u[e] || [], h = c[0] === V && c[1], p = c[0] === V && c[2], g = h && m.childNodes[h]; g = ++h && g && g[f] || (p = h = 0) || d.pop();)
                                        if (1 === g.nodeType && ++p && g === t) {
                                            u[e] = [V, h, p];
                                            break
                                        }
                                } else if (v && (c = (t[H] || (t[H] = {}))[e]) && c[0] === V) p = c[1];
                                else
                                    for (;
                                        (g = ++h && g && g[f] || (p = h = 0) || d.pop()) && ((a ? g.nodeName.toLowerCase() !== y : 1 !== g.nodeType) || !++p || (v && ((g[H] || (g[H] = {}))[e] = [V, p]), g !== t)););
                                return p -= i, p === n || p % n === 0 && p / n >= 0
                            }
                        }
                    },
                    PSEUDO: function(e, o) {
                        var i, r = E.pseudos[e] || E.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                        return r[H] ? r(o) : r.length > 1 ? (i = [e, e, "", o], E.setFilters.hasOwnProperty(e.toLowerCase()) ? n(function(e, t) {
                            for (var n, i = r(e, o), s = i.length; s--;) n = ee(e, i[s]), e[n] = !(t[n] = i[s])
                        }) : function(e) {
                            return r(e, 0, i)
                        }) : r
                    }
                },
                pseudos: {
                    not: n(function(e) {
                        var t = [],
                            o = [],
                            i = A(e.replace(le, "$1"));
                        return i[H] ? n(function(e, t, o, n) {
                            for (var r, s = i(e, null, n, []), a = e.length; a--;)(r = s[a]) && (e[a] = !(t[a] = r))
                        }) : function(e, n, r) {
                            return t[0] = e, i(t, null, r, o), t[0] = null, !o.pop()
                        }
                    }),
                    has: n(function(e) {
                        return function(o) {
                            return t(e, o).length > 0
                        }
                    }),
                    contains: n(function(e) {
                        return e = e.replace(Ce, Ee),
                            function(t) {
                                return (t.textContent || t.innerText || S(t)).indexOf(e) > -1
                            }
                    }),
                    lang: n(function(e) {
                        return he.test(e || "") || t.error("unsupported lang: " + e), e = e.replace(Ce, Ee).toLowerCase(),
                            function(t) {
                                var o;
                                do
                                    if (o = O ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return o = o.toLowerCase(), o === e || 0 === o.indexOf(e + "-");
                                while ((t = t.parentNode) && 1 === t.nodeType);
                                return !1
                            }
                    }),
                    target: function(t) {
                        var o = e.location && e.location.hash;
                        return o && o.slice(1) === t.id
                    },
                    root: function(e) {
                        return e === L
                    },
                    focus: function(e) {
                        return e === R.activeElement && (!R.hasFocus || R.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                    },
                    enabled: function(e) {
                        return e.disabled === !1
                    },
                    disabled: function(e) {
                        return e.disabled === !0
                    },
                    checked: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && !!e.checked || "option" === t && !!e.selected
                    },
                    selected: function(e) {
                        return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                    },
                    empty: function(e) {
                        for (e = e.firstChild; e; e = e.nextSibling)
                            if (e.nodeType < 6) return !1;
                        return !0
                    },
                    parent: function(e) {
                        return !E.pseudos.empty(e)
                    },
                    header: function(e) {
                        return me.test(e.nodeName)
                    },
                    input: function(e) {
                        return fe.test(e.nodeName)
                    },
                    button: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && "button" === e.type || "button" === t
                    },
                    text: function(e) {
                        var t;
                        return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                    },
                    first: c(function() {
                        return [0]
                    }),
                    last: c(function(e, t) {
                        return [t - 1]
                    }),
                    eq: c(function(e, t, o) {
                        return [0 > o ? o + t : o]
                    }),
                    even: c(function(e, t) {
                        for (var o = 0; t > o; o += 2) e.push(o);
                        return e
                    }),
                    odd: c(function(e, t) {
                        for (var o = 1; t > o; o += 2) e.push(o);
                        return e
                    }),
                    lt: c(function(e, t, o) {
                        for (var n = 0 > o ? o + t : o; --n >= 0;) e.push(n);
                        return e
                    }),
                    gt: c(function(e, t, o) {
                        for (var n = 0 > o ? o + t : o; ++n < t;) e.push(n);
                        return e
                    })
                }
            }, E.pseudos.nth = E.pseudos.eq;
            for (b in {
                    radio: !0,
                    checkbox: !0,
                    file: !0,
                    password: !0,
                    image: !0
                }) E.pseudos[b] = a(b);
            for (b in {
                    submit: !0,
                    reset: !0
                }) E.pseudos[b] = l(b);
            return g.prototype = E.filters = E.pseudos, E.setFilters = new g, k = t.tokenize = function(e, o) {
                var n, i, r, s, a, l, c, u = K[e + " "];
                if (u) return o ? 0 : u.slice(0);
                for (a = e, l = [], c = E.preFilter; a;) {
                    n && !(i = ce.exec(a)) || (i && (a = a.slice(i[0].length) || a), l.push(r = [])), n = !1, (i = ue.exec(a)) && (n = i.shift(), r.push({
                        value: n,
                        type: i[0].replace(le, " ")
                    }), a = a.slice(n.length));
                    for (s in E.filter) !(i = de[s].exec(a)) || c[s] && !(i = c[s](i)) || (n = i.shift(), r.push({
                        value: n,
                        type: s,
                        matches: i
                    }), a = a.slice(n.length));
                    if (!n) break
                }
                return o ? a.length : a ? t.error(e) : K(e, l).slice(0)
            }, A = t.compile = function(e, t) {
                var o, n = [],
                    i = [],
                    r = j[e + " "];
                if (!r) {
                    for (t || (t = k(e)), o = t.length; o--;) r = v(t[o]), r[H] ? n.push(r) : i.push(r);
                    r = j(e, _(i, n)), r.selector = e
                }
                return r
            }, B = t.select = function(e, t, o, n) {
                var i, r, s, a, l, c = "function" == typeof e && e,
                    g = !n && k(e = c.selector || e);
                if (o = o || [], 1 === g.length) {
                    if (r = g[0] = g[0].slice(0), r.length > 2 && "ID" === (s = r[0]).type && C.getById && 9 === t.nodeType && O && E.relative[r[1].type]) {
                        if (t = (E.find.ID(s.matches[0].replace(Ce, Ee), t) || [])[0], !t) return o;
                        c && (t = t.parentNode), e = e.slice(r.shift().value.length)
                    }
                    for (i = de.needsContext.test(e) ? 0 : r.length; i-- && (s = r[i], !E.relative[a = s.type]);)
                        if ((l = E.find[a]) && (n = l(s.matches[0].replace(Ce, Ee), _e.test(r[0].type) && u(t.parentNode) || t))) {
                            if (r.splice(i, 1), e = n.length && p(r), !e) return J.apply(o, n), o;
                            break
                        }
                }
                return (c || A(e, g))(n, t, !O, o, _e.test(e) && u(t.parentNode) || t), o
            }, C.sortStable = H.split("").sort(Y).join("") === H, C.detectDuplicates = !!I, N(), C.sortDetached = i(function(e) {
                return 1 & e.compareDocumentPosition(R.createElement("div"))
            }), i(function(e) {
                return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
            }) || r("type|href|height|width", function(e, t, o) {
                return o ? void 0 : e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
            }), C.attributes && i(function(e) {
                return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
            }) || r("value", function(e, t, o) {
                return o || "input" !== e.nodeName.toLowerCase() ? void 0 : e.defaultValue
            }), i(function(e) {
                return null == e.getAttribute("disabled")
            }) || r(te, function(e, t, o) {
                var n;
                return o ? void 0 : e[t] === !0 ? t.toLowerCase() : (n = e.getAttributeNode(t)) && n.specified ? n.value : null
            }), t
        }(e);
        ie.find = ce, ie.expr = ce.selectors, ie.expr[":"] = ie.expr.pseudos, ie.unique = ce.uniqueSort, ie.text = ce.getText, ie.isXMLDoc = ce.isXML, ie.contains = ce.contains;
        var ue = ie.expr.match.needsContext,
            ge = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
            pe = /^.[^:#\[\.,]*$/;
        ie.filter = function(e, t, o) {
            var n = t[0];
            return o && (e = ":not(" + e + ")"), 1 === t.length && 1 === n.nodeType ? ie.find.matchesSelector(n, e) ? [n] : [] : ie.find.matches(e, ie.grep(t, function(e) {
                return 1 === e.nodeType
            }))
        }, ie.fn.extend({
            find: function(e) {
                var t, o = [],
                    n = this,
                    i = n.length;
                if ("string" != typeof e) return this.pushStack(ie(e).filter(function() {
                    for (t = 0; i > t; t++)
                        if (ie.contains(n[t], this)) return !0
                }));
                for (t = 0; i > t; t++) ie.find(e, n[t], o);
                return o = this.pushStack(i > 1 ? ie.unique(o) : o), o.selector = this.selector ? this.selector + " " + e : e, o
            },
            filter: function(e) {
                return this.pushStack(n(this, e || [], !1))
            },
            not: function(e) {
                return this.pushStack(n(this, e || [], !0))
            },
            is: function(e) {
                return !!n(this, "string" == typeof e && ue.test(e) ? ie(e) : e || [], !1).length
            }
        });
        var he, de = e.document,
            fe = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
            me = ie.fn.init = function(e, t) {
                var o, n;
                if (!e) return this;
                if ("string" == typeof e) {
                    if (o = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : fe.exec(e), !o || !o[1] && t) return !t || t.jquery ? (t || he).find(e) : this.constructor(t).find(e);
                    if (o[1]) {
                        if (t = t instanceof ie ? t[0] : t, ie.merge(this, ie.parseHTML(o[1], t && t.nodeType ? t.ownerDocument || t : de, !0)), ge.test(o[1]) && ie.isPlainObject(t))
                            for (o in t) ie.isFunction(this[o]) ? this[o](t[o]) : this.attr(o, t[o]);
                        return this
                    }
                    if (n = de.getElementById(o[2]), n && n.parentNode) {
                        if (n.id !== o[2]) return he.find(e);
                        this.length = 1, this[0] = n
                    }
                    return this.context = de, this.selector = e, this
                }
                return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : ie.isFunction(e) ? "undefined" != typeof he.ready ? he.ready(e) : e(ie) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), ie.makeArray(e, this))
            };
        me.prototype = ie.fn, he = ie(de);
        var ye = /^(?:parents|prev(?:Until|All))/,
            ve = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        ie.extend({
            dir: function(e, t, o) {
                for (var n = [], i = e[t]; i && 9 !== i.nodeType && (void 0 === o || 1 !== i.nodeType || !ie(i).is(o));) 1 === i.nodeType && n.push(i), i = i[t];
                return n
            },
            sibling: function(e, t) {
                for (var o = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && o.push(e);
                return o
            }
        }), ie.fn.extend({
            has: function(e) {
                var t, o = ie(e, this),
                    n = o.length;
                return this.filter(function() {
                    for (t = 0; n > t; t++)
                        if (ie.contains(this, o[t])) return !0
                })
            },
            closest: function(e, t) {
                for (var o, n = 0, i = this.length, r = [], s = ue.test(e) || "string" != typeof e ? ie(e, t || this.context) : 0; i > n; n++)
                    for (o = this[n]; o && o !== t; o = o.parentNode)
                        if (o.nodeType < 11 && (s ? s.index(o) > -1 : 1 === o.nodeType && ie.find.matchesSelector(o, e))) {
                            r.push(o);
                            break
                        }
                return this.pushStack(r.length > 1 ? ie.unique(r) : r)
            },
            index: function(e) {
                return e ? "string" == typeof e ? ie.inArray(this[0], ie(e)) : ie.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(e, t) {
                return this.pushStack(ie.unique(ie.merge(this.get(), ie(e, t))))
            },
            addBack: function(e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }
        }), ie.each({
            parent: function(e) {
                var t = e.parentNode;
                return t && 11 !== t.nodeType ? t : null
            },
            parents: function(e) {
                return ie.dir(e, "parentNode")
            },
            parentsUntil: function(e, t, o) {
                return ie.dir(e, "parentNode", o)
            },
            next: function(e) {
                return i(e, "nextSibling")
            },
            prev: function(e) {
                return i(e, "previousSibling")
            },
            nextAll: function(e) {
                return ie.dir(e, "nextSibling")
            },
            prevAll: function(e) {
                return ie.dir(e, "previousSibling")
            },
            nextUntil: function(e, t, o) {
                return ie.dir(e, "nextSibling", o)
            },
            prevUntil: function(e, t, o) {
                return ie.dir(e, "previousSibling", o)
            },
            siblings: function(e) {
                return ie.sibling((e.parentNode || {}).firstChild, e)
            },
            children: function(e) {
                return ie.sibling(e.firstChild)
            },
            contents: function(e) {
                return ie.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : ie.merge([], e.childNodes)
            }
        }, function(e, t) {
            ie.fn[e] = function(o, n) {
                var i = ie.map(this, t, o);
                return "Until" !== e.slice(-5) && (n = o), n && "string" == typeof n && (i = ie.filter(n, i)), this.length > 1 && (ve[e] || (i = ie.unique(i)), ye.test(e) && (i = i.reverse())), this.pushStack(i)
            }
        });
        var _e = /\S+/g,
            be = {};
        ie.Callbacks = function(e) {
            e = "string" == typeof e ? be[e] || r(e) : ie.extend({}, e);
            var t, o, n, i, s, a, l = [],
                c = !e.once && [],
                u = function(r) {
                    for (o = e.memory && r, n = !0, s = a || 0, a = 0, i = l.length, t = !0; l && i > s; s++)
                        if (l[s].apply(r[0], r[1]) === !1 && e.stopOnFalse) {
                            o = !1;
                            break
                        }
                    t = !1, l && (c ? c.length && u(c.shift()) : o ? l = [] : g.disable())
                },
                g = {
                    add: function() {
                        if (l) {
                            var n = l.length;
                            ! function r(t) {
                                ie.each(t, function(t, o) {
                                    var n = ie.type(o);
                                    "function" === n ? e.unique && g.has(o) || l.push(o) : o && o.length && "string" !== n && r(o)
                                })
                            }(arguments), t ? i = l.length : o && (a = n, u(o))
                        }
                        return this
                    },
                    remove: function() {
                        return l && ie.each(arguments, function(e, o) {
                            for (var n;
                                (n = ie.inArray(o, l, n)) > -1;) l.splice(n, 1), t && (i >= n && i--, s >= n && s--)
                        }), this
                    },
                    has: function(e) {
                        return e ? ie.inArray(e, l) > -1 : !(!l || !l.length)
                    },
                    empty: function() {
                        return l = [], i = 0, this
                    },
                    disable: function() {
                        return l = c = o = void 0, this
                    },
                    disabled: function() {
                        return !l
                    },
                    lock: function() {
                        return c = void 0, o || g.disable(), this
                    },
                    locked: function() {
                        return !c
                    },
                    fireWith: function(e, o) {
                        return !l || n && !c || (o = o || [], o = [e, o.slice ? o.slice() : o], t ? c.push(o) : u(o)), this
                    },
                    fire: function() {
                        return g.fireWith(this, arguments), this
                    },
                    fired: function() {
                        return !!n
                    }
                };
            return g
        }, ie.extend({
            Deferred: function(e) {
                var t = [
                        ["resolve", "done", ie.Callbacks("once memory"), "resolved"],
                        ["reject", "fail", ie.Callbacks("once memory"), "rejected"],
                        ["notify", "progress", ie.Callbacks("memory")]
                    ],
                    o = "pending",
                    n = {
                        state: function() {
                            return o
                        },
                        always: function() {
                            return i.done(arguments).fail(arguments), this
                        },
                        then: function() {
                            var e = arguments;
                            return ie.Deferred(function(o) {
                                ie.each(t, function(t, r) {
                                    var s = ie.isFunction(e[t]) && e[t];
                                    i[r[1]](function() {
                                        var e = s && s.apply(this, arguments);
                                        e && ie.isFunction(e.promise) ? e.promise().done(o.resolve).fail(o.reject).progress(o.notify) : o[r[0] + "With"](this === n ? o.promise() : this, s ? [e] : arguments)
                                    })
                                }), e = null
                            }).promise()
                        },
                        promise: function(e) {
                            return null != e ? ie.extend(e, n) : n
                        }
                    },
                    i = {};
                return n.pipe = n.then, ie.each(t, function(e, r) {
                    var s = r[2],
                        a = r[3];
                    n[r[1]] = s.add, a && s.add(function() {
                        o = a
                    }, t[1 ^ e][2].disable, t[2][2].lock), i[r[0]] = function() {
                        return i[r[0] + "With"](this === i ? n : this, arguments), this
                    }, i[r[0] + "With"] = s.fireWith
                }), n.promise(i), e && e.call(i, i), i
            },
            when: function(e) {
                var t, o, n, i = 0,
                    r = q.call(arguments),
                    s = r.length,
                    a = 1 !== s || e && ie.isFunction(e.promise) ? s : 0,
                    l = 1 === a ? e : ie.Deferred(),
                    c = function(e, o, n) {
                        return function(i) {
                            o[e] = this, n[e] = arguments.length > 1 ? q.call(arguments) : i, n === t ? l.notifyWith(o, n) : --a || l.resolveWith(o, n)
                        }
                    };
                if (s > 1)
                    for (t = new Array(s), o = new Array(s), n = new Array(s); s > i; i++) r[i] && ie.isFunction(r[i].promise) ? r[i].promise().done(c(i, n, r)).fail(l.reject).progress(c(i, o, t)) : --a;
                return a || l.resolveWith(n, r), l.promise()
            }
        });
        var Ce;
        ie.fn.ready = function(e) {
            return ie.ready.promise().done(e), this
        }, ie.extend({
            isReady: !1,
            readyWait: 1,
            holdReady: function(e) {
                e ? ie.readyWait++ : ie.ready(!0)
            },
            ready: function(e) {
                if (e === !0 ? !--ie.readyWait : !ie.isReady) {
                    if (!de.body) return setTimeout(ie.ready);
                    ie.isReady = !0, e !== !0 && --ie.readyWait > 0 || (Ce.resolveWith(de, [ie]), ie.fn.triggerHandler && (ie(de).triggerHandler("ready"), ie(de).off("ready")))
                }
            }
        }), ie.ready.promise = function(t) {
            if (!Ce)
                if (Ce = ie.Deferred(), "complete" === de.readyState) setTimeout(ie.ready);
                else if (de.addEventListener) de.addEventListener("DOMContentLoaded", a, !1), e.addEventListener("load", a, !1);
            else {
                de.attachEvent("onreadystatechange", a), e.attachEvent("onload", a);
                var o = !1;
                try {
                    o = null == e.frameElement && de.documentElement
                } catch (n) {}
                o && o.doScroll && ! function i() {
                    if (!ie.isReady) {
                        try {
                            o.doScroll("left")
                        } catch (e) {
                            return setTimeout(i, 50)
                        }
                        s(), ie.ready()
                    }
                }()
            }
            return Ce.promise(t)
        };
        var Ee, Se = "undefined";
        for (Ee in ie(oe)) break;
        oe.ownLast = "0" !== Ee, oe.inlineBlockNeedsLayout = !1, ie(function() {
                var e, t, o, n;
                o = de.getElementsByTagName("body")[0], o && o.style && (t = de.createElement("div"), n = de.createElement("div"), n.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", o.appendChild(n).appendChild(t), typeof t.style.zoom !== Se && (t.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1", oe.inlineBlockNeedsLayout = e = 3 === t.offsetWidth, e && (o.style.zoom = 1)), o.removeChild(n))
            }),
            function() {
                var e = de.createElement("div");
                if (null == oe.deleteExpando) {
                    oe.deleteExpando = !0;
                    try {
                        delete e.test
                    } catch (t) {
                        oe.deleteExpando = !1
                    }
                }
                e = null
            }(), ie.acceptData = function(e) {
                var t = ie.noData[(e.nodeName + " ").toLowerCase()],
                    o = +e.nodeType || 1;
                return 1 !== o && 9 !== o ? !1 : !t || t !== !0 && e.getAttribute("classid") === t
            };
        var Te = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
            ke = /([A-Z])/g;
        ie.extend({
            cache: {},
            noData: {
                "applet ": !0,
                "embed ": !0,
                "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
            },
            hasData: function(e) {
                return e = e.nodeType ? ie.cache[e[ie.expando]] : e[ie.expando], !!e && !c(e)
            },
            data: function(e, t, o) {
                return u(e, t, o)
            },
            removeData: function(e, t) {
                return g(e, t)
            },
            _data: function(e, t, o) {
                return u(e, t, o, !0)
            },
            _removeData: function(e, t) {
                return g(e, t, !0)
            }
        }), ie.fn.extend({
            data: function(e, t) {
                var o, n, i, r = this[0],
                    s = r && r.attributes;
                if (void 0 === e) {
                    if (this.length && (i = ie.data(r), 1 === r.nodeType && !ie._data(r, "parsedAttrs"))) {
                        for (o = s.length; o--;) s[o] && (n = s[o].name, 0 === n.indexOf("data-") && (n = ie.camelCase(n.slice(5)), l(r, n, i[n])));
                        ie._data(r, "parsedAttrs", !0)
                    }
                    return i
                }
                return "object" == typeof e ? this.each(function() {
                    ie.data(this, e)
                }) : arguments.length > 1 ? this.each(function() {
                    ie.data(this, e, t)
                }) : r ? l(r, e, ie.data(r, e)) : void 0
            },
            removeData: function(e) {
                return this.each(function() {
                    ie.removeData(this, e)
                })
            }
        }), ie.extend({
            queue: function(e, t, o) {
                var n;
                return e ? (t = (t || "fx") + "queue", n = ie._data(e, t), o && (!n || ie.isArray(o) ? n = ie._data(e, t, ie.makeArray(o)) : n.push(o)), n || []) : void 0
            },
            dequeue: function(e, t) {
                t = t || "fx";
                var o = ie.queue(e, t),
                    n = o.length,
                    i = o.shift(),
                    r = ie._queueHooks(e, t),
                    s = function() {
                        ie.dequeue(e, t)
                    };
                "inprogress" === i && (i = o.shift(), n--), i && ("fx" === t && o.unshift("inprogress"), delete r.stop, i.call(e, s, r)), !n && r && r.empty.fire()
            },
            _queueHooks: function(e, t) {
                var o = t + "queueHooks";
                return ie._data(e, o) || ie._data(e, o, {
                    empty: ie.Callbacks("once memory").add(function() {
                        ie._removeData(e, t + "queue"), ie._removeData(e, o)
                    })
                })
            }
        }), ie.fn.extend({
            queue: function(e, t) {
                var o = 2;
                return "string" != typeof e && (t = e, e = "fx", o--), arguments.length < o ? ie.queue(this[0], e) : void 0 === t ? this : this.each(function() {
                    var o = ie.queue(this, e, t);
                    ie._queueHooks(this, e), "fx" === e && "inprogress" !== o[0] && ie.dequeue(this, e)
                })
            },
            dequeue: function(e) {
                return this.each(function() {
                    ie.dequeue(this, e)
                })
            },
            clearQueue: function(e) {
                return this.queue(e || "fx", [])
            },
            promise: function(e, t) {
                var o, n = 1,
                    i = ie.Deferred(),
                    r = this,
                    s = this.length,
                    a = function() {
                        --n || i.resolveWith(r, [r])
                    };
                for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; s--;) o = ie._data(r[s], e + "queueHooks"), o && o.empty && (n++, o.empty.add(a));
                return a(), i.promise(t)
            }
        });
        var Ae = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
            Be = ["Top", "Right", "Bottom", "Left"],
            xe = function(e, t) {
                return e = t || e, "none" === ie.css(e, "display") || !ie.contains(e.ownerDocument, e)
            },
            we = ie.access = function(e, t, o, n, i, r, s) {
                var a = 0,
                    l = e.length,
                    c = null == o;
                if ("object" === ie.type(o)) {
                    i = !0;
                    for (a in o) ie.access(e, t, a, o[a], !0, r, s)
                } else if (void 0 !== n && (i = !0, ie.isFunction(n) || (s = !0), c && (s ? (t.call(e, n), t = null) : (c = t, t = function(e, t, o) {
                        return c.call(ie(e), o)
                    })), t))
                    for (; l > a; a++) t(e[a], o, s ? n : n.call(e[a], a, t(e[a], o)));
                return i ? e : c ? t.call(e) : l ? t(e[0], o) : r
            },
            Ie = /^(?:checkbox|radio)$/i;
        ! function() {
            var e = de.createElement("input"),
                t = de.createElement("div"),
                o = de.createDocumentFragment();
            if (t.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", oe.leadingWhitespace = 3 === t.firstChild.nodeType, oe.tbody = !t.getElementsByTagName("tbody").length, oe.htmlSerialize = !!t.getElementsByTagName("link").length, oe.html5Clone = "<:nav></:nav>" !== de.createElement("nav").cloneNode(!0).outerHTML, e.type = "checkbox", e.checked = !0, o.appendChild(e), oe.appendChecked = e.checked, t.innerHTML = "<textarea>x</textarea>", oe.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue, o.appendChild(t), t.innerHTML = "<input type='radio' checked='checked' name='t'/>", oe.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked, oe.noCloneEvent = !0, t.attachEvent && (t.attachEvent("onclick", function() {
                    oe.noCloneEvent = !1
                }), t.cloneNode(!0).click()), null == oe.deleteExpando) {
                oe.deleteExpando = !0;
                try {
                    delete t.test
                } catch (n) {
                    oe.deleteExpando = !1
                }
            }
        }(),
        function() {
            var t, o, n = de.createElement("div");
            for (t in {
                    submit: !0,
                    change: !0,
                    focusin: !0
                }) o = "on" + t, (oe[t + "Bubbles"] = o in e) || (n.setAttribute(o, "t"), oe[t + "Bubbles"] = n.attributes[o].expando === !1);
            n = null
        }();
        var Ne = /^(?:input|select|textarea)$/i,
            Re = /^key/,
            Le = /^(?:mouse|pointer|contextmenu)|click/,
            Oe = /^(?:focusinfocus|focusoutblur)$/,
            De = /^([^.]*)(?:\.(.+)|)$/;
        ie.event = {
            global: {},
            add: function(e, t, o, n, i) {
                var r, s, a, l, c, u, g, p, h, d, f, m = ie._data(e);
                if (m) {
                    for (o.handler && (l = o, o = l.handler, i = l.selector), o.guid || (o.guid = ie.guid++), (s = m.events) || (s = m.events = {}), (u = m.handle) || (u = m.handle = function(e) {
                            return typeof ie === Se || e && ie.event.triggered === e.type ? void 0 : ie.event.dispatch.apply(u.elem, arguments)
                        }, u.elem = e), t = (t || "").match(_e) || [""], a = t.length; a--;) r = De.exec(t[a]) || [], h = f = r[1], d = (r[2] || "").split(".").sort(), h && (c = ie.event.special[h] || {}, h = (i ? c.delegateType : c.bindType) || h, c = ie.event.special[h] || {}, g = ie.extend({
                        type: h,
                        origType: f,
                        data: n,
                        handler: o,
                        guid: o.guid,
                        selector: i,
                        needsContext: i && ie.expr.match.needsContext.test(i),
                        namespace: d.join(".")
                    }, l), (p = s[h]) || (p = s[h] = [], p.delegateCount = 0, c.setup && c.setup.call(e, n, d, u) !== !1 || (e.addEventListener ? e.addEventListener(h, u, !1) : e.attachEvent && e.attachEvent("on" + h, u))), c.add && (c.add.call(e, g), g.handler.guid || (g.handler.guid = o.guid)), i ? p.splice(p.delegateCount++, 0, g) : p.push(g), ie.event.global[h] = !0);
                    e = null
                }
            },
            remove: function(e, t, o, n, i) {
                var r, s, a, l, c, u, g, p, h, d, f, m = ie.hasData(e) && ie._data(e);
                if (m && (u = m.events)) {
                    for (t = (t || "").match(_e) || [""], c = t.length; c--;)
                        if (a = De.exec(t[c]) || [], h = f = a[1], d = (a[2] || "").split(".").sort(), h) {
                            for (g = ie.event.special[h] || {}, h = (n ? g.delegateType : g.bindType) || h, p = u[h] || [], a = a[2] && new RegExp("(^|\\.)" + d.join("\\.(?:.*\\.|)") + "(\\.|$)"), l = r = p.length; r--;) s = p[r], !i && f !== s.origType || o && o.guid !== s.guid || a && !a.test(s.namespace) || n && n !== s.selector && ("**" !== n || !s.selector) || (p.splice(r, 1), s.selector && p.delegateCount--, g.remove && g.remove.call(e, s));
                            l && !p.length && (g.teardown && g.teardown.call(e, d, m.handle) !== !1 || ie.removeEvent(e, h, m.handle), delete u[h])
                        } else
                            for (h in u) ie.event.remove(e, h + t[c], o, n, !0);
                    ie.isEmptyObject(u) && (delete m.handle, ie._removeData(e, "events"))
                }
            },
            trigger: function(t, o, n, i) {
                var r, s, a, l, c, u, g, p = [n || de],
                    h = te.call(t, "type") ? t.type : t,
                    d = te.call(t, "namespace") ? t.namespace.split(".") : [];
                if (a = u = n = n || de, 3 !== n.nodeType && 8 !== n.nodeType && !Oe.test(h + ie.event.triggered) && (h.indexOf(".") >= 0 && (d = h.split("."), h = d.shift(), d.sort()), s = h.indexOf(":") < 0 && "on" + h, t = t[ie.expando] ? t : new ie.Event(h, "object" == typeof t && t), t.isTrigger = i ? 2 : 3, t.namespace = d.join("."), t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + d.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = n), o = null == o ? [t] : ie.makeArray(o, [t]), c = ie.event.special[h] || {}, i || !c.trigger || c.trigger.apply(n, o) !== !1)) {
                    if (!i && !c.noBubble && !ie.isWindow(n)) {
                        for (l = c.delegateType || h, Oe.test(l + h) || (a = a.parentNode); a; a = a.parentNode) p.push(a), u = a;
                        u === (n.ownerDocument || de) && p.push(u.defaultView || u.parentWindow || e)
                    }
                    for (g = 0;
                        (a = p[g++]) && !t.isPropagationStopped();) t.type = g > 1 ? l : c.bindType || h, r = (ie._data(a, "events") || {})[t.type] && ie._data(a, "handle"), r && r.apply(a, o), r = s && a[s], r && r.apply && ie.acceptData(a) && (t.result = r.apply(a, o), t.result === !1 && t.preventDefault());
                    if (t.type = h, !i && !t.isDefaultPrevented() && (!c._default || c._default.apply(p.pop(), o) === !1) && ie.acceptData(n) && s && n[h] && !ie.isWindow(n)) {
                        u = n[s], u && (n[s] = null), ie.event.triggered = h;
                        try {
                            n[h]()
                        } catch (f) {}
                        ie.event.triggered = void 0, u && (n[s] = u)
                    }
                    return t.result
                }
            },
            dispatch: function(e) {
                e = ie.event.fix(e);
                var t, o, n, i, r, s = [],
                    a = q.call(arguments),
                    l = (ie._data(this, "events") || {})[e.type] || [],
                    c = ie.event.special[e.type] || {};
                if (a[0] = e, e.delegateTarget = this, !c.preDispatch || c.preDispatch.call(this, e) !== !1) {
                    for (s = ie.event.handlers.call(this, e, l), t = 0;
                        (i = s[t++]) && !e.isPropagationStopped();)
                        for (e.currentTarget = i.elem, r = 0;
                            (n = i.handlers[r++]) && !e.isImmediatePropagationStopped();) e.namespace_re && !e.namespace_re.test(n.namespace) || (e.handleObj = n, e.data = n.data, o = ((ie.event.special[n.origType] || {}).handle || n.handler).apply(i.elem, a), void 0 !== o && (e.result = o) === !1 && (e.preventDefault(), e.stopPropagation()));
                    return c.postDispatch && c.postDispatch.call(this, e), e.result
                }
            },
            handlers: function(e, t) {
                var o, n, i, r, s = [],
                    a = t.delegateCount,
                    l = e.target;
                if (a && l.nodeType && (!e.button || "click" !== e.type))
                    for (; l != this; l = l.parentNode || this)
                        if (1 === l.nodeType && (l.disabled !== !0 || "click" !== e.type)) {
                            for (i = [], r = 0; a > r; r++) n = t[r], o = n.selector + " ", void 0 === i[o] && (i[o] = n.needsContext ? ie(o, this).index(l) >= 0 : ie.find(o, this, null, [l]).length), i[o] && i.push(n);
                            i.length && s.push({
                                elem: l,
                                handlers: i
                            })
                        }
                return a < t.length && s.push({
                    elem: this,
                    handlers: t.slice(a)
                }), s
            },
            fix: function(e) {
                if (e[ie.expando]) return e;
                var t, o, n, i = e.type,
                    r = e,
                    s = this.fixHooks[i];
                for (s || (this.fixHooks[i] = s = Le.test(i) ? this.mouseHooks : Re.test(i) ? this.keyHooks : {}), n = s.props ? this.props.concat(s.props) : this.props, e = new ie.Event(r), t = n.length; t--;) o = n[t], e[o] = r[o];
                return e.target || (e.target = r.srcElement || de), 3 === e.target.nodeType && (e.target = e.target.parentNode), e.metaKey = !!e.metaKey, s.filter ? s.filter(e, r) : e
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function(e, t) {
                    return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function(e, t) {
                    var o, n, i, r = t.button,
                        s = t.fromElement;
                    return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || de, i = n.documentElement, o = n.body, e.pageX = t.clientX + (i && i.scrollLeft || o && o.scrollLeft || 0) - (i && i.clientLeft || o && o.clientLeft || 0), e.pageY = t.clientY + (i && i.scrollTop || o && o.scrollTop || 0) - (i && i.clientTop || o && o.clientTop || 0)), !e.relatedTarget && s && (e.relatedTarget = s === e.target ? t.toElement : s), e.which || void 0 === r || (e.which = 1 & r ? 1 : 2 & r ? 3 : 4 & r ? 2 : 0), e
                }
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function() {
                        if (this !== d() && this.focus) try {
                            return this.focus(), !1
                        } catch (e) {}
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function() {
                        return this === d() && this.blur ? (this.blur(), !1) : void 0
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function() {
                        return ie.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : void 0
                    },
                    _default: function(e) {
                        return ie.nodeName(e.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(e) {
                        void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                    }
                }
            },
            simulate: function(e, t, o, n) {
                var i = ie.extend(new ie.Event, o, {
                    type: e,
                    isSimulated: !0,
                    originalEvent: {}
                });
                n ? ie.event.trigger(i, null, t) : ie.event.dispatch.call(t, i), i.isDefaultPrevented() && o.preventDefault()
            }
        }, ie.removeEvent = de.removeEventListener ? function(e, t, o) {
            e.removeEventListener && e.removeEventListener(t, o, !1)
        } : function(e, t, o) {
            var n = "on" + t;
            e.detachEvent && (typeof e[n] === Se && (e[n] = null), e.detachEvent(n, o))
        }, ie.Event = function(e, t) {
            return this instanceof ie.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && e.returnValue === !1 ? p : h) : this.type = e, t && ie.extend(this, t), this.timeStamp = e && e.timeStamp || ie.now(), void(this[ie.expando] = !0)) : new ie.Event(e, t)
        }, ie.Event.prototype = {
            isDefaultPrevented: h,
            isPropagationStopped: h,
            isImmediatePropagationStopped: h,
            preventDefault: function() {
                var e = this.originalEvent;
                this.isDefaultPrevented = p, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)
            },
            stopPropagation: function() {
                var e = this.originalEvent;
                this.isPropagationStopped = p, e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0)
            },
            stopImmediatePropagation: function() {
                var e = this.originalEvent;
                this.isImmediatePropagationStopped = p, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), this.stopPropagation()
            }
        }, ie.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, function(e, t) {
            ie.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function(e) {
                    var o, n = this,
                        i = e.relatedTarget,
                        r = e.handleObj;
                    return i && (i === n || ie.contains(n, i)) || (e.type = r.origType, o = r.handler.apply(this, arguments), e.type = t), o
                }
            }
        }), oe.submitBubbles || (ie.event.special.submit = {
            setup: function() {
                return ie.nodeName(this, "form") ? !1 : void ie.event.add(this, "click._submit keypress._submit", function(e) {
                    var t = e.target,
                        o = ie.nodeName(t, "input") || ie.nodeName(t, "button") ? t.form : void 0;
                    o && !ie._data(o, "submitBubbles") && (ie.event.add(o, "submit._submit", function(e) {
                        e._submit_bubble = !0
                    }), ie._data(o, "submitBubbles", !0))
                })
            },
            postDispatch: function(e) {
                e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && ie.event.simulate("submit", this.parentNode, e, !0))
            },
            teardown: function() {
                return ie.nodeName(this, "form") ? !1 : void ie.event.remove(this, "._submit")
            }
        }), oe.changeBubbles || (ie.event.special.change = {
            setup: function() {
                return Ne.test(this.nodeName) ? ("checkbox" !== this.type && "radio" !== this.type || (ie.event.add(this, "propertychange._change", function(e) {
                    "checked" === e.originalEvent.propertyName && (this._just_changed = !0)
                }), ie.event.add(this, "click._change", function(e) {
                    this._just_changed && !e.isTrigger && (this._just_changed = !1), ie.event.simulate("change", this, e, !0)
                })), !1) : void ie.event.add(this, "beforeactivate._change", function(e) {
                    var t = e.target;
                    Ne.test(t.nodeName) && !ie._data(t, "changeBubbles") && (ie.event.add(t, "change._change", function(e) {
                        !this.parentNode || e.isSimulated || e.isTrigger || ie.event.simulate("change", this.parentNode, e, !0)
                    }), ie._data(t, "changeBubbles", !0))
                })
            },
            handle: function(e) {
                var t = e.target;
                return this !== t || e.isSimulated || e.isTrigger || "radio" !== t.type && "checkbox" !== t.type ? e.handleObj.handler.apply(this, arguments) : void 0
            },
            teardown: function() {
                return ie.event.remove(this, "._change"), !Ne.test(this.nodeName)
            }
        }), oe.focusinBubbles || ie.each({
            focus: "focusin",
            blur: "focusout"
        }, function(e, t) {
            var o = function(e) {
                ie.event.simulate(t, e.target, ie.event.fix(e), !0)
            };
            ie.event.special[t] = {
                setup: function() {
                    var n = this.ownerDocument || this,
                        i = ie._data(n, t);
                    i || n.addEventListener(e, o, !0), ie._data(n, t, (i || 0) + 1)
                },
                teardown: function() {
                    var n = this.ownerDocument || this,
                        i = ie._data(n, t) - 1;
                    i ? ie._data(n, t, i) : (n.removeEventListener(e, o, !0), ie._removeData(n, t))
                }
            }
        }), ie.fn.extend({
            on: function(e, t, o, n, i) {
                var r, s;
                if ("object" == typeof e) {
                    "string" != typeof t && (o = o || t, t = void 0);
                    for (r in e) this.on(r, t, o, e[r], i);
                    return this
                }
                if (null == o && null == n ? (n = t, o = t = void 0) : null == n && ("string" == typeof t ? (n = o, o = void 0) : (n = o, o = t, t = void 0)), n === !1) n = h;
                else if (!n) return this;
                return 1 === i && (s = n, n = function(e) {
                    return ie().off(e), s.apply(this, arguments)
                }, n.guid = s.guid || (s.guid = ie.guid++)), this.each(function() {
                    ie.event.add(this, e, n, o, t)
                })
            },
            one: function(e, t, o, n) {
                return this.on(e, t, o, n, 1)
            },
            off: function(e, t, o) {
                var n, i;
                if (e && e.preventDefault && e.handleObj) return n = e.handleObj, ie(e.delegateTarget).off(n.namespace ? n.origType + "." + n.namespace : n.origType, n.selector, n.handler), this;
                if ("object" == typeof e) {
                    for (i in e) this.off(i, t, e[i]);
                    return this
                }
                return t !== !1 && "function" != typeof t || (o = t, t = void 0), o === !1 && (o = h), this.each(function() {
                    ie.event.remove(this, e, o, t)
                })
            },
            trigger: function(e, t) {
                return this.each(function() {
                    ie.event.trigger(e, t, this)
                })
            },
            triggerHandler: function(e, t) {
                var o = this[0];
                return o ? ie.event.trigger(e, t, o, !0) : void 0
            }
        });
        var Me = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
            Pe = / jQuery\d+="(?:null|\d+)"/g,
            Fe = new RegExp("<(?:" + Me + ")[\\s/>]", "i"),
            He = /^\s+/,
            Ue = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
            Ve = /<([\w:]+)/,
            We = /<tbody/i,
            Ge = /<|&#?\w+;/,
            Ke = /<(?:script|style|link)/i,
            je = /checked\s*(?:[^=]|=\s*.checked.)/i,
            Ye = /^$|\/(?:java|ecma)script/i,
            Xe = /^true\/(.*)/,
            ze = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
            qe = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                legend: [1, "<fieldset>", "</fieldset>"],
                area: [1, "<map>", "</map>"],
                param: [1, "<object>", "</object>"],
                thead: [1, "<table>", "</table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: oe.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
            },
            $e = f(de),
            Qe = $e.appendChild(de.createElement("div"));
        qe.optgroup = qe.option, qe.tbody = qe.tfoot = qe.colgroup = qe.caption = qe.thead, qe.th = qe.td, ie.extend({
            clone: function(e, t, o) {
                var n, i, r, s, a, l = ie.contains(e.ownerDocument, e);
                if (oe.html5Clone || ie.isXMLDoc(e) || !Fe.test("<" + e.nodeName + ">") ? r = e.cloneNode(!0) : (Qe.innerHTML = e.outerHTML, Qe.removeChild(r = Qe.firstChild)), !(oe.noCloneEvent && oe.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || ie.isXMLDoc(e)))
                    for (n = m(r), a = m(e), s = 0; null != (i = a[s]); ++s) n[s] && S(i, n[s]);
                if (t)
                    if (o)
                        for (a = a || m(e), n = n || m(r), s = 0; null != (i = a[s]); s++) E(i, n[s]);
                    else E(e, r);
                return n = m(r, "script"), n.length > 0 && C(n, !l && m(e, "script")), n = a = i = null, r
            },
            buildFragment: function(e, t, o, n) {
                for (var i, r, s, a, l, c, u, g = e.length, p = f(t), h = [], d = 0; g > d; d++)
                    if (r = e[d], r || 0 === r)
                        if ("object" === ie.type(r)) ie.merge(h, r.nodeType ? [r] : r);
                        else if (Ge.test(r)) {
                    for (a = a || p.appendChild(t.createElement("div")), l = (Ve.exec(r) || ["", ""])[1].toLowerCase(), u = qe[l] || qe._default, a.innerHTML = u[1] + r.replace(Ue, "<$1></$2>") + u[2], i = u[0]; i--;) a = a.lastChild;
                    if (!oe.leadingWhitespace && He.test(r) && h.push(t.createTextNode(He.exec(r)[0])), !oe.tbody)
                        for (r = "table" !== l || We.test(r) ? "<table>" !== u[1] || We.test(r) ? 0 : a : a.firstChild, i = r && r.childNodes.length; i--;) ie.nodeName(c = r.childNodes[i], "tbody") && !c.childNodes.length && r.removeChild(c);
                    for (ie.merge(h, a.childNodes), a.textContent = ""; a.firstChild;) a.removeChild(a.firstChild);
                    a = p.lastChild
                } else h.push(t.createTextNode(r));
                for (a && p.removeChild(a), oe.appendChecked || ie.grep(m(h, "input"), y), d = 0; r = h[d++];)
                    if ((!n || -1 === ie.inArray(r, n)) && (s = ie.contains(r.ownerDocument, r), a = m(p.appendChild(r), "script"), s && C(a), o))
                        for (i = 0; r = a[i++];) Ye.test(r.type || "") && o.push(r);
                return a = null, p
            },
            cleanData: function(e, t) {
                for (var o, n, i, r, s = 0, a = ie.expando, l = ie.cache, c = oe.deleteExpando, u = ie.event.special; null != (o = e[s]); s++)
                    if ((t || ie.acceptData(o)) && (i = o[a], r = i && l[i])) {
                        if (r.events)
                            for (n in r.events) u[n] ? ie.event.remove(o, n) : ie.removeEvent(o, n, r.handle);
                        l[i] && (delete l[i], c ? delete o[a] : typeof o.removeAttribute !== Se ? o.removeAttribute(a) : o[a] = null, z.push(i))
                    }
            }
        }), ie.fn.extend({
            text: function(e) {
                return we(this, function(e) {
                    return void 0 === e ? ie.text(this) : this.empty().append((this[0] && this[0].ownerDocument || de).createTextNode(e))
                }, null, e, arguments.length)
            },
            append: function() {
                return this.domManip(arguments, function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = v(this, e);
                        t.appendChild(e)
                    }
                })
            },
            prepend: function() {
                return this.domManip(arguments, function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = v(this, e);
                        t.insertBefore(e, t.firstChild)
                    }
                })
            },
            before: function() {
                return this.domManip(arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this)
                })
            },
            after: function() {
                return this.domManip(arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                })
            },
            remove: function(e, t) {
                for (var o, n = e ? ie.filter(e, this) : this, i = 0; null != (o = n[i]); i++) t || 1 !== o.nodeType || ie.cleanData(m(o)), o.parentNode && (t && ie.contains(o.ownerDocument, o) && C(m(o, "script")), o.parentNode.removeChild(o));
                return this
            },
            empty: function() {
                for (var e, t = 0; null != (e = this[t]); t++) {
                    for (1 === e.nodeType && ie.cleanData(m(e, !1)); e.firstChild;) e.removeChild(e.firstChild);
                    e.options && ie.nodeName(e, "select") && (e.options.length = 0)
                }
                return this
            },
            clone: function(e, t) {
                return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function() {
                    return ie.clone(this, e, t)
                })
            },
            html: function(e) {
                return we(this, function(e) {
                    var t = this[0] || {},
                        o = 0,
                        n = this.length;
                    if (void 0 === e) return 1 === t.nodeType ? t.innerHTML.replace(Pe, "") : void 0;
                    if ("string" == typeof e && !Ke.test(e) && (oe.htmlSerialize || !Fe.test(e)) && (oe.leadingWhitespace || !He.test(e)) && !qe[(Ve.exec(e) || ["", ""])[1].toLowerCase()]) {
                        e = e.replace(Ue, "<$1></$2>");
                        try {
                            for (; n > o; o++) t = this[o] || {}, 1 === t.nodeType && (ie.cleanData(m(t, !1)), t.innerHTML = e);
                            t = 0
                        } catch (i) {}
                    }
                    t && this.empty().append(e)
                }, null, e, arguments.length)
            },
            replaceWith: function() {
                var e = arguments[0];
                return this.domManip(arguments, function(t) {
                    e = this.parentNode, ie.cleanData(m(this)), e && e.replaceChild(t, this)
                }), e && (e.length || e.nodeType) ? this : this.remove()
            },
            detach: function(e) {
                return this.remove(e, !0)
            },
            domManip: function(e, t) {
                e = $.apply([], e);
                var o, n, i, r, s, a, l = 0,
                    c = this.length,
                    u = this,
                    g = c - 1,
                    p = e[0],
                    h = ie.isFunction(p);
                if (h || c > 1 && "string" == typeof p && !oe.checkClone && je.test(p)) return this.each(function(o) {
                    var n = u.eq(o);
                    h && (e[0] = p.call(this, o, n.html())), n.domManip(e, t)
                });
                if (c && (a = ie.buildFragment(e, this[0].ownerDocument, !1, this), o = a.firstChild, 1 === a.childNodes.length && (a = o), o)) {
                    for (r = ie.map(m(a, "script"), _), i = r.length; c > l; l++) n = a, l !== g && (n = ie.clone(n, !0, !0), i && ie.merge(r, m(n, "script"))), t.call(this[l], n, l);
                    if (i)
                        for (s = r[r.length - 1].ownerDocument, ie.map(r, b), l = 0; i > l; l++) n = r[l], Ye.test(n.type || "") && !ie._data(n, "globalEval") && ie.contains(s, n) && (n.src ? ie._evalUrl && ie._evalUrl(n.src) : ie.globalEval((n.text || n.textContent || n.innerHTML || "").replace(ze, "")));
                    a = o = null
                }
                return this
            }
        }), ie.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function(e, t) {
            ie.fn[e] = function(e) {
                for (var o, n = 0, i = [], r = ie(e), s = r.length - 1; s >= n; n++) o = n === s ? this : this.clone(!0), ie(r[n])[t](o), Q.apply(i, o.get());
                return this.pushStack(i)
            }
        });
        var Je, Ze = {};
        ! function() {
            var e;
            oe.shrinkWrapBlocks = function() {
                if (null != e) return e;
                e = !1;
                var t, o, n;
                return o = de.getElementsByTagName("body")[0], o && o.style ? (t = de.createElement("div"), n = de.createElement("div"), n.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", o.appendChild(n).appendChild(t), typeof t.style.zoom !== Se && (t.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1", t.appendChild(de.createElement("div")).style.width = "5px", e = 3 !== t.offsetWidth), o.removeChild(n), e) : void 0
            }
        }();
        var et, tt, ot = /^margin/,
            nt = new RegExp("^(" + Ae + ")(?!px)[a-z%]+$", "i"),
            it = /^(top|right|bottom|left)$/;
        e.getComputedStyle ? (et = function(t) {
                return t.ownerDocument.defaultView.opener ? t.ownerDocument.defaultView.getComputedStyle(t, null) : e.getComputedStyle(t, null)
            }, tt = function(e, t, o) {
                var n, i, r, s, a = e.style;
                return o = o || et(e), s = o ? o.getPropertyValue(t) || o[t] : void 0, o && ("" !== s || ie.contains(e.ownerDocument, e) || (s = ie.style(e, t)), nt.test(s) && ot.test(t) && (n = a.width, i = a.minWidth, r = a.maxWidth, a.minWidth = a.maxWidth = a.width = s, s = o.width, a.width = n, a.minWidth = i, a.maxWidth = r)), void 0 === s ? s : s + ""
            }) : de.documentElement.currentStyle && (et = function(e) {
                return e.currentStyle
            }, tt = function(e, t, o) {
                var n, i, r, s, a = e.style;
                return o = o || et(e), s = o ? o[t] : void 0, null == s && a && a[t] && (s = a[t]), nt.test(s) && !it.test(t) && (n = a.left, i = e.runtimeStyle, r = i && i.left, r && (i.left = e.currentStyle.left), a.left = "fontSize" === t ? "1em" : s, s = a.pixelLeft + "px", a.left = n, r && (i.left = r)), void 0 === s ? s : s + "" || "auto"
            }),
            function() {
                function t() {
                    var t, o, n, i;
                    o = de.getElementsByTagName("body")[0], o && o.style && (t = de.createElement("div"), n = de.createElement("div"), n.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", o.appendChild(n).appendChild(t), t.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", r = s = !1, l = !0, e.getComputedStyle && (r = "1%" !== (e.getComputedStyle(t, null) || {}).top, s = "4px" === (e.getComputedStyle(t, null) || {
                        width: "4px"
                    }).width, i = t.appendChild(de.createElement("div")), i.style.cssText = t.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", i.style.marginRight = i.style.width = "0", t.style.width = "1px", l = !parseFloat((e.getComputedStyle(i, null) || {}).marginRight), t.removeChild(i)), t.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", i = t.getElementsByTagName("td"), i[0].style.cssText = "margin:0;border:0;padding:0;display:none", a = 0 === i[0].offsetHeight, a && (i[0].style.display = "", i[1].style.display = "none", a = 0 === i[0].offsetHeight), o.removeChild(n))
                }
                var o, n, i, r, s, a, l;
                o = de.createElement("div"), o.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", i = o.getElementsByTagName("a")[0], n = i && i.style, n && (n.cssText = "float:left;opacity:.5", oe.opacity = "0.5" === n.opacity, oe.cssFloat = !!n.cssFloat, o.style.backgroundClip = "content-box", o.cloneNode(!0).style.backgroundClip = "", oe.clearCloneStyle = "content-box" === o.style.backgroundClip, oe.boxSizing = "" === n.boxSizing || "" === n.MozBoxSizing || "" === n.WebkitBoxSizing, ie.extend(oe, {
                    reliableHiddenOffsets: function() {
                        return null == a && t(), a
                    },
                    boxSizingReliable: function() {
                        return null == s && t(), s
                    },
                    pixelPosition: function() {
                        return null == r && t(), r
                    },
                    reliableMarginRight: function() {
                        return null == l && t(), l
                    }
                }))
            }(), ie.swap = function(e, t, o, n) {
                var i, r, s = {};
                for (r in t) s[r] = e.style[r], e.style[r] = t[r];
                i = o.apply(e, n || []);
                for (r in t) e.style[r] = s[r];
                return i
            };
        var rt = /alpha\([^)]*\)/i,
            st = /opacity\s*=\s*([^)]*)/,
            at = /^(none|table(?!-c[ea]).+)/,
            lt = new RegExp("^(" + Ae + ")(.*)$", "i"),
            ct = new RegExp("^([+-])=(" + Ae + ")", "i"),
            ut = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            },
            gt = {
                letterSpacing: "0",
                fontWeight: "400"
            },
            pt = ["Webkit", "O", "Moz", "ms"];
        ie.extend({
            cssHooks: {
                opacity: {
                    get: function(e, t) {
                        if (t) {
                            var o = tt(e, "opacity");
                            return "" === o ? "1" : o
                        }
                    }
                }
            },
            cssNumber: {
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                "float": oe.cssFloat ? "cssFloat" : "styleFloat"
            },
            style: function(e, t, o, n) {
                if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                    var i, r, s, a = ie.camelCase(t),
                        l = e.style;
                    if (t = ie.cssProps[a] || (ie.cssProps[a] = B(l, a)), s = ie.cssHooks[t] || ie.cssHooks[a], void 0 === o) return s && "get" in s && void 0 !== (i = s.get(e, !1, n)) ? i : l[t];
                    if (r = typeof o, "string" === r && (i = ct.exec(o)) && (o = (i[1] + 1) * i[2] + parseFloat(ie.css(e, t)), r = "number"), null != o && o === o && ("number" !== r || ie.cssNumber[a] || (o += "px"), oe.clearCloneStyle || "" !== o || 0 !== t.indexOf("background") || (l[t] = "inherit"), !(s && "set" in s && void 0 === (o = s.set(e, o, n))))) try {
                        l[t] = o
                    } catch (c) {}
                }
            },
            css: function(e, t, o, n) {
                var i, r, s, a = ie.camelCase(t);
                return t = ie.cssProps[a] || (ie.cssProps[a] = B(e.style, a)), s = ie.cssHooks[t] || ie.cssHooks[a], s && "get" in s && (r = s.get(e, !0, o)), void 0 === r && (r = tt(e, t, n)), "normal" === r && t in gt && (r = gt[t]), "" === o || o ? (i = parseFloat(r), o === !0 || ie.isNumeric(i) ? i || 0 : r) : r
            }
        }), ie.each(["height", "width"], function(e, t) {
            ie.cssHooks[t] = {
                get: function(e, o, n) {
                    return o ? at.test(ie.css(e, "display")) && 0 === e.offsetWidth ? ie.swap(e, ut, function() {
                        return N(e, t, n)
                    }) : N(e, t, n) : void 0
                },
                set: function(e, o, n) {
                    var i = n && et(e);
                    return w(e, o, n ? I(e, t, n, oe.boxSizing && "border-box" === ie.css(e, "boxSizing", !1, i), i) : 0)
                }
            }
        }), oe.opacity || (ie.cssHooks.opacity = {
            get: function(e, t) {
                return st.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : t ? "1" : ""
            },
            set: function(e, t) {
                var o = e.style,
                    n = e.currentStyle,
                    i = ie.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "",
                    r = n && n.filter || o.filter || "";
                o.zoom = 1, (t >= 1 || "" === t) && "" === ie.trim(r.replace(rt, "")) && o.removeAttribute && (o.removeAttribute("filter"), "" === t || n && !n.filter) || (o.filter = rt.test(r) ? r.replace(rt, i) : r + " " + i)
            }
        }), ie.cssHooks.marginRight = A(oe.reliableMarginRight, function(e, t) {
            return t ? ie.swap(e, {
                display: "inline-block"
            }, tt, [e, "marginRight"]) : void 0
        }), ie.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function(e, t) {
            ie.cssHooks[e + t] = {
                expand: function(o) {
                    for (var n = 0, i = {}, r = "string" == typeof o ? o.split(" ") : [o]; 4 > n; n++) i[e + Be[n] + t] = r[n] || r[n - 2] || r[0];
                    return i
                }
            }, ot.test(e) || (ie.cssHooks[e + t].set = w)
        }), ie.fn.extend({
            css: function(e, t) {
                return we(this, function(e, t, o) {
                    var n, i, r = {},
                        s = 0;
                    if (ie.isArray(t)) {
                        for (n = et(e), i = t.length; i > s; s++) r[t[s]] = ie.css(e, t[s], !1, n);
                        return r
                    }
                    return void 0 !== o ? ie.style(e, t, o) : ie.css(e, t)
                }, e, t, arguments.length > 1)
            },
            show: function() {
                return x(this, !0)
            },
            hide: function() {
                return x(this)
            },
            toggle: function(e) {
                return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                    xe(this) ? ie(this).show() : ie(this).hide()
                })
            }
        }), ie.Tween = R, R.prototype = {
            constructor: R,
            init: function(e, t, o, n, i, r) {
                this.elem = e, this.prop = o, this.easing = i || "swing", this.options = t, this.start = this.now = this.cur(), this.end = n, this.unit = r || (ie.cssNumber[o] ? "" : "px")
            },
            cur: function() {
                var e = R.propHooks[this.prop];
                return e && e.get ? e.get(this) : R.propHooks._default.get(this)
            },
            run: function(e) {
                var t, o = R.propHooks[this.prop];
                return this.options.duration ? this.pos = t = ie.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), o && o.set ? o.set(this) : R.propHooks._default.set(this), this
            }
        }, R.prototype.init.prototype = R.prototype, R.propHooks = {
            _default: {
                get: function(e) {
                    var t;
                    return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = ie.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0) : e.elem[e.prop]
                },
                set: function(e) {
                    ie.fx.step[e.prop] ? ie.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[ie.cssProps[e.prop]] || ie.cssHooks[e.prop]) ? ie.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
                }
            }
        }, R.propHooks.scrollTop = R.propHooks.scrollLeft = {
            set: function(e) {
                e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
            }
        }, ie.easing = {
            linear: function(e) {
                return e
            },
            swing: function(e) {
                return .5 - Math.cos(e * Math.PI) / 2
            }
        }, ie.fx = R.prototype.init, ie.fx.step = {};
        var ht, dt, ft = /^(?:toggle|show|hide)$/,
            mt = new RegExp("^(?:([+-])=|)(" + Ae + ")([a-z%]*)$", "i"),
            yt = /queueHooks$/,
            vt = [M],
            _t = {
                "*": [function(e, t) {
                    var o = this.createTween(e, t),
                        n = o.cur(),
                        i = mt.exec(t),
                        r = i && i[3] || (ie.cssNumber[e] ? "" : "px"),
                        s = (ie.cssNumber[e] || "px" !== r && +n) && mt.exec(ie.css(o.elem, e)),
                        a = 1,
                        l = 20;
                    if (s && s[3] !== r) {
                        r = r || s[3], i = i || [], s = +n || 1;
                        do a = a || ".5", s /= a, ie.style(o.elem, e, s + r); while (a !== (a = o.cur() / n) && 1 !== a && --l)
                    }
                    return i && (s = o.start = +s || +n || 0, o.unit = r, o.end = i[1] ? s + (i[1] + 1) * i[2] : +i[2]), o
                }]
            };
        ie.Animation = ie.extend(F, {
                tweener: function(e, t) {
                    ie.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" ");
                    for (var o, n = 0, i = e.length; i > n; n++) o = e[n], _t[o] = _t[o] || [], _t[o].unshift(t)
                },
                prefilter: function(e, t) {
                    t ? vt.unshift(e) : vt.push(e)
                }
            }), ie.speed = function(e, t, o) {
                var n = e && "object" == typeof e ? ie.extend({}, e) : {
                    complete: o || !o && t || ie.isFunction(e) && e,
                    duration: e,
                    easing: o && t || t && !ie.isFunction(t) && t
                };
                return n.duration = ie.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in ie.fx.speeds ? ie.fx.speeds[n.duration] : ie.fx.speeds._default, null != n.queue && n.queue !== !0 || (n.queue = "fx"), n.old = n.complete, n.complete = function() {
                    ie.isFunction(n.old) && n.old.call(this), n.queue && ie.dequeue(this, n.queue)
                }, n
            }, ie.fn.extend({
                fadeTo: function(e, t, o, n) {
                    return this.filter(xe).css("opacity", 0).show().end().animate({
                        opacity: t
                    }, e, o, n)
                },
                animate: function(e, t, o, n) {
                    var i = ie.isEmptyObject(e),
                        r = ie.speed(t, o, n),
                        s = function() {
                            var t = F(this, ie.extend({}, e), r);
                            (i || ie._data(this, "finish")) && t.stop(!0)
                        };
                    return s.finish = s, i || r.queue === !1 ? this.each(s) : this.queue(r.queue, s)
                },
                stop: function(e, t, o) {
                    var n = function(e) {
                        var t = e.stop;
                        delete e.stop, t(o)
                    };
                    return "string" != typeof e && (o = t, t = e, e = void 0), t && e !== !1 && this.queue(e || "fx", []), this.each(function() {
                        var t = !0,
                            i = null != e && e + "queueHooks",
                            r = ie.timers,
                            s = ie._data(this);
                        if (i) s[i] && s[i].stop && n(s[i]);
                        else
                            for (i in s) s[i] && s[i].stop && yt.test(i) && n(s[i]);
                        for (i = r.length; i--;) r[i].elem !== this || null != e && r[i].queue !== e || (r[i].anim.stop(o), t = !1, r.splice(i, 1));
                        !t && o || ie.dequeue(this, e)
                    })
                },
                finish: function(e) {
                    return e !== !1 && (e = e || "fx"), this.each(function() {
                        var t, o = ie._data(this),
                            n = o[e + "queue"],
                            i = o[e + "queueHooks"],
                            r = ie.timers,
                            s = n ? n.length : 0;
                        for (o.finish = !0, ie.queue(this, e, []), i && i.stop && i.stop.call(this, !0), t = r.length; t--;) r[t].elem === this && r[t].queue === e && (r[t].anim.stop(!0), r.splice(t, 1));
                        for (t = 0; s > t; t++) n[t] && n[t].finish && n[t].finish.call(this);
                        delete o.finish
                    })
                }
            }), ie.each(["toggle", "show", "hide"], function(e, t) {
                var o = ie.fn[t];
                ie.fn[t] = function(e, n, i) {
                    return null == e || "boolean" == typeof e ? o.apply(this, arguments) : this.animate(O(t, !0), e, n, i)
                }
            }), ie.each({
                slideDown: O("show"),
                slideUp: O("hide"),
                slideToggle: O("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function(e, t) {
                ie.fn[e] = function(e, o, n) {
                    return this.animate(t, e, o, n)
                }
            }), ie.timers = [], ie.fx.tick = function() {
                var e, t = ie.timers,
                    o = 0;
                for (ht = ie.now(); o < t.length; o++) e = t[o], e() || t[o] !== e || t.splice(o--, 1);
                t.length || ie.fx.stop(), ht = void 0
            }, ie.fx.timer = function(e) {
                ie.timers.push(e), e() ? ie.fx.start() : ie.timers.pop()
            }, ie.fx.interval = 13, ie.fx.start = function() {
                dt || (dt = setInterval(ie.fx.tick, ie.fx.interval))
            }, ie.fx.stop = function() {
                clearInterval(dt), dt = null
            }, ie.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            }, ie.fn.delay = function(e, t) {
                return e = ie.fx ? ie.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, o) {
                    var n = setTimeout(t, e);
                    o.stop = function() {
                        clearTimeout(n)
                    }
                })
            },
            function() {
                var e, t, o, n, i;
                t = de.createElement("div"), t.setAttribute("className", "t"), t.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", n = t.getElementsByTagName("a")[0], o = de.createElement("select"), i = o.appendChild(de.createElement("option")), e = t.getElementsByTagName("input")[0], n.style.cssText = "top:1px", oe.getSetAttribute = "t" !== t.className, oe.style = /top/.test(n.getAttribute("style")), oe.hrefNormalized = "/a" === n.getAttribute("href"), oe.checkOn = !!e.value, oe.optSelected = i.selected, oe.enctype = !!de.createElement("form").enctype, o.disabled = !0, oe.optDisabled = !i.disabled, e = de.createElement("input"), e.setAttribute("value", ""), oe.input = "" === e.getAttribute("value"), e.value = "t", e.setAttribute("type", "radio"), oe.radioValue = "t" === e.value
            }();
        var bt = /\r/g;
        ie.fn.extend({
            val: function(e) {
                var t, o, n, i = this[0]; {
                    if (arguments.length) return n = ie.isFunction(e), this.each(function(o) {
                        var i;
                        1 === this.nodeType && (i = n ? e.call(this, o, ie(this).val()) : e, null == i ? i = "" : "number" == typeof i ? i += "" : ie.isArray(i) && (i = ie.map(i, function(e) {
                            return null == e ? "" : e + ""
                        })), t = ie.valHooks[this.type] || ie.valHooks[this.nodeName.toLowerCase()], t && "set" in t && void 0 !== t.set(this, i, "value") || (this.value = i))
                    });
                    if (i) return t = ie.valHooks[i.type] || ie.valHooks[i.nodeName.toLowerCase()], t && "get" in t && void 0 !== (o = t.get(i, "value")) ? o : (o = i.value, "string" == typeof o ? o.replace(bt, "") : null == o ? "" : o)
                }
            }
        }), ie.extend({
            valHooks: {
                option: {
                    get: function(e) {
                        var t = ie.find.attr(e, "value");
                        return null != t ? t : ie.trim(ie.text(e))
                    }
                },
                select: {
                    get: function(e) {
                        for (var t, o, n = e.options, i = e.selectedIndex, r = "select-one" === e.type || 0 > i, s = r ? null : [], a = r ? i + 1 : n.length, l = 0 > i ? a : r ? i : 0; a > l; l++)
                            if (o = n[l], (o.selected || l === i) && (oe.optDisabled ? !o.disabled : null === o.getAttribute("disabled")) && (!o.parentNode.disabled || !ie.nodeName(o.parentNode, "optgroup"))) {
                                if (t = ie(o).val(), r) return t;
                                s.push(t)
                            }
                        return s
                    },
                    set: function(e, t) {
                        for (var o, n, i = e.options, r = ie.makeArray(t), s = i.length; s--;)
                            if (n = i[s], ie.inArray(ie.valHooks.option.get(n), r) >= 0) try {
                                n.selected = o = !0
                            } catch (a) {
                                n.scrollHeight
                            } else n.selected = !1;
                        return o || (e.selectedIndex = -1), i
                    }
                }
            }
        }), ie.each(["radio", "checkbox"], function() {
            ie.valHooks[this] = {
                set: function(e, t) {
                    return ie.isArray(t) ? e.checked = ie.inArray(ie(e).val(), t) >= 0 : void 0
                }
            }, oe.checkOn || (ie.valHooks[this].get = function(e) {
                return null === e.getAttribute("value") ? "on" : e.value
            })
        });
        var Ct, Et, St = ie.expr.attrHandle,
            Tt = /^(?:checked|selected)$/i,
            kt = oe.getSetAttribute,
            At = oe.input;
        ie.fn.extend({
            attr: function(e, t) {
                return we(this, ie.attr, e, t, arguments.length > 1)
            },
            removeAttr: function(e) {
                return this.each(function() {
                    ie.removeAttr(this, e)
                })
            }
        }), ie.extend({
            attr: function(e, t, o) {
                var n, i, r = e.nodeType;
                if (e && 3 !== r && 8 !== r && 2 !== r) return typeof e.getAttribute === Se ? ie.prop(e, t, o) : (1 === r && ie.isXMLDoc(e) || (t = t.toLowerCase(), n = ie.attrHooks[t] || (ie.expr.match.bool.test(t) ? Et : Ct)), void 0 === o ? n && "get" in n && null !== (i = n.get(e, t)) ? i : (i = ie.find.attr(e, t), null == i ? void 0 : i) : null !== o ? n && "set" in n && void 0 !== (i = n.set(e, o, t)) ? i : (e.setAttribute(t, o + ""), o) : void ie.removeAttr(e, t))
            },
            removeAttr: function(e, t) {
                var o, n, i = 0,
                    r = t && t.match(_e);
                if (r && 1 === e.nodeType)
                    for (; o = r[i++];) n = ie.propFix[o] || o, ie.expr.match.bool.test(o) ? At && kt || !Tt.test(o) ? e[n] = !1 : e[ie.camelCase("default-" + o)] = e[n] = !1 : ie.attr(e, o, ""), e.removeAttribute(kt ? o : n)
            },
            attrHooks: {
                type: {
                    set: function(e, t) {
                        if (!oe.radioValue && "radio" === t && ie.nodeName(e, "input")) {
                            var o = e.value;
                            return e.setAttribute("type", t), o && (e.value = o), t
                        }
                    }
                }
            }
        }), Et = {
            set: function(e, t, o) {
                return t === !1 ? ie.removeAttr(e, o) : At && kt || !Tt.test(o) ? e.setAttribute(!kt && ie.propFix[o] || o, o) : e[ie.camelCase("default-" + o)] = e[o] = !0, o
            }
        }, ie.each(ie.expr.match.bool.source.match(/\w+/g), function(e, t) {
            var o = St[t] || ie.find.attr;
            St[t] = At && kt || !Tt.test(t) ? function(e, t, n) {
                var i, r;
                return n || (r = St[t],
                    St[t] = i, i = null != o(e, t, n) ? t.toLowerCase() : null, St[t] = r), i
            } : function(e, t, o) {
                return o ? void 0 : e[ie.camelCase("default-" + t)] ? t.toLowerCase() : null
            }
        }), At && kt || (ie.attrHooks.value = {
            set: function(e, t, o) {
                return ie.nodeName(e, "input") ? void(e.defaultValue = t) : Ct && Ct.set(e, t, o)
            }
        }), kt || (Ct = {
            set: function(e, t, o) {
                var n = e.getAttributeNode(o);
                return n || e.setAttributeNode(n = e.ownerDocument.createAttribute(o)), n.value = t += "", "value" === o || t === e.getAttribute(o) ? t : void 0
            }
        }, St.id = St.name = St.coords = function(e, t, o) {
            var n;
            return o ? void 0 : (n = e.getAttributeNode(t)) && "" !== n.value ? n.value : null
        }, ie.valHooks.button = {
            get: function(e, t) {
                var o = e.getAttributeNode(t);
                return o && o.specified ? o.value : void 0
            },
            set: Ct.set
        }, ie.attrHooks.contenteditable = {
            set: function(e, t, o) {
                Ct.set(e, "" === t ? !1 : t, o)
            }
        }, ie.each(["width", "height"], function(e, t) {
            ie.attrHooks[t] = {
                set: function(e, o) {
                    return "" === o ? (e.setAttribute(t, "auto"), o) : void 0
                }
            }
        })), oe.style || (ie.attrHooks.style = {
            get: function(e) {
                return e.style.cssText || void 0
            },
            set: function(e, t) {
                return e.style.cssText = t + ""
            }
        });
        var Bt = /^(?:input|select|textarea|button|object)$/i,
            xt = /^(?:a|area)$/i;
        ie.fn.extend({
            prop: function(e, t) {
                return we(this, ie.prop, e, t, arguments.length > 1)
            },
            removeProp: function(e) {
                return e = ie.propFix[e] || e, this.each(function() {
                    try {
                        this[e] = void 0, delete this[e]
                    } catch (t) {}
                })
            }
        }), ie.extend({
            propFix: {
                "for": "htmlFor",
                "class": "className"
            },
            prop: function(e, t, o) {
                var n, i, r, s = e.nodeType;
                if (e && 3 !== s && 8 !== s && 2 !== s) return r = 1 !== s || !ie.isXMLDoc(e), r && (t = ie.propFix[t] || t, i = ie.propHooks[t]), void 0 !== o ? i && "set" in i && void 0 !== (n = i.set(e, o, t)) ? n : e[t] = o : i && "get" in i && null !== (n = i.get(e, t)) ? n : e[t]
            },
            propHooks: {
                tabIndex: {
                    get: function(e) {
                        var t = ie.find.attr(e, "tabindex");
                        return t ? parseInt(t, 10) : Bt.test(e.nodeName) || xt.test(e.nodeName) && e.href ? 0 : -1
                    }
                }
            }
        }), oe.hrefNormalized || ie.each(["href", "src"], function(e, t) {
            ie.propHooks[t] = {
                get: function(e) {
                    return e.getAttribute(t, 4)
                }
            }
        }), oe.optSelected || (ie.propHooks.selected = {
            get: function(e) {
                var t = e.parentNode;
                return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null
            }
        }), ie.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
            ie.propFix[this.toLowerCase()] = this
        }), oe.enctype || (ie.propFix.enctype = "encoding");
        var wt = /[\t\r\n\f]/g;
        ie.fn.extend({
            addClass: function(e) {
                var t, o, n, i, r, s, a = 0,
                    l = this.length,
                    c = "string" == typeof e && e;
                if (ie.isFunction(e)) return this.each(function(t) {
                    ie(this).addClass(e.call(this, t, this.className))
                });
                if (c)
                    for (t = (e || "").match(_e) || []; l > a; a++)
                        if (o = this[a], n = 1 === o.nodeType && (o.className ? (" " + o.className + " ").replace(wt, " ") : " ")) {
                            for (r = 0; i = t[r++];) n.indexOf(" " + i + " ") < 0 && (n += i + " ");
                            s = ie.trim(n), o.className !== s && (o.className = s)
                        }
                return this
            },
            removeClass: function(e) {
                var t, o, n, i, r, s, a = 0,
                    l = this.length,
                    c = 0 === arguments.length || "string" == typeof e && e;
                if (ie.isFunction(e)) return this.each(function(t) {
                    ie(this).removeClass(e.call(this, t, this.className))
                });
                if (c)
                    for (t = (e || "").match(_e) || []; l > a; a++)
                        if (o = this[a], n = 1 === o.nodeType && (o.className ? (" " + o.className + " ").replace(wt, " ") : "")) {
                            for (r = 0; i = t[r++];)
                                for (; n.indexOf(" " + i + " ") >= 0;) n = n.replace(" " + i + " ", " ");
                            s = e ? ie.trim(n) : "", o.className !== s && (o.className = s)
                        }
                return this
            },
            toggleClass: function(e, t) {
                var o = typeof e;
                return "boolean" == typeof t && "string" === o ? t ? this.addClass(e) : this.removeClass(e) : ie.isFunction(e) ? this.each(function(o) {
                    ie(this).toggleClass(e.call(this, o, this.className, t), t)
                }) : this.each(function() {
                    if ("string" === o)
                        for (var t, n = 0, i = ie(this), r = e.match(_e) || []; t = r[n++];) i.hasClass(t) ? i.removeClass(t) : i.addClass(t);
                    else o !== Se && "boolean" !== o || (this.className && ie._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : ie._data(this, "__className__") || "")
                })
            },
            hasClass: function(e) {
                for (var t = " " + e + " ", o = 0, n = this.length; n > o; o++)
                    if (1 === this[o].nodeType && (" " + this[o].className + " ").replace(wt, " ").indexOf(t) >= 0) return !0;
                return !1
            }
        }), ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
            ie.fn[t] = function(e, o) {
                return arguments.length > 0 ? this.on(t, null, e, o) : this.trigger(t)
            }
        }), ie.fn.extend({
            hover: function(e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            },
            bind: function(e, t, o) {
                return this.on(e, null, t, o)
            },
            unbind: function(e, t) {
                return this.off(e, null, t)
            },
            delegate: function(e, t, o, n) {
                return this.on(t, e, o, n)
            },
            undelegate: function(e, t, o) {
                return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", o)
            }
        });
        var It = ie.now(),
            Nt = /\?/,
            Rt = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
        ie.parseJSON = function(t) {
            if (e.JSON && e.JSON.parse) return e.JSON.parse(t + "");
            var o, n = null,
                i = ie.trim(t + "");
            return i && !ie.trim(i.replace(Rt, function(e, t, i, r) {
                return o && t && (n = 0), 0 === n ? e : (o = i || t, n += !r - !i, "")
            })) ? Function("return " + i)() : ie.error("Invalid JSON: " + t)
        }, ie.parseXML = function(t) {
            var o, n;
            if (!t || "string" != typeof t) return null;
            try {
                e.DOMParser ? (n = new DOMParser, o = n.parseFromString(t, "text/xml")) : (o = new ActiveXObject("Microsoft.XMLDOM"), o.async = "false", o.loadXML(t))
            } catch (i) {
                o = void 0
            }
            return o && o.documentElement && !o.getElementsByTagName("parsererror").length || ie.error("Invalid XML: " + t), o
        };
        var Lt, Ot, Dt = /#.*$/,
            Mt = /([?&])_=[^&]*/,
            Pt = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
            Ft = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
            Ht = /^(?:GET|HEAD)$/,
            Ut = /^\/\//,
            Vt = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
            Wt = {},
            Gt = {},
            Kt = "*/".concat("*");
        try {
            Ot = location.href
        } catch (jt) {
            Ot = de.createElement("a"), Ot.href = "", Ot = Ot.href
        }
        Lt = Vt.exec(Ot.toLowerCase()) || [], ie.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: Ot,
                type: "GET",
                isLocal: Ft.test(Lt[1]),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": Kt,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /xml/,
                    html: /html/,
                    json: /json/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": ie.parseJSON,
                    "text xml": ie.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(e, t) {
                return t ? V(V(e, ie.ajaxSettings), t) : V(ie.ajaxSettings, e)
            },
            ajaxPrefilter: H(Wt),
            ajaxTransport: H(Gt),
            ajax: function(e, t) {
                function o(e, t, o, n) {
                    var i, u, y, v, b, E = t;
                    2 !== _ && (_ = 2, a && clearTimeout(a), c = void 0, s = n || "", C.readyState = e > 0 ? 4 : 0, i = e >= 200 && 300 > e || 304 === e, o && (v = W(g, C, o)), v = G(g, v, C, i), i ? (g.ifModified && (b = C.getResponseHeader("Last-Modified"), b && (ie.lastModified[r] = b), b = C.getResponseHeader("etag"), b && (ie.etag[r] = b)), 204 === e || "HEAD" === g.type ? E = "nocontent" : 304 === e ? E = "notmodified" : (E = v.state, u = v.data, y = v.error, i = !y)) : (y = E, !e && E || (E = "error", 0 > e && (e = 0))), C.status = e, C.statusText = (t || E) + "", i ? d.resolveWith(p, [u, E, C]) : d.rejectWith(p, [C, E, y]), C.statusCode(m), m = void 0, l && h.trigger(i ? "ajaxSuccess" : "ajaxError", [C, g, i ? u : y]), f.fireWith(p, [C, E]), l && (h.trigger("ajaxComplete", [C, g]), --ie.active || ie.event.trigger("ajaxStop")))
                }
                "object" == typeof e && (t = e, e = void 0), t = t || {};
                var n, i, r, s, a, l, c, u, g = ie.ajaxSetup({}, t),
                    p = g.context || g,
                    h = g.context && (p.nodeType || p.jquery) ? ie(p) : ie.event,
                    d = ie.Deferred(),
                    f = ie.Callbacks("once memory"),
                    m = g.statusCode || {},
                    y = {},
                    v = {},
                    _ = 0,
                    b = "canceled",
                    C = {
                        readyState: 0,
                        getResponseHeader: function(e) {
                            var t;
                            if (2 === _) {
                                if (!u)
                                    for (u = {}; t = Pt.exec(s);) u[t[1].toLowerCase()] = t[2];
                                t = u[e.toLowerCase()]
                            }
                            return null == t ? null : t
                        },
                        getAllResponseHeaders: function() {
                            return 2 === _ ? s : null
                        },
                        setRequestHeader: function(e, t) {
                            var o = e.toLowerCase();
                            return _ || (e = v[o] = v[o] || e, y[e] = t), this
                        },
                        overrideMimeType: function(e) {
                            return _ || (g.mimeType = e), this
                        },
                        statusCode: function(e) {
                            var t;
                            if (e)
                                if (2 > _)
                                    for (t in e) m[t] = [m[t], e[t]];
                                else C.always(e[C.status]);
                            return this
                        },
                        abort: function(e) {
                            var t = e || b;
                            return c && c.abort(t), o(0, t), this
                        }
                    };
                if (d.promise(C).complete = f.add, C.success = C.done, C.error = C.fail, g.url = ((e || g.url || Ot) + "").replace(Dt, "").replace(Ut, Lt[1] + "//"), g.type = t.method || t.type || g.method || g.type, g.dataTypes = ie.trim(g.dataType || "*").toLowerCase().match(_e) || [""], null == g.crossDomain && (n = Vt.exec(g.url.toLowerCase()), g.crossDomain = !(!n || n[1] === Lt[1] && n[2] === Lt[2] && (n[3] || ("http:" === n[1] ? "80" : "443")) === (Lt[3] || ("http:" === Lt[1] ? "80" : "443")))), g.data && g.processData && "string" != typeof g.data && (g.data = ie.param(g.data, g.traditional)), U(Wt, g, t, C), 2 === _) return C;
                l = ie.event && g.global, l && 0 === ie.active++ && ie.event.trigger("ajaxStart"), g.type = g.type.toUpperCase(), g.hasContent = !Ht.test(g.type), r = g.url, g.hasContent || (g.data && (r = g.url += (Nt.test(r) ? "&" : "?") + g.data, delete g.data), g.cache === !1 && (g.url = Mt.test(r) ? r.replace(Mt, "$1_=" + It++) : r + (Nt.test(r) ? "&" : "?") + "_=" + It++)), g.ifModified && (ie.lastModified[r] && C.setRequestHeader("If-Modified-Since", ie.lastModified[r]), ie.etag[r] && C.setRequestHeader("If-None-Match", ie.etag[r])), (g.data && g.hasContent && g.contentType !== !1 || t.contentType) && C.setRequestHeader("Content-Type", g.contentType), C.setRequestHeader("Accept", g.dataTypes[0] && g.accepts[g.dataTypes[0]] ? g.accepts[g.dataTypes[0]] + ("*" !== g.dataTypes[0] ? ", " + Kt + "; q=0.01" : "") : g.accepts["*"]);
                for (i in g.headers) C.setRequestHeader(i, g.headers[i]);
                if (g.beforeSend && (g.beforeSend.call(p, C, g) === !1 || 2 === _)) return C.abort();
                b = "abort";
                for (i in {
                        success: 1,
                        error: 1,
                        complete: 1
                    }) C[i](g[i]);
                if (c = U(Gt, g, t, C)) {
                    C.readyState = 1, l && h.trigger("ajaxSend", [C, g]), g.async && g.timeout > 0 && (a = setTimeout(function() {
                        C.abort("timeout")
                    }, g.timeout));
                    try {
                        _ = 1, c.send(y, o)
                    } catch (E) {
                        if (!(2 > _)) throw E;
                        o(-1, E)
                    }
                } else o(-1, "No Transport");
                return C
            },
            getJSON: function(e, t, o) {
                return ie.get(e, t, o, "json")
            },
            getScript: function(e, t) {
                return ie.get(e, void 0, t, "script")
            }
        }), ie.each(["get", "post"], function(e, t) {
            ie[t] = function(e, o, n, i) {
                return ie.isFunction(o) && (i = i || n, n = o, o = void 0), ie.ajax({
                    url: e,
                    type: t,
                    dataType: i,
                    data: o,
                    success: n
                })
            }
        }), ie._evalUrl = function(e) {
            return ie.ajax({
                url: e,
                type: "GET",
                dataType: "script",
                async: !1,
                global: !1,
                "throws": !0
            })
        }, ie.fn.extend({
            wrapAll: function(e) {
                if (ie.isFunction(e)) return this.each(function(t) {
                    ie(this).wrapAll(e.call(this, t))
                });
                if (this[0]) {
                    var t = ie(e, this[0].ownerDocument).eq(0).clone(!0);
                    this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                        for (var e = this; e.firstChild && 1 === e.firstChild.nodeType;) e = e.firstChild;
                        return e
                    }).append(this)
                }
                return this
            },
            wrapInner: function(e) {
                return ie.isFunction(e) ? this.each(function(t) {
                    ie(this).wrapInner(e.call(this, t))
                }) : this.each(function() {
                    var t = ie(this),
                        o = t.contents();
                    o.length ? o.wrapAll(e) : t.append(e)
                })
            },
            wrap: function(e) {
                var t = ie.isFunction(e);
                return this.each(function(o) {
                    ie(this).wrapAll(t ? e.call(this, o) : e)
                })
            },
            unwrap: function() {
                return this.parent().each(function() {
                    ie.nodeName(this, "body") || ie(this).replaceWith(this.childNodes)
                }).end()
            }
        }), ie.expr.filters.hidden = function(e) {
            return e.offsetWidth <= 0 && e.offsetHeight <= 0 || !oe.reliableHiddenOffsets() && "none" === (e.style && e.style.display || ie.css(e, "display"))
        }, ie.expr.filters.visible = function(e) {
            return !ie.expr.filters.hidden(e)
        };
        var Yt = /%20/g,
            Xt = /\[\]$/,
            zt = /\r?\n/g,
            qt = /^(?:submit|button|image|reset|file)$/i,
            $t = /^(?:input|select|textarea|keygen)/i;
        ie.param = function(e, t) {
            var o, n = [],
                i = function(e, t) {
                    t = ie.isFunction(t) ? t() : null == t ? "" : t, n[n.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
                };
            if (void 0 === t && (t = ie.ajaxSettings && ie.ajaxSettings.traditional), ie.isArray(e) || e.jquery && !ie.isPlainObject(e)) ie.each(e, function() {
                i(this.name, this.value)
            });
            else
                for (o in e) K(o, e[o], t, i);
            return n.join("&").replace(Yt, "+")
        }, ie.fn.extend({
            serialize: function() {
                return ie.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map(function() {
                    var e = ie.prop(this, "elements");
                    return e ? ie.makeArray(e) : this
                }).filter(function() {
                    var e = this.type;
                    return this.name && !ie(this).is(":disabled") && $t.test(this.nodeName) && !qt.test(e) && (this.checked || !Ie.test(e))
                }).map(function(e, t) {
                    var o = ie(this).val();
                    return null == o ? null : ie.isArray(o) ? ie.map(o, function(e) {
                        return {
                            name: t.name,
                            value: e.replace(zt, "\r\n")
                        }
                    }) : {
                        name: t.name,
                        value: o.replace(zt, "\r\n")
                    }
                }).get()
            }
        }), ie.ajaxSettings.xhr = void 0 !== e.ActiveXObject ? function() {
            return !this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && j() || Y()
        } : j;
        var Qt = 0,
            Jt = {},
            Zt = ie.ajaxSettings.xhr();
        e.attachEvent && e.attachEvent("onunload", function() {
            for (var e in Jt) Jt[e](void 0, !0)
        }), oe.cors = !!Zt && "withCredentials" in Zt, Zt = oe.ajax = !!Zt, Zt && ie.ajaxTransport(function(e) {
            if (!e.crossDomain || oe.cors) {
                var t;
                return {
                    send: function(o, n) {
                        var i, r = e.xhr(),
                            s = ++Qt;
                        if (r.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields)
                            for (i in e.xhrFields) r[i] = e.xhrFields[i];
                        e.mimeType && r.overrideMimeType && r.overrideMimeType(e.mimeType), e.crossDomain || o["X-Requested-With"] || (o["X-Requested-With"] = "XMLHttpRequest");
                        for (i in o) void 0 !== o[i] && r.setRequestHeader(i, o[i] + "");
                        r.send(e.hasContent && e.data || null), t = function(o, i) {
                            var a, l, c;
                            if (t && (i || 4 === r.readyState))
                                if (delete Jt[s], t = void 0, r.onreadystatechange = ie.noop, i) 4 !== r.readyState && r.abort();
                                else {
                                    c = {}, a = r.status, "string" == typeof r.responseText && (c.text = r.responseText);
                                    try {
                                        l = r.statusText
                                    } catch (u) {
                                        l = ""
                                    }
                                    a || !e.isLocal || e.crossDomain ? 1223 === a && (a = 204) : a = c.text ? 200 : 404
                                }
                            c && n(a, l, c, r.getAllResponseHeaders())
                        }, e.async ? 4 === r.readyState ? setTimeout(t) : r.onreadystatechange = Jt[s] = t : t()
                    },
                    abort: function() {
                        t && t(void 0, !0)
                    }
                }
            }
        }), ie.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /(?:java|ecma)script/
            },
            converters: {
                "text script": function(e) {
                    return ie.globalEval(e), e
                }
            }
        }), ie.ajaxPrefilter("script", function(e) {
            void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1)
        }), ie.ajaxTransport("script", function(e) {
            if (e.crossDomain) {
                var t, o = de.head || ie("head")[0] || de.documentElement;
                return {
                    send: function(n, i) {
                        t = de.createElement("script"), t.async = !0, e.scriptCharset && (t.charset = e.scriptCharset), t.src = e.url, t.onload = t.onreadystatechange = function(e, o) {
                            (o || !t.readyState || /loaded|complete/.test(t.readyState)) && (t.onload = t.onreadystatechange = null, t.parentNode && t.parentNode.removeChild(t), t = null, o || i(200, "success"))
                        }, o.insertBefore(t, o.firstChild)
                    },
                    abort: function() {
                        t && t.onload(void 0, !0)
                    }
                }
            }
        });
        var eo = [],
            to = /(=)\?(?=&|$)|\?\?/;
        ie.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var e = eo.pop() || ie.expando + "_" + It++;
                return this[e] = !0, e
            }
        }), ie.ajaxPrefilter("json jsonp", function(t, o, n) {
            var i, r, s, a = t.jsonp !== !1 && (to.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && to.test(t.data) && "data");
            return a || "jsonp" === t.dataTypes[0] ? (i = t.jsonpCallback = ie.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, a ? t[a] = t[a].replace(to, "$1" + i) : t.jsonp !== !1 && (t.url += (Nt.test(t.url) ? "&" : "?") + t.jsonp + "=" + i), t.converters["script json"] = function() {
                return s || ie.error(i + " was not called"), s[0]
            }, t.dataTypes[0] = "json", r = e[i], e[i] = function() {
                s = arguments
            }, n.always(function() {
                e[i] = r, t[i] && (t.jsonpCallback = o.jsonpCallback, eo.push(i)), s && ie.isFunction(r) && r(s[0]), s = r = void 0
            }), "script") : void 0
        }), ie.parseHTML = function(e, t, o) {
            if (!e || "string" != typeof e) return null;
            "boolean" == typeof t && (o = t, t = !1), t = t || de;
            var n = ge.exec(e),
                i = !o && [];
            return n ? [t.createElement(n[1])] : (n = ie.buildFragment([e], t, i), i && i.length && ie(i).remove(), ie.merge([], n.childNodes))
        };
        var oo = ie.fn.load;
        ie.fn.load = function(e, t, o) {
            if ("string" != typeof e && oo) return oo.apply(this, arguments);
            var n, i, r, s = this,
                a = e.indexOf(" ");
            return a >= 0 && (n = ie.trim(e.slice(a, e.length)), e = e.slice(0, a)), ie.isFunction(t) ? (o = t, t = void 0) : t && "object" == typeof t && (r = "POST"), s.length > 0 && ie.ajax({
                url: e,
                type: r,
                dataType: "html",
                data: t
            }).done(function(e) {
                i = arguments, s.html(n ? ie("<div>").append(ie.parseHTML(e)).find(n) : e)
            }).complete(o && function(e, t) {
                s.each(o, i || [e.responseText, t, e])
            }), this
        }, ie.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
            ie.fn[t] = function(e) {
                return this.on(t, e)
            }
        }), ie.expr.filters.animated = function(e) {
            return ie.grep(ie.timers, function(t) {
                return e === t.elem
            }).length
        };
        var no = e.document.documentElement;
        ie.offset = {
            setOffset: function(e, t, o) {
                var n, i, r, s, a, l, c, u = ie.css(e, "position"),
                    g = ie(e),
                    p = {};
                "static" === u && (e.style.position = "relative"), a = g.offset(), r = ie.css(e, "top"), l = ie.css(e, "left"), c = ("absolute" === u || "fixed" === u) && ie.inArray("auto", [r, l]) > -1, c ? (n = g.position(), s = n.top, i = n.left) : (s = parseFloat(r) || 0, i = parseFloat(l) || 0), ie.isFunction(t) && (t = t.call(e, o, a)), null != t.top && (p.top = t.top - a.top + s), null != t.left && (p.left = t.left - a.left + i), "using" in t ? t.using.call(e, p) : g.css(p)
            }
        }, ie.fn.extend({
            offset: function(e) {
                if (arguments.length) return void 0 === e ? this : this.each(function(t) {
                    ie.offset.setOffset(this, e, t)
                });
                var t, o, n = {
                        top: 0,
                        left: 0
                    },
                    i = this[0],
                    r = i && i.ownerDocument;
                if (r) return t = r.documentElement, ie.contains(t, i) ? (typeof i.getBoundingClientRect !== Se && (n = i.getBoundingClientRect()), o = X(r), {
                    top: n.top + (o.pageYOffset || t.scrollTop) - (t.clientTop || 0),
                    left: n.left + (o.pageXOffset || t.scrollLeft) - (t.clientLeft || 0)
                }) : n
            },
            position: function() {
                if (this[0]) {
                    var e, t, o = {
                            top: 0,
                            left: 0
                        },
                        n = this[0];
                    return "fixed" === ie.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), ie.nodeName(e[0], "html") || (o = e.offset()), o.top += ie.css(e[0], "borderTopWidth", !0), o.left += ie.css(e[0], "borderLeftWidth", !0)), {
                        top: t.top - o.top - ie.css(n, "marginTop", !0),
                        left: t.left - o.left - ie.css(n, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function() {
                return this.map(function() {
                    for (var e = this.offsetParent || no; e && !ie.nodeName(e, "html") && "static" === ie.css(e, "position");) e = e.offsetParent;
                    return e || no
                })
            }
        }), ie.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function(e, t) {
            var o = /Y/.test(t);
            ie.fn[e] = function(n) {
                return we(this, function(e, n, i) {
                    var r = X(e);
                    return void 0 === i ? r ? t in r ? r[t] : r.document.documentElement[n] : e[n] : void(r ? r.scrollTo(o ? ie(r).scrollLeft() : i, o ? i : ie(r).scrollTop()) : e[n] = i)
                }, e, n, arguments.length, null)
            }
        }), ie.each(["top", "left"], function(e, t) {
            ie.cssHooks[t] = A(oe.pixelPosition, function(e, o) {
                return o ? (o = tt(e, t), nt.test(o) ? ie(e).position()[t] + "px" : o) : void 0
            })
        }), ie.each({
            Height: "height",
            Width: "width"
        }, function(e, t) {
            ie.each({
                padding: "inner" + e,
                content: t,
                "": "outer" + e
            }, function(o, n) {
                ie.fn[n] = function(n, i) {
                    var r = arguments.length && (o || "boolean" != typeof n),
                        s = o || (n === !0 || i === !0 ? "margin" : "border");
                    return we(this, function(t, o, n) {
                        var i;
                        return ie.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (i = t.documentElement, Math.max(t.body["scroll" + e], i["scroll" + e], t.body["offset" + e], i["offset" + e], i["client" + e])) : void 0 === n ? ie.css(t, o, s) : ie.style(t, o, n, s)
                    }, t, r ? n : void 0, r, null)
                }
            })
        }), ie.fn.size = function() {
            return this.length
        }, ie.fn.andSelf = ie.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
            return ie
        });
        var io = e.jQuery,
            ro = e.$;
        return ie.noConflict = function(t) {
            return e.$ === ie && (e.$ = ro), t && e.jQuery === ie && (e.jQuery = io), ie
        }, typeof t === Se && (e.jQuery = e.$ = ie), ie
    }),
    function(e) {
        function t(e, t, o, n, i) {
            this._listener = t, this._isOnce = o, this.context = n, this._signal = e, this._priority = i || 0
        }

        function o(e, t) {
            if ("function" != typeof e) throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}", t))
        }

        function n() {
            this._bindings = [], this._prevParams = null;
            var e = this;
            this.dispatch = function() {
                n.prototype.dispatch.apply(e, arguments)
            }
        }
        t.prototype = {
            active: !0,
            params: null,
            execute: function(e) {
                var t, o;
                return this.active && this._listener && (o = this.params ? this.params.concat(e) : e, t = this._listener.apply(this.context, o), this._isOnce && this.detach()), t
            },
            detach: function() {
                return this.isBound() ? this._signal.remove(this._listener, this.context) : null
            },
            isBound: function() {
                return !!this._signal && !!this._listener
            },
            isOnce: function() {
                return this._isOnce
            },
            getListener: function() {
                return this._listener
            },
            getSignal: function() {
                return this._signal
            },
            _destroy: function() {
                delete this._signal, delete this._listener, delete this.context
            },
            toString: function() {
                return "[SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]"
            }
        }, n.prototype = {
            VERSION: "1.0.0",
            memorize: !1,
            _shouldPropagate: !0,
            active: !0,
            _registerListener: function(e, o, n, i) {
                var r, s = this._indexOfListener(e, n);
                if (-1 !== s) {
                    if (r = this._bindings[s], r.isOnce() !== o) throw new Error("You cannot add" + (o ? "" : "Once") + "() then add" + (o ? "Once" : "") + "() the same listener without removing the relationship first.")
                } else r = new t(this, e, o, n, i), this._addBinding(r);
                return this.memorize && this._prevParams && r.execute(this._prevParams), r
            },
            _addBinding: function(e) {
                var t = this._bindings.length;
                do --t; while (this._bindings[t] && e._priority <= this._bindings[t]._priority);
                this._bindings.splice(t + 1, 0, e)
            },
            _indexOfListener: function(e, t) {
                for (var o, n = this._bindings.length; n--;)
                    if (o = this._bindings[n], o._listener === e && o.context === t) return n;
                return -1
            },
            has: function(e, t) {
                return -1 !== this._indexOfListener(e, t)
            },
            add: function(e, t, n) {
                return o(e, "add"), this._registerListener(e, !1, t, n)
            },
            addOnce: function(e, t, n) {
                return o(e, "addOnce"), this._registerListener(e, !0, t, n)
            },
            remove: function(e, t) {
                o(e, "remove");
                var n = this._indexOfListener(e, t);
                return -1 !== n && (this._bindings[n]._destroy(), this._bindings.splice(n, 1)), e
            },
            removeAll: function() {
                for (var e = this._bindings.length; e--;) this._bindings[e]._destroy();
                this._bindings.length = 0
            },
            getNumListeners: function() {
                return this._bindings.length
            },
            halt: function() {
                this._shouldPropagate = !1
            },
            dispatch: function(e) {
                if (this.active) {
                    var t, o = Array.prototype.slice.call(arguments),
                        n = this._bindings.length;
                    if (this.memorize && (this._prevParams = o), n) {
                        t = this._bindings.slice(), this._shouldPropagate = !0;
                        do n--; while (t[n] && this._shouldPropagate && t[n].execute(o) !== !1)
                    }
                }
            },
            forget: function() {
                this._prevParams = null
            },
            dispose: function() {
                this.removeAll(), delete this._bindings, delete this._prevParams
            },
            toString: function() {
                return "[Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
            }
        };
        var i = n;
        i.Signal = n, "function" == typeof define && define.amd ? define("signals", [], function() {
            return i
        }) : "undefined" != typeof module && module.exports ? module.exports = i : e.signals = i
    }(this), define("storage", [], function() {
        var e, t, o = "undefined" != typeof chrome && null != chrome.storage;
        return {
            setProxies: function(o, n) {
                e = n, t = o
            },
            set: function(t, n) {
                if (console.log("storage set", o), o) e ? e(t, n) : chrome.storage.local.set(t, n);
                else {
                    if (!window.localStorage) return void console.warn("no local storage available");
                    for (var i in t) window.localStorage.setItem(i, t[i]);
                    n && n()
                }
            },
            get: function(e, n) {
                if (o) t ? t(e, n) : chrome.storage.local.get(e, n);
                else {
                    if (!window.localStorage) return void console.warn("no local storage available");
                    var i = {};
                    e.forEach(function(e) {
                        var t = window.localStorage.getItem(e);
                        "true" == t ? t = !0 : "false" == t && (t = !1), i[e] = t
                    }), n(i)
                }
            }
        }
    }), define("lang-codes", [], function() {
        return {
            ca: "Catal\xe0",
            de: "Deutsch",
            en: "English",
            es: "Espa\xf1ol",
            fr: "Fran\xe7ais",
            tr: "T\xfcrk\xe7e",
            ja: "Japanese",
            kn: "Hiragana"
        }
    }), define("language-selection", ["jquery", "signals", "storage", "lang-codes"], function(e, t, o, n) {
        function i(e) {
            var t = window.location.search.match(new RegExp("[?&]" + e + "=([^&]+)"));
            return t ? decodeURIComponent(t[1].replace(/\+/g, "%20")) : ""
        }

        function r() {
            c = i("lang"), "" == c ? o.get([p], function(e) {
                c = e[p], s()
            }) : s()
        }

        function s() {
            void 0 === n[c] && (c = "en");
            var e = d.isRtl();
            document.head.parentElement.setAttribute("dir", e ? "rtl" : "ltr"), document.head.parentElement.setAttribute("lang", c), a()
        }

        function a() {
            var t = [];
            for (var o in n) t.push([n[o], o]);
            var i = function(e, t) {
                return e[0] > t[0] ? 1 : e[0] < t[0] ? -1 : 0
            };
            t.sort(i);
            var r, s = e(u);
            s.empty();
            for (var a = 0; a < t.length; a++) {
                var p = t[a],
                    h = e('<li data-value="' + p[1] + '"><a href="#">' + p[0] + "</a></li>");
                p[1] == c && (h.addClass("selected"), r = p[0]), s.append(h)
            }
            e(g).text(r), s.parent().on("selected.bs.dropdown", function(t) {
                var o = e(t.relatedTarget).attr("data-value");
                s.parent().removeClass("open"), l(o)
            }), d.inited.dispatch(c)
        }

        function l(e) {
            if (e != c) {
                d.beforeChange.dispatch(e);
                var t = {};
                t[p] = e, o.set(t, function() {
                    "undefined" != typeof chrome && null != chrome.runtime && chrome.runtime.id ? chrome.runtime.reload() : window.location.reload()
                })
            }
        }
        var c, u, g, p = "lang",
            h = ["ar", "fa", "he"],
            d = {};
        return d.beforeChange = new t, d.inited = new t, d.getLangCode = function() {
            return c
        }, d.init = function(e, t) {
            u = e, g = t, r()
        }, d.isRtl = function() {
            return -1 != h.indexOf(c)
        }, d
    }), define("queue", [], function() {
        function e(e) {
            this.actions = 0, this.completeCallback = e;
            var t = this;
            this.add = function(e) {
                "undefined" == typeof e && (e = 1), t.actions += e
            }, this.remove = function() {
                t.actions--, 0 === t.actions && (t.completeCallback && t.completeCallback(), t.completeCallback = null)
            }
        }
        return e
    });
var COMPILED = !0,
    goog = goog || {};
goog.global = this, goog.isDef = function(e) {
    return void 0 !== e
}, goog.exportPath_ = function(e, t, o) {
    e = e.split("."), o = o || goog.global, e[0] in o || !o.execScript || o.execScript("var " + e[0]);
    for (var n; e.length && (n = e.shift());) !e.length && goog.isDef(t) ? o[n] = t : o = o[n] ? o[n] : o[n] = {}
}, goog.define = function(e, t) {
    var o = t;
    COMPILED || (goog.global.CLOSURE_UNCOMPILED_DEFINES && Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES, e) ? o = goog.global.CLOSURE_UNCOMPILED_DEFINES[e] : goog.global.CLOSURE_DEFINES && Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES, e) && (o = goog.global.CLOSURE_DEFINES[e])), goog.exportPath_(e, o)
}, goog.DEBUG = !1, goog.LOCALE = "en", goog.TRUSTED_SITE = !0, goog.STRICT_MODE_COMPATIBLE = !1, goog.DISALLOW_TEST_ONLY_CODE = COMPILED && !goog.DEBUG, goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING = !1, goog.provide = function(e) {
    if (goog.isInModuleLoader_()) throw Error("goog.provide can not be used within a goog.module.");
    if (!COMPILED && goog.isProvided_(e)) throw Error('Namespace "' + e + '" already declared.');
    goog.constructNamespace_(e)
}, goog.constructNamespace_ = function(e, t) {
    if (!COMPILED) {
        delete goog.implicitNamespaces_[e];
        for (var o = e;
            (o = o.substring(0, o.lastIndexOf("."))) && !goog.getObjectByName(o);) goog.implicitNamespaces_[o] = !0
    }
    goog.exportPath_(e, t)
}, goog.VALID_MODULE_RE_ = /^[a-zA-Z_$][a-zA-Z0-9._$]*$/, goog.module = function(e) {
    if (!goog.isString(e) || !e || -1 == e.search(goog.VALID_MODULE_RE_)) throw Error("Invalid module identifier");
    if (!goog.isInModuleLoader_()) throw Error("Module " + e + " has been loaded incorrectly.");
    if (goog.moduleLoaderState_.moduleName) throw Error("goog.module may only be called once per module.");
    if (goog.moduleLoaderState_.moduleName = e, !COMPILED) {
        if (goog.isProvided_(e)) throw Error('Namespace "' + e + '" already declared.');
        delete goog.implicitNamespaces_[e]
    }
}, goog.module.get = function(e) {
    return goog.module.getInternal_(e)
}, goog.module.getInternal_ = function(e) {
    return COMPILED ? void 0 : goog.isProvided_(e) ? e in goog.loadedModules_ ? goog.loadedModules_[e] : goog.getObjectByName(e) : null
}, goog.moduleLoaderState_ = null, goog.isInModuleLoader_ = function() {
    return null != goog.moduleLoaderState_
}, goog.module.declareLegacyNamespace = function() {
    if (!COMPILED && !goog.isInModuleLoader_()) throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");
    if (!COMPILED && !goog.moduleLoaderState_.moduleName) throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");
    goog.moduleLoaderState_.declareLegacyNamespace = !0
}, goog.setTestOnly = function(e) {
    if (goog.DISALLOW_TEST_ONLY_CODE) throw e = e || "", Error("Importing test-only code into non-debug environment" + (e ? ": " + e : "."))
}, goog.forwardDeclare = function(e) {}, COMPILED || (goog.isProvided_ = function(e) {
    return e in goog.loadedModules_ || !goog.implicitNamespaces_[e] && goog.isDefAndNotNull(goog.getObjectByName(e))
}, goog.implicitNamespaces_ = {
    "goog.module": !0
}), goog.getObjectByName = function(e, t) {
    for (var o, n = e.split("."), i = t || goog.global; o = n.shift();) {
        if (!goog.isDefAndNotNull(i[o])) return null;
        i = i[o]
    }
    return i
}, goog.globalize = function(e, t) {
    var o, n = t || goog.global;
    for (o in e) n[o] = e[o]
}, goog.addDependency = function(e, t, o, n) {
    if (goog.DEPENDENCIES_ENABLED) {
        var i;
        e = e.replace(/\\/g, "/");
        var r = goog.dependencies_;
        n && "boolean" != typeof n || (n = n ? {
            module: "goog"
        } : {});
        for (var s = 0; i = t[s]; s++) r.nameToPath[i] = e, r.loadFlags[e] = n;
        for (n = 0; t = o[n]; n++) e in r.requires || (r.requires[e] = {}), r.requires[e][t] = !0
    }
}, goog.ENABLE_DEBUG_LOADER = !0, goog.logToConsole_ = function(e) {
    goog.global.console && goog.global.console.error(e)
}, goog.require = function(e) {
    if (!COMPILED) {
        if (goog.ENABLE_DEBUG_LOADER && goog.IS_OLD_IE_ && goog.maybeProcessDeferredDep_(e), goog.isProvided_(e)) return goog.isInModuleLoader_() ? goog.module.getInternal_(e) : null;
        if (goog.ENABLE_DEBUG_LOADER) {
            var t = goog.getPathFromDeps_(e);
            if (t) return goog.writeScripts_(t), null
        }
        throw e = "goog.require could not find: " + e, goog.logToConsole_(e), Error(e)
    }
}, goog.basePath = "", goog.nullFunction = function() {}, goog.abstractMethod = function() {
    throw Error("unimplemented abstract method")
}, goog.addSingletonGetter = function(e) {
    e.getInstance = function() {
        return e.instance_ ? e.instance_ : (goog.DEBUG && (goog.instantiatedSingletons_[goog.instantiatedSingletons_.length] = e), e.instance_ = new e)
    }
}, goog.instantiatedSingletons_ = [], goog.LOAD_MODULE_USING_EVAL = !0, goog.SEAL_MODULE_EXPORTS = goog.DEBUG, goog.loadedModules_ = {}, goog.DEPENDENCIES_ENABLED = !COMPILED && goog.ENABLE_DEBUG_LOADER, goog.ALWAYS_TRANSPILE = !1, goog.NEVER_TRANSPILE = !1, goog.DEPENDENCIES_ENABLED && (goog.dependencies_ = {
    loadFlags: {},
    nameToPath: {},
    requires: {},
    visited: {},
    written: {},
    deferred: {}
}, goog.inHtmlDocument_ = function() {
    var e = goog.global.document;
    return null != e && "write" in e
}, goog.findBasePath_ = function() {
    if (goog.isDef(goog.global.CLOSURE_BASE_PATH)) goog.basePath = goog.global.CLOSURE_BASE_PATH;
    else if (goog.inHtmlDocument_())
        for (var e = goog.global.document.getElementsByTagName("SCRIPT"), t = e.length - 1; t >= 0; --t) {
            var o = e[t].src,
                n = o.lastIndexOf("?"),
                n = -1 == n ? o.length : n;
            if ("base.js" == o.substr(n - 7, 7)) {
                goog.basePath = o.substr(0, n - 7);
                break
            }
        }
}, goog.importScript_ = function(e, t) {
    (goog.global.CLOSURE_IMPORT_SCRIPT || goog.writeScriptTag_)(e, t) && (goog.dependencies_.written[e] = !0)
}, goog.IS_OLD_IE_ = !(goog.global.atob || !goog.global.document || !goog.global.document.all), goog.importProcessedScript_ = function(e, t, o) {
    goog.importScript_("", 'goog.retrieveAndExec_("' + e + '", ' + t + ", " + o + ");")
}, goog.queuedModules_ = [], goog.wrapModule_ = function(e, t) {
    return goog.LOAD_MODULE_USING_EVAL && goog.isDef(goog.global.JSON) ? "goog.loadModule(" + goog.global.JSON.stringify(t + "\n//# sourceURL=" + e + "\n") + ");" : "goog.loadModule(function(exports) {" + t + "\n;return exports});\n//# sourceURL=" + e + "\n"
}, goog.loadQueuedModules_ = function() {
    var e = goog.queuedModules_.length;
    if (e > 0) {
        var t = goog.queuedModules_;
        goog.queuedModules_ = [];
        for (var o = 0; e > o; o++) goog.maybeProcessDeferredPath_(t[o])
    }
}, goog.maybeProcessDeferredDep_ = function(e) {
    goog.isDeferredModule_(e) && goog.allDepsAreAvailable_(e) && (e = goog.getPathFromDeps_(e), goog.maybeProcessDeferredPath_(goog.basePath + e))
}, goog.isDeferredModule_ = function(e) {
    var t = (e = goog.getPathFromDeps_(e)) && goog.dependencies_.loadFlags[e] || {};
    return e && ("goog" == t.module || goog.needsTranspile_(t.lang)) ? goog.basePath + e in goog.dependencies_.deferred : !1
}, goog.allDepsAreAvailable_ = function(e) {
    if ((e = goog.getPathFromDeps_(e)) && e in goog.dependencies_.requires)
        for (var t in goog.dependencies_.requires[e])
            if (!goog.isProvided_(t) && !goog.isDeferredModule_(t)) return !1;
    return !0
}, goog.maybeProcessDeferredPath_ = function(e) {
    if (e in goog.dependencies_.deferred) {
        var t = goog.dependencies_.deferred[e];
        delete goog.dependencies_.deferred[e], goog.globalEval(t)
    }
}, goog.loadModuleFromUrl = function(e) {
    goog.retrieveAndExec_(e, !0, !1)
}, goog.loadModule = function(e) {
    var t = goog.moduleLoaderState_;
    try {
        goog.moduleLoaderState_ = {
            moduleName: void 0,
            declareLegacyNamespace: !1
        };
        var o;
        if (goog.isFunction(e)) o = e.call(goog.global, {});
        else {
            if (!goog.isString(e)) throw Error("Invalid module definition");
            o = goog.loadModuleFromSource_.call(goog.global, e)
        }
        var n = goog.moduleLoaderState_.moduleName;
        if (!goog.isString(n) || !n) throw Error('Invalid module name "' + n + '"');
        goog.moduleLoaderState_.declareLegacyNamespace ? goog.constructNamespace_(n, o) : goog.SEAL_MODULE_EXPORTS && Object.seal && Object.seal(o), goog.loadedModules_[n] = o
    } finally {
        goog.moduleLoaderState_ = t
    }
}, goog.loadModuleFromSource_ = function(a) {
    return eval(a), {}
}, goog.writeScriptSrcNode_ = function(e) {
    goog.global.document.write('<script type="text/javascript" src="' + e + '"></script>')
}, goog.appendScriptSrcNode_ = function(e) {
    var t = goog.global.document,
        o = t.createElement("script");
    o.type = "text/javascript", o.src = e, o.defer = !1, o.async = !1, t.head.appendChild(o)
}, goog.writeScriptTag_ = function(e, t) {
    if (goog.inHtmlDocument_()) {
        var o = goog.global.document;
        if (!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING && "complete" == o.readyState) {
            if (/\bdeps.js$/.test(e)) return !1;
            throw Error('Cannot write "' + e + '" after document load');
        }
        if (void 0 === t)
            if (goog.IS_OLD_IE_) {
                var n = " onreadystatechange='goog.onScriptLoad_(this, " + ++goog.lastNonModuleScriptIndex_ + ")' ";
                o.write('<script type="text/javascript" src="' + e + '"' + n + "></script>")
            } else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING ? goog.appendScriptSrcNode_(e) : goog.writeScriptSrcNode_(e);
        else o.write('<script type="text/javascript">' + t + "</script>");
        return !0
    }
    return !1
}, goog.needsTranspile_ = function(a) {
    if (goog.ALWAYS_TRANSPILE) return !0;
    if (goog.NEVER_TRANSPILE) return !1;
    if (!goog.transpiledLanguages_) {
        goog.transpiledLanguages_ = {
            es5: !0,
            es6: !0,
            "es6-impl": !0
        };
        try {
            goog.transpiledLanguages_.es5 = eval("[1,].length!=1"), eval("(()=>{let a={};const X=class{constructor(){}x(z){return new Map([...arguments]).get(z[0])==3}};return new X().x([a,3])})()") && (goog.transpiledLanguages_["es6-impl"] = !1), eval("(()=>{class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()") && (goog.transpiledLanguages_.es6 = !1)
        } catch (b) {}
    }
    return !!goog.transpiledLanguages_[a]
}, goog.transpiledLanguages_ = null, goog.lastNonModuleScriptIndex_ = 0, goog.onScriptLoad_ = function(e, t) {
    return "complete" == e.readyState && goog.lastNonModuleScriptIndex_ == t && goog.loadQueuedModules_(), !0
}, goog.writeScripts_ = function(e) {
    function t(e) {
        if (!(e in i.written || e in i.visited)) {
            if (i.visited[e] = !0, e in i.requires)
                for (var r in i.requires[e])
                    if (!goog.isProvided_(r)) {
                        if (!(r in i.nameToPath)) throw Error("Undefined nameToPath for " + r);
                        t(i.nameToPath[r])
                    }
            e in n || (n[e] = !0, o.push(e))
        }
    }
    var o = [],
        n = {},
        i = goog.dependencies_;
    for (t(e), e = 0; e < o.length; e++) {
        var r = o[e];
        goog.dependencies_.written[r] = !0
    }
    var s = goog.moduleLoaderState_;
    for (goog.moduleLoaderState_ = null, e = 0; e < o.length; e++) {
        if (!(r = o[e])) throw goog.moduleLoaderState_ = s, Error("Undefined script input");
        var a = i.loadFlags[r] || {},
            l = goog.needsTranspile_(a.lang);
        "goog" == a.module || l ? goog.importProcessedScript_(goog.basePath + r, "goog" == a.module, l) : goog.importScript_(goog.basePath + r)
    }
    goog.moduleLoaderState_ = s
}, goog.getPathFromDeps_ = function(e) {
    return e in goog.dependencies_.nameToPath ? goog.dependencies_.nameToPath[e] : null
}, goog.findBasePath_(), goog.global.CLOSURE_NO_DEPS || goog.importScript_(goog.basePath + "deps.js")), goog.normalizePath_ = function(e) {
    e = e.split("/");
    for (var t = 0; t < e.length;) "." == e[t] ? e.splice(t, 1) : t && ".." == e[t] && e[t - 1] && ".." != e[t - 1] ? e.splice(--t, 2) : t++;
    return e.join("/")
}, goog.loadFileSync_ = function(e) {
    if (goog.global.CLOSURE_LOAD_FILE_SYNC) return goog.global.CLOSURE_LOAD_FILE_SYNC(e);
    var t = new goog.global.XMLHttpRequest;
    return t.open("get", e, !1), t.send(), 200 == t.status ? t.responseText : null
}, goog.retrieveAndExec_ = function(e, t, o) {
    if (!COMPILED) {
        var n = e;
        e = goog.normalizePath_(e);
        var i = goog.global.CLOSURE_IMPORT_SCRIPT || goog.writeScriptTag_,
            r = goog.loadFileSync_(e);
        if (null == r) throw Error('Load of "' + e + '" failed');
        o && (r = goog.transpile_.call(goog.global, r, e)), r = t ? goog.wrapModule_(e, r) : r + ("\n//# sourceURL=" + e), goog.IS_OLD_IE_ ? (goog.dependencies_.deferred[n] = r, goog.queuedModules_.push(n)) : i(e, r)
    }
}, goog.transpile_ = function(a, b) {
    var c = goog.global.$jscomp;
    c || (goog.global.$jscomp = c = {});
    var d = c.transpile;
    if (!d) {
        var e = goog.basePath + "transpile.js",
            f = goog.loadFileSync_(e);
        f && (eval(f + "\n//# sourceURL=" + e), c = goog.global.$jscomp, d = c.transpile)
    }
    return d || (d = c.transpile = function(e, t) {
        return goog.logToConsole_(t + " requires transpilation but no transpiler was found."), e
    }), d(a, b)
}, goog.typeOf = function(e) {
    var t = typeof e;
    if ("object" == t) {
        if (!e) return "null";
        if (e instanceof Array) return "array";
        if (e instanceof Object) return t;
        var o = Object.prototype.toString.call(e);
        if ("[object Window]" == o) return "object";
        if ("[object Array]" == o || "number" == typeof e.length && "undefined" != typeof e.splice && "undefined" != typeof e.propertyIsEnumerable && !e.propertyIsEnumerable("splice")) return "array";
        if ("[object Function]" == o || "undefined" != typeof e.call && "undefined" != typeof e.propertyIsEnumerable && !e.propertyIsEnumerable("call")) return "function"
    } else if ("function" == t && "undefined" == typeof e.call) return "object";
    return t
}, goog.isNull = function(e) {
    return null === e
}, goog.isDefAndNotNull = function(e) {
    return null != e
}, goog.isArray = function(e) {
    return "array" == goog.typeOf(e)
}, goog.isArrayLike = function(e) {
    var t = goog.typeOf(e);
    return "array" == t || "object" == t && "number" == typeof e.length
}, goog.isDateLike = function(e) {
    return goog.isObject(e) && "function" == typeof e.getFullYear
}, goog.isString = function(e) {
    return "string" == typeof e
}, goog.isBoolean = function(e) {
    return "boolean" == typeof e
}, goog.isNumber = function(e) {
    return "number" == typeof e
}, goog.isFunction = function(e) {
    return "function" == goog.typeOf(e)
}, goog.isObject = function(e) {
    var t = typeof e;
    return "object" == t && null != e || "function" == t
}, goog.getUid = function(e) {
    return e[goog.UID_PROPERTY_] || (e[goog.UID_PROPERTY_] = ++goog.uidCounter_)
}, goog.hasUid = function(e) {
    return !!e[goog.UID_PROPERTY_]
}, goog.removeUid = function(e) {
    null !== e && "removeAttribute" in e && e.removeAttribute(goog.UID_PROPERTY_);
    try {
        delete e[goog.UID_PROPERTY_]
    } catch (t) {}
}, goog.UID_PROPERTY_ = "closure_uid_" + (1e9 * Math.random() >>> 0), goog.uidCounter_ = 0, goog.getHashCode = goog.getUid, goog.removeHashCode = goog.removeUid, goog.cloneObject = function(e) {
    var t = goog.typeOf(e);
    if ("object" == t || "array" == t) {
        if (e.clone) return e.clone();
        var o, t = "array" == t ? [] : {};
        for (o in e) t[o] = goog.cloneObject(e[o]);
        return t
    }
    return e
}, goog.bindNative_ = function(e, t, o) {
    return e.call.apply(e.bind, arguments)
}, goog.bindJs_ = function(e, t, o) {
    if (!e) throw Error();
    if (2 < arguments.length) {
        var n = Array.prototype.slice.call(arguments, 2);
        return function() {
            var o = Array.prototype.slice.call(arguments);
            return Array.prototype.unshift.apply(o, n), e.apply(t, o)
        }
    }
    return function() {
        return e.apply(t, arguments)
    }
}, goog.bind = function(e, t, o) {
    return Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? goog.bind = goog.bindNative_ : goog.bind = goog.bindJs_, goog.bind.apply(null, arguments)
}, goog.partial = function(e, t) {
    var o = Array.prototype.slice.call(arguments, 1);
    return function() {
        var t = o.slice();
        return t.push.apply(t, arguments), e.apply(this, t)
    }
}, goog.mixin = function(e, t) {
    for (var o in t) e[o] = t[o]
}, goog.now = goog.TRUSTED_SITE && Date.now || function() {
    return +new Date
}, goog.globalEval = function(e) {
    if (goog.global.execScript) goog.global.execScript(e, "JavaScript");
    else {
        if (!goog.global.eval) throw Error("goog.globalEval not available");
        if (null == goog.evalWorksForGlobals_)
            if (goog.global.eval("var _evalTest_ = 1;"), "undefined" != typeof goog.global._evalTest_) {
                try {
                    delete goog.global._evalTest_
                } catch (t) {}
                goog.evalWorksForGlobals_ = !0
            } else goog.evalWorksForGlobals_ = !1;
        if (goog.evalWorksForGlobals_) goog.global.eval(e);
        else {
            var o = goog.global.document,
                n = o.createElement("SCRIPT");
            n.type = "text/javascript", n.defer = !1, n.appendChild(o.createTextNode(e)), o.body.appendChild(n), o.body.removeChild(n)
        }
    }
}, goog.evalWorksForGlobals_ = null, goog.getCssName = function(e, t) {
    var o = function(e) {
            return goog.cssNameMapping_[e] || e
        },
        n = function(e) {
            e = e.split("-");
            for (var t = [], n = 0; n < e.length; n++) t.push(o(e[n]));
            return t.join("-")
        },
        n = goog.cssNameMapping_ ? "BY_WHOLE" == goog.cssNameMappingStyle_ ? o : n : function(e) {
            return e
        };
    return t ? e + "-" + n(t) : n(e)
}, goog.setCssNameMapping = function(e, t) {
    goog.cssNameMapping_ = e, goog.cssNameMappingStyle_ = t
}, !COMPILED && goog.global.CLOSURE_CSS_NAME_MAPPING && (goog.cssNameMapping_ = goog.global.CLOSURE_CSS_NAME_MAPPING), goog.getMsg = function(e, t) {
    return t && (e = e.replace(/\{\$([^}]+)}/g, function(e, o) {
        return null != t && o in t ? t[o] : e
    })), e
}, goog.getMsgWithFallback = function(e, t) {
    return e
}, goog.exportSymbol = function(e, t, o) {
    goog.exportPath_(e, t, o)
}, goog.exportProperty = function(e, t, o) {
    e[t] = o
}, goog.inherits = function(e, t) {
    function o() {}
    o.prototype = t.prototype, e.superClass_ = t.prototype, e.prototype = new o, e.prototype.constructor = e, e.base = function(e, o, n) {
        for (var i = Array(arguments.length - 2), r = 2; r < arguments.length; r++) i[r - 2] = arguments[r];
        return t.prototype[o].apply(e, i)
    }
}, goog.base = function(e, t, o) {
    var n = arguments.callee.caller;
    if (goog.STRICT_MODE_COMPATIBLE || goog.DEBUG && !n) throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");
    if (n.superClass_) {
        for (var i = Array(arguments.length - 1), r = 1; r < arguments.length; r++) i[r - 1] = arguments[r];
        return n.superClass_.constructor.apply(e, i)
    }
    for (i = Array(arguments.length - 2), r = 2; r < arguments.length; r++) i[r - 2] = arguments[r];
    for (var r = !1, s = e.constructor; s; s = s.superClass_ && s.superClass_.constructor)
        if (s.prototype[t] === n) r = !0;
        else if (r) return s.prototype[t].apply(e, i);
    if (e[t] === n) return e.constructor.prototype[t].apply(e, i);
    throw Error("goog.base called from a method of one name to a method of a different name")
}, goog.scope = function(e) {
    if (goog.isInModuleLoader_()) throw Error("goog.scope is not supported within a goog.module.");
    e.call(goog.global)
}, COMPILED || (goog.global.COMPILED = COMPILED), goog.defineClass = function(e, t) {
    var o = t.constructor,
        n = t.statics;
    return o && o != Object.prototype.constructor || (o = function() {
        throw Error("cannot instantiate an interface (no constructor defined).")
    }), o = goog.defineClass.createSealingConstructor_(o, e), e && goog.inherits(o, e), delete t.constructor, delete t.statics, goog.defineClass.applyProperties_(o.prototype, t), null != n && (n instanceof Function ? n(o) : goog.defineClass.applyProperties_(o, n)), o
}, goog.defineClass.SEAL_CLASS_INSTANCES = goog.DEBUG, goog.defineClass.createSealingConstructor_ = function(e, t) {
    if (!goog.defineClass.SEAL_CLASS_INSTANCES) return e;
    var o = !goog.defineClass.isUnsealable_(t),
        n = function() {
            var t = e.apply(this, arguments) || this;
            return t[goog.UID_PROPERTY_] = t[goog.UID_PROPERTY_], this.constructor === n && o && Object.seal instanceof Function && Object.seal(t), t
        };
    return n
}, goog.defineClass.isUnsealable_ = function(e) {
    return e && e.prototype && e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]
}, goog.defineClass.OBJECT_PROTOTYPE_FIELDS_ = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "), goog.defineClass.applyProperties_ = function(e, t) {
    for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
    for (var n = 0; n < goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length; n++) o = goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n], Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o])
}, goog.tagUnsealableClass = function(e) {
    !COMPILED && goog.defineClass.SEAL_CLASS_INSTANCES && (e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_] = !0)
}, goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_ = "goog_defineClass_legacy_unsealable", goog.debug = {}, goog.debug.Error = function(e) {
    if (Error.captureStackTrace) Error.captureStackTrace(this, goog.debug.Error);
    else {
        var t = Error().stack;
        t && (this.stack = t)
    }
    e && (this.message = String(e)), this.reportErrorToServer = !0
}, goog.inherits(goog.debug.Error, Error), goog.debug.Error.prototype.name = "CustomError", goog.dom = {}, goog.dom.NodeType = {
    ELEMENT: 1,
    ATTRIBUTE: 2,
    TEXT: 3,
    CDATA_SECTION: 4,
    ENTITY_REFERENCE: 5,
    ENTITY: 6,
    PROCESSING_INSTRUCTION: 7,
    COMMENT: 8,
    DOCUMENT: 9,
    DOCUMENT_TYPE: 10,
    DOCUMENT_FRAGMENT: 11,
    NOTATION: 12
}, goog.string = {}, goog.string.DETECT_DOUBLE_ESCAPING = !1, goog.string.FORCE_NON_DOM_HTML_UNESCAPING = !1, goog.string.Unicode = {
    NBSP: "\xa0"
}, goog.string.startsWith = function(e, t) {
    return 0 == e.lastIndexOf(t, 0)
}, goog.string.endsWith = function(e, t) {
    var o = e.length - t.length;
    return o >= 0 && e.indexOf(t, o) == o
}, goog.string.caseInsensitiveStartsWith = function(e, t) {
    return 0 == goog.string.caseInsensitiveCompare(t, e.substr(0, t.length))
}, goog.string.caseInsensitiveEndsWith = function(e, t) {
    return 0 == goog.string.caseInsensitiveCompare(t, e.substr(e.length - t.length, t.length))
}, goog.string.caseInsensitiveEquals = function(e, t) {
    return e.toLowerCase() == t.toLowerCase()
}, goog.string.subs = function(e, t) {
    for (var o = e.split("%s"), n = "", i = Array.prototype.slice.call(arguments, 1); i.length && 1 < o.length;) n += o.shift() + i.shift();
    return n + o.join("%s")
}, goog.string.collapseWhitespace = function(e) {
    return e.replace(/[\s\xa0]+/g, " ").replace(/^\s+|\s+$/g, "")
}, goog.string.isEmptyOrWhitespace = function(e) {
    return /^[\s\xa0]*$/.test(e)
}, goog.string.isEmptyString = function(e) {
    return 0 == e.length
}, goog.string.isEmpty = goog.string.isEmptyOrWhitespace, goog.string.isEmptyOrWhitespaceSafe = function(e) {
    return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))
}, goog.string.isEmptySafe = goog.string.isEmptyOrWhitespaceSafe, goog.string.isBreakingWhitespace = function(e) {
    return !/[^\t\n\r ]/.test(e)
}, goog.string.isAlpha = function(e) {
    return !/[^a-zA-Z]/.test(e)
}, goog.string.isNumeric = function(e) {
    return !/[^0-9]/.test(e)
}, goog.string.isAlphaNumeric = function(e) {
    return !/[^a-zA-Z0-9]/.test(e)
}, goog.string.isSpace = function(e) {
    return " " == e
}, goog.string.isUnicodeChar = function(e) {
    return 1 == e.length && e >= " " && "~" >= e || e >= "\x80" && "\ufffd" >= e
}, goog.string.stripNewlines = function(e) {
    return e.replace(/(\r\n|\r|\n)+/g, " ")
}, goog.string.canonicalizeNewlines = function(e) {
    return e.replace(/(\r\n|\r|\n)/g, "\n")
}, goog.string.normalizeWhitespace = function(e) {
    return e.replace(/\xa0|\s/g, " ")
}, goog.string.normalizeSpaces = function(e) {
    return e.replace(/\xa0|[ \t]+/g, " ")
}, goog.string.collapseBreakingSpaces = function(e) {
    return e.replace(/[\t\r\n ]+/g, " ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g, "")
}, goog.string.trim = goog.TRUSTED_SITE && String.prototype.trim ? function(e) {
    return e.trim()
} : function(e) {
    return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "")
}, goog.string.trimLeft = function(e) {
    return e.replace(/^[\s\xa0]+/, "")
}, goog.string.trimRight = function(e) {
    return e.replace(/[\s\xa0]+$/, "")
}, goog.string.caseInsensitiveCompare = function(e, t) {
    var o = String(e).toLowerCase(),
        n = String(t).toLowerCase();
    return n > o ? -1 : o == n ? 0 : 1
}, goog.string.numberAwareCompare_ = function(e, t, o) {
    if (e == t) return 0;
    if (!e) return -1;
    if (!t) return 1;
    for (var n = e.toLowerCase().match(o), i = t.toLowerCase().match(o), r = Math.min(n.length, i.length), s = 0; r > s; s++) {
        o = n[s];
        var a = i[s];
        if (o != a) return e = parseInt(o, 10), !isNaN(e) && (t = parseInt(a, 10), !isNaN(t) && e - t) ? e - t : a > o ? -1 : 1
    }
    return n.length != i.length ? n.length - i.length : t > e ? -1 : 1
}, goog.string.intAwareCompare = function(e, t) {
    return goog.string.numberAwareCompare_(e, t, /\d+|\D+/g)
}, goog.string.floatAwareCompare = function(e, t) {
    return goog.string.numberAwareCompare_(e, t, /\d+|\.\d+|\D+/g)
}, goog.string.numerateCompare = goog.string.floatAwareCompare, goog.string.urlEncode = function(e) {
    return encodeURIComponent(String(e))
}, goog.string.urlDecode = function(e) {
    return decodeURIComponent(e.replace(/\+/g, " "))
}, goog.string.newLineToBr = function(e, t) {
    return e.replace(/(\r\n|\r|\n)/g, t ? "<br />" : "<br>")
}, goog.string.htmlEscape = function(e, t) {
    if (t) e = e.replace(goog.string.AMP_RE_, "&amp;").replace(goog.string.LT_RE_, "&lt;").replace(goog.string.GT_RE_, "&gt;").replace(goog.string.QUOT_RE_, "&quot;").replace(goog.string.SINGLE_QUOTE_RE_, "&#39;").replace(goog.string.NULL_RE_, "&#0;"), goog.string.DETECT_DOUBLE_ESCAPING && (e = e.replace(goog.string.E_RE_, "&#101;"));
    else {
        if (!goog.string.ALL_RE_.test(e)) return e; - 1 != e.indexOf("&") && (e = e.replace(goog.string.AMP_RE_, "&amp;")), -1 != e.indexOf("<") && (e = e.replace(goog.string.LT_RE_, "&lt;")), -1 != e.indexOf(">") && (e = e.replace(goog.string.GT_RE_, "&gt;")), -1 != e.indexOf('"') && (e = e.replace(goog.string.QUOT_RE_, "&quot;")), -1 != e.indexOf("'") && (e = e.replace(goog.string.SINGLE_QUOTE_RE_, "&#39;")), -1 != e.indexOf("\x00") && (e = e.replace(goog.string.NULL_RE_, "&#0;")), goog.string.DETECT_DOUBLE_ESCAPING && -1 != e.indexOf("e") && (e = e.replace(goog.string.E_RE_, "&#101;"))
    }
    return e
}, goog.string.AMP_RE_ = /&/g, goog.string.LT_RE_ = /</g, goog.string.GT_RE_ = />/g, goog.string.QUOT_RE_ = /"/g, goog.string.SINGLE_QUOTE_RE_ = /'/g, goog.string.NULL_RE_ = /\x00/g, goog.string.E_RE_ = /e/g, goog.string.ALL_RE_ = goog.string.DETECT_DOUBLE_ESCAPING ? /[\x00&<>"'e]/ : /[\x00&<>"']/, goog.string.unescapeEntities = function(e) {
    return goog.string.contains(e, "&") ? !goog.string.FORCE_NON_DOM_HTML_UNESCAPING && "document" in goog.global ? goog.string.unescapeEntitiesUsingDom_(e) : goog.string.unescapePureXmlEntities_(e) : e
}, goog.string.unescapeEntitiesWithDocument = function(e, t) {
    return goog.string.contains(e, "&") ? goog.string.unescapeEntitiesUsingDom_(e, t) : e
}, goog.string.unescapeEntitiesUsingDom_ = function(e, t) {
    var o, n = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"'
    };
    return o = t ? t.createElement("div") : goog.global.document.createElement("div"), e.replace(goog.string.HTML_ENTITY_PATTERN_, function(e, t) {
        var i = n[e];
        if (i) return i;
        if ("#" == t.charAt(0)) {
            var r = Number("0" + t.substr(1));
            isNaN(r) || (i = String.fromCharCode(r))
        }
        return i || (o.innerHTML = e + " ", i = o.firstChild.nodeValue.slice(0, -1)), n[e] = i
    })
}, goog.string.unescapePureXmlEntities_ = function(e) {
    return e.replace(/&([^;]+);/g, function(e, t) {
        switch (t) {
            case "amp":
                return "&";
            case "lt":
                return "<";
            case "gt":
                return ">";
            case "quot":
                return '"';
            default:
                if ("#" == t.charAt(0)) {
                    var o = Number("0" + t.substr(1));
                    if (!isNaN(o)) return String.fromCharCode(o)
                }
                return e
        }
    })
}, goog.string.HTML_ENTITY_PATTERN_ = /&([^;\s<&]+);?/g, goog.string.whitespaceEscape = function(e, t) {
    return goog.string.newLineToBr(e.replace(/  /g, " &#160;"), t)
}, goog.string.preserveSpaces = function(e) {
    return e.replace(/(^|[\n ]) /g, "$1" + goog.string.Unicode.NBSP)
}, goog.string.stripQuotes = function(e, t) {
    for (var o = t.length, n = 0; o > n; n++) {
        var i = 1 == o ? t : t.charAt(n);
        if (e.charAt(0) == i && e.charAt(e.length - 1) == i) return e.substring(1, e.length - 1)
    }
    return e
}, goog.string.truncate = function(e, t, o) {
    return o && (e = goog.string.unescapeEntities(e)), e.length > t && (e = e.substring(0, t - 3) + "..."), o && (e = goog.string.htmlEscape(e)), e
}, goog.string.truncateMiddle = function(e, t, o, n) {
    if (o && (e = goog.string.unescapeEntities(e)), n && e.length > t) {
        n > t && (n = t);
        var i = e.length - n;
        e = e.substring(0, t - n) + "..." + e.substring(i)
    } else e.length > t && (n = Math.floor(t / 2), i = e.length - n, e = e.substring(0, n + t % 2) + "..." + e.substring(i));
    return o && (e = goog.string.htmlEscape(e)), e
}, goog.string.specialEscapeChars_ = {
    "\x00": "\\0",
    "\b": "\\b",
    "\f": "\\f",
    "\n": "\\n",
    "\r": "\\r",
    "	": "\\t",
    "\x0B": "\\x0B",
    '"': '\\"',
    "\\": "\\\\",
    "<": "<"
}, goog.string.jsEscapeCache_ = {
    "'": "\\'"
}, goog.string.quote = function(e) {
    e = String(e);
    for (var t = ['"'], o = 0; o < e.length; o++) {
        var n = e.charAt(o),
            i = n.charCodeAt(0);
        t[o + 1] = goog.string.specialEscapeChars_[n] || (i > 31 && 127 > i ? n : goog.string.escapeChar(n))
    }
    return t.push('"'), t.join("")
}, goog.string.escapeString = function(e) {
    for (var t = [], o = 0; o < e.length; o++) t[o] = goog.string.escapeChar(e.charAt(o));
    return t.join("")
}, goog.string.escapeChar = function(e) {
    if (e in goog.string.jsEscapeCache_) return goog.string.jsEscapeCache_[e];
    if (e in goog.string.specialEscapeChars_) return goog.string.jsEscapeCache_[e] = goog.string.specialEscapeChars_[e];
    var t, o = e.charCodeAt(0);
    return o > 31 && 127 > o ? t = e : (256 > o ? (t = "\\x", (16 > o || o > 256) && (t += "0")) : (t = "\\u", 4096 > o && (t += "0")), t += o.toString(16).toUpperCase()), goog.string.jsEscapeCache_[e] = t
}, goog.string.contains = function(e, t) {
    return -1 != e.indexOf(t)
}, goog.string.caseInsensitiveContains = function(e, t) {
    return goog.string.contains(e.toLowerCase(), t.toLowerCase())
}, goog.string.countOf = function(e, t) {
    return e && t ? e.split(t).length - 1 : 0
}, goog.string.removeAt = function(e, t, o) {
    var n = e;
    return t >= 0 && t < e.length && o > 0 && (n = e.substr(0, t) + e.substr(t + o, e.length - t - o)), n
}, goog.string.remove = function(e, t) {
    var o = new RegExp(goog.string.regExpEscape(t), "");
    return e.replace(o, "")
}, goog.string.removeAll = function(e, t) {
    var o = new RegExp(goog.string.regExpEscape(t), "g");
    return e.replace(o, "")
}, goog.string.regExpEscape = function(e) {
    return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08")
}, goog.string.repeat = String.prototype.repeat ? function(e, t) {
    return e.repeat(t)
} : function(e, t) {
    return Array(t + 1).join(e)
}, goog.string.padNumber = function(e, t, o) {
    return e = goog.isDef(o) ? e.toFixed(o) : String(e), o = e.indexOf("."), -1 == o && (o = e.length), goog.string.repeat("0", Math.max(0, t - o)) + e
}, goog.string.makeSafe = function(e) {
    return null == e ? "" : String(e)
}, goog.string.buildString = function(e) {
    return Array.prototype.join.call(arguments, "")
}, goog.string.getRandomString = function() {
    return Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ goog.now()).toString(36)
}, goog.string.compareVersions = function(e, t) {
    for (var o = 0, n = goog.string.trim(String(e)).split("."), i = goog.string.trim(String(t)).split("."), r = Math.max(n.length, i.length), s = 0; 0 == o && r > s; s++) {
        var a = n[s] || "",
            l = i[s] || "",
            c = RegExp("(\\d*)(\\D*)", "g"),
            u = RegExp("(\\d*)(\\D*)", "g");
        do {
            var g = c.exec(a) || ["", "", ""],
                p = u.exec(l) || ["", "", ""];
            if (0 == g[0].length && 0 == p[0].length) break;
            var o = 0 == g[1].length ? 0 : parseInt(g[1], 10),
                h = 0 == p[1].length ? 0 : parseInt(p[1], 10),
                o = goog.string.compareElements_(o, h) || goog.string.compareElements_(0 == g[2].length, 0 == p[2].length) || goog.string.compareElements_(g[2], p[2])
        } while (0 == o)
    }
    return o
}, goog.string.compareElements_ = function(e, t) {
    return t > e ? -1 : e > t ? 1 : 0
}, goog.string.hashCode = function(e) {
    for (var t = 0, o = 0; o < e.length; ++o) t = 31 * t + e.charCodeAt(o) >>> 0;
    return t
}, goog.string.uniqueStringCounter_ = 2147483648 * Math.random() | 0, goog.string.createUniqueString = function() {
    return "goog_" + goog.string.uniqueStringCounter_++
}, goog.string.toNumber = function(e) {
    var t = Number(e);
    return 0 == t && goog.string.isEmptyOrWhitespace(e) ? NaN : t
}, goog.string.isLowerCamelCase = function(e) {
    return /^[a-z]+([A-Z][a-z]*)*$/.test(e)
}, goog.string.isUpperCamelCase = function(e) {
    return /^([A-Z][a-z]*)+$/.test(e)
}, goog.string.toCamelCase = function(e) {
    return String(e).replace(/\-([a-z])/g, function(e, t) {
        return t.toUpperCase()
    })
}, goog.string.toSelectorCase = function(e) {
    return String(e).replace(/([A-Z])/g, "-$1").toLowerCase()
}, goog.string.toTitleCase = function(e, t) {
    var o = goog.isString(t) ? goog.string.regExpEscape(t) : "\\s";
    return e.replace(new RegExp("(^" + (o ? "|[" + o + "]+" : "") + ")([a-z])", "g"), function(e, t, o) {
        return t + o.toUpperCase()
    })
}, goog.string.capitalize = function(e) {
    return String(e.charAt(0)).toUpperCase() + String(e.substr(1)).toLowerCase()
}, goog.string.parseInt = function(e) {
    return isFinite(e) && (e = String(e)), goog.isString(e) ? /^\s*-?0x/i.test(e) ? parseInt(e, 16) : parseInt(e, 10) : NaN
}, goog.string.splitLimit = function(e, t, o) {
    e = e.split(t);
    for (var n = []; o > 0 && e.length;) n.push(e.shift()), o--;
    return e.length && n.push(e.join(t)), n
}, goog.string.lastComponent = function(e, t) {
    if (!t) return e;
    "string" == typeof t && (t = [t]);
    for (var o = -1, n = 0; n < t.length; n++)
        if ("" != t[n]) {
            var i = e.lastIndexOf(t[n]);
            i > o && (o = i)
        }
    return -1 == o ? e : e.slice(o + 1)
}, goog.string.editDistance = function(e, t) {
    var o = [],
        n = [];
    if (e == t) return 0;
    if (!e.length || !t.length) return Math.max(e.length, t.length);
    for (var i = 0; i < t.length + 1; i++) o[i] = i;
    for (i = 0; i < e.length; i++) {
        n[0] = i + 1;
        for (var r = 0; r < t.length; r++) n[r + 1] = Math.min(n[r] + 1, o[r + 1] + 1, o[r] + Number(e[i] != t[r]));
        for (r = 0; r < o.length; r++) o[r] = n[r]
    }
    return n[t.length]
}, goog.asserts = {}, goog.asserts.ENABLE_ASSERTS = goog.DEBUG, goog.asserts.AssertionError = function(e, t) {
    t.unshift(e), goog.debug.Error.call(this, goog.string.subs.apply(null, t)), t.shift(), this.messagePattern = e
}, goog.inherits(goog.asserts.AssertionError, goog.debug.Error), goog.asserts.AssertionError.prototype.name = "AssertionError", goog.asserts.DEFAULT_ERROR_HANDLER = function(e) {
    throw e
}, goog.asserts.errorHandler_ = goog.asserts.DEFAULT_ERROR_HANDLER, goog.asserts.doAssertFailure_ = function(e, t, o, n) {
    var i = "Assertion failed";
    if (o) var i = i + (": " + o),
        r = n;
    else e && (i += ": " + e, r = t);
    e = new goog.asserts.AssertionError("" + i, r || []), goog.asserts.errorHandler_(e)
}, goog.asserts.setErrorHandler = function(e) {
    goog.asserts.ENABLE_ASSERTS && (goog.asserts.errorHandler_ = e)
}, goog.asserts.assert = function(e, t, o) {
    return goog.asserts.ENABLE_ASSERTS && !e && goog.asserts.doAssertFailure_("", null, t, Array.prototype.slice.call(arguments, 2)), e
}, goog.asserts.fail = function(e, t) {
    goog.asserts.ENABLE_ASSERTS && goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure" + (e ? ": " + e : ""), Array.prototype.slice.call(arguments, 1)))
}, goog.asserts.assertNumber = function(e, t, o) {
    return goog.asserts.ENABLE_ASSERTS && !goog.isNumber(e) && goog.asserts.doAssertFailure_("Expected number but got %s: %s.", [goog.typeOf(e), e], t, Array.prototype.slice.call(arguments, 2)), e
}, goog.asserts.assertString = function(e, t, o) {
    return goog.asserts.ENABLE_ASSERTS && !goog.isString(e) && goog.asserts.doAssertFailure_("Expected string but got %s: %s.", [goog.typeOf(e), e], t, Array.prototype.slice.call(arguments, 2)), e
}, goog.asserts.assertFunction = function(e, t, o) {
    return goog.asserts.ENABLE_ASSERTS && !goog.isFunction(e) && goog.asserts.doAssertFailure_("Expected function but got %s: %s.", [goog.typeOf(e), e], t, Array.prototype.slice.call(arguments, 2)), e
}, goog.asserts.assertObject = function(e, t, o) {
    return goog.asserts.ENABLE_ASSERTS && !goog.isObject(e) && goog.asserts.doAssertFailure_("Expected object but got %s: %s.", [goog.typeOf(e), e], t, Array.prototype.slice.call(arguments, 2)), e
}, goog.asserts.assertArray = function(e, t, o) {
    return goog.asserts.ENABLE_ASSERTS && !goog.isArray(e) && goog.asserts.doAssertFailure_("Expected array but got %s: %s.", [goog.typeOf(e), e], t, Array.prototype.slice.call(arguments, 2)), e
}, goog.asserts.assertBoolean = function(e, t, o) {
    return goog.asserts.ENABLE_ASSERTS && !goog.isBoolean(e) && goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.", [goog.typeOf(e), e], t, Array.prototype.slice.call(arguments, 2)), e
}, goog.asserts.assertElement = function(e, t, o) {
    return !goog.asserts.ENABLE_ASSERTS || goog.isObject(e) && e.nodeType == goog.dom.NodeType.ELEMENT || goog.asserts.doAssertFailure_("Expected Element but got %s: %s.", [goog.typeOf(e), e], t, Array.prototype.slice.call(arguments, 2)), e
}, goog.asserts.assertInstanceof = function(e, t, o, n) {
    return !goog.asserts.ENABLE_ASSERTS || e instanceof t || goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.", [goog.asserts.getType_(t), goog.asserts.getType_(e)], o, Array.prototype.slice.call(arguments, 3)), e
}, goog.asserts.assertObjectPrototypeIsIntact = function() {
    for (var e in Object.prototype) goog.asserts.fail(e + " should not be enumerable in Object.prototype.")
}, goog.asserts.getType_ = function(e) {
    return e instanceof Function ? e.displayName || e.name || "unknown type name" : e instanceof Object ? e.constructor.displayName || e.constructor.name || Object.prototype.toString.call(e) : null === e ? "null" : typeof e
}, goog.array = {}, goog.NATIVE_ARRAY_PROTOTYPES = goog.TRUSTED_SITE, goog.array.ASSUME_NATIVE_FUNCTIONS = !1, goog.array.peek = function(e) {
    return e[e.length - 1]
}, goog.array.last = goog.array.peek, goog.array.indexOf = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.indexOf) ? function(e, t, o) {
    return goog.asserts.assert(null != e.length), Array.prototype.indexOf.call(e, t, o)
} : function(e, t, o) {
    if (o = null == o ? 0 : 0 > o ? Math.max(0, e.length + o) : o, goog.isString(e)) return goog.isString(t) && 1 == t.length ? e.indexOf(t, o) : -1;
    for (; o < e.length; o++)
        if (o in e && e[o] === t) return o;
    return -1
}, goog.array.lastIndexOf = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.lastIndexOf) ? function(e, t, o) {
    return goog.asserts.assert(null != e.length), Array.prototype.lastIndexOf.call(e, t, null == o ? e.length - 1 : o)
} : function(e, t, o) {
    if (o = null == o ? e.length - 1 : o, 0 > o && (o = Math.max(0, e.length + o)), goog.isString(e)) return goog.isString(t) && 1 == t.length ? e.lastIndexOf(t, o) : -1;
    for (; o >= 0; o--)
        if (o in e && e[o] === t) return o;
    return -1
}, goog.array.forEach = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.forEach) ? function(e, t, o) {
    goog.asserts.assert(null != e.length), Array.prototype.forEach.call(e, t, o)
} : function(e, t, o) {
    for (var n = e.length, i = goog.isString(e) ? e.split("") : e, r = 0; n > r; r++) r in i && t.call(o, i[r], r, e)
}, goog.array.forEachRight = function(e, t, o) {
    for (var n = e.length, i = goog.isString(e) ? e.split("") : e, n = n - 1; n >= 0; --n) n in i && t.call(o, i[n], n, e)
}, goog.array.filter = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.filter) ? function(e, t, o) {
    return goog.asserts.assert(null != e.length), Array.prototype.filter.call(e, t, o)
} : function(e, t, o) {
    for (var n = e.length, i = [], r = 0, s = goog.isString(e) ? e.split("") : e, a = 0; n > a; a++)
        if (a in s) {
            var l = s[a];
            t.call(o, l, a, e) && (i[r++] = l)
        }
    return i
}, goog.array.map = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.map) ? function(e, t, o) {
    return goog.asserts.assert(null != e.length), Array.prototype.map.call(e, t, o)
} : function(e, t, o) {
    for (var n = e.length, i = Array(n), r = goog.isString(e) ? e.split("") : e, s = 0; n > s; s++) s in r && (i[s] = t.call(o, r[s], s, e));
    return i
}, goog.array.reduce = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.reduce) ? function(e, t, o, n) {
    return goog.asserts.assert(null != e.length), n && (t = goog.bind(t, n)), Array.prototype.reduce.call(e, t, o)
} : function(e, t, o, n) {
    var i = o;
    return goog.array.forEach(e, function(o, r) {
        i = t.call(n, i, o, r, e)
    }), i
}, goog.array.reduceRight = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.reduceRight) ? function(e, t, o, n) {
    return goog.asserts.assert(null != e.length), goog.asserts.assert(null != t), n && (t = goog.bind(t, n)), Array.prototype.reduceRight.call(e, t, o)
} : function(e, t, o, n) {
    var i = o;
    return goog.array.forEachRight(e, function(o, r) {
        i = t.call(n, i, o, r, e)
    }), i
}, goog.array.some = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.some) ? function(e, t, o) {
    return goog.asserts.assert(null != e.length), Array.prototype.some.call(e, t, o)
} : function(e, t, o) {
    for (var n = e.length, i = goog.isString(e) ? e.split("") : e, r = 0; n > r; r++)
        if (r in i && t.call(o, i[r], r, e)) return !0;
    return !1
}, goog.array.every = goog.NATIVE_ARRAY_PROTOTYPES && (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.every) ? function(e, t, o) {
    return goog.asserts.assert(null != e.length), Array.prototype.every.call(e, t, o)
} : function(e, t, o) {
    for (var n = e.length, i = goog.isString(e) ? e.split("") : e, r = 0; n > r; r++)
        if (r in i && !t.call(o, i[r], r, e)) return !1;
    return !0
}, goog.array.count = function(e, t, o) {
    var n = 0;
    return goog.array.forEach(e, function(e, i, r) {
        t.call(o, e, i, r) && ++n
    }, o), n
}, goog.array.find = function(e, t, o) {
    return t = goog.array.findIndex(e, t, o), 0 > t ? null : goog.isString(e) ? e.charAt(t) : e[t]
}, goog.array.findIndex = function(e, t, o) {
    for (var n = e.length, i = goog.isString(e) ? e.split("") : e, r = 0; n > r; r++)
        if (r in i && t.call(o, i[r], r, e)) return r;
    return -1
}, goog.array.findRight = function(e, t, o) {
    return t = goog.array.findIndexRight(e, t, o), 0 > t ? null : goog.isString(e) ? e.charAt(t) : e[t]
}, goog.array.findIndexRight = function(e, t, o) {
    for (var n = e.length, i = goog.isString(e) ? e.split("") : e, n = n - 1; n >= 0; n--)
        if (n in i && t.call(o, i[n], n, e)) return n;
    return -1
}, goog.array.contains = function(e, t) {
    return 0 <= goog.array.indexOf(e, t)
}, goog.array.isEmpty = function(e) {
    return 0 == e.length
}, goog.array.clear = function(e) {
    if (!goog.isArray(e))
        for (var t = e.length - 1; t >= 0; t--) delete e[t];
    e.length = 0
}, goog.array.insert = function(e, t) {
    goog.array.contains(e, t) || e.push(t)
}, goog.array.insertAt = function(e, t, o) {
    goog.array.splice(e, o, 0, t)
}, goog.array.insertArrayAt = function(e, t, o) {
    goog.partial(goog.array.splice, e, o, 0).apply(null, t)
}, goog.array.insertBefore = function(e, t, o) {
    var n;
    2 == arguments.length || 0 > (n = goog.array.indexOf(e, o)) ? e.push(t) : goog.array.insertAt(e, t, n)
}, goog.array.remove = function(e, t) {
    var o, n = goog.array.indexOf(e, t);
    return (o = n >= 0) && goog.array.removeAt(e, n), o
}, goog.array.removeLast = function(e, t) {
    var o = goog.array.lastIndexOf(e, t);
    return o >= 0 ? (goog.array.removeAt(e, o), !0) : !1
}, goog.array.removeAt = function(e, t) {
    return goog.asserts.assert(null != e.length), 1 == Array.prototype.splice.call(e, t, 1).length
}, goog.array.removeIf = function(e, t, o) {
    return t = goog.array.findIndex(e, t, o), t >= 0 ? (goog.array.removeAt(e, t), !0) : !1
}, goog.array.removeAllIf = function(e, t, o) {
    var n = 0;
    return goog.array.forEachRight(e, function(i, r) {
        t.call(o, i, r, e) && goog.array.removeAt(e, r) && n++
    }), n
}, goog.array.concat = function(e) {
    return Array.prototype.concat.apply(Array.prototype, arguments)
}, goog.array.join = function(e) {
    return Array.prototype.concat.apply(Array.prototype, arguments)
}, goog.array.toArray = function(e) {
    var t = e.length;
    if (t > 0) {
        for (var o = Array(t), n = 0; t > n; n++) o[n] = e[n];
        return o
    }
    return []
}, goog.array.clone = goog.array.toArray, goog.array.extend = function(e, t) {
    for (var o = 1; o < arguments.length; o++) {
        var n = arguments[o];
        if (goog.isArrayLike(n)) {
            var i = e.length || 0,
                r = n.length || 0;
            e.length = i + r;
            for (var s = 0; r > s; s++) e[i + s] = n[s]
        } else e.push(n)
    }
}, goog.array.splice = function(e, t, o, n) {
    return goog.asserts.assert(null != e.length), Array.prototype.splice.apply(e, goog.array.slice(arguments, 1))
}, goog.array.slice = function(e, t, o) {
    return goog.asserts.assert(null != e.length), 2 >= arguments.length ? Array.prototype.slice.call(e, t) : Array.prototype.slice.call(e, t, o)
}, goog.array.removeDuplicates = function(e, t, o) {
    t = t || e;
    var n = function(e) {
        return goog.isObject(e) ? "o" + goog.getUid(e) : (typeof e).charAt(0) + e
    };
    o = o || n;
    for (var n = {}, i = 0, r = 0; r < e.length;) {
        var s = e[r++],
            a = o(s);
        Object.prototype.hasOwnProperty.call(n, a) || (n[a] = !0, t[i++] = s)
    }
    t.length = i
}, goog.array.binarySearch = function(e, t, o) {
    return goog.array.binarySearch_(e, o || goog.array.defaultCompare, !1, t)
}, goog.array.binarySelect = function(e, t, o) {
    return goog.array.binarySearch_(e, t, !0, void 0, o)
}, goog.array.binarySearch_ = function(e, t, o, n, i) {
    for (var r, s = 0, a = e.length; a > s;) {
        var l, c = s + a >> 1;
        l = o ? t.call(i, e[c], c, e) : t(n, e[c]), l > 0 ? s = c + 1 : (a = c, r = !l)
    }
    return r ? s : ~s
}, goog.array.sort = function(e, t) {
    e.sort(t || goog.array.defaultCompare)
}, goog.array.stableSort = function(e, t) {
    for (var o = Array(e.length), n = 0; n < e.length; n++) o[n] = {
        index: n,
        value: e[n]
    };
    var i = t || goog.array.defaultCompare;
    for (goog.array.sort(o, function(e, t) {
            return i(e.value, t.value) || e.index - t.index
        }), n = 0; n < e.length; n++) e[n] = o[n].value
}, goog.array.sortByKey = function(e, t, o) {
    var n = o || goog.array.defaultCompare;
    goog.array.sort(e, function(e, o) {
        return n(t(e), t(o))
    })
}, goog.array.sortObjectsByKey = function(e, t, o) {
    goog.array.sortByKey(e, function(e) {
        return e[t]
    }, o)
}, goog.array.isSorted = function(e, t, o) {
    t = t || goog.array.defaultCompare;
    for (var n = 1; n < e.length; n++) {
        var i = t(e[n - 1], e[n]);
        if (i > 0 || 0 == i && o) return !1
    }
    return !0
}, goog.array.equals = function(e, t, o) {
    if (!goog.isArrayLike(e) || !goog.isArrayLike(t) || e.length != t.length) return !1;
    var n = e.length;
    o = o || goog.array.defaultCompareEquality;
    for (var i = 0; n > i; i++)
        if (!o(e[i], t[i])) return !1;
    return !0
}, goog.array.compare3 = function(e, t, o) {
    o = o || goog.array.defaultCompare;
    for (var n = Math.min(e.length, t.length), i = 0; n > i; i++) {
        var r = o(e[i], t[i]);
        if (0 != r) return r
    }
    return goog.array.defaultCompare(e.length, t.length)
}, goog.array.defaultCompare = function(e, t) {
    return e > t ? 1 : t > e ? -1 : 0
}, goog.array.inverseDefaultCompare = function(e, t) {
    return -goog.array.defaultCompare(e, t)
}, goog.array.defaultCompareEquality = function(e, t) {
    return e === t
}, goog.array.binaryInsert = function(e, t, o) {
    return o = goog.array.binarySearch(e, t, o), 0 > o ? (goog.array.insertAt(e, t, -(o + 1)), !0) : !1
}, goog.array.binaryRemove = function(e, t, o) {
    return t = goog.array.binarySearch(e, t, o), t >= 0 ? goog.array.removeAt(e, t) : !1
}, goog.array.bucket = function(e, t, o) {
    for (var n = {}, i = 0; i < e.length; i++) {
        var r = e[i],
            s = t.call(o, r, i, e);
        goog.isDef(s) && (n[s] || (n[s] = [])).push(r)
    }
    return n
}, goog.array.toObject = function(e, t, o) {
    var n = {};
    return goog.array.forEach(e, function(i, r) {
        n[t.call(o, i, r, e)] = i
    }), n
}, goog.array.range = function(e, t, o) {
    var n = [],
        i = 0,
        r = e;
    if (o = o || 1, void 0 !== t && (i = e, r = t), 0 > o * (r - i)) return [];
    if (o > 0)
        for (e = i; r > e; e += o) n.push(e);
    else
        for (e = i; e > r; e += o) n.push(e);
    return n
}, goog.array.repeat = function(e, t) {
    for (var o = [], n = 0; t > n; n++) o[n] = e;
    return o
}, goog.array.flatten = function(e) {
    for (var t = [], o = 0; o < arguments.length; o++) {
        var n = arguments[o];
        if (goog.isArray(n))
            for (var i = 0; i < n.length; i += 8192)
                for (var r = goog.array.slice(n, i, i + 8192), r = goog.array.flatten.apply(null, r), s = 0; s < r.length; s++) t.push(r[s]);
        else t.push(n)
    }
    return t
}, goog.array.rotate = function(e, t) {
    return goog.asserts.assert(null != e.length), e.length && (t %= e.length, t > 0 ? Array.prototype.unshift.apply(e, e.splice(-t, t)) : 0 > t && Array.prototype.push.apply(e, e.splice(0, -t))), e
}, goog.array.moveItem = function(e, t, o) {
    goog.asserts.assert(t >= 0 && t < e.length), goog.asserts.assert(o >= 0 && o < e.length), t = Array.prototype.splice.call(e, t, 1), Array.prototype.splice.call(e, o, 0, t[0])
}, goog.array.zip = function(e) {
    if (!arguments.length) return [];
    for (var t = [], o = arguments[0].length, n = 1; n < arguments.length; n++) arguments[n].length < o && (o = arguments[n].length);
    for (n = 0; o > n; n++) {
        for (var i = [], r = 0; r < arguments.length; r++) i.push(arguments[r][n]);
        t.push(i)
    }
    return t
}, goog.array.shuffle = function(e, t) {
    for (var o = t || Math.random, n = e.length - 1; n > 0; n--) {
        var i = Math.floor(o() * (n + 1)),
            r = e[n];
        e[n] = e[i], e[i] = r
    }
}, goog.array.copyByIndex = function(e, t) {
    var o = [];
    return goog.array.forEach(t, function(t) {
        o.push(e[t])
    }), o
}, goog.array.concatMap = function(e, t, o) {
    return goog.array.concat.apply([], goog.array.map(e, t, o))
}, goog.labs = {}, goog.labs.userAgent = {}, goog.labs.userAgent.util = {}, goog.labs.userAgent.util.getNativeUserAgentString_ = function() {
    var e = goog.labs.userAgent.util.getNavigator_();
    return e && (e = e.userAgent) ? e : ""
}, goog.labs.userAgent.util.getNavigator_ = function() {
    return goog.global.navigator
}, goog.labs.userAgent.util.userAgent_ = goog.labs.userAgent.util.getNativeUserAgentString_(), goog.labs.userAgent.util.setUserAgent = function(e) {
    goog.labs.userAgent.util.userAgent_ = e || goog.labs.userAgent.util.getNativeUserAgentString_()
}, goog.labs.userAgent.util.getUserAgent = function() {
    return goog.labs.userAgent.util.userAgent_
}, goog.labs.userAgent.util.matchUserAgent = function(e) {
    var t = goog.labs.userAgent.util.getUserAgent();
    return goog.string.contains(t, e)
}, goog.labs.userAgent.util.matchUserAgentIgnoreCase = function(e) {
    var t = goog.labs.userAgent.util.getUserAgent();
    return goog.string.caseInsensitiveContains(t, e)
}, goog.labs.userAgent.util.extractVersionTuples = function(e) {
    for (var t, o = RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?", "g"), n = []; t = o.exec(e);) n.push([t[1], t[2], t[3] || void 0]);
    return n
}, goog.object = {}, goog.object.is = function(e, t) {
    return e === t ? 0 !== e || 1 / e === 1 / t : e !== e && t !== t
}, goog.object.forEach = function(e, t, o) {
    for (var n in e) t.call(o, e[n], n, e)
}, goog.object.filter = function(e, t, o) {
    var n, i = {};
    for (n in e) t.call(o, e[n], n, e) && (i[n] = e[n]);
    return i
}, goog.object.map = function(e, t, o) {
    var n, i = {};
    for (n in e) i[n] = t.call(o, e[n], n, e);
    return i
}, goog.object.some = function(e, t, o) {
    for (var n in e)
        if (t.call(o, e[n], n, e)) return !0;
    return !1
}, goog.object.every = function(e, t, o) {
    for (var n in e)
        if (!t.call(o, e[n], n, e)) return !1;
    return !0
}, goog.object.getCount = function(e) {
    var t, o = 0;
    for (t in e) o++;
    return o
}, goog.object.getAnyKey = function(e) {
    for (var t in e) return t
}, goog.object.getAnyValue = function(e) {
    for (var t in e) return e[t]
}, goog.object.contains = function(e, t) {
    return goog.object.containsValue(e, t)
}, goog.object.getValues = function(e) {
    var t, o = [],
        n = 0;
    for (t in e) o[n++] = e[t];
    return o
}, goog.object.getKeys = function(e) {
    var t, o = [],
        n = 0;
    for (t in e) o[n++] = t;
    return o
}, goog.object.getValueByKeys = function(e, t) {
    for (var o = goog.isArrayLike(t), n = o ? t : arguments, o = o ? 0 : 1; o < n.length && (e = e[n[o]], goog.isDef(e)); o++);
    return e
}, goog.object.containsKey = function(e, t) {
    return null !== e && t in e
}, goog.object.containsValue = function(e, t) {
    for (var o in e)
        if (e[o] == t) return !0;
    return !1
}, goog.object.findKey = function(e, t, o) {
    for (var n in e)
        if (t.call(o, e[n], n, e)) return n
}, goog.object.findValue = function(e, t, o) {
    return (t = goog.object.findKey(e, t, o)) && e[t]
}, goog.object.isEmpty = function(e) {
    for (var t in e) return !1;
    return !0
}, goog.object.clear = function(e) {
    for (var t in e) delete e[t]
}, goog.object.remove = function(e, t) {
    var o;
    return (o = t in e) && delete e[t], o
}, goog.object.add = function(e, t, o) {
    if (null !== e && t in e) throw Error('The object already contains the key "' + t + '"');
    goog.object.set(e, t, o)
}, goog.object.get = function(e, t, o) {
    return null !== e && t in e ? e[t] : o
}, goog.object.set = function(e, t, o) {
    e[t] = o
}, goog.object.setIfUndefined = function(e, t, o) {
    return t in e ? e[t] : e[t] = o
}, goog.object.setWithReturnValueIfNotSet = function(e, t, o) {
    return t in e ? e[t] : (o = o(), e[t] = o)
}, goog.object.equals = function(e, t) {
    for (var o in e)
        if (!(o in t) || e[o] !== t[o]) return !1;
    for (o in t)
        if (!(o in e)) return !1;
    return !0
}, goog.object.clone = function(e) {
    var t, o = {};
    for (t in e) o[t] = e[t];
    return o
}, goog.object.unsafeClone = function(e) {
    var t = goog.typeOf(e);
    if ("object" == t || "array" == t) {
        if (goog.isFunction(e.clone)) return e.clone();
        var o, t = "array" == t ? [] : {};
        for (o in e) t[o] = goog.object.unsafeClone(e[o]);
        return t
    }
    return e
}, goog.object.transpose = function(e) {
    var t, o = {};
    for (t in e) o[e[t]] = t;
    return o
}, goog.object.PROTOTYPE_FIELDS_ = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "), goog.object.extend = function(e, t) {
    for (var o, n, i = 1; i < arguments.length; i++) {
        n = arguments[i];
        for (o in n) e[o] = n[o];
        for (var r = 0; r < goog.object.PROTOTYPE_FIELDS_.length; r++) o = goog.object.PROTOTYPE_FIELDS_[r], Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o])
    }
}, goog.object.create = function(e) {
    var t = arguments.length;
    if (1 == t && goog.isArray(arguments[0])) return goog.object.create.apply(null, arguments[0]);
    if (t % 2) throw Error("Uneven number of arguments");
    for (var o = {}, n = 0; t > n; n += 2) o[arguments[n]] = arguments[n + 1];
    return o
}, goog.object.createSet = function(e) {
    var t = arguments.length;
    if (1 == t && goog.isArray(arguments[0])) return goog.object.createSet.apply(null, arguments[0]);
    for (var o = {}, n = 0; t > n; n++) o[arguments[n]] = !0;
    return o
}, goog.object.createImmutableView = function(e) {
    var t = e;
    return Object.isFrozen && !Object.isFrozen(e) && (t = Object.create(e), Object.freeze(t)), t
}, goog.object.isImmutableView = function(e) {
    return !!Object.isFrozen && Object.isFrozen(e)
}, goog.labs.userAgent.browser = {}, goog.labs.userAgent.browser.matchOpera_ = function() {
    return goog.labs.userAgent.util.matchUserAgent("Opera")
}, goog.labs.userAgent.browser.matchIE_ = function() {
    return goog.labs.userAgent.util.matchUserAgent("Trident") || goog.labs.userAgent.util.matchUserAgent("MSIE")
}, goog.labs.userAgent.browser.matchEdge_ = function() {
    return goog.labs.userAgent.util.matchUserAgent("Edge")
}, goog.labs.userAgent.browser.matchFirefox_ = function() {
    return goog.labs.userAgent.util.matchUserAgent("Firefox")
}, goog.labs.userAgent.browser.matchSafari_ = function() {
    return goog.labs.userAgent.util.matchUserAgent("Safari") && !(goog.labs.userAgent.browser.matchChrome_() || goog.labs.userAgent.browser.matchCoast_() || goog.labs.userAgent.browser.matchOpera_() || goog.labs.userAgent.browser.matchEdge_() || goog.labs.userAgent.browser.isSilk() || goog.labs.userAgent.util.matchUserAgent("Android"))
}, goog.labs.userAgent.browser.matchCoast_ = function() {
    return goog.labs.userAgent.util.matchUserAgent("Coast")
}, goog.labs.userAgent.browser.matchIosWebview_ = function() {
    return (goog.labs.userAgent.util.matchUserAgent("iPad") || goog.labs.userAgent.util.matchUserAgent("iPhone")) && !goog.labs.userAgent.browser.matchSafari_() && !goog.labs.userAgent.browser.matchChrome_() && !goog.labs.userAgent.browser.matchCoast_() && goog.labs.userAgent.util.matchUserAgent("AppleWebKit")
}, goog.labs.userAgent.browser.matchChrome_ = function() {
    return (goog.labs.userAgent.util.matchUserAgent("Chrome") || goog.labs.userAgent.util.matchUserAgent("CriOS")) && !goog.labs.userAgent.browser.matchEdge_()
}, goog.labs.userAgent.browser.matchAndroidBrowser_ = function() {
    return goog.labs.userAgent.util.matchUserAgent("Android") && !(goog.labs.userAgent.browser.isChrome() || goog.labs.userAgent.browser.isFirefox() || goog.labs.userAgent.browser.isOpera() || goog.labs.userAgent.browser.isSilk())
}, goog.labs.userAgent.browser.isOpera = goog.labs.userAgent.browser.matchOpera_, goog.labs.userAgent.browser.isIE = goog.labs.userAgent.browser.matchIE_, goog.labs.userAgent.browser.isEdge = goog.labs.userAgent.browser.matchEdge_, goog.labs.userAgent.browser.isFirefox = goog.labs.userAgent.browser.matchFirefox_, goog.labs.userAgent.browser.isSafari = goog.labs.userAgent.browser.matchSafari_, goog.labs.userAgent.browser.isCoast = goog.labs.userAgent.browser.matchCoast_, goog.labs.userAgent.browser.isIosWebview = goog.labs.userAgent.browser.matchIosWebview_, goog.labs.userAgent.browser.isChrome = goog.labs.userAgent.browser.matchChrome_, goog.labs.userAgent.browser.isAndroidBrowser = goog.labs.userAgent.browser.matchAndroidBrowser_, goog.labs.userAgent.browser.isSilk = function() {
    return goog.labs.userAgent.util.matchUserAgent("Silk")
}, goog.labs.userAgent.browser.getVersion = function() {
    function e(e) {
        return e = goog.array.find(e, n), o[e] || ""
    }
    var t = goog.labs.userAgent.util.getUserAgent();
    if (goog.labs.userAgent.browser.isIE()) return goog.labs.userAgent.browser.getIEVersion_(t);
    var t = goog.labs.userAgent.util.extractVersionTuples(t),
        o = {};
    goog.array.forEach(t, function(e) {
        o[e[0]] = e[1]
    });
    var n = goog.partial(goog.object.containsKey, o);
    return goog.labs.userAgent.browser.isOpera() ? e(["Version", "Opera"]) : goog.labs.userAgent.browser.isEdge() ? e(["Edge"]) : goog.labs.userAgent.browser.isChrome() ? e(["Chrome", "CriOS"]) : (t = t[2]) && t[1] || ""
}, goog.labs.userAgent.browser.isVersionOrHigher = function(e) {
    return 0 <= goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(), e)
}, goog.labs.userAgent.browser.getIEVersion_ = function(e) {
    var t = /rv: *([\d\.]*)/.exec(e);
    if (t && t[1]) return t[1];
    var t = "",
        o = /MSIE +([\d\.]+)/.exec(e);
    if (o && o[1])
        if (e = /Trident\/(\d.\d)/.exec(e), "7.0" == o[1])
            if (e && e[1]) switch (e[1]) {
                case "4.0":
                    t = "8.0";
                    break;
                case "5.0":
                    t = "9.0";
                    break;
                case "6.0":
                    t = "10.0";
                    break;
                case "7.0":
                    t = "11.0"
            } else t = "7.0";
            else t = o[1];
    return t
}, goog.labs.userAgent.engine = {}, goog.labs.userAgent.engine.isPresto = function() {
    return goog.labs.userAgent.util.matchUserAgent("Presto")
}, goog.labs.userAgent.engine.isTrident = function() {
    return goog.labs.userAgent.util.matchUserAgent("Trident") || goog.labs.userAgent.util.matchUserAgent("MSIE")
}, goog.labs.userAgent.engine.isEdge = function() {
    return goog.labs.userAgent.util.matchUserAgent("Edge")
}, goog.labs.userAgent.engine.isWebKit = function() {
    return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit") && !goog.labs.userAgent.engine.isEdge()
}, goog.labs.userAgent.engine.isGecko = function() {
    return goog.labs.userAgent.util.matchUserAgent("Gecko") && !goog.labs.userAgent.engine.isWebKit() && !goog.labs.userAgent.engine.isTrident() && !goog.labs.userAgent.engine.isEdge()
}, goog.labs.userAgent.engine.getVersion = function() {
    var e = goog.labs.userAgent.util.getUserAgent();
    if (e) {
        var e = goog.labs.userAgent.util.extractVersionTuples(e),
            t = goog.labs.userAgent.engine.getEngineTuple_(e);
        if (t) return "Gecko" == t[0] ? goog.labs.userAgent.engine.getVersionForKey_(e, "Firefox") : t[1];
        var o, e = e[0];
        if (e && (o = e[2]) && (o = /Trident\/([^\s;]+)/.exec(o))) return o[1]
    }
    return ""
}, goog.labs.userAgent.engine.getEngineTuple_ = function(e) {
    if (!goog.labs.userAgent.engine.isEdge()) return e[1];
    for (var t = 0; t < e.length; t++) {
        var o = e[t];
        if ("Edge" == o[0]) return o
    }
}, goog.labs.userAgent.engine.isVersionOrHigher = function(e) {
    return 0 <= goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(), e)
}, goog.labs.userAgent.engine.getVersionForKey_ = function(e, t) {
    var o = goog.array.find(e, function(e) {
        return t == e[0]
    });
    return o && o[1] || ""
}, goog.labs.userAgent.platform = {}, goog.labs.userAgent.platform.isAndroid = function() {
    return goog.labs.userAgent.util.matchUserAgent("Android")
}, goog.labs.userAgent.platform.isIpod = function() {
    return goog.labs.userAgent.util.matchUserAgent("iPod")
}, goog.labs.userAgent.platform.isIphone = function() {
    return goog.labs.userAgent.util.matchUserAgent("iPhone") && !goog.labs.userAgent.util.matchUserAgent("iPod") && !goog.labs.userAgent.util.matchUserAgent("iPad")
}, goog.labs.userAgent.platform.isIpad = function() {
    return goog.labs.userAgent.util.matchUserAgent("iPad")
}, goog.labs.userAgent.platform.isIos = function() {
    return goog.labs.userAgent.platform.isIphone() || goog.labs.userAgent.platform.isIpad() || goog.labs.userAgent.platform.isIpod()
}, goog.labs.userAgent.platform.isMacintosh = function() {
    return goog.labs.userAgent.util.matchUserAgent("Macintosh")
}, goog.labs.userAgent.platform.isLinux = function() {
    return goog.labs.userAgent.util.matchUserAgent("Linux")
}, goog.labs.userAgent.platform.isWindows = function() {
    return goog.labs.userAgent.util.matchUserAgent("Windows")
}, goog.labs.userAgent.platform.isChromeOS = function() {
    return goog.labs.userAgent.util.matchUserAgent("CrOS")
}, goog.labs.userAgent.platform.getVersion = function() {
    var e = goog.labs.userAgent.util.getUserAgent(),
        t = "";
    return goog.labs.userAgent.platform.isWindows() ? (t = /Windows (?:NT|Phone) ([0-9.]+)/, t = (e = t.exec(e)) ? e[1] : "0.0") : goog.labs.userAgent.platform.isIos() ? (t = /(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/, t = (e = t.exec(e)) && e[1].replace(/_/g, ".")) : goog.labs.userAgent.platform.isMacintosh() ? (t = /Mac OS X ([0-9_.]+)/, t = (e = t.exec(e)) ? e[1].replace(/_/g, ".") : "10") : goog.labs.userAgent.platform.isAndroid() ? (t = /Android\s+([^\);]+)(\)|;)/, t = (e = t.exec(e)) && e[1]) : goog.labs.userAgent.platform.isChromeOS() && (t = /(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/, t = (e = t.exec(e)) && e[1]), t || ""
}, goog.labs.userAgent.platform.isVersionOrHigher = function(e) {
    return 0 <= goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(), e)
}, goog.userAgent = {}, goog.userAgent.ASSUME_IE = !1, goog.userAgent.ASSUME_EDGE = !1, goog.userAgent.ASSUME_GECKO = !1, goog.userAgent.ASSUME_WEBKIT = !1, goog.userAgent.ASSUME_MOBILE_WEBKIT = !1, goog.userAgent.ASSUME_OPERA = !1, goog.userAgent.ASSUME_ANY_VERSION = !1, goog.userAgent.BROWSER_KNOWN_ = goog.userAgent.ASSUME_IE || goog.userAgent.ASSUME_EDGE || goog.userAgent.ASSUME_GECKO || goog.userAgent.ASSUME_MOBILE_WEBKIT || goog.userAgent.ASSUME_WEBKIT || goog.userAgent.ASSUME_OPERA, goog.userAgent.getUserAgentString = function() {
    return goog.labs.userAgent.util.getUserAgent()
}, goog.userAgent.getNavigator = function() {
    return goog.global.navigator || null
}, goog.userAgent.OPERA = goog.userAgent.BROWSER_KNOWN_ ? goog.userAgent.ASSUME_OPERA : goog.labs.userAgent.browser.isOpera(), goog.userAgent.IE = goog.userAgent.BROWSER_KNOWN_ ? goog.userAgent.ASSUME_IE : goog.labs.userAgent.browser.isIE(), goog.userAgent.EDGE = goog.userAgent.BROWSER_KNOWN_ ? goog.userAgent.ASSUME_EDGE : goog.labs.userAgent.engine.isEdge(), goog.userAgent.EDGE_OR_IE = goog.userAgent.EDGE || goog.userAgent.IE, goog.userAgent.GECKO = goog.userAgent.BROWSER_KNOWN_ ? goog.userAgent.ASSUME_GECKO : goog.labs.userAgent.engine.isGecko(), goog.userAgent.WEBKIT = goog.userAgent.BROWSER_KNOWN_ ? goog.userAgent.ASSUME_WEBKIT || goog.userAgent.ASSUME_MOBILE_WEBKIT : goog.labs.userAgent.engine.isWebKit(), goog.userAgent.isMobile_ = function() {
    return goog.userAgent.WEBKIT && goog.labs.userAgent.util.matchUserAgent("Mobile")
}, goog.userAgent.MOBILE = goog.userAgent.ASSUME_MOBILE_WEBKIT || goog.userAgent.isMobile_(), goog.userAgent.SAFARI = goog.userAgent.WEBKIT, goog.userAgent.determinePlatform_ = function() {
    var e = goog.userAgent.getNavigator();
    return e && e.platform || ""
}, goog.userAgent.PLATFORM = goog.userAgent.determinePlatform_(), goog.userAgent.ASSUME_MAC = !1, goog.userAgent.ASSUME_WINDOWS = !1, goog.userAgent.ASSUME_LINUX = !1, goog.userAgent.ASSUME_X11 = !1, goog.userAgent.ASSUME_ANDROID = !1, goog.userAgent.ASSUME_IPHONE = !1, goog.userAgent.ASSUME_IPAD = !1, goog.userAgent.ASSUME_IPOD = !1, goog.userAgent.PLATFORM_KNOWN_ = goog.userAgent.ASSUME_MAC || goog.userAgent.ASSUME_WINDOWS || goog.userAgent.ASSUME_LINUX || goog.userAgent.ASSUME_X11 || goog.userAgent.ASSUME_ANDROID || goog.userAgent.ASSUME_IPHONE || goog.userAgent.ASSUME_IPAD || goog.userAgent.ASSUME_IPOD, goog.userAgent.MAC = goog.userAgent.PLATFORM_KNOWN_ ? goog.userAgent.ASSUME_MAC : goog.labs.userAgent.platform.isMacintosh(), goog.userAgent.WINDOWS = goog.userAgent.PLATFORM_KNOWN_ ? goog.userAgent.ASSUME_WINDOWS : goog.labs.userAgent.platform.isWindows(), goog.userAgent.isLegacyLinux_ = function() {
    return goog.labs.userAgent.platform.isLinux() || goog.labs.userAgent.platform.isChromeOS()
}, goog.userAgent.LINUX = goog.userAgent.PLATFORM_KNOWN_ ? goog.userAgent.ASSUME_LINUX : goog.userAgent.isLegacyLinux_(), goog.userAgent.isX11_ = function() {
    var e = goog.userAgent.getNavigator();
    return !!e && goog.string.contains(e.appVersion || "", "X11")
}, goog.userAgent.X11 = goog.userAgent.PLATFORM_KNOWN_ ? goog.userAgent.ASSUME_X11 : goog.userAgent.isX11_(), goog.userAgent.ANDROID = goog.userAgent.PLATFORM_KNOWN_ ? goog.userAgent.ASSUME_ANDROID : goog.labs.userAgent.platform.isAndroid(), goog.userAgent.IPHONE = goog.userAgent.PLATFORM_KNOWN_ ? goog.userAgent.ASSUME_IPHONE : goog.labs.userAgent.platform.isIphone(), goog.userAgent.IPAD = goog.userAgent.PLATFORM_KNOWN_ ? goog.userAgent.ASSUME_IPAD : goog.labs.userAgent.platform.isIpad(), goog.userAgent.IPOD = goog.userAgent.PLATFORM_KNOWN_ ? goog.userAgent.ASSUME_IPOD : goog.labs.userAgent.platform.isIpod(), goog.userAgent.determineVersion_ = function() {
    var e = "",
        t = goog.userAgent.getVersionRegexResult_();
    return t && (e = t ? t[1] : ""), goog.userAgent.IE && (t = goog.userAgent.getDocumentMode_(), null != t && t > parseFloat(e)) ? String(t) : e
}, goog.userAgent.getVersionRegexResult_ = function() {
    var e = goog.userAgent.getUserAgentString();
    return goog.userAgent.GECKO ? /rv\:([^\);]+)(\)|;)/.exec(e) : goog.userAgent.EDGE ? /Edge\/([\d\.]+)/.exec(e) : goog.userAgent.IE ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e) : goog.userAgent.WEBKIT ? /WebKit\/(\S+)/.exec(e) : goog.userAgent.OPERA ? /(?:Version)[ \/]?(\S+)/.exec(e) : void 0
}, goog.userAgent.getDocumentMode_ = function() {
    var e = goog.global.document;
    return e ? e.documentMode : void 0
}, goog.userAgent.VERSION = goog.userAgent.determineVersion_(), goog.userAgent.compare = function(e, t) {
    return goog.string.compareVersions(e, t)
}, goog.userAgent.isVersionOrHigherCache_ = {}, goog.userAgent.isVersionOrHigher = function(e) {
    return goog.userAgent.ASSUME_ANY_VERSION || goog.userAgent.isVersionOrHigherCache_[e] || (goog.userAgent.isVersionOrHigherCache_[e] = 0 <= goog.string.compareVersions(goog.userAgent.VERSION, e))
}, goog.userAgent.isVersion = goog.userAgent.isVersionOrHigher, goog.userAgent.isDocumentModeOrHigher = function(e) {
    return Number(goog.userAgent.DOCUMENT_MODE) >= e
}, goog.userAgent.isDocumentMode = goog.userAgent.isDocumentModeOrHigher, goog.userAgent.DOCUMENT_MODE = function() {
    var e = goog.global.document,
        t = goog.userAgent.getDocumentMode_();
    return e && goog.userAgent.IE ? t || ("CSS1Compat" == e.compatMode ? parseInt(goog.userAgent.VERSION, 10) : 5) : void 0
}(), goog.dom.BrowserFeature = {
    CAN_ADD_NAME_OR_TYPE_ATTRIBUTES: !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9),
    CAN_USE_CHILDREN_ATTRIBUTE: !goog.userAgent.GECKO && !goog.userAgent.IE || goog.userAgent.IE && goog.userAgent.isDocumentModeOrHigher(9) || goog.userAgent.GECKO && goog.userAgent.isVersionOrHigher("1.9.1"),
    CAN_USE_INNER_TEXT: goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("9"),
    CAN_USE_PARENT_ELEMENT_PROPERTY: goog.userAgent.IE || goog.userAgent.OPERA || goog.userAgent.WEBKIT,
    INNER_HTML_NEEDS_SCOPED_ELEMENT: goog.userAgent.IE,
    LEGACY_IE_RANGES: goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)
}, goog.dom.TagName = {
    A: "A",
    ABBR: "ABBR",
    ACRONYM: "ACRONYM",
    ADDRESS: "ADDRESS",
    APPLET: "APPLET",
    AREA: "AREA",
    ARTICLE: "ARTICLE",
    ASIDE: "ASIDE",
    AUDIO: "AUDIO",
    B: "B",
    BASE: "BASE",
    BASEFONT: "BASEFONT",
    BDI: "BDI",
    BDO: "BDO",
    BIG: "BIG",
    BLOCKQUOTE: "BLOCKQUOTE",
    BODY: "BODY",
    BR: "BR",
    BUTTON: "BUTTON",
    CANVAS: "CANVAS",
    CAPTION: "CAPTION",
    CENTER: "CENTER",
    CITE: "CITE",
    CODE: "CODE",
    COL: "COL",
    COLGROUP: "COLGROUP",
    COMMAND: "COMMAND",
    DATA: "DATA",
    DATALIST: "DATALIST",
    DD: "DD",
    DEL: "DEL",
    DETAILS: "DETAILS",
    DFN: "DFN",
    DIALOG: "DIALOG",
    DIR: "DIR",
    DIV: "DIV",
    DL: "DL",
    DT: "DT",
    EM: "EM",
    EMBED: "EMBED",
    FIELDSET: "FIELDSET",
    FIGCAPTION: "FIGCAPTION",
    FIGURE: "FIGURE",
    FONT: "FONT",
    FOOTER: "FOOTER",
    FORM: "FORM",
    FRAME: "FRAME",
    FRAMESET: "FRAMESET",
    H1: "H1",
    H2: "H2",
    H3: "H3",
    H4: "H4",
    H5: "H5",
    H6: "H6",
    HEAD: "HEAD",
    HEADER: "HEADER",
    HGROUP: "HGROUP",
    HR: "HR",
    HTML: "HTML",
    I: "I",
    IFRAME: "IFRAME",
    IMG: "IMG",
    INPUT: "INPUT",
    INS: "INS",
    ISINDEX: "ISINDEX",
    KBD: "KBD",
    KEYGEN: "KEYGEN",
    LABEL: "LABEL",
    LEGEND: "LEGEND",
    LI: "LI",
    LINK: "LINK",
    MAP: "MAP",
    MARK: "MARK",
    MATH: "MATH",
    MENU: "MENU",
    META: "META",
    METER: "METER",
    NAV: "NAV",
    NOFRAMES: "NOFRAMES",
    NOSCRIPT: "NOSCRIPT",
    OBJECT: "OBJECT",
    OL: "OL",
    OPTGROUP: "OPTGROUP",
    OPTION: "OPTION",
    OUTPUT: "OUTPUT",
    P: "P",
    PARAM: "PARAM",
    PRE: "PRE",
    PROGRESS: "PROGRESS",
    Q: "Q",
    RP: "RP",
    RT: "RT",
    RUBY: "RUBY",
    S: "S",
    SAMP: "SAMP",
    SCRIPT: "SCRIPT",
    SECTION: "SECTION",
    SELECT: "SELECT",
    SMALL: "SMALL",
    SOURCE: "SOURCE",
    SPAN: "SPAN",
    STRIKE: "STRIKE",
    STRONG: "STRONG",
    STYLE: "STYLE",
    SUB: "SUB",
    SUMMARY: "SUMMARY",
    SUP: "SUP",
    SVG: "SVG",
    TABLE: "TABLE",
    TBODY: "TBODY",
    TD: "TD",
    TEMPLATE: "TEMPLATE",
    TEXTAREA: "TEXTAREA",
    TFOOT: "TFOOT",
    TH: "TH",
    THEAD: "THEAD",
    TIME: "TIME",
    TITLE: "TITLE",
    TR: "TR",
    TRACK: "TRACK",
    TT: "TT",
    U: "U",
    UL: "UL",
    VAR: "VAR",
    VIDEO: "VIDEO",
    WBR: "WBR"
}, goog.dom.tags = {}, goog.dom.tags.VOID_TAGS_ = {
    area: !0,
    base: !0,
    br: !0,
    col: !0,
    command: !0,
    embed: !0,
    hr: !0,
    img: !0,
    input: !0,
    keygen: !0,
    link: !0,
    meta: !0,
    param: !0,
    source: !0,
    track: !0,
    wbr: !0
}, goog.dom.tags.isVoidTag = function(e) {
    return !0 === goog.dom.tags.VOID_TAGS_[e]
}, goog.string.TypedString = function() {}, goog.string.Const = function() {
    this.stringConstValueWithSecurityContract__googStringSecurityPrivate_ = "", this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_ = goog.string.Const.TYPE_MARKER_
}, goog.string.Const.prototype.implementsGoogStringTypedString = !0, goog.string.Const.prototype.getTypedStringValue = function() {
    return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_
}, goog.string.Const.prototype.toString = function() {
    return "Const{" + this.stringConstValueWithSecurityContract__googStringSecurityPrivate_ + "}"
}, goog.string.Const.unwrap = function(e) {
    return e instanceof goog.string.Const && e.constructor === goog.string.Const && e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_ === goog.string.Const.TYPE_MARKER_ ? e.stringConstValueWithSecurityContract__googStringSecurityPrivate_ : (goog.asserts.fail("expected object of type Const, got '" + e + "'"), "type_error:Const")
}, goog.string.Const.from = function(e) {
    return goog.string.Const.create__googStringSecurityPrivate_(e)
}, goog.string.Const.TYPE_MARKER_ = {}, goog.string.Const.create__googStringSecurityPrivate_ = function(e) {
    var t = new goog.string.Const;
    return t.stringConstValueWithSecurityContract__googStringSecurityPrivate_ = e, t
}, goog.html = {}, goog.html.SafeStyle = function() {
    this.privateDoNotAccessOrElseSafeStyleWrappedValue_ = "", this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
}, goog.html.SafeStyle.prototype.implementsGoogStringTypedString = !0, goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}, goog.html.SafeStyle.fromConstant = function(e) {
    return e = goog.string.Const.unwrap(e), 0 === e.length ? goog.html.SafeStyle.EMPTY : (goog.html.SafeStyle.checkStyle_(e), goog.asserts.assert(goog.string.endsWith(e, ";"), "Last character of style string is not ';': " + e), goog.asserts.assert(goog.string.contains(e, ":"), "Style string must contain at least one ':', to specify a \"name: value\" pair: " + e), goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))
}, goog.html.SafeStyle.checkStyle_ = function(e) {
    goog.asserts.assert(!/[<>]/.test(e), "Forbidden characters in style string: " + e)
}, goog.html.SafeStyle.prototype.getTypedStringValue = function() {
    return this.privateDoNotAccessOrElseSafeStyleWrappedValue_
}, goog.DEBUG && (goog.html.SafeStyle.prototype.toString = function() {
    return "SafeStyle{" + this.privateDoNotAccessOrElseSafeStyleWrappedValue_ + "}"
}), goog.html.SafeStyle.unwrap = function(e) {
    return e instanceof goog.html.SafeStyle && e.constructor === goog.html.SafeStyle && e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ === goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ? e.privateDoNotAccessOrElseSafeStyleWrappedValue_ : (goog.asserts.fail("expected object of type SafeStyle, got '" + e + "' of type " + goog.typeOf(e)), "type_error:SafeStyle")
}, goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse = function(e) {
    return (new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)
}, goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_ = function(e) {
    return this.privateDoNotAccessOrElseSafeStyleWrappedValue_ = e, this
}, goog.html.SafeStyle.EMPTY = goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""), goog.html.SafeStyle.INNOCUOUS_STRING = "zClosurez", goog.html.SafeStyle.create = function(e) {
    var t, o = "";
    for (t in e) {
        if (!/^[-_a-zA-Z0-9]+$/.test(t)) throw Error("Name allows only [-_a-zA-Z0-9], got: " + t);
        var n = e[t];
        null != n && (n instanceof goog.string.Const ? (n = goog.string.Const.unwrap(n), goog.asserts.assert(!/[{;}]/.test(n), "Value does not allow [{;}].")) : goog.html.SafeStyle.VALUE_RE_.test(n) ? goog.html.SafeStyle.hasBalancedQuotes_(n) || (goog.asserts.fail("String value requires balanced quotes, got: " + n), n = goog.html.SafeStyle.INNOCUOUS_STRING) : (goog.asserts.fail("String value allows only [-,.\"'%_!# a-zA-Z0-9], rgb() and rgba(), got: " + n), n = goog.html.SafeStyle.INNOCUOUS_STRING), o += t + ":" + n + ";")
    }
    return o ? (goog.html.SafeStyle.checkStyle_(o), goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)) : goog.html.SafeStyle.EMPTY
}, goog.html.SafeStyle.hasBalancedQuotes_ = function(e) {
    for (var t = !0, o = !0, n = 0; n < e.length; n++) {
        var i = e.charAt(n);
        "'" == i && o ? t = !t : '"' == i && t && (o = !o)
    }
    return t && o
}, goog.html.SafeStyle.VALUE_RE_ = /^([-,."'%_!# a-zA-Z0-9]+|(?:rgb|hsl)a?\([0-9.%, ]+\))$/, goog.html.SafeStyle.concat = function(e) {
    var t = "",
        o = function(e) {
            goog.isArray(e) ? goog.array.forEach(e, o) : t += goog.html.SafeStyle.unwrap(e)
        };
    return goog.array.forEach(arguments, o), t ? goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t) : goog.html.SafeStyle.EMPTY
}, goog.html.SafeStyleSheet = function() {
    this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ = "", this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
}, goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString = !0, goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}, goog.html.SafeStyleSheet.concat = function(e) {
    var t = "",
        o = function(e) {
            goog.isArray(e) ? goog.array.forEach(e, o) : t += goog.html.SafeStyleSheet.unwrap(e)
        };
    return goog.array.forEach(arguments, o), goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)
}, goog.html.SafeStyleSheet.fromConstant = function(e) {
    return e = goog.string.Const.unwrap(e), 0 === e.length ? goog.html.SafeStyleSheet.EMPTY : (goog.asserts.assert(!goog.string.contains(e, "<"), "Forbidden '<' character in style sheet string: " + e), goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))
}, goog.html.SafeStyleSheet.prototype.getTypedStringValue = function() {
    return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_
}, goog.DEBUG && (goog.html.SafeStyleSheet.prototype.toString = function() {
    return "SafeStyleSheet{" + this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ + "}"
}), goog.html.SafeStyleSheet.unwrap = function(e) {
    return e instanceof goog.html.SafeStyleSheet && e.constructor === goog.html.SafeStyleSheet && e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ === goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ? e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ : (goog.asserts.fail("expected object of type SafeStyleSheet, got '" + e + "' of type " + goog.typeOf(e)), "type_error:SafeStyleSheet")
}, goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse = function(e) {
    return (new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)
}, goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_ = function(e) {
    return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ = e, this
}, goog.html.SafeStyleSheet.EMPTY = goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""), goog.fs = {}, goog.fs.url = {}, goog.fs.url.createObjectUrl = function(e) {
    return goog.fs.url.getUrlObject_().createObjectURL(e)
}, goog.fs.url.revokeObjectUrl = function(e) {
    goog.fs.url.getUrlObject_().revokeObjectURL(e)
}, goog.fs.url.getUrlObject_ = function() {
    var e = goog.fs.url.findUrlObject_();
    if (null != e) return e;
    throw Error("This browser doesn't seem to support blob URLs")
}, goog.fs.url.findUrlObject_ = function() {
    return goog.isDef(goog.global.URL) && goog.isDef(goog.global.URL.createObjectURL) ? goog.global.URL : goog.isDef(goog.global.webkitURL) && goog.isDef(goog.global.webkitURL.createObjectURL) ? goog.global.webkitURL : goog.isDef(goog.global.createObjectURL) ? goog.global : null
}, goog.fs.url.browserSupportsObjectUrls = function() {
    return null != goog.fs.url.findUrlObject_()
}, goog.i18n = {}, goog.i18n.bidi = {}, goog.i18n.bidi.FORCE_RTL = !1, goog.i18n.bidi.IS_RTL = goog.i18n.bidi.FORCE_RTL || ("ar" == goog.LOCALE.substring(0, 2).toLowerCase() || "fa" == goog.LOCALE.substring(0, 2).toLowerCase() || "he" == goog.LOCALE.substring(0, 2).toLowerCase() || "iw" == goog.LOCALE.substring(0, 2).toLowerCase() || "ps" == goog.LOCALE.substring(0, 2).toLowerCase() || "sd" == goog.LOCALE.substring(0, 2).toLowerCase() || "ug" == goog.LOCALE.substring(0, 2).toLowerCase() || "ur" == goog.LOCALE.substring(0, 2).toLowerCase() || "yi" == goog.LOCALE.substring(0, 2).toLowerCase()) && (2 == goog.LOCALE.length || "-" == goog.LOCALE.substring(2, 3) || "_" == goog.LOCALE.substring(2, 3)) || 3 <= goog.LOCALE.length && "ckb" == goog.LOCALE.substring(0, 3).toLowerCase() && (3 == goog.LOCALE.length || "-" == goog.LOCALE.substring(3, 4) || "_" == goog.LOCALE.substring(3, 4)), goog.i18n.bidi.Format = {
    LRE: "\u202a",
    RLE: "\u202b",
    PDF: "\u202c",
    LRM: "\u200e",
    RLM: "\u200f"
}, goog.i18n.bidi.Dir = {
    LTR: 1,
    RTL: -1,
    NEUTRAL: 0
}, goog.i18n.bidi.RIGHT = "right", goog.i18n.bidi.LEFT = "left", goog.i18n.bidi.I18N_RIGHT = goog.i18n.bidi.IS_RTL ? goog.i18n.bidi.LEFT : goog.i18n.bidi.RIGHT, goog.i18n.bidi.I18N_LEFT = goog.i18n.bidi.IS_RTL ? goog.i18n.bidi.RIGHT : goog.i18n.bidi.LEFT, goog.i18n.bidi.toDir = function(e, t) {
    return "number" == typeof e ? e > 0 ? goog.i18n.bidi.Dir.LTR : 0 > e ? goog.i18n.bidi.Dir.RTL : t ? null : goog.i18n.bidi.Dir.NEUTRAL : null == e ? null : e ? goog.i18n.bidi.Dir.RTL : goog.i18n.bidi.Dir.LTR;
}, goog.i18n.bidi.ltrChars_ = "A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff", goog.i18n.bidi.rtlChars_ = "\u0591-\u06ef\u06fa-\u07ff\u200f\ufb1d-\ufdff\ufe70-\ufefc", goog.i18n.bidi.htmlSkipReg_ = /<[^>]*>|&[^;]+;/g, goog.i18n.bidi.stripHtmlIfNeeded_ = function(e, t) {
    return t ? e.replace(goog.i18n.bidi.htmlSkipReg_, "") : e
}, goog.i18n.bidi.rtlCharReg_ = new RegExp("[" + goog.i18n.bidi.rtlChars_ + "]"), goog.i18n.bidi.ltrCharReg_ = new RegExp("[" + goog.i18n.bidi.ltrChars_ + "]"), goog.i18n.bidi.hasAnyRtl = function(e, t) {
    return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e, t))
}, goog.i18n.bidi.hasRtlChar = goog.i18n.bidi.hasAnyRtl, goog.i18n.bidi.hasAnyLtr = function(e, t) {
    return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e, t))
}, goog.i18n.bidi.ltrRe_ = new RegExp("^[" + goog.i18n.bidi.ltrChars_ + "]"), goog.i18n.bidi.rtlRe_ = new RegExp("^[" + goog.i18n.bidi.rtlChars_ + "]"), goog.i18n.bidi.isRtlChar = function(e) {
    return goog.i18n.bidi.rtlRe_.test(e)
}, goog.i18n.bidi.isLtrChar = function(e) {
    return goog.i18n.bidi.ltrRe_.test(e)
}, goog.i18n.bidi.isNeutralChar = function(e) {
    return !goog.i18n.bidi.isLtrChar(e) && !goog.i18n.bidi.isRtlChar(e)
}, goog.i18n.bidi.ltrDirCheckRe_ = new RegExp("^[^" + goog.i18n.bidi.rtlChars_ + "]*[" + goog.i18n.bidi.ltrChars_ + "]"), goog.i18n.bidi.rtlDirCheckRe_ = new RegExp("^[^" + goog.i18n.bidi.ltrChars_ + "]*[" + goog.i18n.bidi.rtlChars_ + "]"), goog.i18n.bidi.startsWithRtl = function(e, t) {
    return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e, t))
}, goog.i18n.bidi.isRtlText = goog.i18n.bidi.startsWithRtl, goog.i18n.bidi.startsWithLtr = function(e, t) {
    return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e, t))
}, goog.i18n.bidi.isLtrText = goog.i18n.bidi.startsWithLtr, goog.i18n.bidi.isRequiredLtrRe_ = /^http:\/\/.*/, goog.i18n.bidi.isNeutralText = function(e, t) {
    return e = goog.i18n.bidi.stripHtmlIfNeeded_(e, t), goog.i18n.bidi.isRequiredLtrRe_.test(e) || !goog.i18n.bidi.hasAnyLtr(e) && !goog.i18n.bidi.hasAnyRtl(e)
}, goog.i18n.bidi.ltrExitDirCheckRe_ = new RegExp("[" + goog.i18n.bidi.ltrChars_ + "][^" + goog.i18n.bidi.rtlChars_ + "]*$"), goog.i18n.bidi.rtlExitDirCheckRe_ = new RegExp("[" + goog.i18n.bidi.rtlChars_ + "][^" + goog.i18n.bidi.ltrChars_ + "]*$"), goog.i18n.bidi.endsWithLtr = function(e, t) {
    return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e, t))
}, goog.i18n.bidi.isLtrExitText = goog.i18n.bidi.endsWithLtr, goog.i18n.bidi.endsWithRtl = function(e, t) {
    return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e, t))
}, goog.i18n.bidi.isRtlExitText = goog.i18n.bidi.endsWithRtl, goog.i18n.bidi.rtlLocalesRe_ = /^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i, goog.i18n.bidi.isRtlLanguage = function(e) {
    return goog.i18n.bidi.rtlLocalesRe_.test(e)
}, goog.i18n.bidi.bracketGuardTextRe_ = /(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g, goog.i18n.bidi.guardBracketInText = function(e, t) {
    var o = (void 0 === t ? goog.i18n.bidi.hasAnyRtl(e) : t) ? goog.i18n.bidi.Format.RLM : goog.i18n.bidi.Format.LRM;
    return e.replace(goog.i18n.bidi.bracketGuardTextRe_, o + "$&" + o)
}, goog.i18n.bidi.enforceRtlInHtml = function(e) {
    return "<" == e.charAt(0) ? e.replace(/<\w+/, "$& dir=rtl") : "\n<span dir=rtl>" + e + "</span>"
}, goog.i18n.bidi.enforceRtlInText = function(e) {
    return goog.i18n.bidi.Format.RLE + e + goog.i18n.bidi.Format.PDF
}, goog.i18n.bidi.enforceLtrInHtml = function(e) {
    return "<" == e.charAt(0) ? e.replace(/<\w+/, "$& dir=ltr") : "\n<span dir=ltr>" + e + "</span>"
}, goog.i18n.bidi.enforceLtrInText = function(e) {
    return goog.i18n.bidi.Format.LRE + e + goog.i18n.bidi.Format.PDF
}, goog.i18n.bidi.dimensionsRe_ = /:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g, goog.i18n.bidi.leftRe_ = /left/gi, goog.i18n.bidi.rightRe_ = /right/gi, goog.i18n.bidi.tempRe_ = /%%%%/g, goog.i18n.bidi.mirrorCSS = function(e) {
    return e.replace(goog.i18n.bidi.dimensionsRe_, ":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_, "%%%%").replace(goog.i18n.bidi.rightRe_, goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_, goog.i18n.bidi.RIGHT)
}, goog.i18n.bidi.doubleQuoteSubstituteRe_ = /([\u0591-\u05f2])"/g, goog.i18n.bidi.singleQuoteSubstituteRe_ = /([\u0591-\u05f2])'/g, goog.i18n.bidi.normalizeHebrewQuote = function(e) {
    return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_, "$1\u05f4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_, "$1\u05f3")
}, goog.i18n.bidi.wordSeparatorRe_ = /\s+/, goog.i18n.bidi.hasNumeralsRe_ = /[\d\u06f0-\u06f9]/, goog.i18n.bidi.rtlDetectionThreshold_ = .4, goog.i18n.bidi.estimateDirection = function(e, t) {
    for (var o = 0, n = 0, i = !1, r = goog.i18n.bidi.stripHtmlIfNeeded_(e, t).split(goog.i18n.bidi.wordSeparatorRe_), s = 0; s < r.length; s++) {
        var a = r[s];
        goog.i18n.bidi.startsWithRtl(a) ? (o++, n++) : goog.i18n.bidi.isRequiredLtrRe_.test(a) ? i = !0 : goog.i18n.bidi.hasAnyLtr(a) ? n++ : goog.i18n.bidi.hasNumeralsRe_.test(a) && (i = !0)
    }
    return 0 == n ? i ? goog.i18n.bidi.Dir.LTR : goog.i18n.bidi.Dir.NEUTRAL : o / n > goog.i18n.bidi.rtlDetectionThreshold_ ? goog.i18n.bidi.Dir.RTL : goog.i18n.bidi.Dir.LTR
}, goog.i18n.bidi.detectRtlDirectionality = function(e, t) {
    return goog.i18n.bidi.estimateDirection(e, t) == goog.i18n.bidi.Dir.RTL
}, goog.i18n.bidi.setElementDirAndAlign = function(e, t) {
    e && (t = goog.i18n.bidi.toDir(t)) && (e.style.textAlign = t == goog.i18n.bidi.Dir.RTL ? goog.i18n.bidi.RIGHT : goog.i18n.bidi.LEFT, e.dir = t == goog.i18n.bidi.Dir.RTL ? "rtl" : "ltr")
}, goog.i18n.bidi.setElementDirByTextDirectionality = function(e, t) {
    switch (goog.i18n.bidi.estimateDirection(t)) {
        case goog.i18n.bidi.Dir.LTR:
            e.dir = "ltr";
            break;
        case goog.i18n.bidi.Dir.RTL:
            e.dir = "rtl";
            break;
        default:
            e.removeAttribute("dir")
    }
}, goog.i18n.bidi.DirectionalString = function() {}, goog.html.SafeUrl = function() {
    this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = "", this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
}, goog.html.SafeUrl.INNOCUOUS_STRING = "about:invalid#zClosurez", goog.html.SafeUrl.prototype.implementsGoogStringTypedString = !0, goog.html.SafeUrl.prototype.getTypedStringValue = function() {
    return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_
}, goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString = !0, goog.html.SafeUrl.prototype.getDirection = function() {
    return goog.i18n.bidi.Dir.LTR
}, goog.DEBUG && (goog.html.SafeUrl.prototype.toString = function() {
    return "SafeUrl{" + this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ + "}"
}), goog.html.SafeUrl.unwrap = function(e) {
    return e instanceof goog.html.SafeUrl && e.constructor === goog.html.SafeUrl && e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ === goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ? e.privateDoNotAccessOrElseSafeHtmlWrappedValue_ : (goog.asserts.fail("expected object of type SafeUrl, got '" + e + "' of type " + goog.typeOf(e)), "type_error:SafeUrl")
}, goog.html.SafeUrl.fromConstant = function(e) {
    return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))
}, goog.html.SAFE_MIME_TYPE_PATTERN_ = /^(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm))$/i, goog.html.SafeUrl.fromBlob = function(e) {
    return e = goog.html.SAFE_MIME_TYPE_PATTERN_.test(e.type) ? goog.fs.url.createObjectUrl(e) : goog.html.SafeUrl.INNOCUOUS_STRING, goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)
}, goog.html.DATA_URL_PATTERN_ = /^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i, goog.html.SafeUrl.fromDataUrl = function(e) {
    var t = e.match(goog.html.DATA_URL_PATTERN_),
        t = t && goog.html.SAFE_MIME_TYPE_PATTERN_.test(t[1]);
    return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t ? e : goog.html.SafeUrl.INNOCUOUS_STRING)
}, goog.html.SafeUrl.fromTelUrl = function(e) {
    return goog.string.caseInsensitiveStartsWith(e, "tel:") || (e = goog.html.SafeUrl.INNOCUOUS_STRING), goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)
}, goog.html.SAFE_URL_PATTERN_ = /^(?:(?:https?|mailto|ftp):|[^&:\/?#]*(?:[\/?#]|$))/i, goog.html.SafeUrl.sanitize = function(e) {
    return e instanceof goog.html.SafeUrl ? e : (e = e.implementsGoogStringTypedString ? e.getTypedStringValue() : String(e), goog.html.SAFE_URL_PATTERN_.test(e) || (e = goog.html.SafeUrl.INNOCUOUS_STRING), goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))
}, goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}, goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse = function(e) {
    var t = new goog.html.SafeUrl;
    return t.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = e, t
}, goog.html.SafeUrl.ABOUT_BLANK = goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"), goog.html.TrustedResourceUrl = function() {
    this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ = "", this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
}, goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString = !0, goog.html.TrustedResourceUrl.prototype.getTypedStringValue = function() {
    return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_
}, goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString = !0, goog.html.TrustedResourceUrl.prototype.getDirection = function() {
    return goog.i18n.bidi.Dir.LTR
}, goog.DEBUG && (goog.html.TrustedResourceUrl.prototype.toString = function() {
    return "TrustedResourceUrl{" + this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ + "}"
}), goog.html.TrustedResourceUrl.unwrap = function(e) {
    return e instanceof goog.html.TrustedResourceUrl && e.constructor === goog.html.TrustedResourceUrl && e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ === goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ? e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ : (goog.asserts.fail("expected object of type TrustedResourceUrl, got '" + e + "' of type " + goog.typeOf(e)), "type_error:TrustedResourceUrl")
}, goog.html.TrustedResourceUrl.fromConstant = function(e) {
    return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))
}, goog.html.TrustedResourceUrl.fromConstants = function(e) {
    for (var t = "", o = 0; o < e.length; o++) t += goog.string.Const.unwrap(e[o]);
    return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)
}, goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}, goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse = function(e) {
    var t = new goog.html.TrustedResourceUrl;
    return t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ = e, t
}, goog.html.SafeHtml = function() {
    this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = "", this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_, this.dir_ = null
}, goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString = !0, goog.html.SafeHtml.prototype.getDirection = function() {
    return this.dir_
}, goog.html.SafeHtml.prototype.implementsGoogStringTypedString = !0, goog.html.SafeHtml.prototype.getTypedStringValue = function() {
    return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_
}, goog.DEBUG && (goog.html.SafeHtml.prototype.toString = function() {
    return "SafeHtml{" + this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ + "}"
}), goog.html.SafeHtml.unwrap = function(e) {
    return e instanceof goog.html.SafeHtml && e.constructor === goog.html.SafeHtml && e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ === goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ? e.privateDoNotAccessOrElseSafeHtmlWrappedValue_ : (goog.asserts.fail("expected object of type SafeHtml, got '" + e + "' of type " + goog.typeOf(e)), "type_error:SafeHtml")
}, goog.html.SafeHtml.htmlEscape = function(e) {
    if (e instanceof goog.html.SafeHtml) return e;
    var t = null;
    return e.implementsGoogI18nBidiDirectionalString && (t = e.getDirection()), e = e.implementsGoogStringTypedString ? e.getTypedStringValue() : String(e), goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(e), t)
}, goog.html.SafeHtml.htmlEscapePreservingNewlines = function(e) {
    return e instanceof goog.html.SafeHtml ? e : (e = goog.html.SafeHtml.htmlEscape(e), goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(e)), e.getDirection()))
}, goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces = function(e) {
    return e instanceof goog.html.SafeHtml ? e : (e = goog.html.SafeHtml.htmlEscape(e), goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(e)), e.getDirection()))
}, goog.html.SafeHtml.from = goog.html.SafeHtml.htmlEscape, goog.html.SafeHtml.VALID_NAMES_IN_TAG_ = /^[a-zA-Z0-9-]+$/, goog.html.SafeHtml.URL_ATTRIBUTES_ = {
    action: !0,
    cite: !0,
    data: !0,
    formaction: !0,
    href: !0,
    manifest: !0,
    poster: !0,
    src: !0
}, goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_ = goog.object.createSet(goog.dom.TagName.APPLET, goog.dom.TagName.BASE, goog.dom.TagName.EMBED, goog.dom.TagName.IFRAME, goog.dom.TagName.LINK, goog.dom.TagName.MATH, goog.dom.TagName.META, goog.dom.TagName.OBJECT, goog.dom.TagName.SCRIPT, goog.dom.TagName.STYLE, goog.dom.TagName.SVG, goog.dom.TagName.TEMPLATE), goog.html.SafeHtml.create = function(e, t, o) {
    return goog.html.SafeHtml.verifyTagName(e), goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(e, t, o)
}, goog.html.SafeHtml.verifyTagName = function(e) {
    if (!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e)) throw Error("Invalid tag name <" + e + ">.");
    if (e.toUpperCase() in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_) throw Error("Tag name <" + e + "> is not allowed for SafeHtml.")
}, goog.html.SafeHtml.createIframe = function(e, t, o, n) {
    e && goog.html.TrustedResourceUrl.unwrap(e);
    var i = {};
    return i.src = e || null, i.srcdoc = t && goog.html.SafeHtml.unwrap(t), e = goog.html.SafeHtml.combineAttributes(i, {
        sandbox: ""
    }, o), goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe", e, n)
}, goog.html.SafeHtml.createSandboxIframe = function(e, t, o, n) {
    if (!goog.html.SafeHtml.canUseSandboxIframe()) throw Error("The browser does not support sandboxed iframes.");
    var i = {};
    return i.src = e ? goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)) : null, i.srcdoc = t || null, i.sandbox = "", e = goog.html.SafeHtml.combineAttributes(i, {}, o), goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe", e, n)
}, goog.html.SafeHtml.canUseSandboxIframe = function() {
    return goog.global.HTMLIFrameElement && "sandbox" in goog.global.HTMLIFrameElement.prototype
}, goog.html.SafeHtml.createScriptSrc = function(e, t) {
    goog.html.TrustedResourceUrl.unwrap(e);
    var o = goog.html.SafeHtml.combineAttributes({
        src: e
    }, {}, t);
    return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script", o)
}, goog.html.SafeHtml.createStyle = function(e, t) {
    var o = goog.html.SafeHtml.combineAttributes({
            type: "text/css"
        }, {}, t),
        n = "";
    e = goog.array.concat(e);
    for (var i = 0; i < e.length; i++) n += goog.html.SafeStyleSheet.unwrap(e[i]);
    return n = goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n, goog.i18n.bidi.Dir.NEUTRAL), goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style", o, n)
}, goog.html.SafeHtml.createMetaRefresh = function(e, t) {
    var o = goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e));
    return (goog.labs.userAgent.browser.isIE() || goog.labs.userAgent.browser.isEdge()) && goog.string.contains(o, ";") && (o = "'" + o.replace(/'/g, "%27") + "'"), goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta", {
        "http-equiv": "refresh",
        content: (t || 0) + "; url=" + o
    })
}, goog.html.SafeHtml.getAttrNameAndValue_ = function(e, t, o) {
    if (o instanceof goog.string.Const) o = goog.string.Const.unwrap(o);
    else if ("style" == t.toLowerCase()) o = goog.html.SafeHtml.getStyleValue_(o);
    else {
        if (/^on/i.test(t)) throw Error('Attribute "' + t + '" requires goog.string.Const value, "' + o + '" given.');
        if (t.toLowerCase() in goog.html.SafeHtml.URL_ATTRIBUTES_)
            if (o instanceof goog.html.TrustedResourceUrl) o = goog.html.TrustedResourceUrl.unwrap(o);
            else if (o instanceof goog.html.SafeUrl) o = goog.html.SafeUrl.unwrap(o);
        else {
            if (!goog.isString(o)) throw Error('Attribute "' + t + '" on tag "' + e + '" requires goog.html.SafeUrl, goog.string.Const, or string, value "' + o + '" given.');
            o = goog.html.SafeUrl.sanitize(o).getTypedStringValue()
        }
    }
    return o.implementsGoogStringTypedString && (o = o.getTypedStringValue()), goog.asserts.assert(goog.isString(o) || goog.isNumber(o), "String or number value expected, got " + typeof o + " with value: " + o), t + '="' + goog.string.htmlEscape(String(o)) + '"'
}, goog.html.SafeHtml.getStyleValue_ = function(e) {
    if (!goog.isObject(e)) throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, ' + typeof e + " given: " + e);
    return e instanceof goog.html.SafeStyle || (e = goog.html.SafeStyle.create(e)), goog.html.SafeStyle.unwrap(e)
}, goog.html.SafeHtml.createWithDir = function(e, t, o, n) {
    return t = goog.html.SafeHtml.create(t, o, n), t.dir_ = e, t
}, goog.html.SafeHtml.concat = function(e) {
    var t = goog.i18n.bidi.Dir.NEUTRAL,
        o = "",
        n = function(e) {
            goog.isArray(e) ? goog.array.forEach(e, n) : (e = goog.html.SafeHtml.htmlEscape(e), o += goog.html.SafeHtml.unwrap(e), e = e.getDirection(), t == goog.i18n.bidi.Dir.NEUTRAL ? t = e : e != goog.i18n.bidi.Dir.NEUTRAL && t != e && (t = null))
        };
    return goog.array.forEach(arguments, n), goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o, t)
}, goog.html.SafeHtml.concatWithDir = function(e, t) {
    var o = goog.html.SafeHtml.concat(goog.array.slice(arguments, 1));
    return o.dir_ = e, o
}, goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}, goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse = function(e, t) {
    return (new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e, t)
}, goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_ = function(e, t) {
    return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = e, this.dir_ = t, this
}, goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse = function(e, t, o) {
    var n, i = null;
    return n = "<" + e + goog.html.SafeHtml.stringifyAttributes(e, t), goog.isDefAndNotNull(o) ? goog.isArray(o) || (o = [o]) : o = [], goog.dom.tags.isVoidTag(e.toLowerCase()) ? (goog.asserts.assert(!o.length, "Void tag <" + e + "> does not allow content."), n += ">") : (i = goog.html.SafeHtml.concat(o), n += ">" + goog.html.SafeHtml.unwrap(i) + "</" + e + ">", i = i.getDirection()), (e = t && t.dir) && (i = /^(ltr|rtl|auto)$/i.test(e) ? goog.i18n.bidi.Dir.NEUTRAL : null), goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n, i)
}, goog.html.SafeHtml.stringifyAttributes = function(e, t) {
    var o = "";
    if (t)
        for (var n in t) {
            if (!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(n)) throw Error('Invalid attribute name "' + n + '".');
            var i = t[n];
            goog.isDefAndNotNull(i) && (o += " " + goog.html.SafeHtml.getAttrNameAndValue_(e, n, i))
        }
    return o
}, goog.html.SafeHtml.combineAttributes = function(e, t, o) {
    var n, i = {};
    for (n in e) goog.asserts.assert(n.toLowerCase() == n, "Must be lower case"), i[n] = e[n];
    for (n in t) goog.asserts.assert(n.toLowerCase() == n, "Must be lower case"), i[n] = t[n];
    for (n in o) {
        var r = n.toLowerCase();
        if (r in e) throw Error('Cannot override "' + r + '" attribute, got "' + n + '" with value "' + o[n] + '"');
        r in t && delete i[r], i[n] = o[n]
    }
    return i
}, goog.html.SafeHtml.DOCTYPE_HTML = goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>", goog.i18n.bidi.Dir.NEUTRAL), goog.html.SafeHtml.EMPTY = goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("", goog.i18n.bidi.Dir.NEUTRAL), goog.html.SafeHtml.BR = goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>", goog.i18n.bidi.Dir.NEUTRAL), goog.dom.safe = {}, goog.dom.safe.InsertAdjacentHtmlPosition = {
    AFTERBEGIN: "afterbegin",
    AFTEREND: "afterend",
    BEFOREBEGIN: "beforebegin",
    BEFOREEND: "beforeend"
}, goog.dom.safe.insertAdjacentHtml = function(e, t, o) {
    e.insertAdjacentHTML(t, goog.html.SafeHtml.unwrap(o))
}, goog.dom.safe.setInnerHtml = function(e, t) {
    e.innerHTML = goog.html.SafeHtml.unwrap(t)
}, goog.dom.safe.setOuterHtml = function(e, t) {
    e.outerHTML = goog.html.SafeHtml.unwrap(t)
}, goog.dom.safe.documentWrite = function(e, t) {
    e.write(goog.html.SafeHtml.unwrap(t))
}, goog.dom.safe.setAnchorHref = function(e, t) {
    var o;
    o = t instanceof goog.html.SafeUrl ? t : goog.html.SafeUrl.sanitize(t), e.href = goog.html.SafeUrl.unwrap(o)
}, goog.dom.safe.setImageSrc = function(e, t) {
    var o;
    o = t instanceof goog.html.SafeUrl ? t : goog.html.SafeUrl.sanitize(t), e.src = goog.html.SafeUrl.unwrap(o)
}, goog.dom.safe.setEmbedSrc = function(e, t) {
    e.src = goog.html.TrustedResourceUrl.unwrap(t)
}, goog.dom.safe.setFrameSrc = function(e, t) {
    e.src = goog.html.TrustedResourceUrl.unwrap(t)
}, goog.dom.safe.setIframeSrc = function(e, t) {
    e.src = goog.html.TrustedResourceUrl.unwrap(t)
}, goog.dom.safe.setLinkHrefAndRel = function(e, t, o) {
    e.rel = o, goog.string.caseInsensitiveContains(o, "stylesheet") ? (goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl, 'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'), e.href = goog.html.TrustedResourceUrl.unwrap(t)) : e.href = t instanceof goog.html.TrustedResourceUrl ? goog.html.TrustedResourceUrl.unwrap(t) : t instanceof goog.html.SafeUrl ? goog.html.SafeUrl.unwrap(t) : goog.html.SafeUrl.sanitize(t).getTypedStringValue()
}, goog.dom.safe.setObjectData = function(e, t) {
    e.data = goog.html.TrustedResourceUrl.unwrap(t)
}, goog.dom.safe.setScriptSrc = function(e, t) {
    e.src = goog.html.TrustedResourceUrl.unwrap(t)
}, goog.dom.safe.setLocationHref = function(e, t) {
    var o;
    o = t instanceof goog.html.SafeUrl ? t : goog.html.SafeUrl.sanitize(t), e.href = goog.html.SafeUrl.unwrap(o)
}, goog.dom.safe.openInWindow = function(e, t, o, n, i) {
    return e = e instanceof goog.html.SafeUrl ? e : goog.html.SafeUrl.sanitize(e), (t || window).open(goog.html.SafeUrl.unwrap(e), o ? goog.string.Const.unwrap(o) : "", n, i)
}, goog.math = {}, goog.math.randomInt = function(e) {
    return Math.floor(Math.random() * e)
}, goog.math.uniformRandom = function(e, t) {
    return e + Math.random() * (t - e)
}, goog.math.clamp = function(e, t, o) {
    return Math.min(Math.max(e, t), o)
}, goog.math.modulo = function(e, t) {
    var o = e % t;
    return 0 > o * t ? o + t : o
}, goog.math.lerp = function(e, t, o) {
    return e + o * (t - e)
}, goog.math.nearlyEquals = function(e, t, o) {
    return Math.abs(e - t) <= (o || 1e-6)
}, goog.math.standardAngle = function(e) {
    return goog.math.modulo(e, 360)
}, goog.math.standardAngleInRadians = function(e) {
    return goog.math.modulo(e, 2 * Math.PI)
}, goog.math.toRadians = function(e) {
    return e * Math.PI / 180
}, goog.math.toDegrees = function(e) {
    return 180 * e / Math.PI
}, goog.math.angleDx = function(e, t) {
    return t * Math.cos(goog.math.toRadians(e))
}, goog.math.angleDy = function(e, t) {
    return t * Math.sin(goog.math.toRadians(e))
}, goog.math.angle = function(e, t, o, n) {
    return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(n - t, o - e)))
}, goog.math.angleDifference = function(e, t) {
    var o = goog.math.standardAngle(t) - goog.math.standardAngle(e);
    return o > 180 ? o -= 360 : -180 >= o && (o = 360 + o), o
}, goog.math.sign = Math.sign || function(e) {
    return e > 0 ? 1 : 0 > e ? -1 : e
}, goog.math.longestCommonSubsequence = function(e, t, o, n) {
    o = o || function(e, t) {
        return e == t
    }, n = n || function(t, o) {
        return e[t]
    };
    for (var i = e.length, r = t.length, s = [], a = 0; i + 1 > a; a++) s[a] = [], s[a][0] = 0;
    for (var l = 0; r + 1 > l; l++) s[0][l] = 0;
    for (a = 1; i >= a; a++)
        for (l = 1; r >= l; l++) o(e[a - 1], t[l - 1]) ? s[a][l] = s[a - 1][l - 1] + 1 : s[a][l] = Math.max(s[a - 1][l], s[a][l - 1]);
    for (var c = [], a = i, l = r; a > 0 && l > 0;) o(e[a - 1], t[l - 1]) ? (c.unshift(n(a - 1, l - 1)), a--, l--) : s[a - 1][l] > s[a][l - 1] ? a-- : l--;
    return c
}, goog.math.sum = function(e) {
    return goog.array.reduce(arguments, function(e, t) {
        return e + t
    }, 0)
}, goog.math.average = function(e) {
    return goog.math.sum.apply(null, arguments) / arguments.length
}, goog.math.sampleVariance = function(e) {
    var t = arguments.length;
    if (2 > t) return 0;
    var o = goog.math.average.apply(null, arguments);
    return goog.math.sum.apply(null, goog.array.map(arguments, function(e) {
        return Math.pow(e - o, 2)
    })) / (t - 1)
}, goog.math.standardDeviation = function(e) {
    return Math.sqrt(goog.math.sampleVariance.apply(null, arguments))
}, goog.math.isInt = function(e) {
    return isFinite(e) && 0 == e % 1
}, goog.math.isFiniteNumber = function(e) {
    return isFinite(e) && !isNaN(e)
}, goog.math.isNegativeZero = function(e) {
    return 0 == e && 0 > 1 / e
}, goog.math.log10Floor = function(e) {
    if (e > 0) {
        var t = Math.round(Math.log(e) * Math.LOG10E);
        return t - (parseFloat("1e" + t) > e ? 1 : 0)
    }
    return 0 == e ? -(1 / 0) : NaN
}, goog.math.safeFloor = function(e, t) {
    return goog.asserts.assert(!goog.isDef(t) || t > 0), Math.floor(e + (t || 2e-15))
}, goog.math.safeCeil = function(e, t) {
    return goog.asserts.assert(!goog.isDef(t) || t > 0), Math.ceil(e - (t || 2e-15))
}, goog.math.Coordinate = function(e, t) {
    this.x = goog.isDef(e) ? e : 0, this.y = goog.isDef(t) ? t : 0
}, goog.math.Coordinate.prototype.clone = function() {
    return new goog.math.Coordinate(this.x, this.y)
}, goog.DEBUG && (goog.math.Coordinate.prototype.toString = function() {
    return "(" + this.x + ", " + this.y + ")"
}), goog.math.Coordinate.equals = function(e, t) {
    return e == t ? !0 : e && t ? e.x == t.x && e.y == t.y : !1
}, goog.math.Coordinate.distance = function(e, t) {
    var o = e.x - t.x,
        n = e.y - t.y;
    return Math.sqrt(o * o + n * n)
}, goog.math.Coordinate.magnitude = function(e) {
    return Math.sqrt(e.x * e.x + e.y * e.y)
}, goog.math.Coordinate.azimuth = function(e) {
    return goog.math.angle(0, 0, e.x, e.y)
}, goog.math.Coordinate.squaredDistance = function(e, t) {
    var o = e.x - t.x,
        n = e.y - t.y;
    return o * o + n * n
}, goog.math.Coordinate.difference = function(e, t) {
    return new goog.math.Coordinate(e.x - t.x, e.y - t.y)
}, goog.math.Coordinate.sum = function(e, t) {
    return new goog.math.Coordinate(e.x + t.x, e.y + t.y)
}, goog.math.Coordinate.prototype.ceil = function() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
}, goog.math.Coordinate.prototype.floor = function() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
}, goog.math.Coordinate.prototype.round = function() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this
}, goog.math.Coordinate.prototype.translate = function(e, t) {
    return e instanceof goog.math.Coordinate ? (this.x += e.x, this.y += e.y) : (this.x += Number(e), goog.isNumber(t) && (this.y += t)), this
}, goog.math.Coordinate.prototype.scale = function(e, t) {
    var o = goog.isNumber(t) ? t : e;
    return this.x *= e, this.y *= o, this
}, goog.math.Coordinate.prototype.rotateRadians = function(e, t) {
    var o = t || new goog.math.Coordinate(0, 0),
        n = this.x,
        i = this.y,
        r = Math.cos(e),
        s = Math.sin(e);
    this.x = (n - o.x) * r - (i - o.y) * s + o.x, this.y = (n - o.x) * s + (i - o.y) * r + o.y
}, goog.math.Coordinate.prototype.rotateDegrees = function(e, t) {
    this.rotateRadians(goog.math.toRadians(e), t)
}, goog.math.Size = function(e, t) {
    this.width = e, this.height = t
}, goog.math.Size.equals = function(e, t) {
    return e == t ? !0 : e && t ? e.width == t.width && e.height == t.height : !1
}, goog.math.Size.prototype.clone = function() {
    return new goog.math.Size(this.width, this.height)
}, goog.DEBUG && (goog.math.Size.prototype.toString = function() {
    return "(" + this.width + " x " + this.height + ")"
}), goog.math.Size.prototype.getLongest = function() {
    return Math.max(this.width, this.height)
}, goog.math.Size.prototype.getShortest = function() {
    return Math.min(this.width, this.height)
}, goog.math.Size.prototype.area = function() {
    return this.width * this.height
}, goog.math.Size.prototype.perimeter = function() {
    return 2 * (this.width + this.height)
}, goog.math.Size.prototype.aspectRatio = function() {
    return this.width / this.height
}, goog.math.Size.prototype.isEmpty = function() {
    return !this.area()
}, goog.math.Size.prototype.ceil = function() {
    return this.width = Math.ceil(this.width), this.height = Math.ceil(this.height), this
}, goog.math.Size.prototype.fitsInside = function(e) {
    return this.width <= e.width && this.height <= e.height
}, goog.math.Size.prototype.floor = function() {
    return this.width = Math.floor(this.width), this.height = Math.floor(this.height), this
}, goog.math.Size.prototype.round = function() {
    return this.width = Math.round(this.width), this.height = Math.round(this.height), this
}, goog.math.Size.prototype.scale = function(e, t) {
    var o = goog.isNumber(t) ? t : e;
    return this.width *= e, this.height *= o, this
}, goog.math.Size.prototype.scaleToCover = function(e) {
    return e = this.aspectRatio() <= e.aspectRatio() ? e.width / this.width : e.height / this.height, this.scale(e)
}, goog.math.Size.prototype.scaleToFit = function(e) {
    return e = this.aspectRatio() > e.aspectRatio() ? e.width / this.width : e.height / this.height, this.scale(e)
}, goog.dom.ASSUME_QUIRKS_MODE = !1, goog.dom.ASSUME_STANDARDS_MODE = !1, goog.dom.COMPAT_MODE_KNOWN_ = goog.dom.ASSUME_QUIRKS_MODE || goog.dom.ASSUME_STANDARDS_MODE, goog.dom.getDomHelper = function(e) {
    return e ? new goog.dom.DomHelper(goog.dom.getOwnerDocument(e)) : goog.dom.defaultDomHelper_ || (goog.dom.defaultDomHelper_ = new goog.dom.DomHelper)
}, goog.dom.getDocument = function() {
    return document
}, goog.dom.getElement = function(e) {
    return goog.dom.getElementHelper_(document, e)
}, goog.dom.getElementHelper_ = function(e, t) {
    return goog.isString(t) ? e.getElementById(t) : t
}, goog.dom.getRequiredElement = function(e) {
    return goog.dom.getRequiredElementHelper_(document, e)
}, goog.dom.getRequiredElementHelper_ = function(e, t) {
    goog.asserts.assertString(t);
    var o = goog.dom.getElementHelper_(e, t);
    return o = goog.asserts.assertElement(o, "No element found with id: " + t)
}, goog.dom.$ = goog.dom.getElement, goog.dom.getElementsByTagNameAndClass = function(e, t, o) {
    return goog.dom.getElementsByTagNameAndClass_(document, e, t, o)
}, goog.dom.getElementsByClass = function(e, t) {
    var o = t || document;
    return goog.dom.canUseQuerySelector_(o) ? o.querySelectorAll("." + e) : goog.dom.getElementsByTagNameAndClass_(document, "*", e, t)
}, goog.dom.getElementByClass = function(e, t) {
    var o = t || document;
    return (o.getElementsByClassName ? o.getElementsByClassName(e)[0] : goog.dom.canUseQuerySelector_(o) ? o.querySelector("." + e) : goog.dom.getElementsByTagNameAndClass_(document, "*", e, t)[0]) || null
}, goog.dom.getRequiredElementByClass = function(e, t) {
    var o = goog.dom.getElementByClass(e, t);
    return goog.asserts.assert(o, "No element found with className: " + e)
}, goog.dom.canUseQuerySelector_ = function(e) {
    return !(!e.querySelectorAll || !e.querySelector)
}, goog.dom.getElementsByTagNameAndClass_ = function(e, t, o, n) {
    if (e = n || e, t = t && "*" != t ? t.toUpperCase() : "", goog.dom.canUseQuerySelector_(e) && (t || o)) return e.querySelectorAll(t + (o ? "." + o : ""));
    if (o && e.getElementsByClassName) {
        if (e = e.getElementsByClassName(o), t) {
            n = {};
            for (var i, r = 0, s = 0; i = e[s]; s++) t == i.nodeName && (n[r++] = i);
            return n.length = r, n
        }
        return e
    }
    if (e = e.getElementsByTagName(t || "*"), o) {
        for (n = {}, s = r = 0; i = e[s]; s++) t = i.className, "function" == typeof t.split && goog.array.contains(t.split(/\s+/), o) && (n[r++] = i);
        return n.length = r, n
    }
    return e
}, goog.dom.$$ = goog.dom.getElementsByTagNameAndClass, goog.dom.setProperties = function(e, t) {
    goog.object.forEach(t, function(t, o) {
        "style" == o ? e.style.cssText = t : "class" == o ? e.className = t : "for" == o ? e.htmlFor = t : goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(o) ? e.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[o], t) : goog.string.startsWith(o, "aria-") || goog.string.startsWith(o, "data-") ? e.setAttribute(o, t) : e[o] = t
    })
}, goog.dom.DIRECT_ATTRIBUTE_MAP_ = {
    cellpadding: "cellPadding",
    cellspacing: "cellSpacing",
    colspan: "colSpan",
    frameborder: "frameBorder",
    height: "height",
    maxlength: "maxLength",
    nonce: "nonce",
    role: "role",
    rowspan: "rowSpan",
    type: "type",
    usemap: "useMap",
    valign: "vAlign",
    width: "width"
}, goog.dom.getViewportSize = function(e) {
    return goog.dom.getViewportSize_(e || window)
}, goog.dom.getViewportSize_ = function(e) {
    return e = e.document, e = goog.dom.isCss1CompatMode_(e) ? e.documentElement : e.body, new goog.math.Size(e.clientWidth, e.clientHeight)
}, goog.dom.getDocumentHeight = function() {
    return goog.dom.getDocumentHeight_(window)
}, goog.dom.getDocumentHeightForWindow = function(e) {
    return goog.dom.getDocumentHeight_(e)
}, goog.dom.getDocumentHeight_ = function(e) {
    var t = e.document,
        o = 0;
    if (t) {
        var o = t.body,
            n = t.documentElement;
        if (!n || !o) return 0;
        if (e = goog.dom.getViewportSize_(e).height, goog.dom.isCss1CompatMode_(t) && n.scrollHeight) o = n.scrollHeight != e ? n.scrollHeight : n.offsetHeight;
        else {
            var t = n.scrollHeight,
                i = n.offsetHeight;
            n.clientHeight != i && (t = o.scrollHeight, i = o.offsetHeight), o = t > e ? t > i ? t : i : i > t ? t : i
        }
    }
    return o
}, goog.dom.getPageScroll = function(e) {
    return goog.dom.getDomHelper((e || goog.global || window).document).getDocumentScroll()
}, goog.dom.getDocumentScroll = function() {
    return goog.dom.getDocumentScroll_(document)
}, goog.dom.getDocumentScroll_ = function(e) {
    var t = goog.dom.getDocumentScrollElement_(e);
    return e = goog.dom.getWindow_(e), goog.userAgent.IE && goog.userAgent.isVersionOrHigher("10") && e.pageYOffset != t.scrollTop ? new goog.math.Coordinate(t.scrollLeft, t.scrollTop) : new goog.math.Coordinate(e.pageXOffset || t.scrollLeft, e.pageYOffset || t.scrollTop)
}, goog.dom.getDocumentScrollElement = function() {
    return goog.dom.getDocumentScrollElement_(document)
}, goog.dom.getDocumentScrollElement_ = function(e) {
    return e.scrollingElement ? e.scrollingElement : !goog.userAgent.WEBKIT && goog.dom.isCss1CompatMode_(e) ? e.documentElement : e.body || e.documentElement
}, goog.dom.getWindow = function(e) {
    return e ? goog.dom.getWindow_(e) : window
}, goog.dom.getWindow_ = function(e) {
    return e.parentWindow || e.defaultView
}, goog.dom.createDom = function(e, t, o) {
    return goog.dom.createDom_(document, arguments);
}, goog.dom.createDom_ = function(e, t) {
    var o = t[0],
        n = t[1];
    if (!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES && n && (n.name || n.type)) {
        if (o = ["<", o], n.name && o.push(' name="', goog.string.htmlEscape(n.name), '"'), n.type) {
            o.push(' type="', goog.string.htmlEscape(n.type), '"');
            var i = {};
            goog.object.extend(i, n), delete i.type, n = i
        }
        o.push(">"), o = o.join("")
    }
    return o = e.createElement(o), n && (goog.isString(n) ? o.className = n : goog.isArray(n) ? o.className = n.join(" ") : goog.dom.setProperties(o, n)), 2 < t.length && goog.dom.append_(e, o, t, 2), o
}, goog.dom.append_ = function(e, t, o, n) {
    function i(o) {
        o && t.appendChild(goog.isString(o) ? e.createTextNode(o) : o)
    }
    for (; n < o.length; n++) {
        var r = o[n];
        goog.isArrayLike(r) && !goog.dom.isNodeLike(r) ? goog.array.forEach(goog.dom.isNodeList(r) ? goog.array.toArray(r) : r, i) : i(r)
    }
}, goog.dom.$dom = goog.dom.createDom, goog.dom.createElement = function(e) {
    return document.createElement(e)
}, goog.dom.createTextNode = function(e) {
    return document.createTextNode(String(e))
}, goog.dom.createTable = function(e, t, o) {
    return goog.dom.createTable_(document, e, t, !!o)
}, goog.dom.createTable_ = function(e, t, o, n) {
    for (var i = e.createElement(goog.dom.TagName.TABLE), r = i.appendChild(e.createElement(goog.dom.TagName.TBODY)), s = 0; t > s; s++) {
        for (var a = e.createElement(goog.dom.TagName.TR), l = 0; o > l; l++) {
            var c = e.createElement(goog.dom.TagName.TD);
            n && goog.dom.setTextContent(c, goog.string.Unicode.NBSP), a.appendChild(c)
        }
        r.appendChild(a)
    }
    return i
}, goog.dom.safeHtmlToNode = function(e) {
    return goog.dom.safeHtmlToNode_(document, e)
}, goog.dom.safeHtmlToNode_ = function(e, t) {
    var o = e.createElement(goog.dom.TagName.DIV);
    return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT ? (goog.dom.safe.setInnerHtml(o, goog.html.SafeHtml.concat(goog.html.SafeHtml.BR, t)), o.removeChild(o.firstChild)) : goog.dom.safe.setInnerHtml(o, t), goog.dom.childrenToNode_(e, o)
}, goog.dom.childrenToNode_ = function(e, t) {
    if (1 == t.childNodes.length) return t.removeChild(t.firstChild);
    for (var o = e.createDocumentFragment(); t.firstChild;) o.appendChild(t.firstChild);
    return o
}, goog.dom.isCss1CompatMode = function() {
    return goog.dom.isCss1CompatMode_(document)
}, goog.dom.isCss1CompatMode_ = function(e) {
    return goog.dom.COMPAT_MODE_KNOWN_ ? goog.dom.ASSUME_STANDARDS_MODE : "CSS1Compat" == e.compatMode
}, goog.dom.canHaveChildren = function(e) {
    if (e.nodeType != goog.dom.NodeType.ELEMENT) return !1;
    switch (e.tagName) {
        case goog.dom.TagName.APPLET:
        case goog.dom.TagName.AREA:
        case goog.dom.TagName.BASE:
        case goog.dom.TagName.BR:
        case goog.dom.TagName.COL:
        case goog.dom.TagName.COMMAND:
        case goog.dom.TagName.EMBED:
        case goog.dom.TagName.FRAME:
        case goog.dom.TagName.HR:
        case goog.dom.TagName.IMG:
        case goog.dom.TagName.INPUT:
        case goog.dom.TagName.IFRAME:
        case goog.dom.TagName.ISINDEX:
        case goog.dom.TagName.KEYGEN:
        case goog.dom.TagName.LINK:
        case goog.dom.TagName.NOFRAMES:
        case goog.dom.TagName.NOSCRIPT:
        case goog.dom.TagName.META:
        case goog.dom.TagName.OBJECT:
        case goog.dom.TagName.PARAM:
        case goog.dom.TagName.SCRIPT:
        case goog.dom.TagName.SOURCE:
        case goog.dom.TagName.STYLE:
        case goog.dom.TagName.TRACK:
        case goog.dom.TagName.WBR:
            return !1
    }
    return !0
}, goog.dom.appendChild = function(e, t) {
    e.appendChild(t)
}, goog.dom.append = function(e, t) {
    goog.dom.append_(goog.dom.getOwnerDocument(e), e, arguments, 1)
}, goog.dom.removeChildren = function(e) {
    for (var t; t = e.firstChild;) e.removeChild(t)
}, goog.dom.insertSiblingBefore = function(e, t) {
    t.parentNode && t.parentNode.insertBefore(e, t)
}, goog.dom.insertSiblingAfter = function(e, t) {
    t.parentNode && t.parentNode.insertBefore(e, t.nextSibling)
}, goog.dom.insertChildAt = function(e, t, o) {
    e.insertBefore(t, e.childNodes[o] || null)
}, goog.dom.removeNode = function(e) {
    return e && e.parentNode ? e.parentNode.removeChild(e) : null
}, goog.dom.replaceNode = function(e, t) {
    var o = t.parentNode;
    o && o.replaceChild(e, t)
}, goog.dom.flattenElement = function(e) {
    var t, o = e.parentNode;
    if (o && o.nodeType != goog.dom.NodeType.DOCUMENT_FRAGMENT) {
        if (e.removeNode) return e.removeNode(!1);
        for (; t = e.firstChild;) o.insertBefore(t, e);
        return goog.dom.removeNode(e)
    }
}, goog.dom.getChildren = function(e) {
    return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE && void 0 != e.children ? e.children : goog.array.filter(e.childNodes, function(e) {
        return e.nodeType == goog.dom.NodeType.ELEMENT
    })
}, goog.dom.getFirstElementChild = function(e) {
    return goog.isDef(e.firstElementChild) ? e.firstElementChild : goog.dom.getNextElementNode_(e.firstChild, !0)
}, goog.dom.getLastElementChild = function(e) {
    return goog.isDef(e.lastElementChild) ? e.lastElementChild : goog.dom.getNextElementNode_(e.lastChild, !1)
}, goog.dom.getNextElementSibling = function(e) {
    return goog.isDef(e.nextElementSibling) ? e.nextElementSibling : goog.dom.getNextElementNode_(e.nextSibling, !0)
}, goog.dom.getPreviousElementSibling = function(e) {
    return goog.isDef(e.previousElementSibling) ? e.previousElementSibling : goog.dom.getNextElementNode_(e.previousSibling, !1)
}, goog.dom.getNextElementNode_ = function(e, t) {
    for (; e && e.nodeType != goog.dom.NodeType.ELEMENT;) e = t ? e.nextSibling : e.previousSibling;
    return e
}, goog.dom.getNextNode = function(e) {
    if (!e) return null;
    if (e.firstChild) return e.firstChild;
    for (; e && !e.nextSibling;) e = e.parentNode;
    return e ? e.nextSibling : null
}, goog.dom.getPreviousNode = function(e) {
    if (!e) return null;
    if (!e.previousSibling) return e.parentNode;
    for (e = e.previousSibling; e && e.lastChild;) e = e.lastChild;
    return e
}, goog.dom.isNodeLike = function(e) {
    return goog.isObject(e) && 0 < e.nodeType
}, goog.dom.isElement = function(e) {
    return goog.isObject(e) && e.nodeType == goog.dom.NodeType.ELEMENT
}, goog.dom.isWindow = function(e) {
    return goog.isObject(e) && e.window == e
}, goog.dom.getParentElement = function(e) {
    var t;
    return !goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY || goog.userAgent.IE && goog.userAgent.isVersionOrHigher("9") && !goog.userAgent.isVersionOrHigher("10") && goog.global.SVGElement && e instanceof goog.global.SVGElement || !(t = e.parentElement) ? (t = e.parentNode, goog.dom.isElement(t) ? t : null) : t
}, goog.dom.contains = function(e, t) {
    if (!e || !t) return !1;
    if (e.contains && t.nodeType == goog.dom.NodeType.ELEMENT) return e == t || e.contains(t);
    if ("undefined" != typeof e.compareDocumentPosition) return e == t || !!(16 & e.compareDocumentPosition(t));
    for (; t && e != t;) t = t.parentNode;
    return t == e
}, goog.dom.compareNodeOrder = function(e, t) {
    if (e == t) return 0;
    if (e.compareDocumentPosition) return 2 & e.compareDocumentPosition(t) ? 1 : -1;
    if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)) {
        if (e.nodeType == goog.dom.NodeType.DOCUMENT) return -1;
        if (t.nodeType == goog.dom.NodeType.DOCUMENT) return 1
    }
    if ("sourceIndex" in e || e.parentNode && "sourceIndex" in e.parentNode) {
        var o = e.nodeType == goog.dom.NodeType.ELEMENT,
            n = t.nodeType == goog.dom.NodeType.ELEMENT;
        if (o && n) return e.sourceIndex - t.sourceIndex;
        var i = e.parentNode,
            r = t.parentNode;
        return i == r ? goog.dom.compareSiblingOrder_(e, t) : !o && goog.dom.contains(i, t) ? -1 * goog.dom.compareParentsDescendantNodeIe_(e, t) : !n && goog.dom.contains(r, e) ? goog.dom.compareParentsDescendantNodeIe_(t, e) : (o ? e.sourceIndex : i.sourceIndex) - (n ? t.sourceIndex : r.sourceIndex)
    }
    return n = goog.dom.getOwnerDocument(e), o = n.createRange(), o.selectNode(e), o.collapse(!0), n = n.createRange(), n.selectNode(t), n.collapse(!0), o.compareBoundaryPoints(goog.global.Range.START_TO_END, n)
}, goog.dom.compareParentsDescendantNodeIe_ = function(e, t) {
    var o = e.parentNode;
    if (o == t) return -1;
    for (var n = t; n.parentNode != o;) n = n.parentNode;
    return goog.dom.compareSiblingOrder_(n, e)
}, goog.dom.compareSiblingOrder_ = function(e, t) {
    for (var o = t; o = o.previousSibling;)
        if (o == e) return -1;
    return 1
}, goog.dom.findCommonAncestor = function(e) {
    var t, o = arguments.length;
    if (!o) return null;
    if (1 == o) return arguments[0];
    var n = [],
        i = 1 / 0;
    for (t = 0; o > t; t++) {
        for (var r = [], s = arguments[t]; s;) r.unshift(s), s = s.parentNode;
        n.push(r), i = Math.min(i, r.length)
    }
    for (r = null, t = 0; i > t; t++) {
        for (var s = n[0][t], a = 1; o > a; a++)
            if (s != n[a][t]) return r;
        r = s
    }
    return r
}, goog.dom.getOwnerDocument = function(e) {
    return goog.asserts.assert(e, "Node cannot be null or undefined."), e.nodeType == goog.dom.NodeType.DOCUMENT ? e : e.ownerDocument || e.document
}, goog.dom.getFrameContentDocument = function(e) {
    return e.contentDocument || e.contentWindow.document
}, goog.dom.getFrameContentWindow = function(e) {
    try {
        return e.contentWindow || (e.contentDocument ? goog.dom.getWindow(e.contentDocument) : null)
    } catch (t) {}
    return null
}, goog.dom.setTextContent = function(e, t) {
    if (goog.asserts.assert(null != e, "goog.dom.setTextContent expects a non-null value for node"), "textContent" in e) e.textContent = t;
    else if (e.nodeType == goog.dom.NodeType.TEXT) e.data = t;
    else if (e.firstChild && e.firstChild.nodeType == goog.dom.NodeType.TEXT) {
        for (; e.lastChild != e.firstChild;) e.removeChild(e.lastChild);
        e.firstChild.data = t
    } else {
        goog.dom.removeChildren(e);
        var o = goog.dom.getOwnerDocument(e);
        e.appendChild(o.createTextNode(String(t)))
    }
}, goog.dom.getOuterHtml = function(e) {
    if (goog.asserts.assert(null !== e, "goog.dom.getOuterHtml expects a non-null value for element"), "outerHTML" in e) return e.outerHTML;
    var t = goog.dom.getOwnerDocument(e).createElement(goog.dom.TagName.DIV);
    return t.appendChild(e.cloneNode(!0)), t.innerHTML
}, goog.dom.findNode = function(e, t) {
    var o = [];
    return goog.dom.findNodes_(e, t, o, !0) ? o[0] : void 0
}, goog.dom.findNodes = function(e, t) {
    var o = [];
    return goog.dom.findNodes_(e, t, o, !1), o
}, goog.dom.findNodes_ = function(e, t, o, n) {
    if (null != e)
        for (e = e.firstChild; e;) {
            if (t(e) && (o.push(e), n) || goog.dom.findNodes_(e, t, o, n)) return !0;
            e = e.nextSibling
        }
    return !1
}, goog.dom.TAGS_TO_IGNORE_ = {
    SCRIPT: 1,
    STYLE: 1,
    HEAD: 1,
    IFRAME: 1,
    OBJECT: 1
}, goog.dom.PREDEFINED_TAG_VALUES_ = {
    IMG: " ",
    BR: "\n"
}, goog.dom.isFocusableTabIndex = function(e) {
    return goog.dom.hasSpecifiedTabIndex_(e) && goog.dom.isTabIndexFocusable_(e)
}, goog.dom.setFocusableTabIndex = function(e, t) {
    t ? e.tabIndex = 0 : (e.tabIndex = -1, e.removeAttribute("tabIndex"))
}, goog.dom.isFocusable = function(e) {
    var t;
    return (t = goog.dom.nativelySupportsFocus_(e) ? !e.disabled && (!goog.dom.hasSpecifiedTabIndex_(e) || goog.dom.isTabIndexFocusable_(e)) : goog.dom.isFocusableTabIndex(e)) && goog.userAgent.IE ? goog.dom.hasNonZeroBoundingRect_(e) : t
}, goog.dom.hasSpecifiedTabIndex_ = function(e) {
    return e = e.getAttributeNode("tabindex"), goog.isDefAndNotNull(e) && e.specified
}, goog.dom.isTabIndexFocusable_ = function(e) {
    return e = e.tabIndex, goog.isNumber(e) && e >= 0 && 32768 > e
}, goog.dom.nativelySupportsFocus_ = function(e) {
    return e.tagName == goog.dom.TagName.A || e.tagName == goog.dom.TagName.INPUT || e.tagName == goog.dom.TagName.TEXTAREA || e.tagName == goog.dom.TagName.SELECT || e.tagName == goog.dom.TagName.BUTTON
}, goog.dom.hasNonZeroBoundingRect_ = function(e) {
    return e = !goog.isFunction(e.getBoundingClientRect) || goog.userAgent.IE && null == e.parentElement ? {
        height: e.offsetHeight,
        width: e.offsetWidth
    } : e.getBoundingClientRect(), goog.isDefAndNotNull(e) && 0 < e.height && 0 < e.width
}, goog.dom.getTextContent = function(e) {
    if (goog.dom.BrowserFeature.CAN_USE_INNER_TEXT && null !== e && "innerText" in e) e = goog.string.canonicalizeNewlines(e.innerText);
    else {
        var t = [];
        goog.dom.getTextContent_(e, t, !0), e = t.join("")
    }
    return e = e.replace(/ \xAD /g, " ").replace(/\xAD/g, ""), e = e.replace(/\u200B/g, ""), goog.dom.BrowserFeature.CAN_USE_INNER_TEXT || (e = e.replace(/ +/g, " ")), " " != e && (e = e.replace(/^\s*/, "")), e
}, goog.dom.getRawTextContent = function(e) {
    var t = [];
    return goog.dom.getTextContent_(e, t, !1), t.join("")
}, goog.dom.getTextContent_ = function(e, t, o) {
    if (!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))
        if (e.nodeType == goog.dom.NodeType.TEXT) o ? t.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g, "")) : t.push(e.nodeValue);
        else if (e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_) t.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName]);
    else
        for (e = e.firstChild; e;) goog.dom.getTextContent_(e, t, o), e = e.nextSibling
}, goog.dom.getNodeTextLength = function(e) {
    return goog.dom.getTextContent(e).length
}, goog.dom.getNodeTextOffset = function(e, t) {
    for (var o = t || goog.dom.getOwnerDocument(e).body, n = []; e && e != o;) {
        for (var i = e; i = i.previousSibling;) n.unshift(goog.dom.getTextContent(i));
        e = e.parentNode
    }
    return goog.string.trimLeft(n.join("")).replace(/ +/g, " ").length
}, goog.dom.getNodeAtOffset = function(e, t, o) {
    e = [e];
    for (var n = 0, i = null; 0 < e.length && t > n;)
        if (i = e.pop(), !(i.nodeName in goog.dom.TAGS_TO_IGNORE_))
            if (i.nodeType == goog.dom.NodeType.TEXT) var r = i.nodeValue.replace(/(\r\n|\r|\n)/g, "").replace(/ +/g, " "),
                n = n + r.length;
            else if (i.nodeName in goog.dom.PREDEFINED_TAG_VALUES_) n += goog.dom.PREDEFINED_TAG_VALUES_[i.nodeName].length;
    else
        for (r = i.childNodes.length - 1; r >= 0; r--) e.push(i.childNodes[r]);
    return goog.isObject(o) && (o.remainder = i ? i.nodeValue.length + t - n - 1 : 0, o.node = i), i
}, goog.dom.isNodeList = function(e) {
    if (e && "number" == typeof e.length) {
        if (goog.isObject(e)) return "function" == typeof e.item || "string" == typeof e.item;
        if (goog.isFunction(e)) return "function" == typeof e.item
    }
    return !1
}, goog.dom.getAncestorByTagNameAndClass = function(e, t, o, n) {
    if (!t && !o) return null;
    var i = t ? t.toUpperCase() : null;
    return goog.dom.getAncestor(e, function(e) {
        return (!i || e.nodeName == i) && (!o || goog.isString(e.className) && goog.array.contains(e.className.split(/\s+/), o))
    }, !0, n)
}, goog.dom.getAncestorByClass = function(e, t, o) {
    return goog.dom.getAncestorByTagNameAndClass(e, null, t, o)
}, goog.dom.getAncestor = function(e, t, o, n) {
    for (o || (e = e.parentNode), o = 0; e && (null == n || n >= o);) {
        if (goog.asserts.assert("parentNode" != e.name), t(e)) return e;
        e = e.parentNode, o++
    }
    return null
}, goog.dom.getActiveElement = function(e) {
    try {
        return e && e.activeElement
    } catch (t) {}
    return null
}, goog.dom.getPixelRatio = function() {
    var e = goog.dom.getWindow();
    return goog.isDef(e.devicePixelRatio) ? e.devicePixelRatio : e.matchMedia ? goog.dom.matchesPixelRatio_(.75) || goog.dom.matchesPixelRatio_(1.5) || goog.dom.matchesPixelRatio_(2) || goog.dom.matchesPixelRatio_(3) || 1 : 1
}, goog.dom.matchesPixelRatio_ = function(e) {
    return goog.dom.getWindow().matchMedia("(-webkit-min-device-pixel-ratio: " + e + "),(min--moz-device-pixel-ratio: " + e + "),(min-resolution: " + e + "dppx)").matches ? e : 0
}, goog.dom.DomHelper = function(e) {
    this.document_ = e || goog.global.document || document
}, goog.dom.DomHelper.prototype.getDomHelper = goog.dom.getDomHelper, goog.dom.DomHelper.prototype.setDocument = function(e) {
    this.document_ = e
}, goog.dom.DomHelper.prototype.getDocument = function() {
    return this.document_
}, goog.dom.DomHelper.prototype.getElement = function(e) {
    return goog.dom.getElementHelper_(this.document_, e)
}, goog.dom.DomHelper.prototype.getRequiredElement = function(e) {
    return goog.dom.getRequiredElementHelper_(this.document_, e)
}, goog.dom.DomHelper.prototype.$ = goog.dom.DomHelper.prototype.getElement, goog.dom.DomHelper.prototype.getElementsByTagNameAndClass = function(e, t, o) {
    return goog.dom.getElementsByTagNameAndClass_(this.document_, e, t, o)
}, goog.dom.DomHelper.prototype.getElementsByClass = function(e, t) {
    return goog.dom.getElementsByClass(e, t || this.document_)
}, goog.dom.DomHelper.prototype.getElementByClass = function(e, t) {
    return goog.dom.getElementByClass(e, t || this.document_)
}, goog.dom.DomHelper.prototype.getRequiredElementByClass = function(e, t) {
    return goog.dom.getRequiredElementByClass(e, t || this.document_)
}, goog.dom.DomHelper.prototype.$$ = goog.dom.DomHelper.prototype.getElementsByTagNameAndClass, goog.dom.DomHelper.prototype.setProperties = goog.dom.setProperties, goog.dom.DomHelper.prototype.getViewportSize = function(e) {
    return goog.dom.getViewportSize(e || this.getWindow())
}, goog.dom.DomHelper.prototype.getDocumentHeight = function() {
    return goog.dom.getDocumentHeight_(this.getWindow())
}, goog.dom.DomHelper.prototype.createDom = function(e, t, o) {
    return goog.dom.createDom_(this.document_, arguments)
}, goog.dom.DomHelper.prototype.$dom = goog.dom.DomHelper.prototype.createDom, goog.dom.DomHelper.prototype.createElement = function(e) {
    return this.document_.createElement(e)
}, goog.dom.DomHelper.prototype.createTextNode = function(e) {
    return this.document_.createTextNode(String(e))
}, goog.dom.DomHelper.prototype.createTable = function(e, t, o) {
    return goog.dom.createTable_(this.document_, e, t, !!o)
}, goog.dom.DomHelper.prototype.safeHtmlToNode = function(e) {
    return goog.dom.safeHtmlToNode_(this.document_, e)
}, goog.dom.DomHelper.prototype.isCss1CompatMode = function() {
    return goog.dom.isCss1CompatMode_(this.document_)
}, goog.dom.DomHelper.prototype.getWindow = function() {
    return goog.dom.getWindow_(this.document_)
}, goog.dom.DomHelper.prototype.getDocumentScrollElement = function() {
    return goog.dom.getDocumentScrollElement_(this.document_)
}, goog.dom.DomHelper.prototype.getDocumentScroll = function() {
    return goog.dom.getDocumentScroll_(this.document_)
}, goog.dom.DomHelper.prototype.getActiveElement = function(e) {
    return goog.dom.getActiveElement(e || this.document_)
}, goog.dom.DomHelper.prototype.appendChild = goog.dom.appendChild, goog.dom.DomHelper.prototype.append = goog.dom.append, goog.dom.DomHelper.prototype.canHaveChildren = goog.dom.canHaveChildren, goog.dom.DomHelper.prototype.removeChildren = goog.dom.removeChildren, goog.dom.DomHelper.prototype.insertSiblingBefore = goog.dom.insertSiblingBefore, goog.dom.DomHelper.prototype.insertSiblingAfter = goog.dom.insertSiblingAfter, goog.dom.DomHelper.prototype.insertChildAt = goog.dom.insertChildAt, goog.dom.DomHelper.prototype.removeNode = goog.dom.removeNode, goog.dom.DomHelper.prototype.replaceNode = goog.dom.replaceNode, goog.dom.DomHelper.prototype.flattenElement = goog.dom.flattenElement, goog.dom.DomHelper.prototype.getChildren = goog.dom.getChildren, goog.dom.DomHelper.prototype.getFirstElementChild = goog.dom.getFirstElementChild, goog.dom.DomHelper.prototype.getLastElementChild = goog.dom.getLastElementChild, goog.dom.DomHelper.prototype.getNextElementSibling = goog.dom.getNextElementSibling, goog.dom.DomHelper.prototype.getPreviousElementSibling = goog.dom.getPreviousElementSibling, goog.dom.DomHelper.prototype.getNextNode = goog.dom.getNextNode, goog.dom.DomHelper.prototype.getPreviousNode = goog.dom.getPreviousNode, goog.dom.DomHelper.prototype.isNodeLike = goog.dom.isNodeLike, goog.dom.DomHelper.prototype.isElement = goog.dom.isElement, goog.dom.DomHelper.prototype.isWindow = goog.dom.isWindow, goog.dom.DomHelper.prototype.getParentElement = goog.dom.getParentElement, goog.dom.DomHelper.prototype.contains = goog.dom.contains, goog.dom.DomHelper.prototype.compareNodeOrder = goog.dom.compareNodeOrder, goog.dom.DomHelper.prototype.findCommonAncestor = goog.dom.findCommonAncestor, goog.dom.DomHelper.prototype.getOwnerDocument = goog.dom.getOwnerDocument, goog.dom.DomHelper.prototype.getFrameContentDocument = goog.dom.getFrameContentDocument, goog.dom.DomHelper.prototype.getFrameContentWindow = goog.dom.getFrameContentWindow, goog.dom.DomHelper.prototype.setTextContent = goog.dom.setTextContent, goog.dom.DomHelper.prototype.getOuterHtml = goog.dom.getOuterHtml, goog.dom.DomHelper.prototype.findNode = goog.dom.findNode, goog.dom.DomHelper.prototype.findNodes = goog.dom.findNodes, goog.dom.DomHelper.prototype.isFocusableTabIndex = goog.dom.isFocusableTabIndex, goog.dom.DomHelper.prototype.setFocusableTabIndex = goog.dom.setFocusableTabIndex, goog.dom.DomHelper.prototype.isFocusable = goog.dom.isFocusable, goog.dom.DomHelper.prototype.getTextContent = goog.dom.getTextContent, goog.dom.DomHelper.prototype.getNodeTextLength = goog.dom.getNodeTextLength, goog.dom.DomHelper.prototype.getNodeTextOffset = goog.dom.getNodeTextOffset, goog.dom.DomHelper.prototype.getNodeAtOffset = goog.dom.getNodeAtOffset, goog.dom.DomHelper.prototype.isNodeList = goog.dom.isNodeList, goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass = goog.dom.getAncestorByTagNameAndClass, goog.dom.DomHelper.prototype.getAncestorByClass = goog.dom.getAncestorByClass, goog.dom.DomHelper.prototype.getAncestor = goog.dom.getAncestor, goog.dom.vendor = {}, goog.dom.vendor.getVendorJsPrefix = function() {
    return goog.userAgent.WEBKIT ? "Webkit" : goog.userAgent.GECKO ? "Moz" : goog.userAgent.IE ? "ms" : goog.userAgent.OPERA ? "O" : null
}, goog.dom.vendor.getVendorPrefix = function() {
    return goog.userAgent.WEBKIT ? "-webkit" : goog.userAgent.GECKO ? "-moz" : goog.userAgent.IE ? "-ms" : goog.userAgent.OPERA ? "-o" : null
}, goog.dom.vendor.getPrefixedPropertyName = function(e, t) {
    if (t && e in t) return e;
    var o = goog.dom.vendor.getVendorJsPrefix();
    return o ? (o = o.toLowerCase(), o += goog.string.toTitleCase(e), !goog.isDef(t) || o in t ? o : null) : null
}, goog.dom.vendor.getPrefixedEventType = function(e) {
    return ((goog.dom.vendor.getVendorJsPrefix() || "") + e).toLowerCase()
}, goog.html.legacyconversions = {}, goog.html.legacyconversions.safeHtmlFromString = function(e) {
    return goog.html.legacyconversions.reportCallback_(), goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(e, null)
}, goog.html.legacyconversions.safeStyleFromString = function(e) {
    return goog.html.legacyconversions.reportCallback_(), goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)
}, goog.html.legacyconversions.safeStyleSheetFromString = function(e) {
    return goog.html.legacyconversions.reportCallback_(), goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)
}, goog.html.legacyconversions.safeUrlFromString = function(e) {
    return goog.html.legacyconversions.reportCallback_(), goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)
}, goog.html.legacyconversions.trustedResourceUrlFromString = function(e) {
    return goog.html.legacyconversions.reportCallback_(), goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)
}, goog.html.legacyconversions.reportCallback_ = goog.nullFunction, goog.html.legacyconversions.setReportCallback = function(e) {
    goog.html.legacyconversions.reportCallback_ = e
}, goog.math.Box = function(e, t, o, n) {
    this.top = e, this.right = t, this.bottom = o, this.left = n
}, goog.math.Box.boundingBox = function(e) {
    for (var t = new goog.math.Box(arguments[0].y, arguments[0].x, arguments[0].y, arguments[0].x), o = 1; o < arguments.length; o++) t.expandToIncludeCoordinate(arguments[o]);
    return t
}, goog.math.Box.prototype.getWidth = function() {
    return this.right - this.left
}, goog.math.Box.prototype.getHeight = function() {
    return this.bottom - this.top
}, goog.math.Box.prototype.clone = function() {
    return new goog.math.Box(this.top, this.right, this.bottom, this.left)
}, goog.DEBUG && (goog.math.Box.prototype.toString = function() {
    return "(" + this.top + "t, " + this.right + "r, " + this.bottom + "b, " + this.left + "l)"
}), goog.math.Box.prototype.contains = function(e) {
    return goog.math.Box.contains(this, e)
}, goog.math.Box.prototype.expand = function(e, t, o, n) {
    return goog.isObject(e) ? (this.top -= e.top, this.right += e.right, this.bottom += e.bottom, this.left -= e.left) : (this.top -= e, this.right += Number(t), this.bottom += Number(o), this.left -= Number(n)), this
}, goog.math.Box.prototype.expandToInclude = function(e) {
    this.left = Math.min(this.left, e.left), this.top = Math.min(this.top, e.top), this.right = Math.max(this.right, e.right), this.bottom = Math.max(this.bottom, e.bottom)
}, goog.math.Box.prototype.expandToIncludeCoordinate = function(e) {
    this.top = Math.min(this.top, e.y), this.right = Math.max(this.right, e.x), this.bottom = Math.max(this.bottom, e.y), this.left = Math.min(this.left, e.x)
}, goog.math.Box.equals = function(e, t) {
    return e == t ? !0 : e && t ? e.top == t.top && e.right == t.right && e.bottom == t.bottom && e.left == t.left : !1
}, goog.math.Box.contains = function(e, t) {
    return e && t ? t instanceof goog.math.Box ? t.left >= e.left && t.right <= e.right && t.top >= e.top && t.bottom <= e.bottom : t.x >= e.left && t.x <= e.right && t.y >= e.top && t.y <= e.bottom : !1
}, goog.math.Box.relativePositionX = function(e, t) {
    return t.x < e.left ? t.x - e.left : t.x > e.right ? t.x - e.right : 0
}, goog.math.Box.relativePositionY = function(e, t) {
    return t.y < e.top ? t.y - e.top : t.y > e.bottom ? t.y - e.bottom : 0
}, goog.math.Box.distance = function(e, t) {
    var o = goog.math.Box.relativePositionX(e, t),
        n = goog.math.Box.relativePositionY(e, t);
    return Math.sqrt(o * o + n * n)
}, goog.math.Box.intersects = function(e, t) {
    return e.left <= t.right && t.left <= e.right && e.top <= t.bottom && t.top <= e.bottom
}, goog.math.Box.intersectsWithPadding = function(e, t, o) {
    return e.left <= t.right + o && t.left <= e.right + o && e.top <= t.bottom + o && t.top <= e.bottom + o
}, goog.math.Box.prototype.ceil = function() {
    return this.top = Math.ceil(this.top), this.right = Math.ceil(this.right), this.bottom = Math.ceil(this.bottom), this.left = Math.ceil(this.left), this
}, goog.math.Box.prototype.floor = function() {
    return this.top = Math.floor(this.top), this.right = Math.floor(this.right), this.bottom = Math.floor(this.bottom), this.left = Math.floor(this.left), this
}, goog.math.Box.prototype.round = function() {
    return this.top = Math.round(this.top), this.right = Math.round(this.right), this.bottom = Math.round(this.bottom), this.left = Math.round(this.left), this
}, goog.math.Box.prototype.translate = function(e, t) {
    return e instanceof goog.math.Coordinate ? (this.left += e.x, this.right += e.x, this.top += e.y, this.bottom += e.y) : (goog.asserts.assertNumber(e), this.left += e, this.right += e, goog.isNumber(t) && (this.top += t, this.bottom += t)), this
}, goog.math.Box.prototype.scale = function(e, t) {
    var o = goog.isNumber(t) ? t : e;
    return this.left *= e, this.right *= e, this.top *= o, this.bottom *= o, this
}, goog.math.Rect = function(e, t, o, n) {
    this.left = e, this.top = t, this.width = o, this.height = n
}, goog.math.Rect.prototype.clone = function() {
    return new goog.math.Rect(this.left, this.top, this.width, this.height)
}, goog.math.Rect.prototype.toBox = function() {
    return new goog.math.Box(this.top, this.left + this.width, this.top + this.height, this.left)
}, goog.math.Rect.createFromPositionAndSize = function(e, t) {
    return new goog.math.Rect(e.x, e.y, t.width, t.height)
}, goog.math.Rect.createFromBox = function(e) {
    return new goog.math.Rect(e.left, e.top, e.right - e.left, e.bottom - e.top)
}, goog.DEBUG && (goog.math.Rect.prototype.toString = function() {
    return "(" + this.left + ", " + this.top + " - " + this.width + "w x " + this.height + "h)"
}), goog.math.Rect.equals = function(e, t) {
    return e == t ? !0 : e && t ? e.left == t.left && e.width == t.width && e.top == t.top && e.height == t.height : !1
}, goog.math.Rect.prototype.intersection = function(e) {
    var t = Math.max(this.left, e.left),
        o = Math.min(this.left + this.width, e.left + e.width);
    if (o >= t) {
        var n = Math.max(this.top, e.top);
        if (e = Math.min(this.top + this.height, e.top + e.height), e >= n) return this.left = t, this.top = n, this.width = o - t, this.height = e - n, !0
    }
    return !1
}, goog.math.Rect.intersection = function(e, t) {
    var o = Math.max(e.left, t.left),
        n = Math.min(e.left + e.width, t.left + t.width);
    if (n >= o) {
        var i = Math.max(e.top, t.top),
            r = Math.min(e.top + e.height, t.top + t.height);
        if (r >= i) return new goog.math.Rect(o, i, n - o, r - i)
    }
    return null
}, goog.math.Rect.intersects = function(e, t) {
    return e.left <= t.left + t.width && t.left <= e.left + e.width && e.top <= t.top + t.height && t.top <= e.top + e.height
}, goog.math.Rect.prototype.intersects = function(e) {
    return goog.math.Rect.intersects(this, e)
}, goog.math.Rect.difference = function(e, t) {
    var o = goog.math.Rect.intersection(e, t);
    if (!o || !o.height || !o.width) return [e.clone()];
    var o = [],
        n = e.top,
        i = e.height,
        r = e.left + e.width,
        s = e.top + e.height,
        a = t.left + t.width,
        l = t.top + t.height;
    return t.top > e.top && (o.push(new goog.math.Rect(e.left, e.top, e.width, t.top - e.top)), n = t.top, i -= t.top - e.top), s > l && (o.push(new goog.math.Rect(e.left, l, e.width, s - l)), i = l - n), t.left > e.left && o.push(new goog.math.Rect(e.left, n, t.left - e.left, i)), r > a && o.push(new goog.math.Rect(a, n, r - a, i)), o
}, goog.math.Rect.prototype.difference = function(e) {
    return goog.math.Rect.difference(this, e)
}, goog.math.Rect.prototype.boundingRect = function(e) {
    var t = Math.max(this.left + this.width, e.left + e.width),
        o = Math.max(this.top + this.height, e.top + e.height);
    this.left = Math.min(this.left, e.left), this.top = Math.min(this.top, e.top), this.width = t - this.left, this.height = o - this.top
}, goog.math.Rect.boundingRect = function(e, t) {
    if (!e || !t) return null;
    var o = e.clone();
    return o.boundingRect(t), o
}, goog.math.Rect.prototype.contains = function(e) {
    return e instanceof goog.math.Rect ? this.left <= e.left && this.left + this.width >= e.left + e.width && this.top <= e.top && this.top + this.height >= e.top + e.height : e.x >= this.left && e.x <= this.left + this.width && e.y >= this.top && e.y <= this.top + this.height
}, goog.math.Rect.prototype.squaredDistance = function(e) {
    var t = e.x < this.left ? this.left - e.x : Math.max(e.x - (this.left + this.width), 0);
    return e = e.y < this.top ? this.top - e.y : Math.max(e.y - (this.top + this.height), 0), t * t + e * e
}, goog.math.Rect.prototype.distance = function(e) {
    return Math.sqrt(this.squaredDistance(e))
}, goog.math.Rect.prototype.getSize = function() {
    return new goog.math.Size(this.width, this.height)
}, goog.math.Rect.prototype.getTopLeft = function() {
    return new goog.math.Coordinate(this.left, this.top)
}, goog.math.Rect.prototype.getCenter = function() {
    return new goog.math.Coordinate(this.left + this.width / 2, this.top + this.height / 2)
}, goog.math.Rect.prototype.getBottomRight = function() {
    return new goog.math.Coordinate(this.left + this.width, this.top + this.height)
}, goog.math.Rect.prototype.ceil = function() {
    return this.left = Math.ceil(this.left), this.top = Math.ceil(this.top), this.width = Math.ceil(this.width), this.height = Math.ceil(this.height), this
}, goog.math.Rect.prototype.floor = function() {
    return this.left = Math.floor(this.left), this.top = Math.floor(this.top), this.width = Math.floor(this.width), this.height = Math.floor(this.height), this
}, goog.math.Rect.prototype.round = function() {
    return this.left = Math.round(this.left), this.top = Math.round(this.top), this.width = Math.round(this.width), this.height = Math.round(this.height), this
}, goog.math.Rect.prototype.translate = function(e, t) {
    return e instanceof goog.math.Coordinate ? (this.left += e.x, this.top += e.y) : (this.left += goog.asserts.assertNumber(e), goog.isNumber(t) && (this.top += t)), this
}, goog.math.Rect.prototype.scale = function(e, t) {
    var o = goog.isNumber(t) ? t : e;
    return this.left *= e, this.width *= e, this.top *= o, this.height *= o, this
}, goog.reflect = {}, goog.reflect.object = function(e, t) {
    return t
}, goog.reflect.sinkValue = function(e) {
    return goog.reflect.sinkValue[" "](e), e
}, goog.reflect.sinkValue[" "] = goog.nullFunction, goog.reflect.canAccessProperty = function(e, t) {
    try {
        return goog.reflect.sinkValue(e[t]), !0
    } catch (o) {}
    return !1
}, goog.reflect.cache = function(e, t, o, n) {
    return n = n ? n(t) : t, Object.prototype.hasOwnProperty.call(e, n) ? e[n] : e[n] = o(t)
}, goog.style = {}, goog.style.setStyle = function(e, t, o) {
    if (goog.isString(t)) goog.style.setStyle_(e, o, t);
    else
        for (var n in t) goog.style.setStyle_(e, t[n], n)
}, goog.style.setStyle_ = function(e, t, o) {
    (o = goog.style.getVendorJsStyleName_(e, o)) && (e.style[o] = t)
}, goog.style.styleNameCache_ = {}, goog.style.getVendorJsStyleName_ = function(e, t) {
    var o = goog.style.styleNameCache_[t];
    if (!o) {
        var n = goog.string.toCamelCase(t),
            o = n;
        void 0 === e.style[n] && (n = goog.dom.vendor.getVendorJsPrefix() + goog.string.toTitleCase(n), void 0 !== e.style[n] && (o = n)), goog.style.styleNameCache_[t] = o
    }
    return o
}, goog.style.getVendorStyleName_ = function(e, t) {
    var o = goog.string.toCamelCase(t);
    return void 0 === e.style[o] && (o = goog.dom.vendor.getVendorJsPrefix() + goog.string.toTitleCase(o), void 0 !== e.style[o]) ? goog.dom.vendor.getVendorPrefix() + "-" + t : t
}, goog.style.getStyle = function(e, t) {
    var o = e.style[goog.string.toCamelCase(t)];
    return "undefined" != typeof o ? o : e.style[goog.style.getVendorJsStyleName_(e, t)] || ""
}, goog.style.getComputedStyle = function(e, t) {
    var o = goog.dom.getOwnerDocument(e);
    return o.defaultView && o.defaultView.getComputedStyle && (o = o.defaultView.getComputedStyle(e, null)) ? o[t] || o.getPropertyValue(t) || "" : ""
}, goog.style.getCascadedStyle = function(e, t) {
    return e.currentStyle ? e.currentStyle[t] : null
}, goog.style.getStyle_ = function(e, t) {
    return goog.style.getComputedStyle(e, t) || goog.style.getCascadedStyle(e, t) || e.style && e.style[t]
}, goog.style.getComputedBoxSizing = function(e) {
    return goog.style.getStyle_(e, "boxSizing") || goog.style.getStyle_(e, "MozBoxSizing") || goog.style.getStyle_(e, "WebkitBoxSizing") || null
}, goog.style.getComputedPosition = function(e) {
    return goog.style.getStyle_(e, "position")
}, goog.style.getBackgroundColor = function(e) {
    return goog.style.getStyle_(e, "backgroundColor")
}, goog.style.getComputedOverflowX = function(e) {
    return goog.style.getStyle_(e, "overflowX")
}, goog.style.getComputedOverflowY = function(e) {
    return goog.style.getStyle_(e, "overflowY")
}, goog.style.getComputedZIndex = function(e) {
    return goog.style.getStyle_(e, "zIndex")
}, goog.style.getComputedTextAlign = function(e) {
    return goog.style.getStyle_(e, "textAlign")
}, goog.style.getComputedCursor = function(e) {
    return goog.style.getStyle_(e, "cursor")
}, goog.style.getComputedTransform = function(e) {
    var t = goog.style.getVendorStyleName_(e, "transform");
    return goog.style.getStyle_(e, t) || goog.style.getStyle_(e, "transform")
}, goog.style.setPosition = function(e, t, o) {
    var n;
    t instanceof goog.math.Coordinate ? (n = t.x, t = t.y) : (n = t, t = o), e.style.left = goog.style.getPixelStyleValue_(n, !1), e.style.top = goog.style.getPixelStyleValue_(t, !1)
}, goog.style.getPosition = function(e) {
    return new goog.math.Coordinate(e.offsetLeft, e.offsetTop)
}, goog.style.getClientViewportElement = function(e) {
    return e = e ? goog.dom.getOwnerDocument(e) : goog.dom.getDocument(), !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9) || goog.dom.getDomHelper(e).isCss1CompatMode() ? e.documentElement : e.body
}, goog.style.getViewportPageOffset = function(e) {
    var t = e.body;
    return e = e.documentElement,
        new goog.math.Coordinate(t.scrollLeft || e.scrollLeft, t.scrollTop || e.scrollTop)
}, goog.style.getBoundingClientRect_ = function(e) {
    var t;
    try {
        t = e.getBoundingClientRect()
    } catch (o) {
        return {
            left: 0,
            top: 0,
            right: 0,
            bottom: 0
        }
    }
    return goog.userAgent.IE && e.ownerDocument.body && (e = e.ownerDocument, t.left -= e.documentElement.clientLeft + e.body.clientLeft, t.top -= e.documentElement.clientTop + e.body.clientTop), t
}, goog.style.getOffsetParent = function(e) {
    if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(8)) return goog.asserts.assert(e && "offsetParent" in e), e.offsetParent;
    var t = goog.dom.getOwnerDocument(e),
        o = goog.style.getStyle_(e, "position"),
        n = "fixed" == o || "absolute" == o;
    for (e = e.parentNode; e && e != t; e = e.parentNode)
        if (e.nodeType == goog.dom.NodeType.DOCUMENT_FRAGMENT && e.host && (e = e.host), o = goog.style.getStyle_(e, "position"), n = n && "static" == o && e != t.documentElement && e != t.body, !n && (e.scrollWidth > e.clientWidth || e.scrollHeight > e.clientHeight || "fixed" == o || "absolute" == o || "relative" == o)) return e;
    return null
}, goog.style.getVisibleRectForElement = function(e) {
    for (var t = new goog.math.Box(0, 1 / 0, 1 / 0, 0), o = goog.dom.getDomHelper(e), n = o.getDocument().body, i = o.getDocument().documentElement, r = o.getDocumentScrollElement(); e = goog.style.getOffsetParent(e);)
        if (!(goog.userAgent.IE && 0 == e.clientWidth || goog.userAgent.WEBKIT && 0 == e.clientHeight && e == n) && e != n && e != i && "visible" != goog.style.getStyle_(e, "overflow")) {
            var s = goog.style.getPageOffset(e),
                a = goog.style.getClientLeftTop(e);
            s.x += a.x, s.y += a.y, t.top = Math.max(t.top, s.y), t.right = Math.min(t.right, s.x + e.clientWidth), t.bottom = Math.min(t.bottom, s.y + e.clientHeight), t.left = Math.max(t.left, s.x)
        }
    return n = r.scrollLeft, r = r.scrollTop, t.left = Math.max(t.left, n), t.top = Math.max(t.top, r), o = o.getViewportSize(), t.right = Math.min(t.right, n + o.width), t.bottom = Math.min(t.bottom, r + o.height), 0 <= t.top && 0 <= t.left && t.bottom > t.top && t.right > t.left ? t : null
}, goog.style.getContainerOffsetToScrollInto = function(e, t, o) {
    var n = t || goog.dom.getDocumentScrollElement(),
        i = goog.style.getPageOffset(e),
        r = goog.style.getPageOffset(n),
        s = goog.style.getBorderBox(n);
    return n == goog.dom.getDocumentScrollElement() ? (t = i.x - n.scrollLeft, i = i.y - n.scrollTop, goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(10) && (t += s.left, i += s.top)) : (t = i.x - r.x - s.left, i = i.y - r.y - s.top), s = n.clientWidth - e.offsetWidth, e = n.clientHeight - e.offsetHeight, r = n.scrollLeft, n = n.scrollTop, o ? (r += t - s / 2, n += i - e / 2) : (r += Math.min(t, Math.max(t - s, 0)), n += Math.min(i, Math.max(i - e, 0))), new goog.math.Coordinate(r, n)
}, goog.style.scrollIntoContainerView = function(e, t, o) {
    t = t || goog.dom.getDocumentScrollElement(), e = goog.style.getContainerOffsetToScrollInto(e, t, o), t.scrollLeft = e.x, t.scrollTop = e.y
}, goog.style.getClientLeftTop = function(e) {
    return new goog.math.Coordinate(e.clientLeft, e.clientTop)
}, goog.style.getPageOffset = function(e) {
    var t = goog.dom.getOwnerDocument(e);
    goog.asserts.assertObject(e, "Parameter is required");
    var o = new goog.math.Coordinate(0, 0),
        n = goog.style.getClientViewportElement(t);
    return e == n ? o : (e = goog.style.getBoundingClientRect_(e), t = goog.dom.getDomHelper(t).getDocumentScroll(), o.x = e.left + t.x, o.y = e.top + t.y, o)
}, goog.style.getPageOffsetLeft = function(e) {
    return goog.style.getPageOffset(e).x
}, goog.style.getPageOffsetTop = function(e) {
    return goog.style.getPageOffset(e).y
}, goog.style.getFramedPageOffset = function(e, t) {
    var o = new goog.math.Coordinate(0, 0),
        n = goog.dom.getWindow(goog.dom.getOwnerDocument(e));
    if (!goog.reflect.canAccessProperty(n, "parent")) return o;
    var i = e;
    do {
        var r = n == t ? goog.style.getPageOffset(i) : goog.style.getClientPositionForElement_(goog.asserts.assert(i));
        o.x += r.x, o.y += r.y
    } while (n && n != t && n != n.parent && (i = n.frameElement) && (n = n.parent));
    return o
}, goog.style.translateRectForAnotherFrame = function(e, t, o) {
    if (t.getDocument() != o.getDocument()) {
        var n = t.getDocument().body;
        o = goog.style.getFramedPageOffset(n, o.getWindow()), o = goog.math.Coordinate.difference(o, goog.style.getPageOffset(n)), !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9) || t.isCss1CompatMode() || (o = goog.math.Coordinate.difference(o, t.getDocumentScroll())), e.left += o.x, e.top += o.y
    }
}, goog.style.getRelativePosition = function(e, t) {
    var o = goog.style.getClientPosition(e),
        n = goog.style.getClientPosition(t);
    return new goog.math.Coordinate(o.x - n.x, o.y - n.y)
}, goog.style.getClientPositionForElement_ = function(e) {
    return e = goog.style.getBoundingClientRect_(e), new goog.math.Coordinate(e.left, e.top)
}, goog.style.getClientPosition = function(e) {
    return goog.asserts.assert(e), e.nodeType == goog.dom.NodeType.ELEMENT ? goog.style.getClientPositionForElement_(e) : (e = e.changedTouches ? e.changedTouches[0] : e, new goog.math.Coordinate(e.clientX, e.clientY))
}, goog.style.setPageOffset = function(e, t, o) {
    var n = goog.style.getPageOffset(e);
    t instanceof goog.math.Coordinate && (o = t.y, t = t.x), t = goog.asserts.assertNumber(t) - n.x, goog.style.setPosition(e, e.offsetLeft + t, e.offsetTop + (Number(o) - n.y))
}, goog.style.setSize = function(e, t, o) {
    if (t instanceof goog.math.Size) o = t.height, t = t.width;
    else if (void 0 == o) throw Error("missing height argument");
    goog.style.setWidth(e, t), goog.style.setHeight(e, o)
}, goog.style.getPixelStyleValue_ = function(e, t) {
    return "number" == typeof e && (e = (t ? Math.round(e) : e) + "px"), e
}, goog.style.setHeight = function(e, t) {
    e.style.height = goog.style.getPixelStyleValue_(t, !0)
}, goog.style.setWidth = function(e, t) {
    e.style.width = goog.style.getPixelStyleValue_(t, !0)
}, goog.style.getSize = function(e) {
    return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_, e)
}, goog.style.evaluateWithTemporaryDisplay_ = function(e, t) {
    if ("none" != goog.style.getStyle_(t, "display")) return e(t);
    var o = t.style,
        n = o.display,
        i = o.visibility,
        r = o.position;
    o.visibility = "hidden", o.position = "absolute", o.display = "inline";
    var s = e(t);
    return o.display = n, o.position = r, o.visibility = i, s
}, goog.style.getSizeWithDisplay_ = function(e) {
    var t = e.offsetWidth,
        o = e.offsetHeight,
        n = goog.userAgent.WEBKIT && !t && !o;
    return goog.isDef(t) && !n || !e.getBoundingClientRect ? new goog.math.Size(t, o) : (e = goog.style.getBoundingClientRect_(e), new goog.math.Size(e.right - e.left, e.bottom - e.top))
}, goog.style.getTransformedSize = function(e) {
    return e.getBoundingClientRect ? (e = goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_, e), new goog.math.Size(e.right - e.left, e.bottom - e.top)) : null
}, goog.style.getBounds = function(e) {
    var t = goog.style.getPageOffset(e);
    return e = goog.style.getSize(e), new goog.math.Rect(t.x, t.y, e.width, e.height)
}, goog.style.toCamelCase = function(e) {
    return goog.string.toCamelCase(String(e))
}, goog.style.toSelectorCase = function(e) {
    return goog.string.toSelectorCase(e)
}, goog.style.getOpacity = function(e) {
    goog.asserts.assert(e);
    var t = e.style;
    return e = "", "opacity" in t ? e = t.opacity : "MozOpacity" in t ? e = t.MozOpacity : "filter" in t && (t = t.filter.match(/alpha\(opacity=([\d.]+)\)/)) && (e = String(t[1] / 100)), "" == e ? e : Number(e)
}, goog.style.setOpacity = function(e, t) {
    goog.asserts.assert(e);
    var o = e.style;
    "opacity" in o ? o.opacity = t : "MozOpacity" in o ? o.MozOpacity = t : "filter" in o && (o.filter = "" === t ? "" : "alpha(opacity=" + 100 * Number(t) + ")")
}, goog.style.setTransparentBackgroundImage = function(e, t) {
    var o = e.style;
    goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("8") ? o.filter = 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="' + t + '", sizingMethod="crop")' : (o.backgroundImage = "url(" + t + ")", o.backgroundPosition = "top left", o.backgroundRepeat = "no-repeat")
}, goog.style.clearTransparentBackgroundImage = function(e) {
    e = e.style, "filter" in e ? e.filter = "" : e.backgroundImage = "none"
}, goog.style.showElement = function(e, t) {
    goog.style.setElementShown(e, t)
}, goog.style.setElementShown = function(e, t) {
    e.style.display = t ? "" : "none"
}, goog.style.isElementShown = function(e) {
    return "none" != e.style.display
}, goog.style.installStyles = function(e, t) {
    return goog.style.installSafeStyleSheet(goog.html.legacyconversions.safeStyleSheetFromString(e), t)
}, goog.style.installSafeStyleSheet = function(e, t) {
    var o, n = goog.dom.getDomHelper(t),
        i = n.getDocument();
    return goog.userAgent.IE && i.createStyleSheet ? (o = i.createStyleSheet(), goog.style.setSafeStyleSheet(o, e)) : (i = n.getElementsByTagNameAndClass(goog.dom.TagName.HEAD)[0], i || (o = n.getElementsByTagNameAndClass(goog.dom.TagName.BODY)[0], i = n.createDom(goog.dom.TagName.HEAD), o.parentNode.insertBefore(i, o)), o = n.createDom(goog.dom.TagName.STYLE), goog.style.setSafeStyleSheet(o, e), n.appendChild(i, o)), o
}, goog.style.uninstallStyles = function(e) {
    goog.dom.removeNode(e.ownerNode || e.owningElement || e)
}, goog.style.setStyles = function(e, t) {
    goog.style.setSafeStyleSheet(e, goog.html.legacyconversions.safeStyleSheetFromString(t))
}, goog.style.setSafeStyleSheet = function(e, t) {
    var o = goog.html.SafeStyleSheet.unwrap(t);
    goog.userAgent.IE && goog.isDef(e.cssText) ? e.cssText = o : goog.dom.setTextContent(e, o)
}, goog.style.setPreWrap = function(e) {
    e = e.style, goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("8") ? (e.whiteSpace = "pre", e.wordWrap = "break-word") : e.whiteSpace = goog.userAgent.GECKO ? "-moz-pre-wrap" : "pre-wrap"
}, goog.style.setInlineBlock = function(e) {
    e = e.style, e.position = "relative", goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("8") ? (e.zoom = "1", e.display = "inline") : e.display = "inline-block"
}, goog.style.isRightToLeft = function(e) {
    return "rtl" == goog.style.getStyle_(e, "direction")
}, goog.style.unselectableStyle_ = goog.userAgent.GECKO ? "MozUserSelect" : goog.userAgent.WEBKIT || goog.userAgent.EDGE ? "WebkitUserSelect" : null, goog.style.isUnselectable = function(e) {
    return goog.style.unselectableStyle_ ? "none" == e.style[goog.style.unselectableStyle_].toLowerCase() : goog.userAgent.IE || goog.userAgent.OPERA ? "on" == e.getAttribute("unselectable") : !1
}, goog.style.setUnselectable = function(e, t, o) {
    o = o ? null : e.getElementsByTagName("*");
    var n = goog.style.unselectableStyle_;
    if (n) {
        if (t = t ? "none" : "", e.style && (e.style[n] = t), o) {
            e = 0;
            for (var i; i = o[e]; e++) i.style && (i.style[n] = t)
        }
    } else if ((goog.userAgent.IE || goog.userAgent.OPERA) && (t = t ? "on" : "", e.setAttribute("unselectable", t), o))
        for (e = 0; i = o[e]; e++) i.setAttribute("unselectable", t)
}, goog.style.getBorderBoxSize = function(e) {
    return new goog.math.Size(e.offsetWidth, e.offsetHeight)
}, goog.style.setBorderBoxSize = function(e, t) {
    var o = goog.dom.getOwnerDocument(e),
        n = goog.dom.getDomHelper(o).isCss1CompatMode();
    if (!goog.userAgent.IE || goog.userAgent.isVersionOrHigher("10") || n && goog.userAgent.isVersionOrHigher("8")) goog.style.setBoxSizingSize_(e, t, "border-box");
    else if (o = e.style, n) {
        var n = goog.style.getPaddingBox(e),
            i = goog.style.getBorderBox(e);
        o.pixelWidth = t.width - i.left - n.left - n.right - i.right, o.pixelHeight = t.height - i.top - n.top - n.bottom - i.bottom
    } else o.pixelWidth = t.width, o.pixelHeight = t.height
}, goog.style.getContentBoxSize = function(e) {
    var t = goog.dom.getOwnerDocument(e),
        o = goog.userAgent.IE && e.currentStyle;
    return o && goog.dom.getDomHelper(t).isCss1CompatMode() && "auto" != o.width && "auto" != o.height && !o.boxSizing ? (t = goog.style.getIePixelValue_(e, o.width, "width", "pixelWidth"), e = goog.style.getIePixelValue_(e, o.height, "height", "pixelHeight"), new goog.math.Size(t, e)) : (o = goog.style.getBorderBoxSize(e), t = goog.style.getPaddingBox(e), e = goog.style.getBorderBox(e), new goog.math.Size(o.width - e.left - t.left - t.right - e.right, o.height - e.top - t.top - t.bottom - e.bottom))
}, goog.style.setContentBoxSize = function(e, t) {
    var o = goog.dom.getOwnerDocument(e),
        n = goog.dom.getDomHelper(o).isCss1CompatMode();
    if (!goog.userAgent.IE || goog.userAgent.isVersionOrHigher("10") || n && goog.userAgent.isVersionOrHigher("8")) goog.style.setBoxSizingSize_(e, t, "content-box");
    else if (o = e.style, n) o.pixelWidth = t.width, o.pixelHeight = t.height;
    else {
        var n = goog.style.getPaddingBox(e),
            i = goog.style.getBorderBox(e);
        o.pixelWidth = t.width + i.left + n.left + n.right + i.right, o.pixelHeight = t.height + i.top + n.top + n.bottom + i.bottom
    }
}, goog.style.setBoxSizingSize_ = function(e, t, o) {
    e = e.style, goog.userAgent.GECKO ? e.MozBoxSizing = o : goog.userAgent.WEBKIT ? e.WebkitBoxSizing = o : e.boxSizing = o, e.width = Math.max(t.width, 0) + "px", e.height = Math.max(t.height, 0) + "px"
}, goog.style.getIePixelValue_ = function(e, t, o, n) {
    if (/^\d+px?$/.test(t)) return parseInt(t, 10);
    var i = e.style[o],
        r = e.runtimeStyle[o];
    return e.runtimeStyle[o] = e.currentStyle[o], e.style[o] = t, t = e.style[n], e.style[o] = i, e.runtimeStyle[o] = r, t
}, goog.style.getIePixelDistance_ = function(e, t) {
    var o = goog.style.getCascadedStyle(e, t);
    return o ? goog.style.getIePixelValue_(e, o, "left", "pixelLeft") : 0
}, goog.style.getBox_ = function(e, t) {
    if (goog.userAgent.IE) {
        var o = goog.style.getIePixelDistance_(e, t + "Left"),
            n = goog.style.getIePixelDistance_(e, t + "Right"),
            i = goog.style.getIePixelDistance_(e, t + "Top"),
            r = goog.style.getIePixelDistance_(e, t + "Bottom");
        return new goog.math.Box(i, n, r, o)
    }
    return o = goog.style.getComputedStyle(e, t + "Left"), n = goog.style.getComputedStyle(e, t + "Right"), i = goog.style.getComputedStyle(e, t + "Top"), r = goog.style.getComputedStyle(e, t + "Bottom"), new goog.math.Box(parseFloat(i), parseFloat(n), parseFloat(r), parseFloat(o))
}, goog.style.getPaddingBox = function(e) {
    return goog.style.getBox_(e, "padding")
}, goog.style.getMarginBox = function(e) {
    return goog.style.getBox_(e, "margin")
}, goog.style.ieBorderWidthKeywords_ = {
    thin: 2,
    medium: 4,
    thick: 6
}, goog.style.getIePixelBorder_ = function(e, t) {
    if ("none" == goog.style.getCascadedStyle(e, t + "Style")) return 0;
    var o = goog.style.getCascadedStyle(e, t + "Width");
    return o in goog.style.ieBorderWidthKeywords_ ? goog.style.ieBorderWidthKeywords_[o] : goog.style.getIePixelValue_(e, o, "left", "pixelLeft")
}, goog.style.getBorderBox = function(e) {
    if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)) {
        var t = goog.style.getIePixelBorder_(e, "borderLeft"),
            o = goog.style.getIePixelBorder_(e, "borderRight"),
            n = goog.style.getIePixelBorder_(e, "borderTop");
        return e = goog.style.getIePixelBorder_(e, "borderBottom"), new goog.math.Box(n, o, e, t)
    }
    return t = goog.style.getComputedStyle(e, "borderLeftWidth"), o = goog.style.getComputedStyle(e, "borderRightWidth"), n = goog.style.getComputedStyle(e, "borderTopWidth"), e = goog.style.getComputedStyle(e, "borderBottomWidth"), new goog.math.Box(parseFloat(n), parseFloat(o), parseFloat(e), parseFloat(t))
}, goog.style.getFontFamily = function(e) {
    var t = goog.dom.getOwnerDocument(e),
        o = "";
    if (t.body.createTextRange && goog.dom.contains(t, e)) {
        t = t.body.createTextRange(), t.moveToElementText(e);
        try {
            o = t.queryCommandValue("FontName")
        } catch (n) {
            o = ""
        }
    }
    return o || (o = goog.style.getStyle_(e, "fontFamily")), e = o.split(","), 1 < e.length && (o = e[0]), goog.string.stripQuotes(o, "\"'")
}, goog.style.lengthUnitRegex_ = /[^\d]+$/, goog.style.getLengthUnits = function(e) {
    return (e = e.match(goog.style.lengthUnitRegex_)) && e[0] || null
}, goog.style.ABSOLUTE_CSS_LENGTH_UNITS_ = {
    cm: 1,
    "in": 1,
    mm: 1,
    pc: 1,
    pt: 1
}, goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_ = {
    em: 1,
    ex: 1
}, goog.style.getFontSize = function(e) {
    var t = goog.style.getStyle_(e, "fontSize"),
        o = goog.style.getLengthUnits(t);
    if (t && "px" == o) return parseInt(t, 10);
    if (goog.userAgent.IE) {
        if (String(o) in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_) return goog.style.getIePixelValue_(e, t, "left", "pixelLeft");
        if (e.parentNode && e.parentNode.nodeType == goog.dom.NodeType.ELEMENT && String(o) in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_) return e = e.parentNode, o = goog.style.getStyle_(e, "fontSize"), goog.style.getIePixelValue_(e, t == o ? "1em" : t, "left", "pixelLeft")
    }
    return o = goog.dom.createDom(goog.dom.TagName.SPAN, {
        style: "visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"
    }), goog.dom.appendChild(e, o), t = o.offsetHeight, goog.dom.removeNode(o), t
}, goog.style.parseStyleAttribute = function(e) {
    var t = {};
    return goog.array.forEach(e.split(/\s*;\s*/), function(e) {
        var o = e.match(/\s*([\w-]+)\s*\:(.+)/);
        o && (e = o[1], o = goog.string.trim(o[2]), t[goog.string.toCamelCase(e.toLowerCase())] = o)
    }), t
}, goog.style.toStyleAttribute = function(e) {
    var t = [];
    return goog.object.forEach(e, function(e, o) {
        t.push(goog.string.toSelectorCase(o), ":", e, ";")
    }), t.join("")
}, goog.style.setFloat = function(e, t) {
    e.style[goog.userAgent.IE ? "styleFloat" : "cssFloat"] = t
}, goog.style.getFloat = function(e) {
    return e.style[goog.userAgent.IE ? "styleFloat" : "cssFloat"] || ""
}, goog.style.getScrollbarWidth = function(e) {
    var t = goog.dom.createElement(goog.dom.TagName.DIV);
    return e && (t.className = e), t.style.cssText = "overflow:auto;position:absolute;top:0;width:100px;height:100px", e = goog.dom.createElement(goog.dom.TagName.DIV), goog.style.setSize(e, "200px", "200px"), t.appendChild(e), goog.dom.appendChild(goog.dom.getDocument().body, t), e = t.offsetWidth - t.clientWidth, goog.dom.removeNode(t), e
}, goog.style.MATRIX_TRANSLATION_REGEX_ = /matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/, goog.style.getCssTranslation = function(e) {
    return e = goog.style.getComputedTransform(e), e && (e = e.match(goog.style.MATRIX_TRANSLATION_REGEX_)) ? new goog.math.Coordinate(parseFloat(e[1]), parseFloat(e[2])) : new goog.math.Coordinate(0, 0)
}, goog.debug.entryPointRegistry = {}, goog.debug.EntryPointMonitor = function() {}, goog.debug.entryPointRegistry.refList_ = [], goog.debug.entryPointRegistry.monitors_ = [], goog.debug.entryPointRegistry.monitorsMayExist_ = !1, goog.debug.entryPointRegistry.register = function(e) {
    if (goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length] = e, goog.debug.entryPointRegistry.monitorsMayExist_)
        for (var t = goog.debug.entryPointRegistry.monitors_, o = 0; o < t.length; o++) e(goog.bind(t[o].wrap, t[o]))
}, goog.debug.entryPointRegistry.monitorAll = function(e) {
    goog.debug.entryPointRegistry.monitorsMayExist_ = !0;
    for (var t = goog.bind(e.wrap, e), o = 0; o < goog.debug.entryPointRegistry.refList_.length; o++) goog.debug.entryPointRegistry.refList_[o](t);
    goog.debug.entryPointRegistry.monitors_.push(e)
}, goog.debug.entryPointRegistry.unmonitorAllIfPossible = function(e) {
    var t = goog.debug.entryPointRegistry.monitors_;
    goog.asserts.assert(e == t[t.length - 1], "Only the most recent monitor can be unwrapped."), e = goog.bind(e.unwrap, e);
    for (var o = 0; o < goog.debug.entryPointRegistry.refList_.length; o++) goog.debug.entryPointRegistry.refList_[o](e);
    t.length--
}, goog.events = {}, goog.events.BrowserFeature = {
    HAS_W3C_BUTTON: !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9),
    HAS_W3C_EVENT_SUPPORT: !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9),
    SET_KEY_CODE_TO_PREVENT_DEFAULT: goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("9"),
    HAS_NAVIGATOR_ONLINE_PROPERTY: !goog.userAgent.WEBKIT || goog.userAgent.isVersionOrHigher("528"),
    HAS_HTML5_NETWORK_EVENT_SUPPORT: goog.userAgent.GECKO && goog.userAgent.isVersionOrHigher("1.9b") || goog.userAgent.IE && goog.userAgent.isVersionOrHigher("8") || goog.userAgent.OPERA && goog.userAgent.isVersionOrHigher("9.5") || goog.userAgent.WEBKIT && goog.userAgent.isVersionOrHigher("528"),
    HTML5_NETWORK_EVENTS_FIRE_ON_BODY: goog.userAgent.GECKO && !goog.userAgent.isVersionOrHigher("8") || goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("9"),
    TOUCH_ENABLED: "ontouchstart" in goog.global || !!(goog.global.document && document.documentElement && "ontouchstart" in document.documentElement) || !(!goog.global.navigator || !goog.global.navigator.msMaxTouchPoints)
}, goog.disposable = {}, goog.disposable.IDisposable = function() {}, goog.Disposable = function() {
    goog.Disposable.MONITORING_MODE != goog.Disposable.MonitoringMode.OFF && (goog.Disposable.INCLUDE_STACK_ON_CREATION && (this.creationStack = Error().stack), goog.Disposable.instances_[goog.getUid(this)] = this), this.disposed_ = this.disposed_, this.onDisposeCallbacks_ = this.onDisposeCallbacks_
}, goog.Disposable.MonitoringMode = {
    OFF: 0,
    PERMANENT: 1,
    INTERACTIVE: 2
}, goog.Disposable.MONITORING_MODE = 0, goog.Disposable.INCLUDE_STACK_ON_CREATION = !0, goog.Disposable.instances_ = {}, goog.Disposable.getUndisposedObjects = function() {
    var e, t = [];
    for (e in goog.Disposable.instances_) goog.Disposable.instances_.hasOwnProperty(e) && t.push(goog.Disposable.instances_[Number(e)]);
    return t
}, goog.Disposable.clearUndisposedObjects = function() {
    goog.Disposable.instances_ = {}
}, goog.Disposable.prototype.disposed_ = !1, goog.Disposable.prototype.isDisposed = function() {
    return this.disposed_
}, goog.Disposable.prototype.getDisposed = goog.Disposable.prototype.isDisposed, goog.Disposable.prototype.dispose = function() {
    if (!this.disposed_ && (this.disposed_ = !0, this.disposeInternal(), goog.Disposable.MONITORING_MODE != goog.Disposable.MonitoringMode.OFF)) {
        var e = goog.getUid(this);
        if (goog.Disposable.MONITORING_MODE == goog.Disposable.MonitoringMode.PERMANENT && !goog.Disposable.instances_.hasOwnProperty(e)) throw Error(this + " did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");
        delete goog.Disposable.instances_[e]
    }
}, goog.Disposable.prototype.registerDisposable = function(e) {
    this.addOnDisposeCallback(goog.partial(goog.dispose, e))
}, goog.Disposable.prototype.addOnDisposeCallback = function(e, t) {
    this.disposed_ ? e.call(t) : (this.onDisposeCallbacks_ || (this.onDisposeCallbacks_ = []), this.onDisposeCallbacks_.push(goog.isDef(t) ? goog.bind(e, t) : e))
}, goog.Disposable.prototype.disposeInternal = function() {
    if (this.onDisposeCallbacks_)
        for (; this.onDisposeCallbacks_.length;) this.onDisposeCallbacks_.shift()()
}, goog.Disposable.isDisposed = function(e) {
    return e && "function" == typeof e.isDisposed ? e.isDisposed() : !1
}, goog.dispose = function(e) {
    e && "function" == typeof e.dispose && e.dispose()
}, goog.disposeAll = function(e) {
    for (var t = 0, o = arguments.length; o > t; ++t) {
        var n = arguments[t];
        goog.isArrayLike(n) ? goog.disposeAll.apply(null, n) : goog.dispose(n)
    }
}, goog.events.EventId = function(e) {
    this.id = e
}, goog.events.EventId.prototype.toString = function() {
    return this.id
}, goog.events.Event = function(e, t) {
    this.type = e instanceof goog.events.EventId ? String(e) : e, this.currentTarget = this.target = t, this.defaultPrevented = this.propagationStopped_ = !1, this.returnValue_ = !0
}, goog.events.Event.prototype.stopPropagation = function() {
    this.propagationStopped_ = !0
}, goog.events.Event.prototype.preventDefault = function() {
    this.defaultPrevented = !0, this.returnValue_ = !1
}, goog.events.Event.stopPropagation = function(e) {
    e.stopPropagation()
}, goog.events.Event.preventDefault = function(e) {
    e.preventDefault()
}, goog.events.getVendorPrefixedName_ = function(e) {
    return goog.userAgent.WEBKIT ? "webkit" + e : goog.userAgent.OPERA ? "o" + e.toLowerCase() : e.toLowerCase()
}, goog.events.EventType = {
    CLICK: "click",
    RIGHTCLICK: "rightclick",
    DBLCLICK: "dblclick",
    MOUSEDOWN: "mousedown",
    MOUSEUP: "mouseup",
    MOUSEOVER: "mouseover",
    MOUSEOUT: "mouseout",
    MOUSEMOVE: "mousemove",
    MOUSEENTER: "mouseenter",
    MOUSELEAVE: "mouseleave",
    SELECTSTART: "selectstart",
    WHEEL: "wheel",
    KEYPRESS: "keypress",
    KEYDOWN: "keydown",
    KEYUP: "keyup",
    BLUR: "blur",
    FOCUS: "focus",
    DEACTIVATE: "deactivate",
    FOCUSIN: goog.userAgent.IE ? "focusin" : "DOMFocusIn",
    FOCUSOUT: goog.userAgent.IE ? "focusout" : "DOMFocusOut",
    CHANGE: "change",
    RESET: "reset",
    SELECT: "select",
    SUBMIT: "submit",
    INPUT: "input",
    PROPERTYCHANGE: "propertychange",
    DRAGSTART: "dragstart",
    DRAG: "drag",
    DRAGENTER: "dragenter",
    DRAGOVER: "dragover",
    DRAGLEAVE: "dragleave",
    DROP: "drop",
    DRAGEND: "dragend",
    TOUCHSTART: "touchstart",
    TOUCHMOVE: "touchmove",
    TOUCHEND: "touchend",
    TOUCHCANCEL: "touchcancel",
    BEFOREUNLOAD: "beforeunload",
    CONSOLEMESSAGE: "consolemessage",
    CONTEXTMENU: "contextmenu",
    DOMCONTENTLOADED: "DOMContentLoaded",
    ERROR: "error",
    HELP: "help",
    LOAD: "load",
    LOSECAPTURE: "losecapture",
    ORIENTATIONCHANGE: "orientationchange",
    READYSTATECHANGE: "readystatechange",
    RESIZE: "resize",
    SCROLL: "scroll",
    TIMEUPDATE: "timeupdate",
    UNLOAD: "unload",
    HASHCHANGE: "hashchange",
    PAGEHIDE: "pagehide",
    PAGESHOW: "pageshow",
    POPSTATE: "popstate",
    COPY: "copy",
    PASTE: "paste",
    CUT: "cut",
    BEFORECOPY: "beforecopy",
    BEFORECUT: "beforecut",
    BEFOREPASTE: "beforepaste",
    ONLINE: "online",
    OFFLINE: "offline",
    MESSAGE: "message",
    CONNECT: "connect",
    ANIMATIONSTART: goog.events.getVendorPrefixedName_("AnimationStart"),
    ANIMATIONEND: goog.events.getVendorPrefixedName_("AnimationEnd"),
    ANIMATIONITERATION: goog.events.getVendorPrefixedName_("AnimationIteration"),
    TRANSITIONEND: goog.events.getVendorPrefixedName_("TransitionEnd"),
    POINTERDOWN: "pointerdown",
    POINTERUP: "pointerup",
    POINTERCANCEL: "pointercancel",
    POINTERMOVE: "pointermove",
    POINTEROVER: "pointerover",
    POINTEROUT: "pointerout",
    POINTERENTER: "pointerenter",
    POINTERLEAVE: "pointerleave",
    GOTPOINTERCAPTURE: "gotpointercapture",
    LOSTPOINTERCAPTURE: "lostpointercapture",
    MSGESTURECHANGE: "MSGestureChange",
    MSGESTUREEND: "MSGestureEnd",
    MSGESTUREHOLD: "MSGestureHold",
    MSGESTURESTART: "MSGestureStart",
    MSGESTURETAP: "MSGestureTap",
    MSGOTPOINTERCAPTURE: "MSGotPointerCapture",
    MSINERTIASTART: "MSInertiaStart",
    MSLOSTPOINTERCAPTURE: "MSLostPointerCapture",
    MSPOINTERCANCEL: "MSPointerCancel",
    MSPOINTERDOWN: "MSPointerDown",
    MSPOINTERENTER: "MSPointerEnter",
    MSPOINTERHOVER: "MSPointerHover",
    MSPOINTERLEAVE: "MSPointerLeave",
    MSPOINTERMOVE: "MSPointerMove",
    MSPOINTEROUT: "MSPointerOut",
    MSPOINTEROVER: "MSPointerOver",
    MSPOINTERUP: "MSPointerUp",
    TEXT: "text",
    TEXTINPUT: "textInput",
    COMPOSITIONSTART: "compositionstart",
    COMPOSITIONUPDATE: "compositionupdate",
    COMPOSITIONEND: "compositionend",
    EXIT: "exit",
    LOADABORT: "loadabort",
    LOADCOMMIT: "loadcommit",
    LOADREDIRECT: "loadredirect",
    LOADSTART: "loadstart",
    LOADSTOP: "loadstop",
    RESPONSIVE: "responsive",
    SIZECHANGED: "sizechanged",
    UNRESPONSIVE: "unresponsive",
    VISIBILITYCHANGE: "visibilitychange",
    STORAGE: "storage",
    DOMSUBTREEMODIFIED: "DOMSubtreeModified",
    DOMNODEINSERTED: "DOMNodeInserted",
    DOMNODEREMOVED: "DOMNodeRemoved",
    DOMNODEREMOVEDFROMDOCUMENT: "DOMNodeRemovedFromDocument",
    DOMNODEINSERTEDINTODOCUMENT: "DOMNodeInsertedIntoDocument",
    DOMATTRMODIFIED: "DOMAttrModified",
    DOMCHARACTERDATAMODIFIED: "DOMCharacterDataModified",
    BEFOREPRINT: "beforeprint",
    AFTERPRINT: "afterprint"
}, goog.events.BrowserEvent = function(e, t) {
    goog.events.Event.call(this, e ? e.type : ""), this.relatedTarget = this.currentTarget = this.target = null, this.charCode = this.keyCode = this.button = this.screenY = this.screenX = this.clientY = this.clientX = this.offsetY = this.offsetX = 0, this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.state = null, this.platformModifierKey = !1, this.event_ = null, e && this.init(e, t)
}, goog.inherits(goog.events.BrowserEvent, goog.events.Event), goog.events.BrowserEvent.MouseButton = {
    LEFT: 0,
    MIDDLE: 1,
    RIGHT: 2
}, goog.events.BrowserEvent.IEButtonMap = [1, 4, 2], goog.events.BrowserEvent.prototype.init = function(e, t) {
    var o = this.type = e.type,
        n = e.changedTouches ? e.changedTouches[0] : null;
    this.target = e.target || e.srcElement, this.currentTarget = t;
    var i = e.relatedTarget;
    i ? goog.userAgent.GECKO && (goog.reflect.canAccessProperty(i, "nodeName") || (i = null)) : o == goog.events.EventType.MOUSEOVER ? i = e.fromElement : o == goog.events.EventType.MOUSEOUT && (i = e.toElement), this.relatedTarget = i, goog.isNull(n) ? (this.offsetX = goog.userAgent.WEBKIT || void 0 !== e.offsetX ? e.offsetX : e.layerX, this.offsetY = goog.userAgent.WEBKIT || void 0 !== e.offsetY ? e.offsetY : e.layerY, this.clientX = void 0 !== e.clientX ? e.clientX : e.pageX, this.clientY = void 0 !== e.clientY ? e.clientY : e.pageY, this.screenX = e.screenX || 0, this.screenY = e.screenY || 0) : (this.clientX = void 0 !== n.clientX ? n.clientX : n.pageX, this.clientY = void 0 !== n.clientY ? n.clientY : n.pageY, this.screenX = n.screenX || 0, this.screenY = n.screenY || 0), this.button = e.button, this.keyCode = e.keyCode || 0, this.charCode = e.charCode || ("keypress" == o ? e.keyCode : 0), this.ctrlKey = e.ctrlKey, this.altKey = e.altKey, this.shiftKey = e.shiftKey, this.metaKey = e.metaKey, this.platformModifierKey = goog.userAgent.MAC ? e.metaKey : e.ctrlKey, this.state = e.state, this.event_ = e, e.defaultPrevented && this.preventDefault()
}, goog.events.BrowserEvent.prototype.isButton = function(e) {
    return goog.events.BrowserFeature.HAS_W3C_BUTTON ? this.event_.button == e : "click" == this.type ? e == goog.events.BrowserEvent.MouseButton.LEFT : !!(this.event_.button & goog.events.BrowserEvent.IEButtonMap[e])
}, goog.events.BrowserEvent.prototype.isMouseActionButton = function() {
    return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT) && !(goog.userAgent.WEBKIT && goog.userAgent.MAC && this.ctrlKey)
}, goog.events.BrowserEvent.prototype.stopPropagation = function() {
    goog.events.BrowserEvent.superClass_.stopPropagation.call(this), this.event_.stopPropagation ? this.event_.stopPropagation() : this.event_.cancelBubble = !0
}, goog.events.BrowserEvent.prototype.preventDefault = function() {
    goog.events.BrowserEvent.superClass_.preventDefault.call(this);
    var e = this.event_;
    if (e.preventDefault) e.preventDefault();
    else if (e.returnValue = !1, goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT) try {
        (e.ctrlKey || 112 <= e.keyCode && 123 >= e.keyCode) && (e.keyCode = -1)
    } catch (t) {}
}, goog.events.BrowserEvent.prototype.getBrowserEvent = function() {
    return this.event_
}, goog.events.Listenable = function() {}, goog.events.Listenable.IMPLEMENTED_BY_PROP = "closure_listenable_" + (1e6 * Math.random() | 0), goog.events.Listenable.addImplementation = function(e) {
    e.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP] = !0
}, goog.events.Listenable.isImplementedBy = function(e) {
    return !(!e || !e[goog.events.Listenable.IMPLEMENTED_BY_PROP])
}, goog.events.ListenableKey = function() {}, goog.events.ListenableKey.counter_ = 0, goog.events.ListenableKey.reserveKey = function() {
    return ++goog.events.ListenableKey.counter_
}, goog.events.Listener = function(e, t, o, n, i, r) {
    goog.events.Listener.ENABLE_MONITORING && (this.creationStack = Error().stack), this.listener = e, this.proxy = t, this.src = o, this.type = n, this.capture = !!i, this.handler = r, this.key = goog.events.ListenableKey.reserveKey(), this.removed = this.callOnce = !1
}, goog.events.Listener.ENABLE_MONITORING = !1, goog.events.Listener.prototype.markAsRemoved = function() {
    this.removed = !0, this.handler = this.src = this.proxy = this.listener = null
}, goog.events.ListenerMap = function(e) {
    this.src = e, this.listeners = {}, this.typeCount_ = 0
}, goog.events.ListenerMap.prototype.getTypeCount = function() {
    return this.typeCount_
}, goog.events.ListenerMap.prototype.getListenerCount = function() {
    var e, t = 0;
    for (e in this.listeners) t += this.listeners[e].length;
    return t
}, goog.events.ListenerMap.prototype.add = function(e, t, o, n, i) {
    var r = e.toString();
    e = this.listeners[r], e || (e = this.listeners[r] = [], this.typeCount_++);
    var s = goog.events.ListenerMap.findListenerIndex_(e, t, n, i);
    return s > -1 ? (t = e[s], o || (t.callOnce = !1)) : (t = new goog.events.Listener(t, null, this.src, r, !!n, i), t.callOnce = o, e.push(t)), t
}, goog.events.ListenerMap.prototype.remove = function(e, t, o, n) {
    if (e = e.toString(), !(e in this.listeners)) return !1;
    var i = this.listeners[e];
    return t = goog.events.ListenerMap.findListenerIndex_(i, t, o, n), t > -1 ? (i[t].markAsRemoved(), goog.array.removeAt(i, t), 0 == i.length && (delete this.listeners[e], this.typeCount_--), !0) : !1
}, goog.events.ListenerMap.prototype.removeByKey = function(e) {
    var t = e.type;
    if (!(t in this.listeners)) return !1;
    var o = goog.array.remove(this.listeners[t], e);
    return o && (e.markAsRemoved(), 0 == this.listeners[t].length && (delete this.listeners[t], this.typeCount_--)), o
}, goog.events.ListenerMap.prototype.removeAll = function(e) {
    e = e && e.toString();
    var t, o = 0;
    for (t in this.listeners)
        if (!e || t == e) {
            for (var n = this.listeners[t], i = 0; i < n.length; i++) ++o, n[i].markAsRemoved();
            delete this.listeners[t], this.typeCount_--
        }
    return o
}, goog.events.ListenerMap.prototype.getListeners = function(e, t) {
    var o = this.listeners[e.toString()],
        n = [];
    if (o)
        for (var i = 0; i < o.length; ++i) {
            var r = o[i];
            r.capture == t && n.push(r)
        }
    return n
}, goog.events.ListenerMap.prototype.getListener = function(e, t, o, n) {
    e = this.listeners[e.toString()];
    var i = -1;
    return e && (i = goog.events.ListenerMap.findListenerIndex_(e, t, o, n)), i > -1 ? e[i] : null
}, goog.events.ListenerMap.prototype.hasListener = function(e, t) {
    var o = goog.isDef(e),
        n = o ? e.toString() : "",
        i = goog.isDef(t);
    return goog.object.some(this.listeners, function(e, r) {
        for (var s = 0; s < e.length; ++s)
            if (!(o && e[s].type != n || i && e[s].capture != t)) return !0;
        return !1
    })
}, goog.events.ListenerMap.findListenerIndex_ = function(e, t, o, n) {
    for (var i = 0; i < e.length; ++i) {
        var r = e[i];
        if (!r.removed && r.listener == t && r.capture == !!o && r.handler == n) return i
    }
    return -1
}, goog.events.LISTENER_MAP_PROP_ = "closure_lm_" + (1e6 * Math.random() | 0), goog.events.onString_ = "on", goog.events.onStringMap_ = {}, goog.events.CaptureSimulationMode = {
    OFF_AND_FAIL: 0,
    OFF_AND_SILENT: 1,
    ON: 2
}, goog.events.CAPTURE_SIMULATION_MODE = 2, goog.events.listenerCountEstimate_ = 0, goog.events.listen = function(e, t, o, n, i) {
    if (goog.isArray(t)) {
        for (var r = 0; r < t.length; r++) goog.events.listen(e, t[r], o, n, i);
        return null
    }
    return o = goog.events.wrapListener(o), goog.events.Listenable.isImplementedBy(e) ? e.listen(t, o, n, i) : goog.events.listen_(e, t, o, !1, n, i)
}, goog.events.listen_ = function(e, t, o, n, i, r) {
    if (!t) throw Error("Invalid event type");
    var s = !!i;
    if (s && !goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT) {
        if (goog.events.CAPTURE_SIMULATION_MODE == goog.events.CaptureSimulationMode.OFF_AND_FAIL) return goog.asserts.fail("Can not register capture listener in IE8-."), null;
        if (goog.events.CAPTURE_SIMULATION_MODE == goog.events.CaptureSimulationMode.OFF_AND_SILENT) return null
    }
    var a = goog.events.getListenerMap_(e);
    if (a || (e[goog.events.LISTENER_MAP_PROP_] = a = new goog.events.ListenerMap(e)), o = a.add(t, o, n, i, r), o.proxy) return o;
    if (n = goog.events.getProxy(),
        o.proxy = n, n.src = e, n.listener = o, e.addEventListener) e.addEventListener(t.toString(), n, s);
    else {
        if (!e.attachEvent) throw Error("addEventListener and attachEvent are unavailable.");
        e.attachEvent(goog.events.getOnString_(t.toString()), n)
    }
    return goog.events.listenerCountEstimate_++, o
}, goog.events.getProxy = function() {
    var e = goog.events.handleBrowserEvent_,
        t = goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT ? function(o) {
            return e.call(t.src, t.listener, o)
        } : function(o) {
            return o = e.call(t.src, t.listener, o), o ? void 0 : o
        };
    return t
}, goog.events.listenOnce = function(e, t, o, n, i) {
    if (goog.isArray(t)) {
        for (var r = 0; r < t.length; r++) goog.events.listenOnce(e, t[r], o, n, i);
        return null
    }
    return o = goog.events.wrapListener(o), goog.events.Listenable.isImplementedBy(e) ? e.listenOnce(t, o, n, i) : goog.events.listen_(e, t, o, !0, n, i)
}, goog.events.listenWithWrapper = function(e, t, o, n, i) {
    t.listen(e, o, n, i)
}, goog.events.unlisten = function(e, t, o, n, i) {
    if (goog.isArray(t)) {
        for (var r = 0; r < t.length; r++) goog.events.unlisten(e, t[r], o, n, i);
        return null
    }
    return o = goog.events.wrapListener(o), goog.events.Listenable.isImplementedBy(e) ? e.unlisten(t, o, n, i) : e ? (n = !!n, (e = goog.events.getListenerMap_(e)) && (t = e.getListener(t, o, n, i)) ? goog.events.unlistenByKey(t) : !1) : !1
}, goog.events.unlistenByKey = function(e) {
    if (goog.isNumber(e) || !e || e.removed) return !1;
    var t = e.src;
    if (goog.events.Listenable.isImplementedBy(t)) return t.unlistenByKey(e);
    var o = e.type,
        n = e.proxy;
    return t.removeEventListener ? t.removeEventListener(o, n, e.capture) : t.detachEvent && t.detachEvent(goog.events.getOnString_(o), n), goog.events.listenerCountEstimate_--, (o = goog.events.getListenerMap_(t)) ? (o.removeByKey(e), 0 == o.getTypeCount() && (o.src = null, t[goog.events.LISTENER_MAP_PROP_] = null)) : e.markAsRemoved(), !0
}, goog.events.unlistenWithWrapper = function(e, t, o, n, i) {
    t.unlisten(e, o, n, i)
}, goog.events.removeAll = function(e, t) {
    if (!e) return 0;
    if (goog.events.Listenable.isImplementedBy(e)) return e.removeAllListeners(t);
    var o = goog.events.getListenerMap_(e);
    if (!o) return 0;
    var n, i = 0,
        r = t && t.toString();
    for (n in o.listeners)
        if (!r || n == r)
            for (var s = o.listeners[n].concat(), a = 0; a < s.length; ++a) goog.events.unlistenByKey(s[a]) && ++i;
    return i
}, goog.events.getListeners = function(e, t, o) {
    return goog.events.Listenable.isImplementedBy(e) ? e.getListeners(t, o) : e && (e = goog.events.getListenerMap_(e)) ? e.getListeners(t, o) : []
}, goog.events.getListener = function(e, t, o, n, i) {
    return o = goog.events.wrapListener(o), n = !!n, goog.events.Listenable.isImplementedBy(e) ? e.getListener(t, o, n, i) : e && (e = goog.events.getListenerMap_(e)) ? e.getListener(t, o, n, i) : null
}, goog.events.hasListener = function(e, t, o) {
    return goog.events.Listenable.isImplementedBy(e) ? e.hasListener(t, o) : (e = goog.events.getListenerMap_(e), !!e && e.hasListener(t, o))
}, goog.events.expose = function(e) {
    var t, o = [];
    for (t in e) e[t] && e[t].id ? o.push(t + " = " + e[t] + " (" + e[t].id + ")") : o.push(t + " = " + e[t]);
    return o.join("\n")
}, goog.events.getOnString_ = function(e) {
    return e in goog.events.onStringMap_ ? goog.events.onStringMap_[e] : goog.events.onStringMap_[e] = goog.events.onString_ + e
}, goog.events.fireListeners = function(e, t, o, n) {
    return goog.events.Listenable.isImplementedBy(e) ? e.fireListeners(t, o, n) : goog.events.fireListeners_(e, t, o, n)
}, goog.events.fireListeners_ = function(e, t, o, n) {
    var i = !0;
    if ((e = goog.events.getListenerMap_(e)) && (t = e.listeners[t.toString()]))
        for (t = t.concat(), e = 0; e < t.length; e++) {
            var r = t[e];
            r && r.capture == o && !r.removed && (r = goog.events.fireListener(r, n), i = i && !1 !== r)
        }
    return i
}, goog.events.fireListener = function(e, t) {
    var o = e.listener,
        n = e.handler || e.src;
    return e.callOnce && goog.events.unlistenByKey(e), o.call(n, t)
}, goog.events.getTotalListenerCount = function() {
    return goog.events.listenerCountEstimate_
}, goog.events.dispatchEvent = function(e, t) {
    return goog.asserts.assert(goog.events.Listenable.isImplementedBy(e), "Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."), e.dispatchEvent(t)
}, goog.events.protectBrowserEventEntryPoint = function(e) {
    goog.events.handleBrowserEvent_ = e.protectEntryPoint(goog.events.handleBrowserEvent_)
}, goog.events.handleBrowserEvent_ = function(e, t) {
    if (e.removed) return !0;
    if (!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT) {
        var o = t || goog.getObjectByName("window.event"),
            n = new goog.events.BrowserEvent(o, this),
            i = !0;
        if (goog.events.CAPTURE_SIMULATION_MODE == goog.events.CaptureSimulationMode.ON) {
            if (!goog.events.isMarkedIeEvent_(o)) {
                goog.events.markIeEvent_(o);
                for (var o = [], r = n.currentTarget; r; r = r.parentNode) o.push(r);
                for (var r = e.type, s = o.length - 1; !n.propagationStopped_ && s >= 0; s--) {
                    n.currentTarget = o[s];
                    var a = goog.events.fireListeners_(o[s], r, !0, n),
                        i = i && a
                }
                for (s = 0; !n.propagationStopped_ && s < o.length; s++) n.currentTarget = o[s], a = goog.events.fireListeners_(o[s], r, !1, n), i = i && a
            }
        } else i = goog.events.fireListener(e, n);
        return i
    }
    return goog.events.fireListener(e, new goog.events.BrowserEvent(t, this))
}, goog.events.markIeEvent_ = function(e) {
    var t = !1;
    if (0 == e.keyCode) try {
        return void(e.keyCode = -1)
    } catch (o) {
        t = !0
    }(t || void 0 == e.returnValue) && (e.returnValue = !0)
}, goog.events.isMarkedIeEvent_ = function(e) {
    return 0 > e.keyCode || void 0 != e.returnValue
}, goog.events.uniqueIdCounter_ = 0, goog.events.getUniqueId = function(e) {
    return e + "_" + goog.events.uniqueIdCounter_++
}, goog.events.getListenerMap_ = function(e) {
    return e = e[goog.events.LISTENER_MAP_PROP_], e instanceof goog.events.ListenerMap ? e : null
}, goog.events.LISTENER_WRAPPER_PROP_ = "__closure_events_fn_" + (1e9 * Math.random() >>> 0), goog.events.wrapListener = function(e) {
    return goog.asserts.assert(e, "Listener can not be null."), goog.isFunction(e) ? e : (goog.asserts.assert(e.handleEvent, "An object listener must have handleEvent method."), e[goog.events.LISTENER_WRAPPER_PROP_] || (e[goog.events.LISTENER_WRAPPER_PROP_] = function(t) {
        return e.handleEvent(t)
    }), e[goog.events.LISTENER_WRAPPER_PROP_])
}, goog.debug.entryPointRegistry.register(function(e) {
    goog.events.handleBrowserEvent_ = e(goog.events.handleBrowserEvent_)
}), goog.Thenable = function() {}, goog.Thenable.prototype.then = function(e, t, o) {}, goog.Thenable.IMPLEMENTED_BY_PROP = "$goog_Thenable", goog.Thenable.addImplementation = function(e) {
    goog.exportProperty(e.prototype, "then", e.prototype.then), COMPILED ? e.prototype[goog.Thenable.IMPLEMENTED_BY_PROP] = !0 : e.prototype.$goog_Thenable = !0
}, goog.Thenable.isImplementedBy = function(e) {
    if (!e) return !1;
    try {
        return COMPILED ? !!e[goog.Thenable.IMPLEMENTED_BY_PROP] : !!e.$goog_Thenable
    } catch (t) {
        return !1
    }
}, goog.async = {}, goog.async.FreeList = function(e, t, o) {
    this.limit_ = o, this.create_ = e, this.reset_ = t, this.occupants_ = 0, this.head_ = null
}, goog.async.FreeList.prototype.get = function() {
    var e;
    return 0 < this.occupants_ ? (this.occupants_--, e = this.head_, this.head_ = e.next, e.next = null) : e = this.create_(), e
}, goog.async.FreeList.prototype.put = function(e) {
    this.reset_(e), this.occupants_ < this.limit_ && (this.occupants_++, e.next = this.head_, this.head_ = e)
}, goog.async.FreeList.prototype.occupants = function() {
    return this.occupants_
}, goog.async.WorkQueue = function() {
    this.workTail_ = this.workHead_ = null
}, goog.async.WorkQueue.DEFAULT_MAX_UNUSED = 100, goog.async.WorkQueue.freelist_ = new goog.async.FreeList(function() {
    return new goog.async.WorkItem
}, function(e) {
    e.reset()
}, goog.async.WorkQueue.DEFAULT_MAX_UNUSED), goog.async.WorkQueue.prototype.add = function(e, t) {
    var o = this.getUnusedItem_();
    o.set(e, t), this.workTail_ ? this.workTail_.next = o : (goog.asserts.assert(!this.workHead_), this.workHead_ = o), this.workTail_ = o
}, goog.async.WorkQueue.prototype.remove = function() {
    var e = null;
    return this.workHead_ && (e = this.workHead_, this.workHead_ = this.workHead_.next, this.workHead_ || (this.workTail_ = null), e.next = null), e
}, goog.async.WorkQueue.prototype.returnUnused = function(e) {
    goog.async.WorkQueue.freelist_.put(e)
}, goog.async.WorkQueue.prototype.getUnusedItem_ = function() {
    return goog.async.WorkQueue.freelist_.get()
}, goog.async.WorkItem = function() {
    this.next = this.scope = this.fn = null
}, goog.async.WorkItem.prototype.set = function(e, t) {
    this.fn = e, this.scope = t, this.next = null
}, goog.async.WorkItem.prototype.reset = function() {
    this.next = this.scope = this.fn = null
}, goog.functions = {}, goog.functions.constant = function(e) {
    return function() {
        return e
    }
}, goog.functions.FALSE = goog.functions.constant(!1), goog.functions.TRUE = goog.functions.constant(!0), goog.functions.NULL = goog.functions.constant(null), goog.functions.identity = function(e, t) {
    return e
}, goog.functions.error = function(e) {
    return function() {
        throw Error(e)
    }
}, goog.functions.fail = function(e) {
    return function() {
        throw e
    }
}, goog.functions.lock = function(e, t) {
    return t = t || 0,
        function() {
            return e.apply(this, Array.prototype.slice.call(arguments, 0, t))
        }
}, goog.functions.nth = function(e) {
    return function() {
        return arguments[e]
    }
}, goog.functions.partialRight = function(e, t) {
    var o = Array.prototype.slice.call(arguments, 1);
    return function() {
        var t = Array.prototype.slice.call(arguments);
        return t.push.apply(t, o), e.apply(this, t)
    }
}, goog.functions.withReturnValue = function(e, t) {
    return goog.functions.sequence(e, goog.functions.constant(t))
}, goog.functions.equalTo = function(e, t) {
    return function(o) {
        return t ? e == o : e === o
    }
}, goog.functions.compose = function(e, t) {
    var o = arguments,
        n = o.length;
    return function() {
        var e;
        n && (e = o[n - 1].apply(this, arguments));
        for (var t = n - 2; t >= 0; t--) e = o[t].call(this, e);
        return e
    }
}, goog.functions.sequence = function(e) {
    var t = arguments,
        o = t.length;
    return function() {
        for (var e, n = 0; o > n; n++) e = t[n].apply(this, arguments);
        return e
    }
}, goog.functions.and = function(e) {
    var t = arguments,
        o = t.length;
    return function() {
        for (var e = 0; o > e; e++)
            if (!t[e].apply(this, arguments)) return !1;
        return !0
    }
}, goog.functions.or = function(e) {
    var t = arguments,
        o = t.length;
    return function() {
        for (var e = 0; o > e; e++)
            if (t[e].apply(this, arguments)) return !0;
        return !1
    }
}, goog.functions.not = function(e) {
    return function() {
        return !e.apply(this, arguments)
    }
}, goog.functions.create = function(e, t) {
    var o = function() {};
    return o.prototype = e.prototype, o = new o, e.apply(o, Array.prototype.slice.call(arguments, 1)), o
}, goog.functions.CACHE_RETURN_VALUE = !0, goog.functions.cacheReturnValue = function(e) {
    var t, o = !1;
    return function() {
        return goog.functions.CACHE_RETURN_VALUE ? (o || (t = e(), o = !0), t) : e()
    }
}, goog.functions.once = function(e) {
    var t = e;
    return function() {
        if (t) {
            var e = t;
            t = null, e()
        }
    }
}, goog.functions.debounce = function(e, t, o) {
    o && (e = goog.bind(e, o));
    var n = null;
    return function(o) {
        goog.global.clearTimeout(n);
        var i = arguments;
        n = goog.global.setTimeout(function() {
            e.apply(null, i)
        }, t)
    }
}, goog.functions.throttle = function(e, t, o) {
    o && (e = goog.bind(e, o));
    var n = null,
        i = !1,
        r = [],
        s = function() {
            n = null, i && (i = !1, a())
        },
        a = function() {
            n = goog.global.setTimeout(s, t), e.apply(null, r)
        };
    return function(e) {
        r = arguments, n ? i = !0 : a()
    }
}, goog.async.throwException = function(e) {
    goog.global.setTimeout(function() {
        throw e
    }, 0)
}, goog.async.nextTick = function(e, t, o) {
    var n = e;
    t && (n = goog.bind(e, t)), n = goog.async.nextTick.wrapCallback_(n), goog.isFunction(goog.global.setImmediate) && (o || goog.async.nextTick.useSetImmediate_()) ? goog.global.setImmediate(n) : (goog.async.nextTick.setImmediate_ || (goog.async.nextTick.setImmediate_ = goog.async.nextTick.getSetImmediateEmulator_()), goog.async.nextTick.setImmediate_(n))
}, goog.async.nextTick.useSetImmediate_ = function() {
    return !goog.global.Window || !goog.global.Window.prototype || goog.labs.userAgent.browser.isEdge() || goog.global.Window.prototype.setImmediate != goog.global.setImmediate
}, goog.async.nextTick.getSetImmediateEmulator_ = function() {
    var e = goog.global.MessageChannel;
    if ("undefined" == typeof e && "undefined" != typeof window && window.postMessage && window.addEventListener && !goog.labs.userAgent.engine.isPresto() && (e = function() {
            var e = document.createElement(goog.dom.TagName.IFRAME);
            e.style.display = "none", e.src = "", document.documentElement.appendChild(e);
            var t = e.contentWindow,
                e = t.document;
            e.open(), e.write(""), e.close();
            var o = "callImmediate" + Math.random(),
                n = "file:" == t.location.protocol ? "*" : t.location.protocol + "//" + t.location.host,
                e = goog.bind(function(e) {
                    "*" != n && e.origin != n || e.data != o || this.port1.onmessage()
                }, this);
            t.addEventListener("message", e, !1), this.port1 = {}, this.port2 = {
                postMessage: function() {
                    t.postMessage(o, n)
                }
            }
        }), "undefined" != typeof e && !goog.labs.userAgent.browser.isIE()) {
        var t = new e,
            o = {},
            n = o;
        return t.port1.onmessage = function() {
                if (goog.isDef(o.next)) {
                    o = o.next;
                    var e = o.cb;
                    o.cb = null, e()
                }
            },
            function(e) {
                n.next = {
                    cb: e
                }, n = n.next, t.port2.postMessage(0)
            }
    }
    return "undefined" != typeof document && "onreadystatechange" in document.createElement(goog.dom.TagName.SCRIPT) ? function(e) {
        var t = document.createElement(goog.dom.TagName.SCRIPT);
        t.onreadystatechange = function() {
            t.onreadystatechange = null, t.parentNode.removeChild(t), t = null, e(), e = null
        }, document.documentElement.appendChild(t)
    } : function(e) {
        goog.global.setTimeout(e, 0)
    }
}, goog.async.nextTick.wrapCallback_ = goog.functions.identity, goog.debug.entryPointRegistry.register(function(e) {
    goog.async.nextTick.wrapCallback_ = e
}), goog.async.run = function(e, t) {
    goog.async.run.schedule_ || goog.async.run.initializeRunner_(), goog.async.run.workQueueScheduled_ || (goog.async.run.schedule_(), goog.async.run.workQueueScheduled_ = !0), goog.async.run.workQueue_.add(e, t)
}, goog.async.run.initializeRunner_ = function() {
    if (goog.global.Promise && goog.global.Promise.resolve) {
        var e = goog.global.Promise.resolve(void 0);
        goog.async.run.schedule_ = function() {
            e.then(goog.async.run.processWorkQueue)
        }
    } else goog.async.run.schedule_ = function() {
        goog.async.nextTick(goog.async.run.processWorkQueue)
    }
}, goog.async.run.forceNextTick = function(e) {
    goog.async.run.schedule_ = function() {
        goog.async.nextTick(goog.async.run.processWorkQueue), e && e(goog.async.run.processWorkQueue)
    }
}, goog.async.run.workQueueScheduled_ = !1, goog.async.run.workQueue_ = new goog.async.WorkQueue, goog.DEBUG && (goog.async.run.resetQueue = function() {
    goog.async.run.workQueueScheduled_ = !1, goog.async.run.workQueue_ = new goog.async.WorkQueue
}), goog.async.run.processWorkQueue = function() {
    for (var e; e = goog.async.run.workQueue_.remove();) {
        try {
            e.fn.call(e.scope)
        } catch (t) {
            goog.async.throwException(t)
        }
        goog.async.run.workQueue_.returnUnused(e)
    }
    goog.async.run.workQueueScheduled_ = !1
}, goog.promise = {}, goog.promise.Resolver = function() {}, goog.Promise = function(e, t) {
    if (this.state_ = goog.Promise.State_.PENDING, this.result_ = void 0, this.callbackEntriesTail_ = this.callbackEntries_ = this.parent_ = null, this.executing_ = !1, 0 < goog.Promise.UNHANDLED_REJECTION_DELAY ? this.unhandledRejectionId_ = 0 : 0 == goog.Promise.UNHANDLED_REJECTION_DELAY && (this.hadUnhandledRejection_ = !1), goog.Promise.LONG_STACK_TRACES && (this.stack_ = [], this.addStackTrace_(Error("created")), this.currentStep_ = 0), e != goog.nullFunction) try {
        var o = this;
        e.call(t, function(e) {
            o.resolve_(goog.Promise.State_.FULFILLED, e)
        }, function(e) {
            if (goog.DEBUG && !(e instanceof goog.Promise.CancellationError)) try {
                if (e instanceof Error) throw e;
                throw Error("Promise rejected.")
            } catch (t) {}
            o.resolve_(goog.Promise.State_.REJECTED, e)
        })
    } catch (n) {
        this.resolve_(goog.Promise.State_.REJECTED, n)
    }
}, goog.Promise.LONG_STACK_TRACES = !1, goog.Promise.UNHANDLED_REJECTION_DELAY = 0, goog.Promise.State_ = {
    PENDING: 0,
    BLOCKED: 1,
    FULFILLED: 2,
    REJECTED: 3
}, goog.Promise.CallbackEntry_ = function() {
    this.next = this.context = this.onRejected = this.onFulfilled = this.child = null, this.always = !1
}, goog.Promise.CallbackEntry_.prototype.reset = function() {
    this.context = this.onRejected = this.onFulfilled = this.child = null, this.always = !1
}, goog.Promise.DEFAULT_MAX_UNUSED = 100, goog.Promise.freelist_ = new goog.async.FreeList(function() {
    return new goog.Promise.CallbackEntry_
}, function(e) {
    e.reset()
}, goog.Promise.DEFAULT_MAX_UNUSED), goog.Promise.getCallbackEntry_ = function(e, t, o) {
    var n = goog.Promise.freelist_.get();
    return n.onFulfilled = e, n.onRejected = t, n.context = o, n
}, goog.Promise.returnEntry_ = function(e) {
    goog.Promise.freelist_.put(e)
}, goog.Promise.resolve = function(e) {
    if (e instanceof goog.Promise) return e;
    var t = new goog.Promise(goog.nullFunction);
    return t.resolve_(goog.Promise.State_.FULFILLED, e), t
}, goog.Promise.reject = function(e) {
    return new goog.Promise(function(t, o) {
        o(e)
    })
}, goog.Promise.resolveThen_ = function(e, t, o) {
    goog.Promise.maybeThen_(e, t, o, null) || goog.async.run(goog.partial(t, e))
}, goog.Promise.race = function(e) {
    return new goog.Promise(function(t, o) {
        e.length || t(void 0);
        for (var n, i = 0; i < e.length; i++) n = e[i], goog.Promise.resolveThen_(n, t, o)
    })
}, goog.Promise.all = function(e) {
    return new goog.Promise(function(t, o) {
        var n = e.length,
            i = [];
        if (n)
            for (var r, s = function(e, o) {
                    n--, i[e] = o, 0 == n && t(i)
                }, a = function(e) {
                    o(e)
                }, l = 0; l < e.length; l++) r = e[l], goog.Promise.resolveThen_(r, goog.partial(s, l), a);
        else t(i)
    })
}, goog.Promise.allSettled = function(e) {
    return new goog.Promise(function(t, o) {
        var n = e.length,
            i = [];
        if (n)
            for (var r, s = function(e, o, r) {
                    n--, i[e] = o ? {
                        fulfilled: !0,
                        value: r
                    } : {
                        fulfilled: !1,
                        reason: r
                    }, 0 == n && t(i)
                }, a = 0; a < e.length; a++) r = e[a], goog.Promise.resolveThen_(r, goog.partial(s, a, !0), goog.partial(s, a, !1));
        else t(i)
    })
}, goog.Promise.firstFulfilled = function(e) {
    return new goog.Promise(function(t, o) {
        var n = e.length,
            i = [];
        if (n)
            for (var r, s = function(e) {
                    t(e)
                }, a = function(e, t) {
                    n--, i[e] = t, 0 == n && o(i)
                }, l = 0; l < e.length; l++) r = e[l], goog.Promise.resolveThen_(r, s, goog.partial(a, l));
        else t(void 0)
    })
}, goog.Promise.withResolver = function() {
    var e, t, o = new goog.Promise(function(o, n) {
        e = o, t = n
    });
    return new goog.Promise.Resolver_(o, e, t)
}, goog.Promise.prototype.then = function(e, t, o) {
    return null != e && goog.asserts.assertFunction(e, "opt_onFulfilled should be a function."), null != t && goog.asserts.assertFunction(t, "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"), goog.Promise.LONG_STACK_TRACES && this.addStackTrace_(Error("then")), this.addChildPromise_(goog.isFunction(e) ? e : null, goog.isFunction(t) ? t : null, o)
}, goog.Thenable.addImplementation(goog.Promise), goog.Promise.prototype.thenVoid = function(e, t, o) {
    null != e && goog.asserts.assertFunction(e, "opt_onFulfilled should be a function."), null != t && goog.asserts.assertFunction(t, "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"), goog.Promise.LONG_STACK_TRACES && this.addStackTrace_(Error("then")), this.addCallbackEntry_(goog.Promise.getCallbackEntry_(e || goog.nullFunction, t || null, o))
}, goog.Promise.prototype.thenAlways = function(e, t) {
    goog.Promise.LONG_STACK_TRACES && this.addStackTrace_(Error("thenAlways"));
    var o = goog.Promise.getCallbackEntry_(e, e, t);
    return o.always = !0, this.addCallbackEntry_(o), this
}, goog.Promise.prototype.thenCatch = function(e, t) {
    return goog.Promise.LONG_STACK_TRACES && this.addStackTrace_(Error("thenCatch")), this.addChildPromise_(null, e, t)
}, goog.Promise.prototype.cancel = function(e) {
    this.state_ == goog.Promise.State_.PENDING && goog.async.run(function() {
        var t = new goog.Promise.CancellationError(e);
        this.cancelInternal_(t)
    }, this)
}, goog.Promise.prototype.cancelInternal_ = function(e) {
    this.state_ == goog.Promise.State_.PENDING && (this.parent_ ? (this.parent_.cancelChild_(this, e), this.parent_ = null) : this.resolve_(goog.Promise.State_.REJECTED, e))
}, goog.Promise.prototype.cancelChild_ = function(e, t) {
    if (this.callbackEntries_) {
        for (var o = 0, n = null, i = null, r = this.callbackEntries_; r && (r.always || (o++, r.child == e && (n = r), !(n && o > 1))); r = r.next) n || (i = r);
        n && (this.state_ == goog.Promise.State_.PENDING && 1 == o ? this.cancelInternal_(t) : (i ? this.removeEntryAfter_(i) : this.popEntry_(), this.executeCallback_(n, goog.Promise.State_.REJECTED, t)))
    }
}, goog.Promise.prototype.addCallbackEntry_ = function(e) {
    this.hasEntry_() || this.state_ != goog.Promise.State_.FULFILLED && this.state_ != goog.Promise.State_.REJECTED || this.scheduleCallbacks_(), this.queueEntry_(e)
}, goog.Promise.prototype.addChildPromise_ = function(e, t, o) {
    var n = goog.Promise.getCallbackEntry_(null, null, null);
    return n.child = new goog.Promise(function(i, r) {
        n.onFulfilled = e ? function(t) {
            try {
                var n = e.call(o, t);
                i(n)
            } catch (s) {
                r(s)
            }
        } : i, n.onRejected = t ? function(e) {
            try {
                var n = t.call(o, e);
                !goog.isDef(n) && e instanceof goog.Promise.CancellationError ? r(e) : i(n)
            } catch (s) {
                r(s)
            }
        } : r
    }), n.child.parent_ = this, this.addCallbackEntry_(n), n.child
}, goog.Promise.prototype.unblockAndFulfill_ = function(e) {
    goog.asserts.assert(this.state_ == goog.Promise.State_.BLOCKED), this.state_ = goog.Promise.State_.PENDING, this.resolve_(goog.Promise.State_.FULFILLED, e)
}, goog.Promise.prototype.unblockAndReject_ = function(e) {
    goog.asserts.assert(this.state_ == goog.Promise.State_.BLOCKED), this.state_ = goog.Promise.State_.PENDING, this.resolve_(goog.Promise.State_.REJECTED, e)
}, goog.Promise.prototype.resolve_ = function(e, t) {
    this.state_ == goog.Promise.State_.PENDING && (this == t && (e = goog.Promise.State_.REJECTED, t = new TypeError("Promise cannot resolve to itself")), this.state_ = goog.Promise.State_.BLOCKED, goog.Promise.maybeThen_(t, this.unblockAndFulfill_, this.unblockAndReject_, this) || (this.result_ = t, this.state_ = e, this.parent_ = null, this.scheduleCallbacks_(), e != goog.Promise.State_.REJECTED || t instanceof goog.Promise.CancellationError || goog.Promise.addUnhandledRejection_(this, t)))
}, goog.Promise.maybeThen_ = function(e, t, o, n) {
    if (e instanceof goog.Promise) return e.thenVoid(t, o, n), !0;
    if (goog.Thenable.isImplementedBy(e)) return e.then(t, o, n), !0;
    if (goog.isObject(e)) try {
        var i = e.then;
        if (goog.isFunction(i)) return goog.Promise.tryThen_(e, i, t, o, n), !0
    } catch (r) {
        return o.call(n, r), !0
    }
    return !1
}, goog.Promise.tryThen_ = function(e, t, o, n, i) {
    var r = !1,
        s = function(e) {
            r || (r = !0, o.call(i, e))
        },
        a = function(e) {
            r || (r = !0, n.call(i, e))
        };
    try {
        t.call(e, s, a)
    } catch (l) {
        a(l)
    }
}, goog.Promise.prototype.scheduleCallbacks_ = function() {
    this.executing_ || (this.executing_ = !0, goog.async.run(this.executeCallbacks_, this))
}, goog.Promise.prototype.hasEntry_ = function() {
    return !!this.callbackEntries_
}, goog.Promise.prototype.queueEntry_ = function(e) {
    goog.asserts.assert(null != e.onFulfilled), this.callbackEntriesTail_ ? this.callbackEntriesTail_.next = e : this.callbackEntries_ = e, this.callbackEntriesTail_ = e
}, goog.Promise.prototype.popEntry_ = function() {
    var e = null;
    return this.callbackEntries_ && (e = this.callbackEntries_, this.callbackEntries_ = e.next, e.next = null), this.callbackEntries_ || (this.callbackEntriesTail_ = null), null != e && goog.asserts.assert(null != e.onFulfilled), e
}, goog.Promise.prototype.removeEntryAfter_ = function(e) {
    goog.asserts.assert(this.callbackEntries_), goog.asserts.assert(null != e), e.next == this.callbackEntriesTail_ && (this.callbackEntriesTail_ = e), e.next = e.next.next
}, goog.Promise.prototype.executeCallbacks_ = function() {
    for (var e; e = this.popEntry_();) goog.Promise.LONG_STACK_TRACES && this.currentStep_++, this.executeCallback_(e, this.state_, this.result_);
    this.executing_ = !1
}, goog.Promise.prototype.executeCallback_ = function(e, t, o) {
    if (t == goog.Promise.State_.REJECTED && e.onRejected && !e.always && this.removeUnhandledRejection_(), e.child) e.child.parent_ = null, goog.Promise.invokeCallback_(e, t, o);
    else try {
        e.always ? e.onFulfilled.call(e.context) : goog.Promise.invokeCallback_(e, t, o)
    } catch (n) {
        goog.Promise.handleRejection_.call(null, n)
    }
    goog.Promise.returnEntry_(e)
}, goog.Promise.invokeCallback_ = function(e, t, o) {
    t == goog.Promise.State_.FULFILLED ? e.onFulfilled.call(e.context, o) : e.onRejected && e.onRejected.call(e.context, o)
}, goog.Promise.prototype.addStackTrace_ = function(e) {
    if (goog.Promise.LONG_STACK_TRACES && goog.isString(e.stack)) {
        var t = e.stack.split("\n", 4)[3];
        e = e.message, e += Array(11 - e.length).join(" "), this.stack_.push(e + t)
    }
}, goog.Promise.prototype.appendLongStack_ = function(e) {
    if (goog.Promise.LONG_STACK_TRACES && e && goog.isString(e.stack) && this.stack_.length) {
        for (var t = ["Promise trace:"], o = this; o; o = o.parent_) {
            for (var n = this.currentStep_; n >= 0; n--) t.push(o.stack_[n]);
            t.push("Value: [" + (o.state_ == goog.Promise.State_.REJECTED ? "REJECTED" : "FULFILLED") + "] <" + String(o.result_) + ">")
        }
        e.stack += "\n\n" + t.join("\n")
    }
}, goog.Promise.prototype.removeUnhandledRejection_ = function() {
    if (0 < goog.Promise.UNHANDLED_REJECTION_DELAY)
        for (var e = this; e && e.unhandledRejectionId_; e = e.parent_) goog.global.clearTimeout(e.unhandledRejectionId_), e.unhandledRejectionId_ = 0;
    else if (0 == goog.Promise.UNHANDLED_REJECTION_DELAY)
        for (e = this; e && e.hadUnhandledRejection_; e = e.parent_) e.hadUnhandledRejection_ = !1
}, goog.Promise.addUnhandledRejection_ = function(e, t) {
    0 < goog.Promise.UNHANDLED_REJECTION_DELAY ? e.unhandledRejectionId_ = goog.global.setTimeout(function() {
        e.appendLongStack_(t), goog.Promise.handleRejection_.call(null, t)
    }, goog.Promise.UNHANDLED_REJECTION_DELAY) : 0 == goog.Promise.UNHANDLED_REJECTION_DELAY && (e.hadUnhandledRejection_ = !0, goog.async.run(function() {
        e.hadUnhandledRejection_ && (e.appendLongStack_(t), goog.Promise.handleRejection_.call(null, t))
    }))
}, goog.Promise.handleRejection_ = goog.async.throwException, goog.Promise.setUnhandledRejectionHandler = function(e) {
    goog.Promise.handleRejection_ = e
}, goog.Promise.CancellationError = function(e) {
    goog.debug.Error.call(this, e)
}, goog.inherits(goog.Promise.CancellationError, goog.debug.Error), goog.Promise.CancellationError.prototype.name = "cancel", goog.Promise.Resolver_ = function(e, t, o) {
    this.promise = e, this.resolve = t, this.reject = o
}, goog.events.EventTarget = function() {
    goog.Disposable.call(this), this.eventTargetListeners_ = new goog.events.ListenerMap(this), this.actualEventTarget_ = this, this.parentEventTarget_ = null
}, goog.inherits(goog.events.EventTarget, goog.Disposable), goog.events.Listenable.addImplementation(goog.events.EventTarget), goog.events.EventTarget.MAX_ANCESTORS_ = 1e3, goog.events.EventTarget.prototype.getParentEventTarget = function() {
    return this.parentEventTarget_
}, goog.events.EventTarget.prototype.setParentEventTarget = function(e) {
    this.parentEventTarget_ = e
}, goog.events.EventTarget.prototype.addEventListener = function(e, t, o, n) {
    goog.events.listen(this, e, t, o, n)
}, goog.events.EventTarget.prototype.removeEventListener = function(e, t, o, n) {
    goog.events.unlisten(this, e, t, o, n)
}, goog.events.EventTarget.prototype.dispatchEvent = function(e) {
    this.assertInitialized_();
    var t, o = this.getParentEventTarget();
    if (o) {
        t = [];
        for (var n = 1; o; o = o.getParentEventTarget()) t.push(o), goog.asserts.assert(++n < goog.events.EventTarget.MAX_ANCESTORS_, "infinite loop")
    }
    return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_, e, t)
}, goog.events.EventTarget.prototype.disposeInternal = function() {
    goog.events.EventTarget.superClass_.disposeInternal.call(this), this.removeAllListeners(), this.parentEventTarget_ = null
}, goog.events.EventTarget.prototype.listen = function(e, t, o, n) {
    return this.assertInitialized_(), this.eventTargetListeners_.add(String(e), t, !1, o, n)
}, goog.events.EventTarget.prototype.listenOnce = function(e, t, o, n) {
    return this.eventTargetListeners_.add(String(e), t, !0, o, n)
}, goog.events.EventTarget.prototype.unlisten = function(e, t, o, n) {
    return this.eventTargetListeners_.remove(String(e), t, o, n)
}, goog.events.EventTarget.prototype.unlistenByKey = function(e) {
    return this.eventTargetListeners_.removeByKey(e)
}, goog.events.EventTarget.prototype.removeAllListeners = function(e) {
    return this.eventTargetListeners_ ? this.eventTargetListeners_.removeAll(e) : 0
}, goog.events.EventTarget.prototype.fireListeners = function(e, t, o) {
    if (e = this.eventTargetListeners_.listeners[String(e)], !e) return !0;
    e = e.concat();
    for (var n = !0, i = 0; i < e.length; ++i) {
        var r = e[i];
        if (r && !r.removed && r.capture == t) {
            var s = r.listener,
                a = r.handler || r.src;
            r.callOnce && this.unlistenByKey(r), n = !1 !== s.call(a, o) && n
        }
    }
    return n && 0 != o.returnValue_
}, goog.events.EventTarget.prototype.getListeners = function(e, t) {
    return this.eventTargetListeners_.getListeners(String(e), t)
}, goog.events.EventTarget.prototype.getListener = function(e, t, o, n) {
    return this.eventTargetListeners_.getListener(String(e), t, o, n)
}, goog.events.EventTarget.prototype.hasListener = function(e, t) {
    var o = goog.isDef(e) ? String(e) : void 0;
    return this.eventTargetListeners_.hasListener(o, t)
}, goog.events.EventTarget.prototype.setTargetForTesting = function(e) {
    this.actualEventTarget_ = e
}, goog.events.EventTarget.prototype.assertInitialized_ = function() {
    goog.asserts.assert(this.eventTargetListeners_, "Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")
}, goog.events.EventTarget.dispatchEventInternal_ = function(e, t, o) {
    var n = t.type || t;
    if (goog.isString(t)) t = new goog.events.Event(t, e);
    else if (t instanceof goog.events.Event) t.target = t.target || e;
    else {
        var i = t;
        t = new goog.events.Event(n, e), goog.object.extend(t, i)
    }
    var r, i = !0;
    if (o)
        for (var s = o.length - 1; !t.propagationStopped_ && s >= 0; s--) r = t.currentTarget = o[s], i = r.fireListeners(n, !0, t) && i;
    if (t.propagationStopped_ || (r = t.currentTarget = e, i = r.fireListeners(n, !0, t) && i, t.propagationStopped_ || (i = r.fireListeners(n, !1, t) && i)), o)
        for (s = 0; !t.propagationStopped_ && s < o.length; s++) r = t.currentTarget = o[s], i = r.fireListeners(n, !1, t) && i;
    return i
}, goog.Timer = function(e, t) {
    goog.events.EventTarget.call(this), this.interval_ = e || 1, this.timerObject_ = t || goog.Timer.defaultTimerObject, this.boundTick_ = goog.bind(this.tick_, this), this.last_ = goog.now()
}, goog.inherits(goog.Timer, goog.events.EventTarget), goog.Timer.MAX_TIMEOUT_ = 2147483647, goog.Timer.INVALID_TIMEOUT_ID_ = -1, goog.Timer.prototype.enabled = !1, goog.Timer.defaultTimerObject = goog.global, goog.Timer.intervalScale = .8, goog.Timer.prototype.timer_ = null, goog.Timer.prototype.getInterval = function() {
    return this.interval_
}, goog.Timer.prototype.setInterval = function(e) {
    this.interval_ = e, this.timer_ && this.enabled ? (this.stop(), this.start()) : this.timer_ && this.stop()
}, goog.Timer.prototype.tick_ = function() {
    if (this.enabled) {
        var e = goog.now() - this.last_;
        e > 0 && e < this.interval_ * goog.Timer.intervalScale ? this.timer_ = this.timerObject_.setTimeout(this.boundTick_, this.interval_ - e) : (this.timer_ && (this.timerObject_.clearTimeout(this.timer_), this.timer_ = null), this.dispatchTick(), this.enabled && (this.timer_ = this.timerObject_.setTimeout(this.boundTick_, this.interval_), this.last_ = goog.now()))
    }
}, goog.Timer.prototype.dispatchTick = function() {
    this.dispatchEvent(goog.Timer.TICK)
}, goog.Timer.prototype.start = function() {
    this.enabled = !0, this.timer_ || (this.timer_ = this.timerObject_.setTimeout(this.boundTick_, this.interval_), this.last_ = goog.now())
}, goog.Timer.prototype.stop = function() {
    this.enabled = !1, this.timer_ && (this.timerObject_.clearTimeout(this.timer_), this.timer_ = null)
}, goog.Timer.prototype.disposeInternal = function() {
    goog.Timer.superClass_.disposeInternal.call(this), this.stop(), delete this.timerObject_
}, goog.Timer.TICK = "tick", goog.Timer.callOnce = function(e, t, o) {
    if (goog.isFunction(e)) o && (e = goog.bind(e, o));
    else {
        if (!e || "function" != typeof e.handleEvent) throw Error("Invalid listener argument");
        e = goog.bind(e.handleEvent, e)
    }
    return Number(t) > goog.Timer.MAX_TIMEOUT_ ? goog.Timer.INVALID_TIMEOUT_ID_ : goog.Timer.defaultTimerObject.setTimeout(e, t || 0)
}, goog.Timer.clear = function(e) {
    goog.Timer.defaultTimerObject.clearTimeout(e)
}, goog.Timer.promise = function(e, t) {
    var o = null;
    return new goog.Promise(function(n, i) {
        o = goog.Timer.callOnce(function() {
            n(t)
        }, e), o == goog.Timer.INVALID_TIMEOUT_ID_ && i(Error("Failed to schedule timer."))
    }).thenCatch(function(e) {
        throw goog.Timer.clear(o), e
    })
}, goog.events.EventHandler = function(e) {
    goog.Disposable.call(this), this.handler_ = e, this.keys_ = {}
}, goog.inherits(goog.events.EventHandler, goog.Disposable), goog.events.EventHandler.typeArray_ = [], goog.events.EventHandler.prototype.listen = function(e, t, o, n) {
    return this.listen_(e, t, o, n)
}, goog.events.EventHandler.prototype.listenWithScope = function(e, t, o, n, i) {
    return this.listen_(e, t, o, n, i)
}, goog.events.EventHandler.prototype.listen_ = function(e, t, o, n, i) {
    goog.isArray(t) || (t && (goog.events.EventHandler.typeArray_[0] = t.toString()), t = goog.events.EventHandler.typeArray_);
    for (var r = 0; r < t.length; r++) {
        var s = goog.events.listen(e, t[r], o || this.handleEvent, n || !1, i || this.handler_ || this);
        if (!s) break;
        this.keys_[s.key] = s
    }
    return this
}, goog.events.EventHandler.prototype.listenOnce = function(e, t, o, n) {
    return this.listenOnce_(e, t, o, n)
}, goog.events.EventHandler.prototype.listenOnceWithScope = function(e, t, o, n, i) {
    return this.listenOnce_(e, t, o, n, i)
}, goog.events.EventHandler.prototype.listenOnce_ = function(e, t, o, n, i) {
    if (goog.isArray(t))
        for (var r = 0; r < t.length; r++) this.listenOnce_(e, t[r], o, n, i);
    else {
        if (e = goog.events.listenOnce(e, t, o || this.handleEvent, n, i || this.handler_ || this), !e) return this;
        this.keys_[e.key] = e
    }
    return this
}, goog.events.EventHandler.prototype.listenWithWrapper = function(e, t, o, n) {
    return this.listenWithWrapper_(e, t, o, n)
}, goog.events.EventHandler.prototype.listenWithWrapperAndScope = function(e, t, o, n, i) {
    return this.listenWithWrapper_(e, t, o, n, i)
}, goog.events.EventHandler.prototype.listenWithWrapper_ = function(e, t, o, n, i) {
    return t.listen(e, o, n, i || this.handler_ || this, this), this
}, goog.events.EventHandler.prototype.getListenerCount = function() {
    var e, t = 0;
    for (e in this.keys_) Object.prototype.hasOwnProperty.call(this.keys_, e) && t++;
    return t
}, goog.events.EventHandler.prototype.unlisten = function(e, t, o, n, i) {
    if (goog.isArray(t))
        for (var r = 0; r < t.length; r++) this.unlisten(e, t[r], o, n, i);
    else(e = goog.events.getListener(e, t, o || this.handleEvent, n, i || this.handler_ || this)) && (goog.events.unlistenByKey(e),
        delete this.keys_[e.key]);
    return this
}, goog.events.EventHandler.prototype.unlistenWithWrapper = function(e, t, o, n, i) {
    return t.unlisten(e, o, n, i || this.handler_ || this, this), this
}, goog.events.EventHandler.prototype.removeAll = function() {
    goog.object.forEach(this.keys_, function(e, t) {
        this.keys_.hasOwnProperty(t) && goog.events.unlistenByKey(e)
    }, this), this.keys_ = {}
}, goog.events.EventHandler.prototype.disposeInternal = function() {
    goog.events.EventHandler.superClass_.disposeInternal.call(this), this.removeAll()
}, goog.events.EventHandler.prototype.handleEvent = function(e) {
    throw Error("EventHandler.handleEvent not implemented")
}, goog.ui = {}, goog.ui.IdGenerator = function() {}, goog.addSingletonGetter(goog.ui.IdGenerator), goog.ui.IdGenerator.prototype.nextId_ = 0, goog.ui.IdGenerator.prototype.getNextUniqueId = function() {
    return ":" + (this.nextId_++).toString(36)
}, goog.ui.Component = function(e) {
    goog.events.EventTarget.call(this), this.dom_ = e || goog.dom.getDomHelper(), this.rightToLeft_ = goog.ui.Component.defaultRightToLeft_, this.id_ = null, this.inDocument_ = !1, this.element_ = null, this.googUiComponentHandler_ = void 0, this.childIndex_ = this.children_ = this.parent_ = this.model_ = null, this.wasDecorated_ = !1
}, goog.inherits(goog.ui.Component, goog.events.EventTarget), goog.ui.Component.ALLOW_DETACHED_DECORATION = !1, goog.ui.Component.prototype.idGenerator_ = goog.ui.IdGenerator.getInstance(), goog.ui.Component.DEFAULT_BIDI_DIR = 0, goog.ui.Component.defaultRightToLeft_ = 1 == goog.ui.Component.DEFAULT_BIDI_DIR ? !1 : -1 == goog.ui.Component.DEFAULT_BIDI_DIR ? !0 : null, goog.ui.Component.EventType = {
    BEFORE_SHOW: "beforeshow",
    SHOW: "show",
    HIDE: "hide",
    DISABLE: "disable",
    ENABLE: "enable",
    HIGHLIGHT: "highlight",
    UNHIGHLIGHT: "unhighlight",
    ACTIVATE: "activate",
    DEACTIVATE: "deactivate",
    SELECT: "select",
    UNSELECT: "unselect",
    CHECK: "check",
    UNCHECK: "uncheck",
    FOCUS: "focus",
    BLUR: "blur",
    OPEN: "open",
    CLOSE: "close",
    ENTER: "enter",
    LEAVE: "leave",
    ACTION: "action",
    CHANGE: "change"
}, goog.ui.Component.Error = {
    NOT_SUPPORTED: "Method not supported",
    DECORATE_INVALID: "Invalid element to decorate",
    ALREADY_RENDERED: "Component already rendered",
    PARENT_UNABLE_TO_BE_SET: "Unable to set parent component",
    CHILD_INDEX_OUT_OF_BOUNDS: "Child component index out of bounds",
    NOT_OUR_CHILD: "Child is not in parent component",
    NOT_IN_DOCUMENT: "Operation not supported while component is not in document",
    STATE_INVALID: "Invalid component state"
}, goog.ui.Component.State = {
    ALL: 255,
    DISABLED: 1,
    HOVER: 2,
    ACTIVE: 4,
    SELECTED: 8,
    CHECKED: 16,
    FOCUSED: 32,
    OPENED: 64
}, goog.ui.Component.getStateTransitionEvent = function(e, t) {
    switch (e) {
        case goog.ui.Component.State.DISABLED:
            return t ? goog.ui.Component.EventType.DISABLE : goog.ui.Component.EventType.ENABLE;
        case goog.ui.Component.State.HOVER:
            return t ? goog.ui.Component.EventType.HIGHLIGHT : goog.ui.Component.EventType.UNHIGHLIGHT;
        case goog.ui.Component.State.ACTIVE:
            return t ? goog.ui.Component.EventType.ACTIVATE : goog.ui.Component.EventType.DEACTIVATE;
        case goog.ui.Component.State.SELECTED:
            return t ? goog.ui.Component.EventType.SELECT : goog.ui.Component.EventType.UNSELECT;
        case goog.ui.Component.State.CHECKED:
            return t ? goog.ui.Component.EventType.CHECK : goog.ui.Component.EventType.UNCHECK;
        case goog.ui.Component.State.FOCUSED:
            return t ? goog.ui.Component.EventType.FOCUS : goog.ui.Component.EventType.BLUR;
        case goog.ui.Component.State.OPENED:
            return t ? goog.ui.Component.EventType.OPEN : goog.ui.Component.EventType.CLOSE
    }
    throw Error(goog.ui.Component.Error.STATE_INVALID)
}, goog.ui.Component.setDefaultRightToLeft = function(e) {
    goog.ui.Component.defaultRightToLeft_ = e
}, goog.ui.Component.prototype.getId = function() {
    return this.id_ || (this.id_ = this.idGenerator_.getNextUniqueId())
}, goog.ui.Component.prototype.setId = function(e) {
    this.parent_ && this.parent_.childIndex_ && (goog.object.remove(this.parent_.childIndex_, this.id_), goog.object.add(this.parent_.childIndex_, e, this)), this.id_ = e
}, goog.ui.Component.prototype.getElement = function() {
    return this.element_
}, goog.ui.Component.prototype.getElementStrict = function() {
    var e = this.element_;
    return goog.asserts.assert(e, "Can not call getElementStrict before rendering/decorating."), e
}, goog.ui.Component.prototype.setElementInternal = function(e) {
    this.element_ = e
}, goog.ui.Component.prototype.getElementsByClass = function(e) {
    return this.element_ ? this.dom_.getElementsByClass(e, this.element_) : []
}, goog.ui.Component.prototype.getElementByClass = function(e) {
    return this.element_ ? this.dom_.getElementByClass(e, this.element_) : null
}, goog.ui.Component.prototype.getRequiredElementByClass = function(e) {
    var t = this.getElementByClass(e);
    return goog.asserts.assert(t, "Expected element in component with class: %s", e), t
}, goog.ui.Component.prototype.getHandler = function() {
    return this.googUiComponentHandler_ || (this.googUiComponentHandler_ = new goog.events.EventHandler(this)), this.googUiComponentHandler_
}, goog.ui.Component.prototype.setParent = function(e) {
    if (this == e) throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);
    if (e && this.parent_ && this.id_ && this.parent_.getChild(this.id_) && this.parent_ != e) throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);
    this.parent_ = e, goog.ui.Component.superClass_.setParentEventTarget.call(this, e)
}, goog.ui.Component.prototype.getParent = function() {
    return this.parent_
}, goog.ui.Component.prototype.setParentEventTarget = function(e) {
    if (this.parent_ && this.parent_ != e) throw Error(goog.ui.Component.Error.NOT_SUPPORTED);
    goog.ui.Component.superClass_.setParentEventTarget.call(this, e)
}, goog.ui.Component.prototype.getDomHelper = function() {
    return this.dom_
}, goog.ui.Component.prototype.isInDocument = function() {
    return this.inDocument_
}, goog.ui.Component.prototype.createDom = function() {
    this.element_ = this.dom_.createElement(goog.dom.TagName.DIV)
}, goog.ui.Component.prototype.render = function(e) {
    this.render_(e)
}, goog.ui.Component.prototype.renderBefore = function(e) {
    this.render_(e.parentNode, e)
}, goog.ui.Component.prototype.render_ = function(e, t) {
    if (this.inDocument_) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.element_ || this.createDom(), e ? e.insertBefore(this.element_, t || null) : this.dom_.getDocument().body.appendChild(this.element_), this.parent_ && !this.parent_.isInDocument() || this.enterDocument()
}, goog.ui.Component.prototype.decorate = function(e) {
    if (this.inDocument_) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    if (!e || !this.canDecorate(e)) throw Error(goog.ui.Component.Error.DECORATE_INVALID);
    this.wasDecorated_ = !0;
    var t = goog.dom.getOwnerDocument(e);
    this.dom_ && this.dom_.getDocument() == t || (this.dom_ = goog.dom.getDomHelper(e)), this.decorateInternal(e), goog.ui.Component.ALLOW_DETACHED_DECORATION && !goog.dom.contains(t, e) || this.enterDocument()
}, goog.ui.Component.prototype.canDecorate = function(e) {
    return !0
}, goog.ui.Component.prototype.wasDecorated = function() {
    return this.wasDecorated_
}, goog.ui.Component.prototype.decorateInternal = function(e) {
    this.element_ = e
}, goog.ui.Component.prototype.enterDocument = function() {
    this.inDocument_ = !0, this.forEachChild(function(e) {
        !e.isInDocument() && e.getElement() && e.enterDocument()
    })
}, goog.ui.Component.prototype.exitDocument = function() {
    this.forEachChild(function(e) {
        e.isInDocument() && e.exitDocument()
    }), this.googUiComponentHandler_ && this.googUiComponentHandler_.removeAll(), this.inDocument_ = !1
}, goog.ui.Component.prototype.disposeInternal = function() {
    this.inDocument_ && this.exitDocument(), this.googUiComponentHandler_ && (this.googUiComponentHandler_.dispose(), delete this.googUiComponentHandler_), this.forEachChild(function(e) {
        e.dispose()
    }), !this.wasDecorated_ && this.element_ && goog.dom.removeNode(this.element_), this.parent_ = this.model_ = this.element_ = this.childIndex_ = this.children_ = null, goog.ui.Component.superClass_.disposeInternal.call(this)
}, goog.ui.Component.prototype.makeId = function(e) {
    return this.getId() + "." + e
}, goog.ui.Component.prototype.makeIds = function(e) {
    var t, o = {};
    for (t in e) o[t] = this.makeId(e[t]);
    return o
}, goog.ui.Component.prototype.getModel = function() {
    return this.model_
}, goog.ui.Component.prototype.setModel = function(e) {
    this.model_ = e
}, goog.ui.Component.prototype.getFragmentFromId = function(e) {
    return e.substring(this.getId().length + 1)
}, goog.ui.Component.prototype.getElementByFragment = function(e) {
    if (!this.inDocument_) throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);
    return this.dom_.getElement(this.makeId(e))
}, goog.ui.Component.prototype.addChild = function(e, t) {
    this.addChildAt(e, this.getChildCount(), t)
}, goog.ui.Component.prototype.addChildAt = function(e, t, o) {
    if (goog.asserts.assert(!!e, "Provided element must not be null."), e.inDocument_ && (o || !this.inDocument_)) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    if (0 > t || t > this.getChildCount()) throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);
    this.childIndex_ && this.children_ || (this.childIndex_ = {}, this.children_ = []), e.getParent() == this ? (goog.object.set(this.childIndex_, e.getId(), e), goog.array.remove(this.children_, e)) : goog.object.add(this.childIndex_, e.getId(), e), e.setParent(this), goog.array.insertAt(this.children_, e, t), e.inDocument_ && this.inDocument_ && e.getParent() == this ? (o = this.getContentElement(), t = o.childNodes[t] || null, t != e.getElement() && o.insertBefore(e.getElement(), t)) : o ? (this.element_ || this.createDom(), t = this.getChildAt(t + 1), e.render_(this.getContentElement(), t ? t.element_ : null)) : this.inDocument_ && !e.inDocument_ && e.element_ && e.element_.parentNode && e.element_.parentNode.nodeType == goog.dom.NodeType.ELEMENT && e.enterDocument()
}, goog.ui.Component.prototype.getContentElement = function() {
    return this.element_
}, goog.ui.Component.prototype.isRightToLeft = function() {
    return null == this.rightToLeft_ && (this.rightToLeft_ = goog.style.isRightToLeft(this.inDocument_ ? this.element_ : this.dom_.getDocument().body)), this.rightToLeft_
}, goog.ui.Component.prototype.setRightToLeft = function(e) {
    if (this.inDocument_) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.rightToLeft_ = e
}, goog.ui.Component.prototype.hasChildren = function() {
    return !!this.children_ && 0 != this.children_.length
}, goog.ui.Component.prototype.getChildCount = function() {
    return this.children_ ? this.children_.length : 0
}, goog.ui.Component.prototype.getChildIds = function() {
    var e = [];
    return this.forEachChild(function(t) {
        e.push(t.getId())
    }), e
}, goog.ui.Component.prototype.getChild = function(e) {
    return this.childIndex_ && e ? goog.object.get(this.childIndex_, e) || null : null
}, goog.ui.Component.prototype.getChildAt = function(e) {
    return this.children_ ? this.children_[e] || null : null
}, goog.ui.Component.prototype.forEachChild = function(e, t) {
    this.children_ && goog.array.forEach(this.children_, e, t)
}, goog.ui.Component.prototype.indexOfChild = function(e) {
    return this.children_ && e ? goog.array.indexOf(this.children_, e) : -1
}, goog.ui.Component.prototype.removeChild = function(e, t) {
    if (e) {
        var o = goog.isString(e) ? e : e.getId();
        e = this.getChild(o), o && e && (goog.object.remove(this.childIndex_, o), goog.array.remove(this.children_, e), t && (e.exitDocument(), e.element_ && goog.dom.removeNode(e.element_)), e.setParent(null))
    }
    if (!e) throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);
    return e
}, goog.ui.Component.prototype.removeChildAt = function(e, t) {
    return this.removeChild(this.getChildAt(e), t)
}, goog.ui.Component.prototype.removeChildren = function(e) {
    for (var t = []; this.hasChildren();) t.push(this.removeChildAt(0, e));
    return t
}, goog.a11y = {}, goog.a11y.aria = {}, goog.a11y.aria.Role = {
    ALERT: "alert",
    ALERTDIALOG: "alertdialog",
    APPLICATION: "application",
    ARTICLE: "article",
    BANNER: "banner",
    BUTTON: "button",
    CHECKBOX: "checkbox",
    COLUMNHEADER: "columnheader",
    COMBOBOX: "combobox",
    COMPLEMENTARY: "complementary",
    CONTENTINFO: "contentinfo",
    DEFINITION: "definition",
    DIALOG: "dialog",
    DIRECTORY: "directory",
    DOCUMENT: "document",
    FORM: "form",
    GRID: "grid",
    GRIDCELL: "gridcell",
    GROUP: "group",
    HEADING: "heading",
    IMG: "img",
    LINK: "link",
    LIST: "list",
    LISTBOX: "listbox",
    LISTITEM: "listitem",
    LOG: "log",
    MAIN: "main",
    MARQUEE: "marquee",
    MATH: "math",
    MENU: "menu",
    MENUBAR: "menubar",
    MENU_ITEM: "menuitem",
    MENU_ITEM_CHECKBOX: "menuitemcheckbox",
    MENU_ITEM_RADIO: "menuitemradio",
    NAVIGATION: "navigation",
    NOTE: "note",
    OPTION: "option",
    PRESENTATION: "presentation",
    PROGRESSBAR: "progressbar",
    RADIO: "radio",
    RADIOGROUP: "radiogroup",
    REGION: "region",
    ROW: "row",
    ROWGROUP: "rowgroup",
    ROWHEADER: "rowheader",
    SCROLLBAR: "scrollbar",
    SEARCH: "search",
    SEPARATOR: "separator",
    SLIDER: "slider",
    SPINBUTTON: "spinbutton",
    STATUS: "status",
    TAB: "tab",
    TAB_LIST: "tablist",
    TAB_PANEL: "tabpanel",
    TEXTBOX: "textbox",
    TEXTINFO: "textinfo",
    TIMER: "timer",
    TOOLBAR: "toolbar",
    TOOLTIP: "tooltip",
    TREE: "tree",
    TREEGRID: "treegrid",
    TREEITEM: "treeitem"
}, goog.a11y.aria.State = {
    ACTIVEDESCENDANT: "activedescendant",
    ATOMIC: "atomic",
    AUTOCOMPLETE: "autocomplete",
    BUSY: "busy",
    CHECKED: "checked",
    CONTROLS: "controls",
    DESCRIBEDBY: "describedby",
    DISABLED: "disabled",
    DROPEFFECT: "dropeffect",
    EXPANDED: "expanded",
    FLOWTO: "flowto",
    GRABBED: "grabbed",
    HASPOPUP: "haspopup",
    HIDDEN: "hidden",
    INVALID: "invalid",
    LABEL: "label",
    LABELLEDBY: "labelledby",
    LEVEL: "level",
    LIVE: "live",
    MULTILINE: "multiline",
    MULTISELECTABLE: "multiselectable",
    ORIENTATION: "orientation",
    OWNS: "owns",
    POSINSET: "posinset",
    PRESSED: "pressed",
    READONLY: "readonly",
    RELEVANT: "relevant",
    REQUIRED: "required",
    SELECTED: "selected",
    SETSIZE: "setsize",
    SORT: "sort",
    VALUEMAX: "valuemax",
    VALUEMIN: "valuemin",
    VALUENOW: "valuenow",
    VALUETEXT: "valuetext"
}, goog.a11y.aria.AutoCompleteValues = {
    INLINE: "inline",
    LIST: "list",
    BOTH: "both",
    NONE: "none"
}, goog.a11y.aria.DropEffectValues = {
    COPY: "copy",
    MOVE: "move",
    LINK: "link",
    EXECUTE: "execute",
    POPUP: "popup",
    NONE: "none"
}, goog.a11y.aria.LivePriority = {
    OFF: "off",
    POLITE: "polite",
    ASSERTIVE: "assertive"
}, goog.a11y.aria.OrientationValues = {
    VERTICAL: "vertical",
    HORIZONTAL: "horizontal"
}, goog.a11y.aria.RelevantValues = {
    ADDITIONS: "additions",
    REMOVALS: "removals",
    TEXT: "text",
    ALL: "all"
}, goog.a11y.aria.SortValues = {
    ASCENDING: "ascending",
    DESCENDING: "descending",
    NONE: "none",
    OTHER: "other"
}, goog.a11y.aria.CheckedValues = {
    TRUE: "true",
    FALSE: "false",
    MIXED: "mixed",
    UNDEFINED: "undefined"
}, goog.a11y.aria.ExpandedValues = {
    TRUE: "true",
    FALSE: "false",
    UNDEFINED: "undefined"
}, goog.a11y.aria.GrabbedValues = {
    TRUE: "true",
    FALSE: "false",
    UNDEFINED: "undefined"
}, goog.a11y.aria.InvalidValues = {
    FALSE: "false",
    TRUE: "true",
    GRAMMAR: "grammar",
    SPELLING: "spelling"
}, goog.a11y.aria.PressedValues = {
    TRUE: "true",
    FALSE: "false",
    MIXED: "mixed",
    UNDEFINED: "undefined"
}, goog.a11y.aria.SelectedValues = {
    TRUE: "true",
    FALSE: "false",
    UNDEFINED: "undefined"
}, goog.a11y.aria.datatables = {}, goog.a11y.aria.datatables.getDefaultValuesMap = function() {
    return goog.a11y.aria.DefaultStateValueMap_ || (goog.a11y.aria.DefaultStateValueMap_ = goog.object.create(goog.a11y.aria.State.ATOMIC, !1, goog.a11y.aria.State.AUTOCOMPLETE, "none", goog.a11y.aria.State.DROPEFFECT, "none", goog.a11y.aria.State.HASPOPUP, !1, goog.a11y.aria.State.LIVE, "off", goog.a11y.aria.State.MULTILINE, !1, goog.a11y.aria.State.MULTISELECTABLE, !1, goog.a11y.aria.State.ORIENTATION, "vertical", goog.a11y.aria.State.READONLY, !1, goog.a11y.aria.State.RELEVANT, "additions text", goog.a11y.aria.State.REQUIRED, !1, goog.a11y.aria.State.SORT, "none", goog.a11y.aria.State.BUSY, !1, goog.a11y.aria.State.DISABLED, !1, goog.a11y.aria.State.HIDDEN, !1, goog.a11y.aria.State.INVALID, "false")), goog.a11y.aria.DefaultStateValueMap_
}, goog.a11y.aria.ARIA_PREFIX_ = "aria-", goog.a11y.aria.ROLE_ATTRIBUTE_ = "role", goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_ = [goog.dom.TagName.A, goog.dom.TagName.AREA, goog.dom.TagName.BUTTON, goog.dom.TagName.HEAD, goog.dom.TagName.INPUT, goog.dom.TagName.LINK, goog.dom.TagName.MENU, goog.dom.TagName.META, goog.dom.TagName.OPTGROUP, goog.dom.TagName.OPTION, goog.dom.TagName.PROGRESS, goog.dom.TagName.STYLE, goog.dom.TagName.SELECT, goog.dom.TagName.SOURCE, goog.dom.TagName.TEXTAREA, goog.dom.TagName.TITLE, goog.dom.TagName.TRACK], goog.a11y.aria.CONTAINER_ROLES_ = [goog.a11y.aria.Role.COMBOBOX, goog.a11y.aria.Role.GRID, goog.a11y.aria.Role.GROUP, goog.a11y.aria.Role.LISTBOX, goog.a11y.aria.Role.MENU, goog.a11y.aria.Role.MENUBAR, goog.a11y.aria.Role.RADIOGROUP, goog.a11y.aria.Role.ROW, goog.a11y.aria.Role.ROWGROUP, goog.a11y.aria.Role.TAB_LIST, goog.a11y.aria.Role.TEXTBOX, goog.a11y.aria.Role.TOOLBAR, goog.a11y.aria.Role.TREE, goog.a11y.aria.Role.TREEGRID], goog.a11y.aria.setRole = function(e, t) {
    t ? (goog.asserts.ENABLE_ASSERTS && goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role, t), "No such ARIA role " + t), e.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_, t)) : goog.a11y.aria.removeRole(e)
}, goog.a11y.aria.getRole = function(e) {
    return e.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_) || null
}, goog.a11y.aria.removeRole = function(e) {
    e.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)
}, goog.a11y.aria.setState = function(e, t, o) {
    goog.isArray(o) && (o = o.join(" "));
    var n = goog.a11y.aria.getAriaAttributeName_(t);
    "" === o || void 0 == o ? (o = goog.a11y.aria.datatables.getDefaultValuesMap(), t in o ? e.setAttribute(n, o[t]) : e.removeAttribute(n)) : e.setAttribute(n, o)
}, goog.a11y.aria.toggleState = function(e, t) {
    var o = goog.a11y.aria.getState(e, t);
    goog.string.isEmptyOrWhitespace(goog.string.makeSafe(o)) || "true" == o || "false" == o ? goog.a11y.aria.setState(e, t, "true" == o ? "false" : "true") : goog.a11y.aria.removeState(e, t)
}, goog.a11y.aria.removeState = function(e, t) {
    e.removeAttribute(goog.a11y.aria.getAriaAttributeName_(t))
}, goog.a11y.aria.getState = function(e, t) {
    var o = e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));
    return null == o || void 0 == o ? "" : String(o)
}, goog.a11y.aria.getActiveDescendant = function(e) {
    var t = goog.a11y.aria.getState(e, goog.a11y.aria.State.ACTIVEDESCENDANT);
    return goog.dom.getOwnerDocument(e).getElementById(t)
}, goog.a11y.aria.setActiveDescendant = function(e, t) {
    var o = "";
    t && (o = t.id, goog.asserts.assert(o, "The active element should have an id.")), goog.a11y.aria.setState(e, goog.a11y.aria.State.ACTIVEDESCENDANT, o)
}, goog.a11y.aria.getLabel = function(e) {
    return goog.a11y.aria.getState(e, goog.a11y.aria.State.LABEL)
}, goog.a11y.aria.setLabel = function(e, t) {
    goog.a11y.aria.setState(e, goog.a11y.aria.State.LABEL, t)
}, goog.a11y.aria.assertRoleIsSetInternalUtil = function(e, t) {
    if (!goog.array.contains(goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_, e.tagName)) {
        var o = goog.a11y.aria.getRole(e);
        goog.asserts.assert(null != o, "The element ARIA role cannot be null."), goog.asserts.assert(goog.array.contains(t, o), 'Non existing or incorrect role set for element.The role set is "' + o + '". The role should be any of "' + t + '". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.')
    }
}, goog.a11y.aria.getStateBoolean = function(e, t) {
    var o = e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));
    return goog.asserts.assert(goog.isBoolean(o) || null == o || "true" == o || "false" == o), null == o ? o : goog.isBoolean(o) ? o : "true" == o
}, goog.a11y.aria.getStateNumber = function(e, t) {
    var o = e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));
    return goog.asserts.assert(!(null != o && isNaN(Number(o)) || goog.isBoolean(o))), null == o ? null : Number(o)
}, goog.a11y.aria.getStateString = function(e, t) {
    var o = e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));
    return goog.asserts.assert((null == o || goog.isString(o)) && ("" == o || isNaN(Number(o))) && "true" != o && "false" != o), null == o || "" == o ? null : o
}, goog.a11y.aria.getStringArrayStateInternalUtil = function(e, t) {
    var o = e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));
    return goog.a11y.aria.splitStringOnWhitespace_(o)
}, goog.a11y.aria.hasState = function(e, t) {
    return e.hasAttribute(goog.a11y.aria.getAriaAttributeName_(t))
}, goog.a11y.aria.isContainerRole = function(e) {
    return e = goog.a11y.aria.getRole(e), goog.array.contains(goog.a11y.aria.CONTAINER_ROLES_, e)
}, goog.a11y.aria.splitStringOnWhitespace_ = function(e) {
    return e ? e.split(/\s+/) : []
}, goog.a11y.aria.getAriaAttributeName_ = function(e) {
    return goog.asserts.ENABLE_ASSERTS && (goog.asserts.assert(e, "ARIA attribute cannot be empty."), goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State, e), "No such ARIA attribute " + e)), goog.a11y.aria.ARIA_PREFIX_ + e
}, goog.events.KeyCodes = {
    WIN_KEY_FF_LINUX: 0,
    MAC_ENTER: 3,
    BACKSPACE: 8,
    TAB: 9,
    NUM_CENTER: 12,
    ENTER: 13,
    SHIFT: 16,
    CTRL: 17,
    ALT: 18,
    PAUSE: 19,
    CAPS_LOCK: 20,
    ESC: 27,
    SPACE: 32,
    PAGE_UP: 33,
    PAGE_DOWN: 34,
    END: 35,
    HOME: 36,
    LEFT: 37,
    UP: 38,
    RIGHT: 39,
    DOWN: 40,
    PLUS_SIGN: 43,
    PRINT_SCREEN: 44,
    INSERT: 45,
    DELETE: 46,
    ZERO: 48,
    ONE: 49,
    TWO: 50,
    THREE: 51,
    FOUR: 52,
    FIVE: 53,
    SIX: 54,
    SEVEN: 55,
    EIGHT: 56,
    NINE: 57,
    FF_SEMICOLON: 59,
    FF_EQUALS: 61,
    FF_DASH: 173,
    QUESTION_MARK: 63,
    AT_SIGN: 64,
    A: 65,
    B: 66,
    C: 67,
    D: 68,
    E: 69,
    F: 70,
    G: 71,
    H: 72,
    I: 73,
    J: 74,
    K: 75,
    L: 76,
    M: 77,
    N: 78,
    O: 79,
    P: 80,
    Q: 81,
    R: 82,
    S: 83,
    T: 84,
    U: 85,
    V: 86,
    W: 87,
    X: 88,
    Y: 89,
    Z: 90,
    META: 91,
    WIN_KEY_RIGHT: 92,
    CONTEXT_MENU: 93,
    NUM_ZERO: 96,
    NUM_ONE: 97,
    NUM_TWO: 98,
    NUM_THREE: 99,
    NUM_FOUR: 100,
    NUM_FIVE: 101,
    NUM_SIX: 102,
    NUM_SEVEN: 103,
    NUM_EIGHT: 104,
    NUM_NINE: 105,
    NUM_MULTIPLY: 106,
    NUM_PLUS: 107,
    NUM_MINUS: 109,
    NUM_PERIOD: 110,
    NUM_DIVISION: 111,
    F1: 112,
    F2: 113,
    F3: 114,
    F4: 115,
    F5: 116,
    F6: 117,
    F7: 118,
    F8: 119,
    F9: 120,
    F10: 121,
    F11: 122,
    F12: 123,
    NUMLOCK: 144,
    SCROLL_LOCK: 145,
    FIRST_MEDIA_KEY: 166,
    LAST_MEDIA_KEY: 183,
    SEMICOLON: 186,
    DASH: 189,
    EQUALS: 187,
    COMMA: 188,
    PERIOD: 190,
    SLASH: 191,
    APOSTROPHE: 192,
    TILDE: 192,
    SINGLE_QUOTE: 222,
    OPEN_SQUARE_BRACKET: 219,
    BACKSLASH: 220,
    CLOSE_SQUARE_BRACKET: 221,
    WIN_KEY: 224,
    MAC_FF_META: 224,
    MAC_WK_CMD_LEFT: 91,
    MAC_WK_CMD_RIGHT: 93,
    WIN_IME: 229,
    VK_NONAME: 252,
    PHANTOM: 255
}, goog.events.KeyCodes.isTextModifyingKeyEvent = function(e) {
    if (e.altKey && !e.ctrlKey || e.metaKey || e.keyCode >= goog.events.KeyCodes.F1 && e.keyCode <= goog.events.KeyCodes.F12) return !1;
    switch (e.keyCode) {
        case goog.events.KeyCodes.ALT:
        case goog.events.KeyCodes.CAPS_LOCK:
        case goog.events.KeyCodes.CONTEXT_MENU:
        case goog.events.KeyCodes.CTRL:
        case goog.events.KeyCodes.DOWN:
        case goog.events.KeyCodes.END:
        case goog.events.KeyCodes.ESC:
        case goog.events.KeyCodes.HOME:
        case goog.events.KeyCodes.INSERT:
        case goog.events.KeyCodes.LEFT:
        case goog.events.KeyCodes.MAC_FF_META:
        case goog.events.KeyCodes.META:
        case goog.events.KeyCodes.NUMLOCK:
        case goog.events.KeyCodes.NUM_CENTER:
        case goog.events.KeyCodes.PAGE_DOWN:
        case goog.events.KeyCodes.PAGE_UP:
        case goog.events.KeyCodes.PAUSE:
        case goog.events.KeyCodes.PHANTOM:
        case goog.events.KeyCodes.PRINT_SCREEN:
        case goog.events.KeyCodes.RIGHT:
        case goog.events.KeyCodes.SCROLL_LOCK:
        case goog.events.KeyCodes.SHIFT:
        case goog.events.KeyCodes.UP:
        case goog.events.KeyCodes.VK_NONAME:
        case goog.events.KeyCodes.WIN_KEY:
        case goog.events.KeyCodes.WIN_KEY_RIGHT:
            return !1;
        case goog.events.KeyCodes.WIN_KEY_FF_LINUX:
            return !goog.userAgent.GECKO;
        default:
            return e.keyCode < goog.events.KeyCodes.FIRST_MEDIA_KEY || e.keyCode > goog.events.KeyCodes.LAST_MEDIA_KEY
    }
}, goog.events.KeyCodes.firesKeyPressEvent = function(e, t, o, n, i) {
    if (!(goog.userAgent.IE || goog.userAgent.EDGE || goog.userAgent.WEBKIT && goog.userAgent.isVersionOrHigher("525"))) return !0;
    if (goog.userAgent.MAC && i) return goog.events.KeyCodes.isCharacterKey(e);
    if (i && !n) return !1;
    if (goog.isNumber(t) && (t = goog.events.KeyCodes.normalizeKeyCode(t)), !o && (t == goog.events.KeyCodes.CTRL || t == goog.events.KeyCodes.ALT || goog.userAgent.MAC && t == goog.events.KeyCodes.META)) return !1;
    if ((goog.userAgent.WEBKIT || goog.userAgent.EDGE) && n && o) switch (e) {
        case goog.events.KeyCodes.BACKSLASH:
        case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:
        case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:
        case goog.events.KeyCodes.TILDE:
        case goog.events.KeyCodes.SEMICOLON:
        case goog.events.KeyCodes.DASH:
        case goog.events.KeyCodes.EQUALS:
        case goog.events.KeyCodes.COMMA:
        case goog.events.KeyCodes.PERIOD:
        case goog.events.KeyCodes.SLASH:
        case goog.events.KeyCodes.APOSTROPHE:
        case goog.events.KeyCodes.SINGLE_QUOTE:
            return !1
    }
    if (goog.userAgent.IE && n && t == e) return !1;
    switch (e) {
        case goog.events.KeyCodes.ENTER:
            return !0;
        case goog.events.KeyCodes.ESC:
            return !(goog.userAgent.WEBKIT || goog.userAgent.EDGE)
    }
    return goog.events.KeyCodes.isCharacterKey(e)
}, goog.events.KeyCodes.isCharacterKey = function(e) {
    if (e >= goog.events.KeyCodes.ZERO && e <= goog.events.KeyCodes.NINE || e >= goog.events.KeyCodes.NUM_ZERO && e <= goog.events.KeyCodes.NUM_MULTIPLY || e >= goog.events.KeyCodes.A && e <= goog.events.KeyCodes.Z || (goog.userAgent.WEBKIT || goog.userAgent.EDGE) && 0 == e) return !0;
    switch (e) {
        case goog.events.KeyCodes.SPACE:
        case goog.events.KeyCodes.PLUS_SIGN:
        case goog.events.KeyCodes.QUESTION_MARK:
        case goog.events.KeyCodes.AT_SIGN:
        case goog.events.KeyCodes.NUM_PLUS:
        case goog.events.KeyCodes.NUM_MINUS:
        case goog.events.KeyCodes.NUM_PERIOD:
        case goog.events.KeyCodes.NUM_DIVISION:
        case goog.events.KeyCodes.SEMICOLON:
        case goog.events.KeyCodes.FF_SEMICOLON:
        case goog.events.KeyCodes.DASH:
        case goog.events.KeyCodes.EQUALS:
        case goog.events.KeyCodes.FF_EQUALS:
        case goog.events.KeyCodes.COMMA:
        case goog.events.KeyCodes.PERIOD:
        case goog.events.KeyCodes.SLASH:
        case goog.events.KeyCodes.APOSTROPHE:
        case goog.events.KeyCodes.SINGLE_QUOTE:
        case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:
        case goog.events.KeyCodes.BACKSLASH:
        case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:
            return !0;
        default:
            return !1
    }
}, goog.events.KeyCodes.normalizeKeyCode = function(e) {
    return goog.userAgent.GECKO ? goog.events.KeyCodes.normalizeGeckoKeyCode(e) : goog.userAgent.MAC && goog.userAgent.WEBKIT ? goog.events.KeyCodes.normalizeMacWebKitKeyCode(e) : e
}, goog.events.KeyCodes.normalizeGeckoKeyCode = function(e) {
    switch (e) {
        case goog.events.KeyCodes.FF_EQUALS:
            return goog.events.KeyCodes.EQUALS;
        case goog.events.KeyCodes.FF_SEMICOLON:
            return goog.events.KeyCodes.SEMICOLON;
        case goog.events.KeyCodes.FF_DASH:
            return goog.events.KeyCodes.DASH;
        case goog.events.KeyCodes.MAC_FF_META:
            return goog.events.KeyCodes.META;
        case goog.events.KeyCodes.WIN_KEY_FF_LINUX:
            return goog.events.KeyCodes.WIN_KEY;
        default:
            return e
    }
}, goog.events.KeyCodes.normalizeMacWebKitKeyCode = function(e) {
    switch (e) {
        case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:
            return goog.events.KeyCodes.META;
        default:
            return e
    }
}, goog.events.KeyHandler = function(e, t) {
    goog.events.EventTarget.call(this), e && this.attach(e, t)
}, goog.inherits(goog.events.KeyHandler, goog.events.EventTarget), goog.events.KeyHandler.prototype.element_ = null, goog.events.KeyHandler.prototype.keyPressKey_ = null, goog.events.KeyHandler.prototype.keyDownKey_ = null, goog.events.KeyHandler.prototype.keyUpKey_ = null, goog.events.KeyHandler.prototype.lastKey_ = -1, goog.events.KeyHandler.prototype.keyCode_ = -1, goog.events.KeyHandler.prototype.altKey_ = !1, goog.events.KeyHandler.EventType = {
    KEY: "key"
}, goog.events.KeyHandler.safariKey_ = {
    3: goog.events.KeyCodes.ENTER,
    12: goog.events.KeyCodes.NUMLOCK,
    63232: goog.events.KeyCodes.UP,
    63233: goog.events.KeyCodes.DOWN,
    63234: goog.events.KeyCodes.LEFT,
    63235: goog.events.KeyCodes.RIGHT,
    63236: goog.events.KeyCodes.F1,
    63237: goog.events.KeyCodes.F2,
    63238: goog.events.KeyCodes.F3,
    63239: goog.events.KeyCodes.F4,
    63240: goog.events.KeyCodes.F5,
    63241: goog.events.KeyCodes.F6,
    63242: goog.events.KeyCodes.F7,
    63243: goog.events.KeyCodes.F8,
    63244: goog.events.KeyCodes.F9,
    63245: goog.events.KeyCodes.F10,
    63246: goog.events.KeyCodes.F11,
    63247: goog.events.KeyCodes.F12,
    63248: goog.events.KeyCodes.PRINT_SCREEN,
    63272: goog.events.KeyCodes.DELETE,
    63273: goog.events.KeyCodes.HOME,
    63275: goog.events.KeyCodes.END,
    63276: goog.events.KeyCodes.PAGE_UP,
    63277: goog.events.KeyCodes.PAGE_DOWN,
    63289: goog.events.KeyCodes.NUMLOCK,
    63302: goog.events.KeyCodes.INSERT
}, goog.events.KeyHandler.keyIdentifier_ = {
    Up: goog.events.KeyCodes.UP,
    Down: goog.events.KeyCodes.DOWN,
    Left: goog.events.KeyCodes.LEFT,
    Right: goog.events.KeyCodes.RIGHT,
    Enter: goog.events.KeyCodes.ENTER,
    F1: goog.events.KeyCodes.F1,
    F2: goog.events.KeyCodes.F2,
    F3: goog.events.KeyCodes.F3,
    F4: goog.events.KeyCodes.F4,
    F5: goog.events.KeyCodes.F5,
    F6: goog.events.KeyCodes.F6,
    F7: goog.events.KeyCodes.F7,
    F8: goog.events.KeyCodes.F8,
    F9: goog.events.KeyCodes.F9,
    F10: goog.events.KeyCodes.F10,
    F11: goog.events.KeyCodes.F11,
    F12: goog.events.KeyCodes.F12,
    "U+007F": goog.events.KeyCodes.DELETE,
    Home: goog.events.KeyCodes.HOME,
    End: goog.events.KeyCodes.END,
    PageUp: goog.events.KeyCodes.PAGE_UP,
    PageDown: goog.events.KeyCodes.PAGE_DOWN,
    Insert: goog.events.KeyCodes.INSERT
}, goog.events.KeyHandler.USES_KEYDOWN_ = goog.userAgent.IE || goog.userAgent.EDGE || goog.userAgent.WEBKIT && goog.userAgent.isVersionOrHigher("525"), goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_ = goog.userAgent.MAC && goog.userAgent.GECKO, goog.events.KeyHandler.prototype.handleKeyDown_ = function(e) {
    (goog.userAgent.WEBKIT || goog.userAgent.EDGE) && (this.lastKey_ == goog.events.KeyCodes.CTRL && !e.ctrlKey || this.lastKey_ == goog.events.KeyCodes.ALT && !e.altKey || goog.userAgent.MAC && this.lastKey_ == goog.events.KeyCodes.META && !e.metaKey) && this.resetState(), -1 == this.lastKey_ && (e.ctrlKey && e.keyCode != goog.events.KeyCodes.CTRL ? this.lastKey_ = goog.events.KeyCodes.CTRL : e.altKey && e.keyCode != goog.events.KeyCodes.ALT ? this.lastKey_ = goog.events.KeyCodes.ALT : e.metaKey && e.keyCode != goog.events.KeyCodes.META && (this.lastKey_ = goog.events.KeyCodes.META)), goog.events.KeyHandler.USES_KEYDOWN_ && !goog.events.KeyCodes.firesKeyPressEvent(e.keyCode, this.lastKey_, e.shiftKey, e.ctrlKey, e.altKey) ? this.handleEvent(e) : (this.keyCode_ = goog.events.KeyCodes.normalizeKeyCode(e.keyCode), goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_ && (this.altKey_ = e.altKey))
}, goog.events.KeyHandler.prototype.resetState = function() {
    this.keyCode_ = this.lastKey_ = -1
}, goog.events.KeyHandler.prototype.handleKeyup_ = function(e) {
    this.resetState(), this.altKey_ = e.altKey
}, goog.events.KeyHandler.prototype.handleEvent = function(e) {
    var t, o, n = e.getBrowserEvent(),
        i = n.altKey;
    goog.userAgent.IE && e.type == goog.events.EventType.KEYPRESS ? (t = this.keyCode_, o = t != goog.events.KeyCodes.ENTER && t != goog.events.KeyCodes.ESC ? n.keyCode : 0) : (goog.userAgent.WEBKIT || goog.userAgent.EDGE) && e.type == goog.events.EventType.KEYPRESS ? (t = this.keyCode_, o = 0 <= n.charCode && 63232 > n.charCode && goog.events.KeyCodes.isCharacterKey(t) ? n.charCode : 0) : goog.userAgent.OPERA && !goog.userAgent.WEBKIT ? (t = this.keyCode_, o = goog.events.KeyCodes.isCharacterKey(t) ? n.keyCode : 0) : (t = n.keyCode || this.keyCode_, o = n.charCode || 0, goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_ && (i = this.altKey_), goog.userAgent.MAC && o == goog.events.KeyCodes.QUESTION_MARK && t == goog.events.KeyCodes.WIN_KEY && (t = goog.events.KeyCodes.SLASH));
    var r = t = goog.events.KeyCodes.normalizeKeyCode(t),
        s = n.keyIdentifier;
    t ? t >= 63232 && t in goog.events.KeyHandler.safariKey_ ? r = goog.events.KeyHandler.safariKey_[t] : 25 == t && e.shiftKey && (r = 9) : s && s in goog.events.KeyHandler.keyIdentifier_ && (r = goog.events.KeyHandler.keyIdentifier_[s]), e = r == this.lastKey_, this.lastKey_ = r, n = new goog.events.KeyEvent(r, o, e, n), n.altKey = i, this.dispatchEvent(n)
}, goog.events.KeyHandler.prototype.getElement = function() {
    return this.element_
}, goog.events.KeyHandler.prototype.attach = function(e, t) {
    this.keyUpKey_ && this.detach(), this.element_ = e, this.keyPressKey_ = goog.events.listen(this.element_, goog.events.EventType.KEYPRESS, this, t), this.keyDownKey_ = goog.events.listen(this.element_, goog.events.EventType.KEYDOWN, this.handleKeyDown_, t, this), this.keyUpKey_ = goog.events.listen(this.element_, goog.events.EventType.KEYUP, this.handleKeyup_, t, this)
}, goog.events.KeyHandler.prototype.detach = function() {
    this.keyPressKey_ && (goog.events.unlistenByKey(this.keyPressKey_), goog.events.unlistenByKey(this.keyDownKey_), goog.events.unlistenByKey(this.keyUpKey_), this.keyUpKey_ = this.keyDownKey_ = this.keyPressKey_ = null), this.element_ = null, this.keyCode_ = this.lastKey_ = -1
}, goog.events.KeyHandler.prototype.disposeInternal = function() {
    goog.events.KeyHandler.superClass_.disposeInternal.call(this), this.detach()
}, goog.events.KeyEvent = function(e, t, o, n) {
    goog.events.BrowserEvent.call(this, n), this.type = goog.events.KeyHandler.EventType.KEY, this.keyCode = e, this.charCode = t, this.repeat = o
}, goog.inherits(goog.events.KeyEvent, goog.events.BrowserEvent), goog.dom.classlist = {}, goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST = !1, goog.dom.classlist.get = function(e) {
    return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || e.classList ? e.classList : (e = e.className, goog.isString(e) && e.match(/\S+/g) || [])
}, goog.dom.classlist.set = function(e, t) {
    e.className = t
}, goog.dom.classlist.contains = function(e, t) {
    return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || e.classList ? e.classList.contains(t) : goog.array.contains(goog.dom.classlist.get(e), t)
}, goog.dom.classlist.add = function(e, t) {
    goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || e.classList ? e.classList.add(t) : goog.dom.classlist.contains(e, t) || (e.className += 0 < e.className.length ? " " + t : t)
}, goog.dom.classlist.addAll = function(e, t) {
    if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || e.classList) goog.array.forEach(t, function(t) {
        goog.dom.classlist.add(e, t)
    });
    else {
        var o = {};
        goog.array.forEach(goog.dom.classlist.get(e), function(e) {
            o[e] = !0
        }), goog.array.forEach(t, function(e) {
            o[e] = !0
        }), e.className = "";
        for (var n in o) e.className += 0 < e.className.length ? " " + n : n
    }
}, goog.dom.classlist.remove = function(e, t) {
    goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || e.classList ? e.classList.remove(t) : goog.dom.classlist.contains(e, t) && (e.className = goog.array.filter(goog.dom.classlist.get(e), function(e) {
        return e != t
    }).join(" "))
}, goog.dom.classlist.removeAll = function(e, t) {
    goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || e.classList ? goog.array.forEach(t, function(t) {
        goog.dom.classlist.remove(e, t)
    }) : e.className = goog.array.filter(goog.dom.classlist.get(e), function(e) {
        return !goog.array.contains(t, e)
    }).join(" ")
}, goog.dom.classlist.enable = function(e, t, o) {
    o ? goog.dom.classlist.add(e, t) : goog.dom.classlist.remove(e, t)
}, goog.dom.classlist.enableAll = function(e, t, o) {
    (o ? goog.dom.classlist.addAll : goog.dom.classlist.removeAll)(e, t)
}, goog.dom.classlist.swap = function(e, t, o) {
    return goog.dom.classlist.contains(e, t) ? (goog.dom.classlist.remove(e, t), goog.dom.classlist.add(e, o), !0) : !1
}, goog.dom.classlist.toggle = function(e, t) {
    var o = !goog.dom.classlist.contains(e, t);
    return goog.dom.classlist.enable(e, t, o), o
}, goog.dom.classlist.addRemove = function(e, t, o) {
    goog.dom.classlist.remove(e, t), goog.dom.classlist.add(e, o)
}, goog.ui.registry = {}, goog.ui.registry.getDefaultRenderer = function(e) {
    for (var t; e && (t = goog.getUid(e), !(t = goog.ui.registry.defaultRenderers_[t]));) e = e.superClass_ ? e.superClass_.constructor : null;
    return t ? goog.isFunction(t.getInstance) ? t.getInstance() : new t : null
}, goog.ui.registry.setDefaultRenderer = function(e, t) {
    if (!goog.isFunction(e)) throw Error("Invalid component class " + e);
    if (!goog.isFunction(t)) throw Error("Invalid renderer class " + t);
    var o = goog.getUid(e);
    goog.ui.registry.defaultRenderers_[o] = t
}, goog.ui.registry.getDecoratorByClassName = function(e) {
    return e in goog.ui.registry.decoratorFunctions_ ? goog.ui.registry.decoratorFunctions_[e]() : null
}, goog.ui.registry.setDecoratorByClassName = function(e, t) {
    if (!e) throw Error("Invalid class name " + e);
    if (!goog.isFunction(t)) throw Error("Invalid decorator function " + t);
    goog.ui.registry.decoratorFunctions_[e] = t
}, goog.ui.registry.getDecorator = function(e) {
    goog.asserts.assert(e);
    for (var t = goog.dom.classlist.get(e), o = 0, n = t.length; n > o; o++)
        if (e = goog.ui.registry.getDecoratorByClassName(t[o])) return e;
    return null
}, goog.ui.registry.reset = function() {
    goog.ui.registry.defaultRenderers_ = {}, goog.ui.registry.decoratorFunctions_ = {}
}, goog.ui.registry.defaultRenderers_ = {}, goog.ui.registry.decoratorFunctions_ = {}, goog.ui.ContainerRenderer = function(e) {
    this.ariaRole_ = e
}, goog.addSingletonGetter(goog.ui.ContainerRenderer), goog.ui.ContainerRenderer.getCustomRenderer = function(e, t) {
    var o = new e;
    return o.getCssClass = function() {
        return t
    }, o
}, goog.ui.ContainerRenderer.CSS_CLASS = "goog-container", goog.ui.ContainerRenderer.prototype.getAriaRole = function() {
    return this.ariaRole_
}, goog.ui.ContainerRenderer.prototype.enableTabIndex = function(e, t) {
    e && (e.tabIndex = t ? 0 : -1)
}, goog.ui.ContainerRenderer.prototype.createDom = function(e) {
    return e.getDomHelper().createDom(goog.dom.TagName.DIV, this.getClassNames(e).join(" "))
}, goog.ui.ContainerRenderer.prototype.getContentElement = function(e) {
    return e
}, goog.ui.ContainerRenderer.prototype.canDecorate = function(e) {
    return "DIV" == e.tagName
}, goog.ui.ContainerRenderer.prototype.decorate = function(e, t) {
    t.id && e.setId(t.id);
    var o = this.getCssClass(),
        n = !1,
        i = goog.dom.classlist.get(t);
    return i && goog.array.forEach(i, function(t) {
        t == o ? n = !0 : t && this.setStateFromClassName(e, t, o)
    }, this), n || goog.dom.classlist.add(t, o), this.decorateChildren(e, this.getContentElement(t)), t
}, goog.ui.ContainerRenderer.prototype.setStateFromClassName = function(e, t, o) {
    t == o + "-disabled" ? e.setEnabled(!1) : t == o + "-horizontal" ? e.setOrientation(goog.ui.Container.Orientation.HORIZONTAL) : t == o + "-vertical" && e.setOrientation(goog.ui.Container.Orientation.VERTICAL)
}, goog.ui.ContainerRenderer.prototype.decorateChildren = function(e, t, o) {
    if (t) {
        o = o || t.firstChild;
        for (var n; o && o.parentNode == t;) {
            if (n = o.nextSibling, o.nodeType == goog.dom.NodeType.ELEMENT) {
                var i = this.getDecoratorForChild(o);
                i && (i.setElementInternal(o), e.isEnabled() || i.setEnabled(!1), e.addChild(i), i.decorate(o))
            } else o.nodeValue && "" != goog.string.trim(o.nodeValue) || t.removeChild(o);
            o = n
        }
    }
}, goog.ui.ContainerRenderer.prototype.getDecoratorForChild = function(e) {
    return goog.ui.registry.getDecorator(e)
}, goog.ui.ContainerRenderer.prototype.initializeDom = function(e) {
    e = e.getElement(), goog.asserts.assert(e, "The container DOM element cannot be null."), goog.style.setUnselectable(e, !0, goog.userAgent.GECKO), goog.userAgent.IE && (e.hideFocus = !0);
    var t = this.getAriaRole();
    t && goog.a11y.aria.setRole(e, t)
}, goog.ui.ContainerRenderer.prototype.getKeyEventTarget = function(e) {
    return e.getElement()
}, goog.ui.ContainerRenderer.prototype.getCssClass = function() {
    return goog.ui.ContainerRenderer.CSS_CLASS
}, goog.ui.ContainerRenderer.prototype.getClassNames = function(e) {
    var t = this.getCssClass(),
        o = e.getOrientation() == goog.ui.Container.Orientation.HORIZONTAL,
        o = [t, o ? t + "-horizontal" : t + "-vertical"];
    return e.isEnabled() || o.push(t + "-disabled"), o
}, goog.ui.ContainerRenderer.prototype.getDefaultOrientation = function() {
    return goog.ui.Container.Orientation.VERTICAL
}, goog.ui.ControlRenderer = function() {}, goog.addSingletonGetter(goog.ui.ControlRenderer), goog.tagUnsealableClass(goog.ui.ControlRenderer), goog.ui.ControlRenderer.getCustomRenderer = function(e, t) {
    var o = new e;
    return o.getCssClass = function() {
        return t
    }, o
}, goog.ui.ControlRenderer.CSS_CLASS = "goog-control", goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS = [], goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_ = goog.object.create(goog.a11y.aria.Role.BUTTON, goog.a11y.aria.State.PRESSED, goog.a11y.aria.Role.CHECKBOX, goog.a11y.aria.State.CHECKED, goog.a11y.aria.Role.MENU_ITEM, goog.a11y.aria.State.SELECTED, goog.a11y.aria.Role.MENU_ITEM_CHECKBOX, goog.a11y.aria.State.CHECKED, goog.a11y.aria.Role.MENU_ITEM_RADIO, goog.a11y.aria.State.CHECKED, goog.a11y.aria.Role.RADIO, goog.a11y.aria.State.CHECKED, goog.a11y.aria.Role.TAB, goog.a11y.aria.State.SELECTED, goog.a11y.aria.Role.TREEITEM, goog.a11y.aria.State.SELECTED), goog.ui.ControlRenderer.prototype.getAriaRole = function() {}, goog.ui.ControlRenderer.prototype.createDom = function(e) {
    return e.getDomHelper().createDom(goog.dom.TagName.DIV, this.getClassNames(e).join(" "), e.getContent())
}, goog.ui.ControlRenderer.prototype.getContentElement = function(e) {
    return e
}, goog.ui.ControlRenderer.prototype.enableClassName = function(e, t, o) {
    if (e = e.getElement ? e.getElement() : e) {
        var n = [t];
        goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("7") && (n = this.getAppliedCombinedClassNames_(goog.dom.classlist.get(e), t), n.push(t)), goog.dom.classlist.enableAll(e, n, o)
    }
}, goog.ui.ControlRenderer.prototype.enableExtraClassName = function(e, t, o) {
    this.enableClassName(e, t, o)
}, goog.ui.ControlRenderer.prototype.canDecorate = function(e) {
    return !0
}, goog.ui.ControlRenderer.prototype.decorate = function(e, t) {
    t.id && e.setId(t.id);
    var o = this.getContentElement(t);
    o && o.firstChild ? e.setContentInternal(o.firstChild.nextSibling ? goog.array.clone(o.childNodes) : o.firstChild) : e.setContentInternal(null);
    var n = 0,
        i = this.getCssClass(),
        r = this.getStructuralCssClass(),
        s = !1,
        a = !1,
        l = !1,
        c = goog.array.toArray(goog.dom.classlist.get(t));
    goog.array.forEach(c, function(e) {
        s || e != i ? a || e != r ? n |= this.getStateFromClass(e) : a = !0 : (s = !0, r == i && (a = !0)), this.getStateFromClass(e) == goog.ui.Component.State.DISABLED && (goog.asserts.assertElement(o), goog.dom.isFocusableTabIndex(o) && goog.dom.setFocusableTabIndex(o, !1))
    }, this), e.setStateInternal(n), s || (c.push(i), r == i && (a = !0)), a || c.push(r);
    var u = e.getExtraClassNames();
    if (u && c.push.apply(c, u), goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("7")) {
        var g = this.getAppliedCombinedClassNames_(c);
        0 < g.length && (c.push.apply(c, g), l = !0)
    }
    return s && a && !u && !l || goog.dom.classlist.set(t, c.join(" ")), t
}, goog.ui.ControlRenderer.prototype.initializeDom = function(e) {
    e.isRightToLeft() && this.setRightToLeft(e.getElement(), !0), e.isEnabled() && this.setFocusable(e, e.isVisible())
}, goog.ui.ControlRenderer.prototype.setAriaRole = function(e, t) {
    var o = t || this.getAriaRole();
    if (o) {
        goog.asserts.assert(e, "The element passed as a first parameter cannot be null.");
        var n = goog.a11y.aria.getRole(e);
        o != n && goog.a11y.aria.setRole(e, o)
    }
}, goog.ui.ControlRenderer.prototype.setAriaStates = function(e, t) {
    goog.asserts.assert(e), goog.asserts.assert(t);
    var o = e.getAriaLabel();
    goog.isDefAndNotNull(o) && this.setAriaLabel(t, o), e.isVisible() || goog.a11y.aria.setState(t, goog.a11y.aria.State.HIDDEN, !e.isVisible()), e.isEnabled() || this.updateAriaState(t, goog.ui.Component.State.DISABLED, !e.isEnabled()), e.isSupportedState(goog.ui.Component.State.SELECTED) && this.updateAriaState(t, goog.ui.Component.State.SELECTED, e.isSelected()), e.isSupportedState(goog.ui.Component.State.CHECKED) && this.updateAriaState(t, goog.ui.Component.State.CHECKED, e.isChecked()), e.isSupportedState(goog.ui.Component.State.OPENED) && this.updateAriaState(t, goog.ui.Component.State.OPENED, e.isOpen())
}, goog.ui.ControlRenderer.prototype.setAriaLabel = function(e, t) {
    goog.a11y.aria.setLabel(e, t)
}, goog.ui.ControlRenderer.prototype.setAllowTextSelection = function(e, t) {
    goog.style.setUnselectable(e, !t, !goog.userAgent.IE && !goog.userAgent.OPERA)
}, goog.ui.ControlRenderer.prototype.setRightToLeft = function(e, t) {
    this.enableClassName(e, this.getStructuralCssClass() + "-rtl", t)
}, goog.ui.ControlRenderer.prototype.isFocusable = function(e) {
    var t;
    return e.isSupportedState(goog.ui.Component.State.FOCUSED) && (t = e.getKeyEventTarget()) ? goog.dom.isFocusableTabIndex(t) : !1
}, goog.ui.ControlRenderer.prototype.setFocusable = function(e, t) {
    var o;
    if (e.isSupportedState(goog.ui.Component.State.FOCUSED) && (o = e.getKeyEventTarget())) {
        if (!t && e.isFocused()) {
            try {
                o.blur()
            } catch (n) {}
            e.isFocused() && e.handleBlur(null)
        }
        goog.dom.isFocusableTabIndex(o) != t && goog.dom.setFocusableTabIndex(o, t)
    }
}, goog.ui.ControlRenderer.prototype.setVisible = function(e, t) {
    goog.style.setElementShown(e, t), e && goog.a11y.aria.setState(e, goog.a11y.aria.State.HIDDEN, !t)
}, goog.ui.ControlRenderer.prototype.setState = function(e, t, o) {
    var n = e.getElement();
    if (n) {
        var i = this.getClassForState(t);
        i && this.enableClassName(e, i, o), this.updateAriaState(n, t, o)
    }
}, goog.ui.ControlRenderer.prototype.updateAriaState = function(e, t, o) {
    goog.ui.ControlRenderer.ariaAttributeMap_ || (goog.ui.ControlRenderer.ariaAttributeMap_ = goog.object.create(goog.ui.Component.State.DISABLED, goog.a11y.aria.State.DISABLED, goog.ui.Component.State.SELECTED, goog.a11y.aria.State.SELECTED, goog.ui.Component.State.CHECKED, goog.a11y.aria.State.CHECKED, goog.ui.Component.State.OPENED, goog.a11y.aria.State.EXPANDED)), goog.asserts.assert(e, "The element passed as a first parameter cannot be null."), (t = goog.ui.ControlRenderer.getAriaStateForAriaRole_(e, goog.ui.ControlRenderer.ariaAttributeMap_[t])) && goog.a11y.aria.setState(e, t, o)
}, goog.ui.ControlRenderer.getAriaStateForAriaRole_ = function(e, t) {
    var o = goog.a11y.aria.getRole(e);
    return o ? (o = goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[o] || t, goog.ui.ControlRenderer.isAriaState_(t) ? o : t) : t
}, goog.ui.ControlRenderer.isAriaState_ = function(e) {
    return e == goog.a11y.aria.State.CHECKED || e == goog.a11y.aria.State.SELECTED
}, goog.ui.ControlRenderer.prototype.setContent = function(e, t) {
    var o = this.getContentElement(e);
    if (o && (goog.dom.removeChildren(o), t))
        if (goog.isString(t)) goog.dom.setTextContent(o, t);
        else {
            var n = function(e) {
                if (e) {
                    var t = goog.dom.getOwnerDocument(o);
                    o.appendChild(goog.isString(e) ? t.createTextNode(e) : e)
                }
            };
            goog.isArray(t) ? goog.array.forEach(t, n) : !goog.isArrayLike(t) || "nodeType" in t ? n(t) : goog.array.forEach(goog.array.clone(t), n)
        }
}, goog.ui.ControlRenderer.prototype.getKeyEventTarget = function(e) {
    return e.getElement()
}, goog.ui.ControlRenderer.prototype.getCssClass = function() {
    return goog.ui.ControlRenderer.CSS_CLASS
}, goog.ui.ControlRenderer.prototype.getIe6ClassCombinations = function() {
    return []
}, goog.ui.ControlRenderer.prototype.getStructuralCssClass = function() {
    return this.getCssClass()
}, goog.ui.ControlRenderer.prototype.getClassNames = function(e) {
    var t = this.getCssClass(),
        o = [t],
        n = this.getStructuralCssClass();
    return n != t && o.push(n), t = this.getClassNamesForState(e.getState()), o.push.apply(o, t), (e = e.getExtraClassNames()) && o.push.apply(o, e), goog.userAgent.IE && !goog.userAgent.isVersionOrHigher("7") && o.push.apply(o, this.getAppliedCombinedClassNames_(o)), o
}, goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_ = function(e, t) {
    var o = [];
    return t && (e = goog.array.concat(e, [t])), goog.array.forEach(this.getIe6ClassCombinations(), function(n) {
        !goog.array.every(n, goog.partial(goog.array.contains, e)) || t && !goog.array.contains(n, t) || o.push(n.join("_"))
    }), o
}, goog.ui.ControlRenderer.prototype.getClassNamesForState = function(e) {
    for (var t = []; e;) {
        var o = e & -e;
        t.push(this.getClassForState(o)), e &= ~o
    }
    return t
}, goog.ui.ControlRenderer.prototype.getClassForState = function(e) {
    return this.classByState_ || this.createClassByStateMap_(), this.classByState_[e]
}, goog.ui.ControlRenderer.prototype.getStateFromClass = function(e) {
    return this.stateByClass_ || this.createStateByClassMap_(), e = parseInt(this.stateByClass_[e], 10), isNaN(e) ? 0 : e
}, goog.ui.ControlRenderer.prototype.createClassByStateMap_ = function() {
    var e = this.getStructuralCssClass(),
        t = !goog.string.contains(goog.string.normalizeWhitespace(e), " ");
    goog.asserts.assert(t, "ControlRenderer has an invalid css class: '" + e + "'"), this.classByState_ = goog.object.create(goog.ui.Component.State.DISABLED, e + "-disabled", goog.ui.Component.State.HOVER, e + "-hover", goog.ui.Component.State.ACTIVE, e + "-active", goog.ui.Component.State.SELECTED, e + "-selected", goog.ui.Component.State.CHECKED, e + "-checked", goog.ui.Component.State.FOCUSED, e + "-focused", goog.ui.Component.State.OPENED, e + "-open")
}, goog.ui.ControlRenderer.prototype.createStateByClassMap_ = function() {
    this.classByState_ || this.createClassByStateMap_(), this.stateByClass_ = goog.object.transpose(this.classByState_)
}, goog.ui.Control = function(e, t, o) {
    goog.ui.Component.call(this, o), this.renderer_ = t || goog.ui.registry.getDefaultRenderer(this.constructor), this.setContentInternal(goog.isDef(e) ? e : null), this.ariaLabel_ = null
}, goog.inherits(goog.ui.Control, goog.ui.Component), goog.tagUnsealableClass(goog.ui.Control), goog.ui.Control.registerDecorator = goog.ui.registry.setDecoratorByClassName, goog.ui.Control.getDecorator = goog.ui.registry.getDecorator, goog.ui.Control.prototype.content_ = null, goog.ui.Control.prototype.state_ = 0, goog.ui.Control.prototype.supportedStates_ = goog.ui.Component.State.DISABLED | goog.ui.Component.State.HOVER | goog.ui.Component.State.ACTIVE | goog.ui.Component.State.FOCUSED, goog.ui.Control.prototype.autoStates_ = goog.ui.Component.State.ALL, goog.ui.Control.prototype.statesWithTransitionEvents_ = 0, goog.ui.Control.prototype.visible_ = !0, goog.ui.Control.prototype.extraClassNames_ = null, goog.ui.Control.prototype.handleMouseEvents_ = !0, goog.ui.Control.prototype.allowTextSelection_ = !1, goog.ui.Control.prototype.preferredAriaRole_ = null, goog.ui.Control.prototype.isHandleMouseEvents = function() {
    return this.handleMouseEvents_
}, goog.ui.Control.prototype.setHandleMouseEvents = function(e) {
    this.isInDocument() && e != this.handleMouseEvents_ && this.enableMouseEventHandling_(e), this.handleMouseEvents_ = e
}, goog.ui.Control.prototype.getKeyEventTarget = function() {
    return this.renderer_.getKeyEventTarget(this)
}, goog.ui.Control.prototype.getKeyHandler = function() {
    return this.keyHandler_ || (this.keyHandler_ = new goog.events.KeyHandler)
}, goog.ui.Control.prototype.getRenderer = function() {
    return this.renderer_
}, goog.ui.Control.prototype.setRenderer = function(e) {
    if (this.isInDocument()) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.getElement() && this.setElementInternal(null), this.renderer_ = e
}, goog.ui.Control.prototype.getExtraClassNames = function() {
    return this.extraClassNames_
}, goog.ui.Control.prototype.addClassName = function(e) {
    e && (this.extraClassNames_ ? goog.array.contains(this.extraClassNames_, e) || this.extraClassNames_.push(e) : this.extraClassNames_ = [e], this.renderer_.enableExtraClassName(this, e, !0))
}, goog.ui.Control.prototype.removeClassName = function(e) {
    e && this.extraClassNames_ && goog.array.remove(this.extraClassNames_, e) && (0 == this.extraClassNames_.length && (this.extraClassNames_ = null), this.renderer_.enableExtraClassName(this, e, !1))
}, goog.ui.Control.prototype.enableClassName = function(e, t) {
    t ? this.addClassName(e) : this.removeClassName(e)
}, goog.ui.Control.prototype.createDom = function() {
    var e = this.renderer_.createDom(this);
    this.setElementInternal(e), this.renderer_.setAriaRole(e, this.getPreferredAriaRole()), this.isAllowTextSelection() || this.renderer_.setAllowTextSelection(e, !1), this.isVisible() || this.renderer_.setVisible(e, !1)
}, goog.ui.Control.prototype.getPreferredAriaRole = function() {
    return this.preferredAriaRole_
}, goog.ui.Control.prototype.setPreferredAriaRole = function(e) {
    this.preferredAriaRole_ = e
}, goog.ui.Control.prototype.getAriaLabel = function() {
    return this.ariaLabel_
}, goog.ui.Control.prototype.setAriaLabel = function(e) {
    this.ariaLabel_ = e;
    var t = this.getElement();
    t && this.renderer_.setAriaLabel(t, e)
}, goog.ui.Control.prototype.getContentElement = function() {
    return this.renderer_.getContentElement(this.getElement())
}, goog.ui.Control.prototype.canDecorate = function(e) {
    return this.renderer_.canDecorate(e)
}, goog.ui.Control.prototype.decorateInternal = function(e) {
    e = this.renderer_.decorate(this, e), this.setElementInternal(e), this.renderer_.setAriaRole(e, this.getPreferredAriaRole()), this.isAllowTextSelection() || this.renderer_.setAllowTextSelection(e, !1), this.visible_ = "none" != e.style.display
}, goog.ui.Control.prototype.enterDocument = function() {
    if (goog.ui.Control.superClass_.enterDocument.call(this), this.renderer_.setAriaStates(this, this.getElementStrict()), this.renderer_.initializeDom(this), this.supportedStates_ & ~goog.ui.Component.State.DISABLED && (this.isHandleMouseEvents() && this.enableMouseEventHandling_(!0), this.isSupportedState(goog.ui.Component.State.FOCUSED))) {
        var e = this.getKeyEventTarget();
        if (e) {
            var t = this.getKeyHandler();
            t.attach(e), this.getHandler().listen(t, goog.events.KeyHandler.EventType.KEY, this.handleKeyEvent).listen(e, goog.events.EventType.FOCUS, this.handleFocus).listen(e, goog.events.EventType.BLUR, this.handleBlur)
        }
    }
}, goog.ui.Control.prototype.enableMouseEventHandling_ = function(e) {
    var t = this.getHandler(),
        o = this.getElement();
    e ? (t.listen(o, goog.events.EventType.MOUSEOVER, this.handleMouseOver).listen(o, goog.events.EventType.MOUSEDOWN, this.handleMouseDown).listen(o, goog.events.EventType.MOUSEUP, this.handleMouseUp).listen(o, goog.events.EventType.MOUSEOUT, this.handleMouseOut), this.handleContextMenu != goog.nullFunction && t.listen(o, goog.events.EventType.CONTEXTMENU, this.handleContextMenu), goog.userAgent.IE && (goog.userAgent.isVersionOrHigher(9) || t.listen(o, goog.events.EventType.DBLCLICK, this.handleDblClick), this.ieMouseEventSequenceSimulator_ || (this.ieMouseEventSequenceSimulator_ = new goog.ui.Control.IeMouseEventSequenceSimulator_(this), this.registerDisposable(this.ieMouseEventSequenceSimulator_)))) : (t.unlisten(o, goog.events.EventType.MOUSEOVER, this.handleMouseOver).unlisten(o, goog.events.EventType.MOUSEDOWN, this.handleMouseDown).unlisten(o, goog.events.EventType.MOUSEUP, this.handleMouseUp).unlisten(o, goog.events.EventType.MOUSEOUT, this.handleMouseOut), this.handleContextMenu != goog.nullFunction && t.unlisten(o, goog.events.EventType.CONTEXTMENU, this.handleContextMenu), goog.userAgent.IE && (goog.userAgent.isVersionOrHigher(9) || t.unlisten(o, goog.events.EventType.DBLCLICK, this.handleDblClick), goog.dispose(this.ieMouseEventSequenceSimulator_), this.ieMouseEventSequenceSimulator_ = null))
}, goog.ui.Control.prototype.exitDocument = function() {
    goog.ui.Control.superClass_.exitDocument.call(this), this.keyHandler_ && this.keyHandler_.detach(), this.isVisible() && this.isEnabled() && this.renderer_.setFocusable(this, !1)
}, goog.ui.Control.prototype.disposeInternal = function() {
    goog.ui.Control.superClass_.disposeInternal.call(this), this.keyHandler_ && (this.keyHandler_.dispose(), delete this.keyHandler_), delete this.renderer_, this.ieMouseEventSequenceSimulator_ = this.extraClassNames_ = this.content_ = null
}, goog.ui.Control.prototype.getContent = function() {
    return this.content_
}, goog.ui.Control.prototype.setContent = function(e) {
    this.renderer_.setContent(this.getElement(), e), this.setContentInternal(e)
}, goog.ui.Control.prototype.setContentInternal = function(e) {
    this.content_ = e
}, goog.ui.Control.prototype.getCaption = function() {
    var e = this.getContent();
    return e ? (e = goog.isString(e) ? e : goog.isArray(e) ? goog.array.map(e, goog.dom.getRawTextContent).join("") : goog.dom.getTextContent(e), goog.string.collapseBreakingSpaces(e)) : ""
}, goog.ui.Control.prototype.setCaption = function(e) {
    this.setContent(e)
}, goog.ui.Control.prototype.setRightToLeft = function(e) {
    goog.ui.Control.superClass_.setRightToLeft.call(this, e);
    var t = this.getElement();
    t && this.renderer_.setRightToLeft(t, e)
}, goog.ui.Control.prototype.isAllowTextSelection = function() {
    return this.allowTextSelection_
}, goog.ui.Control.prototype.setAllowTextSelection = function(e) {
    this.allowTextSelection_ = e;
    var t = this.getElement();
    t && this.renderer_.setAllowTextSelection(t, e)
}, goog.ui.Control.prototype.isVisible = function() {
    return this.visible_
}, goog.ui.Control.prototype.setVisible = function(e, t) {
    if (t || this.visible_ != e && this.dispatchEvent(e ? goog.ui.Component.EventType.SHOW : goog.ui.Component.EventType.HIDE)) {
        var o = this.getElement();
        return o && this.renderer_.setVisible(o, e), this.isEnabled() && this.renderer_.setFocusable(this, e), this.visible_ = e, !0
    }
    return !1
}, goog.ui.Control.prototype.isEnabled = function() {
    return !this.hasState(goog.ui.Component.State.DISABLED)
}, goog.ui.Control.prototype.isParentDisabled_ = function() {
    var e = this.getParent();
    return !!e && "function" == typeof e.isEnabled && !e.isEnabled()
}, goog.ui.Control.prototype.setEnabled = function(e) {
    !this.isParentDisabled_() && this.isTransitionAllowed(goog.ui.Component.State.DISABLED, !e) && (e || (this.setActive(!1), this.setHighlighted(!1)), this.isVisible() && this.renderer_.setFocusable(this, e), this.setState(goog.ui.Component.State.DISABLED, !e, !0))
}, goog.ui.Control.prototype.isHighlighted = function() {
    return this.hasState(goog.ui.Component.State.HOVER)
}, goog.ui.Control.prototype.setHighlighted = function(e) {
    this.isTransitionAllowed(goog.ui.Component.State.HOVER, e) && this.setState(goog.ui.Component.State.HOVER, e)
}, goog.ui.Control.prototype.isActive = function() {
    return this.hasState(goog.ui.Component.State.ACTIVE)
}, goog.ui.Control.prototype.setActive = function(e) {
    this.isTransitionAllowed(goog.ui.Component.State.ACTIVE, e) && this.setState(goog.ui.Component.State.ACTIVE, e)
}, goog.ui.Control.prototype.isSelected = function() {
    return this.hasState(goog.ui.Component.State.SELECTED)
}, goog.ui.Control.prototype.setSelected = function(e) {
    this.isTransitionAllowed(goog.ui.Component.State.SELECTED, e) && this.setState(goog.ui.Component.State.SELECTED, e)
}, goog.ui.Control.prototype.isChecked = function() {
    return this.hasState(goog.ui.Component.State.CHECKED)
}, goog.ui.Control.prototype.setChecked = function(e) {
    this.isTransitionAllowed(goog.ui.Component.State.CHECKED, e) && this.setState(goog.ui.Component.State.CHECKED, e)
}, goog.ui.Control.prototype.isFocused = function() {
    return this.hasState(goog.ui.Component.State.FOCUSED)
}, goog.ui.Control.prototype.setFocused = function(e) {
    this.isTransitionAllowed(goog.ui.Component.State.FOCUSED, e) && this.setState(goog.ui.Component.State.FOCUSED, e)
}, goog.ui.Control.prototype.isOpen = function() {
    return this.hasState(goog.ui.Component.State.OPENED)
}, goog.ui.Control.prototype.setOpen = function(e) {
    this.isTransitionAllowed(goog.ui.Component.State.OPENED, e) && this.setState(goog.ui.Component.State.OPENED, e)
}, goog.ui.Control.prototype.getState = function() {
    return this.state_
}, goog.ui.Control.prototype.hasState = function(e) {
    return !!(this.state_ & e)
}, goog.ui.Control.prototype.setState = function(e, t, o) {
    o || e != goog.ui.Component.State.DISABLED ? this.isSupportedState(e) && t != this.hasState(e) && (this.renderer_.setState(this, e, t), this.state_ = t ? this.state_ | e : this.state_ & ~e) : this.setEnabled(!t)
}, goog.ui.Control.prototype.setStateInternal = function(e) {
    this.state_ = e
}, goog.ui.Control.prototype.isSupportedState = function(e) {
    return !!(this.supportedStates_ & e)
}, goog.ui.Control.prototype.setSupportedState = function(e, t) {
    if (this.isInDocument() && this.hasState(e) && !t) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    !t && this.hasState(e) && this.setState(e, !1), this.supportedStates_ = t ? this.supportedStates_ | e : this.supportedStates_ & ~e
}, goog.ui.Control.prototype.isAutoState = function(e) {
    return !!(this.autoStates_ & e) && this.isSupportedState(e)
}, goog.ui.Control.prototype.setAutoStates = function(e, t) {
    this.autoStates_ = t ? this.autoStates_ | e : this.autoStates_ & ~e
}, goog.ui.Control.prototype.isDispatchTransitionEvents = function(e) {
    return !!(this.statesWithTransitionEvents_ & e) && this.isSupportedState(e)
}, goog.ui.Control.prototype.setDispatchTransitionEvents = function(e, t) {
    this.statesWithTransitionEvents_ = t ? this.statesWithTransitionEvents_ | e : this.statesWithTransitionEvents_ & ~e
}, goog.ui.Control.prototype.isTransitionAllowed = function(e, t) {
    return this.isSupportedState(e) && this.hasState(e) != t && (!(this.statesWithTransitionEvents_ & e) || this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(e, t))) && !this.isDisposed()
}, goog.ui.Control.prototype.handleMouseOver = function(e) {
    !goog.ui.Control.isMouseEventWithinElement_(e, this.getElement()) && this.dispatchEvent(goog.ui.Component.EventType.ENTER) && this.isEnabled() && this.isAutoState(goog.ui.Component.State.HOVER) && this.setHighlighted(!0)
}, goog.ui.Control.prototype.handleMouseOut = function(e) {
    !goog.ui.Control.isMouseEventWithinElement_(e, this.getElement()) && this.dispatchEvent(goog.ui.Component.EventType.LEAVE) && (this.isAutoState(goog.ui.Component.State.ACTIVE) && this.setActive(!1), this.isAutoState(goog.ui.Component.State.HOVER) && this.setHighlighted(!1))
}, goog.ui.Control.prototype.handleContextMenu = goog.nullFunction, goog.ui.Control.isMouseEventWithinElement_ = function(e, t) {
    return !!e.relatedTarget && goog.dom.contains(t, e.relatedTarget)
}, goog.ui.Control.prototype.handleMouseDown = function(e) {
    this.isEnabled() && (this.isAutoState(goog.ui.Component.State.HOVER) && this.setHighlighted(!0), e.isMouseActionButton() && (this.isAutoState(goog.ui.Component.State.ACTIVE) && this.setActive(!0), this.renderer_ && this.renderer_.isFocusable(this) && this.getKeyEventTarget().focus())), !this.isAllowTextSelection() && e.isMouseActionButton() && e.preventDefault()
}, goog.ui.Control.prototype.handleMouseUp = function(e) {
    this.isEnabled() && (this.isAutoState(goog.ui.Component.State.HOVER) && this.setHighlighted(!0), this.isActive() && this.performActionInternal(e) && this.isAutoState(goog.ui.Component.State.ACTIVE) && this.setActive(!1))
}, goog.ui.Control.prototype.handleDblClick = function(e) {
    this.isEnabled() && this.performActionInternal(e)
}, goog.ui.Control.prototype.performActionInternal = function(e) {
    this.isAutoState(goog.ui.Component.State.CHECKED) && this.setChecked(!this.isChecked()), this.isAutoState(goog.ui.Component.State.SELECTED) && this.setSelected(!0), this.isAutoState(goog.ui.Component.State.OPENED) && this.setOpen(!this.isOpen());
    var t = new goog.events.Event(goog.ui.Component.EventType.ACTION, this);
    return e && (t.altKey = e.altKey, t.ctrlKey = e.ctrlKey, t.metaKey = e.metaKey, t.shiftKey = e.shiftKey, t.platformModifierKey = e.platformModifierKey), this.dispatchEvent(t)
}, goog.ui.Control.prototype.handleFocus = function(e) {
    this.isAutoState(goog.ui.Component.State.FOCUSED) && this.setFocused(!0)
}, goog.ui.Control.prototype.handleBlur = function(e) {
    this.isAutoState(goog.ui.Component.State.ACTIVE) && this.setActive(!1), this.isAutoState(goog.ui.Component.State.FOCUSED) && this.setFocused(!1)
}, goog.ui.Control.prototype.handleKeyEvent = function(e) {
    return this.isVisible() && this.isEnabled() && this.handleKeyEventInternal(e) ? (e.preventDefault(), e.stopPropagation(), !0) : !1
}, goog.ui.Control.prototype.handleKeyEventInternal = function(e) {
    return e.keyCode == goog.events.KeyCodes.ENTER && this.performActionInternal(e)
}, goog.ui.registry.setDefaultRenderer(goog.ui.Control, goog.ui.ControlRenderer), goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS, function() {
    return new goog.ui.Control(null)
}), goog.ui.Control.IeMouseEventSequenceSimulator_ = function(e) {
    goog.Disposable.call(this), this.control_ = e, this.clickExpected_ = !1, this.handler_ = new goog.events.EventHandler(this), this.registerDisposable(this.handler_), e = this.control_.getElementStrict(), this.handler_.listen(e, goog.events.EventType.MOUSEDOWN, this.handleMouseDown_).listen(e, goog.events.EventType.MOUSEUP, this.handleMouseUp_).listen(e, goog.events.EventType.CLICK, this.handleClick_)
}, goog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_, goog.Disposable), goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_ = !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9), goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_ = function() {
    this.clickExpected_ = !1
}, goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_ = function() {
    this.clickExpected_ = !0
}, goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_ = function(e, t) {
    if (!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_) return e.button = goog.events.BrowserEvent.MouseButton.LEFT, e.type = t, e;
    var o = document.createEvent("MouseEvents");
    return o.initMouseEvent(t, e.bubbles, e.cancelable, e.view || null, e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, goog.events.BrowserEvent.MouseButton.LEFT, e.relatedTarget || null), o
}, goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_ = function(e) {
    if (this.clickExpected_) this.clickExpected_ = !1;
    else {
        var t = e.getBrowserEvent(),
            o = t.button,
            n = t.type,
            i = goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(t, goog.events.EventType.MOUSEDOWN);
        this.control_.handleMouseDown(new goog.events.BrowserEvent(i, e.currentTarget)), i = goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(t, goog.events.EventType.MOUSEUP), this.control_.handleMouseUp(new goog.events.BrowserEvent(i, e.currentTarget)), goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_ || (t.button = o, t.type = n)
    }
}, goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal = function() {
    this.control_ = null, goog.ui.Control.IeMouseEventSequenceSimulator_.superClass_.disposeInternal.call(this)
}, goog.ui.Container = function(e, t, o) {
    goog.ui.Component.call(this, o), this.renderer_ = t || goog.ui.ContainerRenderer.getInstance(), this.orientation_ = e || this.renderer_.getDefaultOrientation()
}, goog.inherits(goog.ui.Container, goog.ui.Component), goog.tagUnsealableClass(goog.ui.Container), goog.ui.Container.EventType = {
    AFTER_SHOW: "aftershow",
    AFTER_HIDE: "afterhide"
}, goog.ui.Container.Orientation = {
    HORIZONTAL: "horizontal",
    VERTICAL: "vertical"
}, goog.ui.Container.prototype.keyEventTarget_ = null, goog.ui.Container.prototype.keyHandler_ = null, goog.ui.Container.prototype.renderer_ = null, goog.ui.Container.prototype.orientation_ = null, goog.ui.Container.prototype.visible_ = !0, goog.ui.Container.prototype.enabled_ = !0, goog.ui.Container.prototype.focusable_ = !0, goog.ui.Container.prototype.highlightedIndex_ = -1, goog.ui.Container.prototype.openItem_ = null, goog.ui.Container.prototype.mouseButtonPressed_ = !1, goog.ui.Container.prototype.allowFocusableChildren_ = !1, goog.ui.Container.prototype.openFollowsHighlight_ = !0, goog.ui.Container.prototype.childElementIdMap_ = null, goog.ui.Container.prototype.getKeyEventTarget = function() {
    return this.keyEventTarget_ || this.renderer_.getKeyEventTarget(this)
}, goog.ui.Container.prototype.setKeyEventTarget = function(e) {
    if (!this.focusable_) throw Error("Can't set key event target for container that doesn't support keyboard focus!");
    var t = this.getKeyEventTarget(),
        o = this.isInDocument();
    this.keyEventTarget_ = e;
    var n = this.getKeyEventTarget();
    o && (this.keyEventTarget_ = t, this.enableFocusHandling_(!1), this.keyEventTarget_ = e, this.getKeyHandler().attach(n), this.enableFocusHandling_(!0))
}, goog.ui.Container.prototype.getKeyHandler = function() {
    return this.keyHandler_ || (this.keyHandler_ = new goog.events.KeyHandler(this.getKeyEventTarget()))
}, goog.ui.Container.prototype.getRenderer = function() {
    return this.renderer_
}, goog.ui.Container.prototype.setRenderer = function(e) {
    if (this.getElement()) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.renderer_ = e
}, goog.ui.Container.prototype.createDom = function() {
    this.setElementInternal(this.renderer_.createDom(this))
}, goog.ui.Container.prototype.getContentElement = function() {
    return this.renderer_.getContentElement(this.getElement())
}, goog.ui.Container.prototype.canDecorate = function(e) {
    return this.renderer_.canDecorate(e)
}, goog.ui.Container.prototype.decorateInternal = function(e) {
    this.setElementInternal(this.renderer_.decorate(this, e)), "none" == e.style.display && (this.visible_ = !1);
}, goog.ui.Container.prototype.enterDocument = function() {
    goog.ui.Container.superClass_.enterDocument.call(this), this.forEachChild(function(e) {
        e.isInDocument() && this.registerChildId_(e)
    }, this);
    var e = this.getElement();
    this.renderer_.initializeDom(this), this.setVisible(this.visible_, !0), this.getHandler().listen(this, goog.ui.Component.EventType.ENTER, this.handleEnterItem).listen(this, goog.ui.Component.EventType.HIGHLIGHT, this.handleHighlightItem).listen(this, goog.ui.Component.EventType.UNHIGHLIGHT, this.handleUnHighlightItem).listen(this, goog.ui.Component.EventType.OPEN, this.handleOpenItem).listen(this, goog.ui.Component.EventType.CLOSE, this.handleCloseItem).listen(e, goog.events.EventType.MOUSEDOWN, this.handleMouseDown).listen(goog.dom.getOwnerDocument(e), goog.events.EventType.MOUSEUP, this.handleDocumentMouseUp).listen(e, [goog.events.EventType.MOUSEDOWN, goog.events.EventType.MOUSEUP, goog.events.EventType.MOUSEOVER, goog.events.EventType.MOUSEOUT, goog.events.EventType.CONTEXTMENU], this.handleChildMouseEvents), this.isFocusable() && this.enableFocusHandling_(!0)
}, goog.ui.Container.prototype.enableFocusHandling_ = function(e) {
    var t = this.getHandler(),
        o = this.getKeyEventTarget();
    e ? t.listen(o, goog.events.EventType.FOCUS, this.handleFocus).listen(o, goog.events.EventType.BLUR, this.handleBlur).listen(this.getKeyHandler(), goog.events.KeyHandler.EventType.KEY, this.handleKeyEvent) : t.unlisten(o, goog.events.EventType.FOCUS, this.handleFocus).unlisten(o, goog.events.EventType.BLUR, this.handleBlur).unlisten(this.getKeyHandler(), goog.events.KeyHandler.EventType.KEY, this.handleKeyEvent)
}, goog.ui.Container.prototype.exitDocument = function() {
    this.setHighlightedIndex(-1), this.openItem_ && this.openItem_.setOpen(!1), this.mouseButtonPressed_ = !1, goog.ui.Container.superClass_.exitDocument.call(this)
}, goog.ui.Container.prototype.disposeInternal = function() {
    goog.ui.Container.superClass_.disposeInternal.call(this), this.keyHandler_ && (this.keyHandler_.dispose(), this.keyHandler_ = null), this.renderer_ = this.openItem_ = this.childElementIdMap_ = this.keyEventTarget_ = null
}, goog.ui.Container.prototype.handleEnterItem = function(e) {
    return !0
}, goog.ui.Container.prototype.handleHighlightItem = function(e) {
    var t = this.indexOfChild(e.target);
    if (t > -1 && t != this.highlightedIndex_) {
        var o = this.getHighlighted();
        o && o.setHighlighted(!1), this.highlightedIndex_ = t, o = this.getHighlighted(), this.isMouseButtonPressed() && o.setActive(!0), this.openFollowsHighlight_ && this.openItem_ && o != this.openItem_ && (o.isSupportedState(goog.ui.Component.State.OPENED) ? o.setOpen(!0) : this.openItem_.setOpen(!1))
    }
    t = this.getElement(), goog.asserts.assert(t, "The DOM element for the container cannot be null."), null != e.target.getElement() && goog.a11y.aria.setState(t, goog.a11y.aria.State.ACTIVEDESCENDANT, e.target.getElement().id)
}, goog.ui.Container.prototype.handleUnHighlightItem = function(e) {
    e.target == this.getHighlighted() && (this.highlightedIndex_ = -1), e = this.getElement(), goog.asserts.assert(e, "The DOM element for the container cannot be null."), goog.a11y.aria.removeState(e, goog.a11y.aria.State.ACTIVEDESCENDANT)
}, goog.ui.Container.prototype.handleOpenItem = function(e) {
    (e = e.target) && e != this.openItem_ && e.getParent() == this && (this.openItem_ && this.openItem_.setOpen(!1), this.openItem_ = e)
}, goog.ui.Container.prototype.handleCloseItem = function(e) {
    e.target == this.openItem_ && (this.openItem_ = null);
    var t = this.getElement(),
        o = e.target.getElement();
    t && e.target.isHighlighted() && o && goog.a11y.aria.setActiveDescendant(t, o)
}, goog.ui.Container.prototype.handleMouseDown = function(e) {
    this.enabled_ && this.setMouseButtonPressed(!0);
    var t = this.getKeyEventTarget();
    t && goog.dom.isFocusableTabIndex(t) ? t.focus() : e.preventDefault()
}, goog.ui.Container.prototype.handleDocumentMouseUp = function(e) {
    this.setMouseButtonPressed(!1)
}, goog.ui.Container.prototype.handleChildMouseEvents = function(e) {
    var t = this.getOwnerControl(e.target);
    if (t) switch (e.type) {
        case goog.events.EventType.MOUSEDOWN:
            t.handleMouseDown(e);
            break;
        case goog.events.EventType.MOUSEUP:
            t.handleMouseUp(e);
            break;
        case goog.events.EventType.MOUSEOVER:
            t.handleMouseOver(e);
            break;
        case goog.events.EventType.MOUSEOUT:
            t.handleMouseOut(e);
            break;
        case goog.events.EventType.CONTEXTMENU:
            t.handleContextMenu(e)
    }
}, goog.ui.Container.prototype.getOwnerControl = function(e) {
    if (this.childElementIdMap_)
        for (var t = this.getElement(); e && e !== t;) {
            var o = e.id;
            if (o in this.childElementIdMap_) return this.childElementIdMap_[o];
            e = e.parentNode
        }
    return null
}, goog.ui.Container.prototype.handleFocus = function(e) {}, goog.ui.Container.prototype.handleBlur = function(e) {
    this.setHighlightedIndex(-1), this.setMouseButtonPressed(!1), this.openItem_ && this.openItem_.setOpen(!1)
}, goog.ui.Container.prototype.handleKeyEvent = function(e) {
    return this.isEnabled() && this.isVisible() && (0 != this.getChildCount() || this.keyEventTarget_) && this.handleKeyEventInternal(e) ? (e.preventDefault(), e.stopPropagation(), !0) : !1
}, goog.ui.Container.prototype.handleKeyEventInternal = function(e) {
    var t = this.getHighlighted();
    if (t && "function" == typeof t.handleKeyEvent && t.handleKeyEvent(e) || this.openItem_ && this.openItem_ != t && "function" == typeof this.openItem_.handleKeyEvent && this.openItem_.handleKeyEvent(e)) return !0;
    if (e.shiftKey || e.ctrlKey || e.metaKey || e.altKey) return !1;
    switch (e.keyCode) {
        case goog.events.KeyCodes.ESC:
            if (!this.isFocusable()) return !1;
            this.getKeyEventTarget().blur();
            break;
        case goog.events.KeyCodes.HOME:
            this.highlightFirst();
            break;
        case goog.events.KeyCodes.END:
            this.highlightLast();
            break;
        case goog.events.KeyCodes.UP:
            if (this.orientation_ != goog.ui.Container.Orientation.VERTICAL) return !1;
            this.highlightPrevious();
            break;
        case goog.events.KeyCodes.LEFT:
            if (this.orientation_ != goog.ui.Container.Orientation.HORIZONTAL) return !1;
            this.isRightToLeft() ? this.highlightNext() : this.highlightPrevious();
            break;
        case goog.events.KeyCodes.DOWN:
            if (this.orientation_ != goog.ui.Container.Orientation.VERTICAL) return !1;
            this.highlightNext();
            break;
        case goog.events.KeyCodes.RIGHT:
            if (this.orientation_ != goog.ui.Container.Orientation.HORIZONTAL) return !1;
            this.isRightToLeft() ? this.highlightPrevious() : this.highlightNext();
            break;
        default:
            return !1
    }
    return !0
}, goog.ui.Container.prototype.registerChildId_ = function(e) {
    var t = e.getElement(),
        t = t.id || (t.id = e.getId());
    this.childElementIdMap_ || (this.childElementIdMap_ = {}), this.childElementIdMap_[t] = e
}, goog.ui.Container.prototype.addChild = function(e, t) {
    goog.asserts.assertInstanceof(e, goog.ui.Control, "The child of a container must be a control"), goog.ui.Container.superClass_.addChild.call(this, e, t)
}, goog.ui.Container.prototype.addChildAt = function(e, t, o) {
    goog.asserts.assertInstanceof(e, goog.ui.Control), e.setDispatchTransitionEvents(goog.ui.Component.State.HOVER, !0), e.setDispatchTransitionEvents(goog.ui.Component.State.OPENED, !0), !this.isFocusable() && this.isFocusableChildrenAllowed() || e.setSupportedState(goog.ui.Component.State.FOCUSED, !1), e.setHandleMouseEvents(!1);
    var n = e.getParent() == this ? this.indexOfChild(e) : -1;
    goog.ui.Container.superClass_.addChildAt.call(this, e, t, o), e.isInDocument() && this.isInDocument() && this.registerChildId_(e), this.updateHighlightedIndex_(n, t)
}, goog.ui.Container.prototype.updateHighlightedIndex_ = function(e, t) {
    -1 == e && (e = this.getChildCount()), e == this.highlightedIndex_ ? this.highlightedIndex_ = Math.min(this.getChildCount() - 1, t) : e > this.highlightedIndex_ && t <= this.highlightedIndex_ ? this.highlightedIndex_++ : e < this.highlightedIndex_ && t > this.highlightedIndex_ && this.highlightedIndex_--
}, goog.ui.Container.prototype.removeChild = function(e, t) {
    if (e = goog.isString(e) ? this.getChild(e) : e, goog.asserts.assertInstanceof(e, goog.ui.Control), e) {
        var o = this.indexOfChild(e); - 1 != o && (o == this.highlightedIndex_ ? (e.setHighlighted(!1), this.highlightedIndex_ = -1) : o < this.highlightedIndex_ && this.highlightedIndex_--), (o = e.getElement()) && o.id && this.childElementIdMap_ && goog.object.remove(this.childElementIdMap_, o.id)
    }
    return e = goog.ui.Container.superClass_.removeChild.call(this, e, t), e.setHandleMouseEvents(!0), e
}, goog.ui.Container.prototype.getOrientation = function() {
    return this.orientation_
}, goog.ui.Container.prototype.setOrientation = function(e) {
    if (this.getElement()) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.orientation_ = e
}, goog.ui.Container.prototype.isVisible = function() {
    return this.visible_
}, goog.ui.Container.prototype.setVisible = function(e, t) {
    if (t || this.visible_ != e && this.dispatchEvent(e ? goog.ui.Component.EventType.SHOW : goog.ui.Component.EventType.HIDE)) {
        this.visible_ = e;
        var o = this.getElement();
        return o && (goog.style.setElementShown(o, e), this.isFocusable() && this.renderer_.enableTabIndex(this.getKeyEventTarget(), this.enabled_ && this.visible_), t || this.dispatchEvent(this.visible_ ? goog.ui.Container.EventType.AFTER_SHOW : goog.ui.Container.EventType.AFTER_HIDE)), !0
    }
    return !1
}, goog.ui.Container.prototype.isEnabled = function() {
    return this.enabled_
}, goog.ui.Container.prototype.setEnabled = function(e) {
    this.enabled_ != e && this.dispatchEvent(e ? goog.ui.Component.EventType.ENABLE : goog.ui.Component.EventType.DISABLE) && (e ? (this.enabled_ = !0, this.forEachChild(function(e) {
        e.wasDisabled ? delete e.wasDisabled : e.setEnabled(!0)
    })) : (this.forEachChild(function(e) {
        e.isEnabled() ? e.setEnabled(!1) : e.wasDisabled = !0
    }), this.enabled_ = !1, this.setMouseButtonPressed(!1)), this.isFocusable() && this.renderer_.enableTabIndex(this.getKeyEventTarget(), e && this.visible_))
}, goog.ui.Container.prototype.isFocusable = function() {
    return this.focusable_
}, goog.ui.Container.prototype.setFocusable = function(e) {
    e != this.focusable_ && this.isInDocument() && this.enableFocusHandling_(e), this.focusable_ = e, this.enabled_ && this.visible_ && this.renderer_.enableTabIndex(this.getKeyEventTarget(), e)
}, goog.ui.Container.prototype.isFocusableChildrenAllowed = function() {
    return this.allowFocusableChildren_
}, goog.ui.Container.prototype.setFocusableChildrenAllowed = function(e) {
    this.allowFocusableChildren_ = e
}, goog.ui.Container.prototype.isOpenFollowsHighlight = function() {
    return this.openFollowsHighlight_
}, goog.ui.Container.prototype.setOpenFollowsHighlight = function(e) {
    this.openFollowsHighlight_ = e
}, goog.ui.Container.prototype.getHighlightedIndex = function() {
    return this.highlightedIndex_
}, goog.ui.Container.prototype.setHighlightedIndex = function(e) {
    (e = this.getChildAt(e)) ? e.setHighlighted(!0): -1 < this.highlightedIndex_ && this.getHighlighted().setHighlighted(!1)
}, goog.ui.Container.prototype.setHighlighted = function(e) {
    this.setHighlightedIndex(this.indexOfChild(e))
}, goog.ui.Container.prototype.getHighlighted = function() {
    return this.getChildAt(this.highlightedIndex_)
}, goog.ui.Container.prototype.highlightFirst = function() {
    this.highlightHelper(function(e, t) {
        return (e + 1) % t
    }, this.getChildCount() - 1)
}, goog.ui.Container.prototype.highlightLast = function() {
    this.highlightHelper(function(e, t) {
        return e--, 0 > e ? t - 1 : e
    }, 0)
}, goog.ui.Container.prototype.highlightNext = function() {
    this.highlightHelper(function(e, t) {
        return (e + 1) % t
    }, this.highlightedIndex_)
}, goog.ui.Container.prototype.highlightPrevious = function() {
    this.highlightHelper(function(e, t) {
        return e--, 0 > e ? t - 1 : e
    }, this.highlightedIndex_)
}, goog.ui.Container.prototype.highlightHelper = function(e, t) {
    for (var o = 0 > t ? this.indexOfChild(this.openItem_) : t, n = this.getChildCount(), o = e.call(this, o, n), i = 0; n >= i;) {
        var r = this.getChildAt(o);
        if (r && this.canHighlightItem(r)) return this.setHighlightedIndexFromKeyEvent(o), !0;
        i++, o = e.call(this, o, n)
    }
    return !1
}, goog.ui.Container.prototype.canHighlightItem = function(e) {
    return e.isVisible() && e.isEnabled() && e.isSupportedState(goog.ui.Component.State.HOVER)
}, goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent = function(e) {
    this.setHighlightedIndex(e)
}, goog.ui.Container.prototype.getOpenItem = function() {
    return this.openItem_
}, goog.ui.Container.prototype.isMouseButtonPressed = function() {
    return this.mouseButtonPressed_
}, goog.ui.Container.prototype.setMouseButtonPressed = function(e) {
    this.mouseButtonPressed_ = e
}, goog.ui.MenuHeaderRenderer = function() {
    goog.ui.ControlRenderer.call(this)
}, goog.inherits(goog.ui.MenuHeaderRenderer, goog.ui.ControlRenderer), goog.addSingletonGetter(goog.ui.MenuHeaderRenderer), goog.ui.MenuHeaderRenderer.CSS_CLASS = "goog-menuheader", goog.ui.MenuHeaderRenderer.prototype.getCssClass = function() {
    return goog.ui.MenuHeaderRenderer.CSS_CLASS
}, goog.ui.MenuHeader = function(e, t, o) {
    goog.ui.Control.call(this, e, o || goog.ui.MenuHeaderRenderer.getInstance(), t), this.setSupportedState(goog.ui.Component.State.DISABLED, !1), this.setSupportedState(goog.ui.Component.State.HOVER, !1), this.setSupportedState(goog.ui.Component.State.ACTIVE, !1), this.setSupportedState(goog.ui.Component.State.FOCUSED, !1), this.setStateInternal(goog.ui.Component.State.DISABLED)
}, goog.inherits(goog.ui.MenuHeader, goog.ui.Control), goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS, function() {
    return new goog.ui.MenuHeader(null)
}), goog.ui.MenuItemRenderer = function() {
    goog.ui.ControlRenderer.call(this), this.classNameCache_ = []
}, goog.inherits(goog.ui.MenuItemRenderer, goog.ui.ControlRenderer), goog.addSingletonGetter(goog.ui.MenuItemRenderer), goog.ui.MenuItemRenderer.CSS_CLASS = "goog-menuitem", goog.ui.MenuItemRenderer.CompositeCssClassIndex_ = {
    HOVER: 0,
    CHECKBOX: 1,
    CONTENT: 2
}, goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_ = function(e) {
    var t = this.classNameCache_[e];
    if (!t) {
        switch (e) {
            case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:
                t = this.getStructuralCssClass() + "-highlight";
                break;
            case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:
                t = this.getStructuralCssClass() + "-checkbox";
                break;
            case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:
                t = this.getStructuralCssClass() + "-content"
        }
        this.classNameCache_[e] = t
    }
    return t
}, goog.ui.MenuItemRenderer.prototype.getAriaRole = function() {
    return goog.a11y.aria.Role.MENU_ITEM
}, goog.ui.MenuItemRenderer.prototype.createDom = function(e) {
    var t = e.getDomHelper().createDom(goog.dom.TagName.DIV, this.getClassNames(e).join(" "), this.createContent(e.getContent(), e.getDomHelper()));
    return this.setEnableCheckBoxStructure(e, t, e.isSupportedState(goog.ui.Component.State.SELECTED) || e.isSupportedState(goog.ui.Component.State.CHECKED)), t
}, goog.ui.MenuItemRenderer.prototype.getContentElement = function(e) {
    return e && e.firstChild
}, goog.ui.MenuItemRenderer.prototype.decorate = function(e, t) {
    return goog.asserts.assert(t), this.hasContentStructure(t) || t.appendChild(this.createContent(t.childNodes, e.getDomHelper())), goog.dom.classlist.contains(t, "goog-option") && (e.setCheckable(!0), this.setCheckable(e, t, !0)), goog.ui.MenuItemRenderer.superClass_.decorate.call(this, e, t)
}, goog.ui.MenuItemRenderer.prototype.setContent = function(e, t) {
    var o = this.getContentElement(e),
        n = this.hasCheckBoxStructure(e) ? o.firstChild : null;
    goog.ui.MenuItemRenderer.superClass_.setContent.call(this, e, t), n && !this.hasCheckBoxStructure(e) && o.insertBefore(n, o.firstChild || null)
}, goog.ui.MenuItemRenderer.prototype.hasContentStructure = function(e) {
    e = goog.dom.getFirstElementChild(e);
    var t = this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);
    return !!e && goog.dom.classlist.contains(e, t)
}, goog.ui.MenuItemRenderer.prototype.createContent = function(e, t) {
    var o = this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);
    return t.createDom(goog.dom.TagName.DIV, o, e)
}, goog.ui.MenuItemRenderer.prototype.setSelectable = function(e, t, o) {
    e && t && this.setEnableCheckBoxStructure(e, t, o)
}, goog.ui.MenuItemRenderer.prototype.setCheckable = function(e, t, o) {
    e && t && this.setEnableCheckBoxStructure(e, t, o)
}, goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure = function(e) {
    if (e = this.getContentElement(e)) {
        e = e.firstChild;
        var t = this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);
        return !!e && goog.dom.isElement(e) && goog.dom.classlist.contains(e, t)
    }
    return !1
}, goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure = function(e, t, o) {
    this.setAriaRole(t, e.getPreferredAriaRole()), this.setAriaStates(e, t), o != this.hasCheckBoxStructure(t) && (goog.dom.classlist.enable(t, "goog-option", o), t = this.getContentElement(t), o ? (o = this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX), t.insertBefore(e.getDomHelper().createDom(goog.dom.TagName.DIV, o), t.firstChild || null)) : t.removeChild(t.firstChild))
}, goog.ui.MenuItemRenderer.prototype.getClassForState = function(e) {
    switch (e) {
        case goog.ui.Component.State.HOVER:
            return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);
        case goog.ui.Component.State.CHECKED:
        case goog.ui.Component.State.SELECTED:
            return "goog-option-selected";
        default:
            return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this, e)
    }
}, goog.ui.MenuItemRenderer.prototype.getStateFromClass = function(e) {
    var t = this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);
    switch (e) {
        case "goog-option-selected":
            return goog.ui.Component.State.CHECKED;
        case t:
            return goog.ui.Component.State.HOVER;
        default:
            return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this, e)
    }
}, goog.ui.MenuItemRenderer.prototype.getCssClass = function() {
    return goog.ui.MenuItemRenderer.CSS_CLASS
}, goog.ui.MenuItem = function(e, t, o, n) {
    goog.ui.Control.call(this, e, n || goog.ui.MenuItemRenderer.getInstance(), o), this.setValue(t)
}, goog.inherits(goog.ui.MenuItem, goog.ui.Control), goog.tagUnsealableClass(goog.ui.MenuItem), goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_ = "goog-menuitem-mnemonic-separator", goog.ui.MenuItem.ACCELERATOR_CLASS = "goog-menuitem-accel", goog.ui.MenuItem.prototype.getValue = function() {
    var e = this.getModel();
    return null != e ? e : this.getCaption()
}, goog.ui.MenuItem.prototype.setValue = function(e) {
    this.setModel(e)
}, goog.ui.MenuItem.prototype.setSupportedState = function(e, t) {
    switch (goog.ui.MenuItem.superClass_.setSupportedState.call(this, e, t), e) {
        case goog.ui.Component.State.SELECTED:
            this.setSelectableInternal_(t);
            break;
        case goog.ui.Component.State.CHECKED:
            this.setCheckableInternal_(t)
    }
}, goog.ui.MenuItem.prototype.setSelectable = function(e) {
    this.setSupportedState(goog.ui.Component.State.SELECTED, e)
}, goog.ui.MenuItem.prototype.setSelectableInternal_ = function(e) {
    this.isChecked() && !e && this.setChecked(!1);
    var t = this.getElement();
    t && this.getRenderer().setSelectable(this, t, e)
}, goog.ui.MenuItem.prototype.setCheckable = function(e) {
    this.setSupportedState(goog.ui.Component.State.CHECKED, e)
}, goog.ui.MenuItem.prototype.setCheckableInternal_ = function(e) {
    var t = this.getElement();
    t && this.getRenderer().setCheckable(this, t, e)
}, goog.ui.MenuItem.prototype.getCaption = function() {
    var e = this.getContent();
    if (goog.isArray(e)) {
        var t = goog.ui.MenuItem.ACCELERATOR_CLASS,
            o = goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_,
            e = goog.array.map(e, function(e) {
                return goog.dom.isElement(e) && (goog.dom.classlist.contains(e, t) || goog.dom.classlist.contains(e, o)) ? "" : goog.dom.getRawTextContent(e)
            }).join("");
        return goog.string.collapseBreakingSpaces(e)
    }
    return goog.ui.MenuItem.superClass_.getCaption.call(this)
}, goog.ui.MenuItem.prototype.getAccelerator = function() {
    var e = this.getDomHelper(),
        t = this.getContent();
    return goog.isArray(t) && (t = goog.array.find(t, function(e) {
        return goog.dom.classlist.contains(e, goog.ui.MenuItem.ACCELERATOR_CLASS)
    })) ? e.getTextContent(t) : null
}, goog.ui.MenuItem.prototype.handleMouseUp = function(e) {
    var t = this.getParent();
    if (t) {
        var o = t.openingCoords;
        if (t.openingCoords = null, o && goog.isNumber(e.clientX) && (t = new goog.math.Coordinate(e.clientX, e.clientY), goog.math.Coordinate.equals(o, t))) return
    }
    goog.ui.MenuItem.superClass_.handleMouseUp.call(this, e)
}, goog.ui.MenuItem.prototype.handleKeyEventInternal = function(e) {
    return e.keyCode == this.getMnemonic() && this.performActionInternal(e) ? !0 : goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this, e)
}, goog.ui.MenuItem.prototype.setMnemonic = function(e) {
    this.mnemonicKey_ = e
}, goog.ui.MenuItem.prototype.getMnemonic = function() {
    return this.mnemonicKey_
}, goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS, function() {
    return new goog.ui.MenuItem(null)
}), goog.ui.MenuItem.prototype.getPreferredAriaRole = function() {
    return this.isSupportedState(goog.ui.Component.State.CHECKED) ? goog.a11y.aria.Role.MENU_ITEM_CHECKBOX : this.isSupportedState(goog.ui.Component.State.SELECTED) ? goog.a11y.aria.Role.MENU_ITEM_RADIO : goog.ui.MenuItem.superClass_.getPreferredAriaRole.call(this)
}, goog.ui.MenuItem.prototype.getParent = function() {
    return goog.ui.Control.prototype.getParent.call(this)
}, goog.ui.MenuItem.prototype.getParentEventTarget = function() {
    return goog.ui.Control.prototype.getParentEventTarget.call(this)
}, goog.ui.MenuSeparatorRenderer = function() {
    goog.ui.ControlRenderer.call(this)
}, goog.inherits(goog.ui.MenuSeparatorRenderer, goog.ui.ControlRenderer), goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer), goog.ui.MenuSeparatorRenderer.CSS_CLASS = "goog-menuseparator", goog.ui.MenuSeparatorRenderer.prototype.createDom = function(e) {
    return e.getDomHelper().createDom(goog.dom.TagName.DIV, this.getCssClass())
}, goog.ui.MenuSeparatorRenderer.prototype.decorate = function(e, t) {
    if (t.id && e.setId(t.id), t.tagName == goog.dom.TagName.HR) {
        var o = t;
        t = this.createDom(e), goog.dom.insertSiblingBefore(t, o), goog.dom.removeNode(o)
    } else goog.dom.classlist.add(t, this.getCssClass());
    return t
}, goog.ui.MenuSeparatorRenderer.prototype.setContent = function(e, t) {}, goog.ui.MenuSeparatorRenderer.prototype.getCssClass = function() {
    return goog.ui.MenuSeparatorRenderer.CSS_CLASS
}, goog.ui.Separator = function(e, t) {
    goog.ui.Control.call(this, null, e || goog.ui.MenuSeparatorRenderer.getInstance(), t), this.setSupportedState(goog.ui.Component.State.DISABLED, !1), this.setSupportedState(goog.ui.Component.State.HOVER, !1), this.setSupportedState(goog.ui.Component.State.ACTIVE, !1), this.setSupportedState(goog.ui.Component.State.FOCUSED, !1), this.setStateInternal(goog.ui.Component.State.DISABLED)
}, goog.inherits(goog.ui.Separator, goog.ui.Control), goog.ui.Separator.prototype.enterDocument = function() {
    goog.ui.Separator.superClass_.enterDocument.call(this);
    var e = this.getElement();
    goog.asserts.assert(e, "The DOM element for the separator cannot be null."), goog.a11y.aria.setRole(e, "separator")
}, goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS, function() {
    return new goog.ui.Separator
}), goog.ui.MenuRenderer = function(e) {
    goog.ui.ContainerRenderer.call(this, e || goog.a11y.aria.Role.MENU)
}, goog.inherits(goog.ui.MenuRenderer, goog.ui.ContainerRenderer), goog.addSingletonGetter(goog.ui.MenuRenderer), goog.ui.MenuRenderer.CSS_CLASS = "goog-menu", goog.ui.MenuRenderer.prototype.canDecorate = function(e) {
    return e.tagName == goog.dom.TagName.UL || goog.ui.MenuRenderer.superClass_.canDecorate.call(this, e)
}, goog.ui.MenuRenderer.prototype.getDecoratorForChild = function(e) {
    return e.tagName == goog.dom.TagName.HR ? new goog.ui.Separator : goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this, e)
}, goog.ui.MenuRenderer.prototype.containsElement = function(e, t) {
    return goog.dom.contains(e.getElement(), t)
}, goog.ui.MenuRenderer.prototype.getCssClass = function() {
    return goog.ui.MenuRenderer.CSS_CLASS
}, goog.ui.MenuRenderer.prototype.initializeDom = function(e) {
    goog.ui.MenuRenderer.superClass_.initializeDom.call(this, e), e = e.getElement(), goog.asserts.assert(e, "The menu DOM element cannot be null."), goog.a11y.aria.setState(e, goog.a11y.aria.State.HASPOPUP, "true")
}, goog.ui.MenuSeparator = function(e) {
    goog.ui.Separator.call(this, goog.ui.MenuSeparatorRenderer.getInstance(), e)
}, goog.inherits(goog.ui.MenuSeparator, goog.ui.Separator), goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS, function() {
    return new goog.ui.Separator
}), goog.ui.Menu = function(e, t) {
    goog.ui.Container.call(this, goog.ui.Container.Orientation.VERTICAL, t || goog.ui.MenuRenderer.getInstance(), e), this.setFocusable(!1)
}, goog.inherits(goog.ui.Menu, goog.ui.Container), goog.tagUnsealableClass(goog.ui.Menu), goog.ui.Menu.EventType = {
    BEFORE_SHOW: goog.ui.Component.EventType.BEFORE_SHOW,
    SHOW: goog.ui.Component.EventType.SHOW,
    BEFORE_HIDE: goog.ui.Component.EventType.HIDE,
    HIDE: goog.ui.Component.EventType.HIDE
}, goog.ui.Menu.CSS_CLASS = goog.ui.MenuRenderer.CSS_CLASS, goog.ui.Menu.prototype.allowAutoFocus_ = !0, goog.ui.Menu.prototype.allowHighlightDisabled_ = !1, goog.ui.Menu.prototype.getCssClass = function() {
    return this.getRenderer().getCssClass()
}, goog.ui.Menu.prototype.containsElement = function(e) {
    if (this.getRenderer().containsElement(this, e)) return !0;
    for (var t = 0, o = this.getChildCount(); o > t; t++) {
        var n = this.getChildAt(t);
        if ("function" == typeof n.containsElement && n.containsElement(e)) return !0
    }
    return !1
}, goog.ui.Menu.prototype.addItem = function(e) {
    this.addChild(e, !0)
}, goog.ui.Menu.prototype.addItemAt = function(e, t) {
    this.addChildAt(e, t, !0)
}, goog.ui.Menu.prototype.removeItem = function(e) {
    (e = this.removeChild(e, !0)) && e.dispose()
}, goog.ui.Menu.prototype.removeItemAt = function(e) {
    (e = this.removeChildAt(e, !0)) && e.dispose()
}, goog.ui.Menu.prototype.getItemAt = function(e) {
    return this.getChildAt(e)
}, goog.ui.Menu.prototype.getItemCount = function() {
    return this.getChildCount()
}, goog.ui.Menu.prototype.getItems = function() {
    var e = [];
    return this.forEachChild(function(t) {
        e.push(t)
    }), e
}, goog.ui.Menu.prototype.setPosition = function(e, t) {
    var o = this.isVisible();
    o || goog.style.setElementShown(this.getElement(), !0), goog.style.setPageOffset(this.getElement(), e, t), o || goog.style.setElementShown(this.getElement(), !1)
}, goog.ui.Menu.prototype.getPosition = function() {
    return this.isVisible() ? goog.style.getPageOffset(this.getElement()) : null
}, goog.ui.Menu.prototype.setAllowAutoFocus = function(e) {
    (this.allowAutoFocus_ = e) && this.setFocusable(!0)
}, goog.ui.Menu.prototype.getAllowAutoFocus = function() {
    return this.allowAutoFocus_
}, goog.ui.Menu.prototype.setAllowHighlightDisabled = function(e) {
    this.allowHighlightDisabled_ = e
}, goog.ui.Menu.prototype.getAllowHighlightDisabled = function() {
    return this.allowHighlightDisabled_
}, goog.ui.Menu.prototype.setVisible = function(e, t, o) {
    return (t = goog.ui.Menu.superClass_.setVisible.call(this, e, t)) && e && this.isInDocument() && this.allowAutoFocus_ && this.getKeyEventTarget().focus(), e && o && goog.isNumber(o.clientX) ? this.openingCoords = new goog.math.Coordinate(o.clientX, o.clientY) : this.openingCoords = null, t
}, goog.ui.Menu.prototype.handleEnterItem = function(e) {
    return this.allowAutoFocus_ && this.getKeyEventTarget().focus(), goog.ui.Menu.superClass_.handleEnterItem.call(this, e)
}, goog.ui.Menu.prototype.highlightNextPrefix = function(e) {
    var t = new RegExp("^" + goog.string.regExpEscape(e), "i");
    return this.highlightHelper(function(e, o) {
        var n = 0 > e ? 0 : e,
            i = !1;
        do {
            ++e, e == o && (e = 0, i = !0);
            var r = this.getChildAt(e).getCaption();
            if (r && r.match(t)) return e
        } while (!i || e != n);
        return this.getHighlightedIndex()
    }, this.getHighlightedIndex())
}, goog.ui.Menu.prototype.canHighlightItem = function(e) {
    return (this.allowHighlightDisabled_ || e.isEnabled()) && e.isVisible() && e.isSupportedState(goog.ui.Component.State.HOVER)
}, goog.ui.Menu.prototype.decorateInternal = function(e) {
    this.decorateContent(e), goog.ui.Menu.superClass_.decorateInternal.call(this, e)
}, goog.ui.Menu.prototype.handleKeyEventInternal = function(e) {
    var t = goog.ui.Menu.superClass_.handleKeyEventInternal.call(this, e);
    return t || this.forEachChild(function(o) {
        !t && o.getMnemonic && o.getMnemonic() == e.keyCode && (this.isEnabled() && this.setHighlighted(o), t = o.handleKeyEvent(e))
    }, this), t
}, goog.ui.Menu.prototype.setHighlightedIndex = function(e) {
    goog.ui.Menu.superClass_.setHighlightedIndex.call(this, e), (e = this.getChildAt(e)) && goog.style.scrollIntoContainerView(e.getElement(), this.getElement())
}, goog.ui.Menu.prototype.decorateContent = function(e) {
    var t = this.getRenderer();
    e = this.getDomHelper().getElementsByTagNameAndClass(goog.dom.TagName.DIV, t.getCssClass() + "-content", e);
    for (var o = e.length, n = 0; o > n; n++) t.decorateChildren(this, e[n])
}, goog.color = {}, goog.color.names = {
    aliceblue: "#f0f8ff",
    antiquewhite: "#faebd7",
    aqua: "#00ffff",
    aquamarine: "#7fffd4",
    azure: "#f0ffff",
    beige: "#f5f5dc",
    bisque: "#ffe4c4",
    black: "#000000",
    blanchedalmond: "#ffebcd",
    blue: "#0000ff",
    blueviolet: "#8a2be2",
    brown: "#a52a2a",
    burlywood: "#deb887",
    cadetblue: "#5f9ea0",
    chartreuse: "#7fff00",
    chocolate: "#d2691e",
    coral: "#ff7f50",
    cornflowerblue: "#6495ed",
    cornsilk: "#fff8dc",
    crimson: "#dc143c",
    cyan: "#00ffff",
    darkblue: "#00008b",
    darkcyan: "#008b8b",
    darkgoldenrod: "#b8860b",
    darkgray: "#a9a9a9",
    darkgreen: "#006400",
    darkgrey: "#a9a9a9",
    darkkhaki: "#bdb76b",
    darkmagenta: "#8b008b",
    darkolivegreen: "#556b2f",
    darkorange: "#ff8c00",
    darkorchid: "#9932cc",
    darkred: "#8b0000",
    darksalmon: "#e9967a",
    darkseagreen: "#8fbc8f",
    darkslateblue: "#483d8b",
    darkslategray: "#2f4f4f",
    darkslategrey: "#2f4f4f",
    darkturquoise: "#00ced1",
    darkviolet: "#9400d3",
    deeppink: "#ff1493",
    deepskyblue: "#00bfff",
    dimgray: "#696969",
    dimgrey: "#696969",
    dodgerblue: "#1e90ff",
    firebrick: "#b22222",
    floralwhite: "#fffaf0",
    forestgreen: "#228b22",
    fuchsia: "#ff00ff",
    gainsboro: "#dcdcdc",
    ghostwhite: "#f8f8ff",
    gold: "#ffd700",
    goldenrod: "#daa520",
    gray: "#808080",
    green: "#008000",
    greenyellow: "#adff2f",
    grey: "#808080",
    honeydew: "#f0fff0",
    hotpink: "#ff69b4",
    indianred: "#cd5c5c",
    indigo: "#4b0082",
    ivory: "#fffff0",
    khaki: "#f0e68c",
    lavender: "#e6e6fa",
    lavenderblush: "#fff0f5",
    lawngreen: "#7cfc00",
    lemonchiffon: "#fffacd",
    lightblue: "#add8e6",
    lightcoral: "#f08080",
    lightcyan: "#e0ffff",
    lightgoldenrodyellow: "#fafad2",
    lightgray: "#d3d3d3",
    lightgreen: "#90ee90",
    lightgrey: "#d3d3d3",
    lightpink: "#ffb6c1",
    lightsalmon: "#ffa07a",
    lightseagreen: "#20b2aa",
    lightskyblue: "#87cefa",
    lightslategray: "#778899",
    lightslategrey: "#778899",
    lightsteelblue: "#b0c4de",
    lightyellow: "#ffffe0",
    lime: "#00ff00",
    limegreen: "#32cd32",
    linen: "#faf0e6",
    magenta: "#ff00ff",
    maroon: "#800000",
    mediumaquamarine: "#66cdaa",
    mediumblue: "#0000cd",
    mediumorchid: "#ba55d3",
    mediumpurple: "#9370db",
    mediumseagreen: "#3cb371",
    mediumslateblue: "#7b68ee",
    mediumspringgreen: "#00fa9a",
    mediumturquoise: "#48d1cc",
    mediumvioletred: "#c71585",
    midnightblue: "#191970",
    mintcream: "#f5fffa",
    mistyrose: "#ffe4e1",
    moccasin: "#ffe4b5",
    navajowhite: "#ffdead",
    navy: "#000080",
    oldlace: "#fdf5e6",
    olive: "#808000",
    olivedrab: "#6b8e23",
    orange: "#ffa500",
    orangered: "#ff4500",
    orchid: "#da70d6",
    palegoldenrod: "#eee8aa",
    palegreen: "#98fb98",
    paleturquoise: "#afeeee",
    palevioletred: "#db7093",
    papayawhip: "#ffefd5",
    peachpuff: "#ffdab9",
    peru: "#cd853f",
    pink: "#ffc0cb",
    plum: "#dda0dd",
    powderblue: "#b0e0e6",
    purple: "#800080",
    red: "#ff0000",
    rosybrown: "#bc8f8f",
    royalblue: "#4169e1",
    saddlebrown: "#8b4513",
    salmon: "#fa8072",
    sandybrown: "#f4a460",
    seagreen: "#2e8b57",
    seashell: "#fff5ee",
    sienna: "#a0522d",
    silver: "#c0c0c0",
    skyblue: "#87ceeb",
    slateblue: "#6a5acd",
    slategray: "#708090",
    slategrey: "#708090",
    snow: "#fffafa",
    springgreen: "#00ff7f",
    steelblue: "#4682b4",
    tan: "#d2b48c",
    teal: "#008080",
    thistle: "#d8bfd8",
    tomato: "#ff6347",
    turquoise: "#40e0d0",
    violet: "#ee82ee",
    wheat: "#f5deb3",
    white: "#ffffff",
    whitesmoke: "#f5f5f5",
    yellow: "#ffff00",
    yellowgreen: "#9acd32"
}, goog.color.parse = function(e) {
    var t = {};
    e = String(e);
    var o = goog.color.prependHashIfNecessaryHelper(e);
    if (goog.color.isValidHexColor_(o)) return t.hex = goog.color.normalizeHex(o), t.type = "hex", t;
    if (o = goog.color.isValidRgbColor_(e), o.length) return t.hex = goog.color.rgbArrayToHex(o), t.type = "rgb", t;
    if (goog.color.names && (o = goog.color.names[e.toLowerCase()])) return t.hex = o, t.type = "named", t;
    throw Error(e + " is not a valid color string")
}, goog.color.isValidColor = function(e) {
    var t = goog.color.prependHashIfNecessaryHelper(e);
    return !!(goog.color.isValidHexColor_(t) || goog.color.isValidRgbColor_(e).length || goog.color.names && goog.color.names[e.toLowerCase()])
}, goog.color.parseRgb = function(e) {
    var t = goog.color.isValidRgbColor_(e);
    if (!t.length) throw Error(e + " is not a valid RGB color");
    return t
}, goog.color.hexToRgbStyle = function(e) {
    return goog.color.rgbStyle_(goog.color.hexToRgb(e))
}, goog.color.hexTripletRe_ = /#(.)(.)(.)/, goog.color.normalizeHex = function(e) {
    if (!goog.color.isValidHexColor_(e)) throw Error("'" + e + "' is not a valid hex color");
    return 4 == e.length && (e = e.replace(goog.color.hexTripletRe_, "#$1$1$2$2$3$3")), e.toLowerCase()
}, goog.color.hexToRgb = function(e) {
    e = goog.color.normalizeHex(e);
    var t = parseInt(e.substr(1, 2), 16),
        o = parseInt(e.substr(3, 2), 16);
    return e = parseInt(e.substr(5, 2), 16), [t, o, e]
}, goog.color.rgbToHex = function(e, t, o) {
    if (e = Number(e), t = Number(t), o = Number(o), e != (255 & e) || t != (255 & t) || o != (255 & o)) throw Error('"(' + e + "," + t + "," + o + '") is not a valid RGB color');
    return e = goog.color.prependZeroIfNecessaryHelper(e.toString(16)), t = goog.color.prependZeroIfNecessaryHelper(t.toString(16)), o = goog.color.prependZeroIfNecessaryHelper(o.toString(16)), "#" + e + t + o
}, goog.color.rgbArrayToHex = function(e) {
    return goog.color.rgbToHex(e[0], e[1], e[2])
}, goog.color.rgbToHsl = function(e, t, o) {
    e /= 255, t /= 255,
        o /= 255;
    var n = Math.max(e, t, o),
        i = Math.min(e, t, o),
        r = 0,
        s = 0,
        a = .5 * (n + i);
    return n != i && (n == e ? r = 60 * (t - o) / (n - i) : n == t ? r = 60 * (o - e) / (n - i) + 120 : n == o && (r = 60 * (e - t) / (n - i) + 240), s = a > 0 && .5 >= a ? (n - i) / (2 * a) : (n - i) / (2 - 2 * a)), [Math.round(r + 360) % 360, s, a]
}, goog.color.rgbArrayToHsl = function(e) {
    return goog.color.rgbToHsl(e[0], e[1], e[2])
}, goog.color.hueToRgb_ = function(e, t, o) {
    return 0 > o ? o += 1 : o > 1 && --o, 1 > 6 * o ? e + 6 * (t - e) * o : 1 > 2 * o ? t : 2 > 3 * o ? e + (t - e) * (2 / 3 - o) * 6 : e
}, goog.color.hslToRgb = function(e, t, o) {
    if (e /= 360, 0 == t) o = t = e = 255 * o;
    else {
        var n, i;
        i = .5 > o ? o * (1 + t) : o + t - t * o, n = 2 * o - i, o = 255 * goog.color.hueToRgb_(n, i, e + 1 / 3), t = 255 * goog.color.hueToRgb_(n, i, e), e = 255 * goog.color.hueToRgb_(n, i, e - 1 / 3)
    }
    return [Math.round(o), Math.round(t), Math.round(e)]
}, goog.color.hslArrayToRgb = function(e) {
    return goog.color.hslToRgb(e[0], e[1], e[2])
}, goog.color.validHexColorRe_ = /^#(?:[0-9a-f]{3}){1,2}$/i, goog.color.isValidHexColor_ = function(e) {
    return goog.color.validHexColorRe_.test(e)
}, goog.color.normalizedHexColorRe_ = /^#[0-9a-f]{6}$/, goog.color.isNormalizedHexColor_ = function(e) {
    return goog.color.normalizedHexColorRe_.test(e)
}, goog.color.rgbColorRe_ = /^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i, goog.color.isValidRgbColor_ = function(e) {
    var t = e.match(goog.color.rgbColorRe_);
    if (t) {
        e = Number(t[1]);
        var o = Number(t[2]),
            t = Number(t[3]);
        if (e >= 0 && 255 >= e && o >= 0 && 255 >= o && t >= 0 && 255 >= t) return [e, o, t]
    }
    return []
}, goog.color.prependZeroIfNecessaryHelper = function(e) {
    return 1 == e.length ? "0" + e : e
}, goog.color.prependHashIfNecessaryHelper = function(e) {
    return "#" == e.charAt(0) ? e : "#" + e
}, goog.color.rgbStyle_ = function(e) {
    return "rgb(" + e.join(",") + ")"
}, goog.color.hsvToRgb = function(e, t, o) {
    var n = 0,
        i = 0,
        r = 0;
    if (0 == t) r = i = n = o;
    else {
        var s = Math.floor(e / 60),
            a = e / 60 - s;
        e = o * (1 - t);
        var l = o * (1 - t * a);
        switch (t = o * (1 - t * (1 - a)), s) {
            case 1:
                n = l, i = o, r = e;
                break;
            case 2:
                n = e, i = o, r = t;
                break;
            case 3:
                n = e, i = l, r = o;
                break;
            case 4:
                n = t, i = e, r = o;
                break;
            case 5:
                n = o, i = e, r = l;
                break;
            case 6:
            case 0:
                n = o, i = t, r = e
        }
    }
    return [Math.floor(n), Math.floor(i), Math.floor(r)]
}, goog.color.rgbToHsv = function(e, t, o) {
    var n = Math.max(Math.max(e, t), o),
        i = Math.min(Math.min(e, t), o);
    if (i == n) i = e = 0;
    else {
        var r = n - i,
            i = r / n;
        e = 60 * (e == n ? (t - o) / r : t == n ? 2 + (o - e) / r : 4 + (e - t) / r), 0 > e && (e += 360), e > 360 && (e -= 360)
    }
    return [e, i, n]
}, goog.color.rgbArrayToHsv = function(e) {
    return goog.color.rgbToHsv(e[0], e[1], e[2])
}, goog.color.hsvArrayToRgb = function(e) {
    return goog.color.hsvToRgb(e[0], e[1], e[2])
}, goog.color.hexToHsl = function(e) {
    return e = goog.color.hexToRgb(e), goog.color.rgbToHsl(e[0], e[1], e[2])
}, goog.color.hslToHex = function(e, t, o) {
    return goog.color.rgbArrayToHex(goog.color.hslToRgb(e, t, o))
}, goog.color.hslArrayToHex = function(e) {
    return goog.color.rgbArrayToHex(goog.color.hslToRgb(e[0], e[1], e[2]))
}, goog.color.hexToHsv = function(e) {
    return goog.color.rgbArrayToHsv(goog.color.hexToRgb(e))
}, goog.color.hsvToHex = function(e, t, o) {
    return goog.color.rgbArrayToHex(goog.color.hsvToRgb(e, t, o))
}, goog.color.hsvArrayToHex = function(e) {
    return goog.color.hsvToHex(e[0], e[1], e[2])
}, goog.color.hslDistance = function(e, t) {
    var o, n;
    return o = .5 >= e[2] ? e[1] * e[2] : e[1] * (1 - e[2]), n = .5 >= t[2] ? t[1] * t[2] : t[1] * (1 - t[2]), (e[2] - t[2]) * (e[2] - t[2]) + o * o + n * n - 2 * o * n * Math.cos(2 * (e[0] / 360 - t[0] / 360) * Math.PI)
}, goog.color.blend = function(e, t, o) {
    return o = goog.math.clamp(o, 0, 1), [Math.round(o * e[0] + (1 - o) * t[0]), Math.round(o * e[1] + (1 - o) * t[1]), Math.round(o * e[2] + (1 - o) * t[2])]
}, goog.color.darken = function(e, t) {
    return goog.color.blend([0, 0, 0], e, t)
}, goog.color.lighten = function(e, t) {
    return goog.color.blend([255, 255, 255], e, t)
}, goog.color.highContrast = function(e, t) {
    for (var o = [], n = 0; n < t.length; n++) o.push({
        color: t[n],
        diff: goog.color.yiqBrightnessDiff_(t[n], e) + goog.color.colorDiff_(t[n], e)
    });
    return o.sort(function(e, t) {
        return t.diff - e.diff
    }), o[0].color
}, goog.color.yiqBrightness_ = function(e) {
    return Math.round((299 * e[0] + 587 * e[1] + 114 * e[2]) / 1e3)
}, goog.color.yiqBrightnessDiff_ = function(e, t) {
    return Math.abs(goog.color.yiqBrightness_(e) - goog.color.yiqBrightness_(t))
}, goog.color.colorDiff_ = function(e, t) {
    return Math.abs(e[0] - t[0]) + Math.abs(e[1] - t[1]) + Math.abs(e[2] - t[2])
}, goog.iter = {}, goog.iter.StopIteration = "StopIteration" in goog.global ? goog.global.StopIteration : {
    message: "StopIteration",
    stack: ""
}, goog.iter.Iterator = function() {}, goog.iter.Iterator.prototype.next = function() {
    throw goog.iter.StopIteration
}, goog.iter.Iterator.prototype.__iterator__ = function(e) {
    return this
}, goog.iter.toIterator = function(e) {
    if (e instanceof goog.iter.Iterator) return e;
    if ("function" == typeof e.__iterator__) return e.__iterator__(!1);
    if (goog.isArrayLike(e)) {
        var t = 0,
            o = new goog.iter.Iterator;
        return o.next = function() {
            for (;;) {
                if (t >= e.length) throw goog.iter.StopIteration;
                if (t in e) return e[t++];
                t++
            }
        }, o
    }
    throw Error("Not implemented")
}, goog.iter.forEach = function(e, t, o) {
    if (goog.isArrayLike(e)) try {
        goog.array.forEach(e, t, o)
    } catch (n) {
        if (n !== goog.iter.StopIteration) throw n
    } else {
        e = goog.iter.toIterator(e);
        try {
            for (;;) t.call(o, e.next(), void 0, e)
        } catch (n) {
            if (n !== goog.iter.StopIteration) throw n
        }
    }
}, goog.iter.filter = function(e, t, o) {
    var n = goog.iter.toIterator(e);
    return e = new goog.iter.Iterator, e.next = function() {
        for (;;) {
            var e = n.next();
            if (t.call(o, e, void 0, n)) return e
        }
    }, e
}, goog.iter.filterFalse = function(e, t, o) {
    return goog.iter.filter(e, goog.functions.not(t), o)
}, goog.iter.range = function(e, t, o) {
    var n = 0,
        i = e,
        r = o || 1;
    if (1 < arguments.length && (n = e, i = t), 0 == r) throw Error("Range step argument must not be zero");
    var s = new goog.iter.Iterator;
    return s.next = function() {
        if (r > 0 && n >= i || 0 > r && i >= n) throw goog.iter.StopIteration;
        var e = n;
        return n += r, e
    }, s
}, goog.iter.join = function(e, t) {
    return goog.iter.toArray(e).join(t)
}, goog.iter.map = function(e, t, o) {
    var n = goog.iter.toIterator(e);
    return e = new goog.iter.Iterator, e.next = function() {
        var e = n.next();
        return t.call(o, e, void 0, n)
    }, e
}, goog.iter.reduce = function(e, t, o, n) {
    var i = o;
    return goog.iter.forEach(e, function(e) {
        i = t.call(n, i, e)
    }), i
}, goog.iter.some = function(e, t, o) {
    e = goog.iter.toIterator(e);
    try {
        for (;;)
            if (t.call(o, e.next(), void 0, e)) return !0
    } catch (n) {
        if (n !== goog.iter.StopIteration) throw n
    }
    return !1
}, goog.iter.every = function(e, t, o) {
    e = goog.iter.toIterator(e);
    try {
        for (;;)
            if (!t.call(o, e.next(), void 0, e)) return !1
    } catch (n) {
        if (n !== goog.iter.StopIteration) throw n
    }
    return !0
}, goog.iter.chain = function(e) {
    return goog.iter.chainFromIterable(arguments)
}, goog.iter.chainFromIterable = function(e) {
    var t = goog.iter.toIterator(e);
    e = new goog.iter.Iterator;
    var o = null;
    return e.next = function() {
        for (;;) {
            if (null == o) {
                var e = t.next();
                o = goog.iter.toIterator(e)
            }
            try {
                return o.next()
            } catch (n) {
                if (n !== goog.iter.StopIteration) throw n;
                o = null
            }
        }
    }, e
}, goog.iter.dropWhile = function(e, t, o) {
    var n = goog.iter.toIterator(e);
    e = new goog.iter.Iterator;
    var i = !0;
    return e.next = function() {
        for (;;) {
            var e = n.next();
            if (!i || !t.call(o, e, void 0, n)) return i = !1, e
        }
    }, e
}, goog.iter.takeWhile = function(e, t, o) {
    var n = goog.iter.toIterator(e);
    return e = new goog.iter.Iterator, e.next = function() {
        var e = n.next();
        if (t.call(o, e, void 0, n)) return e;
        throw goog.iter.StopIteration
    }, e
}, goog.iter.toArray = function(e) {
    if (goog.isArrayLike(e)) return goog.array.toArray(e);
    e = goog.iter.toIterator(e);
    var t = [];
    return goog.iter.forEach(e, function(e) {
        t.push(e)
    }), t
}, goog.iter.equals = function(e, t, o) {
    e = goog.iter.zipLongest({}, e, t);
    var n = o || goog.array.defaultCompareEquality;
    return goog.iter.every(e, function(e) {
        return n(e[0], e[1])
    })
}, goog.iter.nextOrValue = function(e, t) {
    try {
        return goog.iter.toIterator(e).next()
    } catch (o) {
        if (o != goog.iter.StopIteration) throw o;
        return t
    }
}, goog.iter.product = function(e) {
    if (goog.array.some(arguments, function(e) {
            return !e.length
        }) || !arguments.length) return new goog.iter.Iterator;
    var t = new goog.iter.Iterator,
        o = arguments,
        n = goog.array.repeat(0, o.length);
    return t.next = function() {
        if (n) {
            for (var e = goog.array.map(n, function(e, t) {
                    return o[t][e]
                }), t = n.length - 1; t >= 0; t--) {
                if (goog.asserts.assert(n), n[t] < o[t].length - 1) {
                    n[t] ++;
                    break
                }
                if (0 == t) {
                    n = null;
                    break
                }
                n[t] = 0
            }
            return e
        }
        throw goog.iter.StopIteration
    }, t
}, goog.iter.cycle = function(e) {
    var t = goog.iter.toIterator(e),
        o = [],
        n = 0;
    e = new goog.iter.Iterator;
    var i = !1;
    return e.next = function() {
        var e = null;
        if (!i) try {
            return e = t.next(), o.push(e), e
        } catch (r) {
            if (r != goog.iter.StopIteration || goog.array.isEmpty(o)) throw r;
            i = !0
        }
        return e = o[n], n = (n + 1) % o.length, e
    }, e
}, goog.iter.count = function(e, t) {
    var o = e || 0,
        n = goog.isDef(t) ? t : 1,
        i = new goog.iter.Iterator;
    return i.next = function() {
        var e = o;
        return o += n, e
    }, i
}, goog.iter.repeat = function(e) {
    var t = new goog.iter.Iterator;
    return t.next = goog.functions.constant(e), t
}, goog.iter.accumulate = function(e) {
    var t = goog.iter.toIterator(e),
        o = 0;
    return e = new goog.iter.Iterator, e.next = function() {
        return o += t.next()
    }, e
}, goog.iter.zip = function(e) {
    var t = arguments,
        o = new goog.iter.Iterator;
    if (0 < t.length) {
        var n = goog.array.map(t, goog.iter.toIterator);
        o.next = function() {
            return goog.array.map(n, function(e) {
                return e.next()
            })
        }
    }
    return o
}, goog.iter.zipLongest = function(e, t) {
    var o = goog.array.slice(arguments, 1),
        n = new goog.iter.Iterator;
    if (0 < o.length) {
        var i = goog.array.map(o, goog.iter.toIterator);
        n.next = function() {
            var t = !1,
                o = goog.array.map(i, function(o) {
                    var n;
                    try {
                        n = o.next(), t = !0
                    } catch (i) {
                        if (i !== goog.iter.StopIteration) throw i;
                        n = e
                    }
                    return n
                });
            if (!t) throw goog.iter.StopIteration;
            return o
        }
    }
    return n
}, goog.iter.compress = function(e, t) {
    var o = goog.iter.toIterator(t);
    return goog.iter.filter(e, function() {
        return !!o.next()
    })
}, goog.iter.GroupByIterator_ = function(e, t) {
    this.iterator = goog.iter.toIterator(e), this.keyFunc = t || goog.functions.identity
}, goog.inherits(goog.iter.GroupByIterator_, goog.iter.Iterator), goog.iter.GroupByIterator_.prototype.next = function() {
    for (; this.currentKey == this.targetKey;) this.currentValue = this.iterator.next(), this.currentKey = this.keyFunc(this.currentValue);
    return this.targetKey = this.currentKey, [this.currentKey, this.groupItems_(this.targetKey)]
}, goog.iter.GroupByIterator_.prototype.groupItems_ = function(e) {
    for (var t = []; this.currentKey == e;) {
        t.push(this.currentValue);
        try {
            this.currentValue = this.iterator.next()
        } catch (o) {
            if (o !== goog.iter.StopIteration) throw o;
            break
        }
        this.currentKey = this.keyFunc(this.currentValue)
    }
    return t
}, goog.iter.groupBy = function(e, t) {
    return new goog.iter.GroupByIterator_(e, t)
}, goog.iter.starMap = function(e, t, o) {
    var n = goog.iter.toIterator(e);
    return e = new goog.iter.Iterator, e.next = function() {
        var e = goog.iter.toArray(n.next());
        return t.apply(o, goog.array.concat(e, void 0, n))
    }, e
}, goog.iter.tee = function(e, t) {
    var o = goog.iter.toIterator(e),
        n = goog.isNumber(t) ? t : 2,
        i = goog.array.map(goog.array.range(n), function() {
            return []
        }),
        r = function() {
            var e = o.next();
            goog.array.forEach(i, function(t) {
                t.push(e)
            })
        };
    return goog.array.map(i, function(e) {
        var t = new goog.iter.Iterator;
        return t.next = function() {
            return goog.array.isEmpty(e) && r(), goog.asserts.assert(!goog.array.isEmpty(e)), e.shift()
        }, t
    })
}, goog.iter.enumerate = function(e, t) {
    return goog.iter.zip(goog.iter.count(t), e)
}, goog.iter.limit = function(e, t) {
    goog.asserts.assert(goog.math.isInt(t) && t >= 0);
    var o = goog.iter.toIterator(e),
        n = new goog.iter.Iterator,
        i = t;
    return n.next = function() {
        if (0 < i--) return o.next();
        throw goog.iter.StopIteration
    }, n
}, goog.iter.consume = function(e, t) {
    goog.asserts.assert(goog.math.isInt(t) && t >= 0);
    for (var o = goog.iter.toIterator(e); 0 < t--;) goog.iter.nextOrValue(o, null);
    return o
}, goog.iter.slice = function(e, t, o) {
    return goog.asserts.assert(goog.math.isInt(t) && t >= 0), e = goog.iter.consume(e, t), goog.isNumber(o) && (goog.asserts.assert(goog.math.isInt(o) && o >= t), e = goog.iter.limit(e, o - t)), e
}, goog.iter.hasDuplicates_ = function(e) {
    var t = [];
    return goog.array.removeDuplicates(e, t), e.length != t.length
}, goog.iter.permutations = function(e, t) {
    var o = goog.iter.toArray(e),
        n = goog.isNumber(t) ? t : o.length,
        o = goog.array.repeat(o, n),
        o = goog.iter.product.apply(void 0, o);
    return goog.iter.filter(o, function(e) {
        return !goog.iter.hasDuplicates_(e)
    })
}, goog.iter.combinations = function(e, t) {
    function o(e) {
        return n[e]
    }
    var n = goog.iter.toArray(e),
        i = goog.iter.range(n.length),
        i = goog.iter.permutations(i, t),
        r = goog.iter.filter(i, function(e) {
            return goog.array.isSorted(e)
        }),
        i = new goog.iter.Iterator;
    return i.next = function() {
        return goog.array.map(r.next(), o)
    }, i
}, goog.iter.combinationsWithReplacement = function(e, t) {
    function o(e) {
        return n[e]
    }
    var n = goog.iter.toArray(e),
        i = goog.array.range(n.length),
        i = goog.array.repeat(i, t),
        i = goog.iter.product.apply(void 0, i),
        r = goog.iter.filter(i, function(e) {
            return goog.array.isSorted(e)
        }),
        i = new goog.iter.Iterator;
    return i.next = function() {
        return goog.array.map(r.next(), o)
    }, i
}, goog.dom.TagWalkType = {
    START_TAG: 1,
    OTHER: 0,
    END_TAG: -1
}, goog.dom.TagIterator = function(e, t, o, n, i) {
    this.reversed = !!t, this.node = null, this.tagType = goog.dom.TagWalkType.OTHER, this.started_ = !1, this.constrained = !o, e && this.setPosition(e, n), this.depth = void 0 != i ? i : this.tagType || 0, this.reversed && (this.depth *= -1)
}, goog.inherits(goog.dom.TagIterator, goog.iter.Iterator), goog.dom.TagIterator.prototype.setPosition = function(e, t, o) {
    (this.node = e) && (goog.isNumber(t) ? this.tagType = t : this.tagType = this.node.nodeType != goog.dom.NodeType.ELEMENT ? goog.dom.TagWalkType.OTHER : this.reversed ? goog.dom.TagWalkType.END_TAG : goog.dom.TagWalkType.START_TAG), goog.isNumber(o) && (this.depth = o)
}, goog.dom.TagIterator.prototype.copyFrom = function(e) {
    this.node = e.node, this.tagType = e.tagType, this.depth = e.depth, this.reversed = e.reversed, this.constrained = e.constrained
}, goog.dom.TagIterator.prototype.clone = function() {
    return new goog.dom.TagIterator(this.node, this.reversed, !this.constrained, this.tagType, this.depth)
}, goog.dom.TagIterator.prototype.skipTag = function() {
    var e = this.reversed ? goog.dom.TagWalkType.END_TAG : goog.dom.TagWalkType.START_TAG;
    this.tagType == e && (this.tagType = -1 * e, this.depth += this.tagType * (this.reversed ? -1 : 1))
}, goog.dom.TagIterator.prototype.restartTag = function() {
    var e = this.reversed ? goog.dom.TagWalkType.START_TAG : goog.dom.TagWalkType.END_TAG;
    this.tagType == e && (this.tagType = -1 * e, this.depth += this.tagType * (this.reversed ? -1 : 1))
}, goog.dom.TagIterator.prototype.next = function() {
    var e;
    if (this.started_) {
        if (!this.node || this.constrained && 0 == this.depth) throw goog.iter.StopIteration;
        e = this.node;
        var t = this.reversed ? goog.dom.TagWalkType.END_TAG : goog.dom.TagWalkType.START_TAG;
        if (this.tagType == t) {
            var o = this.reversed ? e.lastChild : e.firstChild;
            o ? this.setPosition(o) : this.setPosition(e, -1 * t)
        } else(o = this.reversed ? e.previousSibling : e.nextSibling) ? this.setPosition(o) : this.setPosition(e.parentNode, -1 * t);
        this.depth += this.tagType * (this.reversed ? -1 : 1)
    } else this.started_ = !0;
    if (e = this.node, !this.node) throw goog.iter.StopIteration;
    return e
}, goog.dom.TagIterator.prototype.isStarted = function() {
    return this.started_
}, goog.dom.TagIterator.prototype.isStartTag = function() {
    return this.tagType == goog.dom.TagWalkType.START_TAG
}, goog.dom.TagIterator.prototype.isEndTag = function() {
    return this.tagType == goog.dom.TagWalkType.END_TAG
}, goog.dom.TagIterator.prototype.isNonElement = function() {
    return this.tagType == goog.dom.TagWalkType.OTHER
}, goog.dom.TagIterator.prototype.equals = function(e) {
    return e.node == this.node && (!this.node || e.tagType == this.tagType)
}, goog.dom.TagIterator.prototype.splice = function(e) {
    var t = this.node;
    this.restartTag(), this.reversed = !this.reversed, goog.dom.TagIterator.prototype.next.call(this), this.reversed = !this.reversed;
    for (var o = goog.isArrayLike(arguments[0]) ? arguments[0] : arguments, n = o.length - 1; n >= 0; n--) goog.dom.insertSiblingAfter(o[n], t);
    goog.dom.removeNode(t)
}, goog.dom.NodeIterator = function(e, t, o, n) {
    goog.dom.TagIterator.call(this, e, t, o, null, n)
}, goog.inherits(goog.dom.NodeIterator, goog.dom.TagIterator), goog.dom.NodeIterator.prototype.next = function() {
    do goog.dom.NodeIterator.superClass_.next.call(this); while (this.isEndTag());
    return this.node
}, goog.ui.PaletteRenderer = function() {
    goog.ui.ControlRenderer.call(this)
}, goog.inherits(goog.ui.PaletteRenderer, goog.ui.ControlRenderer), goog.addSingletonGetter(goog.ui.PaletteRenderer), goog.ui.PaletteRenderer.cellId_ = 0, goog.ui.PaletteRenderer.CSS_CLASS = "goog-palette", goog.ui.PaletteRenderer.prototype.createDom = function(e) {
    var t = this.getClassNames(e);
    return e = e.getDomHelper().createDom(goog.dom.TagName.DIV, t ? t.join(" ") : null, this.createGrid(e.getContent(), e.getSize(), e.getDomHelper())), goog.a11y.aria.setRole(e, goog.a11y.aria.Role.GRID), e
}, goog.ui.PaletteRenderer.prototype.createGrid = function(e, t, o) {
    for (var n = [], i = 0, r = 0; i < t.height; i++) {
        for (var s = [], a = 0; a < t.width; a++) {
            var l = e && e[r++];
            s.push(this.createCell(l, o))
        }
        n.push(this.createRow(s, o))
    }
    return this.createTable(n, o)
}, goog.ui.PaletteRenderer.prototype.createTable = function(e, t) {
    var o = t.createDom(goog.dom.TagName.TABLE, this.getCssClass() + "-table", t.createDom(goog.dom.TagName.TBODY, this.getCssClass() + "-body", e));
    return o.cellSpacing = 0, o.cellPadding = 0, o
}, goog.ui.PaletteRenderer.prototype.createRow = function(e, t) {
    var o = t.createDom(goog.dom.TagName.TR, this.getCssClass() + "-row", e);
    return goog.a11y.aria.setRole(o, goog.a11y.aria.Role.ROW), o
}, goog.ui.PaletteRenderer.prototype.createCell = function(e, t) {
    var o = t.createDom(goog.dom.TagName.TD, {
        "class": this.getCssClass() + "-cell",
        id: this.getCssClass() + "-cell-" + goog.ui.PaletteRenderer.cellId_++
    }, e);
    if (goog.a11y.aria.setRole(o, goog.a11y.aria.Role.GRIDCELL), goog.a11y.aria.setState(o, goog.a11y.aria.State.SELECTED, !1), !goog.dom.getTextContent(o) && !goog.a11y.aria.getLabel(o)) {
        var n = this.findAriaLabelForCell_(o);
        n && goog.a11y.aria.setLabel(o, n)
    }
    return o
}, goog.ui.PaletteRenderer.prototype.findAriaLabelForCell_ = function(e) {
    e = new goog.dom.NodeIterator(e);
    for (var t, o = ""; !o && (t = goog.iter.nextOrValue(e, null));) t.nodeType == goog.dom.NodeType.ELEMENT && (o = goog.a11y.aria.getLabel(t) || t.title);
    return o
}, goog.ui.PaletteRenderer.prototype.canDecorate = function(e) {
    return !1
}, goog.ui.PaletteRenderer.prototype.decorate = function(e, t) {
    return null
}, goog.ui.PaletteRenderer.prototype.setContent = function(e, t) {
    if (e) {
        var o = goog.dom.getElementsByTagNameAndClass(goog.dom.TagName.TBODY, this.getCssClass() + "-body", e)[0];
        if (o) {
            var n = 0;
            if (goog.array.forEach(o.rows, function(e) {
                    goog.array.forEach(e.cells, function(e) {
                        if (goog.dom.removeChildren(e), t) {
                            var o = t[n++];
                            o && goog.dom.appendChild(e, o)
                        }
                    })
                }), n < t.length) {
                for (var i = [], r = goog.dom.getDomHelper(e), s = o.rows[0].cells.length; n < t.length;) {
                    var a = t[n++];
                    i.push(this.createCell(a, r)), i.length == s && (a = this.createRow(i, r), goog.dom.appendChild(o, a), i.length = 0)
                }
                if (0 < i.length) {
                    for (; i.length < s;) i.push(this.createCell("", r));
                    a = this.createRow(i, r), goog.dom.appendChild(o, a)
                }
            }
        }
        goog.style.setUnselectable(e, !0, goog.userAgent.GECKO)
    }
}, goog.ui.PaletteRenderer.prototype.getContainingItem = function(e, t) {
    for (var o = e.getElement(); t && t.nodeType == goog.dom.NodeType.ELEMENT && t != o;) {
        if (t.tagName == goog.dom.TagName.TD && goog.dom.classlist.contains(t, this.getCssClass() + "-cell")) return t.firstChild;
        t = t.parentNode
    }
    return null
}, goog.ui.PaletteRenderer.prototype.highlightCell = function(e, t, o) {
    t && (t = this.getCellForItem(t), goog.asserts.assert(t), goog.dom.classlist.enable(t, this.getCssClass() + "-cell-hover", o), o ? goog.a11y.aria.setState(e.getElementStrict(), goog.a11y.aria.State.ACTIVEDESCENDANT, t.id) : t.id == goog.a11y.aria.getState(e.getElementStrict(), goog.a11y.aria.State.ACTIVEDESCENDANT) && goog.a11y.aria.removeState(e.getElementStrict(), goog.a11y.aria.State.ACTIVEDESCENDANT))
}, goog.ui.PaletteRenderer.prototype.getCellForItem = function(e) {
    return e ? e.parentNode : null
}, goog.ui.PaletteRenderer.prototype.selectCell = function(e, t, o) {
    t && (e = t.parentNode, goog.dom.classlist.enable(e, this.getCssClass() + "-cell-selected", o), goog.a11y.aria.setState(e, goog.a11y.aria.State.SELECTED, o))
}, goog.ui.PaletteRenderer.prototype.getCssClass = function() {
    return goog.ui.PaletteRenderer.CSS_CLASS
}, goog.ui.SelectionModel = function(e) {
    goog.events.EventTarget.call(this), this.items_ = [], this.addItems(e)
}, goog.inherits(goog.ui.SelectionModel, goog.events.EventTarget), goog.tagUnsealableClass(goog.ui.SelectionModel), goog.ui.SelectionModel.prototype.selectedItem_ = null, goog.ui.SelectionModel.prototype.selectionHandler_ = null, goog.ui.SelectionModel.prototype.getSelectionHandler = function() {
    return this.selectionHandler_
}, goog.ui.SelectionModel.prototype.setSelectionHandler = function(e) {
    this.selectionHandler_ = e
}, goog.ui.SelectionModel.prototype.getItemCount = function() {
    return this.items_.length
}, goog.ui.SelectionModel.prototype.indexOfItem = function(e) {
    return e ? goog.array.indexOf(this.items_, e) : -1
}, goog.ui.SelectionModel.prototype.getFirst = function() {
    return this.items_[0]
}, goog.ui.SelectionModel.prototype.getLast = function() {
    return this.items_[this.items_.length - 1]
}, goog.ui.SelectionModel.prototype.getItemAt = function(e) {
    return this.items_[e] || null
}, goog.ui.SelectionModel.prototype.addItems = function(e) {
    e && (goog.array.forEach(e, function(e) {
        this.selectItem_(e, !1)
    }, this), goog.array.extend(this.items_, e))
}, goog.ui.SelectionModel.prototype.addItem = function(e) {
    this.addItemAt(e, this.getItemCount())
}, goog.ui.SelectionModel.prototype.addItemAt = function(e, t) {
    e && (this.selectItem_(e, !1), goog.array.insertAt(this.items_, e, t))
}, goog.ui.SelectionModel.prototype.removeItem = function(e) {
    e && goog.array.remove(this.items_, e) && e == this.selectedItem_ && (this.selectedItem_ = null, this.dispatchEvent(goog.events.EventType.SELECT))
}, goog.ui.SelectionModel.prototype.removeItemAt = function(e) {
    this.removeItem(this.getItemAt(e))
}, goog.ui.SelectionModel.prototype.getSelectedItem = function() {
    return this.selectedItem_
}, goog.ui.SelectionModel.prototype.getItems = function() {
    return goog.array.clone(this.items_)
}, goog.ui.SelectionModel.prototype.setSelectedItem = function(e) {
    e != this.selectedItem_ && (this.selectItem_(this.selectedItem_, !1), this.selectedItem_ = e, this.selectItem_(e, !0)), this.dispatchEvent(goog.events.EventType.SELECT)
}, goog.ui.SelectionModel.prototype.getSelectedIndex = function() {
    return this.indexOfItem(this.selectedItem_)
}, goog.ui.SelectionModel.prototype.setSelectedIndex = function(e) {
    this.setSelectedItem(this.getItemAt(e))
}, goog.ui.SelectionModel.prototype.clear = function() {
    goog.array.clear(this.items_), this.selectedItem_ = null
}, goog.ui.SelectionModel.prototype.disposeInternal = function() {
    goog.ui.SelectionModel.superClass_.disposeInternal.call(this), delete this.items_, this.selectedItem_ = null
}, goog.ui.SelectionModel.prototype.selectItem_ = function(e, t) {
    e && ("function" == typeof this.selectionHandler_ ? this.selectionHandler_(e, t) : "function" == typeof e.setSelected && e.setSelected(t))
}, goog.ui.Palette = function(e, t, o) {
    goog.ui.Control.call(this, e, t || goog.ui.PaletteRenderer.getInstance(), o), this.setAutoStates(goog.ui.Component.State.CHECKED | goog.ui.Component.State.SELECTED | goog.ui.Component.State.OPENED, !1), this.currentCellControl_ = new goog.ui.Palette.CurrentCell_, this.currentCellControl_.setParentEventTarget(this), this.lastHighlightedIndex_ = -1
}, goog.inherits(goog.ui.Palette, goog.ui.Control), goog.tagUnsealableClass(goog.ui.Palette), goog.ui.Palette.EventType = {
    AFTER_HIGHLIGHT: goog.events.getUniqueId("afterhighlight")
}, goog.ui.Palette.prototype.size_ = null, goog.ui.Palette.prototype.highlightedIndex_ = -1, goog.ui.Palette.prototype.selectionModel_ = null, goog.ui.Palette.prototype.disposeInternal = function() {
    goog.ui.Palette.superClass_.disposeInternal.call(this), this.selectionModel_ && (this.selectionModel_.dispose(), this.selectionModel_ = null), this.size_ = null, this.currentCellControl_.dispose()
}, goog.ui.Palette.prototype.setContentInternal = function(e) {
    goog.ui.Palette.superClass_.setContentInternal.call(this, e), this.adjustSize_(), this.selectionModel_ ? (this.selectionModel_.clear(), this.selectionModel_.addItems(e)) : (this.selectionModel_ = new goog.ui.SelectionModel(e), this.selectionModel_.setSelectionHandler(goog.bind(this.selectItem_, this)), this.getHandler().listen(this.selectionModel_, goog.events.EventType.SELECT, this.handleSelectionChange)), this.highlightedIndex_ = -1
}, goog.ui.Palette.prototype.getCaption = function() {
    return ""
}, goog.ui.Palette.prototype.setCaption = function(e) {}, goog.ui.Palette.prototype.handleMouseOver = function(e) {
    goog.ui.Palette.superClass_.handleMouseOver.call(this, e);
    var t = this.getRenderer().getContainingItem(this, e.target);
    t && e.relatedTarget && goog.dom.contains(t, e.relatedTarget) || t != this.getHighlightedItem() && this.setHighlightedItem(t)
}, goog.ui.Palette.prototype.handleMouseDown = function(e) {
    goog.ui.Palette.superClass_.handleMouseDown.call(this, e), this.isActive() && (e = this.getRenderer().getContainingItem(this, e.target), e != this.getHighlightedItem() && this.setHighlightedItem(e))
}, goog.ui.Palette.prototype.performActionInternal = function(e) {
    var t = this.getHighlightedItem();
    return t ? (e && this.shouldSelectHighlightedItem_(e) && this.setSelectedItem(t), goog.ui.Palette.superClass_.performActionInternal.call(this, e)) : !1
}, goog.ui.Palette.prototype.shouldSelectHighlightedItem_ = function(e) {
    return this.getSelectedItem() ? "mouseup" != e.type ? !0 : !!this.getRenderer().getContainingItem(this, e.target) : !0
}, goog.ui.Palette.prototype.handleKeyEvent = function(e) {
    var t = this.getContent(),
        t = t ? t.length : 0,
        o = this.size_.width;
    if (0 == t || !this.isEnabled()) return !1;
    if (e.keyCode == goog.events.KeyCodes.ENTER || e.keyCode == goog.events.KeyCodes.SPACE) return this.performActionInternal(e);
    if (e.keyCode == goog.events.KeyCodes.HOME) return this.setHighlightedIndex(0), !0;
    if (e.keyCode == goog.events.KeyCodes.END) return this.setHighlightedIndex(t - 1), !0;
    var n = 0 > this.highlightedIndex_ ? this.getSelectedIndex() : this.highlightedIndex_;
    switch (e.keyCode) {
        case goog.events.KeyCodes.LEFT:
            return -1 != n && 0 != n || (n = t), this.setHighlightedIndex(n - 1), e.preventDefault(), !0;
        case goog.events.KeyCodes.RIGHT:
            return n == t - 1 && (n = -1), this.setHighlightedIndex(n + 1), e.preventDefault(), !0;
        case goog.events.KeyCodes.UP:
            if (-1 == n && (n = t + o - 1), n >= o) return this.setHighlightedIndex(n - o), e.preventDefault(), !0;
            break;
        case goog.events.KeyCodes.DOWN:
            if (-1 == n && (n = -o), t - o > n) return this.setHighlightedIndex(n + o), e.preventDefault(), !0
    }
    return !1
}, goog.ui.Palette.prototype.handleSelectionChange = function(e) {}, goog.ui.Palette.prototype.getSize = function() {
    return this.size_
}, goog.ui.Palette.prototype.setSize = function(e, t) {
    if (this.getElement()) throw Error(goog.ui.Component.Error.ALREADY_RENDERED);
    this.size_ = goog.isNumber(e) ? new goog.math.Size(e, t) : e, this.adjustSize_()
}, goog.ui.Palette.prototype.getHighlightedIndex = function() {
    return this.highlightedIndex_
}, goog.ui.Palette.prototype.getHighlightedItem = function() {
    var e = this.getContent();
    return e && e[this.highlightedIndex_]
}, goog.ui.Palette.prototype.getHighlightedCellElement_ = function() {
    return this.getRenderer().getCellForItem(this.getHighlightedItem())
}, goog.ui.Palette.prototype.setHighlightedIndex = function(e) {
    e != this.highlightedIndex_ && (this.highlightIndex_(this.highlightedIndex_, !1), this.lastHighlightedIndex_ = this.highlightedIndex_, this.highlightedIndex_ = e, this.highlightIndex_(e, !0), this.dispatchEvent(goog.ui.Palette.EventType.AFTER_HIGHLIGHT))
}, goog.ui.Palette.prototype.setHighlightedItem = function(e) {
    var t = this.getContent();
    this.setHighlightedIndex(t && e ? goog.array.indexOf(t, e) : -1)
}, goog.ui.Palette.prototype.getSelectedIndex = function() {
    return this.selectionModel_ ? this.selectionModel_.getSelectedIndex() : -1
}, goog.ui.Palette.prototype.getSelectedItem = function() {
    return this.selectionModel_ ? this.selectionModel_.getSelectedItem() : null
}, goog.ui.Palette.prototype.setSelectedIndex = function(e) {
    this.selectionModel_ && this.selectionModel_.setSelectedIndex(e)
}, goog.ui.Palette.prototype.setSelectedItem = function(e) {
    this.selectionModel_ && this.selectionModel_.setSelectedItem(e)
}, goog.ui.Palette.prototype.highlightIndex_ = function(e, t) {
    if (this.getElement()) {
        var o = this.getContent();
        if (o && e >= 0 && e < o.length) {
            var n = this.getHighlightedCellElement_();
            this.currentCellControl_.getElement() != n && this.currentCellControl_.setElementInternal(n), this.currentCellControl_.tryHighlight(t) && this.getRenderer().highlightCell(this, o[e], t)
        }
    }
}, goog.ui.Palette.prototype.setHighlighted = function(e) {
    e && -1 == this.highlightedIndex_ ? this.setHighlightedIndex(-1 < this.lastHighlightedIndex_ ? this.lastHighlightedIndex_ : 0) : e || this.setHighlightedIndex(-1), goog.ui.Palette.superClass_.setHighlighted.call(this, e)
}, goog.ui.Palette.prototype.selectItem_ = function(e, t) {
    this.getElement() && this.getRenderer().selectCell(this, e, t)
}, goog.ui.Palette.prototype.adjustSize_ = function() {
    var e = this.getContent();
    e ? this.size_ && this.size_.width ? (e = Math.ceil(e.length / this.size_.width), (!goog.isNumber(this.size_.height) || this.size_.height < e) && (this.size_.height = e)) : (e = Math.ceil(Math.sqrt(e.length)), this.size_ = new goog.math.Size(e, e)) : this.size_ = new goog.math.Size(0, 0)
}, goog.ui.Palette.CurrentCell_ = function() {
    goog.ui.Control.call(this, null), this.setDispatchTransitionEvents(goog.ui.Component.State.HOVER, !0)
}, goog.inherits(goog.ui.Palette.CurrentCell_, goog.ui.Control), goog.ui.Palette.CurrentCell_.prototype.tryHighlight = function(e) {
    return this.setHighlighted(e), this.isHighlighted() == e
}, goog.ui.ColorPalette = function(e, t, o) {
    this.colors_ = e || [], goog.ui.Palette.call(this, null, t || goog.ui.PaletteRenderer.getInstance(), o), this.setColors(this.colors_)
}, goog.inherits(goog.ui.ColorPalette, goog.ui.Palette), goog.tagUnsealableClass(goog.ui.ColorPalette), goog.ui.ColorPalette.prototype.normalizedColors_ = null, goog.ui.ColorPalette.prototype.labels_ = null, goog.ui.ColorPalette.prototype.getColors = function() {
    return this.colors_
}, goog.ui.ColorPalette.prototype.setColors = function(e, t) {
    this.colors_ = e, this.labels_ = t || null, this.normalizedColors_ = null, this.setContent(this.createColorNodes())
}, goog.ui.ColorPalette.prototype.getSelectedColor = function() {
    var e = this.getSelectedItem();
    return e ? (e = goog.style.getStyle(e, "background-color"), goog.ui.ColorPalette.parseColor_(e)) : null
}, goog.ui.ColorPalette.prototype.setSelectedColor = function(e) {
    e = goog.ui.ColorPalette.parseColor_(e), this.normalizedColors_ || (this.normalizedColors_ = goog.array.map(this.colors_, function(e) {
        return goog.ui.ColorPalette.parseColor_(e)
    })), this.setSelectedIndex(e ? goog.array.indexOf(this.normalizedColors_, e) : -1)
}, goog.ui.ColorPalette.prototype.createColorNodes = function() {
    return goog.array.map(this.colors_, function(e, t) {
        var o = this.getDomHelper().createDom(goog.dom.TagName.DIV, {
            "class": this.getRenderer().getCssClass() + "-colorswatch",
            style: "background-color:" + e
        });
        return o.title = this.labels_ && this.labels_[t] ? this.labels_[t] : "#" == e.charAt(0) ? "RGB (" + goog.color.hexToRgb(e).join(", ") + ")" : e, o
    }, this)
}, goog.ui.ColorPalette.parseColor_ = function(e) {
    if (e) try {
        return goog.color.parse(e).hex
    } catch (t) {}
    return null
}, goog.ui.ColorPicker = function(e, t) {
    goog.ui.Component.call(this, e), this.colorPalette_ = t || null, this.getHandler().listen(this, goog.ui.Component.EventType.ACTION, this.onColorPaletteAction_)
}, goog.inherits(goog.ui.ColorPicker, goog.ui.Component), goog.ui.ColorPicker.DEFAULT_NUM_COLS = 5, goog.ui.ColorPicker.EventType = {
    CHANGE: "change"
}, goog.ui.ColorPicker.prototype.focusable_ = !0, goog.ui.ColorPicker.prototype.getColors = function() {
    return this.colorPalette_ ? this.colorPalette_.getColors() : null
}, goog.ui.ColorPicker.prototype.setColors = function(e) {
    this.colorPalette_ ? this.colorPalette_.setColors(e) : this.createColorPalette_(e)
}, goog.ui.ColorPicker.prototype.addColors = function(e) {
    this.setColors(e)
}, goog.ui.ColorPicker.prototype.setSize = function(e) {
    this.colorPalette_ || this.createColorPalette_([]), this.colorPalette_.setSize(e)
}, goog.ui.ColorPicker.prototype.getSize = function() {
    return this.colorPalette_ ? this.colorPalette_.getSize() : null
}, goog.ui.ColorPicker.prototype.setColumnCount = function(e) {
    this.setSize(e)
}, goog.ui.ColorPicker.prototype.getSelectedIndex = function() {
    return this.colorPalette_ ? this.colorPalette_.getSelectedIndex() : -1
}, goog.ui.ColorPicker.prototype.setSelectedIndex = function(e) {
    this.colorPalette_ && this.colorPalette_.setSelectedIndex(e)
}, goog.ui.ColorPicker.prototype.getSelectedColor = function() {
    return this.colorPalette_ ? this.colorPalette_.getSelectedColor() : null
}, goog.ui.ColorPicker.prototype.setSelectedColor = function(e) {
    this.colorPalette_ && this.colorPalette_.setSelectedColor(e)
}, goog.ui.ColorPicker.prototype.isFocusable = function() {
    return this.focusable_
}, goog.ui.ColorPicker.prototype.setFocusable = function(e) {
    this.focusable_ = e, this.colorPalette_ && this.colorPalette_.setSupportedState(goog.ui.Component.State.FOCUSED, e)
}, goog.ui.ColorPicker.prototype.canDecorate = function(e) {
    return !1
}, goog.ui.ColorPicker.prototype.enterDocument = function() {
    goog.ui.ColorPicker.superClass_.enterDocument.call(this), this.colorPalette_ && this.colorPalette_.render(this.getElement()), this.getElement().unselectable = "on"
}, goog.ui.ColorPicker.prototype.disposeInternal = function() {
    goog.ui.ColorPicker.superClass_.disposeInternal.call(this), this.colorPalette_ && (this.colorPalette_.dispose(), this.colorPalette_ = null)
}, goog.ui.ColorPicker.prototype.focus = function() {
    this.colorPalette_ && this.colorPalette_.getElement().focus();
}, goog.ui.ColorPicker.prototype.onColorPaletteAction_ = function(e) {
    e.stopPropagation(), this.dispatchEvent(goog.ui.ColorPicker.EventType.CHANGE)
}, goog.ui.ColorPicker.prototype.createColorPalette_ = function(e) {
    e = new goog.ui.ColorPalette(e, null, this.getDomHelper()), e.setSize(goog.ui.ColorPicker.DEFAULT_NUM_COLS), e.setSupportedState(goog.ui.Component.State.FOCUSED, this.focusable_), this.addChild(e), this.colorPalette_ = e, this.isInDocument() && this.colorPalette_.render(this.getElement())
}, goog.ui.ColorPicker.createSimpleColorGrid = function(e) {
    return e = new goog.ui.ColorPicker(e), e.setSize(7), e.setColors(goog.ui.ColorPicker.SIMPLE_GRID_COLORS), e
}, goog.ui.ColorPicker.SIMPLE_GRID_COLORS = "#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "), goog.events.FocusHandler = function(e) {
    goog.events.EventTarget.call(this), this.element_ = e, e = goog.userAgent.IE ? "focusout" : "blur", this.listenKeyIn_ = goog.events.listen(this.element_, goog.userAgent.IE ? "focusin" : "focus", this, !goog.userAgent.IE), this.listenKeyOut_ = goog.events.listen(this.element_, e, this, !goog.userAgent.IE)
}, goog.inherits(goog.events.FocusHandler, goog.events.EventTarget), goog.events.FocusHandler.EventType = {
    FOCUSIN: "focusin",
    FOCUSOUT: "focusout"
}, goog.events.FocusHandler.prototype.handleEvent = function(e) {
    var t = e.getBrowserEvent(),
        t = new goog.events.BrowserEvent(t);
    t.type = "focusin" == e.type || "focus" == e.type ? goog.events.FocusHandler.EventType.FOCUSIN : goog.events.FocusHandler.EventType.FOCUSOUT, this.dispatchEvent(t)
}, goog.events.FocusHandler.prototype.disposeInternal = function() {
    goog.events.FocusHandler.superClass_.disposeInternal.call(this), goog.events.unlistenByKey(this.listenKeyIn_), goog.events.unlistenByKey(this.listenKeyOut_), delete this.element_
}, goog.html.SafeScript = function() {
    this.privateDoNotAccessOrElseSafeScriptWrappedValue_ = "", this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_
}, goog.html.SafeScript.prototype.implementsGoogStringTypedString = !0, goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {}, goog.html.SafeScript.fromConstant = function(e) {
    return e = goog.string.Const.unwrap(e), 0 === e.length ? goog.html.SafeScript.EMPTY : goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)
}, goog.html.SafeScript.prototype.getTypedStringValue = function() {
    return this.privateDoNotAccessOrElseSafeScriptWrappedValue_
}, goog.DEBUG && (goog.html.SafeScript.prototype.toString = function() {
    return "SafeScript{" + this.privateDoNotAccessOrElseSafeScriptWrappedValue_ + "}"
}), goog.html.SafeScript.unwrap = function(e) {
    return e instanceof goog.html.SafeScript && e.constructor === goog.html.SafeScript && e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ === goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ? e.privateDoNotAccessOrElseSafeScriptWrappedValue_ : (goog.asserts.fail("expected object of type SafeScript, got '" + e + "' of type " + goog.typeOf(e)), "type_error:SafeScript")
}, goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse = function(e) {
    return (new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)
}, goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_ = function(e) {
    return this.privateDoNotAccessOrElseSafeScriptWrappedValue_ = e, this
}, goog.html.SafeScript.EMPTY = goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""), goog.html.uncheckedconversions = {}, goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract = function(e, t, o) {
    return goog.asserts.assertString(goog.string.Const.unwrap(e), "must provide justification"), goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)), "must provide non-empty justification"), goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t, o || null)
}, goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract = function(e, t) {
    return goog.asserts.assertString(goog.string.Const.unwrap(e), "must provide justification"), goog.asserts.assert(!goog.string.isEmpty(goog.string.Const.unwrap(e)), "must provide non-empty justification"), goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)
}, goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract = function(e, t) {
    return goog.asserts.assertString(goog.string.Const.unwrap(e), "must provide justification"), goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)), "must provide non-empty justification"), goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)
}, goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract = function(e, t) {
    return goog.asserts.assertString(goog.string.Const.unwrap(e), "must provide justification"), goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)), "must provide non-empty justification"), goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)
}, goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract = function(e, t) {
    return goog.asserts.assertString(goog.string.Const.unwrap(e), "must provide justification"), goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)), "must provide non-empty justification"), goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)
}, goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract = function(e, t) {
    return goog.asserts.assertString(goog.string.Const.unwrap(e), "must provide justification"), goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)), "must provide non-empty justification"), goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)
}, goog.structs = {}, goog.structs.getCount = function(e) {
    return e.getCount && "function" == typeof e.getCount ? e.getCount() : goog.isArrayLike(e) || goog.isString(e) ? e.length : goog.object.getCount(e)
}, goog.structs.getValues = function(e) {
    if (e.getValues && "function" == typeof e.getValues) return e.getValues();
    if (goog.isString(e)) return e.split("");
    if (goog.isArrayLike(e)) {
        for (var t = [], o = e.length, n = 0; o > n; n++) t.push(e[n]);
        return t
    }
    return goog.object.getValues(e)
}, goog.structs.getKeys = function(e) {
    if (e.getKeys && "function" == typeof e.getKeys) return e.getKeys();
    if (!e.getValues || "function" != typeof e.getValues) {
        if (goog.isArrayLike(e) || goog.isString(e)) {
            var t = [];
            e = e.length;
            for (var o = 0; e > o; o++) t.push(o);
            return t
        }
        return goog.object.getKeys(e)
    }
}, goog.structs.contains = function(e, t) {
    return e.contains && "function" == typeof e.contains ? e.contains(t) : e.containsValue && "function" == typeof e.containsValue ? e.containsValue(t) : goog.isArrayLike(e) || goog.isString(e) ? goog.array.contains(e, t) : goog.object.containsValue(e, t)
}, goog.structs.isEmpty = function(e) {
    return e.isEmpty && "function" == typeof e.isEmpty ? e.isEmpty() : goog.isArrayLike(e) || goog.isString(e) ? goog.array.isEmpty(e) : goog.object.isEmpty(e)
}, goog.structs.clear = function(e) {
    e.clear && "function" == typeof e.clear ? e.clear() : goog.isArrayLike(e) ? goog.array.clear(e) : goog.object.clear(e)
}, goog.structs.forEach = function(e, t, o) {
    if (e.forEach && "function" == typeof e.forEach) e.forEach(t, o);
    else if (goog.isArrayLike(e) || goog.isString(e)) goog.array.forEach(e, t, o);
    else
        for (var n = goog.structs.getKeys(e), i = goog.structs.getValues(e), r = i.length, s = 0; r > s; s++) t.call(o, i[s], n && n[s], e)
}, goog.structs.filter = function(e, t, o) {
    if ("function" == typeof e.filter) return e.filter(t, o);
    if (goog.isArrayLike(e) || goog.isString(e)) return goog.array.filter(e, t, o);
    var n, i = goog.structs.getKeys(e),
        r = goog.structs.getValues(e),
        s = r.length;
    if (i) {
        n = {};
        for (var a = 0; s > a; a++) t.call(o, r[a], i[a], e) && (n[i[a]] = r[a])
    } else
        for (n = [], a = 0; s > a; a++) t.call(o, r[a], void 0, e) && n.push(r[a]);
    return n
}, goog.structs.map = function(e, t, o) {
    if ("function" == typeof e.map) return e.map(t, o);
    if (goog.isArrayLike(e) || goog.isString(e)) return goog.array.map(e, t, o);
    var n, i = goog.structs.getKeys(e),
        r = goog.structs.getValues(e),
        s = r.length;
    if (i) {
        n = {};
        for (var a = 0; s > a; a++) n[i[a]] = t.call(o, r[a], i[a], e)
    } else
        for (n = [], a = 0; s > a; a++) n[a] = t.call(o, r[a], void 0, e);
    return n
}, goog.structs.some = function(e, t, o) {
    if ("function" == typeof e.some) return e.some(t, o);
    if (goog.isArrayLike(e) || goog.isString(e)) return goog.array.some(e, t, o);
    for (var n = goog.structs.getKeys(e), i = goog.structs.getValues(e), r = i.length, s = 0; r > s; s++)
        if (t.call(o, i[s], n && n[s], e)) return !0;
    return !1
}, goog.structs.every = function(e, t, o) {
    if ("function" == typeof e.every) return e.every(t, o);
    if (goog.isArrayLike(e) || goog.isString(e)) return goog.array.every(e, t, o);
    for (var n = goog.structs.getKeys(e), i = goog.structs.getValues(e), r = i.length, s = 0; r > s; s++)
        if (!t.call(o, i[s], n && n[s], e)) return !1;
    return !0
}, goog.structs.Collection = function() {}, goog.structs.Map = function(e, t) {
    this.map_ = {}, this.keys_ = [], this.version_ = this.count_ = 0;
    var o = arguments.length;
    if (o > 1) {
        if (o % 2) throw Error("Uneven number of arguments");
        for (var n = 0; o > n; n += 2) this.set(arguments[n], arguments[n + 1])
    } else e && this.addAll(e)
}, goog.structs.Map.prototype.getCount = function() {
    return this.count_
}, goog.structs.Map.prototype.getValues = function() {
    this.cleanupKeysArray_();
    for (var e = [], t = 0; t < this.keys_.length; t++) e.push(this.map_[this.keys_[t]]);
    return e
}, goog.structs.Map.prototype.getKeys = function() {
    return this.cleanupKeysArray_(), this.keys_.concat()
}, goog.structs.Map.prototype.containsKey = function(e) {
    return goog.structs.Map.hasKey_(this.map_, e)
}, goog.structs.Map.prototype.containsValue = function(e) {
    for (var t = 0; t < this.keys_.length; t++) {
        var o = this.keys_[t];
        if (goog.structs.Map.hasKey_(this.map_, o) && this.map_[o] == e) return !0
    }
    return !1
}, goog.structs.Map.prototype.equals = function(e, t) {
    if (this === e) return !0;
    if (this.count_ != e.getCount()) return !1;
    var o = t || goog.structs.Map.defaultEquals;
    this.cleanupKeysArray_();
    for (var n, i = 0; n = this.keys_[i]; i++)
        if (!o(this.get(n), e.get(n))) return !1;
    return !0
}, goog.structs.Map.defaultEquals = function(e, t) {
    return e === t
}, goog.structs.Map.prototype.isEmpty = function() {
    return 0 == this.count_
}, goog.structs.Map.prototype.clear = function() {
    this.map_ = {}, this.version_ = this.count_ = this.keys_.length = 0
}, goog.structs.Map.prototype.remove = function(e) {
    return goog.structs.Map.hasKey_(this.map_, e) ? (delete this.map_[e], this.count_--, this.version_++, this.keys_.length > 2 * this.count_ && this.cleanupKeysArray_(), !0) : !1
}, goog.structs.Map.prototype.cleanupKeysArray_ = function() {
    if (this.count_ != this.keys_.length) {
        for (var e = 0, t = 0; e < this.keys_.length;) {
            var o = this.keys_[e];
            goog.structs.Map.hasKey_(this.map_, o) && (this.keys_[t++] = o), e++
        }
        this.keys_.length = t
    }
    if (this.count_ != this.keys_.length) {
        for (var n = {}, t = e = 0; e < this.keys_.length;) o = this.keys_[e], goog.structs.Map.hasKey_(n, o) || (this.keys_[t++] = o, n[o] = 1), e++;
        this.keys_.length = t
    }
}, goog.structs.Map.prototype.get = function(e, t) {
    return goog.structs.Map.hasKey_(this.map_, e) ? this.map_[e] : t
}, goog.structs.Map.prototype.set = function(e, t) {
    goog.structs.Map.hasKey_(this.map_, e) || (this.count_++, this.keys_.push(e), this.version_++), this.map_[e] = t
}, goog.structs.Map.prototype.addAll = function(e) {
    var t;
    e instanceof goog.structs.Map ? (t = e.getKeys(), e = e.getValues()) : (t = goog.object.getKeys(e), e = goog.object.getValues(e));
    for (var o = 0; o < t.length; o++) this.set(t[o], e[o])
}, goog.structs.Map.prototype.forEach = function(e, t) {
    for (var o = this.getKeys(), n = 0; n < o.length; n++) {
        var i = o[n],
            r = this.get(i);
        e.call(t, r, i, this)
    }
}, goog.structs.Map.prototype.clone = function() {
    return new goog.structs.Map(this)
}, goog.structs.Map.prototype.transpose = function() {
    for (var e = new goog.structs.Map, t = 0; t < this.keys_.length; t++) {
        var o = this.keys_[t];
        e.set(this.map_[o], o)
    }
    return e
}, goog.structs.Map.prototype.toObject = function() {
    this.cleanupKeysArray_();
    for (var e = {}, t = 0; t < this.keys_.length; t++) {
        var o = this.keys_[t];
        e[o] = this.map_[o]
    }
    return e
}, goog.structs.Map.prototype.getKeyIterator = function() {
    return this.__iterator__(!0)
}, goog.structs.Map.prototype.getValueIterator = function() {
    return this.__iterator__(!1)
}, goog.structs.Map.prototype.__iterator__ = function(e) {
    this.cleanupKeysArray_();
    var t = 0,
        o = this.version_,
        n = this,
        i = new goog.iter.Iterator;
    return i.next = function() {
        if (o != n.version_) throw Error("The map has changed since the iterator was created");
        if (t >= n.keys_.length) throw goog.iter.StopIteration;
        var i = n.keys_[t++];
        return e ? i : n.map_[i]
    }, i
}, goog.structs.Map.hasKey_ = function(e, t) {
    return Object.prototype.hasOwnProperty.call(e, t)
}, goog.structs.Set = function(e) {
    this.map_ = new goog.structs.Map, e && this.addAll(e)
}, goog.structs.Set.getKey_ = function(e) {
    var t = typeof e;
    return "object" == t && e || "function" == t ? "o" + goog.getUid(e) : t.substr(0, 1) + e
}, goog.structs.Set.prototype.getCount = function() {
    return this.map_.getCount()
}, goog.structs.Set.prototype.add = function(e) {
    this.map_.set(goog.structs.Set.getKey_(e), e)
}, goog.structs.Set.prototype.addAll = function(e) {
    e = goog.structs.getValues(e);
    for (var t = e.length, o = 0; t > o; o++) this.add(e[o])
}, goog.structs.Set.prototype.removeAll = function(e) {
    e = goog.structs.getValues(e);
    for (var t = e.length, o = 0; t > o; o++) this.remove(e[o])
}, goog.structs.Set.prototype.remove = function(e) {
    return this.map_.remove(goog.structs.Set.getKey_(e))
}, goog.structs.Set.prototype.clear = function() {
    this.map_.clear()
}, goog.structs.Set.prototype.isEmpty = function() {
    return this.map_.isEmpty()
}, goog.structs.Set.prototype.contains = function(e) {
    return this.map_.containsKey(goog.structs.Set.getKey_(e))
}, goog.structs.Set.prototype.containsAll = function(e) {
    return goog.structs.every(e, this.contains, this)
}, goog.structs.Set.prototype.intersection = function(e) {
    var t = new goog.structs.Set;
    e = goog.structs.getValues(e);
    for (var o = 0; o < e.length; o++) {
        var n = e[o];
        this.contains(n) && t.add(n)
    }
    return t
}, goog.structs.Set.prototype.difference = function(e) {
    var t = this.clone();
    return t.removeAll(e), t
}, goog.structs.Set.prototype.getValues = function() {
    return this.map_.getValues()
}, goog.structs.Set.prototype.clone = function() {
    return new goog.structs.Set(this)
}, goog.structs.Set.prototype.equals = function(e) {
    return this.getCount() == goog.structs.getCount(e) && this.isSubsetOf(e)
}, goog.structs.Set.prototype.isSubsetOf = function(e) {
    var t = goog.structs.getCount(e);
    return this.getCount() > t ? !1 : (!(e instanceof goog.structs.Set) && t > 5 && (e = new goog.structs.Set(e)), goog.structs.every(this, function(t) {
        return goog.structs.contains(e, t)
    }))
}, goog.structs.Set.prototype.__iterator__ = function(e) {
    return this.map_.__iterator__(!1)
}, goog.debug.LOGGING_ENABLED = goog.DEBUG, goog.debug.FORCE_SLOPPY_STACKS = !1, goog.debug.catchErrors = function(e, t, o) {
    o = o || goog.global;
    var n = o.onerror,
        i = !!t;
    goog.userAgent.WEBKIT && !goog.userAgent.isVersionOrHigher("535.3") && (i = !i), o.onerror = function(t, o, r, s, a) {
        return n && n(t, o, r, s, a), e({
            message: t,
            fileName: o,
            line: r,
            col: s,
            error: a
        }), i
    }
}, goog.debug.expose = function(e, t) {
    if ("undefined" == typeof e) return "undefined";
    if (null == e) return "NULL";
    var o, n = [];
    for (o in e)
        if (t || !goog.isFunction(e[o])) {
            var i = o + " = ";
            try {
                i += e[o]
            } catch (r) {
                i += "*** " + r + " ***"
            }
            n.push(i)
        }
    return n.join("\n")
}, goog.debug.deepExpose = function(e, t) {
    var o = [],
        n = function(e, i, r) {
            var s = i + "  ";
            r = new goog.structs.Set(r);
            try {
                if (goog.isDef(e))
                    if (goog.isNull(e)) o.push("NULL");
                    else if (goog.isString(e)) o.push('"' + e.replace(/\n/g, "\n" + i) + '"');
                else if (goog.isFunction(e)) o.push(String(e).replace(/\n/g, "\n" + i));
                else if (goog.isObject(e))
                    if (r.contains(e)) o.push("*** reference loop detected ***");
                    else {
                        r.add(e), o.push("{");
                        for (var a in e) !t && goog.isFunction(e[a]) || (o.push("\n"), o.push(s), o.push(a + " = "), n(e[a], s, r));
                        o.push("\n" + i + "}")
                    } else o.push(e);
                else o.push("undefined")
            } catch (l) {
                o.push("*** " + l + " ***")
            }
        };
    return n(e, "", new goog.structs.Set), o.join("")
}, goog.debug.exposeArray = function(e) {
    for (var t = [], o = 0; o < e.length; o++) goog.isArray(e[o]) ? t.push(goog.debug.exposeArray(e[o])) : t.push(e[o]);
    return "[ " + t.join(", ") + " ]"
}, goog.debug.exposeException = function(e, t) {
    var o = goog.debug.exposeExceptionAsHtml(e, t);
    return goog.html.SafeHtml.unwrap(o)
}, goog.debug.exposeExceptionAsHtml = function(e, t) {
    try {
        var o = goog.debug.normalizeErrorObject(e),
            n = goog.debug.createViewSourceUrl_(o.fileName);
        return goog.html.SafeHtml.concat(goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Message: " + o.message + "\nUrl: "), goog.html.SafeHtml.create("a", {
            href: n,
            target: "_new"
        }, o.fileName), goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("\nLine: " + o.lineNumber + "\n\nBrowser stack:\n" + o.stack + "-> [end]\n\nJS stack traversal:\n" + goog.debug.getStacktrace(t) + "-> "))
    } catch (i) {
        return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Exception trying to expose exception! You win, we lose. " + i)
    }
}, goog.debug.createViewSourceUrl_ = function(e) {
    return goog.isDefAndNotNull(e) || (e = ""), /^https?:\/\//i.test(e) ? (e = goog.html.SafeUrl.sanitize(e), goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("view-source scheme plus HTTP/HTTPS URL"), "view-source:" + goog.html.SafeUrl.unwrap(e))) : goog.html.SafeUrl.fromConstant(goog.string.Const.from("sanitizedviewsrc"))
}, goog.debug.normalizeErrorObject = function(e) {
    var t = goog.getObjectByName("window.location.href");
    if (goog.isString(e)) return {
        message: e,
        name: "Unknown error",
        lineNumber: "Not available",
        fileName: t,
        stack: "Not available"
    };
    var o, n, i = !1;
    try {
        o = e.lineNumber || e.line || "Not available"
    } catch (r) {
        o = "Not available", i = !0
    }
    try {
        n = e.fileName || e.filename || e.sourceURL || goog.global.$googDebugFname || t
    } catch (r) {
        n = "Not available", i = !0
    }
    return !i && e.lineNumber && e.fileName && e.stack && e.message && e.name ? e : {
        message: e.message || "Not available",
        name: e.name || "UnknownError",
        lineNumber: o,
        fileName: n,
        stack: e.stack || "Not available"
    }
}, goog.debug.enhanceError = function(e, t) {
    var o;
    if ("string" == typeof e ? (o = Error(e), Error.captureStackTrace && Error.captureStackTrace(o, goog.debug.enhanceError)) : o = e, o.stack || (o.stack = goog.debug.getStacktrace(goog.debug.enhanceError)), t) {
        for (var n = 0; o["message" + n];) ++n;
        o["message" + n] = String(t)
    }
    return o
}, goog.debug.getStacktraceSimple = function(e) {
    if (!goog.debug.FORCE_SLOPPY_STACKS) {
        var t = goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);
        if (t) return t
    }
    for (var t = [], o = arguments.callee.caller, n = 0; o && (!e || e > n);) {
        t.push(goog.debug.getFunctionName(o)), t.push("()\n");
        try {
            o = o.caller
        } catch (i) {
            t.push("[exception trying to get caller]\n");
            break
        }
        if (n++, n >= goog.debug.MAX_STACK_DEPTH) {
            t.push("[...long stack...]");
            break
        }
    }
    return e && n >= e ? t.push("[...reached max depth limit...]") : t.push("[end]"), t.join("")
}, goog.debug.MAX_STACK_DEPTH = 50, goog.debug.getNativeStackTrace_ = function(e) {
    var t = Error();
    if (Error.captureStackTrace) return Error.captureStackTrace(t, e), String(t.stack);
    try {
        throw t
    } catch (o) {
        t = o
    }
    return (e = t.stack) ? String(e) : null
}, goog.debug.getStacktrace = function(e) {
    var t;
    return goog.debug.FORCE_SLOPPY_STACKS || (t = goog.debug.getNativeStackTrace_(e || goog.debug.getStacktrace)), t || (t = goog.debug.getStacktraceHelper_(e || arguments.callee.caller, [])), t
}, goog.debug.getStacktraceHelper_ = function(e, t) {
    var o = [];
    if (goog.array.contains(t, e)) o.push("[...circular reference...]");
    else if (e && t.length < goog.debug.MAX_STACK_DEPTH) {
        o.push(goog.debug.getFunctionName(e) + "(");
        for (var n = e.arguments, i = 0; n && i < n.length; i++) {
            i > 0 && o.push(", ");
            var r;
            switch (r = n[i], typeof r) {
                case "object":
                    r = r ? "object" : "null";
                    break;
                case "string":
                    break;
                case "number":
                    r = String(r);
                    break;
                case "boolean":
                    r = r ? "true" : "false";
                    break;
                case "function":
                    r = (r = goog.debug.getFunctionName(r)) ? r : "[fn]";
                    break;
                default:
                    r = typeof r
            }
            40 < r.length && (r = r.substr(0, 40) + "..."), o.push(r)
        }
        t.push(e), o.push(")\n");
        try {
            o.push(goog.debug.getStacktraceHelper_(e.caller, t))
        } catch (s) {
            o.push("[exception trying to get caller]\n")
        }
    } else e ? o.push("[...long stack...]") : o.push("[end]");
    return o.join("")
}, goog.debug.setFunctionResolver = function(e) {
    goog.debug.fnNameResolver_ = e
}, goog.debug.getFunctionName = function(e) {
    if (goog.debug.fnNameCache_[e]) return goog.debug.fnNameCache_[e];
    if (goog.debug.fnNameResolver_) {
        var t = goog.debug.fnNameResolver_(e);
        if (t) return goog.debug.fnNameCache_[e] = t
    }
    return e = String(e), goog.debug.fnNameCache_[e] || (t = /function ([^\(]+)/.exec(e), goog.debug.fnNameCache_[e] = t ? t[1] : "[Anonymous]"), goog.debug.fnNameCache_[e]
}, goog.debug.makeWhitespaceVisible = function(e) {
    return e.replace(/ /g, "[_]").replace(/\f/g, "[f]").replace(/\n/g, "[n]\n").replace(/\r/g, "[r]").replace(/\t/g, "[t]")
}, goog.debug.runtimeType = function(e) {
    return e instanceof Function ? e.displayName || e.name || "unknown type name" : e instanceof Object ? e.constructor.displayName || e.constructor.name || Object.prototype.toString.call(e) : null === e ? "null" : typeof e
}, goog.debug.fnNameCache_ = {}, goog.debug.LogRecord = function(e, t, o, n, i) {
    this.reset(e, t, o, n, i)
}, goog.debug.LogRecord.prototype.sequenceNumber_ = 0, goog.debug.LogRecord.prototype.exception_ = null, goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS = !0, goog.debug.LogRecord.nextSequenceNumber_ = 0, goog.debug.LogRecord.prototype.reset = function(e, t, o, n, i) {
    goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS && (this.sequenceNumber_ = "number" == typeof i ? i : goog.debug.LogRecord.nextSequenceNumber_++), this.time_ = n || goog.now(), this.level_ = e, this.msg_ = t, this.loggerName_ = o, delete this.exception_
}, goog.debug.LogRecord.prototype.getLoggerName = function() {
    return this.loggerName_
}, goog.debug.LogRecord.prototype.getException = function() {
    return this.exception_
}, goog.debug.LogRecord.prototype.setException = function(e) {
    this.exception_ = e
}, goog.debug.LogRecord.prototype.setLoggerName = function(e) {
    this.loggerName_ = e
}, goog.debug.LogRecord.prototype.getLevel = function() {
    return this.level_
}, goog.debug.LogRecord.prototype.setLevel = function(e) {
    this.level_ = e
}, goog.debug.LogRecord.prototype.getMessage = function() {
    return this.msg_
}, goog.debug.LogRecord.prototype.setMessage = function(e) {
    this.msg_ = e
}, goog.debug.LogRecord.prototype.getMillis = function() {
    return this.time_
}, goog.debug.LogRecord.prototype.setMillis = function(e) {
    this.time_ = e
}, goog.debug.LogRecord.prototype.getSequenceNumber = function() {
    return this.sequenceNumber_
}, goog.debug.LogBuffer = function() {
    goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(), "Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY."), this.clear()
}, goog.debug.LogBuffer.getInstance = function() {
    return goog.debug.LogBuffer.instance_ || (goog.debug.LogBuffer.instance_ = new goog.debug.LogBuffer), goog.debug.LogBuffer.instance_
}, goog.debug.LogBuffer.CAPACITY = 0, goog.debug.LogBuffer.prototype.addRecord = function(e, t, o) {
    var n = (this.curIndex_ + 1) % goog.debug.LogBuffer.CAPACITY;
    return this.curIndex_ = n, this.isFull_ ? (n = this.buffer_[n], n.reset(e, t, o), n) : (this.isFull_ = n == goog.debug.LogBuffer.CAPACITY - 1, this.buffer_[n] = new goog.debug.LogRecord(e, t, o))
}, goog.debug.LogBuffer.isBufferingEnabled = function() {
    return 0 < goog.debug.LogBuffer.CAPACITY
}, goog.debug.LogBuffer.prototype.clear = function() {
    this.buffer_ = Array(goog.debug.LogBuffer.CAPACITY), this.curIndex_ = -1, this.isFull_ = !1
}, goog.debug.LogBuffer.prototype.forEachRecord = function(e) {
    var t = this.buffer_;
    if (t[0]) {
        var o = this.curIndex_,
            n = this.isFull_ ? o : -1;
        do n = (n + 1) % goog.debug.LogBuffer.CAPACITY, e(t[n]); while (n != o)
    }
}, goog.debug.Logger = function(e) {
    this.name_ = e, this.handlers_ = this.children_ = this.level_ = this.parent_ = null
}, goog.debug.Logger.ROOT_LOGGER_NAME = "", goog.debug.Logger.ENABLE_HIERARCHY = !0, goog.debug.Logger.ENABLE_HIERARCHY || (goog.debug.Logger.rootHandlers_ = []), goog.debug.Logger.Level = function(e, t) {
    this.name = e, this.value = t
}, goog.debug.Logger.Level.prototype.toString = function() {
    return this.name
}, goog.debug.Logger.Level.OFF = new goog.debug.Logger.Level("OFF", 1 / 0), goog.debug.Logger.Level.SHOUT = new goog.debug.Logger.Level("SHOUT", 1200), goog.debug.Logger.Level.SEVERE = new goog.debug.Logger.Level("SEVERE", 1e3), goog.debug.Logger.Level.WARNING = new goog.debug.Logger.Level("WARNING", 900), goog.debug.Logger.Level.INFO = new goog.debug.Logger.Level("INFO", 800), goog.debug.Logger.Level.CONFIG = new goog.debug.Logger.Level("CONFIG", 700), goog.debug.Logger.Level.FINE = new goog.debug.Logger.Level("FINE", 500), goog.debug.Logger.Level.FINER = new goog.debug.Logger.Level("FINER", 400), goog.debug.Logger.Level.FINEST = new goog.debug.Logger.Level("FINEST", 300), goog.debug.Logger.Level.ALL = new goog.debug.Logger.Level("ALL", 0), goog.debug.Logger.Level.PREDEFINED_LEVELS = [goog.debug.Logger.Level.OFF, goog.debug.Logger.Level.SHOUT, goog.debug.Logger.Level.SEVERE, goog.debug.Logger.Level.WARNING, goog.debug.Logger.Level.INFO, goog.debug.Logger.Level.CONFIG, goog.debug.Logger.Level.FINE, goog.debug.Logger.Level.FINER, goog.debug.Logger.Level.FINEST, goog.debug.Logger.Level.ALL], goog.debug.Logger.Level.predefinedLevelsCache_ = null, goog.debug.Logger.Level.createPredefinedLevelsCache_ = function() {
    goog.debug.Logger.Level.predefinedLevelsCache_ = {};
    for (var e, t = 0; e = goog.debug.Logger.Level.PREDEFINED_LEVELS[t]; t++) goog.debug.Logger.Level.predefinedLevelsCache_[e.value] = e, goog.debug.Logger.Level.predefinedLevelsCache_[e.name] = e
}, goog.debug.Logger.Level.getPredefinedLevel = function(e) {
    return goog.debug.Logger.Level.predefinedLevelsCache_ || goog.debug.Logger.Level.createPredefinedLevelsCache_(), goog.debug.Logger.Level.predefinedLevelsCache_[e] || null
}, goog.debug.Logger.Level.getPredefinedLevelByValue = function(e) {
    if (goog.debug.Logger.Level.predefinedLevelsCache_ || goog.debug.Logger.Level.createPredefinedLevelsCache_(), e in goog.debug.Logger.Level.predefinedLevelsCache_) return goog.debug.Logger.Level.predefinedLevelsCache_[e];
    for (var t = 0; t < goog.debug.Logger.Level.PREDEFINED_LEVELS.length; ++t) {
        var o = goog.debug.Logger.Level.PREDEFINED_LEVELS[t];
        if (o.value <= e) return o
    }
    return null
}, goog.debug.Logger.getLogger = function(e) {
    return goog.debug.LogManager.getLogger(e)
}, goog.debug.Logger.logToProfilers = function(e) {
    goog.global.console && (goog.global.console.timeStamp ? goog.global.console.timeStamp(e) : goog.global.console.markTimeline && goog.global.console.markTimeline(e)), goog.global.msWriteProfilerMark && goog.global.msWriteProfilerMark(e)
}, goog.debug.Logger.prototype.getName = function() {
    return this.name_
}, goog.debug.Logger.prototype.addHandler = function(e) {
    goog.debug.LOGGING_ENABLED && (goog.debug.Logger.ENABLE_HIERARCHY ? (this.handlers_ || (this.handlers_ = []), this.handlers_.push(e)) : (goog.asserts.assert(!this.name_, "Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."), goog.debug.Logger.rootHandlers_.push(e)))
}, goog.debug.Logger.prototype.removeHandler = function(e) {
    if (goog.debug.LOGGING_ENABLED) {
        var t = goog.debug.Logger.ENABLE_HIERARCHY ? this.handlers_ : goog.debug.Logger.rootHandlers_;
        return !!t && goog.array.remove(t, e)
    }
    return !1
}, goog.debug.Logger.prototype.getParent = function() {
    return this.parent_
}, goog.debug.Logger.prototype.getChildren = function() {
    return this.children_ || (this.children_ = {}), this.children_
}, goog.debug.Logger.prototype.setLevel = function(e) {
    goog.debug.LOGGING_ENABLED && (goog.debug.Logger.ENABLE_HIERARCHY ? this.level_ = e : (goog.asserts.assert(!this.name_, "Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."), goog.debug.Logger.rootLevel_ = e))
}, goog.debug.Logger.prototype.getLevel = function() {
    return goog.debug.LOGGING_ENABLED ? this.level_ : goog.debug.Logger.Level.OFF
}, goog.debug.Logger.prototype.getEffectiveLevel = function() {
    return goog.debug.LOGGING_ENABLED ? goog.debug.Logger.ENABLE_HIERARCHY ? this.level_ ? this.level_ : this.parent_ ? this.parent_.getEffectiveLevel() : (goog.asserts.fail("Root logger has no level set."), null) : goog.debug.Logger.rootLevel_ : goog.debug.Logger.Level.OFF
}, goog.debug.Logger.prototype.isLoggable = function(e) {
    return goog.debug.LOGGING_ENABLED && e.value >= this.getEffectiveLevel().value
}, goog.debug.Logger.prototype.log = function(e, t, o) {
    goog.debug.LOGGING_ENABLED && this.isLoggable(e) && (goog.isFunction(t) && (t = t()), this.doLogRecord_(this.getLogRecord(e, t, o)))
}, goog.debug.Logger.prototype.getLogRecord = function(e, t, o) {
    return e = goog.debug.LogBuffer.isBufferingEnabled() ? goog.debug.LogBuffer.getInstance().addRecord(e, t, this.name_) : new goog.debug.LogRecord(e, String(t), this.name_), o && e.setException(o), e
}, goog.debug.Logger.prototype.shout = function(e, t) {
    goog.debug.LOGGING_ENABLED && this.log(goog.debug.Logger.Level.SHOUT, e, t)
}, goog.debug.Logger.prototype.severe = function(e, t) {
    goog.debug.LOGGING_ENABLED && this.log(goog.debug.Logger.Level.SEVERE, e, t)
}, goog.debug.Logger.prototype.warning = function(e, t) {
    goog.debug.LOGGING_ENABLED && this.log(goog.debug.Logger.Level.WARNING, e, t)
}, goog.debug.Logger.prototype.info = function(e, t) {
    goog.debug.LOGGING_ENABLED && this.log(goog.debug.Logger.Level.INFO, e, t)
}, goog.debug.Logger.prototype.config = function(e, t) {
    goog.debug.LOGGING_ENABLED && this.log(goog.debug.Logger.Level.CONFIG, e, t)
}, goog.debug.Logger.prototype.fine = function(e, t) {
    goog.debug.LOGGING_ENABLED && this.log(goog.debug.Logger.Level.FINE, e, t)
}, goog.debug.Logger.prototype.finer = function(e, t) {
    goog.debug.LOGGING_ENABLED && this.log(goog.debug.Logger.Level.FINER, e, t)
}, goog.debug.Logger.prototype.finest = function(e, t) {
    goog.debug.LOGGING_ENABLED && this.log(goog.debug.Logger.Level.FINEST, e, t)
}, goog.debug.Logger.prototype.logRecord = function(e) {
    goog.debug.LOGGING_ENABLED && this.isLoggable(e.getLevel()) && this.doLogRecord_(e)
}, goog.debug.Logger.prototype.doLogRecord_ = function(e) {
    if (goog.debug.Logger.logToProfilers("log:" + e.getMessage()), goog.debug.Logger.ENABLE_HIERARCHY)
        for (var t = this; t;) t.callPublish_(e), t = t.getParent();
    else
        for (var o, t = 0; o = goog.debug.Logger.rootHandlers_[t++];) o(e)
}, goog.debug.Logger.prototype.callPublish_ = function(e) {
    if (this.handlers_)
        for (var t, o = 0; t = this.handlers_[o]; o++) t(e)
}, goog.debug.Logger.prototype.setParent_ = function(e) {
    this.parent_ = e
}, goog.debug.Logger.prototype.addChild_ = function(e, t) {
    this.getChildren()[e] = t
}, goog.debug.LogManager = {}, goog.debug.LogManager.loggers_ = {}, goog.debug.LogManager.rootLogger_ = null, goog.debug.LogManager.initialize = function() {
    goog.debug.LogManager.rootLogger_ || (goog.debug.LogManager.rootLogger_ = new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME), goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME] = goog.debug.LogManager.rootLogger_, goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))
}, goog.debug.LogManager.getLoggers = function() {
    return goog.debug.LogManager.loggers_
}, goog.debug.LogManager.getRoot = function() {
    return goog.debug.LogManager.initialize(), goog.debug.LogManager.rootLogger_
}, goog.debug.LogManager.getLogger = function(e) {
    return goog.debug.LogManager.initialize(), goog.debug.LogManager.loggers_[e] || goog.debug.LogManager.createLogger_(e)
}, goog.debug.LogManager.createFunctionForCatchErrors = function(e) {
    return function(t) {
        (e || goog.debug.LogManager.getRoot()).severe("Error: " + t.message + " (" + t.fileName + " @ Line: " + t.line + ")")
    }
}, goog.debug.LogManager.createLogger_ = function(e) {
    var t = new goog.debug.Logger(e);
    if (goog.debug.Logger.ENABLE_HIERARCHY) {
        var o = e.lastIndexOf("."),
            n = e.substr(0, o),
            o = e.substr(o + 1),
            n = goog.debug.LogManager.getLogger(n);
        n.addChild_(o, t), t.setParent_(n)
    }
    return goog.debug.LogManager.loggers_[e] = t
}, goog.log = {}, goog.log.ENABLED = goog.debug.LOGGING_ENABLED, goog.log.ROOT_LOGGER_NAME = goog.debug.Logger.ROOT_LOGGER_NAME, goog.log.Logger = goog.debug.Logger, goog.log.Level = goog.debug.Logger.Level, goog.log.LogRecord = goog.debug.LogRecord, goog.log.getLogger = function(e, t) {
    if (goog.log.ENABLED) {
        var o = goog.debug.LogManager.getLogger(e);
        return t && o && o.setLevel(t), o
    }
    return null
}, goog.log.addHandler = function(e, t) {
    goog.log.ENABLED && e && e.addHandler(t)
}, goog.log.removeHandler = function(e, t) {
    return goog.log.ENABLED && e ? e.removeHandler(t) : !1
}, goog.log.log = function(e, t, o, n) {
    goog.log.ENABLED && e && e.log(t, o, n)
}, goog.log.error = function(e, t, o) {
    goog.log.ENABLED && e && e.severe(t, o)
}, goog.log.warning = function(e, t, o) {
    goog.log.ENABLED && e && e.warning(t, o)
}, goog.log.info = function(e, t, o) {
    goog.log.ENABLED && e && e.info(t, o)
}, goog.log.fine = function(e, t, o) {
    goog.log.ENABLED && e && e.fine(t, o)
}, goog.string.StringBuffer = function(e, t) {
    null != e && this.append.apply(this, arguments)
}, goog.string.StringBuffer.prototype.buffer_ = "", goog.string.StringBuffer.prototype.set = function(e) {
    this.buffer_ = "" + e
}, goog.string.StringBuffer.prototype.append = function(e, t, o) {
    if (this.buffer_ += String(e), null != t)
        for (var n = 1; n < arguments.length; n++) this.buffer_ += arguments[n];
    return this
}, goog.string.StringBuffer.prototype.clear = function() {
    this.buffer_ = ""
}, goog.string.StringBuffer.prototype.getLength = function() {
    return this.buffer_.length
}, goog.string.StringBuffer.prototype.toString = function() {
    return this.buffer_
}, goog.ui.tree = {}, goog.ui.tree.BaseNode = function(e, t, o) {
    goog.ui.Component.call(this, o), this.config_ = t || goog.ui.tree.BaseNode.defaultConfig, this.html_ = goog.html.SafeHtml.htmlEscapePreservingNewlines(e), this.expanded_ = this.selected_ = !1, this.toolTip_ = null, this.afterLabelHtml_ = goog.html.SafeHtml.EMPTY, this.isUserCollapsible_ = !0, this.depth_ = -1
}, goog.inherits(goog.ui.tree.BaseNode, goog.ui.Component), goog.ui.tree.BaseNode.EventType = {
    BEFORE_EXPAND: "beforeexpand",
    EXPAND: "expand",
    BEFORE_COLLAPSE: "beforecollapse",
    COLLAPSE: "collapse"
}, goog.ui.tree.BaseNode.allNodes = {}, goog.ui.tree.BaseNode.prototype.disposeInternal = function() {
    goog.ui.tree.BaseNode.superClass_.disposeInternal.call(this), this.tree && (this.tree.removeNode(this), this.tree = null), this.setElementInternal(null)
}, goog.ui.tree.BaseNode.prototype.initAccessibility = function() {
    var e = this.getElement();
    if (e) {
        var t = this.getLabelElement();
        if (t && !t.id && (t.id = this.getId() + ".label"), goog.a11y.aria.setRole(e, "treeitem"), goog.a11y.aria.setState(e, "selected", !1), goog.a11y.aria.setState(e, "expanded", !1), goog.a11y.aria.setState(e, "level", this.getDepth()), t && goog.a11y.aria.setState(e, "labelledby", t.id), (e = this.getIconElement()) && goog.a11y.aria.setRole(e, "presentation"), (e = this.getExpandIconElement()) && goog.a11y.aria.setRole(e, "presentation"), (e = this.getChildrenElement()) && (goog.a11y.aria.setRole(e, "group"), e.hasChildNodes()))
            for (e = this.getChildCount(), t = 1; e >= t; t++) {
                var o = this.getChildAt(t - 1).getElement();
                goog.asserts.assert(o, "The child element cannot be null"), goog.a11y.aria.setState(o, "setsize", e), goog.a11y.aria.setState(o, "posinset", t)
            }
    }
}, goog.ui.tree.BaseNode.prototype.createDom = function() {
    var e = this.getDomHelper().safeHtmlToNode(this.toSafeHtml());
    this.setElementInternal(e)
}, goog.ui.tree.BaseNode.prototype.enterDocument = function() {
    goog.ui.tree.BaseNode.superClass_.enterDocument.call(this), goog.ui.tree.BaseNode.allNodes[this.getId()] = this, this.initAccessibility()
}, goog.ui.tree.BaseNode.prototype.exitDocument = function() {
    goog.ui.tree.BaseNode.superClass_.exitDocument.call(this), delete goog.ui.tree.BaseNode.allNodes[this.getId()]
}, goog.ui.tree.BaseNode.prototype.addChildAt = function(e, t, o) {
    goog.asserts.assert(!e.getParent()), goog.asserts.assertInstanceof(e, goog.ui.tree.BaseNode), o = this.getChildAt(t - 1);
    var n = this.getChildAt(t);
    if (goog.ui.tree.BaseNode.superClass_.addChildAt.call(this, e, t), e.previousSibling_ = o, e.nextSibling_ = n, o ? o.nextSibling_ = e : this.firstChild_ = e, n ? n.previousSibling_ = e : this.lastChild_ = e, (t = this.getTree()) && e.setTreeInternal(t), e.setDepth_(this.getDepth() + 1), this.getElement() && (this.updateExpandIcon(), this.getExpanded())) {
        t = this.getChildrenElement(), e.getElement() || e.createDom();
        var i = e.getElement(),
            r = n && n.getElement();
        t.insertBefore(i, r), this.isInDocument() && e.enterDocument(), n || (o ? o.updateExpandIcon() : (goog.style.setElementShown(t, !0), this.setExpanded(this.getExpanded())))
    }
}, goog.ui.tree.BaseNode.prototype.add = function(e, t) {
    return goog.asserts.assert(!t || t.getParent() == this, "Can only add nodes before siblings"), e.getParent() && e.getParent().removeChild(e), this.addChildAt(e, t ? this.indexOfChild(t) : this.getChildCount()), e
}, goog.ui.tree.BaseNode.prototype.removeChild = function(e, t) {
    var o = this.getTree(),
        n = o ? o.getSelectedItem() : null;
    if ((n == e || e.contains(n)) && (o.hasFocus() ? (this.select(), goog.Timer.callOnce(this.onTimeoutSelect_, 10, this)) : this.select()), goog.ui.tree.BaseNode.superClass_.removeChild.call(this, e), this.lastChild_ == e && (this.lastChild_ = e.previousSibling_), this.firstChild_ == e && (this.firstChild_ = e.nextSibling_), e.previousSibling_ && (e.previousSibling_.nextSibling_ = e.nextSibling_), e.nextSibling_ && (e.nextSibling_.previousSibling_ = e.previousSibling_), n = e.isLastSibling(), e.tree = null, e.depth_ = -1, o && (o.removeNode(e), this.isInDocument())) {
        if (o = this.getChildrenElement(), e.isInDocument()) {
            var i = e.getElement();
            o.removeChild(i), e.exitDocument()
        }
        n && (n = this.getLastChild()) && n.updateExpandIcon(), this.hasChildren() || (o.style.display = "none", this.updateExpandIcon(), this.updateIcon_())
    }
    return e
}, goog.ui.tree.BaseNode.prototype.remove = goog.ui.tree.BaseNode.prototype.removeChild, goog.ui.tree.BaseNode.prototype.onTimeoutSelect_ = function() {
    this.select()
}, goog.ui.tree.BaseNode.prototype.getDepth = function() {
    var e = this.depth_;
    return 0 > e && (e = this.computeDepth_(), this.setDepth_(e)), e
}, goog.ui.tree.BaseNode.prototype.computeDepth_ = function() {
    var e = this.getParent();
    return e ? e.getDepth() + 1 : 0
}, goog.ui.tree.BaseNode.prototype.setDepth_ = function(e) {
    if (e != this.depth_) {
        this.depth_ = e;
        var t = this.getRowElement();
        if (t) {
            var o = this.getPixelIndent_() + "px";
            this.isRightToLeft() ? t.style.paddingRight = o : t.style.paddingLeft = o
        }
        this.forEachChild(function(t) {
            t.setDepth_(e + 1)
        })
    }
}, goog.ui.tree.BaseNode.prototype.contains = function(e) {
    for (; e;) {
        if (e == this) return !0;
        e = e.getParent()
    }
    return !1
}, goog.ui.tree.BaseNode.EMPTY_CHILDREN_ = [], goog.ui.tree.BaseNode.prototype.getChildren = function() {
    var e = [];
    return this.forEachChild(function(t) {
        e.push(t)
    }), e
}, goog.ui.tree.BaseNode.prototype.getFirstChild = function() {
    return this.getChildAt(0)
}, goog.ui.tree.BaseNode.prototype.getLastChild = function() {
    return this.getChildAt(this.getChildCount() - 1)
}, goog.ui.tree.BaseNode.prototype.getPreviousSibling = function() {
    return this.previousSibling_
}, goog.ui.tree.BaseNode.prototype.getNextSibling = function() {
    return this.nextSibling_
}, goog.ui.tree.BaseNode.prototype.isLastSibling = function() {
    return !this.nextSibling_
}, goog.ui.tree.BaseNode.prototype.isSelected = function() {
    return this.selected_
}, goog.ui.tree.BaseNode.prototype.select = function() {
    var e = this.getTree();
    e && e.setSelectedItem(this)
}, goog.ui.tree.BaseNode.prototype.deselect = goog.nullFunction, goog.ui.tree.BaseNode.prototype.setSelectedInternal = function(e) {
    if (this.selected_ != e) {
        this.selected_ = e, this.updateRow();
        var t = this.getElement();
        t && (goog.a11y.aria.setState(t, "selected", e), e && (e = this.getTree().getElement(), goog.asserts.assert(e, "The DOM element for the tree cannot be null"), goog.a11y.aria.setState(e, "activedescendant", this.getId())))
    }
}, goog.ui.tree.BaseNode.prototype.getExpanded = function() {
    return this.expanded_
}, goog.ui.tree.BaseNode.prototype.setExpandedInternal = function(e) {
    this.expanded_ = e
}, goog.ui.tree.BaseNode.prototype.setExpanded = function(e) {
    var t = e != this.expanded_;
    if (!t || this.dispatchEvent(e ? goog.ui.tree.BaseNode.EventType.BEFORE_EXPAND : goog.ui.tree.BaseNode.EventType.BEFORE_COLLAPSE)) {
        var o;
        this.expanded_ = e, o = this.getTree();
        var n = this.getElement();
        if (this.hasChildren()) {
            if (!e && o && this.contains(o.getSelectedItem()) && this.select(), n) {
                if ((o = this.getChildrenElement()) && (goog.style.setElementShown(o, e), e && this.isInDocument() && !o.hasChildNodes())) {
                    var i = [];
                    this.forEachChild(function(e) {
                        i.push(e.toSafeHtml())
                    }), goog.dom.safe.setInnerHtml(o, goog.html.SafeHtml.concat(i)), this.forEachChild(function(e) {
                        e.enterDocument()
                    })
                }
                this.updateExpandIcon()
            }
        } else(o = this.getChildrenElement()) && goog.style.setElementShown(o, !1);
        n && (this.updateIcon_(), goog.a11y.aria.setState(n, "expanded", e)), t && this.dispatchEvent(e ? goog.ui.tree.BaseNode.EventType.EXPAND : goog.ui.tree.BaseNode.EventType.COLLAPSE)
    }
}, goog.ui.tree.BaseNode.prototype.toggle = function() {
    this.setExpanded(!this.getExpanded())
}, goog.ui.tree.BaseNode.prototype.expand = function() {
    this.setExpanded(!0)
}, goog.ui.tree.BaseNode.prototype.collapse = function() {
    this.setExpanded(!1)
}, goog.ui.tree.BaseNode.prototype.collapseChildren = function() {
    this.forEachChild(function(e) {
        e.collapseAll()
    })
}, goog.ui.tree.BaseNode.prototype.collapseAll = function() {
    this.collapseChildren(), this.collapse()
}, goog.ui.tree.BaseNode.prototype.expandChildren = function() {
    this.forEachChild(function(e) {
        e.expandAll()
    })
}, goog.ui.tree.BaseNode.prototype.expandAll = function() {
    this.expandChildren(), this.expand()
}, goog.ui.tree.BaseNode.prototype.reveal = function() {
    var e = this.getParent();
    e && (e.setExpanded(!0), e.reveal())
}, goog.ui.tree.BaseNode.prototype.setIsUserCollapsible = function(e) {
    (this.isUserCollapsible_ = e) || this.expand(), this.getElement() && this.updateExpandIcon()
}, goog.ui.tree.BaseNode.prototype.isUserCollapsible = function() {
    return this.isUserCollapsible_
}, goog.ui.tree.BaseNode.prototype.toSafeHtml = function() {
    var e = this.getTree(),
        t = !e.getShowLines() || e == this.getParent() && !e.getShowRootLines() ? this.config_.cssChildrenNoLines : this.config_.cssChildren,
        e = this.getExpanded() && this.hasChildren(),
        t = {
            "class": t,
            style: this.getLineStyle()
        },
        o = [];
    return e && this.forEachChild(function(e) {
        o.push(e.toSafeHtml())
    }), e = goog.html.SafeHtml.create("div", t, o), goog.html.SafeHtml.create("div", {
        "class": this.config_.cssItem,
        id: this.getId()
    }, [this.getRowSafeHtml(), e])
}, goog.ui.tree.BaseNode.prototype.getPixelIndent_ = function() {
    return Math.max(0, (this.getDepth() - 1) * this.config_.indentWidth)
}, goog.ui.tree.BaseNode.prototype.getRowSafeHtml = function() {
    var e = {};
    e["padding-" + (this.isRightToLeft() ? "right" : "left")] = this.getPixelIndent_() + "px";
    var e = {
            "class": this.getRowClassName(),
            style: e
        },
        t = [this.getExpandIconSafeHtml(), this.getIconSafeHtml(), this.getLabelSafeHtml()];
    return goog.html.SafeHtml.create("div", e, t)
}, goog.ui.tree.BaseNode.prototype.getRowClassName = function() {
    var e;
    return e = this.isSelected() ? " " + this.config_.cssSelectedRow : "", this.config_.cssTreeRow + e
}, goog.ui.tree.BaseNode.prototype.getLabelSafeHtml = function() {
    var e = goog.html.SafeHtml.create("span", {
        "class": this.config_.cssItemLabel,
        title: this.getToolTip() || null
    }, this.getSafeHtml());
    return goog.html.SafeHtml.concat(e, goog.html.SafeHtml.create("span", {}, this.getAfterLabelSafeHtml()))
}, goog.ui.tree.BaseNode.prototype.getAfterLabelHtml = function() {
    return goog.html.SafeHtml.unwrap(this.getAfterLabelSafeHtml())
}, goog.ui.tree.BaseNode.prototype.getAfterLabelSafeHtml = function() {
    return this.afterLabelHtml_
}, goog.ui.tree.BaseNode.prototype.setAfterLabelSafeHtml = function(e) {
    this.afterLabelHtml_ = e;
    var t = this.getAfterLabelElement();
    t && goog.dom.safe.setInnerHtml(t, e)
}, goog.ui.tree.BaseNode.prototype.getIconSafeHtml = function() {
    return goog.html.SafeHtml.create("span", {
        style: {
            display: "inline-block"
        },
        "class": this.getCalculatedIconClass()
    })
}, goog.ui.tree.BaseNode.prototype.getExpandIconSafeHtml = function() {
    return goog.html.SafeHtml.create("span", {
        type: "expand",
        style: {
            display: "inline-block"
        },
        "class": this.getExpandIconClass()
    })
}, goog.ui.tree.BaseNode.prototype.getExpandIconClass = function() {
    var e = this.getTree(),
        t = !e.getShowLines() || e == this.getParent() && !e.getShowRootLines(),
        o = this.config_,
        n = new goog.string.StringBuffer;
    if (n.append(o.cssTreeIcon, " ", o.cssExpandTreeIcon, " "), this.hasChildren()) {
        var i = 0;
        switch (e.getShowExpandIcons() && this.isUserCollapsible_ && (i = this.getExpanded() ? 2 : 1), t || (i = this.isLastSibling() ? i + 4 : i + 8), i) {
            case 1:
                n.append(o.cssExpandTreeIconPlus);
                break;
            case 2:
                n.append(o.cssExpandTreeIconMinus);
                break;
            case 4:
                n.append(o.cssExpandTreeIconL);
                break;
            case 5:
                n.append(o.cssExpandTreeIconLPlus);
                break;
            case 6:
                n.append(o.cssExpandTreeIconLMinus);
                break;
            case 8:
                n.append(o.cssExpandTreeIconT);
                break;
            case 9:
                n.append(o.cssExpandTreeIconTPlus);
                break;
            case 10:
                n.append(o.cssExpandTreeIconTMinus);
                break;
            default:
                n.append(o.cssExpandTreeIconBlank)
        }
    } else t ? n.append(o.cssExpandTreeIconBlank) : this.isLastSibling() ? n.append(o.cssExpandTreeIconL) : n.append(o.cssExpandTreeIconT);
    return n.toString()
}, goog.ui.tree.BaseNode.prototype.getLineStyle = function() {
    var e = this.getExpanded() && this.hasChildren();
    return goog.html.SafeStyle.create({
        "background-position": this.getBackgroundPosition(),
        display: e ? null : "none"
    })
}, goog.ui.tree.BaseNode.prototype.getBackgroundPosition = function() {
    return (this.isLastSibling() ? "-100" : (this.getDepth() - 1) * this.config_.indentWidth) + "px 0"
}, goog.ui.tree.BaseNode.prototype.getElement = function() {
    var e = goog.ui.tree.BaseNode.superClass_.getElement.call(this);
    return e || (e = this.getDomHelper().getElement(this.getId()), this.setElementInternal(e)), e
}, goog.ui.tree.BaseNode.prototype.getRowElement = function() {
    var e = this.getElement();
    return e ? e.firstChild : null
}, goog.ui.tree.BaseNode.prototype.getExpandIconElement = function() {
    var e = this.getRowElement();
    return e ? e.firstChild : null
}, goog.ui.tree.BaseNode.prototype.getIconElement = function() {
    var e = this.getRowElement();
    return e ? e.childNodes[1] : null
}, goog.ui.tree.BaseNode.prototype.getLabelElement = function() {
    var e = this.getRowElement();
    return e && e.lastChild ? e.lastChild.previousSibling : null
}, goog.ui.tree.BaseNode.prototype.getAfterLabelElement = function() {
    var e = this.getRowElement();
    return e ? e.lastChild : null
}, goog.ui.tree.BaseNode.prototype.getChildrenElement = function() {
    var e = this.getElement();
    return e ? e.lastChild : null
}, goog.ui.tree.BaseNode.prototype.setIconClass = function(e) {
    this.iconClass_ = e, this.isInDocument() && this.updateIcon_()
}, goog.ui.tree.BaseNode.prototype.getIconClass = function() {
    return this.iconClass_
}, goog.ui.tree.BaseNode.prototype.setExpandedIconClass = function(e) {
    this.expandedIconClass_ = e, this.isInDocument() && this.updateIcon_()
}, goog.ui.tree.BaseNode.prototype.getExpandedIconClass = function() {
    return this.expandedIconClass_
}, goog.ui.tree.BaseNode.prototype.setText = function(e) {
    this.setSafeHtml(goog.html.SafeHtml.htmlEscape(e))
}, goog.ui.tree.BaseNode.prototype.getText = function() {
    return goog.string.unescapeEntities(goog.html.SafeHtml.unwrap(this.html_))
}, goog.ui.tree.BaseNode.prototype.setSafeHtml = function(e) {
    this.html_ = e;
    var t = this.getLabelElement();
    t && goog.dom.safe.setInnerHtml(t, e), (e = this.getTree()) && e.setNode(this)
}, goog.ui.tree.BaseNode.prototype.getHtml = function() {
    return goog.html.SafeHtml.unwrap(this.getSafeHtml())
}, goog.ui.tree.BaseNode.prototype.getSafeHtml = function() {
    return this.html_
}, goog.ui.tree.BaseNode.prototype.setToolTip = function(e) {
    this.toolTip_ = e;
    var t = this.getLabelElement();
    t && (t.title = e)
}, goog.ui.tree.BaseNode.prototype.getToolTip = function() {
    return this.toolTip_
}, goog.ui.tree.BaseNode.prototype.updateRow = function() {
    var e = this.getRowElement();
    e && (e.className = this.getRowClassName())
}, goog.ui.tree.BaseNode.prototype.updateExpandIcon = function() {
    var e = this.getExpandIconElement();
    e && (e.className = this.getExpandIconClass()), (e = this.getChildrenElement()) && (e.style.backgroundPosition = this.getBackgroundPosition())
}, goog.ui.tree.BaseNode.prototype.updateIcon_ = function() {
    this.getIconElement().className = this.getCalculatedIconClass()
}, goog.ui.tree.BaseNode.prototype.onMouseDown = function(e) {
    "expand" == e.target.getAttribute("type") && this.hasChildren() ? this.isUserCollapsible_ && this.toggle() : (this.select(), this.updateRow())
}, goog.ui.tree.BaseNode.prototype.onClick_ = goog.events.Event.preventDefault, goog.ui.tree.BaseNode.prototype.onDoubleClick_ = function(e) {
    "expand" == e.target.getAttribute("type") && this.hasChildren() || this.isUserCollapsible_ && this.toggle()
}, goog.ui.tree.BaseNode.prototype.onKeyDown = function(e) {
    var t = !0;
    switch (e.keyCode) {
        case goog.events.KeyCodes.RIGHT:
            if (e.altKey) break;
            this.hasChildren() && (this.getExpanded() ? this.getFirstChild().select() : this.setExpanded(!0));
            break;
        case goog.events.KeyCodes.LEFT:
            if (e.altKey) break;
            if (this.hasChildren() && this.getExpanded() && this.isUserCollapsible_) this.setExpanded(!1);
            else {
                var o = this.getParent(),
                    n = this.getTree();
                o && (n.getShowRootNode() || o != n) && o.select()
            }
            break;
        case goog.events.KeyCodes.DOWN:
            (o = this.getNextShownNode()) && o.select();
            break;
        case goog.events.KeyCodes.UP:
            (o = this.getPreviousShownNode()) && o.select();
            break;
        default:
            t = !1
    }
    return t && (e.preventDefault(), (n = this.getTree()) && n.clearTypeAhead()), t
}, goog.ui.tree.BaseNode.prototype.getLastShownDescendant = function() {
    return this.getExpanded() && this.hasChildren() ? this.getLastChild().getLastShownDescendant() : this
}, goog.ui.tree.BaseNode.prototype.getNextShownNode = function() {
    if (this.hasChildren() && this.getExpanded()) return this.getFirstChild();
    for (var e, t = this; t != this.getTree();) {
        if (e = t.getNextSibling(), null != e) return e;
        t = t.getParent()
    }
    return null
}, goog.ui.tree.BaseNode.prototype.getPreviousShownNode = function() {
    var e = this.getPreviousSibling();
    if (null != e) return e.getLastShownDescendant();
    var e = this.getParent(),
        t = this.getTree();
    return !t.getShowRootNode() && e == t || this == t ? null : e
}, goog.ui.tree.BaseNode.prototype.getClientData = goog.ui.tree.BaseNode.prototype.getModel, goog.ui.tree.BaseNode.prototype.setClientData = goog.ui.tree.BaseNode.prototype.setModel, goog.ui.tree.BaseNode.prototype.getConfig = function() {
    return this.config_
}, goog.ui.tree.BaseNode.prototype.setTreeInternal = function(e) {
    this.tree != e && (this.tree = e, e.setNode(this), this.forEachChild(function(t) {
        t.setTreeInternal(e)
    }))
}, goog.ui.tree.BaseNode.defaultConfig = {
    indentWidth: 19,
    cssRoot: "goog-tree-root goog-tree-item",
    cssHideRoot: "goog-tree-hide-root",
    cssItem: "goog-tree-item",
    cssChildren: "goog-tree-children",
    cssChildrenNoLines: "goog-tree-children-nolines",
    cssTreeRow: "goog-tree-row",
    cssItemLabel: "goog-tree-item-label",
    cssTreeIcon: "goog-tree-icon",
    cssExpandTreeIcon: "goog-tree-expand-icon",
    cssExpandTreeIconPlus: "goog-tree-expand-icon-plus",
    cssExpandTreeIconMinus: "goog-tree-expand-icon-minus",
    cssExpandTreeIconTPlus: "goog-tree-expand-icon-tplus",
    cssExpandTreeIconTMinus: "goog-tree-expand-icon-tminus",
    cssExpandTreeIconLPlus: "goog-tree-expand-icon-lplus",
    cssExpandTreeIconLMinus: "goog-tree-expand-icon-lminus",
    cssExpandTreeIconT: "goog-tree-expand-icon-t",
    cssExpandTreeIconL: "goog-tree-expand-icon-l",
    cssExpandTreeIconBlank: "goog-tree-expand-icon-blank",
    cssExpandedFolderIcon: "goog-tree-expanded-folder-icon",
    cssCollapsedFolderIcon: "goog-tree-collapsed-folder-icon",
    cssFileIcon: "goog-tree-file-icon",
    cssExpandedRootIcon: "goog-tree-expanded-folder-icon",
    cssCollapsedRootIcon: "goog-tree-collapsed-folder-icon",
    cssSelectedRow: "selected"
}, goog.ui.tree.TreeNode = function(e, t, o) {
    goog.ui.tree.BaseNode.call(this, e, t, o)
}, goog.inherits(goog.ui.tree.TreeNode, goog.ui.tree.BaseNode), goog.ui.tree.TreeNode.prototype.getTree = function() {
    if (this.tree) return this.tree;
    var e = this.getParent();
    return e && (e = e.getTree()) ? (this.setTreeInternal(e), e) : null
}, goog.ui.tree.TreeNode.prototype.getCalculatedIconClass = function() {
    var e = this.getExpanded(),
        t = this.getExpandedIconClass();
    if (e && t) return t;
    if (t = this.getIconClass(), !e && t) return t;
    if (t = this.getConfig(), this.hasChildren()) {
        if (e && t.cssExpandedFolderIcon) return t.cssTreeIcon + " " + t.cssExpandedFolderIcon;
        if (!e && t.cssCollapsedFolderIcon) return t.cssTreeIcon + " " + t.cssCollapsedFolderIcon
    } else if (t.cssFileIcon) return t.cssTreeIcon + " " + t.cssFileIcon;
    return ""
}, goog.structs.Trie = function(e) {
    this.value_ = void 0, this.childNodes_ = {}, e && this.setAll(e)
}, goog.structs.Trie.prototype.set = function(e, t) {
    this.setOrAdd_(e, t, !1)
}, goog.structs.Trie.prototype.add = function(e, t) {
    this.setOrAdd_(e, t, !0)
}, goog.structs.Trie.prototype.setOrAdd_ = function(e, t, o) {
    for (var n = this, i = 0; i < e.length; i++) {
        var r = e.charAt(i);
        n.childNodes_[r] || (n.childNodes_[r] = new goog.structs.Trie), n = n.childNodes_[r]
    }
    if (o && void 0 !== n.value_) throw Error('The collection already contains the key "' + e + '"');
    n.value_ = t
}, goog.structs.Trie.prototype.setAll = function(e) {
    var t = goog.structs.getKeys(e);
    e = goog.structs.getValues(e);
    for (var o = 0; o < t.length; o++) this.set(t[o], e[o])
}, goog.structs.Trie.prototype.getChildNode_ = function(e) {
    for (var t = this, o = 0; o < e.length; o++) {
        var n = e.charAt(o),
            t = t.childNodes_[n];
        if (!t) return
    }
    return t
}, goog.structs.Trie.prototype.get = function(e) {
    return (e = this.getChildNode_(e)) ? e.value_ : void 0
}, goog.structs.Trie.prototype.getKeyAndPrefixes = function(e, t) {
    var o = this,
        n = {},
        i = t || 0;
    for (void 0 !== o.value_ && (n[i] = o.value_); i < e.length; i++) {
        var r = e.charAt(i);
        if (!(r in o.childNodes_)) break;
        o = o.childNodes_[r], void 0 !== o.value_ && (n[i] = o.value_)
    }
    return n
}, goog.structs.Trie.prototype.getValues = function() {
    var e = [];
    return this.getValuesInternal_(e), e
}, goog.structs.Trie.prototype.getValuesInternal_ = function(e) {
    void 0 !== this.value_ && e.push(this.value_);
    for (var t in this.childNodes_) this.childNodes_[t].getValuesInternal_(e)
}, goog.structs.Trie.prototype.getKeys = function(e) {
    var t = [];
    if (e) {
        for (var o = this, n = 0; n < e.length; n++) {
            var i = e.charAt(n);
            if (!o.childNodes_[i]) return [];
            o = o.childNodes_[i]
        }
        o.getKeysInternal_(e, t)
    } else this.getKeysInternal_("", t);
    return t
}, goog.structs.Trie.prototype.getKeysInternal_ = function(e, t) {
    void 0 !== this.value_ && t.push(e);
    for (var o in this.childNodes_) this.childNodes_[o].getKeysInternal_(e + o, t)
}, goog.structs.Trie.prototype.containsKey = function(e) {
    return void 0 !== this.get(e)
}, goog.structs.Trie.prototype.containsPrefix = function(e) {
    return 0 == e.length ? !this.isEmpty() : !!this.getChildNode_(e)
}, goog.structs.Trie.prototype.containsValue = function(e) {
    if (this.value_ === e) return !0;
    for (var t in this.childNodes_)
        if (this.childNodes_[t].containsValue(e)) return !0;
    return !1
}, goog.structs.Trie.prototype.clear = function() {
    this.childNodes_ = {}, this.value_ = void 0
}, goog.structs.Trie.prototype.remove = function(e) {
    for (var t = this, o = [], n = 0; n < e.length; n++) {
        var i = e.charAt(n);
        if (!t.childNodes_[i]) throw Error('The collection does not have the key "' + e + '"');
        o.push([t, i]), t = t.childNodes_[i]
    }
    for (e = t.value_, delete t.value_; 0 < o.length && (i = o.pop(), t = i[0], i = i[1], t.childNodes_[i].isEmpty());) delete t.childNodes_[i];
    return e
}, goog.structs.Trie.prototype.clone = function() {
    return new goog.structs.Trie(this)
}, goog.structs.Trie.prototype.getCount = function() {
    return goog.structs.getCount(this.getValues())
}, goog.structs.Trie.prototype.isEmpty = function() {
    return void 0 === this.value_ && goog.object.isEmpty(this.childNodes_)
}, goog.ui.tree.TypeAhead = function() {
    this.nodeMap_ = new goog.structs.Trie, this.buffer_ = "", this.matchingNodes_ = this.matchingLabels_ = null, this.matchingNodeIndex_ = this.matchingLabelIndex_ = 0
}, goog.ui.tree.TypeAhead.Offset = {
    DOWN: 1,
    UP: -1
}, goog.ui.tree.TypeAhead.prototype.handleNavigation = function(e) {
    var t = !1;
    switch (e.keyCode) {
        case goog.events.KeyCodes.DOWN:
        case goog.events.KeyCodes.UP:
            e.ctrlKey && (this.jumpTo_(e.keyCode == goog.events.KeyCodes.DOWN ? goog.ui.tree.TypeAhead.Offset.DOWN : goog.ui.tree.TypeAhead.Offset.UP), t = !0);
            break;
        case goog.events.KeyCodes.BACKSPACE:
            e = this.buffer_.length - 1, t = !0, e > 0 ? (this.buffer_ = this.buffer_.substring(0, e), this.jumpToLabel_(this.buffer_)) : 0 == e ? this.buffer_ = "" : t = !1;
            break;
        case goog.events.KeyCodes.ESC:
            this.buffer_ = "", t = !0
    }
    return t
}, goog.ui.tree.TypeAhead.prototype.handleTypeAheadChar = function(e) {
    var t = !1;
    return e.ctrlKey || e.altKey || (e = String.fromCharCode(e.charCode || e.keyCode).toLowerCase(), goog.string.isUnicodeChar(e) && (" " != e || this.buffer_) && (this.buffer_ += e, t = this.jumpToLabel_(this.buffer_))), t
}, goog.ui.tree.TypeAhead.prototype.setNodeInMap = function(e) {
    var t = e.getText();
    if (t && !goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))) {
        var t = t.toLowerCase(),
            o = this.nodeMap_.get(t);
        o ? o.push(e) : this.nodeMap_.set(t, [e])
    }
}, goog.ui.tree.TypeAhead.prototype.removeNodeFromMap = function(e) {
    var t = e.getText();
    if (t && !goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))) {
        var t = t.toLowerCase(),
            o = this.nodeMap_.get(t);
        if (o) {
            for (var n = e.getChildCount(), i = 0; n > i; i++) this.removeNodeFromMap(e.getChildAt(i));
            goog.array.remove(o, e), o.length || this.nodeMap_.remove(t)
        }
    }
}, goog.ui.tree.TypeAhead.prototype.jumpToLabel_ = function(e) {
    var t = !1;
    return (e = this.nodeMap_.getKeys(e)) && e.length && (this.matchingLabelIndex_ = this.matchingNodeIndex_ = 0, t = this.nodeMap_.get(e[0]), t = this.selectMatchingNode_(t)) && (this.matchingLabels_ = e), t
}, goog.ui.tree.TypeAhead.prototype.jumpTo_ = function(e) {
    var t = !1,
        o = this.matchingLabels_;
    if (o) {
        var t = null,
            n = !1;
        if (this.matchingNodes_) {
            var i = this.matchingNodeIndex_ + e;
            i >= 0 && i < this.matchingNodes_.length ? (this.matchingNodeIndex_ = i, t = this.matchingNodes_) : n = !0
        }
        t || (i = this.matchingLabelIndex_ + e, i >= 0 && i < o.length && (this.matchingLabelIndex_ = i), o.length > this.matchingLabelIndex_ && (t = this.nodeMap_.get(o[this.matchingLabelIndex_])), t && t.length && n && (this.matchingNodeIndex_ = e == goog.ui.tree.TypeAhead.Offset.UP ? t.length - 1 : 0)), (t = this.selectMatchingNode_(t)) && (this.matchingLabels_ = o)
    }
    return t
}, goog.ui.tree.TypeAhead.prototype.selectMatchingNode_ = function(e) {
    var t;
    return e && (this.matchingNodeIndex_ < e.length && (t = e[this.matchingNodeIndex_], this.matchingNodes_ = e), t && (t.reveal(), t.select())), !!t
}, goog.ui.tree.TypeAhead.prototype.clear = function() {
    this.buffer_ = ""
}, goog.ui.tree.TreeControl = function(e, t, o) {
    if (goog.ui.tree.BaseNode.call(this, e, t, o), this.setExpandedInternal(!0), this.setSelectedInternal(!0), this.selectedItem_ = this, this.typeAhead_ = new goog.ui.tree.TypeAhead, this.focusHandler_ = this.keyHandler_ = null, this.logger_ = goog.log.getLogger("this"), this.focused_ = !1, this.focusedNode_ = null, this.showRootLines_ = this.showRootNode_ = this.showExpandIcons_ = this.showLines_ = !0, goog.userAgent.IE) try {
        document.execCommand("BackgroundImageCache", !1, !0)
    } catch (n) {
        goog.log.warning(this.logger_, "Failed to enable background image cache")
    }
}, goog.inherits(goog.ui.tree.TreeControl, goog.ui.tree.BaseNode), goog.ui.tree.TreeControl.prototype.getTree = function() {
    return this
}, goog.ui.tree.TreeControl.prototype.getDepth = function() {
    return 0
}, goog.ui.tree.TreeControl.prototype.reveal = function() {}, goog.ui.tree.TreeControl.prototype.handleFocus_ = function(e) {
    this.focused_ = !0, goog.dom.classlist.add(goog.asserts.assert(this.getElement()), "focused"), this.selectedItem_ && this.selectedItem_.select()
}, goog.ui.tree.TreeControl.prototype.handleBlur_ = function(e) {
    this.focused_ = !1, goog.dom.classlist.remove(goog.asserts.assert(this.getElement()), "focused")
}, goog.ui.tree.TreeControl.prototype.hasFocus = function() {
    return this.focused_
}, goog.ui.tree.TreeControl.prototype.getExpanded = function() {
    return !this.showRootNode_ || goog.ui.tree.TreeControl.superClass_.getExpanded.call(this)
}, goog.ui.tree.TreeControl.prototype.setExpanded = function(e) {
    this.showRootNode_ ? goog.ui.tree.TreeControl.superClass_.setExpanded.call(this, e) : this.setExpandedInternal(e)
}, goog.ui.tree.TreeControl.prototype.getExpandIconSafeHtml = function() {
    return goog.html.SafeHtml.EMPTY
}, goog.ui.tree.TreeControl.prototype.getIconElement = function() {
    var e = this.getRowElement();
    return e ? e.firstChild : null
}, goog.ui.tree.TreeControl.prototype.getExpandIconElement = function() {
    return null
}, goog.ui.tree.TreeControl.prototype.updateExpandIcon = function() {}, goog.ui.tree.TreeControl.prototype.getRowClassName = function() {
    return goog.ui.tree.TreeControl.superClass_.getRowClassName.call(this) + (this.showRootNode_ ? "" : " " + this.getConfig().cssHideRoot)
}, goog.ui.tree.TreeControl.prototype.getCalculatedIconClass = function() {
    var e = this.getExpanded(),
        t = this.getExpandedIconClass();
    return e && t ? t : (t = this.getIconClass(), !e && t ? t : (t = this.getConfig(), e && t.cssExpandedRootIcon ? t.cssTreeIcon + " " + t.cssExpandedRootIcon : !e && t.cssCollapsedRootIcon ? t.cssTreeIcon + " " + t.cssCollapsedRootIcon : ""))
}, goog.ui.tree.TreeControl.prototype.setSelectedItem = function(e) {
    if (this.selectedItem_ != e) {
        var t = !1;
        this.selectedItem_ && (t = this.selectedItem_ == this.focusedNode_, this.selectedItem_.setSelectedInternal(!1)), (this.selectedItem_ = e) && (e.setSelectedInternal(!0), t && e.select()), this.dispatchEvent(goog.events.EventType.CHANGE)
    }
}, goog.ui.tree.TreeControl.prototype.getSelectedItem = function() {
    return this.selectedItem_
}, goog.ui.tree.TreeControl.prototype.setShowLines = function(e) {
    this.showLines_ != e && (this.showLines_ = e, this.isInDocument() && this.updateLinesAndExpandIcons_())
}, goog.ui.tree.TreeControl.prototype.getShowLines = function() {
    return this.showLines_
}, goog.ui.tree.TreeControl.prototype.updateLinesAndExpandIcons_ = function() {
    function e(i) {
        var r = i.getChildrenElement();
        if (r) {
            var s = !o || t == i.getParent() && !n ? i.getConfig().cssChildrenNoLines : i.getConfig().cssChildren;
            r.className = s, (r = i.getExpandIconElement()) && (r.className = i.getExpandIconClass())
        }
        i.forEachChild(e)
    }
    var t = this,
        o = t.getShowLines(),
        n = t.getShowRootLines();
    e(this)
}, goog.ui.tree.TreeControl.prototype.setShowRootLines = function(e) {
    this.showRootLines_ != e && (this.showRootLines_ = e, this.isInDocument() && this.updateLinesAndExpandIcons_())
}, goog.ui.tree.TreeControl.prototype.getShowRootLines = function() {
    return this.showRootLines_
}, goog.ui.tree.TreeControl.prototype.setShowExpandIcons = function(e) {
    this.showExpandIcons_ != e && (this.showExpandIcons_ = e, this.isInDocument() && this.updateLinesAndExpandIcons_())
}, goog.ui.tree.TreeControl.prototype.getShowExpandIcons = function() {
    return this.showExpandIcons_
}, goog.ui.tree.TreeControl.prototype.setShowRootNode = function(e) {
    if (this.showRootNode_ != e) {
        if (this.showRootNode_ = e, this.isInDocument()) {
            var t = this.getRowElement();
            t && (t.className = this.getRowClassName())
        }!e && this.getSelectedItem() == this && this.getFirstChild() && this.setSelectedItem(this.getFirstChild())
    }
}, goog.ui.tree.TreeControl.prototype.getShowRootNode = function() {
    return this.showRootNode_
}, goog.ui.tree.TreeControl.prototype.initAccessibility = function() {
    goog.ui.tree.TreeControl.superClass_.initAccessibility.call(this);
    var e = this.getElement();
    goog.asserts.assert(e, "The DOM element for the tree cannot be null."), goog.a11y.aria.setRole(e, "tree"), goog.a11y.aria.setState(e, "labelledby", this.getLabelElement().id)
}, goog.ui.tree.TreeControl.prototype.enterDocument = function() {
    goog.ui.tree.TreeControl.superClass_.enterDocument.call(this);
    var e = this.getElement();
    e.className = this.getConfig().cssRoot, e.setAttribute("hideFocus", "true"), this.attachEvents_(), this.initAccessibility()
}, goog.ui.tree.TreeControl.prototype.exitDocument = function() {
    goog.ui.tree.TreeControl.superClass_.exitDocument.call(this), this.detachEvents_()
}, goog.ui.tree.TreeControl.prototype.attachEvents_ = function() {
    var e = this.getElement();
    e.tabIndex = 0;
    var t = this.keyHandler_ = new goog.events.KeyHandler(e),
        o = this.focusHandler_ = new goog.events.FocusHandler(e);
    this.getHandler().listen(o, goog.events.FocusHandler.EventType.FOCUSOUT, this.handleBlur_).listen(o, goog.events.FocusHandler.EventType.FOCUSIN, this.handleFocus_).listen(t, goog.events.KeyHandler.EventType.KEY, this.handleKeyEvent).listen(e, goog.events.EventType.MOUSEDOWN, this.handleMouseEvent_).listen(e, goog.events.EventType.CLICK, this.handleMouseEvent_).listen(e, goog.events.EventType.DBLCLICK, this.handleMouseEvent_)
}, goog.ui.tree.TreeControl.prototype.detachEvents_ = function() {
    this.keyHandler_.dispose(), this.keyHandler_ = null, this.focusHandler_.dispose(), this.focusHandler_ = null
}, goog.ui.tree.TreeControl.prototype.handleMouseEvent_ = function(e) {
    goog.log.fine(this.logger_, "Received event " + e.type);
    var t = this.getNodeFromEvent_(e);
    if (t) switch (e.type) {
        case goog.events.EventType.MOUSEDOWN:
            t.onMouseDown(e);
            break;
        case goog.events.EventType.CLICK:
            t.onClick_(e);
            break;
        case goog.events.EventType.DBLCLICK:
            t.onDoubleClick_(e)
    }
}, goog.ui.tree.TreeControl.prototype.handleKeyEvent = function(e) {
    var t;
    return (t = this.typeAhead_.handleNavigation(e) || this.selectedItem_ && this.selectedItem_.onKeyDown(e) || this.typeAhead_.handleTypeAheadChar(e)) && e.preventDefault(), t
}, goog.ui.tree.TreeControl.prototype.getNodeFromEvent_ = function(e) {
    for (var t = e.target; null != t;) {
        if (e = goog.ui.tree.BaseNode.allNodes[t.id]) return e;
        if (t == this.getElement()) break;
        t = t.parentNode
    }
    return null
}, goog.ui.tree.TreeControl.prototype.createNode = function(e) {
    return new goog.ui.tree.TreeNode(e || goog.html.SafeHtml.EMPTY, this.getConfig(), this.getDomHelper())
}, goog.ui.tree.TreeControl.prototype.setNode = function(e) {
    this.typeAhead_.setNodeInMap(e)
}, goog.ui.tree.TreeControl.prototype.removeNode = function(e) {
    this.typeAhead_.removeNodeFromMap(e)
}, goog.ui.tree.TreeControl.prototype.clearTypeAhead = function() {
    this.typeAhead_.clear()
}, goog.ui.tree.TreeControl.defaultConfig = goog.ui.tree.BaseNode.defaultConfig;
var Blockly = {
    Blocks: {}
};
Blockly.Blocks.uidCounter_ = 0, Blockly.Blocks.genUid = function() {
    var e = (++Blockly.Blocks.uidCounter_).toString();
    return Blockly.Realtime.isEnabled() ? Blockly.Realtime.genUid(e) : e
}, Blockly.Icon = function(e) {
    this.block_ = e
}, Blockly.Icon.prototype.collapseHidden = !0, Blockly.Icon.prototype.SIZE = 17, Blockly.Icon.prototype.png_ = "", Blockly.Icon.prototype.bubble_ = null, Blockly.Icon.prototype.iconX_ = 0, Blockly.Icon.prototype.iconY_ = 0, Blockly.Icon.prototype.createIcon = function() {
    this.iconGroup_ || (this.iconGroup_ = Blockly.createSvgElement("g", {
        "class": "blocklyIconGroup"
    }, null), Blockly.createSvgElement("image", {
        width: this.SIZE,
        height: this.SIZE
    }, this.iconGroup_).setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", this.png_), this.block_.getSvgRoot().appendChild(this.iconGroup_), Blockly.bindEvent_(this.iconGroup_, "mouseup", this, this.iconClick_), this.updateEditable())
}, Blockly.Icon.prototype.dispose = function() {
    goog.dom.removeNode(this.iconGroup_), this.iconGroup_ = null, this.setVisible(!1), this.block_ = null
}, Blockly.Icon.prototype.updateEditable = function() {
    this.block_.isInFlyout || !this.block_.isEditable() ? Blockly.addClass_(this.iconGroup_, "blocklyIconGroupReadonly") : Blockly.removeClass_(this.iconGroup_, "blocklyIconGroupReadonly")
}, Blockly.Icon.prototype.isVisible = function() {
    return !!this.bubble_
}, Blockly.Icon.prototype.iconClick_ = function(e) {
    2 != Blockly.dragMode_ && (this.block_.isInFlyout || Blockly.isRightButton(e) || this.setVisible(!this.isVisible()))
}, Blockly.Icon.prototype.updateColour = function() {
    if (this.isVisible()) {
        var e = Blockly.makeColour(this.block_.getColour());
        this.bubble_.setColour(e)
    }
}, Blockly.Icon.prototype.renderIcon = function(e) {
    if (this.collapseHidden && this.block_.isCollapsed()) return this.iconGroup_.setAttribute("display", "none"), e;
    this.iconGroup_.setAttribute("display", "block");
    var t = this.SIZE;
    return this.block_.RTL && (e -= t), this.iconGroup_.setAttribute("transform", "translate(" + e + ",5)"), this.computeIconLocation(), e = this.block_.RTL ? e - Blockly.BlockSvg.SEP_SPACE_X : e + (t + Blockly.BlockSvg.SEP_SPACE_X)
}, Blockly.Icon.prototype.setIconLocation = function(e, t) {
    this.iconX_ = e, this.iconY_ = t, this.isVisible() && this.bubble_.setAnchorLocation(e, t)
}, Blockly.Icon.prototype.computeIconLocation = function() {
    var e = this.block_.getRelativeToSurfaceXY(),
        t = Blockly.getRelativeXY_(this.iconGroup_),
        o = e.x + t.x + this.SIZE / 2,
        e = e.y + t.y + this.SIZE / 2;
    o === this.iconX_ && e === this.iconY_ || this.setIconLocation(o, e)
}, Blockly.Icon.prototype.getIconLocation = function() {
    return {
        x: this.iconX_,
        y: this.iconY_
    }
}, Blockly.Breakpoint = function(e) {
    Blockly.Breakpoint.superClass_.constructor.call(this, e), this.createIcon()
}, goog.inherits(Blockly.Breakpoint, Blockly.Icon), Blockly.Breakpoint.prototype.png_ = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowNTM2RDdGOTkxRkExMUU1OEFBNkI1OEJFODcxRDg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowNTM2RDdGQTkxRkExMUU1OEFBNkI1OEJFODcxRDg0QiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA1MzZEN0Y3OTFGQTExRTU4QUE2QjU4QkU4NzFEODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA1MzZEN0Y4OTFGQTExRTU4QUE2QjU4QkU4NzFEODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+rtr92AAAAaVJREFUeNqck09LAmEQxme3RFrEQshANAWv2kUvQfQFAi/hQUXCjxB0Cbrrue4RERT0EYIOQsdMCe8VRGDuQX13V13zad5AqG3tjwPDsjPze3bed2cUcjEAm6ZJWSEo5fHQsm3Tq89Ht5pGl4qiVJ31igNOdTp0ousUPT4mrVajuVaLKBgkSqfprVQiMxCgh8VF2mGxu29fH42Q7fVgFAoYKwogJZ2uqkCxiLEQEFy/7Wx/o9OBkUy6w05fWwNkPXPrEwEPd/C8tfU3gYlnMgBzT8zPS5FitYre54KJ/Ra7uUGPQwVqt3Gdy/0OuMX4/qDruKJuF3okMh3w+aaLRKMA8235V2yvd7ZOJCd5dTgky++nmWxpiWgwIFO1LHpKJGYTkVy/T48qj/NFLkeDWUTyeerzKc7laVdMEyIW+9+cxOOAYUAwv/yhyCJ79/cQCwt/E9A0oNmEYG73S2s8xmf1OkQo9LNAOAw0GhBcf+q2/gq3d8BulMsYJhJfYblXlQqGMm9Z2Jf1Uy+Lk6u8E0c8RC+2DZsnUsinfOf4IecjTuZdgAEAghcLvhcS674AAAAASUVORK5CYII=", Blockly.Breakpoint.prototype.setVisible = function() {}, Blockly.Workspace = function(e) {
    this.options = e || {}, this.RTL = !!this.options.RTL, this.topBlocks_ = []
}, Blockly.Workspace.prototype.rendered = !1, Blockly.Workspace.prototype.dispose = function() {
    this.clear()
}, Blockly.Workspace.SCAN_ANGLE = 3, Blockly.Workspace.prototype.addTopBlock = function(e) {
    this.topBlocks_.push(e), this.fireChangeEvent()
}, Blockly.Workspace.prototype.removeTopBlock = function(e) {
    for (var t, o = !1, n = 0; t = this.topBlocks_[n]; n++)
        if (t == e) {
            this.topBlocks_.splice(n, 1), o = !0;
            break
        }
    if (!o) throw "Block not present in workspace's list of top-most blocks.";
    this.fireChangeEvent()
}, Blockly.Workspace.prototype.getTopBlocks = function() {
    function e(e) {
        return "undefined" == typeof e.startIndex ? Number.MAX_VALUE : e.startIndex
    }
    var t = [].concat(this.topBlocks_);
    return t.sort(function(t, o) {
        var n = e(t) - e(o);
        return n > 0 ? n = 1 : 0 > n && (n = -1), n
    }), t
}, Blockly.Workspace.prototype.getAllBlocks = function() {
    for (var e = this.getTopBlocks(!1), t = 0; t < e.length; t++) e.push.apply(e, e[t].getChildren());
    return e
}, Blockly.Workspace.prototype.clear = function() {
    for (; this.topBlocks_.length;) this.topBlocks_[0].dispose()
}, Blockly.Workspace.prototype.getWidth = function() {
    return 0
}, Blockly.Workspace.prototype.getBlockById = function(e) {
    for (var t, o = this.getAllBlocks(), n = 0; t = o[n]; n++)
        if (t.id == e) return t;
    return null
}, Blockly.Workspace.prototype.remainingCapacity = function() {
    return isNaN(this.options.maxBlocks) ? 1 / 0 : this.options.maxBlocks - this.getAllBlocks().length
}, Blockly.Workspace.prototype.fireChangeEvent = function() {}, Blockly.Workspace.prototype.clear = Blockly.Workspace.prototype.clear, Blockly.Bubble = function(e, t, o, n, i, r, s) {
    this.workspace_ = e, this.content_ = t, this.shape_ = o, o = Blockly.Bubble.ARROW_ANGLE, this.workspace_.RTL && (o = -o), this.arrow_radians_ = goog.math.toRadians(o), e.getBubbleCanvas().appendChild(this.createDom_(t, !(!r || !s))), this.setAnchorLocation(n, i), r && s || (t = this.content_.getBBox(), r = t.width + 2 * Blockly.Bubble.BORDER_WIDTH, s = t.height + 2 * Blockly.Bubble.BORDER_WIDTH), this.setBubbleSize(r, s), this.positionBubble_(), this.renderArrow_(), this.rendered_ = !0, e.options.readOnly || (Blockly.bindEvent_(this.bubbleBack_, "mousedown", this, this.bubbleMouseDown_), this.resizeGroup_ && Blockly.bindEvent_(this.resizeGroup_, "mousedown", this, this.resizeMouseDown_))
}, Blockly.Bubble.BORDER_WIDTH = 6, Blockly.Bubble.ARROW_THICKNESS = 10, Blockly.Bubble.ARROW_ANGLE = 20, Blockly.Bubble.ARROW_BEND = 4, Blockly.Bubble.ANCHOR_RADIUS = 8, Blockly.Bubble.onMouseUpWrapper_ = null, Blockly.Bubble.onMouseMoveWrapper_ = null, Blockly.Bubble.unbindDragEvents_ = function() {
    Blockly.Bubble.onMouseUpWrapper_ && (Blockly.unbindEvent_(Blockly.Bubble.onMouseUpWrapper_), Blockly.Bubble.onMouseUpWrapper_ = null), Blockly.Bubble.onMouseMoveWrapper_ && (Blockly.unbindEvent_(Blockly.Bubble.onMouseMoveWrapper_), Blockly.Bubble.onMouseMoveWrapper_ = null)
}, Blockly.Bubble.prototype.rendered_ = !1, Blockly.Bubble.prototype.anchorX_ = 0, Blockly.Bubble.prototype.anchorY_ = 0, Blockly.Bubble.prototype.relativeLeft_ = 0, Blockly.Bubble.prototype.relativeTop_ = 0, Blockly.Bubble.prototype.width_ = 0, Blockly.Bubble.prototype.height_ = 0, Blockly.Bubble.prototype.autoLayout_ = !0, Blockly.Bubble.prototype.createDom_ = function(e, t) {
    this.bubbleGroup_ = Blockly.createSvgElement("g", {}, null);
    var o = {
        filter: "url(#" + this.workspace_.options.embossFilterId + ")"
    };
    return -1 != goog.userAgent.getUserAgentString().indexOf("JavaFX") && (o = {}), o = Blockly.createSvgElement("g", o, this.bubbleGroup_), this.bubbleArrow_ = Blockly.createSvgElement("path", {}, o), this.bubbleBack_ = Blockly.createSvgElement("rect", {
        "class": "blocklyDraggable",
        x: 0,
        y: 0,
        rx: Blockly.Bubble.BORDER_WIDTH,
        ry: Blockly.Bubble.BORDER_WIDTH
    }, o), t ? (this.resizeGroup_ = Blockly.createSvgElement("g", {
        "class": this.workspace_.RTL ? "blocklyResizeSW" : "blocklyResizeSE"
    }, this.bubbleGroup_), o = 2 * Blockly.Bubble.BORDER_WIDTH, Blockly.createSvgElement("polygon", {
        points: "0,x x,x x,0".replace(/x/g, o.toString())
    }, this.resizeGroup_), Blockly.createSvgElement("line", {
        "class": "blocklyResizeLine",
        x1: o / 3,
        y1: o - 1,
        x2: o - 1,
        y2: o / 3
    }, this.resizeGroup_), Blockly.createSvgElement("line", {
        "class": "blocklyResizeLine",
        x1: 2 * o / 3,
        y1: o - 1,
        x2: o - 1,
        y2: 2 * o / 3
    }, this.resizeGroup_)) : this.resizeGroup_ = null, this.bubbleGroup_.appendChild(e), this.bubbleGroup_
}, Blockly.Bubble.prototype.bubbleMouseDown_ = function(e) {
    this.promote_(), Blockly.Bubble.unbindDragEvents_(), Blockly.isRightButton(e) ? e.stopPropagation() : Blockly.isTargetInput_(e) || (Blockly.Css.setCursor(Blockly.Css.Cursor.CLOSED), this.workspace_.startDrag(e, this.workspace_.RTL ? -this.relativeLeft_ : this.relativeLeft_, this.relativeTop_), Blockly.Bubble.onMouseUpWrapper_ = Blockly.bindEvent_(document, "mouseup", this, Blockly.Bubble.unbindDragEvents_), Blockly.Bubble.onMouseMoveWrapper_ = Blockly.bindEvent_(document, "mousemove", this, this.bubbleMouseMove_), Blockly.hideChaff(), e.stopPropagation())
}, Blockly.Bubble.prototype.bubbleMouseMove_ = function(e) {
    this.autoLayout_ = !1, e = this.workspace_.moveDrag(e), this.relativeLeft_ = this.workspace_.RTL ? -e.x : e.x, this.relativeTop_ = e.y, this.positionBubble_(), this.renderArrow_()
}, Blockly.Bubble.prototype.resizeMouseDown_ = function(e) {
    this.promote_(), Blockly.Bubble.unbindDragEvents_(), Blockly.isRightButton(e) || (Blockly.Css.setCursor(Blockly.Css.Cursor.CLOSED), this.workspace_.startDrag(e, this.workspace_.RTL ? -this.width_ : this.width_, this.height_), Blockly.Bubble.onMouseUpWrapper_ = Blockly.bindEvent_(document, "mouseup", this, Blockly.Bubble.unbindDragEvents_), Blockly.Bubble.onMouseMoveWrapper_ = Blockly.bindEvent_(document, "mousemove", this, this.resizeMouseMove_), Blockly.hideChaff()), e.stopPropagation()
}, Blockly.Bubble.prototype.resizeMouseMove_ = function(e) {
    this.autoLayout_ = !1, e = this.workspace_.moveDrag(e), this.setBubbleSize(this.workspace_.RTL ? -e.x : e.x, e.y), this.workspace_.RTL && this.positionBubble_()
}, Blockly.Bubble.prototype.registerResizeEvent = function(e, t) {
    Blockly.bindEvent_(this.bubbleGroup_, "resize", e, t)
}, Blockly.Bubble.prototype.promote_ = function() {
    this.bubbleGroup_.parentNode.appendChild(this.bubbleGroup_)
}, Blockly.Bubble.prototype.setAnchorLocation = function(e, t) {
    this.anchorX_ = e, this.anchorY_ = t, this.rendered_ && this.positionBubble_()
}, Blockly.Bubble.prototype.layoutBubble_ = function() {
    var e = -this.width_ / 4,
        t = -this.height_ - Blockly.BlockSvg.MIN_BLOCK_Y,
        o = this.workspace_.getMetrics();
    o.viewWidth /= this.workspace_.scale, o.viewLeft /= this.workspace_.scale, this.workspace_.RTL ? this.anchorX_ - o.viewLeft - e - this.width_ < Blockly.Scrollbar.scrollbarThickness ? e = this.anchorX_ - o.viewLeft - this.width_ - Blockly.Scrollbar.scrollbarThickness : this.anchorX_ - o.viewLeft - e > o.viewWidth && (e = this.anchorX_ - o.viewLeft - o.viewWidth) : this.anchorX_ + e < o.viewLeft ? e = o.viewLeft - this.anchorX_ : o.viewLeft + o.viewWidth < this.anchorX_ + e + this.width_ + Blockly.BlockSvg.SEP_SPACE_X + Blockly.Scrollbar.scrollbarThickness && (e = o.viewLeft + o.viewWidth - this.anchorX_ - this.width_ - Blockly.Scrollbar.scrollbarThickness), this.anchorY_ + t < o.viewTop && (t = this.shape_.getBBox().height), this.relativeLeft_ = e, this.relativeTop_ = t
}, Blockly.Bubble.prototype.positionBubble_ = function() {
    this.bubbleGroup_.setAttribute("transform", "translate(" + (this.workspace_.RTL ? this.anchorX_ - this.relativeLeft_ - this.width_ : this.anchorX_ + this.relativeLeft_) + "," + (this.relativeTop_ + this.anchorY_) + ")")
}, Blockly.Bubble.prototype.getBubbleSize = function() {
    return {
        width: this.width_,
        height: this.height_
    }
}, Blockly.Bubble.prototype.setBubbleSize = function(e, t) {
    var o = 2 * Blockly.Bubble.BORDER_WIDTH;
    e = Math.max(e, o + 45), t = Math.max(t, o + 20), this.width_ = e, this.height_ = t, this.bubbleBack_.setAttribute("width", e), this.bubbleBack_.setAttribute("height", t), this.resizeGroup_ && (this.workspace_.RTL ? this.resizeGroup_.setAttribute("transform", "translate(" + 2 * Blockly.Bubble.BORDER_WIDTH + "," + (t - o) + ") scale(-1 1)") : this.resizeGroup_.setAttribute("transform", "translate(" + (e - o) + "," + (t - o) + ")")), this.rendered_ && (this.autoLayout_ && this.layoutBubble_(), this.positionBubble_(), this.renderArrow_()), Blockly.fireUiEvent(this.bubbleGroup_, "resize")
}, Blockly.Bubble.prototype.renderArrow_ = function() {
    var e = [],
        t = this.width_ / 2,
        o = this.height_ / 2,
        n = -this.relativeLeft_,
        i = -this.relativeTop_;
    if (t == n && o == i) e.push("M " + t + "," + o);
    else {
        i -= o, n -= t, this.workspace_.RTL && (n *= -1);
        var r = Math.sqrt(i * i + n * n),
            s = Math.acos(n / r);
        0 > i && (s = 2 * Math.PI - s);
        var a = s + Math.PI / 2;
        a > 2 * Math.PI && (a -= 2 * Math.PI);
        var l = Math.sin(a),
            c = Math.cos(a),
            u = this.getBubbleSize(),
            a = (u.width + u.height) / Blockly.Bubble.ARROW_THICKNESS,
            a = Math.min(a, u.width, u.height) / 2,
            u = 1 - Blockly.Bubble.ANCHOR_RADIUS / r,
            n = t + u * n,
            i = o + u * i,
            u = t + a * c,
            g = o + a * l,
            t = t - a * c,
            o = o - a * l,
            l = s + this.arrow_radians_;
        l > 2 * Math.PI && (l -= 2 * Math.PI), s = Math.sin(l) * r / Blockly.Bubble.ARROW_BEND, r = Math.cos(l) * r / Blockly.Bubble.ARROW_BEND, e.push("M" + u + "," + g), e.push("C" + (u + r) + "," + (g + s) + " " + n + "," + i + " " + n + "," + i), e.push("C" + n + "," + i + " " + (t + r) + "," + (o + s) + " " + t + "," + o)
    }
    e.push("z"), this.bubbleArrow_.setAttribute("d", e.join(" "))
}, Blockly.Bubble.prototype.setColour = function(e) {
    this.bubbleBack_.setAttribute("fill", e), this.bubbleArrow_.setAttribute("fill", e)
}, Blockly.Bubble.prototype.dispose = function() {
    Blockly.Bubble.unbindDragEvents_(), goog.dom.removeNode(this.bubbleGroup_), this.shape_ = this.content_ = this.workspace_ = this.resizeGroup_ = this.bubbleBack_ = this.bubbleArrow_ = this.bubbleGroup_ = null
}, Blockly.Comment = function(e) {
    Blockly.Comment.superClass_.constructor.call(this, e), this.createIcon()
}, goog.inherits(Blockly.Comment, Blockly.Icon), Blockly.Comment.prototype.png_ = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAANyAAADcgBffIlqAAAAAd0SU1FB98DGgAnBf0Xj5sAAAIBSURBVDjLjZO9SxxRFMXPrFkWl2UFYSOIRtF210YtAiH/gGATRNZFgo19IBaB9Ipgk3SiEoKQgI19JIVgGaOIgpWJEAV1kZk3b1ad0V+KRYIzk5ALh1ecc88978tRSgHPg0Bjvq/BbFalMNR5oaBv+bzWHMfZjOudWPOg6+pDva6elRXlt7fVcnYmPX4sDQ3pdmpKQXu7frS16aXjON8T06OIMWOwtRp3jgNSEpkMTE5y5/v4UcSLePxnroutVNKb4xgYANfFAk/vDbLG8Gtk5P8M7jE6CsZwDDwSMLm5iYmLlpbg4ABOTmBjA4aHk0ZbWxigposLvlarScH5OSwvw9oaABwdJTW1GtTrfJHnUe/uTgqKxeZaKEAUgTEQP/CeHvA8LhRFhLlc+r6zWVhfbyaZn0/yuRxEEaGCAK9USjdZWGgarK5CS0uS7+gAa3EzjYaOy2WlludJi4vSzIx0e5vky2Xp6ko/M4WCPleruk4zsVa6vJSur9OHTEzoqljUJwEdQYDf25uMe3jY3E5fX5Lr7wdr8YGSJCkIeL23h9/a+lA4Pg7T039u6h75POzv4wcBrx5Ec11Wd3bwOzv//VK7umB3F991+Zj2/R1reWstdnaWm3L5YXOlAnNz3FiLbTR4Azj6WwFPjOG953EahoT1On4YEnoep8bwDuiO9/wG1sM4kG8A4fUAAAAASUVORK5CYII=", Blockly.Comment.prototype.text_ = "", Blockly.Comment.prototype.width_ = 160, Blockly.Comment.prototype.height_ = 80, Blockly.Comment.prototype.createEditor_ = function() {
    this.foreignObject_ = Blockly.createSvgElement("foreignObject", {
        x: Blockly.Bubble.BORDER_WIDTH,
        y: Blockly.Bubble.BORDER_WIDTH
    }, null);
    var e = document.createElementNS(Blockly.HTML_NS, "body");
    return e.setAttribute("xmlns", Blockly.HTML_NS), e.className = "blocklyMinimalBody", this.textarea_ = document.createElementNS(Blockly.HTML_NS, "textarea"), this.textarea_.className = "blocklyCommentTextarea", this.textarea_.setAttribute("dir", this.block_.RTL ? "RTL" : "LTR"), e.appendChild(this.textarea_), this.foreignObject_.appendChild(e), Blockly.bindEvent_(this.textarea_, "mouseup", this, this.textareaFocus_), Blockly.bindEvent_(this.textarea_, "wheel", this, function(e) {
        e.stopPropagation()
    }), this.foreignObject_
}, Blockly.Comment.prototype.updateEditable = function() {
    this.isVisible() && (this.setVisible(!1), this.setVisible(!0)), Blockly.Icon.prototype.updateEditable.call(this)
}, Blockly.Comment.prototype.resizeBubble_ = function() {
    var e = this.bubble_.getBubbleSize(),
        t = 2 * Blockly.Bubble.BORDER_WIDTH;
    this.foreignObject_.setAttribute("width", e.width - t), this.foreignObject_.setAttribute("height", e.height - t), this.textarea_.style.width = e.width - t - 4 + "px", this.textarea_.style.height = e.height - t - 4 + "px"
}, Blockly.Comment.prototype.setVisible = function(e) {
    if (e != this.isVisible())
        if (!this.block_.isEditable() && !this.textarea_ || goog.userAgent.IE) Blockly.Warning.prototype.setVisible.call(this, e);
        else {
            var t = this.getText(),
                o = this.getBubbleSize();
            e ? (this.bubble_ = new Blockly.Bubble(this.block_.workspace, this.createEditor_(), this.block_.svgPath_, this.iconX_, this.iconY_, this.width_, this.height_), this.bubble_.registerResizeEvent(this, this.resizeBubble_), this.updateColour(), this.text_ = null) : (this.bubble_.dispose(), this.foreignObject_ = this.textarea_ = this.bubble_ = null), this.setText(t), this.setBubbleSize(o.width, o.height)
        }
}, Blockly.Comment.prototype.textareaFocus_ = function(e) {
    this.bubble_.promote_(), this.textarea_.focus()
}, Blockly.Comment.prototype.getBubbleSize = function() {
    return this.isVisible() ? this.bubble_.getBubbleSize() : {
        width: this.width_,
        height: this.height_
    }
}, Blockly.Comment.prototype.setBubbleSize = function(e, t) {
    this.textarea_ ? this.bubble_.setBubbleSize(e, t) : (this.width_ = e, this.height_ = t)
}, Blockly.Comment.prototype.getText = function() {
    return this.textarea_ ? this.textarea_.value : this.text_
}, Blockly.Comment.prototype.setText = function(e) {
    this.textarea_ ? this.textarea_.value = e : this.text_ = e
}, Blockly.Comment.prototype.dispose = function() {
    this.block_.comment = null, Blockly.Icon.prototype.dispose.call(this)
}, Blockly.Connection = function(e, t) {
    this.sourceBlock_ = e, this.type = t, e.workspace.connectionDBList && (this.db_ = e.workspace.connectionDBList[t], this.dbOpposite_ = e.workspace.connectionDBList[Blockly.OPPOSITE_TYPE[t]], this.hidden_ = !this.db_)
}, Blockly.Connection.prototype.targetConnection = null, Blockly.Connection.prototype.check_ = null, Blockly.Connection.prototype.shadowDom_ = null, Blockly.Connection.prototype.x_ = 0, Blockly.Connection.prototype.y_ = 0, Blockly.Connection.prototype.inDB_ = !1, Blockly.Connection.prototype.db_ = null, Blockly.Connection.prototype.dbOpposite_ = null, Blockly.Connection.prototype.hidden_ = null, Blockly.Connection.prototype.dispose = function() {
    if (this.targetConnection) throw "Disconnect connection before disposing of it.";
    this.inDB_ && this.db_.removeConnection_(this), Blockly.highlightedConnection_ == this && (Blockly.highlightedConnection_ = null), Blockly.localConnection_ == this && (Blockly.localConnection_ = null), this.dbOpposite_ = this.db_ = null
}, Blockly.Connection.prototype.isSuperior = function() {
    return this.type == Blockly.INPUT_VALUE || this.type == Blockly.NEXT_STATEMENT
}, Blockly.Connection.prototype.connect = function(e) {
    if (this.sourceBlock_ == e.sourceBlock_) throw "Attempted to connect a block to itself.";
    if (this.sourceBlock_.workspace !== e.sourceBlock_.workspace) throw "Blocks are on different workspaces.";
    if (Blockly.OPPOSITE_TYPE[this.type] != e.type) throw "Attempt to connect incompatible types.";
    if (this.type == Blockly.INPUT_VALUE || this.type == Blockly.OUTPUT_VALUE) {
        if (this.targetConnection) throw "Source connection already connected (value).";
        if (e.targetConnection) {
            var t = e.targetBlock();
            if (t.setParent(null), t.isShadow()) t.dispose();
            else {
                if (!t.outputConnection) throw "Orphan block does not have an output connection.";
                for (var o, n = this.sourceBlock_; o = Blockly.Connection.singleConnection_(n, t);)
                    if (n = o.targetBlock(), !n || n.isShadow()) {
                        t.outputConnection.connect(o), t = null;
                        break
                    }
                t && setTimeout(function() {
                    t.outputConnection.bumpAwayFrom_(e)
                }, Blockly.BUMP_DELAY)
            }
        }
    } else {
        if (this.targetConnection) throw "Source connection already connected (block).";
        if (e.targetConnection) {
            if (this.type != Blockly.PREVIOUS_STATEMENT) throw "Can only do a mid-stack connection with the top of a block.";
            if (t = e.targetBlock(), t.setParent(null), !t.previousConnection) throw "Orphan block does not have a previous connection.";
            for (n = this.sourceBlock_; n.nextConnection;) {
                if (!n.nextConnection.targetConnection) {
                    t.previousConnection.checkType_(n.nextConnection) && (n.nextConnection.connect(t.previousConnection), t = null);
                    break
                }
                n = n.getNextBlock()
            }
            t && setTimeout(function() {
                t.previousConnection.bumpAwayFrom_(e)
            }, Blockly.BUMP_DELAY)
        }
    }
    this.isSuperior() ? (n = this.sourceBlock_, o = e.sourceBlock_) : (n = e.sourceBlock_, o = this.sourceBlock_), this.targetConnection = e, e.targetConnection = this, o.setParent(n), n.rendered && n.updateDisabled(), o.rendered && o.updateDisabled(), n.rendered && o.rendered && (this.type == Blockly.NEXT_STATEMENT || this.type == Blockly.PREVIOUS_STATEMENT ? o.render() : n.render())
}, Blockly.Connection.singleConnection_ = function(e, t) {
    for (var o = !1, n = 0; n < e.inputList.length; n++) {
        var i = e.inputList[n].connection;
        if (i && i.type == Blockly.INPUT_VALUE && t.outputConnection.checkType_(i)) {
            if (o) return null;
            o = i
        }
    }
    return o
}, Blockly.Connection.prototype.disconnect = function() {
    var e = this.targetConnection;
    if (!e) throw "Source connection not connected.";
    if (e.targetConnection != this) throw "Target connection not connected to source connection.";
    this.targetConnection = e.targetConnection = null;
    var t, o;
    this.isSuperior() ? (t = this.sourceBlock_, o = e.sourceBlock_, e = this) : (t = e.sourceBlock_, o = this.sourceBlock_);
    var n = e.getShadowDom();
    if (t.workspace && !o.isShadow() && n) {
        if (n = Blockly.Xml.domToBlock(t.workspace, n), n.outputConnection) e.connect(n.outputConnection);
        else {
            if (!n.previousConnection) throw "Child block does not have output or previous statement.";
            e.connect(n.previousConnection)
        }
        n.initSvg(), n.render(!1)
    }
    t.rendered && t.render(), o.rendered && (o.updateDisabled(), o.render())
}, Blockly.Connection.prototype.targetBlock = function() {
    return this.targetConnection ? this.targetConnection.sourceBlock_ : null
}, Blockly.Connection.prototype.bumpAwayFrom_ = function(e) {
    if (0 == Blockly.dragMode_) {
        var t = this.sourceBlock_.getRootBlock();
        if (!t.isInFlyout) {
            var o = !1;
            if (!t.isMovable()) {
                if (t = e.sourceBlock_.getRootBlock(), !t.isMovable()) return;
                e = this, o = !0
            }
            t.getSvgRoot().parentNode.appendChild(t.getSvgRoot());
            var n = e.x_ + Blockly.SNAP_RADIUS - this.x_;
            e = e.y_ + Blockly.SNAP_RADIUS - this.y_, o && (e = -e), t.RTL && (n = -n), t.moveBy(n, e)
        }
    }
}, Blockly.Connection.prototype.moveTo = function(e, t) {
    this.inDB_ && this.db_.removeConnection_(this), this.x_ = e, this.y_ = t, this.hidden_ || this.db_.addConnection_(this)
}, Blockly.Connection.prototype.moveBy = function(e, t) {
    this.moveTo(this.x_ + e, this.y_ + t)
}, Blockly.Connection.prototype.highlight = function() {
    var e;
    this.type == Blockly.INPUT_VALUE || this.type == Blockly.OUTPUT_VALUE ? (e = this.sourceBlock_.RTL ? -Blockly.BlockSvg.TAB_WIDTH : Blockly.BlockSvg.TAB_WIDTH, e = "m 0,0 v 5 c 0,10 " + -e + ",-8 " + -e + ",7.5 s " + e + ",-2.5 " + e + ",7.5 v 5") : e = this.sourceBlock_.RTL ? "m 20,0 h -5 " + Blockly.BlockSvg.NOTCH_PATH_RIGHT + " h -5" : "m -20,0 h 5 " + Blockly.BlockSvg.NOTCH_PATH_LEFT + " h 5";
    var t = this.sourceBlock_.getRelativeToSurfaceXY();
    Blockly.Connection.highlightedPath_ = Blockly.createSvgElement("path", {
        "class": "blocklyHighlightedConnectionPath",
        d: e,
        transform: "translate(" + (this.x_ - t.x) + "," + (this.y_ - t.y) + ")"
    }, this.sourceBlock_.getSvgRoot())
}, Blockly.Connection.prototype.unhighlight = function() {
    goog.dom.removeNode(Blockly.Connection.highlightedPath_), delete Blockly.Connection.highlightedPath_
}, Blockly.Connection.prototype.tighten_ = function() {
    var e = this.targetConnection.x_ - this.x_,
        t = this.targetConnection.y_ - this.y_;
    if (0 != e || 0 != t) {
        var o = this.targetBlock(),
            n = o.getSvgRoot();
        if (!n) throw "block is not rendered.";
        n = Blockly.getRelativeXY_(n), o.getSvgRoot().setAttribute("transform", "translate(" + (n.x - e) + "," + (n.y - t) + ")"), o.moveConnections_(-e, -t)
    }
}, Blockly.Connection.prototype.closest = function(e, t, o) {
    function n(t) {
        if (t = i[t], (t.type == Blockly.OUTPUT_VALUE || t.type == Blockly.PREVIOUS_STATEMENT) && t.targetConnection || t.type == Blockly.INPUT_VALUE && t.targetConnection && !t.targetBlock().isMovable() && !t.targetBlock().isShadow() || !u.checkType_(t)) return !0;
        var o = t.sourceBlock_;
        do {
            if (c == o) return !0;
            o = o.getParent()
        } while (o);
        var n = r - t.x_,
            o = s - t.y_,
            n = Math.sqrt(n * n + o * o);
        return e >= n && (l = t, e = n), Math.abs(o) < e
    }
    if (this.targetConnection) return {
        connection: null,
        radius: e
    };
    var i = this.dbOpposite_,
        r = this.x_ + t,
        s = this.y_ + o;
    t = 0;
    for (var a = o = i.length - 2; a > t;) i[a].y_ < s ? t = a : o = a, a = Math.floor((t + o) / 2);
    o = t = a;
    var l = null,
        c = this.sourceBlock_,
        u = this;
    if (i.length) {
        for (; t >= 0 && n(t);) t--;
        do o++; while (o < i.length && n(o))
    }
    return {
        connection: l,
        radius: e
    }
}, Blockly.Connection.prototype.checkType_ = function(e) {
    var t = this.targetBlock();
    if (t && !t.isMovable() && !this.sourceBlock_.isMovable() || (t = e.targetBlock()) && !t.isMovable() && !e.sourceBlock_.isMovable()) return !1;
    if (!this.check_ || !e.check_) return !0;
    for (t = 0; t < this.check_.length; t++)
        if (-1 != e.check_.indexOf(this.check_[t])) return !0;
    return !1
}, Blockly.Connection.prototype.setCheck = function(e) {
    return e ? (goog.isArray(e) || (e = [e]), this.check_ = e, this.targetConnection && !this.checkType_(this.targetConnection) && (this.isSuperior() ? this.targetBlock().setParent(null) : this.sourceBlock_.setParent(null), this.sourceBlock_.bumpNeighbours_())) : this.check_ = null, this
}, Blockly.Connection.prototype.setShadowDom = function(e) {
    this.shadowDom_ = e
}, Blockly.Connection.prototype.getShadowDom = function() {
    return this.shadowDom_
}, Blockly.Connection.prototype.neighbours_ = function(e) {
    function t(t) {
        var r = n - o[t].x_,
            s = i - o[t].y_;
        return Math.sqrt(r * r + s * s) <= e && l.push(o[t]), e > s
    }
    for (var o = this.dbOpposite_, n = this.x_, i = this.y_, r = 0, s = o.length - 2, a = s; a > r;) o[a].y_ < i ? r = a : s = a, a = Math.floor((r + s) / 2);
    var s = r = a,
        l = [];
    if (o.length) {
        for (; r >= 0 && t(r);) r--;
        do s++; while (s < o.length && t(s))
    }
    return l
}, Blockly.Connection.prototype.setHidden = function(e) {
    (this.hidden_ = e) && this.inDB_ ? this.db_.removeConnection_(this) : e || this.inDB_ || this.db_.addConnection_(this)
}, Blockly.Connection.prototype.hideAll = function() {
    if (this.setHidden(!0), this.targetConnection)
        for (var e = this.targetBlock().getDescendants(), t = 0; t < e.length; t++) {
            for (var o = e[t], n = o.getConnections_(!0), i = 0; i < n.length; i++) n[i].setHidden(!0);
            for (o = o.getIcons(), n = 0; n < o.length; n++) o[n].setVisible(!1)
        }
}, Blockly.Connection.prototype.unhideAll = function() {
    this.setHidden(!1);
    var e = [];
    if (this.type != Blockly.INPUT_VALUE && this.type != Blockly.NEXT_STATEMENT) return e;
    var t = this.targetBlock();
    if (t) {
        var o;
        t.isCollapsed() ? (o = [], t.outputConnection && o.push(t.outputConnection), t.nextConnection && o.push(t.nextConnection), t.previousConnection && o.push(t.previousConnection)) : o = t.getConnections_(!0);
        for (var n = 0; n < o.length; n++) e.push.apply(e, o[n].unhideAll());
        0 == e.length && (e[0] = t)
    }
    return e
}, Blockly.ConnectionDB = function() {}, Blockly.ConnectionDB.prototype = [], Blockly.ConnectionDB.constructor = Blockly.ConnectionDB, Blockly.ConnectionDB.prototype.addConnection_ = function(e) {
    if (e.inDB_) throw "Connection already in database.";
    if (!e.sourceBlock_.isInFlyout) {
        for (var t = 0, o = this.length; o > t;) {
            var n = Math.floor((t + o) / 2);
            if (this[n].y_ < e.y_) t = n + 1;
            else {
                if (!(this[n].y_ > e.y_)) {
                    t = n;
                    break
                }
                o = n
            }
        }
        this.splice(t, 0, e), e.inDB_ = !0
    }
}, Blockly.ConnectionDB.prototype.removeConnection_ = function(e) {
    if (!e.inDB_) throw "Connection not in database.";
    e.inDB_ = !1;
    for (var t = 0, o = this.length - 2, n = o; n > t;) this[n].y_ < e.y_ ? t = n : o = n, n = Math.floor((t + o) / 2);
    for (o = t = n; t >= 0 && this[t].y_ == e.y_;) {
        if (this[t] == e) return void this.splice(t, 1);
        t--
    }
    do {
        if (this[o] == e) return void this.splice(o, 1);
        o++
    } while (o < this.length && this[o].y_ == e.y_);
    throw "Unable to find connection in connectionDB."
}, Blockly.ConnectionDB.init = function(e) {
    var t = [];
    t[Blockly.INPUT_VALUE] = new Blockly.ConnectionDB, t[Blockly.OUTPUT_VALUE] = new Blockly.ConnectionDB, t[Blockly.NEXT_STATEMENT] = new Blockly.ConnectionDB, t[Blockly.PREVIOUS_STATEMENT] = new Blockly.ConnectionDB, e.connectionDBList = t
}, Blockly.Field = function(e) {
    this.size_ = new goog.math.Size(0, 25), this.setText(e)
}, Blockly.Field.cacheWidths_ = null, Blockly.Field.cacheReference_ = 0, Blockly.Field.prototype.maxDisplayLength = 50, Blockly.Field.prototype.sourceBlock_ = null, Blockly.Field.prototype.visible_ = !0, Blockly.Field.prototype.changeHandler_ = null, Blockly.Field.NBSP = "\xa0", Blockly.Field.prototype.EDITABLE = !0, Blockly.Field.prototype.init = function(e) {
    this.sourceBlock_ || (this.sourceBlock_ = e, this.fieldGroup_ = Blockly.createSvgElement("g", {}, null), this.visible_ || (this.fieldGroup_.style.display = "none"), this.borderRect_ = Blockly.createSvgElement("rect", {
        rx: 4,
        ry: 4,
        x: -Blockly.BlockSvg.SEP_SPACE_X / 2,
        y: 0,
        height: 16
    }, this.fieldGroup_, this.sourceBlock_.workspace), this.textElement_ = Blockly.createSvgElement("text", {
        "class": "blocklyText",
        y: this.size_.height - 12.5
    }, this.fieldGroup_), this.updateEditable(), e.getSvgRoot().appendChild(this.fieldGroup_), this.mouseUpWrapper_ = Blockly.bindEvent_(this.fieldGroup_, "mouseup", this, this.onMouseUp_), this.updateTextNode_())
}, Blockly.Field.prototype.dispose = function() {
    this.mouseUpWrapper_ && (Blockly.unbindEvent_(this.mouseUpWrapper_), this.mouseUpWrapper_ = null), this.sourceBlock_ = null, goog.dom.removeNode(this.fieldGroup_), this.changeHandler_ = this.borderRect_ = this.textElement_ = this.fieldGroup_ = null
}, Blockly.Field.prototype.updateEditable = function() {
    this.EDITABLE && this.sourceBlock_ && (this.sourceBlock_.isEditable() ? (Blockly.addClass_(this.fieldGroup_, "blocklyEditableText"), Blockly.removeClass_(this.fieldGroup_, "blocklyNoNEditableText"), this.fieldGroup_.style.cursor = this.CURSOR) : (Blockly.addClass_(this.fieldGroup_, "blocklyNonEditableText"), Blockly.removeClass_(this.fieldGroup_, "blocklyEditableText"), this.fieldGroup_.style.cursor = ""))
}, Blockly.Field.prototype.isVisible = function() {
    return this.visible_
}, Blockly.Field.prototype.setVisible = function(e) {
    if (this.visible_ != e) {
        this.visible_ = e;
        var t = this.getSvgRoot();
        t && (t.style.display = e ? "block" : "none", this.render_())
    }
}, Blockly.Field.prototype.setChangeHandler = function(e) {
    this.changeHandler_ = e
}, Blockly.Field.prototype.getSvgRoot = function() {
    return this.fieldGroup_
}, Blockly.Field.prototype.render_ = function() {
    if (this.visible_ && this.textElement_) {
        var e = this.textElement_.textContent + "\n" + this.textElement_.className.baseVal;
        if (Blockly.Field.cacheWidths_ && Blockly.Field.cacheWidths_[e]) var t = Blockly.Field.cacheWidths_[e];
        else {
            try {
                t = this.textElement_.getComputedTextLength()
            } catch (o) {
                t = 8 * this.textElement_.textContent.length
            }
            Blockly.Field.cacheWidths_ && (Blockly.Field.cacheWidths_[e] = t)
        }
        this.borderRect_ && this.borderRect_.setAttribute("width", t + Blockly.BlockSvg.SEP_SPACE_X)
    } else t = 0;
    this.size_.width = t
}, Blockly.Field.startCache = function() {
    Blockly.Field.cacheReference_++, Blockly.Field.cacheWidths_ || (Blockly.Field.cacheWidths_ = {})
}, Blockly.Field.stopCache = function() {
    Blockly.Field.cacheReference_--, Blockly.Field.cacheReference_ || (Blockly.Field.cacheWidths_ = null)
}, Blockly.Field.prototype.getSize = function() {
    return this.size_.width || this.render_(), this.size_
}, Blockly.Field.prototype.getScaledBBox_ = function() {
    var e = this.borderRect_.getBBox();
    return new goog.math.Size(e.width * this.sourceBlock_.workspace.scale, e.height * this.sourceBlock_.workspace.scale)
}, Blockly.Field.prototype.getText = function() {
    return this.text_
}, Blockly.Field.prototype.setText = function(e) {
    null !== e && (e = String(e), e !== this.text_ && (this.text_ = e, this.updateTextNode_(), this.sourceBlock_ && this.sourceBlock_.rendered && (this.sourceBlock_.render(), this.sourceBlock_.bumpNeighbours_(), this.sourceBlock_.workspace.fireChangeEvent())))
}, Blockly.Field.prototype.updateTextNode_ = function() {
    if (this.textElement_) {
        var e = this.text_;
        e.length > this.maxDisplayLength && (e = e.substring(0, this.maxDisplayLength - 2) + "\u2026"), goog.dom.removeChildren(this.textElement_), e = e.replace(/\s/g, Blockly.Field.NBSP), this.sourceBlock_.RTL && e && (e += "\u200f"), e || (e = Blockly.Field.NBSP), e = document.createTextNode(e), this.textElement_.appendChild(e), this.size_.width = 0
    }
}, Blockly.Field.prototype.getValue = function() {
    return this.getText()
}, Blockly.Field.prototype.setValue = function(e) {
    this.setText(e)
}, Blockly.Field.prototype.onMouseUp_ = function(e) {
    (!goog.userAgent.IPHONE && !goog.userAgent.IPAD || goog.userAgent.isVersionOrHigher("537.51.2") || 0 === e.layerX || 0 === e.layerY) && (Blockly.isRightButton(e) || 2 != Blockly.dragMode_ && this.sourceBlock_.isEditable() && this.showEditor_())
}, Blockly.Field.prototype.setTooltip = function(e) {}, Blockly.Field.prototype.getAbsoluteXY_ = function() {
    return goog.style.getPageOffset(this.borderRect_)
}, Blockly.Tooltip = {}, Blockly.Tooltip.visible = !1, Blockly.Tooltip.LIMIT = 50, Blockly.Tooltip.mouseOutPid_ = 0, Blockly.Tooltip.showPid_ = 0, Blockly.Tooltip.lastX_ = 0, Blockly.Tooltip.lastY_ = 0, Blockly.Tooltip.element_ = null, Blockly.Tooltip.poisonedElement_ = null, Blockly.Tooltip.OFFSET_X = 0, Blockly.Tooltip.OFFSET_Y = 10, Blockly.Tooltip.RADIUS_OK = 10, Blockly.Tooltip.HOVER_MS = 1e3, Blockly.Tooltip.MARGINS = 5, Blockly.Tooltip.DIV = null, Blockly.Tooltip.createDom = function() {
    Blockly.Tooltip.DIV || (Blockly.Tooltip.DIV = goog.dom.createDom("div", "blocklyTooltipDiv"), document.body.appendChild(Blockly.Tooltip.DIV))
}, Blockly.Tooltip.bindMouseEvents = function(e) {
    Blockly.bindEvent_(e, "mouseover", null, Blockly.Tooltip.onMouseOver_), Blockly.bindEvent_(e, "mouseout", null, Blockly.Tooltip.onMouseOut_), Blockly.bindEvent_(e, "mousemove", null, Blockly.Tooltip.onMouseMove_)
}, Blockly.Tooltip.onMouseOver_ = function(e) {
    for (e = e.target; !goog.isString(e.tooltip) && !goog.isFunction(e.tooltip);) e = e.tooltip;
    Blockly.Tooltip.element_ != e && (Blockly.Tooltip.hide(), Blockly.Tooltip.poisonedElement_ = null, Blockly.Tooltip.element_ = e), clearTimeout(Blockly.Tooltip.mouseOutPid_)
}, Blockly.Tooltip.onMouseOut_ = function(e) {
    Blockly.Tooltip.mouseOutPid_ = setTimeout(function() {
        Blockly.Tooltip.element_ = null, Blockly.Tooltip.poisonedElement_ = null, Blockly.Tooltip.hide()
    }, 1), clearTimeout(Blockly.Tooltip.showPid_)
}, Blockly.Tooltip.onMouseMove_ = function(e) {
    if (Blockly.Tooltip.element_ && Blockly.Tooltip.element_.tooltip && 0 == Blockly.dragMode_ && !Blockly.WidgetDiv.isVisible())
        if (Blockly.Tooltip.visible) {
            var t = Blockly.Tooltip.lastX_ - e.pageX;
            e = Blockly.Tooltip.lastY_ - e.pageY, Math.sqrt(t * t + e * e) > Blockly.Tooltip.RADIUS_OK && Blockly.Tooltip.hide()
        } else Blockly.Tooltip.poisonedElement_ != Blockly.Tooltip.element_ && (clearTimeout(Blockly.Tooltip.showPid_), Blockly.Tooltip.lastX_ = e.pageX, Blockly.Tooltip.lastY_ = e.pageY, Blockly.Tooltip.showPid_ = setTimeout(Blockly.Tooltip.show_, Blockly.Tooltip.HOVER_MS))
}, Blockly.Tooltip.hide = function() {
    Blockly.Tooltip.visible && (Blockly.Tooltip.visible = !1, Blockly.Tooltip.DIV && (Blockly.Tooltip.DIV.style.display = "none")), clearTimeout(Blockly.Tooltip.showPid_)
}, Blockly.Tooltip.show_ = function() {
    if (Blockly.Tooltip.poisonedElement_ = Blockly.Tooltip.element_, Blockly.Tooltip.DIV) {
        goog.dom.removeChildren(Blockly.Tooltip.DIV);
        var e = Blockly.Tooltip.element_.tooltip;
        goog.isFunction(e) && (e = e());
        for (var e = Blockly.Tooltip.wrap_(e, Blockly.Tooltip.LIMIT), e = e.split("\n"), t = 0; t < e.length; t++) {
            var o = document.createElement("div");
            o.appendChild(document.createTextNode(e[t])), Blockly.Tooltip.DIV.appendChild(o)
        }
        e = Blockly.Tooltip.element_.RTL, t = goog.dom.getViewportSize(), Blockly.Tooltip.DIV.style.direction = e ? "rtl" : "ltr", Blockly.Tooltip.DIV.style.display = "block", Blockly.Tooltip.visible = !0;
        var o = Blockly.Tooltip.lastX_,
            o = e ? o - (Blockly.Tooltip.OFFSET_X + Blockly.Tooltip.DIV.offsetWidth) : o + Blockly.Tooltip.OFFSET_X,
            n = Blockly.Tooltip.lastY_ + Blockly.Tooltip.OFFSET_Y;
        n + Blockly.Tooltip.DIV.offsetHeight > t.height + window.scrollY && (n -= Blockly.Tooltip.DIV.offsetHeight + 2 * Blockly.Tooltip.OFFSET_Y), e ? o = Math.max(Blockly.Tooltip.MARGINS - window.scrollX, o) : o + Blockly.Tooltip.DIV.offsetWidth > t.width + window.scrollX - 2 * Blockly.Tooltip.MARGINS && (o = t.width - Blockly.Tooltip.DIV.offsetWidth - 2 * Blockly.Tooltip.MARGINS), Blockly.Tooltip.DIV.style.top = n + "px", Blockly.Tooltip.DIV.style.left = o + "px"
    }
}, Blockly.Tooltip.wrap_ = function(e, t) {
    if (e.length <= t) return e;
    for (var o = e.trim().split(/\s+/), n = 0; n < o.length; n++) o[n].length > t && (t = o[n].length);
    var i, r, n = -(1 / 0),
        s = 1;
    do {
        i = n, r = e;
        for (var a = [], l = o.length / s, c = 1, n = 0; n < o.length - 1; n++)(n + 1.5) / l > c ? (c++, a[n] = !0) : a[n] = !1;
        a = Blockly.Tooltip.wrapMutate_(o, a, t), n = Blockly.Tooltip.wrapScore_(o, a, t), e = Blockly.Tooltip.wrapToText_(o, a), s++
    } while (n > i);
    return r
}, Blockly.Tooltip.wrapScore_ = function(e, t, o) {
    for (var n = [0], i = [], r = 0; r < e.length; r++) n[n.length - 1] += e[r].length, !0 === t[r] ? (n.push(0), i.push(e[r].charAt(e[r].length - 1))) : !1 === t[r] && n[n.length - 1] ++;
    for (e = Math.max.apply(Math, n), r = t = 0; r < n.length; r++) t -= 2 * Math.pow(Math.abs(o - n[r]), 1.5), t -= Math.pow(e - n[r], 1.5), -1 != ".?!".indexOf(i[r]) ? t += o / 3 : -1 != ",;)]}".indexOf(i[r]) && (t += o / 4);
    return 1 < n.length && n[n.length - 1] <= n[n.length - 2] && (t += .5), t
}, Blockly.Tooltip.wrapMutate_ = function(e, t, o) {
    for (var n, i = Blockly.Tooltip.wrapScore_(e, t, o), r = 0; r < t.length - 1; r++)
        if (t[r] != t[r + 1]) {
            var s = [].concat(t);
            s[r] = !s[r], s[r + 1] = !s[r + 1];
            var a = Blockly.Tooltip.wrapScore_(e, s, o);
            a > i && (i = a, n = s)
        }
    return n ? Blockly.Tooltip.wrapMutate_(e, n, o) : t
}, Blockly.Tooltip.wrapToText_ = function(e, t) {
    for (var o = [], n = 0; n < e.length; n++) o.push(e[n]), void 0 !== t[n] && o.push(t[n] ? "\n" : " ");
    return o.join("")
}, Blockly.FieldLabel = function(e, t) {
    this.size_ = new goog.math.Size(0, 17.5), this.class_ = t, this.setText(e)
}, goog.inherits(Blockly.FieldLabel, Blockly.Field), Blockly.FieldLabel.prototype.EDITABLE = !1, Blockly.FieldLabel.prototype.init = function(e) {
    this.sourceBlock_ || (this.sourceBlock_ = e, this.textElement_ = Blockly.createSvgElement("text", {
        "class": "blocklyText",
        y: this.size_.height - 5
    }, null), this.class_ && Blockly.addClass_(this.textElement_, this.class_), this.visible_ || (this.textElement_.style.display = "none"), e.getSvgRoot().appendChild(this.textElement_), this.textElement_.tooltip = this.sourceBlock_, Blockly.Tooltip.bindMouseEvents(this.textElement_), this.updateTextNode_())
}, Blockly.FieldLabel.prototype.dispose = function() {
    goog.dom.removeNode(this.textElement_), this.textElement_ = null
}, Blockly.FieldLabel.prototype.getSvgRoot = function() {
    return this.textElement_
}, Blockly.FieldLabel.prototype.setTooltip = function(e) {
    this.textElement_.tooltip = e
}, Blockly.Input = function(e, t, o, n) {
    this.type = e, this.name = t, this.sourceBlock_ = o, this.connection = n, this.fieldRow = []
}, Blockly.Input.prototype.align = Blockly.ALIGN_LEFT, Blockly.Input.prototype.visible_ = !0, Blockly.Input.prototype.appendField = function(e, t) {
    return e || t ? (goog.isString(e) && (e = new Blockly.FieldLabel(e)), this.sourceBlock_.rendered && e.init(this.sourceBlock_), e.name = t, e.prefixField && this.appendField(e.prefixField), this.fieldRow.push(e), e.suffixField && this.appendField(e.suffixField), this.sourceBlock_.rendered && (this.sourceBlock_.render(), this.sourceBlock_.bumpNeighbours_()), this) : this
}, Blockly.Input.prototype.appendTitle = function(e, t) {
    return console.warn("Deprecated call to appendTitle, use appendField instead."), this.appendField(e, t)
}, Blockly.Input.prototype.removeField = function(e) {
    for (var t, o = 0; t = this.fieldRow[o]; o++)
        if (t.name === e) return t.dispose(), this.fieldRow.splice(o, 1), void(this.sourceBlock_.rendered && (this.sourceBlock_.render(), this.sourceBlock_.bumpNeighbours_()));
    goog.asserts.fail('Field "%s" not found.', e)
}, Blockly.Input.prototype.isVisible = function() {
    return this.visible_
}, Blockly.Input.prototype.setVisible = function(e) {
    var t = [];
    if (this.visible_ == e) return t;
    for (var o, n = (this.visible_ = e) ? "block" : "none", i = 0; o = this.fieldRow[i]; i++) o.setVisible(e);
    return this.connection && (e ? t = this.connection.unhideAll() : this.connection.hideAll(), i = this.connection.targetBlock()) && (i.getSvgRoot().style.display = n, e || (i.rendered = !1)), t
}, Blockly.Input.prototype.setCheck = function(e) {
    if (!this.connection) throw "This input does not have a connection.";
    return this.connection.setCheck(e), this
}, Blockly.Input.prototype.setAlign = function(e) {
    return this.align = e, this.sourceBlock_.rendered && this.sourceBlock_.render(), this
}, Blockly.Input.prototype.init = function() {
    if (this.sourceBlock_.workspace.rendered)
        for (var e = 0; e < this.fieldRow.length; e++) this.fieldRow[e].init(this.sourceBlock_)
}, Blockly.Input.prototype.dispose = function() {
    for (var e, t = 0; e = this.fieldRow[t]; t++) e.dispose();
    this.connection && this.connection.dispose(), this.sourceBlock_ = null
}, Blockly.ScrollbarPair = function(e) {
    this.workspace_ = e, this.hScroll = new Blockly.Scrollbar(e, !0, !0), this.vScroll = new Blockly.Scrollbar(e, !1, !0), this.corner_ = Blockly.createSvgElement("rect", {
        height: Blockly.Scrollbar.scrollbarThickness,
        width: Blockly.Scrollbar.scrollbarThickness,
        "class": "blocklyScrollbarBackground"
    }, null), Blockly.Scrollbar.insertAfter_(this.corner_, e.getBubbleCanvas())
}, Blockly.ScrollbarPair.prototype.oldHostMetrics_ = null, Blockly.ScrollbarPair.prototype.dispose = function() {
    goog.dom.removeNode(this.corner_), this.oldHostMetrics_ = this.workspace_ = this.corner_ = null, this.hScroll.dispose(), this.hScroll = null, this.vScroll.dispose(), this.vScroll = null
}, Blockly.ScrollbarPair.prototype.resize = function() {
    var e = this.workspace_.getMetrics();
    if (e) {
        var t = !1,
            o = !1;
        this.oldHostMetrics_ && this.oldHostMetrics_.viewWidth == e.viewWidth && this.oldHostMetrics_.viewHeight == e.viewHeight && this.oldHostMetrics_.absoluteTop == e.absoluteTop && this.oldHostMetrics_.absoluteLeft == e.absoluteLeft ? (this.oldHostMetrics_ && this.oldHostMetrics_.contentWidth == e.contentWidth && this.oldHostMetrics_.viewLeft == e.viewLeft && this.oldHostMetrics_.contentLeft == e.contentLeft || (t = !0), this.oldHostMetrics_ && this.oldHostMetrics_.contentHeight == e.contentHeight && this.oldHostMetrics_.viewTop == e.viewTop && this.oldHostMetrics_.contentTop == e.contentTop || (o = !0)) : o = t = !0, t && this.hScroll.resize(e), o && this.vScroll.resize(e), this.oldHostMetrics_ && this.oldHostMetrics_.viewWidth == e.viewWidth && this.oldHostMetrics_.absoluteLeft == e.absoluteLeft || this.corner_.setAttribute("x", this.vScroll.xCoordinate), this.oldHostMetrics_ && this.oldHostMetrics_.viewHeight == e.viewHeight && this.oldHostMetrics_.absoluteTop == e.absoluteTop || this.corner_.setAttribute("y", this.hScroll.yCoordinate), this.oldHostMetrics_ = e
    }
}, Blockly.ScrollbarPair.prototype.set = function(e, t) {
    this.hScroll.set(e), this.vScroll.set(t)
}, Blockly.Scrollbar = function(e, t, o) {
    this.workspace_ = e, this.pair_ = o || !1, this.horizontal_ = t, this.createDom_(), t ? (this.svgBackground_.setAttribute("height", Blockly.Scrollbar.scrollbarThickness), this.svgKnob_.setAttribute("height", Blockly.Scrollbar.scrollbarThickness - 5), this.svgKnob_.setAttribute("y", 2.5)) : (this.svgBackground_.setAttribute("width", Blockly.Scrollbar.scrollbarThickness), this.svgKnob_.setAttribute("width", Blockly.Scrollbar.scrollbarThickness - 5), this.svgKnob_.setAttribute("x", 2.5)), this.onMouseDownBarWrapper_ = Blockly.bindEvent_(this.svgBackground_, "mousedown", this, this.onMouseDownBar_), this.onMouseDownKnobWrapper_ = Blockly.bindEvent_(this.svgKnob_, "mousedown", this, this.onMouseDownKnob_)
}, Blockly.Scrollbar.scrollbarThickness = 15, goog.events.BrowserFeature.TOUCH_ENABLED && (Blockly.Scrollbar.scrollbarThickness = 25), Blockly.Scrollbar.prototype.dispose = function() {
    this.onMouseUpKnob_(), Blockly.unbindEvent_(this.onMouseDownBarWrapper_), this.onMouseDownBarWrapper_ = null, Blockly.unbindEvent_(this.onMouseDownKnobWrapper_), this.onMouseDownKnobWrapper_ = null, goog.dom.removeNode(this.svgGroup_), this.workspace_ = this.svgKnob_ = this.svgBackground_ = this.svgGroup_ = null
}, Blockly.Scrollbar.prototype.resize = function(e) {
    if (e || (e = this.workspace_.getMetrics())) {
        if (this.horizontal_) {
            var t = e.viewWidth - 1;
            this.pair_ ? t -= Blockly.Scrollbar.scrollbarThickness : this.setVisible(t < e.contentHeight), this.ratio_ = t / e.contentWidth, (-(1 / 0) === this.ratio_ || 1 / 0 === this.ratio_ || isNaN(this.ratio_)) && (this.ratio_ = 0);
            var o = e.viewWidth * this.ratio_,
                n = (e.viewLeft - e.contentLeft) * this.ratio_;
            this.svgKnob_.setAttribute("width", Math.max(0, o)), this.xCoordinate = e.absoluteLeft + .5, this.pair_ && this.workspace_.RTL && (this.xCoordinate += e.absoluteLeft + Blockly.Scrollbar.scrollbarThickness), this.yCoordinate = e.absoluteTop + e.viewHeight - Blockly.Scrollbar.scrollbarThickness - .5, this.svgGroup_.setAttribute("transform", "translate(" + this.xCoordinate + "," + this.yCoordinate + ")"), this.svgBackground_.setAttribute("width", Math.max(0, t)), this.svgKnob_.setAttribute("x", this.constrainKnob_(n))
        } else t = e.viewHeight - 1, this.pair_ ? t -= Blockly.Scrollbar.scrollbarThickness : this.setVisible(t < e.contentHeight), this.ratio_ = t / e.contentHeight, (-(1 / 0) === this.ratio_ || 1 / 0 === this.ratio_ || isNaN(this.ratio_)) && (this.ratio_ = 0), o = e.viewHeight * this.ratio_, n = (e.viewTop - e.contentTop) * this.ratio_, this.svgKnob_.setAttribute("height", Math.max(0, o)), this.xCoordinate = e.absoluteLeft + .5, this.workspace_.RTL || (this.xCoordinate += e.viewWidth - Blockly.Scrollbar.scrollbarThickness - 1), this.yCoordinate = e.absoluteTop + .5, this.svgGroup_.setAttribute("transform", "translate(" + this.xCoordinate + "," + this.yCoordinate + ")"), this.svgBackground_.setAttribute("height", Math.max(0, t)), this.svgKnob_.setAttribute("y", this.constrainKnob_(n));
        this.onScroll_()
    }
}, Blockly.Scrollbar.prototype.createDom_ = function() {
    this.svgGroup_ = Blockly.createSvgElement("g", {
        "class": "blocklyScrollbar" + (this.horizontal_ ? "Horizontal" : "Vertical")
    }, null), this.svgBackground_ = Blockly.createSvgElement("rect", {
        "class": "blocklyScrollbarBackground"
    }, this.svgGroup_);
    var e = Math.floor((Blockly.Scrollbar.scrollbarThickness - 5) / 2);
    this.svgKnob_ = Blockly.createSvgElement("rect", {
        "class": "blocklyScrollbarKnob",
        rx: e,
        ry: e
    }, this.svgGroup_), Blockly.Scrollbar.insertAfter_(this.svgGroup_, this.workspace_.getBubbleCanvas())
}, Blockly.Scrollbar.prototype.isVisible = function() {
    return "none" != this.svgGroup_.getAttribute("display")
}, Blockly.Scrollbar.prototype.setVisible = function(e) {
    if (e != this.isVisible()) {
        if (this.pair_) throw "Unable to toggle visibility of paired scrollbars.";
        e ? this.svgGroup_.setAttribute("display", "block") : (this.workspace_.setMetrics({
            x: 0,
            y: 0
        }), this.svgGroup_.setAttribute("display", "none"))
    }
}, Blockly.Scrollbar.prototype.onMouseDownBar_ = function(e) {
    if (this.onMouseUpKnob_(), !Blockly.isRightButton(e)) {
        var t = Blockly.mouseToSvg(e, this.workspace_.options.svg),
            t = this.horizontal_ ? t.x : t.y,
            o = Blockly.getSvgXY_(this.svgKnob_, this.workspace_),
            o = this.horizontal_ ? o.x : o.y,
            n = parseFloat(this.svgKnob_.getAttribute(this.horizontal_ ? "width" : "height")),
            i = parseFloat(this.svgKnob_.getAttribute(this.horizontal_ ? "x" : "y")),
            r = .95 * n;
        o >= t ? i -= r : t >= o + n && (i += r), this.svgKnob_.setAttribute(this.horizontal_ ? "x" : "y", this.constrainKnob_(i)), this.onScroll_()
    }
    e.stopPropagation()
}, Blockly.Scrollbar.prototype.onMouseDownKnob_ = function(e) {
    this.onMouseUpKnob_(), Blockly.isRightButton(e) || (this.startDragKnob = parseFloat(this.svgKnob_.getAttribute(this.horizontal_ ? "x" : "y")), this.startDragMouse = this.horizontal_ ? e.clientX : e.clientY, Blockly.Scrollbar.onMouseUpWrapper_ = Blockly.bindEvent_(document, "mouseup", this, this.onMouseUpKnob_), Blockly.Scrollbar.onMouseMoveWrapper_ = Blockly.bindEvent_(document, "mousemove", this, this.onMouseMoveKnob_)), e.stopPropagation()
}, Blockly.Scrollbar.prototype.onMouseMoveKnob_ = function(e) {
    this.svgKnob_.setAttribute(this.horizontal_ ? "x" : "y", this.constrainKnob_(this.startDragKnob + ((this.horizontal_ ? e.clientX : e.clientY) - this.startDragMouse))), this.onScroll_()
}, Blockly.Scrollbar.prototype.onMouseUpKnob_ = function() {
    Blockly.removeAllRanges(), Blockly.hideChaff(!0), Blockly.Scrollbar.onMouseUpWrapper_ && (Blockly.unbindEvent_(Blockly.Scrollbar.onMouseUpWrapper_), Blockly.Scrollbar.onMouseUpWrapper_ = null), Blockly.Scrollbar.onMouseMoveWrapper_ && (Blockly.unbindEvent_(Blockly.Scrollbar.onMouseMoveWrapper_), Blockly.Scrollbar.onMouseMoveWrapper_ = null)
}, Blockly.Scrollbar.prototype.constrainKnob_ = function(e) {
    if (0 >= e || isNaN(e)) e = 0;
    else {
        var t = this.horizontal_ ? "width" : "height",
            o = parseFloat(this.svgBackground_.getAttribute(t)),
            t = parseFloat(this.svgKnob_.getAttribute(t));
        e = Math.min(e, o - t)
    }
    return e
}, Blockly.Scrollbar.prototype.onScroll_ = function() {
    var e = parseFloat(this.svgKnob_.getAttribute(this.horizontal_ ? "x" : "y")),
        t = parseFloat(this.svgBackground_.getAttribute(this.horizontal_ ? "width" : "height")),
        e = e / t;
    isNaN(e) && (e = 0), t = {}, this.horizontal_ ? t.x = e : t.y = e, this.workspace_.setMetrics(t)
}, Blockly.Scrollbar.prototype.set = function(e) {
    this.svgKnob_.setAttribute(this.horizontal_ ? "x" : "y", e * this.ratio_), this.onScroll_()
}, Blockly.Scrollbar.insertAfter_ = function(e, t) {
    var o = t.nextSibling,
        n = t.parentNode;
    if (!n) throw "Reference node has no parent.";
    o ? n.insertBefore(e, o) : n.appendChild(e)
}, Blockly.Trashcan = function(e) {
    this.workspace_ = e
}, Blockly.Trashcan.prototype.WIDTH_ = 47, Blockly.Trashcan.prototype.BODY_HEIGHT_ = 44, Blockly.Trashcan.prototype.LID_HEIGHT_ = 16, Blockly.Trashcan.prototype.MARGIN_BOTTOM_ = 20, Blockly.Trashcan.prototype.MARGIN_SIDE_ = 20, Blockly.Trashcan.prototype.MARGIN_HOTSPOT_ = 25, Blockly.Trashcan.prototype.isOpen = !1, Blockly.Trashcan.prototype.positionTopRight = !1, Blockly.Trashcan.prototype.svgGroup_ = null, Blockly.Trashcan.prototype.svgLid_ = null, Blockly.Trashcan.prototype.lidTask_ = 0, Blockly.Trashcan.prototype.lidOpen_ = 0, Blockly.Trashcan.prototype.left_ = 0, Blockly.Trashcan.prototype.top_ = 0, Blockly.Trashcan.prototype.createDom = function() {
    this.svgGroup_ = Blockly.createSvgElement("g", {
        "class": "blocklyTrash"
    }, null);
    var e = String(Math.random()).substring(2),
        t = Blockly.createSvgElement("clipPath", {
            id: "blocklyTrashBodyClipPath" + e
        }, this.svgGroup_);
    return Blockly.createSvgElement("rect", {
        width: this.WIDTH_,
        height: this.BODY_HEIGHT_,
        y: this.LID_HEIGHT_
    }, t), Blockly.createSvgElement("image", {
        width: Blockly.SPRITE.width,
        height: Blockly.SPRITE.height,
        y: -32,
        "clip-path": "url(#blocklyTrashBodyClipPath" + e + ")"
    }, this.svgGroup_).setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", this.workspace_.options.pathToMedia + Blockly.SPRITE.url), t = Blockly.createSvgElement("clipPath", {
        id: "blocklyTrashLidClipPath" + e
    }, this.svgGroup_), Blockly.createSvgElement("rect", {
        width: this.WIDTH_,
        height: this.LID_HEIGHT_
    }, t), this.svgLid_ = Blockly.createSvgElement("image", {
        width: Blockly.SPRITE.width,
        height: Blockly.SPRITE.height,
        y: -32,
        "clip-path": "url(#blocklyTrashLidClipPath" + e + ")"
    }, this.svgGroup_), this.svgLid_.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", this.workspace_.options.pathToMedia + Blockly.SPRITE.url), Blockly.bindEvent_(this.svgGroup_, "mouseup", this, this.click), this.animateLid_(), this.svgGroup_
}, Blockly.Trashcan.prototype.init = function(e) {
    return this.bottom_ = this.MARGIN_BOTTOM_ + e, this.setOpen_(!1), this.bottom_ + this.BODY_HEIGHT_ + this.LID_HEIGHT_
}, Blockly.Trashcan.prototype.dispose = function() {
    this.svgGroup_ && (goog.dom.removeNode(this.svgGroup_), this.svgGroup_ = null), this.workspace_ = this.svgLid_ = null, goog.Timer.clear(this.lidTask_)
}, Blockly.Trashcan.prototype.position = function() {
    var e = this.workspace_.getMetrics();
    e && (this.left_ = this.workspace_.RTL ? this.MARGIN_SIDE_ : e.viewWidth + e.absoluteLeft - this.WIDTH_ - this.MARGIN_SIDE_, this.top_ = this.positionTopRight ? this.MARGIN_SIDE_ : e.viewHeight + e.absoluteTop - (this.BODY_HEIGHT_ + this.LID_HEIGHT_) - this.bottom_, this.svgGroup_.setAttribute("transform", "translate(" + this.left_ + "," + this.top_ + ")"))
}, Blockly.Trashcan.prototype.getRect = function() {
    var e = Blockly.getSvgXY_(this.svgGroup_, this.workspace_);
    return new goog.math.Rect(e.x - this.MARGIN_HOTSPOT_, e.y - this.MARGIN_HOTSPOT_, this.WIDTH_ + 2 * this.MARGIN_HOTSPOT_, this.BODY_HEIGHT_ + this.LID_HEIGHT_ + 2 * this.MARGIN_HOTSPOT_)
}, Blockly.Trashcan.prototype.setOpen_ = function(e) {
    this.isOpen != e && (goog.Timer.clear(this.lidTask_), this.isOpen = e, this.animateLid_())
}, Blockly.Trashcan.prototype.animateLid_ = function() {
    this.lidOpen_ += this.isOpen ? .2 : -.2, this.lidOpen_ = goog.math.clamp(this.lidOpen_, 0, 1);
    var e = 45 * this.lidOpen_;
    this.svgLid_.setAttribute("transform", "rotate(" + (this.workspace_.RTL ? -e : e) + "," + (this.workspace_.RTL ? 4 : this.WIDTH_ - 4) + "," + (this.LID_HEIGHT_ - 2) + ")"), e = goog.math.lerp(.4, .8, this.lidOpen_), this.svgGroup_.style.opacity = e, 0 < this.lidOpen_ && 1 > this.lidOpen_ && (this.lidTask_ = goog.Timer.callOnce(this.animateLid_, 20, this))
}, Blockly.Trashcan.prototype.close = function() {
    this.setOpen_(!1)
}, Blockly.Trashcan.prototype.click = function() {
    var e = this.workspace_.startScrollX - this.workspace_.scrollX,
        t = this.workspace_.startScrollY - this.workspace_.scrollY;
    Math.sqrt(e * e + t * t) > Blockly.DRAG_RADIUS || console.log("TODO: Inspect trash.")
}, Blockly.ZoomControls = function(e) {
    this.workspace_ = e
}, Blockly.ZoomControls.prototype.WIDTH_ = 32, Blockly.ZoomControls.prototype.HEIGHT_ = 110, Blockly.ZoomControls.prototype.MARGIN_BOTTOM_ = 20, Blockly.ZoomControls.prototype.MARGIN_SIDE_ = 20, Blockly.ZoomControls.prototype.svgGroup_ = null, Blockly.ZoomControls.prototype.left_ = 0, Blockly.ZoomControls.prototype.top_ = 0, Blockly.ZoomControls.prototype.createDom = function() {
    var e = this.workspace_;
    this.svgGroup_ = Blockly.createSvgElement("g", {
        "class": "blocklyZoom"
    }, null);
    var t = String(Math.random()).substring(2),
        o = Blockly.createSvgElement("clipPath", {
            id: "blocklyZoomoutClipPath" + t
        }, this.svgGroup_);
    Blockly.createSvgElement("rect", {
        width: 32,
        height: 32,
        y: 77
    }, o);
    var n = Blockly.createSvgElement("image", {
        width: Blockly.SPRITE.width,
        height: Blockly.SPRITE.height,
        x: -64,
        y: -15,
        "clip-path": "url(#blocklyZoomoutClipPath" + t + ")"
    }, this.svgGroup_);
    n.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", e.options.pathToMedia + Blockly.SPRITE.url), o = Blockly.createSvgElement("clipPath", {
        id: "blocklyZoominClipPath" + t
    }, this.svgGroup_), Blockly.createSvgElement("rect", {
        width: 32,
        height: 32,
        y: 43
    }, o);
    var i = Blockly.createSvgElement("image", {
        width: Blockly.SPRITE.width,
        height: Blockly.SPRITE.height,
        x: -32,
        y: -49,
        "clip-path": "url(#blocklyZoominClipPath" + t + ")"
    }, this.svgGroup_);
    return i.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", e.options.pathToMedia + Blockly.SPRITE.url), o = Blockly.createSvgElement("clipPath", {
        id: "blocklyZoomresetClipPath" + t
    }, this.svgGroup_), Blockly.createSvgElement("rect", {
        width: 32,
        height: 32
    }, o), t = Blockly.createSvgElement("image", {
        width: Blockly.SPRITE.width,
        height: Blockly.SPRITE.height,
        y: -92,
        "clip-path": "url(#blocklyZoomresetClipPath" + t + ")"
    }, this.svgGroup_), t.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", e.options.pathToMedia + Blockly.SPRITE.url), Blockly.bindEvent_(t, "mousedown", e, e.zoomReset), Blockly.bindEvent_(i, "mousedown", null, function(t) {
        e.zoomCenter(1), t.stopPropagation()
    }), Blockly.bindEvent_(n, "mousedown", null, function(t) {
        e.zoomCenter(-1), t.stopPropagation()
    }), this.svgGroup_
}, Blockly.ZoomControls.prototype.init = function(e) {
    return this.bottom_ = this.MARGIN_BOTTOM_ + e, this.bottom_ + this.HEIGHT_
}, Blockly.ZoomControls.prototype.dispose = function() {
    this.svgGroup_ && (goog.dom.removeNode(this.svgGroup_), this.svgGroup_ = null), this.workspace_ = null
}, Blockly.ZoomControls.prototype.position = function() {
    var e = this.workspace_.getMetrics();
    e && (this.left_ = this.workspace_.RTL ? this.MARGIN_SIDE_ + Blockly.Scrollbar.scrollbarThickness : e.viewWidth + e.absoluteLeft - this.WIDTH_ - this.MARGIN_SIDE_ - Blockly.Scrollbar.scrollbarThickness, this.top_ = e.viewHeight + e.absoluteTop - this.HEIGHT_ - this.bottom_, this.svgGroup_.setAttribute("transform", "translate(" + this.left_ + "," + this.top_ + ")"))
}, Blockly.Xml = {}, Blockly.Xml.workspaceToDom = function(e) {
    var t;
    e.RTL && (t = e.getWidth());
    for (var o, n = goog.dom.createDom("xml"), i = e.getTopBlocks(!0), r = 0; o = i[r]; r++) {
        var s = Blockly.Xml.blockToDom_(o);
        o = o.getRelativeToSurfaceXY(), s.setAttribute("x", Math.round(e.RTL ? t - o.x : o.x)), s.setAttribute("y", Math.round(o.y)), n.appendChild(s)
    }
    return n
}, Blockly.Xml.blockToDom_ = function(e) {
    var t = goog.dom.createDom(e.isShadow() ? "shadow" : "block");
    if (t.setAttribute("type", e.type), Blockly.Realtime.isEnabled() && t.setAttribute("id", e.id), e.mutationToDom) {
        var o = e.mutationToDom();
        o && (o.hasChildNodes() || o.hasAttributes()) && t.appendChild(o)
    }
    for (var n, o = 0; n = e.inputList[o]; o++)
        for (var i, r = 0; i = n.fieldRow[r]; r++)
            if (i.name && i.EDITABLE) {
                var s = goog.dom.createDom("field", null, i.getValue());
                s.setAttribute("name", i.name), t.appendChild(s)
            }
    for (e.breakpoint && t.setAttribute("breakpoint", "true"), (o = e.getCommentText()) && (o = goog.dom.createDom("comment", null, o), "object" == typeof e.comment && (o.setAttribute("pinned", e.comment.isVisible()), n = e.comment.getBubbleSize(), o.setAttribute("h", n.height), o.setAttribute("w", n.width)), t.appendChild(o)), e.data && (o = goog.dom.createDom("data", null, e.data), t.appendChild(o)), o = 0; n = e.inputList[o]; o++) {
        var a;
        i = !0, n.type != Blockly.DUMMY_INPUT && (s = n.connection.targetBlock(), n.type == Blockly.INPUT_VALUE ? a = goog.dom.createDom("value") : n.type == Blockly.NEXT_STATEMENT && (a = goog.dom.createDom("statement")), r = n.connection.getShadowDom(), !r || s && s.isShadow() || a.appendChild(Blockly.Xml.cloneShadow_(r)), s && (a.appendChild(Blockly.Xml.blockToDom_(s)), i = !1), a.setAttribute("name", n.name), i || t.appendChild(a))
    }
    return e.inputsInlineDefault != e.inputsInline && t.setAttribute("inline", e.inputsInline), e.isCollapsed() && t.setAttribute("collapsed", !0), e.disabled && t.setAttribute("disabled", !0), e.isDeletable() || e.isShadow() || t.setAttribute("deletable", !1), e.isMovable() || e.isShadow() || t.setAttribute("movable", !1), e.isEditable() || t.setAttribute("editable", !1), (o = e.getNextBlock()) && (a = goog.dom.createDom("next", null, Blockly.Xml.blockToDom_(o)), t.appendChild(a)), r = e.nextConnection && e.nextConnection.getShadowDom(), !r || o && o.isShadow() || a.appendChild(Blockly.Xml.cloneShadow_(r)), t
}, Blockly.Xml.cloneShadow_ = function(e) {
    for (var t, o = e = e.cloneNode(!0); o;)
        if (o.firstChild) o = o.firstChild;
        else {
            for (; o && !o.nextSibling;) t = o, o = o.parentNode, 3 == t.nodeType && "" == t.data.trim() && o.firstChild != t && goog.dom.removeNode(t);
            o && (t = o, o = o.nextSibling, 3 == t.nodeType && "" == t.data.trim() && goog.dom.removeNode(t))
        }
    return e
}, Blockly.Xml.domToText = function(e) {
    return (new XMLSerializer).serializeToString(e)
}, Blockly.Xml.domToPrettyText = function(e) {
    e = Blockly.Xml.domToText(e).split("<");
    for (var t = "", o = 1; o < e.length; o++) {
        var n = e[o];
        "/" == n[0] && (t = t.substring(2)), e[o] = t + "<" + n, "/" != n[0] && "/>" != n.slice(-2) && (t += "  ")
    }
    return e = e.join("\n"), e = e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g, "$1</$2>"), e.replace(/^\n/, "")
}, Blockly.Xml.textToDom = function(e) {
    if (e = (new DOMParser).parseFromString(e, "text/xml"), !e || !e.firstChild || "xml" != e.firstChild.nodeName.toLowerCase() || e.firstChild !== e.lastChild) throw "Blockly.Xml.textToDom did not obtain a valid XML tree.";
    return e.firstChild
}, Blockly.Xml.domToWorkspace = function(e, t) {
    var o;
    e.RTL && (o = e.getWidth()), Blockly.Field.startCache();
    for (var n = t.childNodes.length, i = 0; n > i; i++) {
        var r = t.childNodes[i],
            s = r.nodeName.toLowerCase();
        if ("block" == s || "shadow" == s) {
            var s = Blockly.Xml.domToBlock(e, r),
                a = parseInt(r.getAttribute("x"), 10),
                r = parseInt(r.getAttribute("y"), 10);
            isNaN(a) || isNaN(r) || s.moveBy(e.RTL ? o - a : a, r)
        }
    }
    Blockly.Field.stopCache()
}, Blockly.Xml.domToBlock = function(e, t, o) {
    var n = Blockly.Xml.domToBlockHeadless_(e, t, o);
    if (e.rendered) {
        for (n.setConnectionsHidden(!0), e = n.getDescendants(), t = e.length - 1; t >= 0; t--) e[t].initSvg();
        for (t = e.length - 1; t >= 0; t--) e[t].render(!1);
        setTimeout(function() {
            n.workspace && n.setConnectionsHidden(!1)
        }, 1), n.updateDisabled(), Blockly.fireUiEvent(window, "resize")
    }
    return n
}, Blockly.Xml.domToBlockHeadless_ = function(e, t, o) {
    var n = null,
        i = t.getAttribute("type");
    if (!i) throw "Block type unspecified: \n" + t.outerHTML;
    var r = t.getAttribute("id");
    if (o && r) {
        if (n = Blockly.Block.getById(r, e), !n) throw "Couldn't get Block with id: " + r;
        r = n.getParent(), n.workspace && n.dispose(!0, !1, !0), n.fill(e, i), n.parent_ = r
    } else n = Blockly.Block.obtain(e, i);
    for (var s, a = null, r = 0; s = t.childNodes[r]; r++)
        if (3 != s.nodeType) {
            for (var l, c = a = null, u = 0; l = s.childNodes[u]; u++) 1 == l.nodeType && ("block" == l.nodeName.toLowerCase() ? a = l : "shadow" == l.nodeName.toLowerCase() && (c = l));
            switch (!a && c && (a = c), u = s.getAttribute("name"), s.nodeName.toLowerCase()) {
                case "mutation":
                    n.domToMutation && (n.domToMutation(s), n.initSvg && n.initSvg());
                    break;
                case "comment":
                    n.setCommentText(s.textContent);
                    var g = s.getAttribute("pinned");
                    g && setTimeout(function() {
                        n.comment && n.comment.setVisible && n.comment.setVisible("true" == g)
                    }, 1), a = parseInt(s.getAttribute("w"), 10), s = parseInt(s.getAttribute("h"), 10), !isNaN(a) && !isNaN(s) && n.comment && n.comment.setVisible && n.comment.setBubbleSize(a, s);
                    break;
                case "data":
                    n.data = s.textContent;
                    break;
                case "title":
                case "field":
                    if (a = n.getField(u), !a) {
                        console.warn("Ignoring non-existent field " + u + " in block " + i);
                        break
                    }
                    a.setValue(s.textContent);
                    break;
                case "value":
                case "statement":
                    if (s = n.getInput(u), !s) {
                        console.warn("Ignoring non-existent input " + u + " in block " + i);
                        break
                    }
                    if (c && s.connection.setShadowDom(c), a)
                        if (a = Blockly.Xml.domToBlockHeadless_(e, a, o), a.outputConnection) s.connection.connect(a.outputConnection);
                        else {
                            if (!a.previousConnection) throw "Child block does not have output or previous statement.";
                            s.connection.connect(a.previousConnection)
                        }
                    break;
                case "next":
                    if (c && n.nextConnection && n.nextConnection.setShadowDom(c), a) {
                        if (!n.nextConnection) throw "Next statement does not exist.";
                        if (n.nextConnection.targetConnection) throw "Next statement is already connected.";
                        if (a = Blockly.Xml.domToBlockHeadless_(e, a, o), !a.previousConnection) throw "Next block does not have previous statement.";
                        n.nextConnection.connect(a.previousConnection)
                    }
                    break;
                default:
                    console.warn("Ignoring unknown tag: " + s.nodeName)
            }
        }
    return t.getAttribute("breakpoint") && n.addBreakpoint(), (e = t.getAttribute("inline")) && n.setInputsInline("true" == e), (e = t.getAttribute("disabled")) && n.setDisabled("true" == e), (e = t.getAttribute("deletable")) && n.setDeletable("true" == e), (e = t.getAttribute("movable")) && n.setMovable("true" == e), (e = t.getAttribute("editable")) && n.setEditable("true" == e), (e = t.getAttribute("collapsed")) && n.setCollapsed("true" == e), "shadow" == t.nodeName.toLowerCase() && n.setShadow(!0), n.validate && n.validate(), n
}, Blockly.Xml.deleteNext = function(e) {
    for (var t, o = 0; t = e.childNodes[o]; o++)
        if ("next" == t.nodeName.toLowerCase()) {
            e.removeChild(t);
            break
        }
}, goog.global.Blockly || (goog.global.Blockly = {}), goog.global.Blockly.Xml || (goog.global.Blockly.Xml = {}), goog.global.Blockly.Xml.domToText = Blockly.Xml.domToText, goog.global.Blockly.Xml.domToWorkspace = Blockly.Xml.domToWorkspace, goog.global.Blockly.Xml.textToDom = Blockly.Xml.textToDom, goog.global.Blockly.Xml.workspaceToDom = Blockly.Xml.workspaceToDom, Blockly.WorkspaceSvg = function(e) {
    Blockly.WorkspaceSvg.superClass_.constructor.call(this, e), this.getMetrics = e.getMetrics, this.setMetrics = e.setMetrics, Blockly.ConnectionDB.init(this), this.SOUNDS_ = Object.create(null), this.eventWrappers_ = []
}, goog.inherits(Blockly.WorkspaceSvg, Blockly.Workspace), Blockly.WorkspaceSvg.prototype.rendered = !0, Blockly.WorkspaceSvg.prototype.isFlyout = !1, Blockly.WorkspaceSvg.prototype.isScrolling = !1, Blockly.WorkspaceSvg.prototype.scrollX = 0, Blockly.WorkspaceSvg.prototype.scrollY = 0, Blockly.WorkspaceSvg.prototype.startScrollX = 0, Blockly.WorkspaceSvg.prototype.startScrollY = 0, Blockly.WorkspaceSvg.prototype.dragDeltaX_ = 0, Blockly.WorkspaceSvg.prototype.dragDeltaY_ = 0, Blockly.WorkspaceSvg.prototype.scale = 1, Blockly.WorkspaceSvg.prototype.trashcan = null, Blockly.WorkspaceSvg.prototype.scrollbar = null, Blockly.WorkspaceSvg.prototype.masterVolume = 1, Blockly.WorkspaceSvg.prototype.createDom = function(e) {
    this.svgGroup_ = Blockly.createSvgElement("g", {
        "class": "blocklyWorkspace"
    }, null), e && (this.svgBackground_ = Blockly.createSvgElement("rect", {
        height: "100%",
        width: "100%",
        "class": e
    }, this.svgGroup_), "blocklyMainBackground" == e && (this.svgBackground_.style.fill = "url(#" + this.options.gridPattern.id + ")")), this.svgBlockCanvas_ = Blockly.createSvgElement("g", {
        "class": "blocklyBlockCanvas"
    }, this.svgGroup_, this), this.svgBubbleCanvas_ = Blockly.createSvgElement("g", {
        "class": "blocklyBubbleCanvas"
    }, this.svgGroup_, this), e = Blockly.Scrollbar.scrollbarThickness, this.options.hasTrashcan && (e = this.addTrashcan_(e)), this.options.zoomOptions && this.options.zoomOptions.controls && (e = this.addZoomControls_(e)), Blockly.bindEvent_(this.svgGroup_, "mousedown", this, this.onMouseDown_);
    var t = this;
    return Blockly.bindEvent_(this.svgGroup_, "touchstart", null, function(e) {
        Blockly.longStart_(e, t)
    }), this.options.zoomOptions && this.options.zoomOptions.wheel && Blockly.bindEvent_(this.svgGroup_, "wheel", this, this.onMouseWheel_), this.options.hasCategories ? this.toolbox_ = new Blockly.Toolbox(this) : this.options.languageTree && this.addFlyout_(), this.updateGridPattern_(), this.svgGroup_
}, Blockly.WorkspaceSvg.prototype.dispose = function() {
    this.rendered = !1, Blockly.unbindEvent_(this.eventWrappers_), Blockly.WorkspaceSvg.superClass_.dispose.call(this), this.svgGroup_ && (goog.dom.removeNode(this.svgGroup_), this.svgGroup_ = null), this.svgBubbleCanvas_ = this.svgBlockCanvas_ = null, this.toolbox_ && (this.toolbox_.dispose(), this.toolbox_ = null), this.flyout_ && (this.flyout_.dispose(), this.flyout_ = null), this.trashcan && (this.trashcan.dispose(), this.trashcan = null), this.scrollbar && (this.scrollbar.dispose(), this.scrollbar = null), this.zoomControls_ && (this.zoomControls_.dispose(), this.zoomControls_ = null), this.options.parentWorkspace || goog.dom.removeNode(this.options.svg)
}, Blockly.WorkspaceSvg.prototype.addTrashcan_ = function(e) {
    this.trashcan = new Blockly.Trashcan(this);
    var t = this.trashcan.createDom();
    return this.svgGroup_.insertBefore(t, this.svgBlockCanvas_), this.trashcan.init(e)
}, Blockly.WorkspaceSvg.prototype.addZoomControls_ = function(e) {
    this.zoomControls_ = new Blockly.ZoomControls(this);
    var t = this.zoomControls_.createDom();
    return this.svgGroup_.appendChild(t), this.zoomControls_.init(e)
}, Blockly.WorkspaceSvg.prototype.addFlyout_ = function() {
    this.flyout_ = new Blockly.Flyout({
        disabledPatternId: this.options.disabledPatternId,
        parentWorkspace: this,
        RTL: this.RTL
    }), this.flyout_.autoClose = !1;
    var e = this.flyout_.createDom();
    this.svgGroup_.insertBefore(e, this.svgBlockCanvas_)
}, Blockly.WorkspaceSvg.prototype.resize = function() {
    this.toolbox_ && this.toolbox_.position(), this.flyout_ && this.flyout_.position(), this.trashcan && this.trashcan.position(), this.zoomControls_ && this.zoomControls_.position(), this.scrollbar && this.scrollbar.resize()
}, Blockly.WorkspaceSvg.prototype.getCanvas = function() {
    return this.svgBlockCanvas_
}, Blockly.WorkspaceSvg.prototype.getBubbleCanvas = function() {
    return this.svgBubbleCanvas_
}, Blockly.WorkspaceSvg.prototype.translate = function(e, t) {
    var o = "translate(" + e + "," + t + ") scale(" + this.scale + ")";
    this.svgBlockCanvas_.setAttribute("transform", o), this.svgBubbleCanvas_.setAttribute("transform", o)
}, Blockly.WorkspaceSvg.prototype.addTopBlock = function(e) {
    Blockly.WorkspaceSvg.superClass_.addTopBlock.call(this, e), Blockly.Realtime.isEnabled() && !this.options.parentWorkspace && Blockly.Realtime.addTopBlock(e)
}, Blockly.WorkspaceSvg.prototype.removeTopBlock = function(e) {
    Blockly.WorkspaceSvg.superClass_.removeTopBlock.call(this, e), Blockly.Realtime.isEnabled() && !this.options.parentWorkspace && Blockly.Realtime.removeTopBlock(e)
}, Blockly.WorkspaceSvg.prototype.getWidth = function() {
    return this.getMetrics().viewWidth
}, Blockly.WorkspaceSvg.prototype.setVisible = function(e) {
    this.options.svg.style.display = e ? "block" : "none",
        this.toolbox_ && (this.toolbox_.HtmlDiv.style.display = e ? "block" : "none"), e ? (this.render(), this.toolbox_ && this.toolbox_.position()) : Blockly.hideChaff(!0)
}, Blockly.WorkspaceSvg.prototype.render = function() {
    for (var e = this.getAllBlocks(), t = e.length - 1; t >= 0; t--) e[t].render(!1)
}, Blockly.WorkspaceSvg.prototype.traceOn = function(e) {
    this.traceOn_ = e, this.traceWrapper_ && (Blockly.unbindEvent_(this.traceWrapper_), this.traceWrapper_ = null), e && (this.traceWrapper_ = Blockly.bindEvent_(this.svgBlockCanvas_, "blocklySelectChange", this, function() {
        this.traceOn_ = !1
    }))
}, Blockly.WorkspaceSvg.prototype.highlightBlock = function(e) {
    if (this.traceOn_ && 0 != Blockly.dragMode_ && this.traceOn(!1), this.traceOn_) {
        var t = null;
        if (e && (t = this.getBlockById(e), !t)) return;
        this.traceOn(!1), t ? t.select() : Blockly.selected && Blockly.selected.unselect();
        var o = this;
        setTimeout(function() {
            o.traceOn(!0)
        }, 1)
    }
}, Blockly.WorkspaceSvg.prototype.fireChangeEvent = function() {
    this.rendered && this.svgBlockCanvas_ && Blockly.fireUiEvent(this.svgBlockCanvas_, "blocklyWorkspaceChange")
}, Blockly.WorkspaceSvg.prototype.paste = function(e) {
    if (this.rendered && !(e.getElementsByTagName("block").length >= this.remainingCapacity())) {
        Blockly.terminateDrag_();
        var t = Blockly.Xml.domToBlock(this, e),
            o = parseInt(e.getAttribute("x"), 10);
        if (e = parseInt(e.getAttribute("y"), 10), !isNaN(o) && !isNaN(e)) {
            this.RTL && (o = -o);
            do {
                for (var n, i = !1, r = this.getAllBlocks(), s = 0; n = r[s]; s++)
                    if (n = n.getRelativeToSurfaceXY(), 1 >= Math.abs(o - n.x) && 1 >= Math.abs(e - n.y)) {
                        i = !0;
                        break
                    }
                if (!i)
                    for (r = t.getConnections_(!1), s = 0; n = r[s]; s++)
                        if (n.closest(Blockly.SNAP_RADIUS, o, e).connection) {
                            i = !0;
                            break
                        }
                i && (o = this.RTL ? o - Blockly.SNAP_RADIUS : o + Blockly.SNAP_RADIUS, e += 2 * Blockly.SNAP_RADIUS)
            } while (i);
            t.moveBy(o, e)
        }
        t.select()
    }
}, Blockly.WorkspaceSvg.prototype.recordDeleteAreas = function() {
    this.deleteAreaTrash_ = this.trashcan ? this.trashcan.getRect() : null, this.deleteAreaToolbox_ = this.flyout_ ? this.flyout_.getRect() : this.toolbox_ ? this.toolbox_.getRect() : null
}, Blockly.WorkspaceSvg.prototype.isDeleteArea = function(e) {
    if (e = Blockly.mouseToSvg(e, Blockly.mainWorkspace.options.svg), e = new goog.math.Coordinate(e.x, e.y), this.deleteAreaTrash_) {
        if (this.deleteAreaTrash_.contains(e)) return this.trashcan.setOpen_(!0), Blockly.Css.setCursor(Blockly.Css.Cursor.DELETE), !0;
        this.trashcan.setOpen_(!1)
    }
    return this.deleteAreaToolbox_ && this.deleteAreaToolbox_.contains(e) ? (Blockly.Css.setCursor(Blockly.Css.Cursor.DELETE), !0) : (Blockly.Css.setCursor(Blockly.Css.Cursor.CLOSED), !1)
}, Blockly.WorkspaceSvg.prototype.onMouseDown_ = function(e) {
    this.markFocused(), Blockly.isTargetInput_(e) || (Blockly.svgResize(this), Blockly.terminateDrag_(), Blockly.hideChaff(), e.target && e.target.nodeName && ("svg" == e.target.nodeName.toLowerCase() || e.target == this.svgBackground_) && Blockly.selected && !this.options.readOnly && Blockly.selected.unselect(), Blockly.isRightButton(e) ? this.showContextMenu_(e) : this.scrollbar && (Blockly.removeAllRanges(), this.isScrolling = !0, this.startDragMouseX = e.clientX, this.startDragMouseY = e.clientY, this.startDragMetrics = this.getMetrics(), this.startScrollX = this.scrollX, this.startScrollY = this.scrollY, "mouseup" in Blockly.bindEvent_.TOUCH_MAP && (Blockly.onTouchUpWrapper_ = Blockly.bindEvent_(document, "mouseup", null, Blockly.onMouseUp_)), Blockly.onMouseMoveWrapper_ = Blockly.bindEvent_(document, "mousemove", null, Blockly.onMouseMove_)), e.stopPropagation())
}, Blockly.WorkspaceSvg.prototype.startDrag = function(e, t, o) {
    e = Blockly.mouseToSvg(e, this.options.svg), e.x /= this.scale, e.y /= this.scale, this.dragDeltaX_ = t - e.x, this.dragDeltaY_ = o - e.y
}, Blockly.WorkspaceSvg.prototype.moveDrag = function(e) {
    return e = Blockly.mouseToSvg(e, this.options.svg), e.x /= this.scale, e.y /= this.scale, new goog.math.Coordinate(this.dragDeltaX_ + e.x, this.dragDeltaY_ + e.y)
}, Blockly.WorkspaceSvg.prototype.onMouseWheel_ = function(e) {
    Blockly.terminateDrag_();
    var t = 0 < e.deltaY ? -1 : 1,
        o = Blockly.mouseToSvg(e, this.options.svg);
    this.zoom(o.x, o.y, t), e.preventDefault()
}, Blockly.WorkspaceSvg.prototype.cleanUp_ = function() {
    for (var e, t = this.getTopBlocks(!0), o = 0, n = 0; e = t[n]; n++) {
        var i = e.getRelativeToSurfaceXY();
        e.moveBy(-i.x, o - i.y), e.snapToGrid(), o = e.getRelativeToSurfaceXY().y + e.getHeightWidth().height + Blockly.BlockSvg.MIN_BLOCK_Y
    }
    Blockly.fireUiEvent(window, "resize"), this.fireChangeEvent()
}, Blockly.WorkspaceSvg.prototype.showContextMenu_ = function(e) {
    if (!this.options.readOnly) {
        var t = [],
            o = this.getTopBlocks(!0),
            n = {};
        if (n.text = Blockly.Msg.CLEAN_UP, n.enabled = 1 < o.length, n.callback = this.cleanUp_.bind(this), t.push(n), this.options.collapse) {
            for (var i = n = !1, r = 0; r < o.length; r++)
                for (var s = o[r]; s;) s.isCollapsed() ? n = !0 : i = !0, s = s.getNextBlock();
            var a = function(e) {
                    for (var t = 0, n = 0; n < o.length; n++)
                        for (var i = o[n]; i;) setTimeout(i.setCollapsed.bind(i, e), t), i = i.getNextBlock(), t += 10
                },
                i = {
                    enabled: i
                };
            i.text = Blockly.Msg.COLLAPSE_ALL, i.callback = function() {
                a(!0)
            }, t.push(i), n = {
                enabled: n
            }, n.text = Blockly.Msg.EXPAND_ALL, n.callback = function() {
                a(!1)
            }, t.push(n)
        }
        Blockly.ContextMenu.show(e, t, this.RTL)
    }
}, Blockly.WorkspaceSvg.prototype.loadAudio_ = function(e, t) {
    if (e.length) {
        try {
            var o = new window.Audio
        } catch (n) {
            return
        }
        for (var i, r = 0; r < e.length; r++) {
            var s = e[r],
                a = s.match(/\.(\w+)$/);
            if (a && o.canPlayType("audio/" + a[1])) {
                i = new window.Audio(s);
                break
            }
        }
        i && i.play && (this.SOUNDS_[t] = i)
    }
}, Blockly.WorkspaceSvg.prototype.preloadAudio_ = function() {
    for (var e in this.SOUNDS_) {
        var t = this.SOUNDS_[e];
        if (t.volume = .01, t.play(), t.pause(), goog.userAgent.IPAD || goog.userAgent.IPHONE) break
    }
}, Blockly.WorkspaceSvg.prototype.playAudio = function(e, t) {
    var o = this.SOUNDS_[e];
    return o ? (o = goog.userAgent.DOCUMENT_MODE && 9 === goog.userAgent.DOCUMENT_MODE || goog.userAgent.IPAD || goog.userAgent.ANDROID ? o : o.cloneNode(), o.volume = this.masterVolume * (void 0 === t ? 1 : t), o.play(), o) : this.options.parentWorkspace ? this.options.parentWorkspace.playAudio(e, t) : void 0
}, Blockly.WorkspaceSvg.prototype.setMasterVolume = function(e) {
    this.masterVolume = e
}, Blockly.WorkspaceSvg.prototype.updateToolbox = function(e) {
    if (e = Blockly.parseToolboxTree_(e)) {
        if (!this.options.languageTree) throw "Existing toolbox is null.  Can't create new toolbox.";
        if (this.options.hasCategories) {
            if (!this.toolbox_) throw "Existing toolbox has no categories.  Can't change mode.";
            this.options.languageTree = e, this.toolbox_.populate_(e)
        } else {
            if (!this.flyout_) throw "Existing toolbox has categories.  Can't change mode.";
            this.options.languageTree = e, this.flyout_.show(e.childNodes)
        }
    } else if (this.options.languageTree) throw "Can't nullify an existing toolbox."
}, Blockly.WorkspaceSvg.prototype.addChangeListener = function(e) {
    return e = Blockly.bindEvent_(this.getCanvas(), "blocklyWorkspaceChange", null, e), Array.prototype.push.apply(this.eventWrappers_, e), e
}, Blockly.WorkspaceSvg.prototype.removeChangeListener = function(e) {
    Blockly.unbindEvent_(e), e = this.eventWrappers_.indexOf(e), -1 != e && this.eventWrappers_.splice(e, 1)
}, Blockly.WorkspaceSvg.prototype.markFocused = function() {
    this.options.parentWorkspace ? this.options.parentWorkspace.markFocused() : Blockly.mainWorkspace = this
}, Blockly.WorkspaceSvg.prototype.zoom = function(e, t, o) {
    var n = this.options.zoomOptions.scaleSpeed,
        i = this.getMetrics(),
        r = this.options.svg.createSVGPoint();
    r.x = e, r.y = t, r = r.matrixTransform(this.getCanvas().getCTM().inverse()), e = r.x, t = r.y, r = this.getCanvas(), o = 1 == o ? n : 1 / n, n = this.scale * o, n > this.options.zoomOptions.maxScale ? o = this.options.zoomOptions.maxScale / this.scale : n < this.options.zoomOptions.minScale && (o = this.options.zoomOptions.minScale / this.scale), e = r.getCTM().translate(e * (1 - o), t * (1 - o)).scale(o), this.scale != e.a && (this.scale = e.a, this.scrollX = e.e - i.absoluteLeft, this.scrollY = e.f - i.absoluteTop, this.updateGridPattern_(), this.scrollbar ? this.scrollbar.resize() : this.translate(0, 0), Blockly.hideChaff(!1), this.flyout_ && this.flyout_.reflow())
}, Blockly.WorkspaceSvg.prototype.zoomCenter = function(e) {
    var t = this.getMetrics();
    this.zoom(t.viewWidth / 2, t.viewHeight / 2, e)
}, Blockly.WorkspaceSvg.prototype.zoomReset = function(e) {
    this.scale = 1, this.updateGridPattern_(), Blockly.hideChaff(!1), this.flyout_ && this.flyout_.reflow(), this.scrollbar && this.scrollbar.resize();
    var t = this.getMetrics();
    this.scrollbar ? this.scrollbar.set((t.contentWidth - t.viewWidth) / 2, (t.contentHeight - t.viewHeight) / 2) : this.translate(0, 0), e.stopPropagation()
}, Blockly.WorkspaceSvg.prototype.updateGridPattern_ = function() {
    if (this.options.gridPattern) {
        var e = this.options.gridOptions.spacing * this.scale || 100;
        this.options.gridPattern.setAttribute("width", e), this.options.gridPattern.setAttribute("height", e);
        var e = Math.floor(this.options.gridOptions.spacing / 2) + .5,
            t = e - this.options.gridOptions.length / 2,
            o = e + this.options.gridOptions.length / 2,
            n = this.options.gridPattern.firstChild,
            i = n && n.nextSibling,
            e = e * this.scale,
            t = t * this.scale,
            o = o * this.scale;
        n && (n.setAttribute("stroke-width", this.scale), n.setAttribute("x1", t), n.setAttribute("y1", e), n.setAttribute("x2", o), n.setAttribute("y2", e)), i && (i.setAttribute("stroke-width", this.scale), i.setAttribute("x1", e), i.setAttribute("y1", t), i.setAttribute("x2", e), i.setAttribute("y2", o))
    }
}, Blockly.WorkspaceSvg.prototype.setVisible = Blockly.WorkspaceSvg.prototype.setVisible, Blockly.WorkspaceSvg.prototype.addChangeListener = Blockly.WorkspaceSvg.prototype.addChangeListener, Blockly.WorkspaceSvg.prototype.removeChangeListener = Blockly.WorkspaceSvg.prototype.removeChangeListener, Blockly.Mutator = function(e) {
    Blockly.Mutator.superClass_.constructor.call(this, null), this.quarkNames_ = e
}, goog.inherits(Blockly.Mutator, Blockly.Icon), Blockly.Mutator.prototype.png_ = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAANyAAADcgBffIlqAAAAAd0SU1FB98DGhULOIajyb8AAAHMSURBVDjLnZS9SiRBFIXP/CQ9iIHgPoGBTo8vIAaivoKaKJr6DLuxYqKYKIqRgSCMrblmIxqsICgOmAriziIiRXWjYPdnUDvT2+PMsOyBoop7qk71vedWS5KAkrWsGUMjSYjpgSQhNoZGFLEKeGoKGMNttUpULkOhAFL3USiA70MQEBnDDeDJWtaqVaJeB7uNICAKQ1ZkDI1yufOm+XnY2YHl5c6874MxPClJiDulkMvBxYWrw/095POdU0sS4hxALqcWtreloSGpVJLGxtL49bX0+Ci9vUkzM2kcXGFbypUKxHHLBXZ3YW4ONjfh4yN1aGIiPQOQEenrg6MjR+zvZz99Y8PFT09hYCArktdfsFY6PHTr83NlUKu5+eREennJchmR/n5pYcGtJyezG6em3Dw7Kw0OZrlMOr6f1gTg4ACWlmBvz9WoifHxbDpf3Flfd+54njQ9ncYvL6WHB+n9XVpcbHOnW59IUKu5m+p11zftfLHo+qRorZ6Hh/Xt7k5fsLUl1evS1dWfG9swMiJZq9+KIlaD4P/eztkZNgz5LsAzhpvjY6JK5d9e8eioE3h95SdQbDrkhSErxvArjkl6/U/imMQYnsKQH02BT7vbZZfVOiWhAAAAAElFTkSuQmCC", Blockly.Mutator.prototype.workspaceWidth_ = 0, Blockly.Mutator.prototype.workspaceHeight_ = 0, Blockly.Mutator.prototype.iconClick_ = function(e) {
    this.block_.isEditable() && Blockly.Icon.prototype.iconClick_.call(this, e)
}, Blockly.Mutator.prototype.createEditor_ = function() {
    this.svgDialog_ = Blockly.createSvgElement("svg", {
        x: Blockly.Bubble.BORDER_WIDTH,
        y: Blockly.Bubble.BORDER_WIDTH
    }, null);
    for (var e, t = goog.dom.createDom("xml"), o = 0; e = this.quarkNames_[o]; o++) t.appendChild(goog.dom.createDom("block", {
        type: e
    }));
    var n = this;
    return this.workspace_ = new Blockly.WorkspaceSvg({
        languageTree: t,
        parentWorkspace: this.block_.workspace,
        pathToMedia: this.block_.workspace.options.pathToMedia,
        RTL: this.block_.RTL,
        getMetrics: function() {
            return n.getFlyoutMetrics_()
        },
        setMetrics: null,
        svg: this.svgDialog_
    }), this.svgDialog_.appendChild(this.workspace_.createDom("blocklyMutatorBackground")), this.svgDialog_
}, Blockly.Mutator.prototype.updateEditable = function() {
    this.block_.isEditable() ? Blockly.Icon.prototype.updateEditable.call(this) : (this.setVisible(!1), this.iconGroup_ && Blockly.addClass_(this.iconGroup_, "blocklyIconGroupReadonly"))
}, Blockly.Mutator.prototype.resizeBubble_ = function() {
    var e, t = 2 * Blockly.Bubble.BORDER_WIDTH,
        o = this.workspace_.getCanvas().getBBox(),
        n = this.workspace_.flyout_.getMetrics_();
    e = this.block_.RTL ? -o.x : o.width + o.x, o = Math.max(o.height + 3 * t, n.contentHeight + 20), e += 3 * t, (Math.abs(this.workspaceWidth_ - e) > t || Math.abs(this.workspaceHeight_ - o) > t) && (this.workspaceWidth_ = e, this.workspaceHeight_ = o, this.bubble_.setBubbleSize(e + t, o + t), this.svgDialog_.setAttribute("width", this.workspaceWidth_), this.svgDialog_.setAttribute("height", this.workspaceHeight_)), this.block_.RTL && (t = "translate(" + this.workspaceWidth_ + ",0)", this.workspace_.getCanvas().setAttribute("transform", t)), this.workspace_.resize()
}, Blockly.Mutator.prototype.setVisible = function(e) {
    if (e != this.isVisible())
        if (e) {
            this.bubble_ = new Blockly.Bubble(this.block_.workspace, this.createEditor_(), this.block_.svgPath_, this.iconX_, this.iconY_, null, null);
            var t = this;
            this.workspace_.flyout_.init(this.workspace_), this.workspace_.flyout_.show(this.workspace_.options.languageTree.childNodes), this.rootBlock_ = this.block_.decompose(this.workspace_), e = this.rootBlock_.getDescendants();
            for (var o, n = 0; o = e[n]; n++) o.render();
            this.rootBlock_.setMovable(!1), this.rootBlock_.setDeletable(!1), e = 2 * this.workspace_.flyout_.CORNER_RADIUS, n = this.workspace_.flyout_.width_ + e, this.block_.RTL && (n = -n), this.rootBlock_.moveBy(n, e), this.block_.saveConnections && (this.block_.saveConnections(this.rootBlock_), this.sourceListener_ = Blockly.bindEvent_(this.block_.workspace.getCanvas(), "blocklyWorkspaceChange", this.block_, function() {
                t.block_.saveConnections(t.rootBlock_)
            })), this.resizeBubble_(), Blockly.bindEvent_(this.workspace_.getCanvas(), "blocklyWorkspaceChange", this.block_, function() {
                t.workspaceChanged_()
            }), this.updateColour()
        } else this.svgDialog_ = null, this.workspace_.dispose(), this.rootBlock_ = this.workspace_ = null, this.bubble_.dispose(), this.bubble_ = null, this.workspaceHeight_ = this.workspaceWidth_ = 0, this.sourceListener_ && (Blockly.unbindEvent_(this.sourceListener_), this.sourceListener_ = null)
}, Blockly.Mutator.prototype.workspaceChanged_ = function() {
    if (0 == Blockly.dragMode_)
        for (var e, t = this.workspace_.getTopBlocks(!1), o = 0; e = t[o]; o++) {
            var n = e.getRelativeToSurfaceXY(),
                i = e.getHeightWidth();
            20 > n.y + i.height && e.moveBy(0, 20 - i.height - n.y)
        }
    this.rootBlock_.workspace == this.workspace_ && (t = this.block_.rendered, this.block_.rendered = !1, this.block_.compose(this.rootBlock_), this.block_.rendered = t, this.block_.initSvg(), this.block_.rendered && this.block_.render(), this.resizeBubble_(), this.block_.workspace.fireChangeEvent(), goog.Timer.callOnce(this.block_.bumpNeighbours_, Blockly.BUMP_DELAY, this.block_))
}, Blockly.Mutator.prototype.getFlyoutMetrics_ = function() {
    return {
        viewHeight: this.workspaceHeight_,
        viewWidth: this.workspaceWidth_,
        absoluteTop: 0,
        absoluteLeft: 0
    }
}, Blockly.Mutator.prototype.dispose = function() {
    this.block_.mutator = null, Blockly.Icon.prototype.dispose.call(this)
}, Blockly.Warning = function(e) {
    Blockly.Warning.superClass_.constructor.call(this, e), this.createIcon(), this.text_ = {}
}, goog.inherits(Blockly.Warning, Blockly.Icon), Blockly.Warning.prototype.collapseHidden = !1, Blockly.Warning.prototype.png_ = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAANyAAADcgBffIlqAAAAAd0SU1FB98DGgApDBpIGrEAAAGfSURBVDjLnZM9S2NREIbfc2P8AF27BXshpIzK5g9ssUj8C2tnYyUoiBGSyk4sbCLs1vkRgoW1jYWFICwsMV2Se3JPboLe+FhcNCZcjXFgOMzHeec9M2ekDwTIAEUgo68IsOQczdNTIudoAksTg/g+5+UyDxKUyzz4PueTsvhZr+NmZkCC6Wmo1QiAX58FmLKWf4VCDPCiGxtgLf+B9FiQXo+9y0ucBIUCnJ3B+noMdHGBC0P2xrH4HoYEmUx8qVQCgMPD2F5ehjDEjTbZe2s4p5NKRenb2+Qid3dSpaK0tTp+j8VKq0VncXHQh2IxZrK/P/AtLECjQQf4McQEMNbq786O5qwdANfr8Xl/P/AFgbS7qzlr9Qcwr4EoYvPmBud5wxPJ5+HqCtbWhv3GwPU1Lor4/fKMeedo5vPDiRKsrsLWFuRyybFOhxbwTd0upWqVcDQpaTqjWq0SdruU5PvUkiol/ZNRzeXA96mp3aaRzSYnjdNsFtptGiYI2PY8HaVSmu33xWf3K5WS6ffVe3rSgXnzT+YlpSfY00djjJOkZ/wpr41bQMIsAAAAAElFTkSuQmCC", Blockly.Warning.textToDom_ = function(e) {
    var t = Blockly.createSvgElement("text", {
        "class": "blocklyText blocklyBubbleText",
        y: Blockly.Bubble.BORDER_WIDTH
    }, null);
    e = e.split("\n");
    for (var o = 0; o < e.length; o++) {
        var n = Blockly.createSvgElement("tspan", {
                dy: "1em",
                x: Blockly.Bubble.BORDER_WIDTH
            }, t),
            i = document.createTextNode(e[o]);
        n.appendChild(i)
    }
    return t
}, Blockly.Warning.prototype.setVisible = function(e) {
    if (e != this.isVisible())
        if (e) {
            if (e = Blockly.Warning.textToDom_(this.getText()), this.bubble_ = new Blockly.Bubble(this.block_.workspace, e, this.block_.svgPath_, this.iconX_, this.iconY_, null, null), this.block_.RTL)
                for (var t, o = e.getBBox().width, n = 0; t = e.childNodes[n]; n++) t.setAttribute("text-anchor", "end"), t.setAttribute("x", o + Blockly.Bubble.BORDER_WIDTH);
            this.updateColour(), e = this.bubble_.getBubbleSize(), this.bubble_.setBubbleSize(e.width, e.height)
        } else this.bubble_.dispose(), this.body_ = this.bubble_ = null
}, Blockly.Warning.prototype.bodyFocus_ = function(e) {
    this.bubble_.promote_()
}, Blockly.Warning.prototype.setText = function(e, t) {
    this.text_[t] != e && (e ? this.text_[t] = e : delete this.text_[t], this.isVisible() && (this.setVisible(!1), this.setVisible(!0)))
}, Blockly.Warning.prototype.getText = function() {
    var e, t = [];
    for (e in this.text_) t.push(this.text_[e]);
    return t.join("\n")
}, Blockly.Warning.prototype.dispose = function() {
    this.block_.warning = null, Blockly.Icon.prototype.dispose.call(this)
}, Blockly.Block = function() {
    goog.asserts.assert(0 == arguments.length, "Please use Blockly.Block.obtain.")
}, Blockly.Block.obtain = function(e, t) {
    if (Blockly.Realtime.isEnabled()) return Blockly.Realtime.obtainBlock(e, t);
    var o = e.rendered ? new Blockly.BlockSvg : new Blockly.Block;
    return o.initialize(e, t), o
}, Blockly.Block.prototype.data = null, Blockly.Block.prototype.initialize = function(e, t) {
    this.id = Blockly.Blocks.genUid(), e.addTopBlock(this), this.fill(e, t)
}, Blockly.Block.prototype.fill = function(e, t) {
    if (this.previousConnection = this.nextConnection = this.outputConnection = null, this.inputList = [], this.inputsInline = void 0, this.disabled = this.rendered = !1, this.tooltip = "", this.contextMenu = !0, this.parentBlock_ = null, this.childBlocks_ = [], this.editable_ = this.movable_ = this.deletable_ = !0, this.collapsed_ = this.isShadow_ = !1, this.comment = null, this.xy_ = new goog.math.Coordinate(0, 0), this.workspace = e, this.isInFlyout = e.isFlyout, this.RTL = e.RTL, t) {
        this.type = t;
        var o = Blockly.Blocks[t];
        goog.asserts.assertObject(o, 'Error: "%s" is an unknown language block.', t), goog.mixin(this, o)
    }
    goog.isFunction(this.init) && this.init(), this.inputsInlineDefault = this.inputsInline
}, Blockly.Block.getById = function(e, t) {
    return Blockly.Realtime.isEnabled() ? Blockly.Realtime.getBlockById(e) : t.getBlockById(e)
}, Blockly.Block.prototype.dispose = function(e, t, o) {
    for (this.unplug(e, !1), this.workspace && !o && (this.workspace.removeTopBlock(this), this.workspace = null), Blockly.selected == this && (Blockly.selected = null), e = this.childBlocks_.length - 1; e >= 0; e--) this.childBlocks_[e].dispose(!1);
    for (e = 0; t = this.inputList[e]; e++) t.dispose();
    for (this.inputList.length = 0, t = this.getConnections_(!0), e = 0; e < t.length; e++) o = t[e], o.targetConnection && o.disconnect(), t[e].dispose();
    Blockly.Realtime.isEnabled() && !Blockly.Realtime.withinSync && Blockly.Realtime.removeBlock(this)
}, Blockly.Block.prototype.unplug = function(e, t) {
    if (t = t && !!this.getParent(), this.outputConnection) this.outputConnection.targetConnection && this.setParent(null);
    else {
        var o = null;
        this.previousConnection && this.previousConnection.targetConnection && (o = this.previousConnection.targetConnection, this.setParent(null));
        var n = this.getNextBlock();
        if (e && n) {
            var i = this.nextConnection.targetConnection;
            n.setParent(null), o && o.checkType_(i) && o.connect(i)
        }
    }
    t && this.moveBy(Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1), 2 * Blockly.SNAP_RADIUS)
}, Blockly.Block.prototype.getConnections_ = function(e) {
    var t = [];
    if ((e || this.rendered) && (this.outputConnection && t.push(this.outputConnection), this.previousConnection && t.push(this.previousConnection), this.nextConnection && t.push(this.nextConnection), e || !this.collapsed_)) {
        e = 0;
        for (var o; o = this.inputList[e]; e++) o.connection && t.push(o.connection)
    }
    return t
}, Blockly.Block.prototype.bumpNeighbours_ = function() {
    if (this.workspace && 0 == Blockly.dragMode_) {
        var e = this.getRootBlock();
        if (!e.isInFlyout)
            for (var t, o = this.getConnections_(!1), n = 0; t = o[n]; n++) {
                t.targetConnection && t.isSuperior() && t.targetBlock().bumpNeighbours_();
                for (var i, r = t.neighbours_(Blockly.SNAP_RADIUS), s = 0; i = r[s]; s++) t.targetConnection && i.targetConnection || i.sourceBlock_.getRootBlock() != e && (t.isSuperior() ? i.bumpAwayFrom_(t) : t.bumpAwayFrom_(i))
            }
    }
}, Blockly.Block.prototype.getParent = function() {
    return this.parentBlock_
}, Blockly.Block.prototype.getSurroundParent = function() {
    for (var e = this;;) {
        do {
            var t = e,
                e = e.getParent();
            if (!e) return null
        } while (e.getNextBlock() == t);
        return e
    }
}, Blockly.Block.prototype.getNextBlock = function() {
    return this.nextConnection && this.nextConnection.targetBlock()
}, Blockly.Block.prototype.getRootBlock = function() {
    var e, t = this;
    do e = t, t = e.parentBlock_; while (t);
    return e
}, Blockly.Block.prototype.getChildren = function() {
    return this.childBlocks_
}, Blockly.Block.prototype.setParent = function(e) {
    if (this.parentBlock_) {
        for (var t, o = this.parentBlock_.childBlocks_, n = 0; t = o[n]; n++)
            if (t == this) {
                o.splice(n, 1);
                break
            }
        this.parentBlock_ = null, this.previousConnection && this.previousConnection.targetConnection && this.previousConnection.disconnect(), this.outputConnection && this.outputConnection.targetConnection && this.outputConnection.disconnect()
    } else goog.array.contains(this.workspace.getTopBlocks(!1), this) && this.workspace.removeTopBlock(this);
    (this.parentBlock_ = e) ? e.childBlocks_.push(this): this.workspace.addTopBlock(this)
}, Blockly.Block.prototype.getDescendants = function() {
    for (var e, t = [this], o = 0; e = this.childBlocks_[o]; o++) t.push.apply(t, e.getDescendants());
    return t
}, Blockly.Block.prototype.isDeletable = function() {
    return this.deletable_ && !this.isShadow_ && !(this.workspace && this.workspace.options.readOnly)
}, Blockly.Block.prototype.setDeletable = function(e) {
    this.deletable_ = e
}, Blockly.Block.prototype.isMovable = function() {
    return this.movable_ && !this.isShadow_ && !(this.workspace && this.workspace.options.readOnly)
}, Blockly.Block.prototype.setMovable = function(e) {
    this.movable_ = e
}, Blockly.Block.prototype.isShadow = function() {
    return this.isShadow_
}, Blockly.Block.prototype.setShadow = function(e) {
    this.isShadow_ = e
}, Blockly.Block.prototype.isEditable = function() {
    return this.editable_ && !(this.workspace && this.workspace.options.readOnly)
}, Blockly.Block.prototype.setEditable = function(e) {
    this.editable_ = e, e = 0;
    for (var t; t = this.inputList[e]; e++)
        for (var o, n = 0; o = t.fieldRow[n]; n++) o.updateEditable()
}, Blockly.Block.prototype.setConnectionsHidden = function(e) {
    if (!e && this.isCollapsed()) {
        if (this.outputConnection && this.outputConnection.setHidden(e), this.previousConnection && this.previousConnection.setHidden(e), this.nextConnection) {
            this.nextConnection.setHidden(e);
            var t = this.nextConnection.targetBlock();
            t && t.setConnectionsHidden(e)
        }
    } else
        for (var o = this.getConnections_(!0), n = 0; t = o[n]; n++) t.setHidden(e), t.isSuperior() && (t = t.targetBlock()) && t.setConnectionsHidden(e)
}, Blockly.Block.prototype.setHelpUrl = function(e) {
    this.helpUrl = e
}, Blockly.Block.prototype.setTooltip = function(e) {
    this.tooltip = e
}, Blockly.Block.prototype.getColour = function() {
    return this.colourHue_
}, Blockly.Block.prototype.setColour = function(e) {
    this.colourHue_ = e, this.rendered && this.updateColour()
}, Blockly.Block.prototype.getField = function(e) {
    for (var t, o = 0; t = this.inputList[o]; o++)
        for (var n, i = 0; n = t.fieldRow[i]; i++)
            if (n.name === e) return n;
    return null
}, Blockly.Block.prototype.getFieldValue = function(e) {
    return (e = this.getField(e)) ? e.getValue() : null
}, Blockly.Block.prototype.getTitleValue = function(e) {
    return console.warn("Deprecated call to getTitleValue, use getFieldValue instead."), this.getFieldValue(e)
}, Blockly.Block.prototype.setFieldValue = function(e, t) {
    var o = this.getField(t);
    goog.asserts.assertObject(o, 'Field "%s" not found.', t), o.setValue(e)
}, Blockly.Block.prototype.setTitleValue = function(e, t) {
    console.warn("Deprecated call to setTitleValue, use setFieldValue instead."), this.setFieldValue(e, t)
}, Blockly.Block.prototype.setPreviousStatement = function(e, t) {
    this.previousConnection && (goog.asserts.assert(!this.previousConnection.targetConnection, "Must disconnect previous statement before removing connection."), this.previousConnection.dispose(), this.previousConnection = null), e && (goog.asserts.assert(!this.outputConnection, "Remove output connection prior to adding previous connection."), void 0 === t && (t = null), this.previousConnection = new Blockly.Connection(this, Blockly.PREVIOUS_STATEMENT), this.previousConnection.setCheck(t)), this.rendered && (this.render(), this.bumpNeighbours_())
}, Blockly.Block.prototype.setNextStatement = function(e, t) {
    this.nextConnection && (goog.asserts.assert(!this.nextConnection.targetConnection, "Must disconnect next statement before removing connection."), this.nextConnection.dispose(), this.nextConnection = null), e && (void 0 === t && (t = null), this.nextConnection = new Blockly.Connection(this, Blockly.NEXT_STATEMENT), this.nextConnection.setCheck(t)), this.rendered && (this.render(), this.bumpNeighbours_())
}, Blockly.Block.prototype.setOutput = function(e, t) {
    this.outputConnection && (goog.asserts.assert(!this.outputConnection.targetConnection, "Must disconnect output value before removing connection."), this.outputConnection.dispose(), this.outputConnection = null), e && (goog.asserts.assert(!this.previousConnection, "Remove previous connection prior to adding output connection."), void 0 === t && (t = null), this.outputConnection = new Blockly.Connection(this, Blockly.OUTPUT_VALUE), this.outputConnection.setCheck(t)), this.rendered && (this.render(), this.bumpNeighbours_())
}, Blockly.Block.prototype.setInputsInline = function(e) {
    this.inputsInline = e, this.rendered && (this.render(), this.bumpNeighbours_(), this.workspace.fireChangeEvent())
}, Blockly.Block.prototype.getInputsInline = function() {
    if (void 0 != this.inputsInline) return this.inputsInline;
    for (var e = 1; e < this.inputList.length; e++)
        if (this.inputList[e - 1].type == Blockly.DUMMY_INPUT && this.inputList[e].type == Blockly.DUMMY_INPUT) return !1;
    for (e = 1; e < this.inputList.length; e++)
        if (this.inputList[e - 1].type == Blockly.INPUT_VALUE && this.inputList[e].type == Blockly.DUMMY_INPUT) return !0;
    return !1
}, Blockly.Block.prototype.setDisabled = function(e) {
    this.disabled = e
}, Blockly.Block.prototype.getInheritedDisabled = function() {
    for (var e = this;;) {
        if (e = e.getSurroundParent(), !e) return !1;
        if (e.disabled) return !0
    }
}, Blockly.Block.prototype.isCollapsed = function() {
    return this.collapsed_
}, Blockly.Block.prototype.setCollapsed = function(e) {
    this.collapsed_ = e
}, Blockly.Block.prototype.toString = function(e) {
    var t = [];
    if (this.collapsed_) t.push(this.getInput("_TEMP_COLLAPSED_INPUT").fieldRow[0].text_);
    else
        for (var o, n = 0; o = this.inputList[n]; n++) {
            for (var i, r = 0; i = o.fieldRow[r]; r++) t.push(i.getText());
            o.connection && ((o = o.connection.targetBlock()) ? t.push(o.toString()) : t.push("?"))
        }
    return t = goog.string.trim(t.join(" ")) || "???", e && (t = goog.string.truncate(t, e)), t
}, Blockly.Block.prototype.appendValueInput = function(e) {
    return this.appendInput_(Blockly.INPUT_VALUE, e)
}, Blockly.Block.prototype.appendStatementInput = function(e) {
    return this.appendInput_(Blockly.NEXT_STATEMENT, e)
}, Blockly.Block.prototype.appendDummyInput = function(e) {
    return this.appendInput_(Blockly.DUMMY_INPUT, e || "")
}, Blockly.Block.prototype.jsonInit = function(e) {
    goog.asserts.assert(void 0 == e.output || void 0 == e.previousStatement, "Must not have both an output and a previousStatement."), this.setColour(e.colour);
    for (var t = 0; void 0 !== e["message" + t];) this.interpolate_(e["message" + t], e["args" + t] || [], e["lastDummyAlign" + t]), t++;
    void 0 !== e.inputsInline && this.setInputsInline(e.inputsInline), void 0 !== e.output && this.setOutput(!0, e.output), void 0 !== e.previousStatement && this.setPreviousStatement(!0, e.previousStatement), void 0 !== e.nextStatement && this.setNextStatement(!0, e.nextStatement), void 0 !== e.tooltip && this.setTooltip(e.tooltip), void 0 !== e.helpUrl && this.setHelpUrl(e.helpUrl)
}, Blockly.Block.prototype.interpolate_ = function(e, t, o) {
    var n = Blockly.tokenizeInterpolation(e),
        i = [],
        r = 0;
    e = [];
    for (var s = 0; s < n.length; s++) {
        var a = n[s];
        "number" == typeof a ? (goog.asserts.assert(a > 0 && a <= t.length, 'Message index "%s" out of range.', a), goog.asserts.assert(!i[a], 'Message index "%s" duplicated.', a), i[a] = !0, r++, e.push(t[a - 1])) : (a = a.trim()) && e.push(a)
    }
    for (goog.asserts.assert(r == t.length, "Message does not reference all %s arg(s).", t.length), !e.length || "string" != typeof e[e.length - 1] && 0 != e[e.length - 1].type.indexOf("field_") || (t = {
            type: "input_dummy"
        }, o && (t.align = o), e.push(t)), o = {
            LEFT: Blockly.ALIGN_LEFT,
            RIGHT: Blockly.ALIGN_RIGHT,
            CENTRE: Blockly.ALIGN_CENTRE
        }, n = [], s = 0; s < e.length; s++)
        if (i = e[s], "string" == typeof i) n.push([i, void 0]);
        else {
            t = r = null;
            do switch (a = !1, i.type) {
                case "input_value":
                    t = this.appendValueInput(i.name);
                    break;
                case "input_statement":
                    t = this.appendStatementInput(i.name);
                    break;
                case "input_dummy":
                    t = this.appendDummyInput(i.name);
                    break;
                case "field_label":
                    r = new Blockly.FieldLabel(i.text);
                    break;
                case "field_input":
                    r = new Blockly.FieldTextInput(i.text), "boolean" == typeof i.spellcheck && r.setSpellcheck(i.spellcheck);
                    break;
                case "field_angle":
                    r = new Blockly.FieldAngle(i.angle);
                    break;
                case "field_checkbox":
                    r = new Blockly.FieldCheckbox(i.checked ? "TRUE" : "FALSE");
                    break;
                case "field_colour":
                    r = new Blockly.FieldColour(i.colour);
                    break;
                case "field_variable":
                    r = new Blockly.FieldVariable(i.variable);
                    break;
                case "field_dropdown":
                    r = new Blockly.FieldDropdown(i.options);
                    break;
                case "field_image":
                    r = new Blockly.FieldImage(i.src, i.width, i.height, i.alt);
                    break;
                case "field_date":
                    if (Blockly.FieldDate) {
                        r = new Blockly.FieldDate(i.date);
                        break
                    }
                default:
                    i.alt && (i = i.alt, a = !0)
            }
            while (a);
            if (r) n.push([r, i.name]);
            else if (t) {
                for (i.check && t.setCheck(i.check), i.align && t.setAlign(o[i.align]), i = 0; i < n.length; i++) t.appendField(n[i][0], n[i][1]);
                n.length = 0
            }
        }
}, Blockly.Block.prototype.appendInput_ = function(e, t) {
    var o = null;
    return e != Blockly.INPUT_VALUE && e != Blockly.NEXT_STATEMENT || (o = new Blockly.Connection(this, e)), o = new Blockly.Input(e, t, this, o), this.inputList.push(o), this.rendered && (this.render(), this.bumpNeighbours_()), o
}, Blockly.Block.prototype.moveInputBefore = function(e, t) {
    if (e != t) {
        for (var o, n = -1, i = t ? -1 : this.inputList.length, r = 0; o = this.inputList[r]; r++)
            if (o.name == e) {
                if (n = r, -1 != i) break
            } else if (t && o.name == t && (i = r, -1 != n)) break;
        goog.asserts.assert(-1 != n, 'Named input "%s" not found.', e), goog.asserts.assert(-1 != i, 'Reference input "%s" not found.', t), this.moveNumberedInputBefore(n, i)
    }
}, Blockly.Block.prototype.moveNumberedInputBefore = function(e, t) {
    goog.asserts.assert(e != t, "Can't move input to itself."), goog.asserts.assert(e < this.inputList.length, "Input index " + e + " out of bounds."), goog.asserts.assert(t <= this.inputList.length, "Reference input " + t + " out of bounds.");
    var o = this.inputList[e];
    this.inputList.splice(e, 1), t > e && t--, this.inputList.splice(t, 0, o), this.rendered && (this.render(), this.bumpNeighbours_())
}, Blockly.Block.prototype.removeInput = function(e, t) {
    for (var o, n = 0; o = this.inputList[n]; n++)
        if (o.name == e) return o.connection && o.connection.targetConnection && o.connection.targetBlock().setParent(null), o.dispose(), this.inputList.splice(n, 1), void(this.rendered && (this.render(), this.bumpNeighbours_()));
    t || goog.asserts.fail('Input "%s" not found.', e)
}, Blockly.Block.prototype.getInput = function(e) {
    for (var t, o = 0; t = this.inputList[o]; o++)
        if (t.name == e) return t;
    return null
}, Blockly.Block.prototype.getInputTargetBlock = function(e) {
    return (e = this.getInput(e)) && e.connection && e.connection.targetBlock()
}, Blockly.Block.prototype.getCommentText = function() {
    return this.comment || ""
}, Blockly.Block.prototype.setCommentText = function(e) {
    this.comment = e
}, Blockly.Block.prototype.setWarningText = function(e) {}, Blockly.Block.prototype.setMutator = function(e) {}, Blockly.Block.prototype.getRelativeToSurfaceXY = function() {
    return this.xy_
}, Blockly.Block.prototype.moveBy = function(e, t) {
    this.xy_.translate(e, t)
}, Blockly.ContextMenu = {}, Blockly.ContextMenu.currentBlock = null, Blockly.ContextMenu.show = function(e, t, o) {
    if (Blockly.WidgetDiv.show(Blockly.ContextMenu, o, null), t.length) {
        var n = new goog.ui.Menu;
        n.setRightToLeft(o);
        for (var i, r = 0; i = t[r]; r++) {
            var s = new goog.ui.MenuItem(i.text);
            s.setRightToLeft(o), n.addChild(s, !0), s.setEnabled(i.enabled), i.enabled && goog.events.listen(s, goog.ui.Component.EventType.ACTION, function(e) {
                return function() {
                    Blockly.doCommand(e)
                }
            }(i.callback))
        }
        goog.events.listen(n, goog.ui.Component.EventType.ACTION, Blockly.ContextMenu.hide), t = goog.dom.getViewportSize(), i = goog.style.getViewportPageOffset(document), n.render(Blockly.WidgetDiv.DIV);
        var a = n.getElement();
        Blockly.addClass_(a, "blocklyContextMenu");
        var s = goog.style.getSize(a),
            r = e.clientX + i.x,
            l = e.clientY + i.y;
        e.clientY + s.height >= t.height && (l -= s.height), o ? s.width >= e.clientX && (r += s.width) : e.clientX + s.width >= t.width && (r -= s.width), Blockly.WidgetDiv.position(r, l, t, i, o), n.setAllowAutoFocus(!0), setTimeout(function() {
            a.focus()
        }, 1), Blockly.ContextMenu.currentBlock = null
    } else Blockly.ContextMenu.hide()
}, Blockly.ContextMenu.hide = function() {
    Blockly.WidgetDiv.hideIfOwner(Blockly.ContextMenu), Blockly.ContextMenu.currentBlock = null
}, Blockly.ContextMenu.callbackFactory = function(e, t) {
    return function() {
        var o = Blockly.Xml.domToBlock(e.workspace, t),
            n = e.getRelativeToSurfaceXY();
        n.x = e.RTL ? n.x - Blockly.SNAP_RADIUS : n.x + Blockly.SNAP_RADIUS, n.y += 2 * Blockly.SNAP_RADIUS, o.moveBy(n.x, n.y), o.select()
    }
}, Blockly.BlockSvg = function() {
    this.svgGroup_ = Blockly.createSvgElement("g", {}, null), this.svgPathDark_ = Blockly.createSvgElement("path", {
        "class": "blocklyPathDark",
        transform: "translate(1,1)"
    }, this.svgGroup_), this.svgPath_ = Blockly.createSvgElement("path", {
        "class": "blocklyPath"
    }, this.svgGroup_), this.svgPathLight_ = Blockly.createSvgElement("path", {
        "class": "blocklyPathLight"
    }, this.svgGroup_), this.svgPath_.tooltip = this, Blockly.Tooltip.bindMouseEvents(this.svgPath_)
}, goog.inherits(Blockly.BlockSvg, Blockly.Block), Blockly.BlockSvg.prototype.height = 0, Blockly.BlockSvg.prototype.width = 0, Blockly.BlockSvg.prototype.dragStartXY_ = null, Blockly.BlockSvg.INLINE = -1, Blockly.BlockSvg.prototype.initSvg = function() {
    goog.asserts.assert(this.workspace.rendered, "Workspace is headless.");
    for (var e, t = 0; e = this.inputList[t]; t++) e.init();
    if (this.mutator && this.mutator.createIcon(), this.updateColour(), this.updateMovable(), !this.workspace.options.readOnly && !this.eventsInit_) {
        Blockly.bindEvent_(this.getSvgRoot(), "mousedown", this, this.onMouseDown_);
        var o = this;
        Blockly.bindEvent_(this.getSvgRoot(), "touchstart", null, function(e) {
            Blockly.longStart_(e, o)
        })
    }
    goog.isFunction(this.onchange) && !this.eventsInit_ && (this.onchangeWrapper_ = Blockly.bindEvent_(this.workspace.getCanvas(), "blocklyWorkspaceChange", this, this.onchange)), this.eventsInit_ = !0, this.getSvgRoot().parentNode || this.workspace.getCanvas().appendChild(this.getSvgRoot())
}, Blockly.BlockSvg.prototype.select = function() {
    Blockly.selected && Blockly.selected.unselect(), Blockly.selected = this, this.addSelect(), Blockly.fireUiEvent(this.workspace.getCanvas(), "blocklySelectChange")
}, Blockly.BlockSvg.prototype.unselect = function() {
    Blockly.selected = null, this.removeSelect(), Blockly.fireUiEvent(this.workspace.getCanvas(), "blocklySelectChange")
}, Blockly.BlockSvg.prototype.mutator = null, Blockly.BlockSvg.prototype.comment = null, Blockly.BlockSvg.prototype.warning = null, Blockly.BlockSvg.prototype.breakpoint = null, Blockly.BlockSvg.prototype.padIcons = 0, Blockly.BlockSvg.prototype.getIcons = function() {
    var e = [];
    return this.mutator && e.push(this.mutator), this.comment && e.push(this.comment), this.warning && e.push(this.warning), this.breakpoint && e.push(this.breakpoint), e
}, Blockly.BlockSvg.onMouseUpWrapper_ = null, Blockly.BlockSvg.onMouseMoveWrapper_ = null, Blockly.BlockSvg.terminateDrag_ = function() {
    Blockly.BlockSvg.disconnectUiStop_(), Blockly.BlockSvg.onMouseUpWrapper_ && (Blockly.unbindEvent_(Blockly.BlockSvg.onMouseUpWrapper_), Blockly.BlockSvg.onMouseUpWrapper_ = null), Blockly.BlockSvg.onMouseMoveWrapper_ && (Blockly.unbindEvent_(Blockly.BlockSvg.onMouseMoveWrapper_), Blockly.BlockSvg.onMouseMoveWrapper_ = null);
    var e = Blockly.selected;
    if (2 == Blockly.dragMode_ && e) {
        var t = e.getRelativeToSurfaceXY(),
            t = goog.math.Coordinate.difference(t, e.dragStartXY_);
        e.moveConnections_(t.x, t.y), delete e.draggedBubbles_, e.setDragging_(!1), e.render(), goog.Timer.callOnce(e.snapToGrid, Blockly.BUMP_DELAY / 2, e), goog.Timer.callOnce(e.bumpNeighbours_, Blockly.BUMP_DELAY, e), Blockly.fireUiEvent(window, "resize"), e.workspace.fireChangeEvent()
    }
    Blockly.dragMode_ = 0, Blockly.Css.setCursor(Blockly.Css.Cursor.OPEN)
}, Blockly.BlockSvg.prototype.setParent = function(e) {
    var t = this.getSvgRoot();
    if (this.parentBlock_ && t) {
        var o = this.getRelativeToSurfaceXY();
        this.workspace.getCanvas().appendChild(t), t.setAttribute("transform", "translate(" + o.x + "," + o.y + ")")
    }
    Blockly.Field.startCache(), Blockly.BlockSvg.superClass_.setParent.call(this, e), Blockly.Field.stopCache(), e && (o = this.getRelativeToSurfaceXY(), e.getSvgRoot().appendChild(t), e = this.getRelativeToSurfaceXY(), this.moveConnections_(e.x - o.x, e.y - o.y))
}, Blockly.BlockSvg.prototype.getRelativeToSurfaceXY = function() {
    var e = 0,
        t = 0,
        o = this.getSvgRoot();
    if (o)
        do var n = Blockly.getRelativeXY_(o),
            e = e + n.x,
            t = t + n.y,
            o = o.parentNode; while (o && o != this.workspace.getCanvas());
    return new goog.math.Coordinate(e, t)
}, Blockly.BlockSvg.prototype.moveBy = function(e, t) {
    var o = this.getRelativeToSurfaceXY();
    this.getSvgRoot().setAttribute("transform", "translate(" + (o.x + e) + "," + (o.y + t) + ")"), this.moveConnections_(e, t), Blockly.Realtime.blockChanged(this)
}, Blockly.BlockSvg.prototype.snapToGrid = function() {
    if (this.workspace && 0 == Blockly.dragMode_ && !this.getParent() && !this.isInFlyout && this.workspace.options.gridOptions && this.workspace.options.gridOptions.snap) {
        var e = this.workspace.options.gridOptions.spacing,
            t = e / 2,
            o = this.getRelativeToSurfaceXY(),
            n = Math.round((o.x - t) / e) * e + t - o.x,
            e = Math.round((o.y - t) / e) * e + t - o.y,
            n = Math.round(n),
            e = Math.round(e);
        0 == n && 0 == e || this.moveBy(n, e)
    }
}, Blockly.BlockSvg.prototype.getHeightWidth = function() {
    var e = this.height,
        t = this.width,
        o = this.getNextBlock();
    return o ? (o = o.getHeightWidth(), e += o.height - 4, t = Math.max(t, o.width)) : this.nextConnection || this.outputConnection || (e += 2), {
        height: e,
        width: t
    }
}, Blockly.BlockSvg.prototype.setCollapsed = function(e) {
    if (this.collapsed_ != e) {
        for (var t, o = [], n = 0; t = this.inputList[n]; n++) o.push.apply(o, t.setVisible(!e));
        if (e) {
            for (t = this.getIcons(), n = 0; n < t.length; n++) t[n].setVisible(!1);
            n = this.toString(Blockly.COLLAPSE_CHARS), this.appendDummyInput("_TEMP_COLLAPSED_INPUT").appendField(n).init()
        } else this.removeInput("_TEMP_COLLAPSED_INPUT"), this.setWarningText(null);
        if (Blockly.BlockSvg.superClass_.setCollapsed.call(this, e), o.length || (o[0] = this), this.rendered)
            for (n = 0; e = o[n]; n++) e.render();
        this.workspace.fireChangeEvent()
    }
}, Blockly.BlockSvg.prototype.tab = function(e, t) {
    for (var o, n = [], i = 0; o = this.inputList[i]; i++) {
        for (var r, s = 0; r = o.fieldRow[s]; s++) r instanceof Blockly.FieldTextInput && n.push(r);
        o.connection && (o = o.connection.targetBlock()) && n.push(o)
    }
    i = n.indexOf(e), -1 == i && (i = t ? -1 : n.length), (n = n[t ? i + 1 : i - 1]) ? n instanceof Blockly.Field ? n.showEditor_() : n.tab(null, t) : (n = this.getParent()) && n.tab(this, t)
}, Blockly.BlockSvg.prototype.onMouseDown_ = function(e) {
    if (!this.isInFlyout) {
        if (this.workspace.markFocused(), Blockly.svgResize(this.workspace), Blockly.terminateDrag_(), this.select(), Blockly.hideChaff(), Blockly.isRightButton(e)) this.showContextMenu_(e);
        else {
            if (!this.isMovable()) return;
            Blockly.removeAllRanges(), Blockly.Css.setCursor(Blockly.Css.Cursor.CLOSED), this.dragStartXY_ = this.getRelativeToSurfaceXY(), this.workspace.startDrag(e, this.dragStartXY_.x, this.dragStartXY_.y), Blockly.dragMode_ = 1, Blockly.BlockSvg.onMouseUpWrapper_ = Blockly.bindEvent_(document, "mouseup", this, this.onMouseUp_), Blockly.BlockSvg.onMouseMoveWrapper_ = Blockly.bindEvent_(document, "mousemove", this, this.onMouseMove_), this.draggedBubbles_ = [];
            for (var t, o = this.getDescendants(), n = 0; t = o[n]; n++) {
                t = t.getIcons();
                for (var i = 0; i < t.length; i++) {
                    var r = t[i].getIconLocation();
                    r.bubble = t[i], this.draggedBubbles_.push(r)
                }
            }
        }
        e.stopPropagation()
    }
}, Blockly.BlockSvg.prototype.onMouseUp_ = function(e) {
    var t = this;
    Blockly.doCommand(function() {
        if (Blockly.terminateDrag_(), Blockly.selected && Blockly.highlightedConnection_) Blockly.localConnection_.connect(Blockly.highlightedConnection_), t.rendered && (Blockly.localConnection_.isSuperior() ? Blockly.highlightedConnection_ : Blockly.localConnection_).sourceBlock_.connectionUiEffect(), t.workspace.trashcan && t.workspace.trashcan.close();
        else if (!t.getParent() && Blockly.selected.isDeletable() && t.workspace.isDeleteArea(e)) {
            var o = t.workspace.trashcan;
            o && goog.Timer.callOnce(o.close, 100, o), Blockly.selected.dispose(!1, !0), Blockly.fireUiEvent(window, "resize")
        }
        Blockly.highlightedConnection_ && (Blockly.highlightedConnection_.unhighlight(), Blockly.highlightedConnection_ = null), Blockly.Css.setCursor(Blockly.Css.Cursor.OPEN)
    })
}, Blockly.BlockSvg.prototype.showHelp_ = function() {
    var e = goog.isFunction(this.helpUrl) ? this.helpUrl() : this.helpUrl;
    e && window.open(e)
}, Blockly.BlockSvg.prototype.showContextMenu_ = function(e) {
    if (!this.workspace.options.readOnly && this.contextMenu) {
        var t = this,
            o = [];
        if (this.isDeletable() && this.isMovable() && !t.isInFlyout) {
            var n = {
                text: Blockly.Msg.DUPLICATE_BLOCK,
                enabled: !0,
                callback: function() {
                    Blockly.duplicate_(t);
                    var e = t.workspace,
                        o = Blockly.Xml.workspaceToDom(e);
                    e.clear(), Blockly.Xml.domToWorkspace(e, o)
                }
            };
            if (this.getDescendants().length > this.workspace.remainingCapacity() && (n.enabled = !1), o.push(n), this.isEditable() && !this.collapsed_ && this.workspace.options.comments && (n = {
                    enabled: !0
                }, this.comment ? (n.text = Blockly.Msg.REMOVE_COMMENT, n.callback = function() {
                    t.setCommentText(null)
                }) : (n.text = Blockly.Msg.ADD_COMMENT, n.callback = function() {
                    t.setCommentText("")
                }), o.push(n)), !this.collapsed_)
                for (n = 1; n < this.inputList.length; n++)
                    if (this.inputList[n - 1].type != Blockly.NEXT_STATEMENT && this.inputList[n].type != Blockly.NEXT_STATEMENT) {
                        var n = {
                                enabled: !0
                            },
                            i = this.getInputsInline();
                        n.text = i ? Blockly.Msg.EXTERNAL_INPUTS : Blockly.Msg.INLINE_INPUTS, n.callback = function() {
                            t.setInputsInline(!i)
                        }, o.push(n);
                        break
                    }
            this.workspace.options.collapse && (this.collapsed_ ? (n = {
                enabled: !0
            }, n.text = Blockly.Msg.EXPAND_BLOCK, n.callback = function() {
                t.setCollapsed(!1)
            }) : (n = {
                enabled: !0
            }, n.text = Blockly.Msg.COLLAPSE_BLOCK, n.callback = function() {
                t.setCollapsed(!0)
            }), o.push(n)), this.workspace.options.disable && (n = {
                text: this.disabled ? Blockly.Msg.ENABLE_BLOCK : Blockly.Msg.DISABLE_BLOCK,
                enabled: !this.getInheritedDisabled(),
                callback: function() {
                    t.setDisabled(!t.disabled)
                }
            }, o.push(n));
            var n = this.getDescendants().length,
                r = this.getNextBlock();
            r && (n -= r.getDescendants().length), n = {
                text: 1 == n ? Blockly.Msg.DELETE_BLOCK : Blockly.Msg.DELETE_X_BLOCKS.replace("%1", String(n)),
                enabled: !0,
                callback: function() {
                    t.dispose(!0, !0)
                }
            }, o.push(n)
        }
        n = {
            enabled: !(goog.isFunction(this.helpUrl) ? !this.helpUrl() : !this.helpUrl)
        }, n.text = Blockly.Msg.HELP, n.callback = function() {
            t.showHelp_()
        }, o.push(n), this.customContextMenu && !t.isInFlyout && this.customContextMenu(o), Blockly.ContextMenu.show(e, o, this.RTL), Blockly.ContextMenu.currentBlock = this
    }
}, Blockly.BlockSvg.prototype.moveConnections_ = function(e, t) {
    if (this.rendered) {
        for (var o = this.getConnections_(!1), n = 0; n < o.length; n++) o[n].moveBy(e, t);
        for (o = this.getIcons(), n = 0; n < o.length; n++) o[n].computeIconLocation();
        for (n = 0; n < this.childBlocks_.length; n++) this.childBlocks_[n].moveConnections_(e, t)
    }
}, Blockly.BlockSvg.prototype.setDragging_ = function(e) {
    e ? this.addDragging() : this.removeDragging();
    for (var t = 0; t < this.childBlocks_.length; t++) this.childBlocks_[t].setDragging_(e)
}, Blockly.BlockSvg.prototype.onMouseMove_ = function(e) {
    var t = this,
        o = this.workspace;
    Blockly.doCommand(function() {
        if (!("mousemove" == e.type && 1 >= e.clientX && 0 == e.clientY && 0 == e.button)) {
            Blockly.removeAllRanges();
            var n = t.getRelativeToSurfaceXY(),
                i = o.moveDrag(e),
                r = t.getSvgRoot();
            if (1 == Blockly.dragMode_ && goog.math.Coordinate.distance(n, i) * o.scale > Blockly.DRAG_RADIUS && (Blockly.dragMode_ = 2, Blockly.longStop_(), r.translate_ = "", r.skew_ = "", t.parentBlock_ && (t.setParent(null), t.disconnectUiEffect()), t.setDragging_(!0), o.recordDeleteAreas()), 2 == Blockly.dragMode_) {
                var s = n.x - t.dragStartXY_.x,
                    n = n.y - t.dragStartXY_.y;
                for (r.translate_ = "translate(" + i.x + "," + i.y + ")", r.setAttribute("transform", r.translate_ + r.skew_), i = 0; i < t.draggedBubbles_.length; i++) r = t.draggedBubbles_[i], r.bubble.setIconLocation(r.x + s, r.y + n);
                for (var r = t.getConnections_(!1), a = null, l = null, c = Blockly.SNAP_RADIUS, i = 0; i < r.length; i++) {
                    var u = r[i],
                        g = u.closest(c, s, n);
                    g.connection && (a = g.connection, l = u, c = g.radius)
                }
                Blockly.highlightedConnection_ && Blockly.highlightedConnection_ != a && (Blockly.highlightedConnection_.unhighlight(), Blockly.highlightedConnection_ = null, Blockly.localConnection_ = null), a && a != Blockly.highlightedConnection_ && (a.highlight(), Blockly.highlightedConnection_ = a, Blockly.localConnection_ = l), t.isDeletable() && o.isDeleteArea(e)
            }
        }
        e.stopPropagation()
    })
}, Blockly.BlockSvg.prototype.updateMovable = function() {
    this.isMovable() ? Blockly.addClass_(this.svgGroup_, "blocklyDraggable") : Blockly.removeClass_(this.svgGroup_, "blocklyDraggable")
}, Blockly.BlockSvg.prototype.setMovable = function(e) {
    Blockly.BlockSvg.superClass_.setMovable.call(this, e), this.updateMovable()
}, Blockly.BlockSvg.prototype.setEditable = function(e) {
    if (Blockly.BlockSvg.superClass_.setEditable.call(this, e), this.rendered)
        for (e = 0; e < this.icons_.length; e++) this.icons_[e].updateEditable()
}, Blockly.BlockSvg.prototype.setShadow = function(e) {
    Blockly.BlockSvg.superClass_.setShadow.call(this, e), this.updateColour()
}, Blockly.BlockSvg.prototype.getSvgRoot = function() {
    return this.svgGroup_
}, Blockly.BlockSvg.SEP_SPACE_X = 10, Blockly.BlockSvg.SEP_SPACE_Y = 10, Blockly.BlockSvg.INLINE_PADDING_Y = 5, Blockly.BlockSvg.MIN_BLOCK_Y = 25, Blockly.BlockSvg.TAB_HEIGHT = 20, Blockly.BlockSvg.TAB_WIDTH = 8, Blockly.BlockSvg.NOTCH_WIDTH = 30, Blockly.BlockSvg.CORNER_RADIUS = 8, Blockly.BlockSvg.START_HAT = !1, Blockly.BlockSvg.START_HAT_PATH = "c 30,-15 70,-15 100,0", Blockly.BlockSvg.START_HAT_HIGHLIGHT_LTR = "c 17.8,-9.2 45.3,-14.9 75,-8.7 M 100.5,0.5", Blockly.BlockSvg.START_HAT_HIGHLIGHT_RTL = "m 25,-8.7 c 29.7,-6.2 57.2,-0.5 75,8.7", Blockly.BlockSvg.DISTANCE_45_INSIDE = (1 - Math.SQRT1_2) * (Blockly.BlockSvg.CORNER_RADIUS - .5) + .5, Blockly.BlockSvg.DISTANCE_45_OUTSIDE = (1 - Math.SQRT1_2) * (Blockly.BlockSvg.CORNER_RADIUS + .5) - .5, Blockly.BlockSvg.NOTCH_PATH_LEFT = "l 6,4 3,0 6,-4", Blockly.BlockSvg.NOTCH_PATH_LEFT_HIGHLIGHT = "l 6,4 3,0 6,-4", Blockly.BlockSvg.NOTCH_PATH_RIGHT = "l -6,4 -3,0 -6,-4", Blockly.BlockSvg.JAGGED_TEETH = "l 8,0 0,4 8,4 -16,8 8,4", Blockly.BlockSvg.JAGGED_TEETH_HEIGHT = 20, Blockly.BlockSvg.JAGGED_TEETH_WIDTH = 15, Blockly.BlockSvg.TAB_PATH_DOWN = "v 5 c 0,10 -" + Blockly.BlockSvg.TAB_WIDTH + ",-8 -" + Blockly.BlockSvg.TAB_WIDTH + ",7.5 s " + Blockly.BlockSvg.TAB_WIDTH + ",-2.5 " + Blockly.BlockSvg.TAB_WIDTH + ",7.5", Blockly.BlockSvg.TAB_PATH_DOWN_HIGHLIGHT_RTL = "v 6.5 m -" + .97 * Blockly.BlockSvg.TAB_WIDTH + ",3 q -" + .05 * Blockly.BlockSvg.TAB_WIDTH + ",10 " + .3 * Blockly.BlockSvg.TAB_WIDTH + ",9.5 m " + .67 * Blockly.BlockSvg.TAB_WIDTH + ",-1.9 v 1.4", Blockly.BlockSvg.TOP_LEFT_CORNER_START = "m 0," + Blockly.BlockSvg.CORNER_RADIUS, Blockly.BlockSvg.TOP_LEFT_CORNER_START_HIGHLIGHT_RTL = "m " + Blockly.BlockSvg.DISTANCE_45_INSIDE + "," + Blockly.BlockSvg.DISTANCE_45_INSIDE, Blockly.BlockSvg.TOP_LEFT_CORNER_START_HIGHLIGHT_LTR = "m 0.5," + (Blockly.BlockSvg.CORNER_RADIUS - .5), Blockly.BlockSvg.TOP_LEFT_CORNER = "A " + Blockly.BlockSvg.CORNER_RADIUS + "," + Blockly.BlockSvg.CORNER_RADIUS + " 0 0,1 " + Blockly.BlockSvg.CORNER_RADIUS + ",0", Blockly.BlockSvg.TOP_LEFT_CORNER_HIGHLIGHT = "A " + (Blockly.BlockSvg.CORNER_RADIUS - .5) + "," + (Blockly.BlockSvg.CORNER_RADIUS - .5) + " 0 0,1 " + Blockly.BlockSvg.CORNER_RADIUS + ",0.5", Blockly.BlockSvg.INNER_TOP_LEFT_CORNER = Blockly.BlockSvg.NOTCH_PATH_RIGHT + " h -" + (Blockly.BlockSvg.NOTCH_WIDTH - 15 - Blockly.BlockSvg.CORNER_RADIUS) + " h -0.5 a " + Blockly.BlockSvg.CORNER_RADIUS + "," + Blockly.BlockSvg.CORNER_RADIUS + " 0 0,0 -" + Blockly.BlockSvg.CORNER_RADIUS + "," + Blockly.BlockSvg.CORNER_RADIUS, Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER = "a " + Blockly.BlockSvg.CORNER_RADIUS + "," + Blockly.BlockSvg.CORNER_RADIUS + " 0 0,0 " + Blockly.BlockSvg.CORNER_RADIUS + "," + Blockly.BlockSvg.CORNER_RADIUS, Blockly.BlockSvg.INNER_TOP_LEFT_CORNER_HIGHLIGHT_RTL = "a " + Blockly.BlockSvg.CORNER_RADIUS + "," + Blockly.BlockSvg.CORNER_RADIUS + " 0 0,0 " + (-Blockly.BlockSvg.DISTANCE_45_OUTSIDE - .5) + "," + (Blockly.BlockSvg.CORNER_RADIUS - Blockly.BlockSvg.DISTANCE_45_OUTSIDE), Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER_HIGHLIGHT_RTL = "a " + (Blockly.BlockSvg.CORNER_RADIUS + .5) + "," + (Blockly.BlockSvg.CORNER_RADIUS + .5) + " 0 0,0 " + (Blockly.BlockSvg.CORNER_RADIUS + .5) + "," + (Blockly.BlockSvg.CORNER_RADIUS + .5), Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER_HIGHLIGHT_LTR = "a " + (Blockly.BlockSvg.CORNER_RADIUS + .5) + "," + (Blockly.BlockSvg.CORNER_RADIUS + .5) + " 0 0,0 " + (Blockly.BlockSvg.CORNER_RADIUS - Blockly.BlockSvg.DISTANCE_45_OUTSIDE) + "," + (Blockly.BlockSvg.DISTANCE_45_OUTSIDE + .5), Blockly.BlockSvg.prototype.dispose = function(e, t, o) {
    for (Blockly.Field.startCache(), this.onchangeWrapper_ && (Blockly.unbindEvent_(this.onchangeWrapper_), this.onchangeWrapper_ = null), Blockly.selected == this && Blockly.terminateDrag_(), Blockly.ContextMenu.currentBlock == this && Blockly.ContextMenu.hide(), t && this.rendered && (this.unplug(e, !1), this.disposeUiEffect()), this.rendered = !1, t = this.getIcons(), o = 0; o < t.length; o++) t[o].dispose();
    Blockly.BlockSvg.superClass_.dispose.call(this, e), goog.dom.removeNode(this.svgGroup_), this.svgPathDark_ = this.svgPathLight_ = this.svgPath_ = this.svgGroup_ = null, Blockly.Field.stopCache()
}, Blockly.BlockSvg.prototype.disposeUiEffect = function() {
    this.workspace.playAudio("delete");
    var e = Blockly.getSvgXY_(this.svgGroup_, this.workspace),
        t = this.svgGroup_.cloneNode(!0);
    t.translateX_ = e.x, t.translateY_ = e.y, t.setAttribute("transform", "translate(" + t.translateX_ + "," + t.translateY_ + ")"), this.workspace.options.svg.appendChild(t), t.bBox_ = t.getBBox(), Blockly.BlockSvg.disposeUiStep_(t, this.RTL, new Date, this.workspace.scale)
}, Blockly.BlockSvg.disposeUiStep_ = function(e, t, o, n) {
    var i = (new Date - o) / 150;
    i > 1 ? goog.dom.removeNode(e) : (e.setAttribute("transform", "translate(" + (e.translateX_ + (t ? -1 : 1) * e.bBox_.width * n / 2 * i) + "," + (e.translateY_ + e.bBox_.height * n * i) + ") scale(" + (1 - i) * n + ")"), setTimeout(function() {
        Blockly.BlockSvg.disposeUiStep_(e, t, o, n)
    }, 10))
}, Blockly.BlockSvg.prototype.connectionUiEffect = function() {
    if (this.workspace.playAudio("click"), !(1 > this.workspace.scale)) {
        var e = Blockly.getSvgXY_(this.svgGroup_, this.workspace);
        this.outputConnection ? (e.x += (this.RTL ? 3 : -3) * this.workspace.scale, e.y += 13 * this.workspace.scale) : this.previousConnection && (e.x += (this.RTL ? -23 : 23) * this.workspace.scale, e.y += 3 * this.workspace.scale), e = Blockly.createSvgElement("circle", {
            cx: e.x,
            cy: e.y,
            r: 0,
            fill: "none",
            stroke: "#888",
            "stroke-width": 10
        }, this.workspace.options.svg), Blockly.BlockSvg.connectionUiStep_(e, new Date, this.workspace.scale)
    }
}, Blockly.BlockSvg.connectionUiStep_ = function(e, t, o) {
    var n = (new Date - t) / 150;
    n > 1 ? goog.dom.removeNode(e) : (e.setAttribute("r", 25 * n * o), e.style.opacity = 1 - n, Blockly.BlockSvg.disconnectUiStop_.pid_ = setTimeout(function() {
        Blockly.BlockSvg.connectionUiStep_(e, t, o)
    }, 10))
}, Blockly.BlockSvg.prototype.disconnectUiEffect = function() {
    if (this.workspace.playAudio("disconnect"), !(1 > this.workspace.scale)) {
        var e = this.getHeightWidth().height,
            e = Math.atan(10 / e) / Math.PI * 180;
        this.RTL || (e *= -1), Blockly.BlockSvg.disconnectUiStep_(this.svgGroup_, e, new Date)
    }
}, Blockly.BlockSvg.disconnectUiStep_ = function(e, t, o) {
    var n = (new Date - o) / 200;
    n > 1 ? e.skew_ = "" : (e.skew_ = "skewX(" + Math.round(Math.sin(n * Math.PI * 3) * (1 - n) * t) + ")", Blockly.BlockSvg.disconnectUiStop_.group = e, Blockly.BlockSvg.disconnectUiStop_.pid = setTimeout(function() {
        Blockly.BlockSvg.disconnectUiStep_(e, t, o)
    }, 10)), e.setAttribute("transform", e.translate_ + e.skew_)
}, Blockly.BlockSvg.disconnectUiStop_ = function() {
    if (Blockly.BlockSvg.disconnectUiStop_.group) {
        clearTimeout(Blockly.BlockSvg.disconnectUiStop_.pid);
        var e = Blockly.BlockSvg.disconnectUiStop_.group;
        e.skew_ = "", e.setAttribute("transform", e.translate_), Blockly.BlockSvg.disconnectUiStop_.group = null
    }
}, Blockly.BlockSvg.disconnectUiStop_.pid = 0, Blockly.BlockSvg.disconnectUiStop_.group = null, Blockly.BlockSvg.prototype.updateColour = function() {
    if (!this.disabled) {
        var e = Blockly.makeColour(this.getColour()),
            t = goog.color.hexToRgb(e);
        if (this.isShadow()) t = goog.color.lighten(t, .6), e = goog.color.rgbArrayToHex(t), this.svgPathLight_.style.display = "none", this.svgPathDark_.setAttribute("fill", e);
        else {
            this.svgPathLight_.style.display = "";
            var o = goog.color.rgbArrayToHex(goog.color.lighten(t, .3)),
                t = goog.color.rgbArrayToHex(goog.color.darken(t, .2));
            this.svgPathLight_.setAttribute("stroke", o), this.svgPathDark_.setAttribute("fill", t)
        }
        for (this.svgPath_.setAttribute("fill", e), e = this.getIcons(), o = 0; o < e.length; o++) e[o].updateColour();
        for (e = 0; o = this.inputList[e]; e++)
            for (var n, t = 0; n = o.fieldRow[t]; t++) n.setText(null)
    }
}, Blockly.BlockSvg.prototype.updateDisabled = function(e) {
    var t = Blockly.hasClass_(this.svgGroup_, "blocklyDisabled");
    if (this.disabled || !0 !== e && this.getInheritedDisabled() ? t || (Blockly.addClass_(this.svgGroup_, "blocklyDisabled"), this.svgPath_.setAttribute("fill", "url(#" + this.workspace.options.disabledPatternId + ")")) : t && (Blockly.removeClass_(this.svgGroup_, "blocklyDisabled"), this.updateColour()), !e) {
        e = this.getChildren();
        for (var o, t = 0; o = e[t]; t++) o.updateDisabled()
    }
}, Blockly.BlockSvg.prototype.getCommentText = function() {
    return this.comment ? this.comment.getText().replace(/\s+$/, "").replace(/ +\n/g, "\n") : ""
}, Blockly.BlockSvg.prototype.setCommentText = function(e) {
    var t = !1;
    goog.isString(e) ? (this.comment || (this.comment = new Blockly.Comment(this), t = !0), this.comment.setText(e)) : this.comment && (this.comment.dispose(), t = !0), t && this.rendered && (this.render(), this.bumpNeighbours_())
}, Blockly.BlockSvg.prototype.addBreakpoint = function() {
    null == this.breakpoint && (this.breakpoint = new Blockly.Breakpoint(this), this.bumpNeighbours_(), this.render())
}, Blockly.BlockSvg.prototype.removeBreakpoint = function() {
    null != this.breakpoint && (this.breakpoint.dispose(), this.breakpoint = null, this.bumpNeighbours_(), this.render())
}, Blockly.BlockSvg.prototype.setWarningText = function(e, t) {
    this.setWarningText.pid_ || (this.setWarningText.pid_ = Object.create(null));
    var o = t || "";
    if (o) this.setWarningText.pid_[o] && (clearTimeout(this.setWarningText.pid_[o]), delete this.setWarningText.pid_[o]);
    else
        for (var n in this.setWarningText.pid_) clearTimeout(this.setWarningText.pid_[n]), delete this.setWarningText.pid_[n];
    if (2 == Blockly.dragMode_) {
        var i = this;
        this.setWarningText.pid_[o] = setTimeout(function() {
            i.workspace && (delete i.setWarningText.pid_[o], i.setWarningText(e, o))
        }, 100)
    } else {
        this.isInFlyout && (e = null), n = this.getSurroundParent();
        for (var r = null; n;) n.isCollapsed() && (r = n), n = n.getSurroundParent();
        r && r.setWarningText(e, "collapsed " + this.id + " " + o), n = !1, goog.isString(e) ? (this.warning || (this.warning = new Blockly.Warning(this), n = !0), this.warning.setText(e, o)) : this.warning && !o ? (this.warning.dispose(), n = !0) : this.warning && (n = this.warning.getText(), this.warning.setText("", o), (r = this.warning.getText()) || this.warning.dispose(), n = n == r), n && this.rendered && (this.render(), this.bumpNeighbours_())
    }
}, Blockly.BlockSvg.prototype.setMutator = function(e) {
    this.mutator && this.mutator !== e && this.mutator.dispose(), e && (e.block_ = this, this.mutator = e, this.rendered && e.createIcon())
}, Blockly.BlockSvg.prototype.setDisabled = function(e) {
    this.disabled != e && (Blockly.BlockSvg.superClass_.setDisabled.call(this, e), this.rendered && this.updateDisabled(), this.workspace.fireChangeEvent())
}, Blockly.BlockSvg.prototype.addSelect = function() {
    Blockly.addClass_(this.svgGroup_, "blocklySelected"), this.svgGroup_.parentNode.appendChild(this.svgGroup_)
}, Blockly.BlockSvg.prototype.removeSelect = function() {
    Blockly.removeClass_(this.svgGroup_, "blocklySelected")
}, Blockly.BlockSvg.prototype.addDragging = function() {
    Blockly.addClass_(this.svgGroup_, "blocklyDragging")
}, Blockly.BlockSvg.prototype.removeDragging = function() {
    Blockly.removeClass_(this.svgGroup_, "blocklyDragging")
}, Blockly.BlockSvg.prototype.render = function(e) {
    Blockly.Field.startCache(), this.rendered = !0;
    var t = Blockly.BlockSvg.SEP_SPACE_X;
    this.RTL && (t = -t);
    for (var o = this.getIcons(), n = 0; n < o.length; n++) t = o[n].renderIcon(t);
    this.checkIconPadding_(o), t += this.RTL ? Blockly.BlockSvg.SEP_SPACE_X : -Blockly.BlockSvg.SEP_SPACE_X, o = this.renderCompute_(t), this.renderDraw_(t, o), !1 !== e && ((e = this.getParent()) ? e.render(!0) : Blockly.fireUiEvent(window, "resize")), Blockly.Field.stopCache(), Blockly.Realtime.blockChanged(this)
}, Blockly.BlockSvg.prototype.checkIconPadding_ = function(e) {
    this.padIcons && (e.length ? this.iconPadding_ || (this.iconPadding_ = new Blockly.Input(Blockly.DUMMY_INPUT), this.inputList.unshift(this.iconPadding_)) : this.iconPadding_ && (this.inputList.splice(this.inputList.indexOf(this.iconPadding_), 1), this.iconPadding_ = null))
}, Blockly.BlockSvg.prototype.renderFields_ = function(e, t, o) {
    o += Blockly.BlockSvg.INLINE_PADDING_Y, this.RTL && (t = -t);
    for (var n, i = 0; n = e[i]; i++) {
        var r = n.getSvgRoot();
        r && (this.RTL ? (t -= n.renderSep + n.renderWidth, r.setAttribute("transform", "translate(" + t + "," + o + ")"), n.renderWidth && (t -= Blockly.BlockSvg.SEP_SPACE_X)) : (r.setAttribute("transform", "translate(" + (t + n.renderSep) + "," + o + ")"), n.renderWidth && (t += n.renderSep + n.renderWidth + Blockly.BlockSvg.SEP_SPACE_X)))
    }
    return this.RTL ? -t : t
}, Blockly.BlockSvg.prototype.renderCompute_ = function(e) {
    var t = this.inputList,
        o = [];
    o.rightEdge = e + 2 * Blockly.BlockSvg.SEP_SPACE_X, (this.previousConnection || this.nextConnection) && (o.rightEdge = Math.max(o.rightEdge, Blockly.BlockSvg.NOTCH_WIDTH + Blockly.BlockSvg.SEP_SPACE_X));
    for (var n, i = 0, r = 0, s = !1, a = !1, l = !1, c = void 0, u = this.getInputsInline() && !this.isCollapsed(), g = 0; n = t[g]; g++)
        if (n.isVisible()) {
            var p;
            if (u && c && c != Blockly.NEXT_STATEMENT && n.type != Blockly.NEXT_STATEMENT ? p = o[o.length - 1] : (c = n.type, p = [], p.type = u && n.type != Blockly.NEXT_STATEMENT ? Blockly.BlockSvg.INLINE : n.type, p.height = 0, o.push(p)), p.push(n), n.renderHeight = Blockly.BlockSvg.MIN_BLOCK_Y, n.renderWidth = u && n.type == Blockly.INPUT_VALUE ? Blockly.BlockSvg.TAB_WIDTH + 1.25 * Blockly.BlockSvg.SEP_SPACE_X : 0, n.connection && n.connection.targetConnection) {
                var h = n.connection.targetBlock().getHeightWidth();
                n.renderHeight = Math.max(n.renderHeight, h.height), n.renderWidth = Math.max(n.renderWidth, h.width)
            }
            u || g != t.length - 1 ? !u && n.type == Blockly.INPUT_VALUE && t[g + 1] && t[g + 1].type == Blockly.NEXT_STATEMENT && n.renderHeight-- : n.renderHeight--, p.height = Math.max(p.height, n.renderHeight), n.fieldWidth = 0, 1 == o.length && (n.fieldWidth += this.RTL ? -e : e);
            for (var d, h = !1, f = 0; d = n.fieldRow[f]; f++) {
                0 != f && (n.fieldWidth += Blockly.BlockSvg.SEP_SPACE_X);
                var m = d.getSize();
                d.renderWidth = m.width, d.renderSep = h && d.EDITABLE ? Blockly.BlockSvg.SEP_SPACE_X : 0, n.fieldWidth += d.renderWidth + d.renderSep, p.height = Math.max(p.height, m.height), h = d.EDITABLE
            }
            p.type != Blockly.BlockSvg.INLINE && (p.type == Blockly.NEXT_STATEMENT ? (a = !0, r = Math.max(r, n.fieldWidth)) : (p.type == Blockly.INPUT_VALUE ? s = !0 : p.type == Blockly.DUMMY_INPUT && (l = !0), i = Math.max(i, n.fieldWidth)))
        }
    for (e = 0; p = o[e]; e++)
        if (p.thicker = !1, p.type == Blockly.BlockSvg.INLINE)
            for (t = 0; n = p[t]; t++)
                if (n.type == Blockly.INPUT_VALUE) {
                    p.height += 2 * Blockly.BlockSvg.INLINE_PADDING_Y, p.thicker = !0;
                    break
                }
    return o.statementEdge = 2 * Blockly.BlockSvg.SEP_SPACE_X + r, a && (o.rightEdge = Math.max(o.rightEdge, o.statementEdge + Blockly.BlockSvg.NOTCH_WIDTH)), s ? o.rightEdge = Math.max(o.rightEdge, i + 2 * Blockly.BlockSvg.SEP_SPACE_X + Blockly.BlockSvg.TAB_WIDTH) : l && (o.rightEdge = Math.max(o.rightEdge, i + 2 * Blockly.BlockSvg.SEP_SPACE_X)), o.hasValue = s, o.hasStatement = a, o.hasDummy = l, o
}, Blockly.BlockSvg.prototype.renderDraw_ = function(e, t) {
    if (this.startHat_ = !1, this.outputConnection) this.squareBottomLeftCorner_ = this.squareTopLeftCorner_ = !0;
    else {
        if (this.squareBottomLeftCorner_ = this.squareTopLeftCorner_ = !1, this.previousConnection) {
            var o = this.previousConnection.targetBlock();
            o && o.getNextBlock() == this && (this.squareTopLeftCorner_ = !0)
        } else Blockly.BlockSvg.START_HAT && (this.startHat_ = this.squareTopLeftCorner_ = !0, t.rightEdge = Math.max(t.rightEdge, 100));
        this.getNextBlock() && (this.squareBottomLeftCorner_ = !0)
    }
    var n = this.getRelativeToSurfaceXY(),
        i = [],
        r = [],
        o = [],
        s = [];
    this.renderDrawTop_(i, o, n, t.rightEdge);
    var a = this.renderDrawRight_(i, o, r, s, n, t, e);
    this.renderDrawBottom_(i, o, n, a), this.renderDrawLeft_(i, o, n, a), n = i.join(" ") + "\n" + r.join(" "), this.svgPath_.setAttribute("d", n), this.svgPathDark_.setAttribute("d", n), n = o.join(" ") + "\n" + s.join(" "), this.svgPathLight_.setAttribute("d", n), this.RTL && (this.svgPath_.setAttribute("transform", "scale(-1 1)"), this.svgPathLight_.setAttribute("transform", "scale(-1 1)"), this.svgPathDark_.setAttribute("transform", "translate(1,1) scale(-1 1)"))
}, Blockly.BlockSvg.prototype.renderDrawTop_ = function(e, t, o, n) {
    this.squareTopLeftCorner_ ? (e.push("m 0,0"), t.push("m 0.5,0.5"), this.startHat_ && (e.push(Blockly.BlockSvg.START_HAT_PATH), t.push(this.RTL ? Blockly.BlockSvg.START_HAT_HIGHLIGHT_RTL : Blockly.BlockSvg.START_HAT_HIGHLIGHT_LTR))) : (e.push(Blockly.BlockSvg.TOP_LEFT_CORNER_START), t.push(this.RTL ? Blockly.BlockSvg.TOP_LEFT_CORNER_START_HIGHLIGHT_RTL : Blockly.BlockSvg.TOP_LEFT_CORNER_START_HIGHLIGHT_LTR), e.push(Blockly.BlockSvg.TOP_LEFT_CORNER), t.push(Blockly.BlockSvg.TOP_LEFT_CORNER_HIGHLIGHT)), this.previousConnection && (e.push("H", Blockly.BlockSvg.NOTCH_WIDTH - 15), t.push("H", Blockly.BlockSvg.NOTCH_WIDTH - 15), e.push(Blockly.BlockSvg.NOTCH_PATH_LEFT), t.push(Blockly.BlockSvg.NOTCH_PATH_LEFT_HIGHLIGHT), this.previousConnection.moveTo(o.x + (this.RTL ? -Blockly.BlockSvg.NOTCH_WIDTH : Blockly.BlockSvg.NOTCH_WIDTH), o.y)), e.push("H", n), t.push("H", n - .5), this.width = n
}, Blockly.BlockSvg.prototype.renderDrawRight_ = function(e, t, o, n, i, r, s) {
    for (var a, l, c, u, g = 0, p = 0; u = r[p]; p++) {
        if (a = Blockly.BlockSvg.SEP_SPACE_X, 0 == p && (a += this.RTL ? -s : s), t.push("M", r.rightEdge - .5 + "," + (g + .5)), this.isCollapsed()) {
            var h = u[0];
            l = g, this.renderFields_(h.fieldRow, a, l), e.push(Blockly.BlockSvg.JAGGED_TEETH), t.push("h 8"), h = u.height - Blockly.BlockSvg.JAGGED_TEETH_HEIGHT, e.push("v", h), this.RTL && (t.push("v 3.9 l 7.2,3.4 m -14.5,8.9 l 7.3,3.5"), t.push("v", h - .7)), this.width += Blockly.BlockSvg.JAGGED_TEETH_WIDTH
        } else if (u.type == Blockly.BlockSvg.INLINE) {
            for (var d = 0; h = u[d]; d++) l = g, u.thicker && (l += Blockly.BlockSvg.INLINE_PADDING_Y), a = this.renderFields_(h.fieldRow, a, l), h.type != Blockly.DUMMY_INPUT && (a += h.renderWidth + Blockly.BlockSvg.SEP_SPACE_X), h.type == Blockly.INPUT_VALUE && (o.push("M", a - Blockly.BlockSvg.SEP_SPACE_X + "," + (g + Blockly.BlockSvg.INLINE_PADDING_Y)), o.push("h", Blockly.BlockSvg.TAB_WIDTH - 2 - h.renderWidth), o.push(Blockly.BlockSvg.TAB_PATH_DOWN), o.push("v", h.renderHeight + 1 - Blockly.BlockSvg.TAB_HEIGHT), o.push("h", h.renderWidth + 2 - Blockly.BlockSvg.TAB_WIDTH), o.push("z"), this.RTL ? (n.push("M", a - Blockly.BlockSvg.SEP_SPACE_X - 2.5 + Blockly.BlockSvg.TAB_WIDTH - h.renderWidth + "," + (g + Blockly.BlockSvg.INLINE_PADDING_Y + .5)), n.push(Blockly.BlockSvg.TAB_PATH_DOWN_HIGHLIGHT_RTL), n.push("v", h.renderHeight - Blockly.BlockSvg.TAB_HEIGHT + 2.5), n.push("h", h.renderWidth - Blockly.BlockSvg.TAB_WIDTH + 2)) : (n.push("M", a - Blockly.BlockSvg.SEP_SPACE_X + .5 + "," + (g + Blockly.BlockSvg.INLINE_PADDING_Y + .5)), n.push("v", h.renderHeight + 1), n.push("h", Blockly.BlockSvg.TAB_WIDTH - 2 - h.renderWidth), n.push("M", a - h.renderWidth - Blockly.BlockSvg.SEP_SPACE_X + .9 + "," + (g + Blockly.BlockSvg.INLINE_PADDING_Y + Blockly.BlockSvg.TAB_HEIGHT - .7)), n.push("l", .46 * Blockly.BlockSvg.TAB_WIDTH + ",-2.1")), l = this.RTL ? i.x - a - Blockly.BlockSvg.TAB_WIDTH + Blockly.BlockSvg.SEP_SPACE_X + h.renderWidth + 1 : i.x + a + Blockly.BlockSvg.TAB_WIDTH - Blockly.BlockSvg.SEP_SPACE_X - h.renderWidth - 1, c = i.y + g + Blockly.BlockSvg.INLINE_PADDING_Y + 1, h.connection.moveTo(l, c), h.connection.targetConnection && h.connection.tighten_());
            a = Math.max(a, r.rightEdge), this.width = Math.max(this.width, a), e.push("H", a), t.push("H", a - .5), e.push("v", u.height), this.RTL && t.push("v", u.height - 1)
        } else u.type == Blockly.INPUT_VALUE ? (h = u[0], l = g, h.align != Blockly.ALIGN_LEFT && (d = r.rightEdge - h.fieldWidth - Blockly.BlockSvg.TAB_WIDTH - 2 * Blockly.BlockSvg.SEP_SPACE_X, h.align == Blockly.ALIGN_RIGHT ? a += d : h.align == Blockly.ALIGN_CENTRE && (a += d / 2)), this.renderFields_(h.fieldRow, a, l), e.push(Blockly.BlockSvg.TAB_PATH_DOWN), d = u.height - Blockly.BlockSvg.TAB_HEIGHT, e.push("v", d), this.RTL ? (t.push(Blockly.BlockSvg.TAB_PATH_DOWN_HIGHLIGHT_RTL), t.push("v", d + .5)) : (t.push("M", r.rightEdge - 5 + "," + (g + Blockly.BlockSvg.TAB_HEIGHT - .7)), t.push("l", .46 * Blockly.BlockSvg.TAB_WIDTH + ",-2.1")), l = i.x + (this.RTL ? -r.rightEdge - 1 : r.rightEdge + 1), c = i.y + g, h.connection.moveTo(l, c), h.connection.targetConnection && (h.connection.tighten_(), this.width = Math.max(this.width, r.rightEdge + h.connection.targetBlock().getHeightWidth().width - Blockly.BlockSvg.TAB_WIDTH + 1))) : u.type == Blockly.DUMMY_INPUT ? (h = u[0], l = g, h.align != Blockly.ALIGN_LEFT && (d = r.rightEdge - h.fieldWidth - 2 * Blockly.BlockSvg.SEP_SPACE_X, r.hasValue && (d -= Blockly.BlockSvg.TAB_WIDTH), h.align == Blockly.ALIGN_RIGHT ? a += d : h.align == Blockly.ALIGN_CENTRE && (a += d / 2)), this.renderFields_(h.fieldRow, a, l), e.push("v", u.height), this.RTL && t.push("v", u.height - 1)) : u.type == Blockly.NEXT_STATEMENT && (h = u[0], 0 == p && (e.push("v", Blockly.BlockSvg.SEP_SPACE_Y), this.RTL && t.push("v", Blockly.BlockSvg.SEP_SPACE_Y - 1), g += Blockly.BlockSvg.SEP_SPACE_Y), l = g, h.align != Blockly.ALIGN_LEFT && (d = r.statementEdge - h.fieldWidth - 2 * Blockly.BlockSvg.SEP_SPACE_X, h.align == Blockly.ALIGN_RIGHT ? a += d : h.align == Blockly.ALIGN_CENTRE && (a += d / 2)), this.renderFields_(h.fieldRow, a, l), a = r.statementEdge + Blockly.BlockSvg.NOTCH_WIDTH, e.push("H", a), e.push(Blockly.BlockSvg.INNER_TOP_LEFT_CORNER), e.push("v", u.height - 2 * Blockly.BlockSvg.CORNER_RADIUS), e.push(Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER), e.push("H", r.rightEdge), this.RTL ? (t.push("M", a - Blockly.BlockSvg.NOTCH_WIDTH + Blockly.BlockSvg.DISTANCE_45_OUTSIDE + "," + (g + Blockly.BlockSvg.DISTANCE_45_OUTSIDE)), t.push(Blockly.BlockSvg.INNER_TOP_LEFT_CORNER_HIGHLIGHT_RTL), t.push("v", u.height - 2 * Blockly.BlockSvg.CORNER_RADIUS),
            t.push(Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER_HIGHLIGHT_RTL)) : (t.push("M", a - Blockly.BlockSvg.NOTCH_WIDTH + Blockly.BlockSvg.DISTANCE_45_OUTSIDE + "," + (g + u.height - Blockly.BlockSvg.DISTANCE_45_OUTSIDE)), t.push(Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER_HIGHLIGHT_LTR)), t.push("H", r.rightEdge - .5), l = i.x + (this.RTL ? -a : a + 1), c = i.y + g + 1, h.connection.moveTo(l, c), h.connection.targetConnection && (h.connection.tighten_(), this.width = Math.max(this.width, r.statementEdge + h.connection.targetBlock().getHeightWidth().width)), p == r.length - 1 || r[p + 1].type == Blockly.NEXT_STATEMENT) && (e.push("v", Blockly.BlockSvg.SEP_SPACE_Y), this.RTL && t.push("v", Blockly.BlockSvg.SEP_SPACE_Y - 1), g += Blockly.BlockSvg.SEP_SPACE_Y);
        g += u.height
    }
    return r.length || (g = Blockly.BlockSvg.MIN_BLOCK_Y, e.push("V", g), this.RTL && t.push("V", g - 1)), g
}, Blockly.BlockSvg.prototype.renderDrawBottom_ = function(e, t, o, n) {
    this.height = n + 1, this.nextConnection && (e.push("H", Blockly.BlockSvg.NOTCH_WIDTH + (this.RTL ? .5 : -.5) + " " + Blockly.BlockSvg.NOTCH_PATH_RIGHT), this.nextConnection.moveTo(this.RTL ? o.x - Blockly.BlockSvg.NOTCH_WIDTH : o.x + Blockly.BlockSvg.NOTCH_WIDTH, o.y + n + 1), this.nextConnection.targetConnection && this.nextConnection.tighten_(), this.height += 4), this.squareBottomLeftCorner_ ? (e.push("H 0"), this.RTL || t.push("M", "0.5," + (n - .5))) : (e.push("H", Blockly.BlockSvg.CORNER_RADIUS), e.push("a", Blockly.BlockSvg.CORNER_RADIUS + "," + Blockly.BlockSvg.CORNER_RADIUS + " 0 0,1 -" + Blockly.BlockSvg.CORNER_RADIUS + ",-" + Blockly.BlockSvg.CORNER_RADIUS), this.RTL || (t.push("M", Blockly.BlockSvg.DISTANCE_45_INSIDE + "," + (n - Blockly.BlockSvg.DISTANCE_45_INSIDE)), t.push("A", Blockly.BlockSvg.CORNER_RADIUS - .5 + "," + (Blockly.BlockSvg.CORNER_RADIUS - .5) + " 0 0,1 0.5," + (n - Blockly.BlockSvg.CORNER_RADIUS))))
}, Blockly.BlockSvg.prototype.renderDrawLeft_ = function(e, t, o, n) {
    this.outputConnection ? (this.outputConnection.moveTo(o.x, o.y), e.push("V", Blockly.BlockSvg.TAB_HEIGHT), e.push("c 0,-10 -" + Blockly.BlockSvg.TAB_WIDTH + ",8 -" + Blockly.BlockSvg.TAB_WIDTH + ",-7.5 s " + Blockly.BlockSvg.TAB_WIDTH + ",2.5 " + Blockly.BlockSvg.TAB_WIDTH + ",-7.5"), this.RTL ? (t.push("M", -.25 * Blockly.BlockSvg.TAB_WIDTH + ",8.4"), t.push("l", -.45 * Blockly.BlockSvg.TAB_WIDTH + ",-2.1")) : (t.push("V", Blockly.BlockSvg.TAB_HEIGHT - 1.5), t.push("m", -.92 * Blockly.BlockSvg.TAB_WIDTH + ",-0.5 q " + -.19 * Blockly.BlockSvg.TAB_WIDTH + ",-5.5 0,-11"), t.push("m", .92 * Blockly.BlockSvg.TAB_WIDTH + ",1 V 0.5 H 1")), this.width += Blockly.BlockSvg.TAB_WIDTH) : this.RTL || (this.squareTopLeftCorner_ ? t.push("V", .5) : t.push("V", Blockly.BlockSvg.CORNER_RADIUS)), e.push("z")
}, Blockly.Msg = {}, goog.getMsgOrig = goog.getMsg, goog.getMsg = function(e, t) {
    var o = goog.getMsg.blocklyMsgMap[e];
    return o && (e = Blockly.Msg[o]), goog.getMsgOrig(e, t)
}, goog.getMsg.blocklyMsgMap = {
    Today: "TODAY"
}, Blockly.FieldTextInput = function(e, t) {
    Blockly.FieldTextInput.superClass_.constructor.call(this, e), this.setChangeHandler(t)
}, goog.inherits(Blockly.FieldTextInput, Blockly.Field), Blockly.FieldTextInput.FONTSIZE = 11, Blockly.FieldTextInput.prototype.CURSOR = "text", Blockly.FieldTextInput.prototype.spellcheck_ = !0, Blockly.FieldTextInput.prototype.dispose = function() {
    Blockly.WidgetDiv.hideIfOwner(this), Blockly.FieldTextInput.superClass_.dispose.call(this)
}, Blockly.FieldTextInput.prototype.setText = function(e) {
    if (null !== e) {
        if (this.validateOnInputChange && this.sourceBlock_ && this.changeHandler_) {
            var t = this.changeHandler_(e);
            null !== t && void 0 !== t && (e = t)
        }
        Blockly.Field.prototype.setText.call(this, e)
    }
}, Blockly.FieldTextInput.prototype.setSpellcheck = function(e) {
    this.spellcheck_ = e
}, Blockly.FieldTextInput.prototype.showEditor_ = function(e) {
    var t = e || !1;
    if (!t && (goog.userAgent.MOBILE || goog.userAgent.ANDROID || goog.userAgent.IPAD)) e = window.prompt(Blockly.Msg.CHANGE_VALUE_TITLE, this.text_), this.sourceBlock_ && this.changeHandler_ && (t = this.changeHandler_(e), void 0 !== t && (e = t)), null !== e && this.setText(e);
    else {
        Blockly.WidgetDiv.show(this, this.sourceBlock_.RTL, this.widgetDispose_());
        var o = Blockly.WidgetDiv.DIV;
        e = goog.dom.createDom("input", "blocklyHtmlInput"), e.setAttribute("spellcheck", this.spellcheck_);
        var n = Blockly.FieldTextInput.FONTSIZE * this.sourceBlock_.workspace.scale + "pt";
        o.style.fontSize = n, e.style.fontSize = n, Blockly.FieldTextInput.htmlInput_ = e, o.appendChild(e), e.value = e.defaultValue = this.text_, e.oldValue_ = null, this.validate_(), this.resizeEditor_(), t || (e.focus(), e.select()), e.onKeyDownWrapper_ = Blockly.bindEvent_(e, "keydown", this, this.onHtmlInputKeyDown_), e.onKeyUpWrapper_ = Blockly.bindEvent_(e, "keyup", this, this.onHtmlInputChange_), e.onKeyPressWrapper_ = Blockly.bindEvent_(e, "keypress", this, this.onHtmlInputChange_), t = this.sourceBlock_.workspace.getCanvas(), e.onWorkspaceChangeWrapper_ = Blockly.bindEvent_(t, "blocklyWorkspaceChange", this, this.resizeEditor_)
    }
}, Blockly.FieldTextInput.prototype.onHtmlInputKeyDown_ = function(e) {
    var t = Blockly.FieldTextInput.htmlInput_;
    13 == e.keyCode ? Blockly.WidgetDiv.hide() : 27 == e.keyCode ? (this.setText(t.defaultValue), Blockly.WidgetDiv.hide()) : 9 == e.keyCode && (Blockly.WidgetDiv.hide(), this.sourceBlock_.tab(this, !e.shiftKey), e.preventDefault())
}, Blockly.FieldTextInput.prototype.onHtmlInputChange_ = function(e) {
    var t = Blockly.FieldTextInput.htmlInput_;
    27 != e.keyCode && (e = t.value, e !== t.oldValue_ ? (this.sourceBlock_.setShadow(!1), t.oldValue_ = e, this.setText(e), this.validateOnInputChange && this.validate_()) : goog.userAgent.WEBKIT && this.sourceBlock_.render())
}, Blockly.FieldTextInput.prototype.validate_ = function() {
    var e = !0;
    goog.asserts.assertObject(Blockly.FieldTextInput.htmlInput_);
    var t = Blockly.FieldTextInput.htmlInput_;
    this.sourceBlock_ && this.changeHandler_ && (e = this.changeHandler_(t.value)), null === e ? Blockly.addClass_(t, "blocklyInvalidInput") : Blockly.removeClass_(t, "blocklyInvalidInput")
}, Blockly.FieldTextInput.prototype.resizeEditor_ = function() {
    var e = Blockly.WidgetDiv.DIV,
        t = this.fieldGroup_.getBBox();
    if (e.style.width = t.width * this.sourceBlock_.workspace.scale + "px", e.style.height = t.height * this.sourceBlock_.workspace.scale + "px", t = this.getAbsoluteXY_(), this.sourceBlock_.RTL) {
        var o = this.getScaledBBox_();
        t.x += o.width, t.x -= e.offsetWidth
    }
    t.y += 1, goog.userAgent.GECKO && Blockly.WidgetDiv.DIV.style.top && (--t.x, --t.y), goog.userAgent.WEBKIT && (t.y -= 3), e.style.left = t.x + "px", e.style.top = t.y + "px"
}, Blockly.FieldTextInput.prototype.widgetDispose_ = function() {
    var e = this;
    return function() {
        var t = Blockly.FieldTextInput.htmlInput_,
            o = t.value;
        if (e.sourceBlock_ && e.changeHandler_) {
            var n = e.changeHandler_(o);
            null === n ? o = t.defaultValue : void 0 !== n && (o = n)
        }
        e.setText(o), e.sourceBlock_.rendered && e.sourceBlock_.render(), Blockly.unbindEvent_(t.onKeyDownWrapper_), Blockly.unbindEvent_(t.onKeyUpWrapper_), Blockly.unbindEvent_(t.onKeyPressWrapper_), Blockly.unbindEvent_(t.onWorkspaceChangeWrapper_), Blockly.FieldTextInput.htmlInput_ = null, t = Blockly.WidgetDiv.DIV.style, t.width = "auto", t.height = "auto", t.fontSize = ""
    }
}, Blockly.FieldTextInput.numberValidator = function(e) {
    return null === e ? null : (e = String(e), e = e.replace(/O/gi, "0"), e = e.replace(/,/g, ""), e = parseFloat(e || 0), isNaN(e) ? null : String(e))
}, Blockly.FieldTextInput.nonnegativeIntegerValidator = function(e) {
    return (e = Blockly.FieldTextInput.numberValidator(e)) && (e = String(Math.max(0, Math.floor(e)))), e
}, Blockly.FieldAngle = function(e, t) {
    this.symbol_ = Blockly.createSvgElement("tspan", {}, null), this.symbol_.appendChild(document.createTextNode("\xb0")), Blockly.FieldAngle.superClass_.constructor.call(this, e, null), this.setChangeHandler(t)
}, goog.inherits(Blockly.FieldAngle, Blockly.FieldTextInput), Blockly.FieldAngle.prototype.setChangeHandler = function(e) {
    Blockly.FieldAngle.superClass_.setChangeHandler.call(this, e ? function(t) {
        var o = e.call(this, t);
        if (null === o) var n = o;
        else void 0 === o && (o = t), n = Blockly.FieldAngle.angleValidator.call(this, o), void 0 !== n && (n = o);
        return n === t ? void 0 : n
    } : Blockly.FieldAngle.angleValidator)
}, Blockly.FieldAngle.ROUND = 15, Blockly.FieldAngle.HALF = 50, Blockly.FieldAngle.RADIUS = Blockly.FieldAngle.HALF - 1, Blockly.FieldAngle.prototype.dispose_ = function() {
    var e = this;
    return function() {
        Blockly.FieldAngle.superClass_.dispose_.call(e)(), e.gauge_ = null, e.clickWrapper_ && Blockly.unbindEvent_(e.clickWrapper_), e.moveWrapper1_ && Blockly.unbindEvent_(e.moveWrapper1_), e.moveWrapper2_ && Blockly.unbindEvent_(e.moveWrapper2_)
    }
}, Blockly.FieldAngle.prototype.showEditor_ = function() {
    Blockly.FieldAngle.superClass_.showEditor_.call(this, goog.userAgent.MOBILE || goog.userAgent.ANDROID || goog.userAgent.IPAD);
    var e = Blockly.WidgetDiv.DIV;
    if (e.firstChild) {
        var e = Blockly.createSvgElement("svg", {
                xmlns: "http://www.w3.org/2000/svg",
                "xmlns:html": "http://www.w3.org/1999/xhtml",
                "xmlns:xlink": "http://www.w3.org/1999/xlink",
                version: "1.1",
                height: 2 * Blockly.FieldAngle.HALF + "px",
                width: 2 * Blockly.FieldAngle.HALF + "px"
            }, e),
            t = Blockly.createSvgElement("circle", {
                cx: Blockly.FieldAngle.HALF,
                cy: Blockly.FieldAngle.HALF,
                r: Blockly.FieldAngle.RADIUS,
                "class": "blocklyAngleCircle"
            }, e);
        this.gauge_ = Blockly.createSvgElement("path", {
            "class": "blocklyAngleGauge"
        }, e), this.line_ = Blockly.createSvgElement("line", {
            x1: Blockly.FieldAngle.HALF,
            y1: Blockly.FieldAngle.HALF,
            "class": "blocklyAngleLine"
        }, e);
        for (var o = 0; 360 > o; o += 15) Blockly.createSvgElement("line", {
            x1: Blockly.FieldAngle.HALF + Blockly.FieldAngle.RADIUS,
            y1: Blockly.FieldAngle.HALF,
            x2: Blockly.FieldAngle.HALF + Blockly.FieldAngle.RADIUS - (0 == o % 45 ? 10 : 5),
            y2: Blockly.FieldAngle.HALF,
            "class": "blocklyAngleMarks",
            transform: "rotate(" + o + "," + Blockly.FieldAngle.HALF + "," + Blockly.FieldAngle.HALF + ")"
        }, e);
        e.style.marginLeft = 15 - Blockly.FieldAngle.RADIUS + "px", this.clickWrapper_ = Blockly.bindEvent_(e, "click", this, Blockly.WidgetDiv.hide), this.moveWrapper1_ = Blockly.bindEvent_(t, "mousemove", this, this.onMouseMove), this.moveWrapper2_ = Blockly.bindEvent_(this.gauge_, "mousemove", this, this.onMouseMove), this.updateGraph_()
    }
}, Blockly.FieldAngle.prototype.onMouseMove = function(e) {
    var t = this.gauge_.ownerSVGElement.getBoundingClientRect(),
        o = e.clientX - t.left - Blockly.FieldAngle.HALF;
    e = e.clientY - t.top - Blockly.FieldAngle.HALF, t = Math.atan(-e / o), isNaN(t) || (t = goog.math.toDegrees(t), 0 > o ? t += 180 : e > 0 && (t += 360), Blockly.FieldAngle.ROUND && (t = Math.round(t / Blockly.FieldAngle.ROUND) * Blockly.FieldAngle.ROUND), t >= 360 && (t -= 360), t = String(t), Blockly.FieldTextInput.htmlInput_.value = t, this.setText(t), this.validate_())
}, Blockly.FieldAngle.prototype.setText = function(e) {
    Blockly.FieldAngle.superClass_.setText.call(this, e), this.textElement_ && (this.updateGraph_(), this.sourceBlock_.RTL ? this.textElement_.insertBefore(this.symbol_, this.textElement_.firstChild) : this.textElement_.appendChild(this.symbol_), this.size_.width = 0)
}, Blockly.FieldAngle.prototype.updateGraph_ = function() {
    if (this.gauge_) {
        var e = goog.math.toRadians(Number(this.getText()));
        if (isNaN(e)) this.gauge_.setAttribute("d", "M " + Blockly.FieldAngle.HALF + "," + Blockly.FieldAngle.HALF), this.line_.setAttribute("x2", Blockly.FieldAngle.HALF), this.line_.setAttribute("y2", Blockly.FieldAngle.HALF);
        else {
            var t = Blockly.FieldAngle.HALF + Math.cos(e) * Blockly.FieldAngle.RADIUS,
                o = Blockly.FieldAngle.HALF + Math.sin(e) * -Blockly.FieldAngle.RADIUS;
            this.gauge_.setAttribute("d", "M " + Blockly.FieldAngle.HALF + "," + Blockly.FieldAngle.HALF + " h " + Blockly.FieldAngle.RADIUS + " A " + Blockly.FieldAngle.RADIUS + "," + Blockly.FieldAngle.RADIUS + " 0 " + (e > Math.PI ? 1 : 0) + " 0 " + t + "," + o + " z"), this.line_.setAttribute("x2", t), this.line_.setAttribute("y2", o)
        }
    }
}, Blockly.FieldAngle.angleValidator = function(e) {
    return e = Blockly.FieldTextInput.numberValidator(e), null !== e && (e %= 360, 0 > e && (e += 360), e = String(e)), e
}, Blockly.FieldCheckbox = function(e, t) {
    Blockly.FieldCheckbox.superClass_.constructor.call(this, ""), this.setChangeHandler(t), this.setValue(e)
}, goog.inherits(Blockly.FieldCheckbox, Blockly.Field), Blockly.FieldCheckbox.prototype.CURSOR = "default", Blockly.FieldCheckbox.prototype.init = function(e) {
    this.sourceBlock_ || (Blockly.FieldCheckbox.superClass_.init.call(this, e), this.checkElement_ = Blockly.createSvgElement("text", {
        "class": "blocklyText",
        x: -3,
        y: 14
    }, this.fieldGroup_), e = document.createTextNode("\u2713"), this.checkElement_.appendChild(e), this.checkElement_.style.display = this.state_ ? "block" : "none")
}, Blockly.FieldCheckbox.prototype.getValue = function() {
    return String(this.state_).toUpperCase()
}, Blockly.FieldCheckbox.prototype.setValue = function(e) {
    e = "TRUE" == e, this.state_ !== e && (this.state_ = e, this.checkElement_ && (this.checkElement_.style.display = e ? "block" : "none"), this.sourceBlock_ && this.sourceBlock_.rendered && this.sourceBlock_.workspace.fireChangeEvent())
}, Blockly.FieldCheckbox.prototype.showEditor_ = function() {
    var e = !this.state_;
    if (this.sourceBlock_ && this.changeHandler_) {
        var t = this.changeHandler_(e);
        void 0 !== t && (e = t)
    }
    null !== e && (this.sourceBlock_.setShadow(!1), this.setValue(String(e).toUpperCase()))
}, Blockly.FieldColour = function(e, t) {
    Blockly.FieldColour.superClass_.constructor.call(this, "\xa0\xa0\xa0"), this.setChangeHandler(t), this.setValue(e)
}, goog.inherits(Blockly.FieldColour, Blockly.Field), Blockly.FieldColour.prototype.colours_ = null, Blockly.FieldColour.prototype.columns_ = 0, Blockly.FieldColour.prototype.init = function(e) {
    Blockly.FieldColour.superClass_.init.call(this, e), this.borderRect_.style.fillOpacity = 1, this.setValue(this.getValue())
}, Blockly.FieldColour.prototype.CURSOR = "default", Blockly.FieldColour.prototype.dispose = function() {
    Blockly.WidgetDiv.hideIfOwner(this), Blockly.FieldColour.superClass_.dispose.call(this)
}, Blockly.FieldColour.prototype.getValue = function() {
    return this.colour_
}, Blockly.FieldColour.prototype.setValue = function(e) {
    this.colour_ = e, this.borderRect_ && (this.borderRect_.style.fill = e), this.sourceBlock_ && this.sourceBlock_.rendered && (Blockly.Realtime.blockChanged(this.sourceBlock_), this.sourceBlock_.workspace.fireChangeEvent())
}, Blockly.FieldColour.prototype.getText = function() {
    var e = this.colour_,
        t = e.match(/^#(.)\1(.)\2(.)\3$/);
    return t && (e = "#" + t[1] + t[2] + t[3]), e
}, Blockly.FieldColour.COLOURS = goog.ui.ColorPicker.SIMPLE_GRID_COLORS, Blockly.FieldColour.COLUMNS = 7, Blockly.FieldColour.prototype.setColours = function(e) {
    return this.colours_ = e, this
}, Blockly.FieldColour.prototype.setColumns = function(e) {
    return this.columns_ = e, this
}, Blockly.FieldColour.prototype.showEditor_ = function() {
    Blockly.WidgetDiv.show(this, this.sourceBlock_.RTL, Blockly.FieldColour.widgetDispose_);
    var e = new goog.ui.ColorPicker;
    e.setSize(this.columns_ || Blockly.FieldColour.COLUMNS), e.setColors(this.colours_ || Blockly.FieldColour.COLOURS);
    var t = goog.dom.getViewportSize(),
        o = goog.style.getViewportPageOffset(document),
        n = this.getAbsoluteXY_(),
        i = this.getScaledBBox_();
    e.render(Blockly.WidgetDiv.DIV), e.setSelectedColor(this.getValue());
    var r = goog.style.getSize(e.getElement());
    n.y = n.y + r.height + i.height >= t.height + o.y ? n.y - (r.height - 1) : n.y + (i.height - 1), this.sourceBlock_.RTL ? (n.x += i.width, n.x -= r.width, n.x < o.x && (n.x = o.x)) : n.x > t.width + o.x - r.width && (n.x = t.width + o.x - r.width), Blockly.WidgetDiv.position(n.x, n.y, t, o, this.sourceBlock_.RTL);
    var s = this;
    Blockly.FieldColour.changeEventKey_ = goog.events.listen(e, goog.ui.ColorPicker.EventType.CHANGE, function(e) {
        if (e = e.target.getSelectedColor() || "#000000", Blockly.WidgetDiv.hide(), s.sourceBlock_ && s.changeHandler_) {
            var t = s.changeHandler_(e);
            void 0 !== t && (e = t)
        }
        null !== e && (s.sourceBlock_.setShadow(!1), s.setValue(e))
    })
}, Blockly.FieldColour.widgetDispose_ = function() {
    Blockly.FieldColour.changeEventKey_ && goog.events.unlistenByKey(Blockly.FieldColour.changeEventKey_)
}, Blockly.FieldDropdown = function(e, t) {
    this.menuGenerator_ = e, this.setChangeHandler(t), this.trimOptions_();
    var o = this.getOptions_()[0];
    this.value_ = o[1], Blockly.FieldDropdown.superClass_.constructor.call(this, o[0])
}, goog.inherits(Blockly.FieldDropdown, Blockly.Field), Blockly.FieldDropdown.CHECKMARK_OVERHANG = 25, Blockly.FieldDropdown.ARROW_CHAR = goog.userAgent.ANDROID ? "\u25bc" : "\u25be", Blockly.FieldDropdown.prototype.CURSOR = "default", Blockly.FieldDropdown.prototype.init = function(e) {
    this.sourceBlock_ || (this.arrow_ = Blockly.createSvgElement("tspan", {}, null), this.arrow_.appendChild(document.createTextNode(e.RTL ? Blockly.FieldDropdown.ARROW_CHAR + " " : " " + Blockly.FieldDropdown.ARROW_CHAR)), Blockly.FieldDropdown.superClass_.init.call(this, e), e = this.text_, this.text_ = null, this.setText(e))
}, Blockly.FieldDropdown.prototype.showEditor_ = function() {
    Blockly.WidgetDiv.show(this, this.sourceBlock_.RTL, null);
    var e = this,
        t = new goog.ui.Menu;
    t.setRightToLeft(this.sourceBlock_.RTL);
    for (var o = this.getOptions_(), n = 0; n < o.length; n++) {
        var i = o[n][1],
            r = new goog.ui.MenuItem(o[n][0]);
        r.setRightToLeft(this.sourceBlock_.RTL), r.setValue(i), r.setCheckable(!0), t.addChild(r, !0), r.setChecked(i == this.value_)
    }
    goog.events.listen(t, goog.ui.Component.EventType.ACTION, function(t) {
        if (t = t.target) {
            if (t = t.getValue(), e.sourceBlock_ && e.changeHandler_) {
                var o = e.changeHandler_(t);
                void 0 !== o && (t = o)
            }
            null !== t && (e.sourceBlock_.setShadow(!1), e.setValue(t))
        }
        Blockly.WidgetDiv.hideIfOwner(e)
    }), t.getHandler().listen(t.getElement(), goog.events.EventType.TOUCHSTART, function(e) {
        this.getOwnerControl(e.target).handleMouseDown(e)
    }), t.getHandler().listen(t.getElement(), goog.events.EventType.TOUCHEND, function(e) {
        this.getOwnerControl(e.target).performActionInternal(e)
    }), o = goog.dom.getViewportSize(), n = goog.style.getViewportPageOffset(document), i = this.getAbsoluteXY_(), r = this.getScaledBBox_(), t.render(Blockly.WidgetDiv.DIV);
    var s = t.getElement();
    Blockly.addClass_(s, "blocklyDropdownMenu");
    var a = goog.style.getSize(s);
    a.height = s.scrollHeight, i.y = i.y + a.height + r.height >= o.height + n.y ? i.y - (a.height + 2) : i.y + r.height, this.sourceBlock_.RTL ? (i.x += r.width, i.x += Blockly.FieldDropdown.CHECKMARK_OVERHANG, i.x < n.x + a.width && (i.x = n.x + a.width)) : (i.x -= Blockly.FieldDropdown.CHECKMARK_OVERHANG, i.x > o.width + n.x - a.width && (i.x = o.width + n.x - a.width)), Blockly.WidgetDiv.position(i.x, i.y, o, n, this.sourceBlock_.RTL), t.setAllowAutoFocus(!0), s.focus()
}, Blockly.FieldDropdown.prototype.trimOptions_ = function() {
    this.suffixField = this.prefixField = null;
    var e = this.menuGenerator_;
    if (goog.isArray(e) && !(2 > e.length)) {
        var t = e.map(function(e) {
                return e[0]
            }),
            o = Blockly.shortestStringLength(t),
            n = Blockly.commonWordPrefix(t, o),
            i = Blockly.commonWordSuffix(t, o);
        if ((n || i) && !(n + i >= o)) {
            for (n && (this.prefixField = t[0].substring(0, n - 1)), i && (this.suffixField = t[0].substr(1 - i)), t = [], o = 0; o < e.length; o++) {
                var r = e[o][0],
                    s = e[o][1],
                    r = r.substring(n, r.length - i);
                t[o] = [r, s]
            }
            this.menuGenerator_ = t
        }
    }
}, Blockly.FieldDropdown.prototype.getOptions_ = function() {
    return goog.isFunction(this.menuGenerator_) ? this.menuGenerator_.call(this) : this.menuGenerator_
}, Blockly.FieldDropdown.prototype.getValue = function() {
    return this.value_
}, Blockly.FieldDropdown.prototype.setValue = function(e) {
    this.value_ = e;
    for (var t = this.getOptions_(), o = 0; o < t.length; o++)
        if (t[o][1] == e) return void this.setText(t[o][0]);
    this.setText(e)
}, Blockly.FieldDropdown.prototype.setText = function(e) {
    this.sourceBlock_ && this.arrow_ && (this.arrow_.style.fill = Blockly.makeColour(this.sourceBlock_.getColour())), null !== e && e !== this.text_ && (this.text_ = e, this.updateTextNode_(), this.textElement_ && (this.sourceBlock_.RTL ? this.textElement_.insertBefore(this.arrow_, this.textElement_.firstChild) : this.textElement_.appendChild(this.arrow_)), this.sourceBlock_ && this.sourceBlock_.rendered && (this.sourceBlock_.render(), this.sourceBlock_.bumpNeighbours_(), this.sourceBlock_.workspace.fireChangeEvent()))
}, Blockly.FieldDropdown.prototype.dispose = function() {
    Blockly.WidgetDiv.hideIfOwner(this), Blockly.FieldDropdown.superClass_.dispose.call(this)
}, Blockly.FieldImage = function(e, t, o, n, i) {
    this.sourceBlock_ = null, this.height_ = Number(o), this.width_ = Number(t), this.size_ = new goog.math.Size(this.width_, this.height_ + 2 * Blockly.BlockSvg.INLINE_PADDING_Y), this.text_ = n || "", this.setValue(e), "function" == typeof i && (this.clickHandler_ = i)
}, goog.inherits(Blockly.FieldImage, Blockly.Field), Blockly.FieldImage.prototype.rectElement_ = null, Blockly.FieldImage.prototype.EDITABLE = !1, Blockly.FieldImage.prototype.init = function(e) {
    this.sourceBlock_ || (this.sourceBlock_ = e, this.fieldGroup_ = Blockly.createSvgElement("g", {}, null), this.visible_ || (this.fieldGroup_.style.display = "none"), this.imageElement_ = Blockly.createSvgElement("image", {
        height: this.height_ + "px",
        width: this.width_ + "px"
    }, this.fieldGroup_), this.setValue(this.src_), this.imageElement_.onclick = this.clickHandler_, null !== this.clickHandler_ && (this.imageElement_.style.cursor = "pointer"), goog.userAgent.GECKO && (this.rectElement_ = Blockly.createSvgElement("rect", {
        height: this.height_ + "px",
        width: this.width_ + "px",
        "fill-opacity": 0
    }, this.fieldGroup_)), e.getSvgRoot().appendChild(this.fieldGroup_), e = this.rectElement_ || this.imageElement_, e.tooltip = this.sourceBlock_, Blockly.Tooltip.bindMouseEvents(e))
}, Blockly.FieldImage.prototype.dispose = function() {
    goog.dom.removeNode(this.fieldGroup_), this.rectElement_ = this.imageElement_ = this.fieldGroup_ = null
}, Blockly.FieldImage.prototype.setTooltip = function(e) {
    (this.rectElement_ || this.imageElement_).tooltip = e
}, Blockly.FieldImage.prototype.getValue = function() {
    return this.src_
}, Blockly.FieldImage.prototype.setValue = function(e) {
    null !== e && (this.src_ = e, this.imageElement_ && this.imageElement_.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", goog.isString(e) ? e : ""))
}, Blockly.FieldImage.prototype.setText = function(e) {
    null !== e && (this.text_ = e)
}, Blockly.FieldImage.prototype.render_ = function() {}, Blockly.FieldTextArea = function(e, t) {
    Blockly.FieldTextArea.superClass_.constructor.call(this, e), this.changeHandler_ = t
}, goog.inherits(Blockly.FieldTextArea, Blockly.Field), Blockly.FieldTextArea.MAX_HEIGHT_ = 75, Blockly.FieldTextArea.prototype.clone = function() {
    return new Blockly.FieldTextArea(this.getText(), this.changeHandler_)
}, Blockly.FieldTextArea.prototype.CURSOR = "text", Blockly.FieldTextArea.prototype.dispose = function() {
    Blockly.WidgetDiv.hideIfOwner(this), Blockly.FieldTextArea.superClass_.dispose.call(this)
}, Blockly.FieldTextArea.prototype.setText = function(e) {
    null !== e && e !== this.text_ && (this.text_ = e, this.updateTextNode_(), this.sourceBlock_ && this.sourceBlock_.rendered && (this.sourceBlock_.render(), this.sourceBlock_.bumpNeighbours_(), this.sourceBlock_.workspace.fireChangeEvent()))
}, Blockly.FieldTextArea.prototype.updateTextNode_ = function() {
    var e = this.text_;
    if (null !== e) {
        if (this.changeHandler_) {
            var t = this.changeHandler_(e);
            null !== t && void 0 !== t && (e = t)
        }
        this.textElement_ && goog.dom.removeChildren(this.textElement_), this.sourceBlock_ && this.sourceBlock_.RTL && e && (e += "\u200f"), e || (e = Blockly.Field.NBSP);
        for (var t = 12.5, e = e.split(/\n/), o = Math.min(3, e.length), n = 0; o > n; n++) {
            var i = e[n],
                i = i.replace(/\s/g, Blockly.Field.NBSP);
            Blockly.createSvgElement("tspan", {
                x: 0,
                y: t
            }, this.textElement_).appendChild(document.createTextNode(i)), t += 20
        }
        this.size_.width = 0
    }
}, Blockly.FieldTextArea.prototype.render_ = function() {
    this.size_.width = this.textElement_.getBBox().width + 5, this.size_.height = Math.min(Blockly.FieldTextArea.MAX_HEIGHT_, 20 * (this.text_.split(/\n/).length || 1) + (Blockly.BlockSvg.SEP_SPACE_Y + 5)), this.borderRect_ && (this.borderRect_.setAttribute("width", this.size_.width + Blockly.BlockSvg.SEP_SPACE_X), this.borderRect_.setAttribute("height", this.size_.height - (Blockly.BlockSvg.SEP_SPACE_Y + 5)))
}, Blockly.FieldTextArea.prototype.init = function() {
    Blockly.Field.prototype.init.apply(this, arguments), Blockly.addClass_(this.fieldGroup_, "blocklyMonospaceText")
}, Blockly.FieldTextArea.prototype.showEditor_ = function(e) {
    var t = e || !1;
    if (!t && (goog.userAgent.MOBILE || goog.userAgent.ANDROID || goog.userAgent.IPAD)) e = window.prompt(Blockly.Msg.CHANGE_VALUE_TITLE, this.text_), this.changeHandler_ && (t = this.changeHandler_(e), void 0 !== t && (e = t)), null !== e && this.setText(e);
    else {
        Blockly.WidgetDiv.show(this, this.sourceBlock_.RTL, this.widgetDispose_());
        var o = Blockly.WidgetDiv.DIV;
        e = goog.dom.createDom("textarea", "blocklyHtmlInput"), e.setAttribute("spellcheck", !1), Blockly.FieldTextArea.htmlInput_ = e, e.style.resize = "none", e.style["line-height"] = "20px", e.style.height = "100%", o.appendChild(e), e.value = e.defaultValue = this.text_, e.oldValue_ = null, this.validate_(), this.resizeEditor_(), t || (e.focus(), e.select()), e.onKeyUpWrapper_ = Blockly.bindEvent_(e, "keyup", this, this.onHtmlInputChange_), e.onKeyPressWrapper_ = Blockly.bindEvent_(e, "keypress", this, this.onHtmlInputChange_), e.onKeyDownWrapper_ = Blockly.bindEvent_(e, "keydown", this, this.keyDownHandler_), t = this.sourceBlock_.workspace.getCanvas(), e.onWorkspaceChangeWrapper_ = Blockly.bindEvent_(t, "blocklyWorkspaceChange", this, this.resizeEditor_)
    }
}, Blockly.FieldTextArea.prototype.keyDownHandler_ = function(e) {
    return 9 == e.keyCode ? (e.preventDefault(), !1) : void 0
}, Blockly.FieldTextArea.prototype.onHtmlInputChange_ = function(e) {
    var t = Blockly.FieldTextArea.htmlInput_,
        o = t.value;
    9 == e.keyCode ? (e.shiftKey ? (e = $(t).caret() - 1, e > 0 && 9 == o.charCodeAt(e) && (t.value = o.substring(0, e) + o.substring(e + 1, o.length - 1), $(t).caret(e))) : $(t).caret("	"), this.resizeEditor_()) : 27 == e.keyCode ? (this.setText(t.defaultValue), Blockly.WidgetDiv.hide()) : (o !== t.oldValue_ ? (this.sourceBlock_.setShadow(!1), t.oldValue_ = o, this.setText(o), this.validate_()) : goog.userAgent.WEBKIT && this.sourceBlock_.render(), this.resizeEditor_())
}, Blockly.FieldTextArea.prototype.validate_ = function() {
    var e = !0;
    goog.asserts.assertObject(Blockly.FieldTextArea.htmlInput_);
    var t = Blockly.FieldTextArea.htmlInput_;
    this.changeHandler_ && (e = this.changeHandler_(t.value)), null === e ? Blockly.addClass_(t, "blocklyInvalidInput") : Blockly.removeClass_(t, "blocklyInvalidInput")
}, Blockly.FieldTextArea.prototype.resizeEditor_ = function() {
    var e = Blockly.WidgetDiv.DIV,
        t = this.fieldGroup_.getBBox();
    if (e.style.width = t.width * this.sourceBlock_.workspace.scale + "px", e.style.height = t.height * this.sourceBlock_.workspace.scale + "px", t = this.getAbsoluteXY_(), this.sourceBlock_ && this.sourceBlock_.RTL) {
        var o = this.getScaledBBox_();
        t.x += o.width, t.x -= e.offsetWidth
    }
    t.y += 1, goog.userAgent.GECKO && Blockly.WidgetDiv.DIV.style.top && (--t.x, --t.y), goog.userAgent.WEBKIT && (t.y -= 3), e.style.left = t.x + "px", e.style.top = t.y + "px"
}, Blockly.FieldTextArea.prototype.widgetDispose_ = function() {
    var e = this;
    return function() {
        var t = Blockly.FieldTextArea.htmlInput_,
            o = t.value;
        e.changeHandler_ && (o = e.changeHandler_(o), null === o && (o = t.defaultValue)), e.setText(o), e.sourceBlock_.rendered && e.sourceBlock_.render(), Blockly.unbindEvent_(t.onKeyUpWrapper_), Blockly.unbindEvent_(t.onKeyPressWrapper_), Blockly.unbindEvent_(t.onWorkspaceChangeWrapper_), Blockly.unbindEvent_(t.onKeyDownWrapper_), Blockly.FieldTextArea.htmlInput_ = null, t = Blockly.WidgetDiv.DIV.style, t.width = "auto", t.height = "auto", t.fontSize = ""
    }
}, Blockly.Variables = {}, Blockly.Variables.NAME_TYPE = "VARIABLE", Blockly.Variables.allVariables = function(e) {
    var t;
    if (e.getDescendants) t = e.getDescendants();
    else {
        if (!e.getAllBlocks) throw "Not Block or Workspace: " + e;
        t = e.getAllBlocks()
    }
    e = Object.create(null);
    for (var o = 0; o < t.length; o++)
        if (t[o].getVars)
            for (var n = t[o].getVars(), i = 0; i < n.length; i++) {
                var r = n[i];
                r && (e[r.toLowerCase()] = r)
            }
        t = [];
    for (var s in e) t.push(e[s]);
    return t
}, Blockly.Variables.renameVariable = function(e, t, o) {
    o = o.getAllBlocks();
    for (var n = 0; n < o.length; n++) o[n].renameVar && o[n].renameVar(e, t)
}, Blockly.Variables.flyoutCategory = function(e) {
    e = Blockly.Variables.allVariables(e), e.sort(goog.string.caseInsensitiveCompare), goog.array.remove(e, Blockly.Msg.VARIABLES_DEFAULT_NAME), e.unshift(Blockly.Msg.VARIABLES_DEFAULT_NAME);
    for (var t = [], o = 0; o < e.length; o++) {
        if (Blockly.Blocks.variables_set) {
            var n = goog.dom.createDom("block");
            n.setAttribute("type", "variables_set"), Blockly.Blocks.variables_get && n.setAttribute("gap", 8);
            var i = goog.dom.createDom("field", null, e[o]);
            i.setAttribute("name", "VAR"), n.appendChild(i), t.push(n)
        }
        Blockly.Blocks.variables_get && (n = goog.dom.createDom("block"), n.setAttribute("type", "variables_get"), Blockly.Blocks.variables_set && n.setAttribute("gap", 24), i = goog.dom.createDom("field", null, e[o]), i.setAttribute("name", "VAR"), n.appendChild(i), t.push(n))
    }
    return t
}, Blockly.Variables.generateUniqueName = function(e) {
    e = Blockly.Variables.allVariables(e);
    var t = "";
    if (e.length)
        for (var o = 1, n = 0, i = "ijkmnopqrstuvwxyzabcdefgh".charAt(n); !t;) {
            for (var r = !1, s = 0; s < e.length; s++)
                if (e[s].toLowerCase() == i) {
                    r = !0;
                    break
                }
            r ? (n++, 25 == n && (n = 0, o++), i = "ijkmnopqrstuvwxyzabcdefgh".charAt(n), o > 1 && (i += o)) : t = i
        } else t = "i";
    return t
}, Blockly.FieldVariable = function(e, t) {
    Blockly.FieldVariable.superClass_.constructor.call(this, Blockly.FieldVariable.dropdownCreate, null), this.setChangeHandler(t), this.setValue(e || "")
}, goog.inherits(Blockly.FieldVariable, Blockly.FieldDropdown), Blockly.FieldVariable.prototype.setChangeHandler = function(e) {
    Blockly.FieldVariable.superClass_.setChangeHandler.call(this, e ? function(t) {
        var o = e.call(this, t);
        if (null === o) var n = o;
        else void 0 === o && (o = t), n = Blockly.FieldVariable.dropdownChange.call(this, o), void 0 !== n && (n = o);
        return n === t ? void 0 : n
    } : Blockly.FieldVariable.dropdownChange)
}, Blockly.FieldVariable.prototype.init = function(e) {
    this.sourceBlock_ || (this.getValue() || this.setValue(Blockly.Variables.generateUniqueName(e.isInFlyout ? e.workspace.targetWorkspace : e.workspace)), Blockly.FieldVariable.superClass_.init.call(this, e))
}, Blockly.FieldVariable.prototype.getValue = function() {
    return this.getText()
}, Blockly.FieldVariable.prototype.setValue = function(e) {
    this.value_ = e, this.setText(e)
}, Blockly.FieldVariable.dropdownCreate = function() {
    var e = this.sourceBlock_ && this.sourceBlock_.workspace ? Blockly.Variables.allVariables(this.sourceBlock_.workspace) : [],
        t = this.getText();
    t && -1 == e.indexOf(t) && e.push(t), e.sort(goog.string.caseInsensitiveCompare), e.push(Blockly.Msg.RENAME_VARIABLE), e.push(Blockly.Msg.NEW_VARIABLE);
    for (var t = [], o = 0; o < e.length; o++) t[o] = [e[o], e[o]];
    return t
}, Blockly.FieldVariable.dropdownChange = function(e) {
    function t(e, t) {
        Blockly.hideChaff();
        var o = window.prompt(e, t);
        return o && (o = o.replace(/[\s\xa0]+/g, " ").replace(/^ | $/g, ""), o == Blockly.Msg.RENAME_VARIABLE || o == Blockly.Msg.NEW_VARIABLE) && (o = null), o
    }
    var o = this.sourceBlock_.workspace;
    if (e == Blockly.Msg.RENAME_VARIABLE) {
        var n = this.getText();
        return (e = t(Blockly.Msg.RENAME_VARIABLE_TITLE.replace("%1", n), n)) && Blockly.Variables.renameVariable(n, e, o), null
    }
    return e == Blockly.Msg.NEW_VARIABLE ? (e = t(Blockly.Msg.NEW_VARIABLE_TITLE, "")) ? (Blockly.Variables.renameVariable(e, e, o), e) : null : void 0
}, Blockly.Generator = function(e) {
    this.name_ = e, this.FUNCTION_NAME_PLACEHOLDER_REGEXP_ = new RegExp(this.FUNCTION_NAME_PLACEHOLDER_, "g")
}, Blockly.Generator.NAME_TYPE = "generated_function", Blockly.Generator.prototype.INFINITE_LOOP_TRAP = null, Blockly.Generator.prototype.STATEMENT_PREFIX = null, Blockly.Generator.prototype.workspaceToCode = function(e) {
    e || (console.warn("No workspace specified in workspaceToCode call.  Guessing."), e = Blockly.getMainWorkspace());
    var t = [];
    this.init(e), e = e.getTopBlocks(!0);
    for (var o, n = 0; o = e[n]; n++) {
        var i = this.blockToCode(o);
        goog.isArray(i) && (i = i[0]), i && (o.outputConnection && this.scrubNakedValue && (i = this.scrubNakedValue(i)), t.push(i))
    }
    return t = t.join("\n"), t = this.finish(t), t = t.replace(/^\s+\n/, ""), t = t.replace(/\n\s+$/, "\n"), t = t.replace(/[ \t]+\n/g, "\n")
}, Blockly.Generator.prototype.prefixLines = function(e, t) {
    return t + e.replace(/\n(.)/g, "\n" + t + "$1")
}, Blockly.Generator.prototype.allNestedComments = function(e) {
    var t = [];
    e = e.getDescendants();
    for (var o = 0; o < e.length; o++) {
        var n = e[o].getCommentText();
        n && t.push(n)
    }
    return t.length && t.push(""), t.join("\n")
}, Blockly.Generator.prototype.blockToCode = function(e) {
    if (!e) return "";
    if (e.disabled) return this.blockToCode(e.getNextBlock());
    var t = this[e.type];
    return goog.asserts.assertFunction(t, 'Language "%s" does not know how to generate code for block type "%s".', this.name_, e.type), t = t.call(e, e), goog.isArray(t) ? [this.scrub_(e, t[0]), t[1]] : goog.isString(t) ? (this.STATEMENT_PREFIX && (t = this.STATEMENT_PREFIX.replace(/%1/g, "'" + e.id + "'") + t), this.scrub_(e, t)) : null === t ? "" : void goog.asserts.fail("Invalid code generated: %s", t)
}, Blockly.Generator.prototype.valueToCode = function(e, t, o) {
    if (isNaN(o) && goog.asserts.fail('Expecting valid order from block "%s".', e.type), e = e.getInputTargetBlock(t), !e) return "";
    var n = this.blockToCode(e);
    return "" === n ? "" : (goog.asserts.assertArray(n, 'Expecting tuple from value block "%s".', e.type), t = n[0], n = n[1], isNaN(n) && goog.asserts.fail('Expecting valid order from value block "%s".', e.type), t && n >= o && (o != n || 0 != o && 99 != o) && (t = "(" + t + ")"), t)
}, Blockly.Generator.prototype.statementToCode = function(e, t) {
    var o = e.getInputTargetBlock(t),
        n = this.blockToCode(o);
    return goog.asserts.assertString(n, 'Expecting code from statement block "%s".', o && o.type), n && (n = this.prefixLines(n, this.INDENT)), n
}, Blockly.Generator.prototype.addLoopTrap = function(e, t) {
    return this.INFINITE_LOOP_TRAP && (e = this.INFINITE_LOOP_TRAP.replace(/%1/g, "'" + t + "'") + e), this.STATEMENT_PREFIX && (e += this.prefixLines(this.STATEMENT_PREFIX.replace(/%1/g, "'" + t + "'"), this.INDENT)),
        e
}, Blockly.Generator.prototype.INDENT = "  ", Blockly.Generator.prototype.RESERVED_WORDS_ = "", Blockly.Generator.prototype.addReservedWords = function(e) {
    this.RESERVED_WORDS_ += e + ","
}, Blockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_ = "{leCUI8hutHZI4480Dc}", Blockly.Generator.prototype.provideFunction_ = function(e, t) {
    if (!this.definitions_[e]) {
        var o = this.variableDB_.getDistinctName(e, this.NAME_TYPE);
        this.functionNames_[e] = o, this.definitions_[e] = t.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_, o)
    }
    return this.functionNames_[e]
}, Blockly.Names = function(e, t) {
    if (this.variablePrefix_ = t || "", this.reservedDict_ = Object.create(null), e)
        for (var o = e.split(","), n = 0; n < o.length; n++) this.reservedDict_[o[n]] = !0;
    this.reset()
}, Blockly.Names.prototype.reset = function() {
    this.db_ = Object.create(null), this.dbReverse_ = Object.create(null)
}, Blockly.Names.prototype.getName = function(e, t) {
    var o = e.toLowerCase() + "_" + t,
        n = t == Blockly.Variables.NAME_TYPE ? this.variablePrefix_ : "";
    if (o in this.db_) return n + this.db_[o];
    var i = this.getDistinctName(e, t);
    return this.db_[o] = i.substr(n.length), i
}, Blockly.Names.prototype.getDistinctName = function(e, t) {
    for (var o = this.safeName_(e), n = ""; this.dbReverse_[o + n] || o + n in this.reservedDict_;) n = n ? n + 1 : 2;
    return o += n, this.dbReverse_[o] = !0, (t == Blockly.Variables.NAME_TYPE ? this.variablePrefix_ : "") + o
}, Blockly.Names.prototype.safeName_ = function(e) {
    return e ? (e = encodeURI(e.replace(/ /g, "_")).replace(/[^\w]/g, "_"), -1 != "0123456789".indexOf(e[0]) && (e = "my_" + e)) : e = "unnamed", e
}, Blockly.Names.equals = function(e, t) {
    return e.toLowerCase() == t.toLowerCase()
}, Blockly.Procedures = {}, Blockly.Procedures.NAME_TYPE = "PROCEDURE", Blockly.Procedures.allProcedures = function(e) {
    e = e.getAllBlocks();
    for (var t = [], o = [], n = 0; n < e.length; n++)
        if (e[n].getProcedureDef) {
            var i = e[n].getProcedureDef();
            i && (i[2] ? t.push(i) : o.push(i))
        }
    return o.sort(Blockly.Procedures.procTupleComparator_), t.sort(Blockly.Procedures.procTupleComparator_), [o, t]
}, Blockly.Procedures.procTupleComparator_ = function(e, t) {
    return e[0].toLowerCase().localeCompare(t[0].toLowerCase())
}, Blockly.Procedures.findLegalName = function(e, t) {
    if (t.isInFlyout) return e;
    for (; !Blockly.Procedures.isLegalName(e, t.workspace, t);) {
        var o = e.match(/^(.*?)(\d+)$/);
        e = o ? o[1] + (parseInt(o[2], 10) + 1) : e + "2"
    }
    return e
}, Blockly.Procedures.isLegalName = function(e, t, o) {
    for (var n = t.getAllBlocks(), i = 0; i < n.length; i++)
        if (n[i] != o && n[i].getProcedureDef) {
            var r = n[i].getProcedureDef();
            if (Blockly.Names.equals(r[0], e)) return !1
        }
    return -1 == Blockly.Variables.allVariables(t).indexOf(e)
}, Blockly.Procedures.rename = function(e) {
    e = e.replace(/^[\s\xa0]+|[\s\xa0]+$/g, ""), e = Blockly.Procedures.findLegalName(e, this.sourceBlock_);
    for (var t = this.sourceBlock_.workspace.getAllBlocks(), o = 0; o < t.length; o++) t[o].renameProcedure && t[o].renameProcedure(this.text_, e);
    return e
}, Blockly.Procedures.flyoutCategory = function(e) {
    function t(e, t) {
        for (var n = 0; n < e.length; n++) {
            var i = e[n][0],
                r = e[n][1],
                s = goog.dom.createDom("block");
            s.setAttribute("type", t), s.setAttribute("gap", 16);
            var a = goog.dom.createDom("mutation");
            for (a.setAttribute("name", i), s.appendChild(a), i = 0; i < r.length; i++) {
                var l = goog.dom.createDom("arg");
                l.setAttribute("name", r[i]), a.appendChild(l)
            }
            o.push(s)
        }
    }
    var o = [];
    if (Blockly.Blocks.procedures_defnoreturn) {
        var n = goog.dom.createDom("block");
        n.setAttribute("type", "procedures_defnoreturn"), n.setAttribute("gap", 16), o.push(n)
    }
    return Blockly.Blocks.procedures_defreturn && (n = goog.dom.createDom("block"), n.setAttribute("type", "procedures_defreturn"), n.setAttribute("gap", 16), o.push(n)), Blockly.Blocks.procedures_ifreturn && (n = goog.dom.createDom("block"), n.setAttribute("type", "procedures_ifreturn"), n.setAttribute("gap", 16), o.push(n)), o.length && o[o.length - 1].setAttribute("gap", 24), e = Blockly.Procedures.allProcedures(e), t(e[0], "procedures_callnoreturn"), t(e[1], "procedures_callreturn"), o
}, Blockly.Procedures.getCallers = function(e, t) {
    for (var o = [], n = t.getAllBlocks(), i = 0; i < n.length; i++)
        if (n[i].getProcedureCall) {
            var r = n[i].getProcedureCall();
            r && Blockly.Names.equals(r, e) && o.push(n[i])
        }
    return o
}, Blockly.Procedures.disposeCallers = function(e, t) {
    for (var o = Blockly.Procedures.getCallers(e, t), n = 0; n < o.length; n++) o[n].dispose(!0, !1)
}, Blockly.Procedures.mutateCallers = function(e, t, o, n) {
    for (e = Blockly.Procedures.getCallers(e, t), t = 0; t < e.length; t++) e[t].setProcedureParameters(o, n)
}, Blockly.Procedures.getDefinition = function(e, t) {
    for (var o = t.getAllBlocks(), n = 0; n < o.length; n++)
        if (o[n].getProcedureDef) {
            var i = o[n].getProcedureDef();
            if (i && Blockly.Names.equals(i[0], e)) return o[n]
        }
    return null
}, Blockly.Flyout = function(e) {
    var t = this;
    e.getMetrics = function() {
        return t.getMetrics_()
    }, e.setMetrics = function(e) {
        return t.setMetrics_(e)
    }, this.workspace_ = new Blockly.WorkspaceSvg(e), this.workspace_.isFlyout = !0, this.RTL = !!e.RTL, this.eventWrappers_ = [], this.buttons_ = [], this.listeners_ = []
}, Blockly.Flyout.prototype.autoClose = !0, Blockly.Flyout.prototype.CORNER_RADIUS = 8, Blockly.Flyout.prototype.SCROLLBAR_PADDING = 2, Blockly.Flyout.prototype.width_ = 0, Blockly.Flyout.prototype.height_ = 0, Blockly.Flyout.prototype.createDom = function() {
    return this.svgGroup_ = Blockly.createSvgElement("g", {
        "class": "blocklyFlyout"
    }, null), this.svgBackground_ = Blockly.createSvgElement("path", {
        "class": "blocklyFlyoutBackground"
    }, this.svgGroup_), this.svgGroup_.appendChild(this.workspace_.createDom()), this.svgGroup_
}, Blockly.Flyout.prototype.init = function(e) {
    this.targetWorkspace_ = e, this.workspace_.targetWorkspace = e, this.scrollbar_ = new Blockly.Scrollbar(this.workspace_, !1, !1), this.hide(), Array.prototype.push.apply(this.eventWrappers_, Blockly.bindEvent_(this.svgGroup_, "wheel", this, this.wheel_)), this.autoClose || Array.prototype.push.apply(this.eventWrappers_, Blockly.bindEvent_(this.targetWorkspace_.getCanvas(), "blocklyWorkspaceChange", this, this.filterForCapacity_)), Array.prototype.push.apply(this.eventWrappers_, Blockly.bindEvent_(this.svgGroup_, "mousedown", this, this.onMouseDown_))
}, Blockly.Flyout.prototype.dispose = function() {
    this.hide(), Blockly.unbindEvent_(this.eventWrappers_), this.scrollbar_ && (this.scrollbar_.dispose(), this.scrollbar_ = null), this.workspace_ && (this.workspace_.targetWorkspace = null, this.workspace_.dispose(), this.workspace_ = null), this.svgGroup_ && (goog.dom.removeNode(this.svgGroup_), this.svgGroup_ = null), this.targetWorkspace_ = this.svgBackground_ = null
}, Blockly.Flyout.prototype.getMetrics_ = function() {
    if (!this.isVisible()) return null;
    var e = this.height_ - 2 * this.SCROLLBAR_PADDING,
        t = this.width_;
    try {
        var o = this.workspace_.getCanvas().getBBox()
    } catch (n) {
        o = {
            height: 0,
            y: 0
        }
    }
    return {
        viewHeight: e,
        viewWidth: t,
        contentHeight: (o.height + o.y) * this.workspace_.scale,
        viewTop: -this.workspace_.scrollY,
        contentTop: 0,
        absoluteTop: this.SCROLLBAR_PADDING,
        absoluteLeft: 0
    }
}, Blockly.Flyout.prototype.setMetrics_ = function(e) {
    var t = this.getMetrics_();
    t && (goog.isNumber(e.y) && (this.workspace_.scrollY = -t.contentHeight * e.y - t.contentTop), this.workspace_.translate(0, this.workspace_.scrollY + t.absoluteTop))
}, Blockly.Flyout.prototype.position = function() {
    if (this.isVisible()) {
        var e = this.targetWorkspace_.getMetrics();
        if (e) {
            var t = this.width_ - this.CORNER_RADIUS;
            this.RTL && (t *= -1);
            var o = ["M " + (this.RTL ? this.width_ : 0) + ",0"];
            o.push("h", t), o.push("a", this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, this.RTL ? 0 : 1, this.RTL ? -this.CORNER_RADIUS : this.CORNER_RADIUS, this.CORNER_RADIUS), o.push("v", Math.max(0, e.viewHeight - 2 * this.CORNER_RADIUS)), o.push("a", this.CORNER_RADIUS, this.CORNER_RADIUS, 0, 0, this.RTL ? 0 : 1, this.RTL ? this.CORNER_RADIUS : -this.CORNER_RADIUS, this.CORNER_RADIUS), o.push("h", -t), o.push("z"), this.svgBackground_.setAttribute("d", o.join(" ")), t = e.absoluteLeft, this.RTL && (t += e.viewWidth, t -= this.width_), this.svgGroup_.setAttribute("transform", "translate(" + t + "," + e.absoluteTop + ")"), this.height_ = e.viewHeight, this.scrollbar_ && this.scrollbar_.resize()
        }
    }
}, Blockly.Flyout.prototype.scrollToTop = function() {
    this.scrollbar_.set(0)
}, Blockly.Flyout.prototype.wheel_ = function(e) {
    var t = e.deltaY;
    if (t) {
        goog.userAgent.GECKO && (t *= 10);
        var o = this.getMetrics_(),
            t = o.viewTop + t,
            t = Math.min(t, o.contentHeight - o.viewHeight),
            t = Math.max(t, 0);
        this.scrollbar_.set(t), e.preventDefault(), e.stopPropagation()
    }
}, Blockly.Flyout.prototype.isVisible = function() {
    return this.svgGroup_ && "block" == this.svgGroup_.style.display
}, Blockly.Flyout.prototype.hide = function() {
    if (this.isVisible()) {
        this.svgGroup_.style.display = "none";
        for (var e, t = 0; e = this.listeners_[t]; t++) Blockly.unbindEvent_(e);
        this.listeners_.length = 0, this.reflowWrapper_ && (Blockly.unbindEvent_(this.reflowWrapper_), this.reflowWrapper_ = null)
    }
}, Blockly.Flyout.prototype.show = function(e) {
    this.hide();
    for (var t, o = this.workspace_.getTopBlocks(!1), n = 0; t = o[n]; n++) t.workspace == this.workspace_ && t.dispose(!1, !1);
    for (var i, n = 0; i = this.buttons_[n]; n++) goog.dom.removeNode(i);
    this.buttons_.length = 0, e == Blockly.Variables.NAME_TYPE ? e = Blockly.Variables.flyoutCategory(this.workspace_.targetWorkspace) : e == Blockly.Procedures.NAME_TYPE && (e = Blockly.Procedures.flyoutCategory(this.workspace_.targetWorkspace));
    var r = this.CORNER_RADIUS;
    this.svgGroup_.style.display = "block";
    for (var o = [], s = [], n = 0; i = e[n]; n++) i.tagName && "BLOCK" == i.tagName.toUpperCase() && (t = Blockly.Xml.domToBlock(this.workspace_, i), o.push(t), t = parseInt(i.getAttribute("gap"), 10), s.push(t || 3 * r));
    for (e = r, n = 0; t = o[n]; n++) {
        i = t.getDescendants();
        for (var a, l = 0; a = i[l]; l++) a.isInFlyout = !0, a.setCommentText(null);
        t.render(), l = t.getSvgRoot(), i = t.getHeightWidth(), t.moveBy(this.RTL ? 0 : r / this.workspace_.scale + Blockly.BlockSvg.TAB_WIDTH, e), e += i.height + s[n], i = Blockly.createSvgElement("rect", {
            "fill-opacity": 0
        }, null), this.workspace_.getCanvas().insertBefore(i, t.getSvgRoot()), t.flyoutRect_ = i, this.buttons_[n] = i, this.autoClose ? this.listeners_.push(Blockly.bindEvent_(l, "mousedown", null, this.createBlockFunc_(t))) : this.listeners_.push(Blockly.bindEvent_(l, "mousedown", null, this.blockMouseDown_(t))), this.listeners_.push(Blockly.bindEvent_(l, "mouseover", t, t.addSelect)), this.listeners_.push(Blockly.bindEvent_(l, "mouseout", t, t.removeSelect)), this.listeners_.push(Blockly.bindEvent_(i, "mousedown", null, this.createBlockFunc_(t))), this.listeners_.push(Blockly.bindEvent_(i, "mouseover", t, t.addSelect)), this.listeners_.push(Blockly.bindEvent_(i, "mouseout", t, t.removeSelect))
    }
    this.listeners_.push(Blockly.bindEvent_(this.svgBackground_, "mouseover", this, function(e) {
        e = this.workspace_.getTopBlocks(!1);
        for (var t, o = 0; t = e[o]; o++) t.removeSelect()
    })), this.width_ = 0, this.reflow(), this.filterForCapacity_(), Blockly.fireUiEventNow(window, "resize"), this.reflowWrapper_ = Blockly.bindEvent_(this.workspace_.getCanvas(), "blocklyWorkspaceChange", this, this.reflow), this.workspace_.fireChangeEvent()
}, Blockly.Flyout.prototype.reflow = function() {
    this.workspace_.scale = this.targetWorkspace_.scale;
    for (var e, t = 0, o = this.CORNER_RADIUS, n = this.workspace_.getTopBlocks(!1), i = 0; e = n[i]; i++) {
        var r = e.getHeightWidth().width;
        e.outputConnection && (r -= Blockly.BlockSvg.TAB_WIDTH), t = Math.max(t, r)
    }
    if (t += Blockly.BlockSvg.TAB_WIDTH, t *= this.workspace_.scale, t += 1.5 * o + Blockly.Scrollbar.scrollbarThickness, this.width_ != t) {
        for (i = 0; e = n[i]; i++) {
            if (r = e.getHeightWidth(), this.RTL) {
                var s = e.getRelativeToSurfaceXY().x,
                    a = t - o,
                    a = a / this.workspace_.scale,
                    a = a - Blockly.BlockSvg.TAB_WIDTH;
                e.moveBy(a - s, 0)
            }
            e.flyoutRect_ && (e.flyoutRect_.setAttribute("width", r.width), e.flyoutRect_.setAttribute("height", r.height), s = e.outputConnection ? Blockly.BlockSvg.TAB_WIDTH : 0, a = e.getRelativeToSurfaceXY(), e.flyoutRect_.setAttribute("x", this.RTL ? a.x - r.width + s : a.x - s), e.flyoutRect_.setAttribute("y", a.y))
        }
        this.width_ = t, Blockly.fireUiEvent(window, "resize")
    }
}, Blockly.Flyout.prototype.blockMouseDown_ = function(e) {
    var t = this;
    return function(o) {
        Blockly.terminateDrag_(), Blockly.hideChaff(), Blockly.isRightButton(o) ? e.showContextMenu_(o) : (Blockly.removeAllRanges(), Blockly.Css.setCursor(Blockly.Css.Cursor.CLOSED), Blockly.Flyout.startDownEvent_ = o, Blockly.Flyout.startBlock_ = e, Blockly.Flyout.startFlyout_ = t, Blockly.Flyout.onMouseUpWrapper_ = Blockly.bindEvent_(document, "mouseup", this, Blockly.terminateDrag_), Blockly.Flyout.onMouseMoveBlockWrapper_ = Blockly.bindEvent_(document, "mousemove", this, t.onMouseMoveBlock_)), o.stopPropagation()
    }
}, Blockly.Flyout.prototype.onMouseDown_ = function(e) {
    Blockly.isRightButton(e) || (Blockly.hideChaff(!0), Blockly.Flyout.terminateDrag_(), this.startDragMouseY_ = e.clientY, Blockly.Flyout.onMouseMoveWrapper_ = Blockly.bindEvent_(document, "mousemove", this, this.onMouseMove_), Blockly.Flyout.onMouseUpWrapper_ = Blockly.bindEvent_(document, "mouseup", this, Blockly.Flyout.terminateDrag_), e.preventDefault(), e.stopPropagation())
}, Blockly.Flyout.prototype.onMouseMove_ = function(e) {
    var t = e.clientY - this.startDragMouseY_;
    this.startDragMouseY_ = e.clientY, e = this.getMetrics_(), t = e.viewTop - t, t = Math.min(t, e.contentHeight - e.viewHeight), t = Math.max(t, 0), this.scrollbar_.set(t)
}, Blockly.Flyout.prototype.onMouseMoveBlock_ = function(e) {
    if ("mousemove" == e.type && 1 >= e.clientX && 0 == e.clientY && 0 == e.button) e.stopPropagation();
    else {
        Blockly.removeAllRanges();
        var t = e.clientX - Blockly.Flyout.startDownEvent_.clientX;
        e = e.clientY - Blockly.Flyout.startDownEvent_.clientY, Math.sqrt(t * t + e * e) > Blockly.DRAG_RADIUS && Blockly.Flyout.startFlyout_.createBlockFunc_(Blockly.Flyout.startBlock_)(Blockly.Flyout.startDownEvent_)
    }
}, Blockly.Flyout.prototype.createBlockFunc_ = function(e) {
    var t = this,
        o = this.targetWorkspace_;
    return function(n) {
        if (!Blockly.isRightButton(n) && !e.disabled) {
            var i = Blockly.Xml.blockToDom_(e),
                i = Blockly.Xml.domToBlock(o, i),
                r = e.getSvgRoot();
            if (!r) throw "originBlock is not rendered.";
            if (r = Blockly.getSvgXY_(r, o), t.RTL) {
                var s = o.getMetrics().viewWidth - t.width_;
                r.x += s / o.scale - s
            } else r.x += t.workspace_.scrollX / t.workspace_.scale - t.workspace_.scrollX;
            if (r.y += t.workspace_.scrollY / t.workspace_.scale - t.workspace_.scrollY, s = i.getSvgRoot(), !s) throw "block is not rendered.";
            s = Blockly.getSvgXY_(s, o), s.x += o.scrollX / o.scale - o.scrollX, s.y += o.scrollY / o.scale - o.scrollY, o.toolbox_ && !o.scrollbar && (s.x += o.toolbox_.width / o.scale), i.moveBy(r.x - s.x, r.y - s.y), t.autoClose ? t.hide() : t.filterForCapacity_(), i.onMouseDown_(n)
        }
    }
}, Blockly.Flyout.prototype.filterForCapacity_ = function() {
    for (var e, t = this.targetWorkspace_.remainingCapacity(), o = this.workspace_.getTopBlocks(!1), n = 0; e = o[n]; n++) e.getDescendants().length > t && e.setDisabled(!0)
}, Blockly.Flyout.prototype.getRect = function() {
    var e = Blockly.mainWorkspace,
        t = Blockly.getSvgXY_(this.svgGroup_, e).x;
    return this.RTL || (t -= 1e9), new goog.math.Rect(t, -1e9, 1e9 + this.width_ * (this.targetWorkspace_ == e ? 1 : e.scale), 2e9)
}, Blockly.Flyout.terminateDrag_ = function() {
    Blockly.Flyout.onMouseUpWrapper_ && (Blockly.unbindEvent_(Blockly.Flyout.onMouseUpWrapper_), Blockly.Flyout.onMouseUpWrapper_ = null), Blockly.Flyout.onMouseMoveBlockWrapper_ && (Blockly.unbindEvent_(Blockly.Flyout.onMouseMoveBlockWrapper_), Blockly.Flyout.onMouseMoveBlockWrapper_ = null), Blockly.Flyout.onMouseMoveWrapper_ && (Blockly.unbindEvent_(Blockly.Flyout.onMouseMoveWrapper_), Blockly.Flyout.onMouseMoveWrapper_ = null), Blockly.Flyout.onMouseUpWrapper_ && (Blockly.unbindEvent_(Blockly.Flyout.onMouseUpWrapper_), Blockly.Flyout.onMouseUpWrapper_ = null), Blockly.Flyout.startDownEvent_ = null, Blockly.Flyout.startBlock_ = null, Blockly.Flyout.startFlyout_ = null
}, Blockly.Toolbox = function(e) {
    this.workspace_ = e
}, Blockly.Toolbox.prototype.width = 0, Blockly.Toolbox.prototype.selectedOption_ = null, Blockly.Toolbox.prototype.lastCategory_ = null, Blockly.Toolbox.prototype.CONFIG_ = {
    indentWidth: 19,
    cssRoot: "blocklyTreeRoot",
    cssHideRoot: "blocklyHidden",
    cssItem: "",
    cssTreeRow: "blocklyTreeRow",
    cssItemLabel: "blocklyTreeLabel",
    cssTreeIcon: "blocklyTreeIcon",
    cssExpandedFolderIcon: "blocklyTreeIconOpen",
    cssFileIcon: "blocklyTreeIconNone",
    cssSelectedRow: "blocklyTreeSelected"
}, Blockly.Toolbox.prototype.init = function() {
    var e = this.workspace_;
    this.HtmlDiv = goog.dom.createDom("div", "blocklyToolboxDiv"), this.HtmlDiv.setAttribute("dir", e.RTL ? "RTL" : "LTR"), document.body.appendChild(this.HtmlDiv), Blockly.bindEvent_(this.HtmlDiv, "mousedown", this, function(e) {
        Blockly.isRightButton(e) || e.target == this.HtmlDiv ? Blockly.hideChaff(!1) : Blockly.hideChaff(!0)
    }), this.flyout_ = new Blockly.Flyout({
        disabledPatternId: e.options.disabledPatternId,
        parentWorkspace: e,
        RTL: e.RTL,
        svg: e.options.svg
    }), goog.dom.insertSiblingAfter(this.flyout_.createDom(), e.svgGroup_), this.flyout_.init(e), this.CONFIG_.cleardotPath = e.options.pathToMedia + "1x1.gif", this.CONFIG_.cssCollapsedFolderIcon = "blocklyTreeIconClosed" + (e.RTL ? "Rtl" : "Ltr");
    var t = new Blockly.Toolbox.TreeControl(this, this.CONFIG_);
    this.tree_ = t, t.setShowRootNode(!1), t.setShowLines(!1), t.setShowExpandIcons(!1), t.setSelectedItem(null), this.hasColours_ = !1, this.populate_(e.options.languageTree), t.render(this.HtmlDiv), this.hasColours_ && this.addColour_(t), this.position()
}, Blockly.Toolbox.prototype.dispose = function() {
    this.flyout_.dispose(), this.tree_.dispose(), goog.dom.removeNode(this.HtmlDiv), this.lastCategory_ = this.workspace_ = null
}, Blockly.Toolbox.prototype.position = function() {
    var e = this.HtmlDiv;
    if (e) {
        var t = this.workspace_.options.svg,
            o = goog.style.getPageOffset(t),
            t = Blockly.svgSize(t);
        e.style.left = this.workspace_.RTL ? o.x + t.width - e.offsetWidth + "px" : o.x + "px", e.style.height = t.height + "px", e.style.top = o.y + "px", this.width = e.offsetWidth, this.workspace_.RTL || --this.width, this.flyout_.position()
    }
}, Blockly.Toolbox.prototype.populate_ = function(e) {
    function t(e, i) {
        for (var r, s = 0; r = e.childNodes[s]; s++)
            if (r.tagName) switch (r.tagName.toUpperCase()) {
                case "CATEGORY":
                    var a = o.createNode(r.getAttribute("name"));
                    a.blocks = [], i.add(a);
                    var l = r.getAttribute("custom");
                    l ? a.blocks = l : t(r, a), l = r.getAttribute("colour"), goog.isString(l) ? (a.hexColour = Blockly.makeColour(l), n = !0) : a.hexColour = "", "true" == r.getAttribute("expanded") && (a.blocks.length && o.setSelectedItem(a), a.setExpanded(!0));
                    break;
                case "SEP":
                    i.add(new Blockly.Toolbox.TreeSeparator);
                    break;
                case "BLOCK":
                    i.blocks.push(r)
            }
    }
    var o = this.tree_;
    o.removeChildren(), o.blocks = [];
    var n = !1;
    if (t(e, this.tree_), this.hasColours_ = n, o.blocks.length) throw "Toolbox cannot have both blocks and categories in the root level.";
    Blockly.fireUiEvent(window, "resize")
}, Blockly.Toolbox.prototype.addColour_ = function(e) {
    e = e.getChildren();
    for (var t, o = 0; t = e[o]; o++) {
        var n = t.getRowElement();
        if (n) {
            var i = "8px solid " + (t.hexColour || "#ddd");
            this.workspace_.RTL ? n.style.borderRight = i : n.style.borderLeft = i
        }
        this.addColour_(t)
    }
}, Blockly.Toolbox.prototype.clearSelection = function() {
    this.tree_.setSelectedItem(null)
}, Blockly.Toolbox.prototype.getRect = function() {
    var e = this.workspace_.RTL ? Blockly.svgSize(this.workspace_.options.svg).width - this.width : -1e7;
    return new goog.math.Rect(e, -1e7, 1e7 + this.width, 2e7)
}, Blockly.Toolbox.TreeControl = function(e, t) {
    this.toolbox_ = e, goog.ui.tree.TreeControl.call(this, goog.html.SafeHtml.EMPTY, t)
}, goog.inherits(Blockly.Toolbox.TreeControl, goog.ui.tree.TreeControl), Blockly.Toolbox.TreeControl.prototype.enterDocument = function() {
    if (Blockly.Toolbox.TreeControl.superClass_.enterDocument.call(this), goog.events.BrowserFeature.TOUCH_ENABLED) {
        var e = this.getElement();
        Blockly.bindEvent_(e, goog.events.EventType.TOUCHSTART, this, this.handleTouchEvent_)
    }
}, Blockly.Toolbox.TreeControl.prototype.handleTouchEvent_ = function(e) {
    e.preventDefault();
    var t = this.getNodeFromEvent_(e);
    t && e.type === goog.events.EventType.TOUCHSTART && setTimeout(function() {
        t.onMouseDown(e)
    }, 1)
}, Blockly.Toolbox.TreeControl.prototype.createNode = function(e) {
    return new Blockly.Toolbox.TreeNode(this.toolbox_, e ? goog.html.SafeHtml.htmlEscape(e) : goog.html.SafeHtml.EMPTY, this.getConfig(), this.getDomHelper())
}, Blockly.Toolbox.TreeControl.prototype.setSelectedItem = function(e) {
    Blockly.removeAllRanges();
    var t = this.toolbox_;
    if (e != this.selectedItem_ && e != t.tree_) {
        if (t.lastCategory_ && (t.lastCategory_.getRowElement().style.backgroundColor = ""), e) {
            var o = e.hexColour || "#57e";
            e.getRowElement().style.backgroundColor = o, t.addColour_(e)
        }
        goog.ui.tree.TreeControl.prototype.setSelectedItem.call(this, e), e && e.blocks && e.blocks.length ? (t.flyout_.show(e.blocks), t.lastCategory_ != e && t.flyout_.scrollToTop()) : t.flyout_.hide(), e && (t.lastCategory_ = e)
    }
}, Blockly.Toolbox.TreeNode = function(e, t, o, n) {
    goog.ui.tree.TreeNode.call(this, t, o, n), e && (t = function() {
        Blockly.fireUiEvent(window, "resize")
    }, goog.events.listen(e.tree_, goog.ui.tree.BaseNode.EventType.EXPAND, t), goog.events.listen(e.tree_, goog.ui.tree.BaseNode.EventType.COLLAPSE, t))
}, goog.inherits(Blockly.Toolbox.TreeNode, goog.ui.tree.TreeNode), Blockly.Toolbox.TreeNode.prototype.getExpandIconSafeHtml = function() {
    return goog.html.SafeHtml.create("span")
}, Blockly.Toolbox.TreeNode.prototype.onMouseDown = function(e) {
    this.hasChildren() && this.isUserCollapsible_ ? (this.toggle(), this.select()) : this.isSelected() ? this.getTree().setSelectedItem(null) : this.select(), this.updateRow()
}, Blockly.Toolbox.TreeNode.prototype.onDoubleClick_ = function(e) {}, Blockly.Toolbox.TreeSeparator = function() {
    Blockly.Toolbox.TreeNode.call(this, null, "", Blockly.Toolbox.TreeSeparator.CONFIG_)
}, goog.inherits(Blockly.Toolbox.TreeSeparator, Blockly.Toolbox.TreeNode), Blockly.Toolbox.TreeSeparator.CONFIG_ = {
    cssTreeRow: "blocklyTreeSeparator"
}, Blockly.Css = {}, Blockly.Css.Cursor = {
    OPEN: "handopen",
    CLOSED: "handclosed",
    DELETE: "handdelete"
}, Blockly.Css.currentCursor_ = "", Blockly.Css.styleSheet_ = null, Blockly.Css.mediaPath_ = "", Blockly.Css.inject = function(e, t) {
    if (!Blockly.Css.styleSheet_) {
        var o = ".blocklyDraggable {}\n";
        e && (o += Blockly.Css.CONTENT.join("\n"), Blockly.FieldDate && (o += Blockly.FieldDate.CSS.join("\n"))), Blockly.Css.mediaPath_ = t.replace(/[\\\/]$/, "");
        var o = o.replace(/<<<PATH>>>/g, Blockly.Css.mediaPath_),
            n = document.createElement("style");
        document.head.appendChild(n), o = document.createTextNode(o), n.appendChild(o), Blockly.Css.styleSheet_ = n.sheet, Blockly.Css.setCursor(Blockly.Css.Cursor.OPEN)
    }
}, Blockly.Css.setCursor = function(e) {
    if (Blockly.Css.currentCursor_ != e) {
        Blockly.Css.currentCursor_ = e;
        var t = "url(" + Blockly.Css.mediaPath_ + "/" + e + ".cur), auto",
            o = ".blocklyDraggable {\n  cursor: " + t + ";\n}\n";
        Blockly.Css.styleSheet_.deleteRule(0), Blockly.Css.styleSheet_.insertRule(o, 0);
        for (var n, o = document.getElementsByClassName("blocklyToolboxDiv"), i = 0; n = o[i]; i++) n.style.cursor = e == Blockly.Css.Cursor.DELETE ? t : "";
        document.body.parentNode.style.cursor = e == Blockly.Css.Cursor.OPEN ? "" : t
    }
}, Blockly.Css.CONTENT = [".blocklySvg {", "background-color: #fff;", "outline: none;", "overflow: hidden;", "}", ".blocklyWidgetDiv {", "display: none;", "position: absolute;", "z-index: 999;", "}", ".blocklyTooltipDiv {", "background-color: #ffffc7;", "border: 1px solid #ddc;", "box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);", "color: #000;", "display: none;", "font-family: sans-serif;", "font-size: 9pt;", "opacity: 0.9;", "padding: 2px;", "position: absolute;", "z-index: 1000;", "}", ".blocklyResizeSE {", "cursor: se-resize;", "fill: #aaa;", "}", ".blocklyResizeSW {", "cursor: sw-resize;", "fill: #aaa;", "}", ".blocklyResizeLine {", "stroke: #888;", "stroke-width: 1;", "}", ".blocklyHighlightedConnectionPath {", "fill: none;", "stroke: #fc3;", "stroke-width: 4px;", "}", ".blocklyPathLight {", "fill: none;", "stroke-linecap: round;", "stroke-width: 1;", "}", ".blocklySelected>.blocklyPath {", "stroke: #fc3;", "stroke-width: 3px;", "}", ".blocklySelected>.blocklyPathLight {", "display: none;", "}", ".blocklyDragging>.blocklyPath,", ".blocklyDragging>.blocklyPathLight {", "fill-opacity: .8;", "stroke-opacity: .8;", "}", ".blocklyDragging>.blocklyPathDark {", "display: none;", "}", ".blocklyDisabled>.blocklyPath {", "fill-opacity: .5;", "stroke-opacity: .5;", "}", ".blocklyDisabled>.blocklyPathLight,", ".blocklyDisabled>.blocklyPathDark {", "display: none;", "}", ".blocklyText {", "cursor: default;", "fill: #fff;", "font-family: sans-serif;", "font-size: 11pt;", "}", ".blocklyNonEditableText>text {", "pointer-events: none;", "}", ".blocklyNonEditableText>rect,", ".blocklyEditableText>rect {", "fill: #fff;", "fill-opacity: .6;", "}", ".blocklyNonEditableText>text,", ".blocklyEditableText>text {", "fill: #000;", "}", ".blocklyEditableText:hover>rect {", "stroke: #fff;", "stroke-width: 2;", "}", ".blocklyBubbleText {", "fill: #000;", "}", ".blocklySvg text {", "user-select: none;", "-moz-user-select: none;", "-webkit-user-select: none;", "cursor: inherit;", "}", ".blocklyHidden {", "display: none;", "}", ".blocklyFieldDropdown:not(.blocklyHidden) {", "display: block;", "}", ".blocklyIconGroup {", "cursor: default;", "}", ".blocklyIconGroup:not(:hover),", ".blocklyIconGroupReadonly {", "opacity: .6;", "}", ".blocklyMinimalBody {", "margin: 0;", "padding: 0;", "}", ".blocklyCommentTextarea {", "background-color: #ffc;", "border: 0;", "margin: 0;", "padding: 2px;", "resize: none;", "}", ".blocklyHtmlInput {", "border: none;", "border-radius: 4px;", "font-family: sans-serif;", "height: 100%;", "margin: 0;", "outline: none;", "padding: 0 1px;", "width: 100%", "}", ".blocklyMainBackground {", "stroke-width: 1;", "stroke: #c6c6c6;", "}", ".blocklyMutatorBackground {", "fill: #fff;", "stroke: #ddd;", "stroke-width: 1;", "}", ".blocklyFlyoutBackground {", "fill: #ddd;", "fill-opacity: .8;", "}", ".blocklyScrollbarBackground {", "opacity: 0;", "}", ".blocklyScrollbarKnob {", "fill: #ccc;", "}", ".blocklyScrollbarBackground:hover+.blocklyScrollbarKnob,", ".blocklyScrollbarKnob:hover {", "fill: #bbb;", "}", ".blocklyZoom>image {", "opacity: .4;", "}", ".blocklyZoom>image:hover {", "opacity: .6;", "}", ".blocklyZoom>image:active {", "opacity: .8;", "}", ".blocklyFlyout .blocklyScrollbarKnob {", "fill: #bbb;", "}", ".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarKnob,", ".blocklyFlyout .blocklyScrollbarKnob:hover {", "fill: #aaa;", "}", ".blocklyInvalidInput {", "background: #faa;", "}", ".blocklyAngleCircle {", "stroke: #444;", "stroke-width: 1;", "fill: #ddd;", "fill-opacity: .8;", "}", ".blocklyAngleMarks {", "stroke: #444;", "stroke-width: 1;", "}", ".blocklyAngleGauge {", "fill: #f88;", "fill-opacity: .8;", "}", ".blocklyAngleLine {", "stroke: #f00;", "stroke-width: 2;", "stroke-linecap: round;", "}", ".blocklyContextMenu {", "border-radius: 4px;", "}", ".blocklyDropdownMenu {", "padding: 0 !important;", "}", ".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,", ".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon {", "background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;", "}", ".blocklyToolboxDiv {", "background-color: #ddd;", "overflow-x: visible;", "overflow-y: auto;", "position: absolute;", "}", ".blocklyTreeRoot {", "padding: 4px 0;", "}", ".blocklyTreeRoot:focus {", "outline: none;", "}", ".blocklyTreeRow {", "height: 22px;", "line-height: 22px;", "margin-bottom: 3px;", "padding-right: 8px;", "white-space: nowrap;", "}", '.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {', "margin-left: 8px;", "}", ".blocklyTreeRow:not(.blocklyTreeSelected):hover {", "background-color: #e4e4e4;", "}", ".blocklyTreeSeparator {", "border-bottom: solid #e5e5e5 1px;", "height: 0px;", "margin: 5px 0;", "}", ".blocklyTreeIcon {", "background-image: url(<<<PATH>>>/sprites.png);", "height: 16px;", "vertical-align: middle;", "width: 16px;", "}", ".blocklyTreeIconClosedLtr {", "background-position: -32px -1px;", "}", ".blocklyTreeIconClosedRtl {", "background-position: 0px -1px;", "}", ".blocklyTreeIconOpen {", "background-position: -16px -1px;", "}", ".blocklyTreeSelected>.blocklyTreeIconClosedLtr {", "background-position: -32px -17px;", "}", ".blocklyTreeSelected>.blocklyTreeIconClosedRtl {", "background-position: 0px -17px;", "}", ".blocklyTreeSelected>.blocklyTreeIconOpen {", "background-position: -16px -17px;", "}", ".blocklyTreeIconNone,", ".blocklyTreeSelected>.blocklyTreeIconNone {", "background-position: -48px -1px;", "}", ".blocklyTreeLabel {", "cursor: default;", "font-family: sans-serif;", "font-size: 16px;", "padding: 0 3px;", "vertical-align: middle;", "}", ".blocklyTreeSelected .blocklyTreeLabel {", "color: #fff;", "}", ".blocklyWidgetDiv .goog-palette {", "outline: none;", "cursor: default;", "}", ".blocklyWidgetDiv .goog-palette-table {", "border: 1px solid #666;", "border-collapse: collapse;", "}", ".blocklyWidgetDiv .goog-palette-cell {", "height: 13px;", "width: 15px;", "margin: 0;", "border: 0;", "text-align: center;", "vertical-align: middle;", "border-right: 1px solid #666;", "font-size: 1px;", "}", ".blocklyWidgetDiv .goog-palette-colorswatch {", "position: relative;", "height: 13px;", "width: 15px;", "border: 1px solid #666;", "}", ".blocklyWidgetDiv .goog-palette-cell-hover .goog-palette-colorswatch {", "border: 1px solid #FFF;", "}", ".blocklyWidgetDiv .goog-palette-cell-selected .goog-palette-colorswatch {", "border: 1px solid #000;", "color: #fff;", "}", ".blocklyWidgetDiv .goog-menu {", "background: #fff;", "border-color: #ccc #666 #666 #ccc;", "border-style: solid;", "border-width: 1px;", "cursor: default;", "font: normal 13px Arial, sans-serif;", "margin: 0;", "outline: none;", "padding: 4px 0;", "position: absolute;", "overflow-y: auto;", "overflow-x: hidden;", "max-height: 100%;", "z-index: 20000;", "}", ".blocklyWidgetDiv .goog-menuitem {", "color: #000;", "font: normal 13px Arial, sans-serif;", "list-style: none;", "margin: 0;", "padding: 4px 7em 4px 28px;", "white-space: nowrap;", "}", ".blocklyWidgetDiv .goog-menuitem.goog-menuitem-rtl {", "padding-left: 7em;", "padding-right: 28px;", "}", ".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,", ".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem {", "padding-left: 12px;", "}", ".blocklyWidgetDiv .goog-menu-noaccel .goog-menuitem {", "padding-right: 20px;", "}", ".blocklyWidgetDiv .goog-menuitem-content {", "color: #000;", "font: normal 13px Arial, sans-serif;", "}", ".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-accel,", ".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content {", "color: #ccc !important;", "}", ".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon {", "opacity: 0.3;", "-moz-opacity: 0.3;", "filter: alpha(opacity=30);", "}", ".blocklyWidgetDiv .goog-menuitem-highlight,", ".blocklyWidgetDiv .goog-menuitem-hover {", "background-color: #d6e9f8;", "border-color: #d6e9f8;", "border-style: dotted;", "border-width: 1px 0;", "padding-bottom: 3px;", "padding-top: 3px;", "}", ".blocklyWidgetDiv .goog-menuitem-checkbox,", ".blocklyWidgetDiv .goog-menuitem-icon {", "background-repeat: no-repeat;", "height: 16px;", "left: 6px;", "position: absolute;", "right: auto;", "vertical-align: middle;", "width: 16px;", "}", ".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,", ".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon {", "left: auto;", "right: 6px;", "}", ".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,", ".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon {", "background: url(//ssl.gstatic.com/editor/editortoolbar.png) no-repeat -512px 0;", "}", ".blocklyWidgetDiv .goog-menuitem-accel {", "color: #999;", "direction: ltr;", "left: auto;", "padding: 0 6px;", "position: absolute;", "right: 0;", "text-align: right;", "}", ".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-accel {", "left: 0;", "right: auto;", "text-align: left;", "}", ".blocklyWidgetDiv .goog-menuitem-mnemonic-hint {", "text-decoration: underline;", "}", ".blocklyWidgetDiv .goog-menuitem-mnemonic-separator {", "color: #999;", "font-size: 12px;", "padding-left: 4px;", "}", ".blocklyWidgetDiv .goog-menuseparator {", "border-top: 1px solid #ccc;", "margin: 4px 0;", "padding: 0;", "}", ""], Blockly.WidgetDiv = {}, Blockly.WidgetDiv.DIV = null, Blockly.WidgetDiv.owner_ = null, Blockly.WidgetDiv.dispose_ = null, Blockly.WidgetDiv.createDom = function() {
    Blockly.WidgetDiv.DIV || (Blockly.WidgetDiv.DIV = goog.dom.createDom("div", "blocklyWidgetDiv"), document.body.appendChild(Blockly.WidgetDiv.DIV))
}, Blockly.WidgetDiv.show = function(e, t, o) {
    Blockly.WidgetDiv.hide(), Blockly.WidgetDiv.owner_ = e, Blockly.WidgetDiv.dispose_ = o, e = goog.style.getViewportPageOffset(document), Blockly.WidgetDiv.DIV.style.top = e.y + "px", Blockly.WidgetDiv.DIV.style.direction = t ? "rtl" : "ltr", Blockly.WidgetDiv.DIV.style.display = "block"
}, Blockly.WidgetDiv.hide = function() {
    Blockly.WidgetDiv.owner_ && (Blockly.WidgetDiv.DIV.style.display = "none", Blockly.WidgetDiv.DIV.style.left = "", Blockly.WidgetDiv.DIV.style.top = "", Blockly.WidgetDiv.DIV.style.height = "", Blockly.WidgetDiv.dispose_ && Blockly.WidgetDiv.dispose_(), Blockly.WidgetDiv.owner_ = null, Blockly.WidgetDiv.dispose_ = null, goog.dom.removeChildren(Blockly.WidgetDiv.DIV))
}, Blockly.WidgetDiv.isVisible = function() {
    return !!Blockly.WidgetDiv.owner_
}, Blockly.WidgetDiv.hideIfOwner = function(e) {
    Blockly.WidgetDiv.owner_ == e && Blockly.WidgetDiv.hide()
}, Blockly.WidgetDiv.position = function(e, t, o, n, i) {
    t < n.y && (t = n.y), i ? e > o.width + n.x && (e = o.width + n.x) : e < n.x && (e = n.x), Blockly.WidgetDiv.DIV.style.left = e + "px", Blockly.WidgetDiv.DIV.style.top = t + "px", Blockly.WidgetDiv.DIV.style.height = o.height - t + n.y + "px"
}, Blockly.inject = function(e, t) {
    if (goog.isString(e) && (e = document.getElementById(e)), !goog.dom.contains(document, e)) throw "Error: container is not in current document.";
    var o, n = Blockly.parseOptions_(t || {}),
        i = function() {
            var t = Blockly.createDom_(e, n);
            o = Blockly.createMainWorkspace_(t, n), Blockly.init_(o), o.markFocused(), Blockly.bindEvent_(t, "focus", o, o.markFocused)
        };
    if (n.enableRealtime) {
        var r = document.getElementById("realtime");
        r && (r.style.display = "block"), Blockly.Realtime.startRealtime(i, e, n.realtimeOptions)
    } else i();
    return o
}, Blockly.parseToolboxTree_ = function(e) {
    return e ? ("string" != typeof e && "undefined" == typeof XSLTProcessor && (e = e.outerHTML), "string" == typeof e && (e = Blockly.Xml.textToDom(e))) : e = null, e
}, Blockly.parseOptions_ = function(e) {
    var t = !!e.readOnly;
    if (t) var o = null,
        n = !1,
        i = !1,
        r = !1,
        s = !1,
        a = !1,
        l = !1;
    else o = Blockly.parseToolboxTree_(e.toolbox), n = !(!o || !o.getElementsByTagName("category").length), i = e.trashcan, void 0 === i && (i = n), r = e.collapse, void 0 === r && (r = n), s = e.comments, void 0 === s && (s = n), a = e.disable, void 0 === a && (a = n), l = e.sounds, void 0 === l && (l = !0);
    var c = e.scrollbars;
    void 0 === c && (c = n);
    var u = e.css;
    void 0 === u && (u = !0);
    var g = e.grid || {},
        p = {};
    p.spacing = parseFloat(g.spacing) || 0, p.colour = g.colour || "#888", p.length = parseFloat(g.length) || 1, p.snap = 0 < p.spacing && !!g.snap, g = "https://blockly-demo.appspot.com/static/media/", e.media ? g = e.media : e.path && (g = e.path + "media/");
    var h = e.zoom || {},
        d = {};
    return d.controls = void 0 === h.controls ? !1 : !!h.controls, d.wheel = void 0 === h.wheel ? !1 : !!h.wheel, d.startScale = void 0 === h.startScale ? 1 : parseFloat(h.startScale), d.maxScale = void 0 === h.maxScale ? 3 : parseFloat(h.maxScale), d.minScale = void 0 === h.minScale ? .3 : parseFloat(h.minScale), d.scaleSpeed = void 0 === h.scaleSpeed ? 1.2 : parseFloat(h.scaleSpeed), h = !!e.realtime, {
        RTL: !!e.rtl,
        collapse: r,
        comments: s,
        disable: a,
        readOnly: t,
        maxBlocks: e.maxBlocks || 1 / 0,
        pathToMedia: g,
        hasCategories: n,
        hasScrollbars: c,
        hasTrashcan: i,
        hasSounds: l,
        hasCss: u,
        languageTree: o,
        gridOptions: p,
        zoomOptions: d,
        enableRealtime: h,
        realtimeOptions: h ? e.realtimeOptions : void 0
    }
}, Blockly.createDom_ = function(e, t) {
    e.setAttribute("dir", "LTR"), goog.ui.Component.setDefaultRightToLeft(t.RTL), Blockly.Css.inject(t.hasCss, t.pathToMedia);
    var o = Blockly.createSvgElement("svg", {
            xmlns: "http://www.w3.org/2000/svg",
            "xmlns:html": "http://www.w3.org/1999/xhtml",
            "xmlns:xlink": "http://www.w3.org/1999/xlink",
            version: "1.1",
            "class": "blocklySvg"
        }, e),
        n = Blockly.createSvgElement("defs", {}, o),
        i = String(Math.random()).substring(2),
        r = Blockly.createSvgElement("filter", {
            id: "blocklyEmbossFilter" + i
        }, n);
    Blockly.createSvgElement("feGaussianBlur", {
        "in": "SourceAlpha",
        stdDeviation: 1,
        result: "blur"
    }, r);
    var s = Blockly.createSvgElement("feSpecularLighting", {
        "in": "blur",
        surfaceScale: 1,
        specularConstant: .5,
        specularExponent: 10,
        "lighting-color": "white",
        result: "specOut"
    }, r);
    return Blockly.createSvgElement("fePointLight", {
        x: -5e3,
        y: -1e4,
        z: 2e4
    }, s), Blockly.createSvgElement("feComposite", {
        "in": "specOut",
        in2: "SourceAlpha",
        operator: "in",
        result: "specOut"
    }, r), Blockly.createSvgElement("feComposite", {
        "in": "SourceGraphic",
        in2: "specOut",
        operator: "arithmetic",
        k1: 0,
        k2: 1,
        k3: 1,
        k4: 0
    }, r), t.embossFilterId = r.id, r = Blockly.createSvgElement("pattern", {
        id: "blocklyDisabledPattern" + i,
        patternUnits: "userSpaceOnUse",
        width: 10,
        height: 10
    }, n), Blockly.createSvgElement("rect", {
        width: 10,
        height: 10,
        fill: "#aaa"
    }, r), Blockly.createSvgElement("path", {
        d: "M 0 0 L 10 10 M 10 0 L 0 10",
        stroke: "#cc0"
    }, r), t.disabledPatternId = r.id, n = Blockly.createSvgElement("pattern", {
        id: "blocklyGridPattern" + i,
        patternUnits: "userSpaceOnUse"
    }, n), 0 < t.gridOptions.length && 0 < t.gridOptions.spacing && (Blockly.createSvgElement("line", {
        stroke: t.gridOptions.colour
    }, n), 1 < t.gridOptions.length && Blockly.createSvgElement("line", {
        stroke: t.gridOptions.colour
    }, n)), t.gridPattern = n, t.svg = o
}, Blockly.createMainWorkspace_ = function(e, t) {
    t.parentWorkspace = null, t.getMetrics = Blockly.getMainWorkspaceMetrics_, t.setMetrics = Blockly.setMainWorkspaceMetrics_;
    var o = new Blockly.WorkspaceSvg(t);
    return o.scale = t.zoomOptions.startScale, e.appendChild(o.createDom("blocklyMainBackground")), o.translate(0, 0), o.markFocused(), t.readOnly || t.hasScrollbars || o.addChangeListener(function() {
        if (0 == Blockly.dragMode_) {
            var e = o.getMetrics(),
                n = e.viewLeft + e.absoluteLeft,
                i = e.viewTop + e.absoluteTop;
            if (e.contentTop < i || e.contentTop + e.contentHeight > e.viewHeight + i || e.contentLeft < (t.RTL ? e.viewLeft : n) || e.contentLeft + e.contentWidth > (t.RTL ? e.viewWidth : e.viewWidth + n))
                for (var r, s = o.getTopBlocks(!1), a = 0; r = s[a]; a++) {
                    var l = r.getRelativeToSurfaceXY(),
                        c = r.getHeightWidth(),
                        u = i + 25 - c.height - l.y;
                    u > 0 && r.moveBy(0, u), u = i + e.viewHeight - 25 - l.y, 0 > u && r.moveBy(0, u), u = 25 + n - l.x - (t.RTL ? 0 : c.width), u > 0 && r.moveBy(u, 0), u = n + e.viewWidth - 25 - l.x + (t.RTL ? c.width : 0), 0 > u && r.moveBy(u, 0)
                }
        }
    }), Blockly.svgResize(o), Blockly.WidgetDiv.createDom(), Blockly.Tooltip.createDom(), o
}, Blockly.init_ = function(e) {
    var t = e.options;
    if (Blockly.bindEvent_(e.options.svg, "contextmenu", null, function(e) {
            Blockly.isTargetInput_(e) || e.preventDefault()
        }), Blockly.bindEvent_(window, "resize", null, function() {
            Blockly.svgResize(e)
        }), Blockly.documentEventsBound_ || (Blockly.bindEvent_(document, "keydown", null, Blockly.onKeyDown_), Blockly.bindEvent_(document, "touchend", null, Blockly.longStop_), Blockly.bindEvent_(document, "touchcancel", null, Blockly.longStop_), document.addEventListener("mouseup", Blockly.onMouseUp_, !1), goog.userAgent.IPAD && Blockly.bindEvent_(window, "orientationchange", document, function() {
            Blockly.fireUiEvent(window, "resize")
        }), Blockly.documentEventsBound_ = !0), t.languageTree)
        if (e.toolbox_) e.toolbox_.init(e);
        else if (e.flyout_) {
        e.flyout_.init(e), e.flyout_.show(t.languageTree.childNodes), e.scrollX = e.flyout_.width_, t.RTL && (e.scrollX *= -1);
        var o = "translate(" + e.scrollX + ",0)";
        e.getCanvas().setAttribute("transform", o), e.getBubbleCanvas().setAttribute("transform", o)
    }
    if (t.hasScrollbars && (e.scrollbar = new Blockly.ScrollbarPair(e), e.scrollbar.resize()), t.hasSounds) {
        e.loadAudio_([t.pathToMedia + "click.mp3", t.pathToMedia + "click.wav", t.pathToMedia + "click.ogg"], "click"), e.loadAudio_([t.pathToMedia + "disconnect.wav", t.pathToMedia + "disconnect.mp3", t.pathToMedia + "disconnect.ogg"], "disconnect"), e.loadAudio_([t.pathToMedia + "delete.mp3", t.pathToMedia + "delete.ogg", t.pathToMedia + "delete.wav"], "delete");
        var n = [],
            t = function() {
                for (; n.length;) Blockly.unbindEvent_(n.pop());
                e.preloadAudio_()
            };
        n.push(Blockly.bindEvent_(document, "mousemove", null, t)), n.push(Blockly.bindEvent_(document, "touchstart", null, t))
    }
}, Blockly.updateToolbox = function(e) {
    console.warn("Deprecated call to Blockly.updateToolbox, use workspace.updateToolbox instead."), Blockly.getMainWorkspace().updateToolbox(e)
}, Blockly.utils = {}, Blockly.addClass_ = function(e, t) {
    var o = e.getAttribute("class") || ""; - 1 == (" " + o + " ").indexOf(" " + t + " ") && (o && (o += " "), e.setAttribute("class", o + t))
}, Blockly.removeClass_ = function(e, t) {
    var o = e.getAttribute("class");
    if (-1 != (" " + o + " ").indexOf(" " + t + " ")) {
        for (var o = o.split(/\s+/), n = 0; n < o.length; n++) o[n] && o[n] != t || (o.splice(n, 1), n--);
        o.length ? e.setAttribute("class", o.join(" ")) : e.removeAttribute("class")
    }
}, Blockly.hasClass_ = function(e, t) {
    return -1 != (" " + e.getAttribute("class") + " ").indexOf(" " + t + " ")
}, Blockly.bindEvent_ = function(e, t, o, n) {
    var i = o ? function(e) {
        n.call(o, e)
    } : n;
    e.addEventListener(t, i, !1);
    var r = [
        [e, t, i]
    ];
    if (t in Blockly.bindEvent_.TOUCH_MAP)
        for (var s, i = function(e) {
                if (1 == e.changedTouches.length) {
                    var t = e.changedTouches[0];
                    e.clientX = t.clientX, e.clientY = t.clientY
                }
                n.call(o, e), e.preventDefault()
            }, a = 0; s = Blockly.bindEvent_.TOUCH_MAP[t][a]; a++) e.addEventListener(s, i, !1), r.push([e, s, i]);
    return r
}, Blockly.bindEvent_.TOUCH_MAP = {}, goog.events.BrowserFeature.TOUCH_ENABLED && (Blockly.bindEvent_.TOUCH_MAP = {
    mousedown: ["touchstart"],
    mousemove: ["touchmove"],
    mouseup: ["touchend", "touchcancel"]
}), Blockly.unbindEvent_ = function(e) {
    for (; e.length;) {
        var t = e.pop(),
            o = t[2];
        t[0].removeEventListener(t[1], o, !1)
    }
    return o
}, Blockly.fireUiEventNow = function(e, t) {
    var o = Blockly.fireUiEvent.DB_[t];
    if (o) {
        var n = o.indexOf(e); - 1 != n && o.splice(n, 1)
    }
    if (document.createEvent) o = document.createEvent("UIEvents"), o.initEvent(t, !0, !0), e.dispatchEvent(o);
    else {
        if (!document.createEventObject) throw "FireEvent: No event creation mechanism.";
        o = document.createEventObject(), e.fireEvent("on" + t, o)
    }
}, Blockly.fireUiEvent = function(e, t) {
    var o = Blockly.fireUiEvent.DB_[t];
    if (o) {
        if (-1 != o.indexOf(e)) return;
        o.push(e)
    } else Blockly.fireUiEvent.DB_[t] = [e];
    setTimeout(function() {
        Blockly.fireUiEventNow(e, t)
    }, 0)
}, Blockly.fireUiEvent.DB_ = {}, Blockly.noEvent = function(e) {
    e.preventDefault(), e.stopPropagation()
}, Blockly.isTargetInput_ = function(e) {
    return "textarea" == e.target.type || "text" == e.target.type || "number" == e.target.type || "email" == e.target.type || "password" == e.target.type || "search" == e.target.type || "tel" == e.target.type || "url" == e.target.type || e.target.isContentEditable
}, Blockly.getRelativeXY_ = function(e) {
    var t = new goog.math.Coordinate(0, 0),
        o = e.getAttribute("x");
    return o && (t.x = parseInt(o, 10)), (o = e.getAttribute("y")) && (t.y = parseInt(o, 10)), (e = (e = e.getAttribute("transform")) && e.match(Blockly.getRelativeXY_.XY_REGEXP_)) && (t.x += parseFloat(e[1]), e[3] && (t.y += parseFloat(e[3]))), t
}, Blockly.getRelativeXY_.XY_REGEXP_ = /translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*\))?/, Blockly.getSvgXY_ = function(e, t) {
    var o = 0,
        n = 0,
        i = 1;
    (goog.dom.contains(t.getCanvas(), e) || goog.dom.contains(t.getBubbleCanvas(), e)) && (i = t.scale);
    do {
        var r = Blockly.getRelativeXY_(e);
        e != t.getCanvas() && e != t.getBubbleCanvas() || (i = 1), o += r.x * i, n += r.y * i, e = e.parentNode
    } while (e && e != t.options.svg);
    return new goog.math.Coordinate(o, n)
}, Blockly.createSvgElement = function(e, t, o, n) {
    e = document.createElementNS(Blockly.SVG_NS, e);
    for (var i in t) e.setAttribute(i, t[i]);
    return document.body.runtimeStyle && (e.runtimeStyle = e.currentStyle = e.style), o && o.appendChild(e), e
}, Blockly.removeAllRanges = function() {
    window.getSelection && setTimeout(function() {
        try {
            var e = window.getSelection();
            e.isCollapsed || e.removeAllRanges()
        } catch (t) {}
    }, 0)
}, Blockly.isRightButton = function(e) {
    return e.ctrlKey && goog.userAgent.MAC ? !0 : 2 == e.button
}, Blockly.mouseToSvg = function(e, t) {
    var o = t.createSVGPoint();
    o.x = e.clientX, o.y = e.clientY;
    var n = t.getScreenCTM(),
        n = n.inverse();
    return o.matrixTransform(n)
}, Blockly.shortestStringLength = function(e) {
    if (!e.length) return 0;
    for (var t = e[0].length, o = 1; o < e.length; o++) t = Math.min(t, e[o].length);
    return t
}, Blockly.commonWordPrefix = function(e, t) {
    if (!e.length) return 0;
    if (1 == e.length) return e[0].length;
    for (var o = 0, n = t || Blockly.shortestStringLength(e), i = 0; n > i; i++) {
        for (var r = e[0][i], s = 1; s < e.length; s++)
            if (r != e[s][i]) return o;
            " " == r && (o = i + 1)
    }
    for (s = 1; s < e.length; s++)
        if ((r = e[s][i]) && " " != r) return o;
    return n
}, Blockly.commonWordSuffix = function(e, t) {
    if (!e.length) return 0;
    if (1 == e.length) return e[0].length;
    for (var o = 0, n = t || Blockly.shortestStringLength(e), i = 0; n > i; i++) {
        for (var r = e[0].substr(-i - 1, 1), s = 1; s < e.length; s++)
            if (r != e[s].substr(-i - 1, 1)) return o;
            " " == r && (o = i + 1)
    }
    for (s = 1; s < e.length; s++)
        if ((r = e[s].charAt(e[s].length - i - 1)) && " " != r) return o;
    return n
}, Blockly.isNumber = function(e) {
    return !!e.match(/^\s*-?\d+(\.\d+)?\s*$/)
}, Blockly.tokenizeInterpolation = function(e) {
    var t = [];
    e = e.split(""), e.push("");
    for (var o = 0, n = [], i = null, r = 0; r < e.length; r++) {
        var s = e[r];
        0 == o ? "%" == s ? o = 1 : n.push(s) : 1 == o ? "%" == s ? (n.push(s), o = 0) : s >= "0" && "9" >= s ? (o = 2, i = s, (s = n.join("")) && t.push(s), n.length = 0) : (n.push("%", s), o = 0) : 2 == o && (s >= "0" && "9" >= s ? i += s : (t.push(parseInt(i, 10)), r--, o = 0))
    }
    return (s = n.join("")) && t.push(s), t
}, Blockly.genUid = function() {
    var e = Blockly.genUid.soup_.length,
        t = [];
    if (Blockly.genUid.crypto_) {
        var o = new Uint32Array(20);
        Blockly.genUid.crypto_.getRandomValues(o);
        for (var n = 0; 20 > n; n++) t[n] = Blockly.genUid.soup_.charAt(o[n] % e)
    } else
        for (n = 0; 20 > n; n++) t[n] = Blockly.genUid.soup_.charAt(Math.random() * e);
    return t.join("")
}, Blockly.genUid.crypto_ = this.crypto, Blockly.genUid.soup_ = "!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", Blockly.Realtime = {
    isEnabled: function() {
        return !1
    },
    blockChanged: function() {},
    doCommand: function(e) {
        e()
    }
};
var CLOSURE_DEFINES = {
    "goog.DEBUG": !1
};
Blockly.SVG_NS = "http://www.w3.org/2000/svg", Blockly.HTML_NS = "http://www.w3.org/1999/xhtml", Blockly.HSV_SATURATION = .45, Blockly.HSV_VALUE = .65, Blockly.SPRITE = {
    width: 96,
    height: 124,
    url: "sprites.png"
}, Blockly.makeColour = function(e) {
    return e
}, Blockly.INPUT_VALUE = 1, Blockly.OUTPUT_VALUE = 2, Blockly.NEXT_STATEMENT = 3, Blockly.PREVIOUS_STATEMENT = 4, Blockly.DUMMY_INPUT = 5, Blockly.ALIGN_LEFT = -1, Blockly.ALIGN_CENTRE = 0, Blockly.ALIGN_RIGHT = 1, Blockly.OPPOSITE_TYPE = [], Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE] = Blockly.OUTPUT_VALUE, Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE] = Blockly.INPUT_VALUE, Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT] = Blockly.PREVIOUS_STATEMENT, Blockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT] = Blockly.NEXT_STATEMENT, Blockly.selected = null, Blockly.highlightedConnection_ = null, Blockly.localConnection_ = null, Blockly.DRAG_RADIUS = 5, Blockly.SNAP_RADIUS = 20, Blockly.BUMP_DELAY = 250, Blockly.COLLAPSE_CHARS = 30, Blockly.LONGPRESS = 750, Blockly.mainWorkspace = null, Blockly.clipboardXml_ = null, Blockly.clipboardSource_ = null, Blockly.dragMode_ = 0, Blockly.onTouchUpWrapper_ = null, Blockly.svgSize = function(e) {
    return {
        width: e.cachedWidth_,
        height: e.cachedHeight_
    }
}, Blockly.svgResize = function(e) {
    for (; e.options.parentWorkspace;) e = e.options.parentWorkspace;
    var t = e.options.svg,
        o = t.parentNode;
    if (o) {
        var n = o.offsetWidth,
            o = o.offsetHeight;
        t.cachedWidth_ != n && (t.setAttribute("width", n + "px"), t.cachedWidth_ = n), t.cachedHeight_ != o && (t.setAttribute("height", o + "px"), t.cachedHeight_ = o), e.resize()
    }
}, Blockly.onMouseUp_ = function(e) {
    e = Blockly.getMainWorkspace(), Blockly.Css.setCursor(Blockly.Css.Cursor.OPEN), e.isScrolling = !1, Blockly.onTouchUpWrapper_ && (Blockly.unbindEvent_(Blockly.onTouchUpWrapper_), Blockly.onTouchUpWrapper_ = null), Blockly.onMouseMoveWrapper_ && (Blockly.unbindEvent_(Blockly.onMouseMoveWrapper_), Blockly.onMouseMoveWrapper_ = null)
}, Blockly.onMouseMove_ = function(e) {
    if (!(e.touches && 2 <= e.touches.length)) {
        var t = Blockly.getMainWorkspace();
        if (t.isScrolling) {
            Blockly.removeAllRanges();
            var o = e.clientX - t.startDragMouseX,
                n = e.clientY - t.startDragMouseY,
                i = t.startDragMetrics,
                r = t.startScrollX + o,
                s = t.startScrollY + n,
                r = Math.min(r, -i.contentLeft),
                s = Math.min(s, -i.contentTop),
                r = Math.max(r, i.viewWidth - i.contentLeft - i.contentWidth),
                s = Math.max(s, i.viewHeight - i.contentTop - i.contentHeight);
            t.scrollbar.set(-r - i.contentLeft, -s - i.contentTop), Math.sqrt(o * o + n * n) > Blockly.DRAG_RADIUS && Blockly.longStop_(), e.stopPropagation()
        }
    }
}, Blockly.onKeyDown_ = function(e) {
    if (!Blockly.isTargetInput_(e)) {
        if (9 == e.keyCode) return e.preventDefault(), !1;
        if (27 == e.keyCode) Blockly.hideChaff();
        else if (8 == e.keyCode) e.preventDefault();
        else if (46 == e.keyCode) try {
            Blockly.selected && Blockly.selected.isDeletable() && (Blockly.hideChaff(), Blockly.selected.dispose(!0, !0))
        } finally {
            e.preventDefault()
        }
    }
}, Blockly.terminateDrag_ = function() {
    Blockly.BlockSvg.terminateDrag_(), Blockly.Flyout.terminateDrag_()
}, Blockly.longPid_ = 0, Blockly.longStart_ = function(e, t) {
    Blockly.longStop_(), Blockly.longPid_ = setTimeout(function() {
        e.button = 2, t.onMouseDown_(e)
    }, Blockly.LONGPRESS)
}, Blockly.longStop_ = function() {
    Blockly.longPid_ && (clearTimeout(Blockly.longPid_), Blockly.longPid_ = 0)
}, Blockly.copy_ = function(e) {
    var t = Blockly.Xml.blockToDom_(e);
    2 != Blockly.dragMode_ && Blockly.Xml.deleteNext(t);
    var o = e.getRelativeToSurfaceXY();
    t.setAttribute("x", e.RTL ? -o.x : o.x), t.setAttribute("y", o.y), Blockly.clipboardXml_ = t, Blockly.clipboardSource_ = e.workspace
}, Blockly.duplicate_ = function(e) {
    var t = Blockly.clipboardXml_,
        o = Blockly.clipboardSource_;
    Blockly.copy_(e), e.workspace.paste(Blockly.clipboardXml_), Blockly.clipboardXml_ = t, Blockly.clipboardSource_ = o
}, Blockly.onContextMenu_ = function(e) {
    Blockly.isTargetInput_(e) || e.preventDefault()
}, Blockly.hideChaff = function(e) {
    Blockly.Tooltip.hide(), Blockly.WidgetDiv.hide(), e || (e = Blockly.getMainWorkspace(), e.toolbox_ && e.toolbox_.flyout_ && e.toolbox_.flyout_.autoClose && e.toolbox_.clearSelection())
}, Blockly.getMainWorkspaceMetrics_ = function() {
    var e = Blockly.svgSize(this.options.svg);
    this.toolbox_ && (e.width -= this.toolbox_.width);
    var t = Blockly.Flyout.prototype.CORNER_RADIUS - 1,
        o = e.width - t,
        n = e.height - t;
    try {
        var i = this.getCanvas().getBBox()
    } catch (r) {
        return null
    }
    var s = i.width * this.scale,
        a = i.height * this.scale,
        l = i.x * this.scale,
        c = i.y * this.scale;
    return this.scrollbar ? (t = Math.min(l - o / 2, l + s - o), o = Math.max(l + s + o / 2, l + o), s = Math.min(c - n / 2, c + a - n), i = Math.max(c + a + n / 2, c + n)) : (t = i.x, o = t + i.width, s = i.y, i = s + i.height), n = 0, !this.RTL && this.toolbox_ && (n = this.toolbox_.width), {
        viewHeight: e.height,
        viewWidth: e.width,
        contentHeight: i - s,
        contentWidth: o - t,
        viewTop: -this.scrollY,
        viewLeft: -this.scrollX,
        contentTop: s,
        contentLeft: t,
        absoluteTop: 0,
        absoluteLeft: n
    }
}, Blockly.setMainWorkspaceMetrics_ = function(e) {
    if (!this.scrollbar) throw "Attempt to set main workspace scroll without scrollbars.";
    var t = this.getMetrics();
    goog.isNumber(e.x) && (this.scrollX = -t.contentWidth * e.x - t.contentLeft), goog.isNumber(e.y) && (this.scrollY = -t.contentHeight * e.y - t.contentTop), e = this.scrollX + t.absoluteLeft, t = this.scrollY + t.absoluteTop, this.translate(e, t), this.options.gridPattern && (this.options.gridPattern.setAttribute("x", e), this.options.gridPattern.setAttribute("y", t), goog.userAgent.IE && this.updateGridPattern_())
}, Blockly.doCommand = function(e) {
    Blockly.Realtime.isEnabled() ? Blockly.Realtime.doCommand(e) : e()
}, Blockly.addChangeListener = function(e) {
    return console.warn("Deprecated call to Blockly.addChangeListener, use workspace.addChangeListener instead."), Blockly.getMainWorkspace().addChangeListener(e)
}, Blockly.getMainWorkspace = function() {
    return Blockly.mainWorkspace
}, goog.global.Blockly || (goog.global.Blockly = {}), goog.global.Blockly.getMainWorkspace = Blockly.getMainWorkspace, goog.global.Blockly.addChangeListener = Blockly.addChangeListener, define("blocklylib", function(e) {
    return function() {
        var t;
        return t || e.Blockly
    }
}(this)), define("text-group", ["jquery", "signals", "./queue"], function(e, t, o) {
    function n(n) {
        var i, r;
        this.load = function(s) {
            var a = new t,
                l = new o(function() {
                    a.dispatch(i, r)
                });
            return l.add(), e.getJSON(s + "en.json", function(e) {
                i = e, l.remove()
            }), "en" != n && (l.add(), e.getJSON(s + n + ".json", function(e) {
                r = e, l.remove()
            })), a
        }, this.get = function(e) {
            var t;
            return r && (t = r[e], void 0 !== t) ? t : (t = i[e], void 0 !== t ? t : "[" + e + "]")
        }
    }
    return n
}), define("lang", ["blocklylib", "jquery", "signals", "./text-group"], function(e, t, o, n) {
    var i, r, s = {},
        a = "en";
    return s.textLoaded = new o, s.getBlocksGroup = function() {
        return r
    }, s.get = function(e, t) {
        var o = i.get(e);
        return t && t.forEach(function(e, t) {
            t++, o = o.replace("$" + t, e), o = o.replace("%" + t, e)
        }), o
    }, s.getLangCode = function() {
        return a
    }, s.change = function(e) {
        s.load(e)
    }, s.load = function(o) {
        var l = 3;
        a = o;
        var c = function() {
            l--, 0 === l && s.textLoaded.dispatch()
        };
        r = new n(o), r.load("json/blocks/").addOnce(function(e, t) {
            c()
        }), i = new n(o), i.load("json/ui/").addOnce(function(e, t) {
            c()
        }), t.getJSON("lib/blockly/msg/json/" + o + ".json", function(t) {
            e.Msg = t, c()
        })
    }, s
}), define("ui/tabs", ["jquery", "signals"], function(e, t) {
    function o(t) {
        e("body").removeClass(i + "-active"), t != i && n.tabSelected.dispatch(t, i), i = t, e("body").addClass(i + "-active")
    }
    var n = {};
    n.BLOCKS_TAB = "blocks", n.BASIC_TAB = "basic", n.JS_TAB = "js", n.DEBUG_TAB = "debug", n.XML_TAB = "xml", n.tabSelected = new t, n.init = function() {
        e("#tabs").tab();
        for (var t = [n.BLOCKS_TAB, n.BASIC_TAB, n.JS_TAB, n.DEBUG_TAB, n.XML_TAB], i = 0; i < t.length; i++) {
            var r = t[i];
            e("#tab-" + r).click(function(e) {
                return function() {
                    o(e)
                }
            }(r))
        }
    }, n.addLocks = function() {
        e(".lock").addClass("glyphicon glyphicon-lock")
    }, n.removeLocks = function() {
        e(".lock").removeClass("glyphicon glyphicon-lock")
    }, n.setActive = function(t) {
        e(".tab-pane,.nav-tabs li").removeClass("active"), e("#pane-" + t + ",#tab-" + t).addClass("active"), o(t)
    }, n.getActive = function() {
        return i
    };
    var i = n.BLOCKS_TAB;
    return e("body").addClass(i + "-active"), n.addLocks(), n
}), define("config", [], function() {
    var e = "undefined" != typeof chrome && chrome.runtime && null != chrome.runtime.id,
        t = "undefined" != typeof eoWebBrowser,
        o = "http://www.picaxecloud.com";
    return {
        version: 0,
        isApp: e,
        isPicaxeEditor: t,
        cloudUrl: o
    }
}), define("events", ["signals"], function(e) {
    var t = {};
    return t.clipboardSet = new e, t.blockAdded = new e, t.newProject = new e, t.blockHistoryChange = new e, t.workspaceChange = new e, t.selectionChange = new e, t.inited = new e, t.compilerError = new e, t.modeChanged = new e, t.menuReady = new e, t.volumeSet = new e, t.requestBlocklyRedraw = new e, t.projectParsed = new e, t.pinNamesUpdated = new e, t.debugClosed = new e, t.simulatorClosed = new e, t.serialAction = new e, t.rtsConnect = new e, t.rtsDisconnect = new e, t.rtsProgram = new e, t
}), define("ui/modals", ["jquery", "signals", "../lang", "../events"], function(e, t, o, n) {
    function i(t) {
        e(".modal-dialog").hide(), e("#modals").modal("show"), e("#" + t).show()
    }

    function r() {
        e("#modals").modal("hide")
    }
    e("#confirm-msg .accept").click(function() {
        s.dispatch(!0)
    }), e("#confirm-msg .decline").click(function() {
        s.dispatch(!1)
    }), n.inited.addOnce(function() {
        e("#modals").modal({
            backdrop: "static",
            show: !1
        })
    }), e("#modals").on("hidden.bs.modal", function(e) {
        a.hidden.dispatch()
    });
    var s = new t,
        a = {};
    return a.hidden = new t, a.showProgressModal = function(t, n, r) {
        function s(e) {
            c.css("width", Math.round(100 * e) + "%")
        }
        var a = "data-progress";
        i(a), e("#data-progress .modal-title").text(t), e("#data-progress .status").remove();
        var l = e("#" + a);
        r && (l.find(".modal-body").append("<div class='status' />"), r(function(t, n) {
            var i = o.get(t);
            console.log("status triggered:" + i), n && n.forEach(function(e, t) {
                i = i.replace("%" + (t + 1), e)
            }), e("#data-progress .status").append(i + "\n")
        }));
        var c = l.find(".progress-bar");
        c.toggleClass("progress-bar-striped", null == r), n && (n(s), s(0))
    }, a.hideProgressModal = function() {
        r()
    }, a.showMessageModal = function(t, o, n, a, l, c) {
        e("#confirm-msg .modal-title").text(t), e("#confirm-msg .modal-body").html(o), e("#confirm-msg .accept").text(n), e("#confirm-msg .decline").text(a), e("#confirm-msg .decline").toggle(null !== a);
        var u = function() {
                s.removeAll(), r()
            },
            g = function() {
                var e = l ? l() : !0;
                "boolean" == typeof e && e === !1 || u()
            },
            p = function() {
                c && c(), u()
            };
        s.add(function(e) {
            e ? g() : p()
        }), i("confirm-msg")
    }, a.showRenamePrompt = function(e, t, n) {
        a.showPromptModal(e, t, o.get("OK_ACTION"), o.get("CANCEL_ACTION"), n, null, 30)
    }, a.showPromptModal = function(t, o, n, a, l, c, u) {
        e("#confirm-msg .modal-title").text(t), e("#confirm-msg .accept").text(n), e("#confirm-msg .decline").text(a), e("#confirm-msg .decline").toggle(null !== a);
        var g = e("<input>").attr({
            type: "text",
            "class": "form-control",
            value: o
        }).on("keydown", function(e) {
            13 == e.keyCode && h()
        });
        "number" == typeof u && g.attr("maxlength", u), e("#confirm-msg .modal-body").empty().append(g);
        var p = function() {
                s.removeAll(), r()
            },
            h = function() {
                p(), l(g.val())
            };
        s.addOnce(function(e) {
            e ? h() : p()
        }), i("confirm-msg")
    }, a
}), define("ui/ui", ["jquery", "signals", "../lang", "../config", "./modals"], function(e, t, o, n, i) {
    function r() {
        function t(t, n) {
            e(t).text(o.get(n))
        }

        function n(t, n) {
            e(t).attr({
                title: o.get(n)
            })
        }
        document.title = o.get("TITLE"), t("#title", "TITLE"), t("#tab-blocks a .tab-label", "TAB_BLOCKS"), t("#tab-basic a .tab-label", "TAB_BASIC"), t("#tab-js a .tab-label", "TAB_JS"), t("#tab-debug a .tab-label", "TAB_DEBUG"), t("#tab-xml a .tab-label", "TAB_XML"), e("#mode-group span").eq(0).text(o.get("MODE_BLOCKS")), e("#mode-group span").eq(1).text(o.get("MODE_CODE")), t("#nav-help a", "NAV_HELP"), t("#prompt-msg button", "OK_ACTION"), e("#search-input").attr("placeholder", o.get("SEARCH_FOR")), e("#gotoline-input").attr("placeholder", o.get("GO_TO_LINE")), t("#search-input", "SEARCH_FOR"), t("#gotoline-action", "GO_ACTION"), t("#mode-group p", "MODE"), t(".variables .var-name", "SIM_VAR_NAME"), t(".variables .var-val", "SIM_VAR_VALUE"), t("#rtsDropdown .btn-label", "SIM_TITLE"), t("#sim-connect", "SIM_CONNECT"), t("#sim-disconnect", "SIM_DISCONNECT"), t("#sim-download", "SIM_DOWNLOAD"), t("#userMenuLabel", "px-um-heading"), n("#sim-run", "SIM_START"), n("#sim-pause", "SIM_BREAK"), n("#sim-step", "SIM_STEP"), n("#sim-reset", "SIM_STOP"), n("#sim-speed", "SIM_DELAY"), ["edit", "logout", "login"].forEach(function(e) {
            e = "px-um-" + e, t("#" + e, e)
        })
    }

    function s(e) {
        if (!e.hasAttribute("edited"))
            for (var t = e.getElementsByTagName("category"), n = t.length, i = 0; n > i; i++) {
                var r = t[i],
                    s = r.getAttribute("id");
                if (s) {
                    var a = o.get(s);
                    a && r.setAttribute("name", a)
                }
            }
    }
    var a = {};
    return a.init = function(t) {
        e("#wrapper").css("visibility", "visible"), r(), s(t), e("#version").text("v" + n.version)
    }, a.setUserName = function(t) {
        e("#userMenuLabel").text(t ? t : o.get("px-um-heading"))
    }, a
}), define("utils", [], function() {
    var e = {};
    return e.getStringParamFromUrl = function(e, t) {
        var o = window.location.search.match(new RegExp("[?&]" + e + "=([^&]+)"));
        return o ? decodeURIComponent(o[1].replace(/\+/g, "%20")) : t
    }, e.mixin = function(e, t) {
        for (var o in t) e[o] = t[o]
    }, e
});
var saveAs = saveAs || function(e) {
    if ("undefined" == typeof navigator || !/MSIE [1-9]\./.test(navigator.userAgent)) {
        var t = e.document,
            o = function() {
                return e.URL || e.webkitURL || e
            },
            n = t.createElementNS("http://www.w3.org/1999/xhtml", "a"),
            i = "download" in n,
            r = function(e) {
                var t = new MouseEvent("click");
                e.dispatchEvent(t)
            },
            s = e.webkitRequestFileSystem,
            a = e.requestFileSystem || s || e.mozRequestFileSystem,
            l = function(t) {
                (e.setImmediate || e.setTimeout)(function() {
                    throw t
                }, 0)
            },
            c = "application/octet-stream",
            u = 0,
            g = 500,
            p = function(t) {
                var n = function() {
                    "string" == typeof t ? o().revokeObjectURL(t) : t.remove()
                };
                e.chrome ? n() : setTimeout(n, g)
            },
            h = function(e, t, o) {
                t = [].concat(t);
                for (var n = t.length; n--;) {
                    var i = e["on" + t[n]];
                    if ("function" == typeof i) try {
                        i.call(e, o || e)
                    } catch (r) {
                        l(r)
                    }
                }
            },
            d = function(e) {
                return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type) ? new Blob(["\ufeff", e], {
                    type: e.type
                }) : e
            },
            f = function(t, l) {
                t = d(t);
                var g, f, m, y = this,
                    v = t.type,
                    _ = !1,
                    b = function() {
                        h(y, "writestart progress write writeend".split(" "))
                    },
                    C = function() {
                        if (!_ && g || (g = o().createObjectURL(t)), f) f.location.href = g;
                        else {
                            var n = e.open(g, "_blank");
                            void 0 == n && "undefined" != typeof safari && (e.location.href = g)
                        }
                        y.readyState = y.DONE, b(), p(g)
                    },
                    E = function(e) {
                        return function() {
                            return y.readyState !== y.DONE ? e.apply(this, arguments) : void 0
                        }
                    },
                    S = {
                        create: !0,
                        exclusive: !1
                    };
                return y.readyState = y.INIT, l || (l = "download"), i ? (g = o().createObjectURL(t), n.href = g, n.download = l, void setTimeout(function() {
                    r(n), b(), p(g), y.readyState = y.DONE
                })) : (e.chrome && v && v !== c && (m = t.slice || t.webkitSlice, t = m.call(t, 0, t.size, c), _ = !0), s && "download" !== l && (l += ".download"), (v === c || s) && (f = e), a ? (u += t.size, void a(e.TEMPORARY, u, E(function(e) {
                    e.root.getDirectory("saved", S, E(function(e) {
                        var o = function() {
                            e.getFile(l, S, E(function(e) {
                                e.createWriter(E(function(o) {
                                    o.onwriteend = function(t) {
                                        f.location.href = e.toURL(), y.readyState = y.DONE, h(y, "writeend", t), p(e)
                                    }, o.onerror = function() {
                                        var e = o.error;
                                        e.code !== e.ABORT_ERR && C()
                                    }, "writestart progress write abort".split(" ").forEach(function(e) {
                                        o["on" + e] = y["on" + e]
                                    }), o.write(t), y.abort = function() {
                                        o.abort(), y.readyState = y.DONE
                                    }, y.readyState = y.WRITING
                                }), C)
                            }), C)
                        };
                        e.getFile(l, {
                            create: !1
                        }, E(function(e) {
                            e.remove(), o()
                        }), E(function(e) {
                            e.code === e.NOT_FOUND_ERR ? o() : C()
                        }))
                    }), C)
                }), C)) : void C())
            },
            m = f.prototype,
            y = function(e, t) {
                return new f(e, t)
            };
        return "undefined" != typeof navigator && navigator.msSaveOrOpenBlob ? function(e, t) {
            return navigator.msSaveOrOpenBlob(d(e), t)
        } : (m.abort = function() {
            var e = this;
            e.readyState = e.DONE, h(e, "abort")
        }, m.readyState = m.INIT = 0, m.WRITING = 1, m.DONE = 2, m.error = m.onwritestart = m.onprogress = m.onwrite = m.onabort = m.onerror = m.onwriteend = null, y)
    }
}("undefined" != typeof self && self || "undefined" != typeof window && window || this.content);
if ("undefined" != typeof module && module.exports ? module.exports.saveAs = saveAs : "undefined" != typeof define && null !== define && null != define.amd && define("FileSaver", [], function() {
        return saveAs
    }), "function" != typeof Blob) var Blob = function(e) {
    var t = e.BlobBuilder || e.WebKitBlobBuilder || e.MozBlobBuilder || e.MSBlobBuilder || function(e) {
        var t = function(e) {
                return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]
            },
            o = function() {
                this.data = []
            },
            n = function(e, t, o) {
                this.data = e, this.size = e.length, this.type = t, this.encoding = o
            },
            i = o.prototype,
            r = n.prototype,
            s = e.FileReaderSync,
            a = function(e) {
                this.code = this[this.name = e]
            },
            l = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
            c = l.length,
            u = e.URL || e.webkitURL || e,
            g = u.createObjectURL,
            p = u.revokeObjectURL,
            h = u,
            d = e.btoa,
            f = e.atob,
            m = !1,
            y = function(e) {
                m = !e
            },
            v = e.ArrayBuffer,
            _ = e.Uint8Array;
        for (n.fake = r.fake = !0; c--;) a.prototype[l[c]] = c + 1;
        try {
            _ && y.apply(0, new _(1))
        } catch (b) {}
        return u.createObjectURL || (h = e.URL = {}), h.createObjectURL = function(e) {
            var t, o = e.type;
            return null === o && (o = "application/octet-stream"), e instanceof n ? (t = "data:" + o, "base64" === e.encoding ? t + ";base64," + e.data : "URI" === e.encoding ? t + "," + decodeURIComponent(e.data) : d ? t + ";base64," + d(e.data) : t + "," + encodeURIComponent(e.data)) : g ? g.call(u, e) : void 0
        }, h.revokeObjectURL = function(e) {
            "data:" !== e.substring(0, 5) && p && p.call(u, e)
        }, i.append = function(e) {
            var o = this.data;
            if (_ && e instanceof v)
                if (m) o.push(String.fromCharCode.apply(String, new _(e)));
                else
                    for (var i = "", r = new _(e), l = 0, c = r.length; c > l; l++) i += String.fromCharCode(r[l]);
            else if ("Blob" === t(e) || "File" === t(e)) {
                if (!s) throw new a("NOT_READABLE_ERR");
                var u = new s;
                o.push(u.readAsBinaryString(e))
            } else e instanceof n ? "base64" === e.encoding && f ? o.push(f(e.data)) : "URI" === e.encoding ? o.push(decodeURIComponent(e.data)) : "raw" === e.encoding && o.push(e.data) : ("string" != typeof e && (e += ""), o.push(unescape(encodeURIComponent(e))))
        }, i.getBlob = function(e) {
            return arguments.length || (e = null), new n(this.data.join(""), e, "raw")
        }, i.toString = function() {
            return "[object BlobBuilder]"
        }, r.slice = function(e, t, o) {
            var i = arguments.length;
            return 3 > i && (o = null), new n(this.data.slice(e, i > 1 ? t : this.data.length), o, this.encoding)
        }, r.toString = function() {
            return "[object Blob]"
        }, o
    }(e);
    return function(e, o) {
        var n = o ? o.type || "" : "",
            i = new t;
        if (e)
            for (var r = 0, s = e.length; s > r; r++) i.append(e[r]);
        return i.getBlob(n)
    }
}(self);
define("blob", function(e) {
        return function() {
            var t;
            return t || e.Blob
        }
    }(this)), define("../lib/shared/filesystem", ["jquery", "signals", "FileSaver", "blob"], function(e, t, o, n) {
        function i(e) {
            var t = new window.FileReader;
            return t.onloadend = function(t) {
                var o = t.target;
                2 == o.readyState && (c.dispatch(e.name, o.result), a.val(""))
            }, t
        }

        function r(e, t, o) {
            l.addOnce(function(e) {
                t(e, i(e))
            }), c.addOnce(o), s(e)
        }

        function s(e) {
            a.attr("accept", "." + e), a.click()
        }
        var a = e('<input type="file" id="load" style="display:none" />');
        e("body").append(a), a.change(function(e) {
            var t = e.target.files;
            1 == t.length && l.dispatch(t[0])
        });
        var l = new t,
            c = new t,
            u = {};
        return u.loadText = function(e, t) {
            r(e, function(e, t) {
                t.readAsText(e)
            }, t)
        }, u.loadArrayBuffer = function(e, t) {
            r(e, function(e, t) {
                t.readAsArrayBuffer(e)
            }, t)
        }, u.getLocalFileAs = function(e, t, o) {
            var n = new XMLHttpRequest;
            n.open("GET", e, !0), n.responseType = t, n.onload = function(e) {
                o(n.response)
            }, n.send(null)
        }, u.saveBlob = function(e, t, n, i) {
            var r = function(e) {
                    n && n(e)
                },
                s = function() {
                    i && i()
                };
            if ("undefined" != typeof chrome && chrome.fileSystem) {
                var a = {};
                if (-1 != t.indexOf(".")) {
                    var l = t.split(".").pop();
                    a = {
                        extensions: [l]
                    }
                }
                chrome.fileSystem.chooseEntry({
                    type: "saveFile",
                    suggestedName: t,
                    accepts: [a]
                }, function(t) {
                    return null != chrome.runtime.lastError ? (console.warn("filesystem save:" + chrome.runtime.lastError.message), void s()) : t ? void t.createWriter(function(o) {
                        o.onwriteend = function(e) {
                            console.info("filesystem save. Write completed."), r(t.name)
                        }, o.onerror = function(e) {
                            console.error("filesystem save. Write failed: " + e.toString()), s()
                        }, o.write(e)
                    }, function() {
                        console.error("filesystem save. Couldn't create writer"), s()
                    }) : (console.warn("filesystem save. user didn't select a file"), void s())
                })
            } else o(e, t)
        }, u.save = function(e, t, o, i, r) {
            var s = new n([e], {
                type: t
            });
            u.saveBlob(s, o, i, r)
        }, u
    }), define("blockly/parse-events", [], function() {
        var e = {};
        return e.types = {
            ERROR: "error",
            WARNING: "warning",
            INFO: "info"
        }, e.msgs = {
            VALUE_CHANGED: "VALUE_CHANGED",
            BAD_VAR_NAME: "BAD_VAR_NAME",
            RESERVED_VAR_NAME: "RESERVED_VAR_NAME",
            BLOCKS_IGNORED: "BLOCKS_IGNORED",
            NO_START_BLOCK: "NO_START_BLOCK"
        }, e.onEvent = function(e, t) {}, e
    }), define("messages", ["jquery", "./utils", "./lang", "./blockly/parse-events"], function(e, t, o, n) {
        function i(t, o) {
            var n = '<div class="alert ' + o + ' alert-dismissible fade in" role="alert">';
            n += '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">x</span></button>', n += t, n += "</div>", e("#messages").html(n)
        }
        var r = {};
        return r.showBlockly = function(e, t) {
            for (var r = o.get(t), s = 2, a = 1; s < arguments.length; s++, a++) r = r.replace("%" + a, arguments[s]);
            var l = "alert-info";
            e == n.types.WARNING ? l = "alert-warning" : e == n.types.ERROR && (l = "alert-danger"), i(r, l + " alert-blockly")
        }, r.showSyntaxError = function(t, n) {
            t = t.replace("line# 0, col# 0 \n\n", "");
            var r = "<div class='syntax-error-label'>" + o.get("ERROR_COMPILER") + "</div>";
            if (r += "<div class='syntax-error-info'>" + t + "</div>", i(r, "alert-danger"), n) {
                var s = e("#messages .alert"),
                    a = "close.bs.alert";
                s.on(a, function() {
                    s.off(a), n()
                })
            }
        }, r.showSuccess = function(e) {
            i(e, "alert-success")
        }, r.show = function(e, t) {
            var o = t ? "alert-danger" : "alert-info";
            i(e, o)
        }, r.clear = function() {
            e("#messages .alert").length > 0 && e("#messages .alert").alert("close"), e("#messages").html("")
        }, r.clearBlockly = function() {
            e("#messages .alert-blockly").alert("close")
        }, r
    }), define("data-model", ["signals", "storage"], function(e, t) {
        function o(o) {
            var n = this;
            this.value = null, this.valueSet = new e, this.set = function(e) {
                n.value = e, n.store(), n.valueSet.dispatch(e)
            }, this.store = function() {
                var e = {};
                e[o] = n.value, t.set(e, function() {})
            }, this.restore = function(e) {
                t.get([o], function(t) {
                    t[o] && (n.value = t[o]), e && e(n.value)
                })
            }
        }
        return o
    }), define("picaxe/models", ["signals", "data-model", "../config"], function(e, t, o) {
        var n = new t("picaxe-model");
        n.ready = new e;
        var i = "08M2,14M2,18M2,20M2,20X2,28X1,28X2,40X1,40X2".split(",");
        return n.getList = function() {
            return i.slice()
        }, n.restore(function(e) {
            null == e && n.set(i[0]), n.ready.dispatch(n.value)
        }), n
    }), define("settings/pin-names", ["../utils", "../events"], function(e, t) {
        function o() {
            t.pinNamesUpdated.dispatch()
        }
        var n, i = {},
            r = "|",
            s = ":";
        return i.deserialise = function(e) {
            var t = e.split(r);
            i.reset(), t.forEach(function(e) {
                var t = e.split(s);
                t[0] != t[1] && (n[t[0]] = t[1])
            }), o()
        }, i.serialise = function() {
            var e = Object.keys(n),
                t = e.map(function(e) {
                    return e + s + n[e]
                });
            return t.join(r)
        }, i.updateAll = function(t) {
            e.mixin(n, t), o()
        }, i.getAll = function() {
            var t = {};
            return e.mixin(t, n), t
        }, i.getSymbols = function() {
            var e = Object.keys(n),
                t = e.map(function(e) {
                    return e == n[e] ? "" : ";symbol " + n[e] + " = " + e
                }),
                o = t.join("\n");
            return "" != o && (o += "\n"), o
        }, i.get = function(e) {
            return n[e] || e
        }, i.deleteId = function(e) {
            delete n[e]
        }, i.reset = function() {
            n = {}
        }, i.reset(), i
    }), define("blockly/io", ["blocklylib", "../settings/pin-names"], function(e, t) {
        function o(e, t, o) {
            function i(t) {
                var n = e.getFieldValue(t),
                    i = o[s].split(" "),
                    a = e.getField(t);
                a.menuGenerator_ = r, -1 != i.indexOf(n) ? a.setValue(n) : a.setValue(i[0])
            }
            var r = n(o),
                s = E.selectedType;
            t instanceof Array || (t = [t]), t.forEach(i)
        }

        function n(e) {
            var o = e[E.selectedType].split(" "),
                n = o.map(function(e) {
                    return [t.get(e), e]
                });
            return n
        }
        var i = {
                "08": "C.0 C.1 C.2 C.3 C.4",
                "08M": "C.0 C.1 C.2 C.3 C.4",
                "08M2": "C.0 C.1 C.2 C.3 C.4 C.5",
                "14M": "B.0 B.1 B.2 B.3 B.4 B.5 C.0 C.1 C.2 C.4 C.5",
                "14M2": "B.0 B.1 B.2 B.3 B.4 B.5 C.0 C.1 C.2 C.4 C.5",
                18: "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.6 C.7",
                "18A": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.6 C.7",
                "18M": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.6 C.7",
                "18X": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.6 C.7",
                "18M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "20M": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "20M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "20X2": "A.0 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                28: "A.0 A.1 A.2 A.3 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28A": "A.0 A.1 A.2 A.3 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X": "A.0 A.1 A.2 A.3 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X1": "A.0 A.1 A.2 A.3 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X2": "A.0 A.1 A.2 A.3 A.4 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "40X": "A.0 A.1 A.2 A.3 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7",
                "40X1": "A.0 A.1 A.2 A.3 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7",
                "40X2": "A.0 A.1 A.2 A.3 A.4 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7"
            },
            r = {
                "08": "C.1 C.2 C.3 C.4",
                "08M": "C.1 C.2 C.3 C.4",
                "08M2": "C.1 C.2 C.3 C.4 C.5",
                "14M": "C.0 C.1 C.2 C.3 C.4",
                "14M2": "B.1 B.2 B.3 B.4 B.5 C.0 C.1 C.2 C.3 C.4",
                18: "C.0 C.1 C.2 C.6 C.7",
                "18A": "C.0 C.1 C.2 C.6 C.7",
                "18M": "C.0 C.1 C.2 C.6 C.7",
                "18X": "C.0 C.1 C.2 C.6 C.7",
                "18M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.4 C.5 C.6 C.7",
                "20M": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "20M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "20X2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                28: "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28A": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X1": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X2": "A.0 A.1 A.2 A.3 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "40X": "D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7",
                "40X1": "D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7",
                "40X2": "A.0 A.1 A.2 A.3 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7"
            },
            s = {
                "08": "C.0 C.1 C.2 C.4",
                "08M": "C.0 C.1 C.2 C.4",
                "08M2": "C.0 C.1 C.2 C.4",
                "14M": "B.0 B.1 B.2 B.3 B.4 B.5",
                "14M2": "B.0 B.1 B.2 B.3 B.4 B.5 C.0 C.1 C.2 C.4",
                18: "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18A": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18M": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18X": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.6 C.7",
                "20M": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "20M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                "20X2": "A.0 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                28: "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28A": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28X": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28X1": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28X2": "A.0 A.1 A.2 A.3 A.4 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "40X": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "40X1": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "40X2": "A.0 A.1 A.2 A.3 A.4 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7"
            },
            a = {
                "08": "C.1 C.2 C.4",
                "08M": "C.1 C.2 C.4",
                "08M2": "C.1 C.2 C.4",
                "14M": "",
                "14M2": "B.1 B.2 B.3 B.4 B.5 C.0 C.1 C.2 C.4",
                18: "",
                "18A": "",
                "18M": "",
                "18X": "",
                "18M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.6 C.7",
                "20M": "",
                "20M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                "20X2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                28: "",
                "28A": "",
                "28X": "",
                "28X1": "",
                "28X2": "A.0 A.1 A.2 A.3 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "40X": "",
                "40X1": "",
                "40X2": "A.0 A.1 A.2 A.3 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7"
            },
            l = {
                "08": "",
                "08M": "C.1 C.2 C.4",
                "08M2": "C.1 C.2 C.4",
                "14M": "C.0 C.1 C.2 C.4",
                "14M2": "B.1 B.2 B.3 B.4 B.5 C.0 C.1 C.2 C.4",
                18: "",
                "18A": "C.0 C.1 C.2 C.6 C.7",
                "18M": "C.0 C.1 C.2 C.6 C.7",
                "18X": "C.0 C.1 C.2 C.6 C.7",
                "18M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.6 C.7",
                "20M": "C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                "20M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                "20X2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                28: "",
                "28A": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X1": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X2": "A.0 A.1 A.2 A.3 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "40X": "D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7",
                "40X1": "D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7",
                "40X2": "A.0 A.1 A.2 A.3 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7"
            },
            c = {
                "08": "C.1",
                "08M": "C.1 C.2 C.4",
                "08M2": "C.1 C.2 C.4",
                "14M": "C.0 C.4",
                "14M2": "B.1 B.2 B.3 B.4 B.5 C.0 C.4",
                18: "C.0 C.1 C.2",
                "18A": "C.0 C.1 C.2",
                "18M": "C.0 C.1 C.2",
                "18X": "C.0 C.1 C.2",
                "18M2": "B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2",
                "20M": "C.1 C.2 C.3 C.7",
                "20M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 C.1 C.2 C.3 C.7",
                "20X2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 C.1 C.2 C.3 C.7",
                28: "A.0 A.1 A.2 A.3",
                "28A": "A.0 A.1 A.2 A.3",
                "28X": "A.0 A.1 A.2 A.3",
                "28X1": "A.0 A.1 A.2 A.3",
                "28X2": "A.0 A.1 A.2 A.3 B.0 B.1 B.2 B.3 B.4 B.5 C.2 C.3 C.4 C.5 C.6 C.7",
                "40X": "A.0 A.1 A.2 A.3 A.5 A.6 A.7",
                "40X1": "A.0 A.1 A.2 A.3 A.5 A.6 A.7",
                "40X2": "A.0 A.1 A.2 A.3 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7"
            },
            u = {
                "08": "",
                "08M": "C.2",
                "08M2": "C.2",
                "14M": "B.0 B.1 B.2 B.3 B.4 B.5",
                "14M2": "B.0 B.1 B.2 B.3 B.4 B.5 C.0 C.1 C.2 C.4",
                18: "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18A": "",
                "18M": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18X": "",
                "18M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.6 C.7",
                "20M": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "20M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                "20X2": "A.0 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.7",
                28: "",
                "28A": "",
                "28X": "",
                "28X1": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28X2": "A.0 A.1 A.2 A.3 A.4 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "40X": "",
                "40X1": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "40X2": "A.0 A.1 A.2 A.3 A.4 A.5 A.6 A.7 B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7 C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7 D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7"
            },
            g = {
                "08": "",
                "08M": "C.0 C.1 C.2 C.4",
                "08M2": "C.0 C.1 C.2 C.4",
                "14M": "B.0 B.1 B.2 B.3 B.4 B.5",
                "14M2": "B.0 B.1 B.2 B.3 B.4 B.5",
                18: "",
                "18A": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18M": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18X": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "18M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "20M": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "20M2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "20X2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                28: "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28A": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28X": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28X1": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "28X2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "40X": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "40X1": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7",
                "40X2": "B.0 B.1 B.2 B.3 B.4 B.5 B.6 B.7"
            },
            p = {
                "08": "A B",
                "08M": "A B",
                "08M2": "A B",
                "14M": "A B C",
                "14M2": "A B C",
                18: "A B C D",
                "18A": "A B C D",
                "18M": "A B C D",
                "18X": "A B C D",
                "18M2": "A B C D",
                "20M": "A B C D",
                "20M2": "A B C D",
                "20X2": "A B C D",
                28: "A B C D",
                "28A": "A B C D",
                "28X": "A B C D",
                "28X1": "A B C D",
                "28X2": "A B C D",
                "40X": "A B C D",
                "40X1": "A B C D",
                "40X2": "A B C D"
            },
            h = {
                "08": "",
                "08M": "C.2",
                "08M2": "C.2",
                "14M": "",
                "14M2": "B.2 B.4 C.0 C.2",
                18: "",
                "18A": "",
                "18M": "B.3",
                "18X": "B.3",
                "18M2": "B.3 B.6",
                "20M": "",
                "20M2": "B.1 C.2 C.3 C.5",
                "20X2": "C.5",
                28: "",
                "28A": "",
                "28X": "C.1 C.2",
                "28X1": "C.1 C.2",
                "28X2": "B.0 B.5 C.1 C.2",
                "40X": "C.1 C.2",
                "40X1": "C.1 C.2",
                "40X2": "C.1 C.2"
            },
            d = {
                "08": "N2400 N1200 N600 N300 T2400 T1200 T600 T300",
                "08M": "N2400 N1200 N600 N300 T2400 T1200 T600 T300",
                "08M2": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "14M": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "14M2": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                18: "N2400 N1200 N600 N300 T2400 T1200 T600 T300",
                "18A": "N2400 N1200 N600 N300 T2400 T1200 T600 T300",
                "18M": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "18X": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "18M2": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "20M": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "20M2": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "20X2": "N4800 N2400 N1200 N9600 T4800 T2400 T1200 T9600",
                28: "N2400 N1200 N600 N300 T2400 T1200 T600 T300",
                "28A": "N2400 N1200 N600 N300 T2400 T1200 T600 T300",
                "28X": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "28X1": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "28X2": "N4800 N2400 N1200 N9600 T4800 T2400 T1200 T9600",
                "40X": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "40X1": "N2400 N1200 N600 N4800 T2400 T1200 T600 T4800",
                "40X2": "N4800 N2400 N1200 N9600 T4800 T2400 T1200 T9600"
            },
            f = {
                "08": "",
                "08M": "",
                "08M2": "",
                "14M": "",
                "14M2": "",
                18: "",
                "18A": "",
                "18M": "",
                "18X": "",
                "18M2": "",
                "20M": "",
                "20M2": "",
                "20X2": "B9600_8 B300_8 B600_8 B1200_8 B2400_8 B4800_8 B19200_8 B31250_8 B38400_8 B57600_8 B115200_8",
                28: "",
                "28A": "",
                "28X": "",
                "28X1": "B9600_4 B300_4 B600_4 B1200_4 B2400_4 B4800_4 B19200_4 B31250_4 B38400_4 B57600_4 B115200_4",
                "28X2": "B9600_8 B300_8 B600_8 B1200_8 B2400_8 B4800_8 B19200_8 B31250_8 B38400_8 B57600_8 B115200_8",
                "40X": "",
                "40X1": "B9600_4 B300_4 B600_4 B1200_4 B2400_4 B4800_4 B19200_4 B31250_4 B38400_4 B57600_4 B115200_4",
                "40X2": "B9600_8 B300_8 B600_8 B1200_8 B2400_8 B4800_8 B19200_8 B31250_8 B38400_8 B57600_8 B115200_8"
            },
            m = {
                "08": "",
                "08M": "",
                "08M2": "",
                "14M": "",
                "14M2": "0 1",
                18: "",
                "18A": "",
                "18M": "",
                "18X": "",
                "18M2": "0 1",
                "20M": "",
                "20M2": "0 1",
                "20X2": "",
                28: "",
                "28A": "",
                "28X": "",
                "28X1": "",
                "28X2": "0 1 2 3",
                "40X": "",
                "40X1": "",
                "40X2": "0 1 2 3"
            },
            y = {
                "08": "C",
                "08M": "C",
                "08M2": "C",
                "14M": "C",
                "14M2": "B C",
                18: "C",
                "18A": "C",
                "18M": "C",
                "18X": "C",
                "18M2": "B C",
                "20M": "C",
                "20M2": "B C",
                "20X2": "B C",
                28: "C",
                "28A": "C",
                "28X": "C",
                "28X1": "C",
                "28X2": "B C",
                "40X": "D",
                "40X1": "D",
                "40X2": "A B C D"
            },
            v = {
                "08": "C",
                "08M": "C",
                "08M2": "C",
                "14M": "B",
                "14M2": "B C",
                18: "B",
                "18A": "B",
                "18M": "B",
                "18X": "B",
                "18M2": "B C",
                "20M": "B",
                "20M2": "B C",
                "20X2": "B C",
                28: "B",
                "28A": "B",
                "28X": "B",
                "28X1": "B",
                "28X2": "B C",
                "40X": "B",
                "40X1": "B",
                "40X2": "A B C D"
            },
            _ = {
                "08": "C",
                "08M": "C",
                "08M2": "C",
                "14M": "",
                "14M2": "B C",
                18: "",
                "18A": "",
                "18M": "",
                "18X": "",
                "18M2": "B C",
                "20M": "",
                "20M2": "B C",
                "20X2": "B C",
                28: "",
                "28A": "",
                "28X": "",
                "28X1": "",
                "28X2": "B C",
                "40X": "",
                "40X1": "",
                "40X2": "A B C D"
            },
            b = {
                "08": "",
                "08M": "C.1 C.2 C.3 C.4",
                "08M2": "C.1 C.2 C.3 C.4",
                "14M": "C.0 C.1 C.2",
                "14M2": "C.0 C.1 C.2",
                18: "",
                "18A": "C.0 C.1 C.2 C.6 C.7",
                "18M": "C.0 C.1 C.2 C.6 C.7",
                "18X": "C.0 C.1 C.2 C.6 C.7",
                "18M2": "C.0 C.1 C.2 C.4 C.5 C.6 C.7",
                "20M": "C.1 C.2 C.3 C.4 C.5",
                "20M2": "C.1 C.2 C.3 C.4 C.5",
                "20X2": "C.1 C.2 C.3 C.4 C.5",
                28: "",
                "28A": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X1": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "28X2": "C.0 C.1 C.2 C.3 C.4 C.5 C.6 C.7",
                "40X": "D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7",
                "40X1": "D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7",
                "40X2": "D.0 D.1 D.2 D.3 D.4 D.5 D.6 D.7"
            },
            C = {
                allPins: i,
                inputPins: r,
                outputPins: s,
                adcPins: c,
                inputAndOutputPins: a,
                readTempPins: l,
                servoPins: g,
                tunePins: u,
                motorPins: p,
                pwmOutPins: h,
                ports: v,
                ports: y,
                directionPorts: _,
                baudRates: d,
                slots: m,
                setintPins: b,
                hbaudRates: f
            },
            E = {};
        return E.selectType = function(e) {
            E.selectedType = e, E.updateAllPinLists()
        }, E.updateAllPinLists = function() {
            var t = e.mainWorkspace;
            if (t)
                for (var n = t.getAllBlocks(), i = Object.keys(C), r = 0; r < n.length; r++) {
                    var s = n[r];
                    i.some(function(e) {
                        var t = s[e];
                        return t ? (o(s, t, C[e]), !0) : !1
                    })
                }
        }, E.checkHSerialType = function(e) {
            window.setTimeout(function() {
                var t = f[E.selectedType].length > 0;
                e.setDisabled(!t)
            }, 0)
        }, E.checkPwmout = function(e) {
            window.setTimeout(function() {
                var t = h[E.selectedType].length > 0;
                e.setDisabled(!t)
            }, 0)
        }, E.getSetintPort = function() {
            return b[E.selectedType].length > 0 ? b[E.selectedType].charAt(0) : "C"
        }, E.selectedType = "40X2", E.makeAllPinList = function() {
            return n(i)
        }, E.makeInputPinList = function() {
            return n(r)
        }, E.makeOutputPinList = function() {
            return n(s)
        }, E.makeInputAndOutputPinList = function() {
            return n(a)
        }, E.makeReadTempPinList = function() {
            return n(l)
        }, E.makeADCPinList = function() {
            return n(c)
        }, E.makeServoPinList = function() {
            return n(g)
        }, E.makeTunePinList = function() {
            return n(u)
        }, E.makeMotorPinList = function(e) {
            return n(p)
        }, E.makePwmOutPinList = function() {
            return n(h)
        }, E.makeBaudRateList = function() {
            return n(d)
        }, E.makehBaudRateList = function() {
            return n(f)
        }, E.makeSlotsList = function() {
            return n(m)
        }, E.makePortList = function() {
            return n(v)
        }, E.makeInputPortList = function() {
            return n(y)
        }, E.makeDirectionPortList = function() {
            return n(_)
        }, E.makeSetintPinList = function() {
            return n(b)
        }, E.getAllPins = function() {
            var e = i[E.selectedType] || "";
            return e.split(" ")
        }, E
    }), define("blockly/msg", ["../lang"], function(e) {
        var t;
        return e.textLoaded.add(function() {
            t = e.getBlocksGroup()
        }), {
            get: function() {
                return t ? t.get.apply(t, arguments) : null
            }
        }
    }), define("blockly/callbacks", [], function() {
        var e = {};
        return e.onSetBreakpoint = function(e, t) {}, e.onRunWizard = function(e) {}, e.onOpenSnippet = function(e) {}, e.onBlockAdded = function(e) {}, e.onPinNames = function(e) {}, e
    }), define("blockly/block-utils", ["blocklylib", "./io", "./msg", "./callbacks"], function(e, t, o, n) {
        function i() {
            var e = r.startBlocks,
                t = o.get("CONTROL_START");
            e.length > 1 ? e.forEach(function(e, o) {
                var n = o > 0 ? o : "";
                e.startIndex = o, e.setFieldValue(t + n)
            }) : (e[0].setFieldValue(t), e[0].startIndex = 0)
        }
        var r = {};
        return r.getMaxSlot = function() {
            switch (t.selectedType) {
                case "14M2":
                case "18M2":
                case "20M2":
                    return 2;
                case "28X2":
                case "40X2":
                    return 4;
                default:
                    return 1
            }
        }, r.getMaxStart = function() {
            switch (t.selectedType) {
                case "14M2":
                case "18M2":
                case "20M2":
                    return 8;
                case "08M2":
                    return 4;
                default:
                    return 1
            }
        }, r.isStartDisabled = function() {
            return r.startBlocks.length >= r.getMaxStart()
        }, r.startBlocks = [], r.addStart = function(e) {
            r.startBlocks.push(e), i()
        }, r.removeStart = function(e) {
            var t = r.startBlocks;
            t.splice(t.indexOf(e), 1), t.length > 0 && i()
        }, r.newBlock = function(e) {
            e.isInFlyout || n.onBlockAdded(e)
        }, r.checkInputs = function() {
            if (r.canSetWarning(this)) {
                var t = this,
                    n = this.inputList.some(function(n) {
                        if (n.type != e.DUMMY_INPUT) {
                            var i = t.getInputTargetBlock(n.name);
                            if (!i) return t.setWarningText(o.get("MISSING_BLOCKS")), !0
                        }
                    });
                n || t.setWarningText(null)
            }
        }, r.canSetWarning = function(t) {
            return t.workspace && 2 != e.dragMode_
        }, r.disable = function(e) {
            window.setTimeout(function() {
                e.setDisabled(!0)
            }, 0)
        }, r
    }), define("block-editor/block-utils", ["blocklylib", "../events", "../blockly/block-utils"], function(e, t, o) {
        function n(t) {
            var o = e.mainWorkspace.getBlockById(t);
            o && o.removeSelect()
        }
        var i = [],
            r = {};
        r.isBlockVisible = function(t) {
            var o = e.mainWorkspace,
                n = o.getBlockById(t);
            if (n) {
                var i = o.getMetrics(),
                    r = n.getRelativeToSurfaceXY(),
                    s = r.x + n.width,
                    a = r.y + n.height,
                    l = -o.scrollX,
                    c = -o.scrollY,
                    u = l + i.viewWidth,
                    g = c + i.viewHeight;
                return r.x > l && u > s && r.y > c && g > a
            }
        };
        var s, a;
        return r.scrollTo = function(o) {
            function n(e, o, n) {
                var i, r = e() - n,
                    s = r / u,
                    a = window.setInterval(function() {
                        var r = e(),
                            l = i == r;
                        i = r;
                        var c = r - s;
                        o(c), (l || Math.abs(n - c) < Math.abs(s)) && (o(n), window.clearInterval(a), console.log("scroll complete")), t.requestBlocklyRedraw.dispatch()
                    }, 10);
                return a
            }
            var i = e.mainWorkspace,
                r = i.getBlockById(o);
            if (r) {
                var l = r.getRelativeToSurfaceXY(),
                    c = 40,
                    u = 20;
                window.clearInterval(s), window.clearInterval(a), s = n(function() {
                    return i.scrollX
                }, function(e) {
                    i.scrollX = e
                }, -l.x + c), a = n(function() {
                    return i.scrollY
                }, function(e) {
                    i.scrollY = e
                }, -l.y + c)
            }
        }, r.arrangeBlocks = function() {
            for (var t = 25, o = e.mainWorkspace.getTopBlocks(!1), n = e.mainWorkspace.getMetrics(), i = n.viewLeft + 5, r = n.viewTop + 5, s = i, a = r, l = i + n.viewWidth, c = 0, u = 0, g = o.length; g > u; u++) {
                var p = o[u],
                    h = p.getRelativeToSurfaceXY(),
                    d = p.getHeightWidth(),
                    f = d.height,
                    m = d.width;
                l > s ? (p.moveBy(s - h.x, a - h.y), p.select(), s += m + t, f > c && (c = f)) : (a += c + t, c = f, s = i, p.moveBy(s - h.x, a - h.y), p.select(), s += m + t)
            }
        }, r.highlightBlocks = function(t) {
            var o = r.getHighlitIds();
            o.forEach(function(e) {
                -1 == t.indexOf(e) && n(e)
            });
            var i = [];
            t.forEach(function(t) {
                if (-1 == o.indexOf(t)) {
                    var n = e.mainWorkspace.getBlockById(t);
                    n && n.addSelect(), r.isBlockVisible(t) || i.push(t)
                }
            }), t.length > 0 && i.length == t.length && r.scrollTo(i[0])
        }, r.clearHighlight = function() {
            var e = r.getHighlitIds();
            e.forEach(n)
        }, r.getHighlitIds = function() {
            return e.mainWorkspace.getAllBlocks().filter(function(t) {
                return e.hasClass_(t.svgGroup_, "blocklySelected")
            }).map(function(e) {
                return e.id
            })
        }, r.disableAllExcept = function(o) {
            i = e.mainWorkspace.getAllBlocks().filter(function(e) {
                var t = e.id != o && !e.disabled;
                return t && (e.disabled = !0, e.updateDisabled(!0)), t
            }), t.requestBlocklyRedraw.dispatch()
        }, r.clearDisabled = function() {
            i.forEach(function(e) {
                e.setDisabled(!1)
            }), i = [], t.requestBlocklyRedraw.dispatch()
        }, r.setupStartBlocks = function() {
            var e = o.startBlocks;
            e.forEach(function(e) {
                e.setDeletable(0 != e.startIndex)
            })
        }, r
    }), define("blockly/constants", [], function() {
        return {
            START_ID: "picaxe_control_start",
            HELP_URL: "http://www.picaxe.com/BASIC-Commands",
            PATH_TO_BLOCKLY: "./lib/blockly/",
            TYPES: {
                VAL: "Number",
                STR: "String",
                VARCOMMA: "Comma",
                EXP: "expr"
            }
        }
    }), define("blockly/generators/picaxebasic", ["blocklylib", "../parse-events", "../constants", "../block-utils", "../io", "../../settings/pin-names"], function(e, t, o, n, i, r) {
        var s = new e.Generator("PicaxeBasic");
        s.KEYWORDS = "w,high,low,toggle,backward,forward,halt,sound,play,tune,servo,servopos,irin,irout,rfin,rfout,pwmout,pwmduty,if,pin,count,pulsin,pulsout,input,output,reverse,pullup,inputtype,infrain,infrain2,infraout,pwm,switch,button,portc,portc,readoutputs,readportc,touch,touch16,readadc,readadc10,readtemp,readtemp12,daclevel,dacsetup,readdac,readdac10,pause,pauseus,nap,sleep,doze,hibernate,wait,time,goto,branch,for,next,do,loop,if,else,endif,select,case,endselect,gosub,return,end,reset,stop,on,goto,gosub,bit,exit,setint,setintflags,restart,resume,suspend,symbol,let,inc,dec,swap,bcdtoascii,bintoascii,lookdown,lookup,random,clearbit,setbit,togglebit,peek,poke,get,put,read,write,eeprom,readtable,table,tablecopy,debug,sertxd,serrxd,serin,serout,hserin,hserout,hsersetup,hi2cin,hi2cout,hi2csetup,kbin,kbled,owin,owout,readowsn,hspiin,hspiout,hspisetup,shiftin,shiftout,srlatch,srreset,srset,uniin,uniout,hpwm,hpwmduty,keyin,keyled,i2cslave,readi2c,writei2c,ultra,peeksfr,pokesfr,calibfreq,setfreq,disablebod,enablebod,readinternaltemp,readfirmware,readrevision,readsilicon,adcconfig,adcsetup,calibadc,calibadc10,compsetup,fvrsetup,disconnect,reconnect,hintsetup,disabletime,enabletime,settimer,tmr3setup,booti2c,run,pop,popram,push,pushram,main,start0,start1,start2,start3,start4,start5,start6,start7", s.addReservedWords(s.KEYWORDS), s.addLock = function(e) {
            return n.startBlocks.length > 1 && (e = "_STICKY_TASK ON\n\n" + e + "_STICKY_TASK OFF\n\n"), e
        };
        var a = !1;
        return s.SimulationTagsEnabled = !1, s.SimulationStartTag = "<n id='%1'>", s.SimulationEndTag = "<!--%1--></n>", s.ORDER_ATOMIC = 0, s.ORDER_NONE = 99, s.init = function(t) {
            s.definitions_ = Object.create(null), s.functionNames_ = Object.create(null), s.variableDB_ ? s.variableDB_.reset() : s.variableDB_ = new e.Names(s.RESERVED_WORDS_);
            for (var o = [], n = e.Variables.allVariables(t).slice().sort(function(e, t) {
                    return e.toLowerCase().localeCompare(t.toLowerCase())
                }), i = 0; i < n.length; i++) o[i] = "symbol " + s.variableDB_.getName(n[i], e.Variables.NAME_TYPE) + " = w" + i;
            s.definitions_.variables = o.join("\n")
        }, s.wrapOutput = function(e, t, o) {
            var n = "";
            return a ? o || (n += "#FlowCell " + e.id + ",0\n", e.breakpoint && (n += "#FlowBreak " + e.id + ",0\n")) : e.warning && (n += "#ERROR " + e.warning.getText() + (o ? "" : "\n")), n += t, s.SimulationTagsEnabled && (n = s.SimulationStartTag.replace("%1", e.id) + n + s.SimulationEndTag.replace("%1", e.id)), n
        }, s.workspaceToCode = function(i) {
            var r = e.mainWorkspace;
            a = i;
            var s = [],
                l = [],
                c = r.getTopBlocks(!0);
            c.forEach(function(e) {
                if (0 !== e.type.indexOf("procedures_def") && e.type != o.START_ID) {
                    var t = e;
                    do t.setDisabled(!0), "picaxe_advanced_comment" == t.type ? l.push(t) : s.push(t), t = t.getNextBlock(); while (t)
                }
            }), s.length > 0 ? t.onEvent(t.types.WARNING, t.msgs.BLOCKS_IGNORED) : 0 === n.startBlocks.length && t.onEvent(t.types.ERROR, t.msgs.NO_START_BLOCK);
            var u = e.Generator.prototype.workspaceToCode.call(this, r);
            return s.forEach(function(e) {
                e.setDisabled(!1)
            }), l.forEach(function(e) {
                e.setDisabled(!1)
            }), a = !1, u
        }, s.finish = function(e) {
            var t = [];
            for (var o in s.definitions_) t.push(s.definitions_[o]);
            var n = "";
            switch (i.selectedType) {
                case "28X1":
                    n = "symbol C.0 = 0\nsymbol C.1 = 1\nsymbol C.2 = 2\nsymbol C.3 = 3\nsymbol C.4 = 4\nsymbol C.5 = 5\nsymbol C.6 = 6\nsymbol C.7 = 7\n";
                    break;
                case "40X":
                case "40X1":
                    n = "symbol D.0 = 0\nsymbol D.1 = 1\nsymbol D.2 = 2\nsymbol D.3 = 3\nsymbol D.4 = 4\nsymbol D.5 = 5\nsymbol D.6 = 6\nsymbol D.7 = 7\n"
            }
            var a = r.getSymbols();
            return t.join("\n") + "\n" + n + a + "\n" + e
        }, s.scrubNakedValue = function(e) {
            return e + ";\n"
        }, s.quote_ = function(e) {
            return e = e.replace(/\\/g, "\\\\").replace(/\n/g, "\\\n").replace(/'/g, "\\'"), "'" + e + "'"
        }, s.scrub_ = function(t, n) {
            var i = "";
            if (!t.outputConnection || !t.outputConnection.targetConnection) {
                var r = t.getCommentText();
                r && (i += s.prefixLines(r, ";") + "\n");
                for (var l = 0; l < t.inputList.length; l++)
                    if (t.inputList[l].type == e.INPUT_VALUE) {
                        var c = t.inputList[l].connection.targetBlock();
                        c && (r = s.allNestedComments(c), r && (i += s.prefixLines(r, "'")))
                    }
            }
            var u = t.nextConnection && t.nextConnection.targetBlock(),
                g = s.blockToCode(u);
            return a ? t.type == o.START_ID && (g += "#FlowCell 0,0\n	stop\n") : t.type == o.START_ID && (g += "	stop\n"), i + n + g
        }, s.getPinName = function(e) {
            return e.getFieldValue("PIN")
        }, s.getPinName2 = function(e) {
            return e.getFieldValue("PIN2")
        }, s
    }), define("blockly/generators/javascript", ["blocklylib", "../parse-events", "../constants", "../block-utils"], function(e, t, o, n) {
        var i = (window.Blockly, new e.Generator("JavaScript")),
            r = !1;
        return i.addReservedWords("w,Blockly,break,case,catch,continue,debugger,default,delete,do,else,finally,for,function,if,in,instanceof,new,return,switch,this,throw,try,typeof,var,void,while,with,class,enum,export,extends,import,super,implements,interface,let,package,private,protected,public,static,yield,const,null,true,false,Array,ArrayBuffer,Boolean,Date,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Error,eval,EvalError,Float32Array,Float64Array,Function,Infinity,Int16Array,Int32Array,Int8Array,isFinite,isNaN,Iterator,JSON,Math,NaN,Number,Object,parseFloat,parseInt,RangeError,ReferenceError,RegExp,StopIteration,String,SyntaxError,TypeError,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray,undefined,uneval,URIError,applicationCache,closed,Components,content,_content,controllers,crypto,defaultStatus,dialogArguments,directories,document,frameElement,frames,fullScreen,globalStorage,history,innerHeight,innerWidth,length,location,locationbar,localStorage,menubar,messageManager,mozAnimationStartTime,mozInnerScreenX,mozInnerScreenY,mozPaintCount,name,navigator,opener,outerHeight,outerWidth,pageXOffset,pageYOffset,parent,performance,personalbar,pkcs11,returnValue,screen,screenX,screenY,scrollbars,scrollMaxX,scrollMaxY,scrollX,scrollY,self,sessionStorage,sidebar,status,statusbar,toolbar,top,URL,window,addEventListener,alert,atob,back,blur,btoa,captureEvents,clearImmediate,clearInterval,clearTimeout,close,confirm,disableExternalCapture,dispatchEvent,dump,enableExternalCapture,escape,find,focus,forward,GeckoActiveXObject,getAttention,getAttentionWithCycleCount,getComputedStyle,getSelection,home,matchMedia,maximize,minimize,moveBy,moveTo,mozRequestAnimationFrame,open,openDialog,postMessage,print,prompt,QueryInterface,releaseEvents,removeEventListener,resizeBy,resizeTo,restore,routeEvent,scroll,scrollBy,scrollByLines,scrollByPages,scrollTo,setCursor,setImmediate,setInterval,setResizable,setTimeout,showModalDialog,sizeToContent,stop,unescape,updateCommands,XPCNativeWrapper,XPCSafeJSObjectWrapper,onabort,onbeforeunload,onblur,onchange,onclick,onclose,oncontextmenu,ondevicemotion,ondeviceorientation,ondragdrop,onerror,onfocus,onhashchange,onkeydown,onkeypress,onkeyup,onload,onmousedown,onmousemove,onmouseout,onmouseover,onmouseup,onmozbeforepaint,onpaint,onpopstate,onreset,onresize,onscroll,onselect,onsubmit,onunload,onpageshow,onpagehide,Image,Option,Worker,Event,Range,File,FileReader,Blob,BlobBuilder,Attr,CDATASection,CharacterData,Comment,console,DocumentFragment,DocumentType,DomConfiguration,DOMError,DOMErrorHandler,DOMException,DOMImplementation,DOMImplementationList,DOMImplementationRegistry,DOMImplementationSource,DOMLocator,DOMObject,DOMString,DOMStringList,DOMTimeStamp,DOMUserData,Entity,EntityReference,MediaQueryList,MediaQueryListListener,NameList,NamedNodeMap,Node,NodeFilter,NodeIterator,NodeList,Notation,Plugin,PluginArray,ProcessingInstruction,SharedWorker,Text,TimeRanges,Treewalker,TypeInfo,UserDataHandler,Worker,WorkerGlobalScope,HTMLDocument,HTMLElement,HTMLAnchorElement,HTMLAppletElement,HTMLAudioElement,HTMLAreaElement,HTMLBaseElement,HTMLBaseFontElement,HTMLBodyElement,HTMLBRElement,HTMLButtonElement,HTMLCanvasElement,HTMLDirectoryElement,HTMLDivElement,HTMLDListElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFontElement,HTMLFormElement,HTMLFrameElement,HTMLFrameSetElement,HTMLHeadElement,HTMLHeadingElement,HTMLHtmlElement,HTMLHRElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLKeygenElement,HTMLLabelElement,HTMLLIElement,HTMLLinkElement,HTMLMapElement,HTMLMenuElement,HTMLMetaElement,HTMLModElement,HTMLObjectElement,HTMLOListElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOutputElement,HTMLParagraphElement,HTMLParamElement,HTMLPreElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableDataCellElement,HTMLTableHeaderCellElement,HTMLTableColElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTextAreaElement,HTMLTimeElement,HTMLTitleElement,HTMLTrackElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement,HTMLCanvasElement,CanvasRenderingContext2D,CanvasGradient,CanvasPattern,TextMetrics,ImageData,CanvasPixelArray,HTMLAudioElement,HTMLVideoElement,NotifyAudioAvailableEvent,HTMLCollection,HTMLAllCollection,HTMLFormControlsCollection,HTMLOptionsCollection,HTMLPropertiesCollection,DOMTokenList,DOMSettableTokenList,DOMStringMap,RadioNodeList,SVGDocument,SVGElement,SVGAElement,SVGAltGlyphElement,SVGAltGlyphDefElement,SVGAltGlyphItemElement,SVGAnimationElement,SVGAnimateElement,SVGAnimateColorElement,SVGAnimateMotionElement,SVGAnimateTransformElement,SVGSetElement,SVGCircleElement,SVGClipPathElement,SVGColorProfileElement,SVGCursorElement,SVGDefsElement,SVGDescElement,SVGEllipseElement,SVGFilterElement,SVGFilterPrimitiveStandardAttributes,SVGFEBlendElement,SVGFEColorMatrixElement,SVGFEComponentTransferElement,SVGFECompositeElement,SVGFEConvolveMatrixElement,SVGFEDiffuseLightingElement,SVGFEDisplacementMapElement,SVGFEDistantLightElement,SVGFEFloodElement,SVGFEGaussianBlurElement,SVGFEImageElement,SVGFEMergeElement,SVGFEMergeNodeElement,SVGFEMorphologyElement,SVGFEOffsetElement,SVGFEPointLightElement,SVGFESpecularLightingElement,SVGFESpotLightElement,SVGFETileElement,SVGFETurbulenceElement,SVGComponentTransferFunctionElement,SVGFEFuncRElement,SVGFEFuncGElement,SVGFEFuncBElement,SVGFEFuncAElement,SVGFontElement,SVGFontFaceElement,SVGFontFaceFormatElement,SVGFontFaceNameElement,SVGFontFaceSrcElement,SVGFontFaceUriElement,SVGForeignObjectElement,SVGGElement,SVGGlyphElement,SVGGlyphRefElement,SVGGradientElement,SVGLinearGradientElement,SVGRadialGradientElement,SVGHKernElement,SVGImageElement,SVGLineElement,SVGMarkerElement,SVGMaskElement,SVGMetadataElement,SVGMissingGlyphElement,SVGMPathElement,SVGPathElement,SVGPatternElement,SVGPolylineElement,SVGPolygonElement,SVGRectElement,SVGScriptElement,SVGStopElement,SVGStyleElement,SVGSVGElement,SVGSwitchElement,SVGSymbolElement,SVGTextElement,SVGTextPathElement,SVGTitleElement,SVGTRefElement,SVGTSpanElement,SVGUseElement,SVGViewElement,SVGVKernElement,SVGAngle,SVGColor,SVGICCColor,SVGElementInstance,SVGElementInstanceList,SVGLength,SVGLengthList,SVGMatrix,SVGNumber,SVGNumberList,SVGPaint,SVGPoint,SVGPointList,SVGPreserveAspectRatio,SVGRect,SVGStringList,SVGTransform,SVGTransformList,SVGAnimatedAngle,SVGAnimatedBoolean,SVGAnimatedEnumeration,SVGAnimatedInteger,SVGAnimatedLength,SVGAnimatedLengthList,SVGAnimatedNumber,SVGAnimatedNumberList,SVGAnimatedPreserveAspectRatio,SVGAnimatedRect,SVGAnimatedString,SVGAnimatedTransformList,SVGPathSegList,SVGPathSeg,SVGPathSegArcAbs,SVGPathSegArcRel,SVGPathSegClosePath,SVGPathSegCurvetoCubicAbs,SVGPathSegCurvetoCubicRel,SVGPathSegCurvetoCubicSmoothAbs,SVGPathSegCurvetoCubicSmoothRel,SVGPathSegCurvetoQuadraticAbs,SVGPathSegCurvetoQuadraticRel,SVGPathSegCurvetoQuadraticSmoothAbs,SVGPathSegCurvetoQuadraticSmoothRel,SVGPathSegLinetoAbs,SVGPathSegLinetoHorizontalAbs,SVGPathSegLinetoHorizontalRel,SVGPathSegLinetoRel,SVGPathSegLinetoVerticalAbs,SVGPathSegLinetoVerticalRel,SVGPathSegMovetoAbs,SVGPathSegMovetoRel,ElementTimeControl,TimeEvent,SVGAnimatedPathData,SVGAnimatedPoints,SVGColorProfileRule,SVGCSSRule,SVGExternalResourcesRequired,SVGFitToViewBox,SVGLangSpace,SVGLocatable,SVGRenderingIntent,SVGStylable,SVGTests,SVGTextContentElement,SVGTextPositioningElement,SVGTransformable,SVGUnitTypes,SVGURIReference,SVGViewSpec,SVGZoomAndPan"), i.ORDER_ATOMIC = 0, i.ORDER_MEMBER = 1, i.ORDER_NEW = 1, i.ORDER_FUNCTION_CALL = 2, i.ORDER_INCREMENT = 3, i.ORDER_DECREMENT = 3, i.ORDER_LOGICAL_NOT = 4, i.ORDER_BITWISE_NOT = 4, i.ORDER_UNARY_PLUS = 4, i.ORDER_UNARY_NEGATION = 4, i.ORDER_TYPEOF = 4, i.ORDER_VOID = 4, i.ORDER_DELETE = 4, i.ORDER_MULTIPLICATION = 5, i.ORDER_DIVISION = 5, i.ORDER_MODULUS = 5, i.ORDER_ADDITION = 6, i.ORDER_SUBTRACTION = 6, i.ORDER_BITWISE_SHIFT = 7, i.ORDER_RELATIONAL = 8, i.ORDER_IN = 8, i.ORDER_INSTANCEOF = 8, i.ORDER_EQUALITY = 9, i.ORDER_BITWISE_AND = 10, i.ORDER_BITWISE_XOR = 11, i.ORDER_BITWISE_OR = 12, i.ORDER_LOGICAL_AND = 13, i.ORDER_LOGICAL_OR = 14, i.ORDER_CONDITIONAL = 15, i.ORDER_ASSIGNMENT = 16, i.ORDER_COMMA = 17, i.ORDER_NONE = 99, r = !1, i.PRESTEP_PREFIX = "blocklyPreStep",
            i.INNERSTEP_PREFIX = "blocklyInnerStep", i.POSTSTEP_PREFIX = "blocklyPostStep", i.STEP_PREFIX = "blocklyStep", i.BREAK_COMMAND = "blocklyBreak", i.WARNING_COMMAND = "blocklyWarning", i.addReservedWords([i.HIGHLIGHTSTEP_PREFIX, i.PRESTEP_PREFIX, i.INNERSTEP_PREFIX, i.POSTSTEP_PREFIX, i.BREAK_COMMAND, i.WARNING_COMMAND].join(",")), i.init = function(t) {
                i.definitions_ = Object.create(null), i.functionNames_ = Object.create(null), i.variableDB_ ? i.variableDB_.reset() : i.variableDB_ = new e.Names(i.RESERVED_WORDS_);
                for (var o = [], n = e.Variables.allVariables(t), r = 0; r < n.length; r++) o[r] = "var " + i.variableDB_.getName(n[r], e.Variables.NAME_TYPE) + ";";
                i.definitions_.variables = o.join("\n")
            }, i.getInnerStepCode = function(e) {
                if (r) {
                    var t = e.id,
                        o = i.stepsLookup_[t];
                    return "undefined" == typeof o && (o = 0), o++, i.stepsLookup_[t] = o, i.INNERSTEP_PREFIX + "('" + t + "." + o + "');\n"
                }
                return ""
            }, i.workspaceToCode = function(s) {
                r = s, i.stepsLookup_ = {};
                var a = e.mainWorkspace,
                    l = [],
                    c = [],
                    u = a.getTopBlocks(!0);
                u.forEach(function(e) {
                    if (0 !== e.type.indexOf("procedures_def") && e.type != o.START_ID) {
                        var t = e;
                        do t.setDisabled(!0), "picaxe_advanced_comment" == t.type ? c.push(t) : l.push(t), t = t.getNextBlock(); while (t)
                    }
                }), l.length > 0 ? t.onEvent(t.types.WARNING, t.msgs.BLOCKS_IGNORED) : 0 === n.startBlocks.length && t.onEvent(t.types.ERROR, t.msgs.NO_START_BLOCK);
                var g = e.Generator.prototype.workspaceToCode.call(this, a);
                return l.forEach(function(e) {
                    e.setDisabled(!1)
                }), c.forEach(function(e) {
                    e.setDisabled(!1)
                }), g
            }, i.finish = function(e) {
                var t = [];
                for (var o in i.definitions_) t.push(i.definitions_[o]);
                return t.join("\n") + "\n\n" + e
            }, i.scrubNakedValue = function(e) {
                return e + ";\n"
            }, i.quote_ = function(e) {
                return e = e.replace(/\\/g, "\\\\").replace(/\n/g, "\\\n").replace(/'/g, "\\'"), "'" + e + "'"
            }, i.scrub_ = function(t, o) {
                var n = "";
                if (!t.outputConnection || !t.outputConnection.targetConnection) {
                    var r = t.getCommentText();
                    r && (n += i.prefixLines(r, "// ") + "\n");
                    for (var s = 0; s < t.inputList.length; s++)
                        if (t.inputList[s].type == e.INPUT_VALUE) {
                            var a = t.inputList[s].connection.targetBlock();
                            a && (r = i.allNestedComments(a), r && (n += i.prefixLines(r, "// ")))
                        }
                }
                var l = t.nextConnection && t.nextConnection.targetBlock(),
                    c = i.blockToCode(l);
                return n + o + c
            }, i.wrapOutput = function(e, t, o) {
                return void 0 == o && (o = !1), r && (e.breakpoint && (t = i.BREAK_COMMAND + "(" + e.id + ");\n" + t), t = i.PRESTEP_PREFIX + "(" + e.id + ", " + o + ");\n" + t, e.warning && (t = i.WARNING_COMMAND + "(" + e.id + ");\n" + t), t = t + "\n" + i.POSTSTEP_PREFIX + "(" + e.id + ", " + o + ");"), t + "\n"
            }, i.addLock = function(e) {
                return e
            }, i.getPinName = function(e) {
                return '"' + e.getFieldValue("PIN") + '"'
            }, i.getPinName2 = function(e) {
                return '"' + e.getFieldValue("PIN2") + '"'
            }, i
    }), define("project", ["blocklylib", "jquery", "language-selection", "./config", "./utils", "./lang", "../lib/shared/filesystem", "./messages", "./picaxe/models", "./block-editor/block-utils", "./events", "./blockly/generators/picaxebasic", "./blockly/generators/javascript", "./settings/pin-names"], function(e, t, o, n, i, r, s, a, l, c, u, g, p, h) {
        function d(t) {
            for (var o = t.getElementsByTagName("block"), n = 0; n < o.length; n++) {
                var i = o[n],
                    r = i.getAttribute("type");
                if (!e.Blocks[r]) return console.warn("validateProject. " + r + " not recognised"), !1
            }
            return !0
        }

        function f(t, o) {
            function n(t) {
                t || (e.mainWorkspace.clear(), h.reset()), e.Xml.domToWorkspace(e.mainWorkspace, i), t && (c.arrangeBlocks(), c.setupStartBlocks()), u.projectParsed.dispatch(), u.newProject.dispatch()
            }
            var i;
            try {
                i = e.Xml.textToDom(t)
            } catch (r) {
                return void console.error("Error parsing XML:\n" + r)
            }
            if (!d(i)) return void console.error("parseProject. cannot render project");
            var s = i.getElementsByTagName("blockly")[0];
            if (!s) return void console.warn("Not Blockly XML");
            v = {};
            for (var a = s.attributes, l = 0; l < a.length; l++) {
                var g = a[l];
                v[g.name] = g.value
            }
            o ? o(function() {
                n(!0)
            }, function() {
                n(!1)
            }) : n(!1)
        }

        function m(e) {
            var o = {
                    picaxe: l.value,
                    version: n.version,
                    pinNames: h.serialise()
                },
                i = t.parseXML("<blockly/>").firstChild;
            for (var r in o) i.setAttribute(r, o[r]);
            e.insertBefore(i, e.firstChild)
        }
        var y, v = {},
            _ = "project.xml",
            b = {};
        return b.dirty = !1, b.lock = function(e) {
            t("body").toggleClass("locked", e)
        }, b.getSettings = function() {
            return v
        }, b.getExampleXMLText = function() {
            var t = e.Xml.domToText(y),
                o = e.Xml.textToDom(t);
            return m(o), e.Xml.domToText(o)
        }, b.init = function(n, i) {
            y = i, e.BlockSvg.START_HAT = !1, e.inject(t("#content_blocks").get(0), {
                grid: {
                    spacing: 25,
                    length: 3,
                    colour: "#ccc",
                    snap: !0
                },
                media: "lib/blockly/media/",
                rtl: o.isRtl(),
                toolbox: n,
                zoom: {
                    controls: !0,
                    wheel: !1,
                    startScale: 1,
                    maxScale: 3,
                    minScale: .3,
                    scaleSpeed: 1.2
                },
                trashcan: !0
            });
            var r = e.mainWorkspace;
            r.addChangeListener(function() {
                b.dirty = !0
            }), b.reset()
        }, b.load = function(e) {
            s.loadText("xml", function(t, o) {
                _ = t, f(o, e)
            })
        }, b.setFromXml = function(e, t) {
            f(e, t)
        }, b.getXml = function(t) {
            var o = e.Xml.workspaceToDom(e.mainWorkspace);
            return m(o), t ? e.Xml.domToPrettyText(o) : e.Xml.domToText(o)
        }, b.getBasic = function(e) {
            return g.workspaceToCode(e)
        }, b.getJS = function(e) {
            var t = p.workspaceToCode(e);
            return t
        }, b.save = function() {
            s.save(b.getXml(), "text/xml", _, function(e) {
                b.dirty = !1, "undefined" != typeof e && (_ = e)
            }, function() {})
        }, b.reset = function() {
            a.clear(), h.reset(), _ = "project.xml", e.Xml.domToWorkspace(e.mainWorkspace, y), e.mainWorkspace.getAllBlocks()[0].setDeletable(!1), u.newProject.dispatch(), window.setTimeout(function() {
                b.dirty = !1
            }, 0)
        }, b.discard = function() {
            e.mainWorkspace.clear(), b.reset()
        }, b
    }), define("picaxe/debug/config-lookup", [], function() {
        return function(e) {
            var t, o, n, i = 9600;
            switch (e.toUpperCase()) {
                case "08M2":
                case "08M2LE":
                case "14M2":
                case "18M2":
                case "20M2":
                    t = 56, o = 8, n = 28;
                    break;
                case "28X1":
                case "40X1":
                    t = 80, o = 4, n = 28;
                    break;
                case "20X2":
                case "28X2":
                case "40X2":
                    t = 112, o = 48, n = 56;
                    break;
                default:
                    i = 4800, t = 96, o = 18, n = 14
            }
            return {
                baud: i,
                dataSize: t,
                ptr: o,
                cnt: n
            }
        }
    }), define("data-utils", [], function() {
        var e = {};
        return e.insertArrayInto = function(e, t, o) {
            e.splice.apply(e, [o, 0].concat(t))
        }, e.deleteValue = function(e, t) {
            for (;;) {
                var o = e.indexOf(t);
                if (-1 == o) return;
                e.splice(o, 1)
            }
        }, e.appendBuffer = function(e, t) {
            var o = new Uint8Array(e.byteLength + t.byteLength);
            return o.set(new Uint8Array(e), 0), o.set(new Uint8Array(t), e.byteLength), o.buffer
        }, e.base64ToArrayBuffer = function(e) {
            for (var t = window.atob(e.replace(/\s/g, "")), o = t.length, n = new Uint8Array(o), i = 0; o > i; i++) n[i] = t.charCodeAt(i);
            return n.buffer
        }, e.flatten = function(e) {
            return e.reduce(function(e, t) {
                return e.concat(t)
            }, [])
        }, e
    }), define("picaxe/../../lib/shared/app-utils", [], function() {
        var e = {};
        return e.addCloseHandler = function(e) {
            chrome.runtime.getBackgroundPage(function(t) {
                chrome.app.window.current().onClosed.addListener(function() {
                    e(t)
                })
            })
        }, e
    }), define("picaxe/debug/comms", ["signals", "./config-lookup", "../../events", "data-utils", "../../../lib/shared/app-utils"], function(e, t, o, n, i) {
        function r(e) {
            switch (v) {
                case d:
                    e == p ? (b++, v = f) : (b = 0, C = 0);
                    break;
                case f:
                    e == p ? b++ : e == h && b > g ? (C = 0, l = new Uint8Array(u.dataSize), v = m) : (b = 0, v = d);
                    break;
                case m:
                    if (l[C] = e, C++, C >= u.dataSize) {
                        var t = l.subarray(u.ptr, u.ptr + u.cnt);
                        E.debugPacketReceived.dispatch(t), v = y
                    }
            }
        }

        function s(e) {
            var t = e.data;
            a = a ? n.appendBuffer(a, t) : t;
            for (var o = new Uint8Array(a); _ < a.byteLength && v != y;) r(o[_]), _++;
            v == y && (a = null, _ = 0, v = d, b = 0, C = 0)
        }
        var a, l, c, u, g = 50,
            p = 240,
            h = 90,
            d = 0,
            f = 1,
            m = 2,
            y = 3,
            v = d,
            _ = 0,
            b = 0,
            C = 0,
            E = {};
        return E.connected = new e, E.disconnected = new e, E.debugPacketReceived = new e, E.error = new e, E.apiConnect = function(e) {
            u = t(e)
        }, E.connect = function(e, o) {
            u = t(o);
            var n = {
                bitrate: u.baud,
                dataBits: "eight",
                stopBits: "one",
                parityBit: "no",
                ctsFlowControl: !1
            };
            chrome.serial.connect(e, n, function(e) {
                null != chrome.runtime.lastError ? E.error.dispatch(chrome.runtime.lastError.message) : (c = e.connectionId, chrome.serial.flush(c, function() {}), chrome.serial.onReceive.addListener(s))
            })
        }, E.disconnect = function() {
            c && (chrome.serial.onReceive.removeListener(s), chrome.serial.disconnect(c, function(e) {
                null != chrome.runtime.lastError ? E.error.dispatch(chrome.runtime.lastError.message) : (c = null, E.disconnected.dispatch())
            }))
        }, E.connected.addOnce(function() {
            i.addCloseHandler(function() {
                E.disconnect()
            })
        }), E
    }), define("serial-ports", ["signals", "data-model"], function(e, t) {
        function o(e) {
            var t = /\D/g;
            e.sort(function(e, o) {
                return parseInt(e.name.replace(t, ""), 10) - parseInt(o.name.replace(t, ""), 10)
            })
        }
        var n = new t("port");
        return n.inited = new e, n.requestList = function(e) {
            var t = [];
            chrome.serial.getDevices(function(i) {
                var r = -1;
                i.forEach(function(e, o) {
                    var n = e.path,
                        i = n.replace("/dev/", "");
                    0 != i.indexOf("cu.") && (i = i.replace("tty.", ""), t.push({
                        name: i,
                        id: n,
                        displayName: e.displayName
                    }))
                }), o(t);
                for (var r = -1, s = 0; s < t.length; s++) {
                    var a = t[s];
                    if (n.value == a.id) {
                        r = s;
                        break
                    } - 1 == r && (0 !== a.name.indexOf("COM") && 0 !== a.name.indexOf("usbserial") && 0 !== a.name.indexOf("ttyUSB") || (r = s))
                }
                e(t, r)
            })
        }, n.init = function() {
            n.restore(function() {
                console.log("restored"), n.inited.dispatch(n.value)
            })
        }, n
    }),
    function(e) {
        if ("object" == typeof exports && "object" == typeof module) module.exports = e();
        else {
            if ("function" == typeof define && define.amd) return define("search/../../lib/codemirror/lib/codemirror", [], e);
            this.CodeMirror = e()
        }
    }(function() {
        function e(o, n) {
            if (!(this instanceof e)) return new e(o, n);
            this.options = n = n ? Li(n) : {}, Li(Yr, n, !1), h(n);
            var i = n.value;
            "string" == typeof i && (i = new ms(i, n.mode)), this.doc = i;
            var r = new e.inputStyles[n.inputStyle](this),
                s = this.display = new t(o, i, r);
            s.wrapper.CodeMirror = this, c(this), a(this), n.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"), n.autofocus && !Er && s.input.focus(), y(this), this.state = {
                keyMaps: [],
                overlays: [],
                modeGen: 0,
                overwrite: !1,
                delayingBlurEvent: !1,
                focused: !1,
                suppressEdits: !1,
                pasteIncoming: !1,
                cutIncoming: !1,
                draggingText: !1,
                highlight: new ki,
                keySeq: null,
                specialChars: null
            };
            var l = this;
            pr && 11 > hr && setTimeout(function() {
                l.display.input.reset(!0)
            }, 20), Ht(this), ji(), yt(this), this.curOp.forceUpdate = !0, Yn(this, i), n.autofocus && !Er || l.hasFocus() ? setTimeout(Oi(go, this), 20) : po(this);
            for (var u in Xr) Xr.hasOwnProperty(u) && Xr[u](this, n[u], zr);
            E(this), n.finishInit && n.finishInit(this);
            for (var g = 0; g < Jr.length; ++g) Jr[g](this);
            _t(this), dr && n.lineWrapping && "optimizelegibility" == getComputedStyle(s.lineDiv).textRendering && (s.lineDiv.style.textRendering = "auto")
        }

        function t(e, t, o) {
            var n = this;
            this.input = o, n.scrollbarFiller = Fi("div", null, "CodeMirror-scrollbar-filler"), n.scrollbarFiller.setAttribute("cm-not-content", "true"), n.gutterFiller = Fi("div", null, "CodeMirror-gutter-filler"), n.gutterFiller.setAttribute("cm-not-content", "true"), n.lineDiv = Fi("div", null, "CodeMirror-code"), n.selectionDiv = Fi("div", null, null, "position: relative; z-index: 1"), n.cursorDiv = Fi("div", null, "CodeMirror-cursors"), n.measure = Fi("div", null, "CodeMirror-measure"), n.lineMeasure = Fi("div", null, "CodeMirror-measure"), n.lineSpace = Fi("div", [n.measure, n.lineMeasure, n.selectionDiv, n.cursorDiv, n.lineDiv], null, "position: relative; outline: none"), n.mover = Fi("div", [Fi("div", [n.lineSpace], "CodeMirror-lines")], null, "position: relative"), n.sizer = Fi("div", [n.mover], "CodeMirror-sizer"), n.sizerWidth = null, n.heightForcer = Fi("div", null, null, "position: absolute; height: " + As + "px; width: 1px;"), n.gutters = Fi("div", null, "CodeMirror-gutters"), n.lineGutter = null, n.scroller = Fi("div", [n.sizer, n.heightForcer, n.gutters], "CodeMirror-scroll"), n.scroller.setAttribute("tabIndex", "-1"), n.wrapper = Fi("div", [n.scrollbarFiller, n.gutterFiller, n.scroller], "CodeMirror"), pr && 8 > hr && (n.gutters.style.zIndex = -1, n.scroller.style.paddingRight = 0), dr || cr && Er || (n.scroller.draggable = !0), e && (e.appendChild ? e.appendChild(n.wrapper) : e(n.wrapper)), n.viewFrom = n.viewTo = t.first, n.reportedViewFrom = n.reportedViewTo = t.first, n.view = [], n.renderedView = null, n.externalMeasured = null, n.viewOffset = 0, n.lastWrapHeight = n.lastWrapWidth = 0, n.updateLineNumbers = null, n.nativeBarWidth = n.barHeight = n.barWidth = 0, n.scrollbarsClipped = !1, n.lineNumWidth = n.lineNumInnerWidth = n.lineNumChars = null, n.alignWidgets = !1, n.cachedCharWidth = n.cachedTextHeight = n.cachedPaddingH = null, n.maxLine = null, n.maxLineLength = 0, n.maxLineChanged = !1, n.wheelDX = n.wheelDY = n.wheelStartX = n.wheelStartY = null, n.shift = !1, n.selForContextMenu = null, n.activeTouch = null, o.init(n)
        }

        function o(t) {
            t.doc.mode = e.getMode(t.options, t.doc.modeOption), n(t)
        }

        function n(e) {
            e.doc.iter(function(e) {
                e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null)
            }), e.doc.frontier = e.doc.first, Me(e, 100), e.state.modeGen++, e.curOp && Rt(e)
        }

        function i(e) {
            e.options.lineWrapping ? (Ws(e.display.wrapper, "CodeMirror-wrap"), e.display.sizer.style.minWidth = "", e.display.sizerWidth = null) : (Vs(e.display.wrapper, "CodeMirror-wrap"), p(e)), s(e), Rt(e), it(e), setTimeout(function() {
                v(e)
            }, 100)
        }

        function r(e) {
            var t = ft(e.display),
                o = e.options.lineWrapping,
                n = o && Math.max(5, e.display.scroller.clientWidth / mt(e.display) - 3);
            return function(i) {
                if (vn(e.doc, i)) return 0;
                var r = 0;
                if (i.widgets)
                    for (var s = 0; s < i.widgets.length; s++) i.widgets[s].height && (r += i.widgets[s].height);
                return o ? r + (Math.ceil(i.text.length / n) || 1) * t : r + t
            }
        }

        function s(e) {
            var t = e.doc,
                o = r(e);
            t.iter(function(e) {
                var t = o(e);
                t != e.height && $n(e, t)
            })
        }

        function a(e) {
            e.display.wrapper.className = e.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + e.options.theme.replace(/(^|\s)\s*/g, " cm-s-"), it(e)
        }

        function l(e) {
            c(e), Rt(e), setTimeout(function() {
                C(e)
            }, 20)
        }

        function c(e) {
            var t = e.display.gutters,
                o = e.options.gutters;
            Hi(t);
            for (var n = 0; n < o.length; ++n) {
                var i = o[n],
                    r = t.appendChild(Fi("div", null, "CodeMirror-gutter " + i));
                "CodeMirror-linenumbers" == i && (e.display.lineGutter = r, r.style.width = (e.display.lineNumWidth || 1) + "px")
            }
            t.style.display = n ? "" : "none", u(e)
        }

        function u(e) {
            var t = e.display.gutters.offsetWidth;
            e.display.sizer.style.marginLeft = t + "px"
        }

        function g(e) {
            if (0 == e.height) return 0;
            for (var t, o = e.text.length, n = e; t = gn(n);) {
                var i = t.find(0, !0);
                n = i.from.line, o += i.from.ch - i.to.ch
            }
            for (n = e; t = pn(n);) {
                var i = t.find(0, !0);
                o -= n.text.length - i.from.ch, n = i.to.line, o += n.text.length - i.to.ch
            }
            return o
        }

        function p(e) {
            var t = e.display,
                o = e.doc;
            t.maxLine = Xn(o, o.first), t.maxLineLength = g(t.maxLine), t.maxLineChanged = !0, o.iter(function(e) {
                var o = g(e);
                o > t.maxLineLength && (t.maxLineLength = o, t.maxLine = e)
            })
        }

        function h(e) {
            var t = wi(e.gutters, "CodeMirror-linenumbers"); - 1 == t && e.lineNumbers ? e.gutters = e.gutters.concat(["CodeMirror-linenumbers"]) : t > -1 && !e.lineNumbers && (e.gutters = e.gutters.slice(0), e.gutters.splice(t, 1))
        }

        function d(e) {
            var t = e.display,
                o = t.gutters.offsetWidth,
                n = Math.round(e.doc.height + Ve(e.display));
            return {
                clientHeight: t.scroller.clientHeight,
                viewHeight: t.wrapper.clientHeight,
                scrollWidth: t.scroller.scrollWidth,
                clientWidth: t.scroller.clientWidth,
                viewWidth: t.wrapper.clientWidth,
                barLeft: e.options.fixedGutter ? o : 0,
                docHeight: n,
                scrollHeight: n + Ge(e) + t.barHeight,
                nativeBarWidth: t.nativeBarWidth,
                gutterWidth: o
            }
        }

        function f(e, t, o) {
            this.cm = o;
            var n = this.vert = Fi("div", [Fi("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar"),
                i = this.horiz = Fi("div", [Fi("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
            e(n), e(i), Es(n, "scroll", function() {
                n.clientHeight && t(n.scrollTop, "vertical")
            }), Es(i, "scroll", function() {
                i.clientWidth && t(i.scrollLeft, "horizontal")
            }), this.checkedOverlay = !1, pr && 8 > hr && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px")
        }

        function m() {}

        function y(t) {
            t.display.scrollbars && (t.display.scrollbars.clear(), t.display.scrollbars.addClass && Vs(t.display.wrapper, t.display.scrollbars.addClass)), t.display.scrollbars = new e.scrollbarModel[t.options.scrollbarStyle](function(e) {
                t.display.wrapper.insertBefore(e, t.display.scrollbarFiller), Es(e, "mousedown", function() {
                    t.state.focused && setTimeout(function() {
                        t.display.input.focus()
                    }, 0)
                }), e.setAttribute("cm-not-content", "true")
            }, function(e, o) {
                "horizontal" == o ? Zt(t, e) : Jt(t, e)
            }, t), t.display.scrollbars.addClass && Ws(t.display.wrapper, t.display.scrollbars.addClass)
        }

        function v(e, t) {
            t || (t = d(e));
            var o = e.display.barWidth,
                n = e.display.barHeight;
            _(e, t);
            for (var i = 0; 4 > i && o != e.display.barWidth || n != e.display.barHeight; i++) o != e.display.barWidth && e.options.lineWrapping && N(e), _(e, d(e)), o = e.display.barWidth, n = e.display.barHeight
        }

        function _(e, t) {
            var o = e.display,
                n = o.scrollbars.update(t);
            o.sizer.style.paddingRight = (o.barWidth = n.right) + "px", o.sizer.style.paddingBottom = (o.barHeight = n.bottom) + "px", n.right && n.bottom ? (o.scrollbarFiller.style.display = "block", o.scrollbarFiller.style.height = n.bottom + "px", o.scrollbarFiller.style.width = n.right + "px") : o.scrollbarFiller.style.display = "", n.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (o.gutterFiller.style.display = "block", o.gutterFiller.style.height = n.bottom + "px", o.gutterFiller.style.width = t.gutterWidth + "px") : o.gutterFiller.style.display = ""
        }

        function b(e, t, o) {
            var n = o && null != o.top ? Math.max(0, o.top) : e.scroller.scrollTop;
            n = Math.floor(n - Ue(e));
            var i = o && null != o.bottom ? o.bottom : n + e.wrapper.clientHeight,
                r = Jn(t, n),
                s = Jn(t, i);
            if (o && o.ensure) {
                var a = o.ensure.from.line,
                    l = o.ensure.to.line;
                r > a ? (r = a, s = Jn(t, Zn(Xn(t, a)) + e.wrapper.clientHeight)) : Math.min(l, t.lastLine()) >= s && (r = Jn(t, Zn(Xn(t, l)) - e.wrapper.clientHeight), s = l)
            }
            return {
                from: r,
                to: Math.max(s, r + 1)
            }
        }

        function C(e) {
            var t = e.display,
                o = t.view;
            if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) {
                for (var n = T(t) - t.scroller.scrollLeft + e.doc.scrollLeft, i = t.gutters.offsetWidth, r = n + "px", s = 0; s < o.length; s++)
                    if (!o[s].hidden) {
                        e.options.fixedGutter && o[s].gutter && (o[s].gutter.style.left = r);
                        var a = o[s].alignable;
                        if (a)
                            for (var l = 0; l < a.length; l++) a[l].style.left = r
                    }
                e.options.fixedGutter && (t.gutters.style.left = n + i + "px")
            }
        }

        function E(e) {
            if (!e.options.lineNumbers) return !1;
            var t = e.doc,
                o = S(e.options, t.first + t.size - 1),
                n = e.display;
            if (o.length != n.lineNumChars) {
                var i = n.measure.appendChild(Fi("div", [Fi("div", o)], "CodeMirror-linenumber CodeMirror-gutter-elt")),
                    r = i.firstChild.offsetWidth,
                    s = i.offsetWidth - r;
                return n.lineGutter.style.width = "", n.lineNumInnerWidth = Math.max(r, n.lineGutter.offsetWidth - s) + 1, n.lineNumWidth = n.lineNumInnerWidth + s, n.lineNumChars = n.lineNumInnerWidth ? o.length : -1, n.lineGutter.style.width = n.lineNumWidth + "px", u(e), !0
            }
            return !1
        }

        function S(e, t) {
            return String(e.lineNumberFormatter(t + e.firstLineNumber))
        }

        function T(e) {
            return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left
        }

        function k(e, t, o) {
            var n = e.display;
            this.viewport = t, this.visible = b(n, e.doc, t), this.editorIsHidden = !n.wrapper.offsetWidth, this.wrapperHeight = n.wrapper.clientHeight, this.wrapperWidth = n.wrapper.clientWidth, this.oldDisplayWidth = Ke(e), this.force = o, this.dims = L(e), this.events = []
        }

        function A(e) {
            var t = e.display;
            !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth, t.heightForcer.style.height = Ge(e) + "px", t.sizer.style.marginBottom = -t.nativeBarWidth + "px", t.sizer.style.borderRightWidth = Ge(e) + "px", t.scrollbarsClipped = !0)
        }

        function B(e, t) {
            var o = e.display,
                n = e.doc;
            if (t.editorIsHidden) return Ot(e), !1;
            if (!t.force && t.visible.from >= o.viewFrom && t.visible.to <= o.viewTo && (null == o.updateLineNumbers || o.updateLineNumbers >= o.viewTo) && o.renderedView == o.view && 0 == Ft(e)) return !1;
            E(e) && (Ot(e), t.dims = L(e));
            var i = n.first + n.size,
                r = Math.max(t.visible.from - e.options.viewportMargin, n.first),
                s = Math.min(i, t.visible.to + e.options.viewportMargin);
            o.viewFrom < r && r - o.viewFrom < 20 && (r = Math.max(n.first, o.viewFrom)), o.viewTo > s && o.viewTo - s < 20 && (s = Math.min(i, o.viewTo)), wr && (r = mn(e.doc, r), s = yn(e.doc, s));
            var a = r != o.viewFrom || s != o.viewTo || o.lastWrapHeight != t.wrapperHeight || o.lastWrapWidth != t.wrapperWidth;
            Pt(e, r, s), o.viewOffset = Zn(Xn(e.doc, o.viewFrom)), e.display.mover.style.top = o.viewOffset + "px";
            var l = Ft(e);
            if (!a && 0 == l && !t.force && o.renderedView == o.view && (null == o.updateLineNumbers || o.updateLineNumbers >= o.viewTo)) return !1;
            var c = Vi();
            return l > 4 && (o.lineDiv.style.display = "none"), O(e, o.updateLineNumbers, t.dims), l > 4 && (o.lineDiv.style.display = ""), o.renderedView = o.view, c && Vi() != c && c.offsetHeight && c.focus(), Hi(o.cursorDiv), Hi(o.selectionDiv), o.gutters.style.height = 0, a && (o.lastWrapHeight = t.wrapperHeight, o.lastWrapWidth = t.wrapperWidth, Me(e, 400)), o.updateLineNumbers = null, !0
        }

        function x(e, t) {
            for (var o = t.force, n = t.viewport, i = !0;; i = !1) {
                if (i && e.options.lineWrapping && t.oldDisplayWidth != Ke(e)) o = !0;
                else if (o = !1, n && null != n.top && (n = {
                        top: Math.min(e.doc.height + Ve(e.display) - je(e), n.top)
                    }), t.visible = b(e.display, e.doc, n), t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo) break;
                if (!B(e, t)) break;
                N(e);
                var r = d(e);
                Ne(e), I(e, r), v(e, r)
            }
            t.signal(e, "update", e), e.display.viewFrom == e.display.reportedViewFrom && e.display.viewTo == e.display.reportedViewTo || (t.signal(e, "viewportChange", e, e.display.viewFrom, e.display.viewTo), e.display.reportedViewFrom = e.display.viewFrom, e.display.reportedViewTo = e.display.viewTo)
        }

        function w(e, t) {
            var o = new k(e, t);
            if (B(e, o)) {
                N(e), x(e, o);
                var n = d(e);
                Ne(e), I(e, n), v(e, n), o.finish()
            }
        }

        function I(e, t) {
            e.display.sizer.style.minHeight = t.docHeight + "px";
            var o = t.docHeight + e.display.barHeight;
            e.display.heightForcer.style.top = o + "px", e.display.gutters.style.height = Math.max(o + Ge(e), t.clientHeight) + "px"
        }

        function N(e) {
            for (var t = e.display, o = t.lineDiv.offsetTop, n = 0; n < t.view.length; n++) {
                var i, r = t.view[n];
                if (!r.hidden) {
                    if (pr && 8 > hr) {
                        var s = r.node.offsetTop + r.node.offsetHeight;
                        i = s - o, o = s
                    } else {
                        var a = r.node.getBoundingClientRect();
                        i = a.bottom - a.top
                    }
                    var l = r.line.height - i;
                    if (2 > i && (i = ft(t)), (l > .001 || -.001 > l) && ($n(r.line, i), R(r.line), r.rest))
                        for (var c = 0; c < r.rest.length; c++) R(r.rest[c])
                }
            }
        }

        function R(e) {
            if (e.widgets)
                for (var t = 0; t < e.widgets.length; ++t) e.widgets[t].height = e.widgets[t].node.offsetHeight
        }

        function L(e) {
            for (var t = e.display, o = {}, n = {}, i = t.gutters.clientLeft, r = t.gutters.firstChild, s = 0; r; r = r.nextSibling, ++s) o[e.options.gutters[s]] = r.offsetLeft + r.clientLeft + i, n[e.options.gutters[s]] = r.clientWidth;
            return {
                fixedPos: T(t),
                gutterTotalWidth: t.gutters.offsetWidth,
                gutterLeft: o,
                gutterWidth: n,
                wrapperWidth: t.wrapper.clientWidth
            }
        }

        function O(e, t, o) {
            function n(t) {
                var o = t.nextSibling;
                return dr && Sr && e.display.currentWheelTarget == t ? t.style.display = "none" : t.parentNode.removeChild(t), o
            }
            for (var i = e.display, r = e.options.lineNumbers, s = i.lineDiv, a = s.firstChild, l = i.view, c = i.viewFrom, u = 0; u < l.length; u++) {
                var g = l[u];
                if (g.hidden);
                else if (g.node && g.node.parentNode == s) {
                    for (; a != g.node;) a = n(a);
                    var p = r && null != t && c >= t && g.lineNumber;
                    g.changes && (wi(g.changes, "gutter") > -1 && (p = !1), D(e, g, c, o)), p && (Hi(g.lineNumber), g.lineNumber.appendChild(document.createTextNode(S(e.options, c)))), a = g.node.nextSibling
                } else {
                    var h = G(e, g, c, o);
                    s.insertBefore(h, a)
                }
                c += g.size
            }
            for (; a;) a = n(a)
        }

        function D(e, t, o, n) {
            for (var i = 0; i < t.changes.length; i++) {
                var r = t.changes[i];
                "text" == r ? H(e, t) : "gutter" == r ? V(e, t, o, n) : "class" == r ? U(t) : "widget" == r && W(e, t, n)
            }
            t.changes = null
        }

        function M(e) {
            return e.node == e.text && (e.node = Fi("div", null, null, "position: relative"), e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text), e.node.appendChild(e.text), pr && 8 > hr && (e.node.style.zIndex = 2)), e.node
        }

        function P(e) {
            var t = e.bgClass ? e.bgClass + " " + (e.line.bgClass || "") : e.line.bgClass;
            if (t && (t += " CodeMirror-linebackground"), e.background) t ? e.background.className = t : (e.background.parentNode.removeChild(e.background), e.background = null);
            else if (t) {
                var o = M(e);
                e.background = o.insertBefore(Fi("div", null, t), o.firstChild)
            }
        }

        function F(e, t) {
            var o = e.display.externalMeasured;
            return o && o.line == t.line ? (e.display.externalMeasured = null, t.measure = o.measure, o.built) : On(e, t)
        }

        function H(e, t) {
            var o = t.text.className,
                n = F(e, t);
            t.text == t.node && (t.node = n.pre), t.text.parentNode.replaceChild(n.pre, t.text), t.text = n.pre, n.bgClass != t.bgClass || n.textClass != t.textClass ? (t.bgClass = n.bgClass, t.textClass = n.textClass, U(t)) : o && (t.text.className = o)
        }

        function U(e) {
            P(e), e.line.wrapClass ? M(e).className = e.line.wrapClass : e.node != e.text && (e.node.className = "");
            var t = e.textClass ? e.textClass + " " + (e.line.textClass || "") : e.line.textClass;
            e.text.className = t || ""
        }

        function V(e, t, o, n) {
            t.gutter && (t.node.removeChild(t.gutter), t.gutter = null);
            var i = t.line.gutterMarkers;
            if (e.options.lineNumbers || i) {
                var r = M(t),
                    s = t.gutter = Fi("div", null, "CodeMirror-gutter-wrapper", "left: " + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + "px; width: " + n.gutterTotalWidth + "px");
                if (e.display.input.setUneditable(s), r.insertBefore(s, t.text), t.line.gutterClass && (s.className += " " + t.line.gutterClass), !e.options.lineNumbers || i && i["CodeMirror-linenumbers"] || (t.lineNumber = s.appendChild(Fi("div", S(e.options, o), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + n.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + e.display.lineNumInnerWidth + "px"))), i)
                    for (var a = 0; a < e.options.gutters.length; ++a) {
                        var l = e.options.gutters[a],
                            c = i.hasOwnProperty(l) && i[l];
                        c && s.appendChild(Fi("div", [c], "CodeMirror-gutter-elt", "left: " + n.gutterLeft[l] + "px; width: " + n.gutterWidth[l] + "px"))
                    }
            }
        }

        function W(e, t, o) {
            t.alignable && (t.alignable = null);
            for (var n, i = t.node.firstChild; i; i = n) {
                var n = i.nextSibling;
                "CodeMirror-linewidget" == i.className && t.node.removeChild(i)
            }
            K(e, t, o)
        }

        function G(e, t, o, n) {
            var i = F(e, t);
            return t.text = t.node = i.pre, i.bgClass && (t.bgClass = i.bgClass), i.textClass && (t.textClass = i.textClass), U(t), V(e, t, o, n), K(e, t, n), t.node
        }

        function K(e, t, o) {
            if (j(e, t.line, t, o, !0), t.rest)
                for (var n = 0; n < t.rest.length; n++) j(e, t.rest[n], t, o, !1)
        }

        function j(e, t, o, n, i) {
            if (t.widgets)
                for (var r = M(o), s = 0, a = t.widgets; s < a.length; ++s) {
                    var l = a[s],
                        c = Fi("div", [l.node], "CodeMirror-linewidget");
                    l.handleMouseEvents || c.setAttribute("cm-ignore-events", "true"), Y(l, c, o, n), e.display.input.setUneditable(c), i && l.above ? r.insertBefore(c, o.gutter || o.text) : r.appendChild(c), _i(l, "redraw")
                }
        }

        function Y(e, t, o, n) {
            if (e.noHScroll) {
                (o.alignable || (o.alignable = [])).push(t);
                var i = n.wrapperWidth;
                t.style.left = n.fixedPos + "px", e.coverGutter || (i -= n.gutterTotalWidth, t.style.paddingLeft = n.gutterTotalWidth + "px"), t.style.width = i + "px"
            }
            e.coverGutter && (t.style.zIndex = 5, t.style.position = "relative", e.noHScroll || (t.style.marginLeft = -n.gutterTotalWidth + "px"))
        }

        function X(e) {
            return Ir(e.line, e.ch)
        }

        function z(e, t) {
            return Nr(e, t) < 0 ? t : e
        }

        function q(e, t) {
            return Nr(e, t) < 0 ? e : t
        }

        function $(e) {
            e.state.focused || (e.display.input.focus(), go(e))
        }

        function Q(e) {
            return e.options.readOnly || e.doc.cantEdit
        }

        function J(e, t, o, n, i) {
            var r = e.doc;
            e.display.shift = !1, n || (n = r.sel);
            var s = js(t),
                a = null;
            e.state.pasteIncoming && n.ranges.length > 1 && (Rr && Rr.join("\n") == t ? a = n.ranges.length % Rr.length == 0 && Ii(Rr, js) : s.length == n.ranges.length && (a = Ii(s, function(e) {
                return [e]
            })));
            for (var l = n.ranges.length - 1; l >= 0; l--) {
                var c = n.ranges[l],
                    u = c.from(),
                    g = c.to();
                c.empty() && (o && o > 0 ? u = Ir(u.line, u.ch - o) : e.state.overwrite && !e.state.pasteIncoming && (g = Ir(g.line, Math.min(Xn(r, g.line).text.length, g.ch + xi(s).length))));
                var p = e.curOp.updateInput,
                    h = {
                        from: u,
                        to: g,
                        text: a ? a[l % a.length] : s,
                        origin: i || (e.state.pasteIncoming ? "paste" : e.state.cutIncoming ? "cut" : "+input")
                    };
                if (Co(e.doc, h), _i(e, "inputRead", e, h), t && !e.state.pasteIncoming && e.options.electricChars && e.options.smartIndent && c.head.ch < 100 && (!l || n.ranges[l - 1].head.line != c.head.line)) {
                    var d = e.getModeAt(c.head),
                        f = jr(h),
                        m = !1;
                    if (d.electricChars) {
                        for (var y = 0; y < d.electricChars.length; y++)
                            if (t.indexOf(d.electricChars.charAt(y)) > -1) {
                                m = Do(e, f.line, "smart");
                                break
                            }
                    } else d.electricInput && d.electricInput.test(Xn(r, f.line).text.slice(0, f.ch)) && (m = Do(e, f.line, "smart"));
                    m && _i(e, "electricInput", e, f.line)
                }
            }
            Lo(e), e.curOp.updateInput = p, e.curOp.typing = !0, e.state.pasteIncoming = e.state.cutIncoming = !1
        }

        function Z(e) {
            for (var t = [], o = [], n = 0; n < e.doc.sel.ranges.length; n++) {
                var i = e.doc.sel.ranges[n].head.line,
                    r = {
                        anchor: Ir(i, 0),
                        head: Ir(i + 1, 0)
                    };
                o.push(r), t.push(e.getRange(r.anchor, r.head))
            }
            return {
                text: t,
                ranges: o
            }
        }

        function ee(e) {
            e.setAttribute("autocorrect", "off"), e.setAttribute("autocapitalize", "off"), e.setAttribute("spellcheck", "false")
        }

        function te(e) {
            this.cm = e, this.prevInput = "", this.pollingFast = !1, this.polling = new ki, this.inaccurateSelection = !1, this.hasSelection = !1, this.composing = null
        }

        function oe() {
            var e = Fi("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),
                t = Fi("div", [e], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
            return dr ? e.style.width = "1000px" : e.setAttribute("wrap", "off"), Cr && (e.style.border = "1px solid black"), ee(e), t
        }

        function ne(e) {
            this.cm = e, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, this.polling = new ki, this.gracePeriod = !1
        }

        function ie(e, t) {
            var o = $e(e, t.line);
            if (!o || o.hidden) return null;
            var n = Xn(e.doc, t.line),
                i = Xe(o, n, t.line),
                r = ei(n),
                s = "left";
            if (r) {
                var a = rr(r, t.ch);
                s = a % 2 ? "right" : "left"
            }
            var l = Ze(i.map, t.ch, "left");
            return l.offset = "right" == l.collapse ? l.end : l.start, l
        }

        function re(e, t) {
            return t && (e.bad = !0), e
        }

        function se(e, t, o) {
            var n;
            if (t == e.display.lineDiv) {
                if (n = e.display.lineDiv.childNodes[o], !n) return re(e.clipPos(Ir(e.display.viewTo - 1)), !0);
                t = null, o = 0
            } else
                for (n = t;; n = n.parentNode) {
                    if (!n || n == e.display.lineDiv) return null;
                    if (n.parentNode && n.parentNode == e.display.lineDiv) break
                }
            for (var i = 0; i < e.display.view.length; i++) {
                var r = e.display.view[i];
                if (r.node == n) return ae(r, t, o)
            }
        }

        function ae(e, t, o) {
            function n(t, o, n) {
                for (var i = -1; i < (u ? u.length : 0); i++)
                    for (var r = 0 > i ? c.map : u[i], s = 0; s < r.length; s += 3) {
                        var a = r[s + 2];
                        if (a == t || a == o) {
                            var l = Qn(0 > i ? e.line : e.rest[i]),
                                g = r[s] + n;
                            return (0 > n || a != t) && (g = r[s + (n ? 1 : 0)]), Ir(l, g)
                        }
                    }
            }
            var i = e.text.firstChild,
                r = !1;
            if (!t || !Fs(i, t)) return re(Ir(Qn(e.line), 0), !0);
            if (t == i && (r = !0, t = i.childNodes[o], o = 0, !t)) {
                var s = e.rest ? xi(e.rest) : e.line;
                return re(Ir(Qn(s), s.text.length), r)
            }
            var a = 3 == t.nodeType ? t : null,
                l = t;
            for (a || 1 != t.childNodes.length || 3 != t.firstChild.nodeType || (a = t.firstChild, o && (o = a.nodeValue.length)); l.parentNode != i;) l = l.parentNode;
            var c = e.measure,
                u = c.maps,
                g = n(a, l, o);
            if (g) return re(g, r);
            for (var p = l.nextSibling, h = a ? a.nodeValue.length - o : 0; p; p = p.nextSibling) {
                if (g = n(p, p.firstChild, 0)) return re(Ir(g.line, g.ch - h), r);
                h += p.textContent.length
            }
            for (var d = l.previousSibling, h = o; d; d = d.previousSibling) {
                if (g = n(d, d.firstChild, -1)) return re(Ir(g.line, g.ch + h), r);
                h += p.textContent.length
            }
        }

        function le(e, t, o, n, i) {
            function r(e) {
                return function(t) {
                    return t.id == e
                }
            }

            function s(t) {
                if (1 == t.nodeType) {
                    var o = t.getAttribute("cm-text");
                    if (null != o) return "" == o && (o = t.textContent.replace(/\u200b/g, "")), void(a += o);
                    var c, u = t.getAttribute("cm-marker");
                    if (u) {
                        var g = e.findMarks(Ir(n, 0), Ir(i + 1, 0), r(+u));
                        return void(g.length && (c = g[0].find()) && (a += zn(e.doc, c.from, c.to).join("\n")))
                    }
                    if ("false" == t.getAttribute("contenteditable")) return;
                    for (var p = 0; p < t.childNodes.length; p++) s(t.childNodes[p]);
                    /^(pre|div|p)$/i.test(t.nodeName) && (l = !0)
                } else if (3 == t.nodeType) {
                    var h = t.nodeValue;
                    if (!h) return;
                    l && (a += "\n", l = !1), a += h
                }
            }
            for (var a = "", l = !1; s(t), t != o;) t = t.nextSibling;
            return a
        }

        function ce(e, t) {
            this.ranges = e, this.primIndex = t
        }

        function ue(e, t) {
            this.anchor = e, this.head = t
        }

        function ge(e, t) {
            var o = e[t];
            e.sort(function(e, t) {
                return Nr(e.from(), t.from())
            }), t = wi(e, o);
            for (var n = 1; n < e.length; n++) {
                var i = e[n],
                    r = e[n - 1];
                if (Nr(r.to(), i.from()) >= 0) {
                    var s = q(r.from(), i.from()),
                        a = z(r.to(), i.to()),
                        l = r.empty() ? i.from() == i.head : r.from() == r.head;
                    t >= n && --t, e.splice(--n, 2, new ue(l ? a : s, l ? s : a))
                }
            }
            return new ce(e, t)
        }

        function pe(e, t) {
            return new ce([new ue(e, t || e)], 0)
        }

        function he(e, t) {
            return Math.max(e.first, Math.min(t, e.first + e.size - 1))
        }

        function de(e, t) {
            if (t.line < e.first) return Ir(e.first, 0);
            var o = e.first + e.size - 1;
            return t.line > o ? Ir(o, Xn(e, o).text.length) : fe(t, Xn(e, t.line).text.length)
        }

        function fe(e, t) {
            var o = e.ch;
            return null == o || o > t ? Ir(e.line, t) : 0 > o ? Ir(e.line, 0) : e
        }

        function me(e, t) {
            return t >= e.first && t < e.first + e.size
        }

        function ye(e, t) {
            for (var o = [], n = 0; n < t.length; n++) o[n] = de(e, t[n]);
            return o
        }

        function ve(e, t, o, n) {
            if (e.cm && e.cm.display.shift || e.extend) {
                var i = t.anchor;
                if (n) {
                    var r = Nr(o, i) < 0;
                    r != Nr(n, i) < 0 ? (i = o, o = n) : r != Nr(o, n) < 0 && (o = n)
                }
                return new ue(i, o)
            }
            return new ue(n || o, o)
        }

        function _e(e, t, o, n) {
            ke(e, new ce([ve(e, e.sel.primary(), t, o)], 0), n)
        }

        function be(e, t, o) {
            for (var n = [], i = 0; i < e.sel.ranges.length; i++) n[i] = ve(e, e.sel.ranges[i], t[i], null);
            var r = ge(n, e.sel.primIndex);
            ke(e, r, o)
        }

        function Ce(e, t, o, n) {
            var i = e.sel.ranges.slice(0);
            i[t] = o, ke(e, ge(i, e.sel.primIndex), n)
        }

        function Ee(e, t, o, n) {
            ke(e, pe(t, o), n)
        }

        function Se(e, t) {
            var o = {
                ranges: t.ranges,
                update: function(t) {
                    this.ranges = [];
                    for (var o = 0; o < t.length; o++) this.ranges[o] = new ue(de(e, t[o].anchor), de(e, t[o].head))
                }
            };
            return Ts(e, "beforeSelectionChange", e, o), e.cm && Ts(e.cm, "beforeSelectionChange", e.cm, o), o.ranges != t.ranges ? ge(o.ranges, o.ranges.length - 1) : t
        }

        function Te(e, t, o) {
            var n = e.history.done,
                i = xi(n);
            i && i.ranges ? (n[n.length - 1] = t, Ae(e, t, o)) : ke(e, t, o)
        }

        function ke(e, t, o) {
            Ae(e, t, o), ai(e, e.sel, e.cm ? e.cm.curOp.id : NaN, o)
        }

        function Ae(e, t, o) {
            (Si(e, "beforeSelectionChange") || e.cm && Si(e.cm, "beforeSelectionChange")) && (t = Se(e, t));
            var n = o && o.bias || (Nr(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1);
            Be(e, we(e, t, n, !0)), o && o.scroll === !1 || !e.cm || Lo(e.cm)
        }

        function Be(e, t) {
            t.equals(e.sel) || (e.sel = t, e.cm && (e.cm.curOp.updateInput = e.cm.curOp.selectionChanged = !0, Ei(e.cm)), _i(e, "cursorActivity", e))
        }

        function xe(e) {
            Be(e, we(e, e.sel, null, !1), xs)
        }

        function we(e, t, o, n) {
            for (var i, r = 0; r < t.ranges.length; r++) {
                var s = t.ranges[r],
                    a = Ie(e, s.anchor, o, n),
                    l = Ie(e, s.head, o, n);
                (i || a != s.anchor || l != s.head) && (i || (i = t.ranges.slice(0, r)), i[r] = new ue(a, l))
            }
            return i ? ge(i, t.primIndex) : t
        }

        function Ie(e, t, o, n) {
            var i = !1,
                r = t,
                s = o || 1;
            e.cantEdit = !1;
            e: for (;;) {
                var a = Xn(e, r.line);
                if (a.markedSpans)
                    for (var l = 0; l < a.markedSpans.length; ++l) {
                        var c = a.markedSpans[l],
                            u = c.marker;
                        if ((null == c.from || (u.inclusiveLeft ? c.from <= r.ch : c.from < r.ch)) && (null == c.to || (u.inclusiveRight ? c.to >= r.ch : c.to > r.ch))) {
                            if (n && (Ts(u, "beforeCursorEnter"), u.explicitlyCleared)) {
                                if (a.markedSpans) {
                                    --l;
                                    continue
                                }
                                break
                            }
                            if (!u.atomic) continue;
                            var g = u.find(0 > s ? -1 : 1);
                            if (0 == Nr(g, r) && (g.ch += s, g.ch < 0 ? g = g.line > e.first ? de(e, Ir(g.line - 1)) : null : g.ch > a.text.length && (g = g.line < e.first + e.size - 1 ? Ir(g.line + 1, 0) : null), !g)) {
                                if (i) return n ? (e.cantEdit = !0, Ir(e.first, 0)) : Ie(e, t, o, !0);
                                i = !0, g = t, s = -s
                            }
                            r = g;
                            continue e
                        }
                    }
                return r
            }
        }

        function Ne(e) {
            e.display.input.showSelection(e.display.input.prepareSelection())
        }

        function Re(e, t) {
            for (var o = e.doc, n = {}, i = n.cursors = document.createDocumentFragment(), r = n.selection = document.createDocumentFragment(), s = 0; s < o.sel.ranges.length; s++)
                if (t !== !1 || s != o.sel.primIndex) {
                    var a = o.sel.ranges[s],
                        l = a.empty();
                    (l || e.options.showCursorWhenSelecting) && Le(e, a, i), l || Oe(e, a, r)
                }
            return n
        }

        function Le(e, t, o) {
            var n = ut(e, t.head, "div", null, null, !e.options.singleCursorHeightPerLine),
                i = o.appendChild(Fi("div", "\xa0", "CodeMirror-cursor"));
            if (i.style.left = n.left + "px", i.style.top = n.top + "px", i.style.height = Math.max(0, n.bottom - n.top) * e.options.cursorHeight + "px", n.other) {
                var r = o.appendChild(Fi("div", "\xa0", "CodeMirror-cursor CodeMirror-secondarycursor"));
                r.style.display = "", r.style.left = n.other.left + "px", r.style.top = n.other.top + "px", r.style.height = .85 * (n.other.bottom - n.other.top) + "px"
            }
        }

        function Oe(e, t, o) {
            function n(e, t, o, n) {
                0 > t && (t = 0), t = Math.round(t), n = Math.round(n), a.appendChild(Fi("div", null, "CodeMirror-selected", "position: absolute; left: " + e + "px; top: " + t + "px; width: " + (null == o ? u - e : o) + "px; height: " + (n - t) + "px"))
            }

            function i(t, o, i) {
                function r(o, n) {
                    return ct(e, Ir(t, o), "div", g, n)
                }
                var a, l, g = Xn(s, t),
                    p = g.text.length;
                return $i(ei(g), o || 0, null == i ? p : i, function(e, t, s) {
                    var g, h, d, f = r(e, "left");
                    if (e == t) g = f, h = d = f.left;
                    else {
                        if (g = r(t - 1, "right"), "rtl" == s) {
                            var m = f;
                            f = g, g = m
                        }
                        h = f.left, d = g.right
                    }
                    null == o && 0 == e && (h = c), g.top - f.top > 3 && (n(h, f.top, null, f.bottom), h = c, f.bottom < g.top && n(h, f.bottom, null, g.top)), null == i && t == p && (d = u), (!a || f.top < a.top || f.top == a.top && f.left < a.left) && (a = f), (!l || g.bottom > l.bottom || g.bottom == l.bottom && g.right > l.right) && (l = g), c + 1 > h && (h = c), n(h, g.top, d - h, g.bottom)
                }), {
                    start: a,
                    end: l
                }
            }
            var r = e.display,
                s = e.doc,
                a = document.createDocumentFragment(),
                l = We(e.display),
                c = l.left,
                u = Math.max(r.sizerWidth, Ke(e) - r.sizer.offsetLeft) - l.right,
                g = t.from(),
                p = t.to();
            if (g.line == p.line) i(g.line, g.ch, p.ch);
            else {
                var h = Xn(s, g.line),
                    d = Xn(s, p.line),
                    f = dn(h) == dn(d),
                    m = i(g.line, g.ch, f ? h.text.length + 1 : null).end,
                    y = i(p.line, f ? 0 : null, p.ch).start;
                f && (m.top < y.top - 2 ? (n(m.right, m.top, null, m.bottom), n(c, y.top, y.left, y.bottom)) : n(m.right, m.top, y.left - m.right, m.bottom)), m.bottom < y.top && n(c, m.bottom, null, y.top)
            }
            o.appendChild(a)
        }

        function De(e) {
            if (e.state.focused) {
                var t = e.display;
                clearInterval(t.blinker);
                var o = !0;
                t.cursorDiv.style.visibility = "", e.options.cursorBlinkRate > 0 ? t.blinker = setInterval(function() {
                    t.cursorDiv.style.visibility = (o = !o) ? "" : "hidden"
                }, e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = "hidden")
            }
        }

        function Me(e, t) {
            e.doc.mode.startState && e.doc.frontier < e.display.viewTo && e.state.highlight.set(t, Oi(Pe, e))
        }

        function Pe(e) {
            var t = e.doc;
            if (t.frontier < t.first && (t.frontier = t.first), !(t.frontier >= e.display.viewTo)) {
                var o = +new Date + e.options.workTime,
                    n = es(t.mode, He(e, t.frontier)),
                    i = [];
                t.iter(t.frontier, Math.min(t.first + t.size, e.display.viewTo + 500), function(r) {
                    if (t.frontier >= e.display.viewFrom) {
                        var s = r.styles,
                            a = In(e, r, n, !0);
                        r.styles = a.styles;
                        var l = r.styleClasses,
                            c = a.classes;
                        c ? r.styleClasses = c : l && (r.styleClasses = null);
                        for (var u = !s || s.length != r.styles.length || l != c && (!l || !c || l.bgClass != c.bgClass || l.textClass != c.textClass), g = 0; !u && g < s.length; ++g) u = s[g] != r.styles[g];
                        u && i.push(t.frontier), r.stateAfter = es(t.mode, n)
                    } else Rn(e, r.text, n), r.stateAfter = t.frontier % 5 == 0 ? es(t.mode, n) : null;
                    return ++t.frontier, +new Date > o ? (Me(e, e.options.workDelay), !0) : void 0
                }), i.length && At(e, function() {
                    for (var t = 0; t < i.length; t++) Lt(e, i[t], "text")
                })
            }
        }

        function Fe(e, t, o) {
            for (var n, i, r = e.doc, s = o ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), a = t; a > s; --a) {
                if (a <= r.first) return r.first;
                var l = Xn(r, a - 1);
                if (l.stateAfter && (!o || a <= r.frontier)) return a;
                var c = Ns(l.text, null, e.options.tabSize);
                (null == i || n > c) && (i = a - 1, n = c)
            }
            return i
        }

        function He(e, t, o) {
            var n = e.doc,
                i = e.display;
            if (!n.mode.startState) return !0;
            var r = Fe(e, t, o),
                s = r > n.first && Xn(n, r - 1).stateAfter;
            return s = s ? es(n.mode, s) : ts(n.mode), n.iter(r, t, function(o) {
                Rn(e, o.text, s);
                var a = r == t - 1 || r % 5 == 0 || r >= i.viewFrom && r < i.viewTo;
                o.stateAfter = a ? es(n.mode, s) : null, ++r
            }), o && (n.frontier = r), s
        }

        function Ue(e) {
            return e.lineSpace.offsetTop
        }

        function Ve(e) {
            return e.mover.offsetHeight - e.lineSpace.offsetHeight
        }

        function We(e) {
            if (e.cachedPaddingH) return e.cachedPaddingH;
            var t = Ui(e.measure, Fi("pre", "x")),
                o = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle,
                n = {
                    left: parseInt(o.paddingLeft),
                    right: parseInt(o.paddingRight)
                };
            return isNaN(n.left) || isNaN(n.right) || (e.cachedPaddingH = n), n
        }

        function Ge(e) {
            return As - e.display.nativeBarWidth
        }

        function Ke(e) {
            return e.display.scroller.clientWidth - Ge(e) - e.display.barWidth
        }

        function je(e) {
            return e.display.scroller.clientHeight - Ge(e) - e.display.barHeight
        }

        function Ye(e, t, o) {
            var n = e.options.lineWrapping,
                i = n && Ke(e);
            if (!t.measure.heights || n && t.measure.width != i) {
                var r = t.measure.heights = [];
                if (n) {
                    t.measure.width = i;
                    for (var s = t.text.firstChild.getClientRects(), a = 0; a < s.length - 1; a++) {
                        var l = s[a],
                            c = s[a + 1];
                        Math.abs(l.bottom - c.bottom) > 2 && r.push((l.bottom + c.top) / 2 - o.top)
                    }
                }
                r.push(o.bottom - o.top)
            }
        }

        function Xe(e, t, o) {
            if (e.line == t) return {
                map: e.measure.map,
                cache: e.measure.cache
            };
            for (var n = 0; n < e.rest.length; n++)
                if (e.rest[n] == t) return {
                    map: e.measure.maps[n],
                    cache: e.measure.caches[n]
                };
            for (var n = 0; n < e.rest.length; n++)
                if (Qn(e.rest[n]) > o) return {
                    map: e.measure.maps[n],
                    cache: e.measure.caches[n],
                    before: !0
                }
        }

        function ze(e, t) {
            t = dn(t);
            var o = Qn(t),
                n = e.display.externalMeasured = new It(e.doc, t, o);
            n.lineN = o;
            var i = n.built = On(e, n);
            return n.text = i.pre, Ui(e.display.lineMeasure, i.pre), n
        }

        function qe(e, t, o, n) {
            return Je(e, Qe(e, t), o, n)
        }

        function $e(e, t) {
            if (t >= e.display.viewFrom && t < e.display.viewTo) return e.display.view[Dt(e, t)];
            var o = e.display.externalMeasured;
            return o && t >= o.lineN && t < o.lineN + o.size ? o : void 0
        }

        function Qe(e, t) {
            var o = Qn(t),
                n = $e(e, o);
            n && !n.text ? n = null : n && n.changes && D(e, n, o, L(e)), n || (n = ze(e, t));
            var i = Xe(n, t, o);
            return {
                line: t,
                view: n,
                rect: null,
                map: i.map,
                cache: i.cache,
                before: i.before,
                hasHeights: !1
            }
        }

        function Je(e, t, o, n, i) {
            t.before && (o = -1);
            var r, s = o + (n || "");
            return t.cache.hasOwnProperty(s) ? r = t.cache[s] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()), t.hasHeights || (Ye(e, t.view, t.rect), t.hasHeights = !0), r = et(e, t, o, n), r.bogus || (t.cache[s] = r)), {
                left: r.left,
                right: r.right,
                top: i ? r.rtop : r.top,
                bottom: i ? r.rbottom : r.bottom
            }
        }

        function Ze(e, t, o) {
            for (var n, i, r, s, a = 0; a < e.length; a += 3) {
                var l = e[a],
                    c = e[a + 1];
                if (l > t ? (i = 0, r = 1, s = "left") : c > t ? (i = t - l, r = i + 1) : (a == e.length - 3 || t == c && e[a + 3] > t) && (r = c - l, i = r - 1, t >= c && (s = "right")), null != i) {
                    if (n = e[a + 2], l == c && o == (n.insertLeft ? "left" : "right") && (s = o), "left" == o && 0 == i)
                        for (; a && e[a - 2] == e[a - 3] && e[a - 1].insertLeft;) n = e[(a -= 3) + 2], s = "left";
                    if ("right" == o && i == c - l)
                        for (; a < e.length - 3 && e[a + 3] == e[a + 4] && !e[a + 5].insertLeft;) n = e[(a += 3) + 2], s = "right";
                    break
                }
            }
            return {
                node: n,
                start: i,
                end: r,
                collapse: s,
                coverStart: l,
                coverEnd: c
            }
        }

        function et(e, t, o, n) {
            var i, r = Ze(t.map, o, n),
                s = r.node,
                a = r.start,
                l = r.end,
                c = r.collapse;
            if (3 == s.nodeType) {
                for (var u = 0; 4 > u; u++) {
                    for (; a && Pi(t.line.text.charAt(r.coverStart + a));) --a;
                    for (; r.coverStart + l < r.coverEnd && Pi(t.line.text.charAt(r.coverStart + l));) ++l;
                    if (pr && 9 > hr && 0 == a && l == r.coverEnd - r.coverStart) i = s.parentNode.getBoundingClientRect();
                    else if (pr && e.options.lineWrapping) {
                        var g = Os(s, a, l).getClientRects();
                        i = g.length ? g["right" == n ? g.length - 1 : 0] : Mr
                    } else i = Os(s, a, l).getBoundingClientRect() || Mr;
                    if (i.left || i.right || 0 == a) break;
                    l = a, a -= 1, c = "right"
                }
                pr && 11 > hr && (i = tt(e.display.measure, i))
            } else {
                a > 0 && (c = n = "right");
                var g;
                i = e.options.lineWrapping && (g = s.getClientRects()).length > 1 ? g["right" == n ? g.length - 1 : 0] : s.getBoundingClientRect()
            }
            if (pr && 9 > hr && !a && (!i || !i.left && !i.right)) {
                var p = s.parentNode.getClientRects()[0];
                i = p ? {
                    left: p.left,
                    right: p.left + mt(e.display),
                    top: p.top,
                    bottom: p.bottom
                } : Mr
            }
            for (var h = i.top - t.rect.top, d = i.bottom - t.rect.top, f = (h + d) / 2, m = t.view.measure.heights, u = 0; u < m.length - 1 && !(f < m[u]); u++);
            var y = u ? m[u - 1] : 0,
                v = m[u],
                _ = {
                    left: ("right" == c ? i.right : i.left) - t.rect.left,
                    right: ("left" == c ? i.left : i.right) - t.rect.left,
                    top: y,
                    bottom: v
                };
            return i.left || i.right || (_.bogus = !0), e.options.singleCursorHeightPerLine || (_.rtop = h, _.rbottom = d), _
        }

        function tt(e, t) {
            if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !qi(e)) return t;
            var o = screen.logicalXDPI / screen.deviceXDPI,
                n = screen.logicalYDPI / screen.deviceYDPI;
            return {
                left: t.left * o,
                right: t.right * o,
                top: t.top * n,
                bottom: t.bottom * n
            }
        }

        function ot(e) {
            if (e.measure && (e.measure.cache = {}, e.measure.heights = null, e.rest))
                for (var t = 0; t < e.rest.length; t++) e.measure.caches[t] = {}
        }

        function nt(e) {
            e.display.externalMeasure = null, Hi(e.display.lineMeasure);
            for (var t = 0; t < e.display.view.length; t++) ot(e.display.view[t])
        }

        function it(e) {
            nt(e), e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null, e.options.lineWrapping || (e.display.maxLineChanged = !0), e.display.lineNumChars = null
        }

        function rt() {
            return window.pageXOffset || (document.documentElement || document.body).scrollLeft
        }

        function st() {
            return window.pageYOffset || (document.documentElement || document.body).scrollTop
        }

        function at(e, t, o, n) {
            if (t.widgets)
                for (var i = 0; i < t.widgets.length; ++i)
                    if (t.widgets[i].above) {
                        var r = Cn(t.widgets[i]);
                        o.top += r, o.bottom += r
                    }
            if ("line" == n) return o;
            n || (n = "local");
            var s = Zn(t);
            if ("local" == n ? s += Ue(e.display) : s -= e.display.viewOffset, "page" == n || "window" == n) {
                var a = e.display.lineSpace.getBoundingClientRect();
                s += a.top + ("window" == n ? 0 : st());
                var l = a.left + ("window" == n ? 0 : rt());
                o.left += l, o.right += l
            }
            return o.top += s, o.bottom += s, o
        }

        function lt(e, t, o) {
            if ("div" == o) return t;
            var n = t.left,
                i = t.top;
            if ("page" == o) n -= rt(), i -= st();
            else if ("local" == o || !o) {
                var r = e.display.sizer.getBoundingClientRect();
                n += r.left, i += r.top
            }
            var s = e.display.lineSpace.getBoundingClientRect();
            return {
                left: n - s.left,
                top: i - s.top
            }
        }

        function ct(e, t, o, n, i) {
            return n || (n = Xn(e.doc, t.line)), at(e, n, qe(e, n, t.ch, i), o)
        }

        function ut(e, t, o, n, i, r) {
            function s(t, s) {
                var a = Je(e, i, t, s ? "right" : "left", r);
                return s ? a.left = a.right : a.right = a.left, at(e, n, a, o)
            }

            function a(e, t) {
                var o = l[t],
                    n = o.level % 2;
                return e == Qi(o) && t && o.level < l[t - 1].level ? (o = l[--t], e = Ji(o) - (o.level % 2 ? 0 : 1), n = !0) : e == Ji(o) && t < l.length - 1 && o.level < l[t + 1].level && (o = l[++t], e = Qi(o) - o.level % 2, n = !1), n && e == o.to && e > o.from ? s(e - 1) : s(e, n)
            }
            n = n || Xn(e.doc, t.line), i || (i = Qe(e, n));
            var l = ei(n),
                c = t.ch;
            if (!l) return s(c);
            var u = rr(l, c),
                g = a(c, u);
            return null != $s && (g.other = a(c, $s)), g
        }

        function gt(e, t) {
            var o = 0,
                t = de(e.doc, t);
            e.options.lineWrapping || (o = mt(e.display) * t.ch);
            var n = Xn(e.doc, t.line),
                i = Zn(n) + Ue(e.display);
            return {
                left: o,
                right: o,
                top: i,
                bottom: i + n.height
            }
        }

        function pt(e, t, o, n) {
            var i = Ir(e, t);
            return i.xRel = n, o && (i.outside = !0), i
        }

        function ht(e, t, o) {
            var n = e.doc;
            if (o += e.display.viewOffset, 0 > o) return pt(n.first, 0, !0, -1);
            var i = Jn(n, o),
                r = n.first + n.size - 1;
            if (i > r) return pt(n.first + n.size - 1, Xn(n, r).text.length, !0, 1);
            0 > t && (t = 0);
            for (var s = Xn(n, i);;) {
                var a = dt(e, s, i, t, o),
                    l = pn(s),
                    c = l && l.find(0, !0);
                if (!l || !(a.ch > c.from.ch || a.ch == c.from.ch && a.xRel > 0)) return a;
                i = Qn(s = c.to.line)
            }
        }

        function dt(e, t, o, n, i) {
            function r(n) {
                var i = ut(e, Ir(o, n), "line", t, c);
                return a = !0, s > i.bottom ? i.left - l : s < i.top ? i.left + l : (a = !1, i.left)
            }
            var s = i - Zn(t),
                a = !1,
                l = 2 * e.display.wrapper.clientWidth,
                c = Qe(e, t),
                u = ei(t),
                g = t.text.length,
                p = Zi(t),
                h = er(t),
                d = r(p),
                f = a,
                m = r(h),
                y = a;
            if (n > m) return pt(o, h, y, 1);
            for (;;) {
                if (u ? h == p || h == ar(t, p, 1) : 1 >= h - p) {
                    for (var v = d > n || m - n >= n - d ? p : h, _ = n - (v == p ? d : m); Pi(t.text.charAt(v));) ++v;
                    var b = pt(o, v, v == p ? f : y, -1 > _ ? -1 : _ > 1 ? 1 : 0);
                    return b
                }
                var C = Math.ceil(g / 2),
                    E = p + C;
                if (u) {
                    E = p;
                    for (var S = 0; C > S; ++S) E = ar(t, E, 1)
                }
                var T = r(E);
                T > n ? (h = E, m = T, (y = a) && (m += 1e3), g = C) : (p = E, d = T, f = a, g -= C)
            }
        }

        function ft(e) {
            if (null != e.cachedTextHeight) return e.cachedTextHeight;
            if (null == Lr) {
                Lr = Fi("pre");
                for (var t = 0; 49 > t; ++t) Lr.appendChild(document.createTextNode("x")), Lr.appendChild(Fi("br"));
                Lr.appendChild(document.createTextNode("x"))
            }
            Ui(e.measure, Lr);
            var o = Lr.offsetHeight / 50;
            return o > 3 && (e.cachedTextHeight = o), Hi(e.measure), o || 1
        }

        function mt(e) {
            if (null != e.cachedCharWidth) return e.cachedCharWidth;
            var t = Fi("span", "xxxxxxxxxx"),
                o = Fi("pre", [t]);
            Ui(e.measure, o);
            var n = t.getBoundingClientRect(),
                i = (n.right - n.left) / 10;
            return i > 2 && (e.cachedCharWidth = i), i || 10
        }

        function yt(e) {
            e.curOp = {
                cm: e,
                viewChanged: !1,
                startHeight: e.doc.height,
                forceUpdate: !1,
                updateInput: null,
                typing: !1,
                changeObjs: null,
                cursorActivityHandlers: null,
                cursorActivityCalled: 0,
                selectionChanged: !1,
                updateMaxLine: !1,
                scrollLeft: null,
                scrollTop: null,
                scrollToPos: null,
                focus: !1,
                id: ++Fr
            }, Pr ? Pr.ops.push(e.curOp) : e.curOp.ownsGroup = Pr = {
                ops: [e.curOp],
                delayedCallbacks: []
            }
        }

        function vt(e) {
            var t = e.delayedCallbacks,
                o = 0;
            do {
                for (; o < t.length; o++) t[o]();
                for (var n = 0; n < e.ops.length; n++) {
                    var i = e.ops[n];
                    if (i.cursorActivityHandlers)
                        for (; i.cursorActivityCalled < i.cursorActivityHandlers.length;) i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)
                }
            } while (o < t.length)
        }

        function _t(e) {
            var t = e.curOp,
                o = t.ownsGroup;
            if (o) try {
                vt(o)
            } finally {
                Pr = null;
                for (var n = 0; n < o.ops.length; n++) o.ops[n].cm.curOp = null;
                bt(o)
            }
        }

        function bt(e) {
            for (var t = e.ops, o = 0; o < t.length; o++) Ct(t[o]);
            for (var o = 0; o < t.length; o++) Et(t[o]);
            for (var o = 0; o < t.length; o++) St(t[o]);
            for (var o = 0; o < t.length; o++) Tt(t[o]);
            for (var o = 0; o < t.length; o++) kt(t[o])
        }

        function Ct(e) {
            var t = e.cm,
                o = t.display;
            A(t), e.updateMaxLine && p(t), e.mustUpdate = e.viewChanged || e.forceUpdate || null != e.scrollTop || e.scrollToPos && (e.scrollToPos.from.line < o.viewFrom || e.scrollToPos.to.line >= o.viewTo) || o.maxLineChanged && t.options.lineWrapping, e.update = e.mustUpdate && new k(t, e.mustUpdate && {
                top: e.scrollTop,
                ensure: e.scrollToPos
            }, e.forceUpdate)
        }

        function Et(e) {
            e.updatedDisplay = e.mustUpdate && B(e.cm, e.update)
        }

        function St(e) {
            var t = e.cm,
                o = t.display;
            e.updatedDisplay && N(t), e.barMeasure = d(t), o.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = qe(t, o.maxLine, o.maxLine.text.length).left + 3, t.display.sizerWidth = e.adjustWidthTo, e.barMeasure.scrollWidth = Math.max(o.scroller.clientWidth, o.sizer.offsetLeft + e.adjustWidthTo + Ge(t) + t.display.barWidth), e.maxScrollLeft = Math.max(0, o.sizer.offsetLeft + e.adjustWidthTo - Ke(t))), (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = o.input.prepareSelection())
        }

        function Tt(e) {
            var t = e.cm;
            null != e.adjustWidthTo && (t.display.sizer.style.minWidth = e.adjustWidthTo + "px", e.maxScrollLeft < t.doc.scrollLeft && Zt(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0), t.display.maxLineChanged = !1), e.preparedSelection && t.display.input.showSelection(e.preparedSelection), e.updatedDisplay && I(t, e.barMeasure), (e.updatedDisplay || e.startHeight != t.doc.height) && v(t, e.barMeasure), e.selectionChanged && De(t), t.state.focused && e.updateInput && t.display.input.reset(e.typing), e.focus && e.focus == Vi() && $(e.cm)
        }

        function kt(e) {
            var t = e.cm,
                o = t.display,
                n = t.doc;
            if (e.updatedDisplay && x(t, e.update), null == o.wheelStartX || null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos || (o.wheelStartX = o.wheelStartY = null), null == e.scrollTop || o.scroller.scrollTop == e.scrollTop && !e.forceScroll || (n.scrollTop = Math.max(0, Math.min(o.scroller.scrollHeight - o.scroller.clientHeight, e.scrollTop)), o.scrollbars.setScrollTop(n.scrollTop), o.scroller.scrollTop = n.scrollTop), null == e.scrollLeft || o.scroller.scrollLeft == e.scrollLeft && !e.forceScroll || (n.scrollLeft = Math.max(0, Math.min(o.scroller.scrollWidth - Ke(t), e.scrollLeft)), o.scrollbars.setScrollLeft(n.scrollLeft), o.scroller.scrollLeft = n.scrollLeft, C(t)), e.scrollToPos) {
                var i = wo(t, de(n, e.scrollToPos.from), de(n, e.scrollToPos.to), e.scrollToPos.margin);
                e.scrollToPos.isCursor && t.state.focused && xo(t, i)
            }
            var r = e.maybeHiddenMarkers,
                s = e.maybeUnhiddenMarkers;
            if (r)
                for (var a = 0; a < r.length; ++a) r[a].lines.length || Ts(r[a], "hide");
            if (s)
                for (var a = 0; a < s.length; ++a) s[a].lines.length && Ts(s[a], "unhide");
            o.wrapper.offsetHeight && (n.scrollTop = t.display.scroller.scrollTop), e.changeObjs && Ts(t, "changes", t, e.changeObjs), e.update && e.update.finish()
        }

        function At(e, t) {
            if (e.curOp) return t();
            yt(e);
            try {
                return t()
            } finally {
                _t(e)
            }
        }

        function Bt(e, t) {
            return function() {
                if (e.curOp) return t.apply(e, arguments);
                yt(e);
                try {
                    return t.apply(e, arguments)
                } finally {
                    _t(e)
                }
            }
        }

        function xt(e) {
            return function() {
                if (this.curOp) return e.apply(this, arguments);
                yt(this);
                try {
                    return e.apply(this, arguments)
                } finally {
                    _t(this)
                }
            }
        }

        function wt(e) {
            return function() {
                var t = this.cm;
                if (!t || t.curOp) return e.apply(this, arguments);
                yt(t);
                try {
                    return e.apply(this, arguments)
                } finally {
                    _t(t)
                }
            }
        }

        function It(e, t, o) {
            this.line = t, this.rest = fn(t), this.size = this.rest ? Qn(xi(this.rest)) - o + 1 : 1, this.node = this.text = null, this.hidden = vn(e, t)
        }

        function Nt(e, t, o) {
            for (var n, i = [], r = t; o > r; r = n) {
                var s = new It(e.doc, Xn(e.doc, r), r);
                n = r + s.size, i.push(s)
            }
            return i
        }

        function Rt(e, t, o, n) {
            null == t && (t = e.doc.first), null == o && (o = e.doc.first + e.doc.size), n || (n = 0);
            var i = e.display;
            if (n && o < i.viewTo && (null == i.updateLineNumbers || i.updateLineNumbers > t) && (i.updateLineNumbers = t), e.curOp.viewChanged = !0, t >= i.viewTo) wr && mn(e.doc, t) < i.viewTo && Ot(e);
            else if (o <= i.viewFrom) wr && yn(e.doc, o + n) > i.viewFrom ? Ot(e) : (i.viewFrom += n, i.viewTo += n);
            else if (t <= i.viewFrom && o >= i.viewTo) Ot(e);
            else if (t <= i.viewFrom) {
                var r = Mt(e, o, o + n, 1);
                r ? (i.view = i.view.slice(r.index), i.viewFrom = r.lineN, i.viewTo += n) : Ot(e)
            } else if (o >= i.viewTo) {
                var r = Mt(e, t, t, -1);
                r ? (i.view = i.view.slice(0, r.index), i.viewTo = r.lineN) : Ot(e)
            } else {
                var s = Mt(e, t, t, -1),
                    a = Mt(e, o, o + n, 1);
                s && a ? (i.view = i.view.slice(0, s.index).concat(Nt(e, s.lineN, a.lineN)).concat(i.view.slice(a.index)), i.viewTo += n) : Ot(e)
            }
            var l = i.externalMeasured;
            l && (o < l.lineN ? l.lineN += n : t < l.lineN + l.size && (i.externalMeasured = null))
        }

        function Lt(e, t, o) {
            e.curOp.viewChanged = !0;
            var n = e.display,
                i = e.display.externalMeasured;
            if (i && t >= i.lineN && t < i.lineN + i.size && (n.externalMeasured = null), !(t < n.viewFrom || t >= n.viewTo)) {
                var r = n.view[Dt(e, t)];
                if (null != r.node) {
                    var s = r.changes || (r.changes = []); - 1 == wi(s, o) && s.push(o)
                }
            }
        }

        function Ot(e) {
            e.display.viewFrom = e.display.viewTo = e.doc.first, e.display.view = [], e.display.viewOffset = 0
        }

        function Dt(e, t) {
            if (t >= e.display.viewTo) return null;
            if (t -= e.display.viewFrom, 0 > t) return null;
            for (var o = e.display.view, n = 0; n < o.length; n++)
                if (t -= o[n].size, 0 > t) return n
        }

        function Mt(e, t, o, n) {
            var i, r = Dt(e, t),
                s = e.display.view;
            if (!wr || o == e.doc.first + e.doc.size) return {
                index: r,
                lineN: o
            };
            for (var a = 0, l = e.display.viewFrom; r > a; a++) l += s[a].size;
            if (l != t) {
                if (n > 0) {
                    if (r == s.length - 1) return null;
                    i = l + s[r].size - t, r++
                } else i = l - t;
                t += i, o += i
            }
            for (; mn(e.doc, o) != o;) {
                if (r == (0 > n ? 0 : s.length - 1)) return null;
                o += n * s[r - (0 > n ? 1 : 0)].size, r += n
            }
            return {
                index: r,
                lineN: o
            }
        }

        function Pt(e, t, o) {
            var n = e.display,
                i = n.view;
            0 == i.length || t >= n.viewTo || o <= n.viewFrom ? (n.view = Nt(e, t, o), n.viewFrom = t) : (n.viewFrom > t ? n.view = Nt(e, t, n.viewFrom).concat(n.view) : n.viewFrom < t && (n.view = n.view.slice(Dt(e, t))), n.viewFrom = t, n.viewTo < o ? n.view = n.view.concat(Nt(e, n.viewTo, o)) : n.viewTo > o && (n.view = n.view.slice(0, Dt(e, o)))), n.viewTo = o
        }

        function Ft(e) {
            for (var t = e.display.view, o = 0, n = 0; n < t.length; n++) {
                var i = t[n];
                i.hidden || i.node && !i.changes || ++o
            }
            return o
        }

        function Ht(e) {
            function t() {
                i.activeTouch && (r = setTimeout(function() {
                    i.activeTouch = null
                }, 1e3), s = i.activeTouch, s.end = +new Date)
            }

            function o(e) {
                if (1 != e.touches.length) return !1;
                var t = e.touches[0];
                return t.radiusX <= 1 && t.radiusY <= 1
            }

            function n(e, t) {
                if (null == t.left) return !0;
                var o = t.left - e.left,
                    n = t.top - e.top;
                return o * o + n * n > 400
            }
            var i = e.display;
            Es(i.scroller, "mousedown", Bt(e, Kt)), pr && 11 > hr ? Es(i.scroller, "dblclick", Bt(e, function(t) {
                if (!Ci(e, t)) {
                    var o = Gt(e, t);
                    if (o && !qt(e, t) && !Wt(e.display, t)) {
                        _s(t);
                        var n = e.findWordAt(o);
                        _e(e.doc, n.anchor, n.head)
                    }
                }
            })) : Es(i.scroller, "dblclick", function(t) {
                Ci(e, t) || _s(t)
            }), Br || Es(i.scroller, "contextmenu", function(t) {
                ho(e, t)
            });
            var r, s = {
                end: 0
            };
            Es(i.scroller, "touchstart", function(e) {
                if (!o(e)) {
                    clearTimeout(r);
                    var t = +new Date;
                    i.activeTouch = {
                        start: t,
                        moved: !1,
                        prev: t - s.end <= 300 ? s : null
                    }, 1 == e.touches.length && (i.activeTouch.left = e.touches[0].pageX, i.activeTouch.top = e.touches[0].pageY)
                }
            }), Es(i.scroller, "touchmove", function() {
                i.activeTouch && (i.activeTouch.moved = !0)
            }), Es(i.scroller, "touchend", function(o) {
                var r = i.activeTouch;
                if (r && !Wt(i, o) && null != r.left && !r.moved && new Date - r.start < 300) {
                    var s, a = e.coordsChar(i.activeTouch, "page");
                    s = !r.prev || n(r, r.prev) ? new ue(a, a) : !r.prev.prev || n(r, r.prev.prev) ? e.findWordAt(a) : new ue(Ir(a.line, 0), de(e.doc, Ir(a.line + 1, 0))), e.setSelection(s.anchor, s.head), e.focus(), _s(o)
                }
                t()
            }), Es(i.scroller, "touchcancel", t), Es(i.scroller, "scroll", function() {
                i.scroller.clientHeight && (Jt(e, i.scroller.scrollTop), Zt(e, i.scroller.scrollLeft, !0), Ts(e, "scroll", e))
            }), Es(i.scroller, "mousewheel", function(t) {
                eo(e, t)
            }), Es(i.scroller, "DOMMouseScroll", function(t) {
                eo(e, t)
            }), Es(i.wrapper, "scroll", function() {
                i.wrapper.scrollTop = i.wrapper.scrollLeft = 0
            }), i.dragFunctions = {
                simple: function(t) {
                    Ci(e, t) || Cs(t)
                },
                start: function(t) {
                    Qt(e, t)
                },
                drop: Bt(e, $t)
            };
            var a = i.input.getField();
            Es(a, "keyup", function(t) {
                lo.call(e, t)
            }), Es(a, "keydown", Bt(e, so)), Es(a, "keypress", Bt(e, co)), Es(a, "focus", Oi(go, e)), Es(a, "blur", Oi(po, e))
        }

        function Ut(t, o, n) {
            var i = n && n != e.Init;
            if (!o != !i) {
                var r = t.display.dragFunctions,
                    s = o ? Es : Ss;
                s(t.display.scroller, "dragstart", r.start), s(t.display.scroller, "dragenter", r.simple), s(t.display.scroller, "dragover", r.simple), s(t.display.scroller, "drop", r.drop)
            }
        }

        function Vt(e) {
            var t = e.display;
            t.lastWrapHeight == t.wrapper.clientHeight && t.lastWrapWidth == t.wrapper.clientWidth || (t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null, t.scrollbarsClipped = !1, e.setSize())
        }

        function Wt(e, t) {
            for (var o = yi(t); o != e.wrapper; o = o.parentNode)
                if (!o || 1 == o.nodeType && "true" == o.getAttribute("cm-ignore-events") || o.parentNode == e.sizer && o != e.mover) return !0
        }

        function Gt(e, t, o, n) {
            var i = e.display;
            if (!o && "true" == yi(t).getAttribute("cm-not-content")) return null;
            var r, s, a = i.lineSpace.getBoundingClientRect();
            try {
                r = t.clientX - a.left, s = t.clientY - a.top
            } catch (t) {
                return null
            }
            var l, c = ht(e, r, s);
            if (n && 1 == c.xRel && (l = Xn(e.doc, c.line).text).length == c.ch) {
                var u = Ns(l, l.length, e.options.tabSize) - l.length;
                c = Ir(c.line, Math.max(0, Math.round((r - We(e.display).left) / mt(e.display)) - u))
            }
            return c
        }

        function Kt(e) {
            var t = this,
                o = t.display;
            if (!(o.activeTouch && o.input.supportsTouch() || Ci(t, e))) {
                if (o.shift = e.shiftKey, Wt(o, e)) return void(dr || (o.scroller.draggable = !1, setTimeout(function() {
                    o.scroller.draggable = !0
                }, 100)));
                if (!qt(t, e)) {
                    var n = Gt(t, e);
                    switch (window.focus(), vi(e)) {
                        case 1:
                            n ? jt(t, e, n) : yi(e) == o.scroller && _s(e);
                            break;
                        case 2:
                            dr && (t.state.lastMiddleDown = +new Date), n && _e(t.doc, n), setTimeout(function() {
                                o.input.focus()
                            }, 20), _s(e);
                            break;
                        case 3:
                            Br ? ho(t, e) : uo(t)
                    }
                }
            }
        }

        function jt(e, t, o) {
            pr ? setTimeout(Oi($, e), 0) : e.curOp.focus = Vi();
            var n, i = +new Date;
            Dr && Dr.time > i - 400 && 0 == Nr(Dr.pos, o) ? n = "triple" : Or && Or.time > i - 400 && 0 == Nr(Or.pos, o) ? (n = "double", Dr = {
                time: i,
                pos: o
            }) : (n = "single", Or = {
                time: i,
                pos: o
            });
            var r, s = e.doc.sel,
                a = Sr ? t.metaKey : t.ctrlKey;
            e.options.dragDrop && Ks && !Q(e) && "single" == n && (r = s.contains(o)) > -1 && !s.ranges[r].empty() ? Yt(e, t, o, a) : Xt(e, t, o, n, a)
        }

        function Yt(e, t, o, n) {
            var i = e.display,
                r = +new Date,
                s = Bt(e, function(a) {
                    dr && (i.scroller.draggable = !1), e.state.draggingText = !1, Ss(document, "mouseup", s), Ss(i.scroller, "drop", s), Math.abs(t.clientX - a.clientX) + Math.abs(t.clientY - a.clientY) < 10 && (_s(a), !n && +new Date - 200 < r && _e(e.doc, o), dr || pr && 9 == hr ? setTimeout(function() {
                        document.body.focus(), i.input.focus()
                    }, 20) : i.input.focus())
                });
            dr && (i.scroller.draggable = !0), e.state.draggingText = s, i.scroller.dragDrop && i.scroller.dragDrop(), Es(document, "mouseup", s), Es(i.scroller, "drop", s)
        }

        function Xt(e, t, o, n, i) {
            function r(t) {
                if (0 != Nr(m, t))
                    if (m = t, "rect" == n) {
                        for (var i = [], r = e.options.tabSize, s = Ns(Xn(c, o.line).text, o.ch, r), a = Ns(Xn(c, t.line).text, t.ch, r), l = Math.min(s, a), h = Math.max(s, a), d = Math.min(o.line, t.line), f = Math.min(e.lastLine(), Math.max(o.line, t.line)); f >= d; d++) {
                            var y = Xn(c, d).text,
                                v = Ai(y, l, r);
                            l == h ? i.push(new ue(Ir(d, v), Ir(d, v))) : y.length > v && i.push(new ue(Ir(d, v), Ir(d, Ai(y, h, r))))
                        }
                        i.length || i.push(new ue(o, o)), ke(c, ge(p.ranges.slice(0, g).concat(i), g), {
                            origin: "*mouse",
                            scroll: !1
                        }), e.scrollIntoView(t)
                    } else {
                        var _ = u,
                            b = _.anchor,
                            C = t;
                        if ("single" != n) {
                            if ("double" == n) var E = e.findWordAt(t);
                            else var E = new ue(Ir(t.line, 0), de(c, Ir(t.line + 1, 0)));
                            Nr(E.anchor, b) > 0 ? (C = E.head, b = q(_.from(), E.anchor)) : (C = E.anchor, b = z(_.to(), E.head))
                        }
                        var i = p.ranges.slice(0);
                        i[g] = new ue(de(c, b), C), ke(c, ge(i, g), ws)
                    }
            }

            function s(t) {
                var o = ++v,
                    i = Gt(e, t, !0, "rect" == n);
                if (i)
                    if (0 != Nr(i, m)) {
                        e.curOp.focus = Vi(), r(i);
                        var a = b(l, c);
                        (i.line >= a.to || i.line < a.from) && setTimeout(Bt(e, function() {
                            v == o && s(t)
                        }), 150)
                    } else {
                        var u = t.clientY < y.top ? -20 : t.clientY > y.bottom ? 20 : 0;
                        u && setTimeout(Bt(e, function() {
                            v == o && (l.scroller.scrollTop += u, s(t))
                        }), 50)
                    }
            }

            function a(e) {
                v = 1 / 0, _s(e), l.input.focus(), Ss(document, "mousemove", _), Ss(document, "mouseup", C), c.history.lastSelOrigin = null
            }
            var l = e.display,
                c = e.doc;
            _s(t);
            var u, g, p = c.sel,
                h = p.ranges;
            if (i && !t.shiftKey ? (g = c.sel.contains(o), u = g > -1 ? h[g] : new ue(o, o)) : (u = c.sel.primary(), g = c.sel.primIndex), t.altKey) n = "rect", i || (u = new ue(o, o)), o = Gt(e, t, !0, !0), g = -1;
            else if ("double" == n) {
                var d = e.findWordAt(o);
                u = e.display.shift || c.extend ? ve(c, u, d.anchor, d.head) : d
            } else if ("triple" == n) {
                var f = new ue(Ir(o.line, 0), de(c, Ir(o.line + 1, 0)));
                u = e.display.shift || c.extend ? ve(c, u, f.anchor, f.head) : f
            } else u = ve(c, u, o);
            i ? -1 == g ? (g = h.length, ke(c, ge(h.concat([u]), g), {
                scroll: !1,
                origin: "*mouse"
            })) : h.length > 1 && h[g].empty() && "single" == n && !t.shiftKey ? (ke(c, ge(h.slice(0, g).concat(h.slice(g + 1)), 0)), p = c.sel) : Ce(c, g, u, ws) : (g = 0, ke(c, new ce([u], 0), ws), p = c.sel);
            var m = o,
                y = l.wrapper.getBoundingClientRect(),
                v = 0,
                _ = Bt(e, function(e) {
                    vi(e) ? s(e) : a(e)
                }),
                C = Bt(e, a);
            Es(document, "mousemove", _), Es(document, "mouseup", C)
        }

        function zt(e, t, o, n, i) {
            try {
                var r = t.clientX,
                    s = t.clientY
            } catch (t) {
                return !1
            }
            if (r >= Math.floor(e.display.gutters.getBoundingClientRect().right)) return !1;
            n && _s(t);
            var a = e.display,
                l = a.lineDiv.getBoundingClientRect();
            if (s > l.bottom || !Si(e, o)) return mi(t);
            s -= l.top - a.viewOffset;
            for (var c = 0; c < e.options.gutters.length; ++c) {
                var u = a.gutters.childNodes[c];
                if (u && u.getBoundingClientRect().right >= r) {
                    var g = Jn(e.doc, s),
                        p = e.options.gutters[c];
                    return i(e, o, e, g, p, t), mi(t)
                }
            }
        }

        function qt(e, t) {
            return zt(e, t, "gutterClick", !0, _i)
        }

        function $t(e) {
            var t = this;
            if (!Ci(t, e) && !Wt(t.display, e)) {
                _s(e), pr && (Hr = +new Date);
                var o = Gt(t, e, !0),
                    n = e.dataTransfer.files;
                if (o && !Q(t))
                    if (n && n.length && window.FileReader && window.File)
                        for (var i = n.length, r = Array(i), s = 0, a = function(e, n) {
                                var a = new FileReader;
                                a.onload = Bt(t, function() {
                                    if (r[n] = a.result, ++s == i) {
                                        o = de(t.doc, o);
                                        var e = {
                                            from: o,
                                            to: o,
                                            text: js(r.join("\n")),
                                            origin: "paste"
                                        };
                                        Co(t.doc, e), Te(t.doc, pe(o, jr(e)))
                                    }
                                }), a.readAsText(e)
                            }, l = 0; i > l; ++l) a(n[l], l);
                    else {
                        if (t.state.draggingText && t.doc.sel.contains(o) > -1) return t.state.draggingText(e), void setTimeout(function() {
                            t.display.input.focus()
                        }, 20);
                        try {
                            var r = e.dataTransfer.getData("Text");
                            if (r) {
                                if (t.state.draggingText && !(Sr ? e.altKey : e.ctrlKey)) var c = t.listSelections();
                                if (Ae(t.doc, pe(o, o)), c)
                                    for (var l = 0; l < c.length; ++l) Bo(t.doc, "", c[l].anchor, c[l].head, "drag");
                                t.replaceSelection(r, "around", "paste"), t.display.input.focus()
                            }
                        } catch (e) {}
                    }
            }
        }

        function Qt(e, t) {
            if (pr && (!e.state.draggingText || +new Date - Hr < 100)) return void Cs(t);
            if (!Ci(e, t) && !Wt(e.display, t) && (t.dataTransfer.setData("Text", e.getSelection()), t.dataTransfer.setDragImage && !vr)) {
                var o = Fi("img", null, null, "position: fixed; left: 0; top: 0;");
                o.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==", yr && (o.width = o.height = 1, e.display.wrapper.appendChild(o), o._top = o.offsetTop), t.dataTransfer.setDragImage(o, 0, 0), yr && o.parentNode.removeChild(o)
            }
        }

        function Jt(e, t) {
            Math.abs(e.doc.scrollTop - t) < 2 || (e.doc.scrollTop = t, cr || w(e, {
                top: t
            }), e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t), e.display.scrollbars.setScrollTop(t), cr && w(e), Me(e, 100))
        }

        function Zt(e, t, o) {
            (o ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) || (t = Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth), e.doc.scrollLeft = t, C(e), e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t), e.display.scrollbars.setScrollLeft(t))
        }

        function eo(e, t) {
            var o = Wr(t),
                n = o.x,
                i = o.y,
                r = e.display,
                s = r.scroller;
            if (n && s.scrollWidth > s.clientWidth || i && s.scrollHeight > s.clientHeight) {
                if (i && Sr && dr) e: for (var a = t.target, l = r.view; a != s; a = a.parentNode)
                    for (var c = 0; c < l.length; c++)
                        if (l[c].node == a) {
                            e.display.currentWheelTarget = a;
                            break e
                        }
                if (n && !cr && !yr && null != Vr) return i && Jt(e, Math.max(0, Math.min(s.scrollTop + i * Vr, s.scrollHeight - s.clientHeight))), Zt(e, Math.max(0, Math.min(s.scrollLeft + n * Vr, s.scrollWidth - s.clientWidth))), _s(t), void(r.wheelStartX = null);
                if (i && null != Vr) {
                    var u = i * Vr,
                        g = e.doc.scrollTop,
                        p = g + r.wrapper.clientHeight;
                    0 > u ? g = Math.max(0, g + u - 50) : p = Math.min(e.doc.height, p + u + 50), w(e, {
                        top: g,
                        bottom: p
                    })
                }
                20 > Ur && (null == r.wheelStartX ? (r.wheelStartX = s.scrollLeft, r.wheelStartY = s.scrollTop, r.wheelDX = n, r.wheelDY = i, setTimeout(function() {
                    if (null != r.wheelStartX) {
                        var e = s.scrollLeft - r.wheelStartX,
                            t = s.scrollTop - r.wheelStartY,
                            o = t && r.wheelDY && t / r.wheelDY || e && r.wheelDX && e / r.wheelDX;
                        r.wheelStartX = r.wheelStartY = null, o && (Vr = (Vr * Ur + o) / (Ur + 1), ++Ur)
                    }
                }, 200)) : (r.wheelDX += n, r.wheelDY += i))
            }
        }

        function to(e, t, o) {
            if ("string" == typeof t && (t = os[t], !t)) return !1;
            e.display.input.ensurePolled();
            var n = e.display.shift,
                i = !1;
            try {
                Q(e) && (e.state.suppressEdits = !0), o && (e.display.shift = !1), i = t(e) != Bs
            } finally {
                e.display.shift = n, e.state.suppressEdits = !1
            }
            return i
        }

        function oo(e, t, o) {
            for (var n = 0; n < e.state.keyMaps.length; n++) {
                var i = is(t, e.state.keyMaps[n], o, e);
                if (i) return i
            }
            return e.options.extraKeys && is(t, e.options.extraKeys, o, e) || is(t, e.options.keyMap, o, e)
        }

        function no(e, t, o, n) {
            var i = e.state.keySeq;
            if (i) {
                if (rs(t)) return "handled";
                Gr.set(50, function() {
                    e.state.keySeq == i && (e.state.keySeq = null, e.display.input.reset())
                }), t = i + " " + t
            }
            var r = oo(e, t, n);
            return "multi" == r && (e.state.keySeq = t), "handled" == r && _i(e, "keyHandled", e, t, o), "handled" != r && "multi" != r || (_s(o), De(e)), i && !r && /\'$/.test(t) ? (_s(o), !0) : !!r
        }

        function io(e, t) {
            var o = ss(t, !0);
            return o ? t.shiftKey && !e.state.keySeq ? no(e, "Shift-" + o, t, function(t) {
                return to(e, t, !0)
            }) || no(e, o, t, function(t) {
                return ("string" == typeof t ? /^go[A-Z]/.test(t) : t.motion) ? to(e, t) : void 0
            }) : no(e, o, t, function(t) {
                return to(e, t)
            }) : !1
        }

        function ro(e, t, o) {
            return no(e, "'" + o + "'", t, function(t) {
                return to(e, t, !0)
            })
        }

        function so(e) {
            var t = this;
            if (t.curOp.focus = Vi(), !Ci(t, e)) {
                pr && 11 > hr && 27 == e.keyCode && (e.returnValue = !1);
                var o = e.keyCode;
                t.display.shift = 16 == o || e.shiftKey;
                var n = io(t, e);
                yr && (Kr = n ? o : null, !n && 88 == o && !Xs && (Sr ? e.metaKey : e.ctrlKey) && t.replaceSelection("", null, "cut")), 18 != o || /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) || ao(t)
            }
        }

        function ao(e) {
            function t(e) {
                18 != e.keyCode && e.altKey || (Vs(o, "CodeMirror-crosshair"), Ss(document, "keyup", t), Ss(document, "mouseover", t))
            }
            var o = e.display.lineDiv;
            Ws(o, "CodeMirror-crosshair"), Es(document, "keyup", t), Es(document, "mouseover", t)
        }

        function lo(e) {
            16 == e.keyCode && (this.doc.sel.shift = !1), Ci(this, e)
        }

        function co(e) {
            var t = this;
            if (!(Wt(t.display, e) || Ci(t, e) || e.ctrlKey && !e.altKey || Sr && e.metaKey)) {
                var o = e.keyCode,
                    n = e.charCode;
                if (yr && o == Kr) return Kr = null, void _s(e);
                if (!yr || e.which && !(e.which < 10) || !io(t, e)) {
                    var i = String.fromCharCode(null == n ? o : n);
                    ro(t, e, i) || t.display.input.onKeyPress(e)
                }
            }
        }

        function uo(e) {
            e.state.delayingBlurEvent = !0, setTimeout(function() {
                e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1, po(e))
            }, 100)
        }

        function go(e) {
            e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1), "nocursor" != e.options.readOnly && (e.state.focused || (Ts(e, "focus", e), e.state.focused = !0, Ws(e.display.wrapper, "CodeMirror-focused"), e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(), dr && setTimeout(function() {
                e.display.input.reset(!0)
            }, 20)), e.display.input.receivedFocus()), De(e))
        }

        function po(e) {
            e.state.delayingBlurEvent || (e.state.focused && (Ts(e, "blur", e), e.state.focused = !1, Vs(e.display.wrapper, "CodeMirror-focused")), clearInterval(e.display.blinker), setTimeout(function() {
                e.state.focused || (e.display.shift = !1)
            }, 150))
        }

        function ho(e, t) {
            Wt(e.display, t) || fo(e, t) || e.display.input.onContextMenu(t)
        }

        function fo(e, t) {
            return Si(e, "gutterContextMenu") ? zt(e, t, "gutterContextMenu", !1, Ts) : !1
        }

        function mo(e, t) {
            if (Nr(e, t.from) < 0) return e;
            if (Nr(e, t.to) <= 0) return jr(t);
            var o = e.line + t.text.length - (t.to.line - t.from.line) - 1,
                n = e.ch;
            return e.line == t.to.line && (n += jr(t).ch - t.to.ch),
                Ir(o, n)
        }

        function yo(e, t) {
            for (var o = [], n = 0; n < e.sel.ranges.length; n++) {
                var i = e.sel.ranges[n];
                o.push(new ue(mo(i.anchor, t), mo(i.head, t)))
            }
            return ge(o, e.sel.primIndex)
        }

        function vo(e, t, o) {
            return e.line == t.line ? Ir(o.line, e.ch - t.ch + o.ch) : Ir(o.line + (e.line - t.line), e.ch)
        }

        function _o(e, t, o) {
            for (var n = [], i = Ir(e.first, 0), r = i, s = 0; s < t.length; s++) {
                var a = t[s],
                    l = vo(a.from, i, r),
                    c = vo(jr(a), i, r);
                if (i = a.to, r = c, "around" == o) {
                    var u = e.sel.ranges[s],
                        g = Nr(u.head, u.anchor) < 0;
                    n[s] = new ue(g ? c : l, g ? l : c)
                } else n[s] = new ue(l, l)
            }
            return new ce(n, e.sel.primIndex)
        }

        function bo(e, t, o) {
            var n = {
                canceled: !1,
                from: t.from,
                to: t.to,
                text: t.text,
                origin: t.origin,
                cancel: function() {
                    this.canceled = !0
                }
            };
            return o && (n.update = function(t, o, n, i) {
                t && (this.from = de(e, t)), o && (this.to = de(e, o)), n && (this.text = n), void 0 !== i && (this.origin = i)
            }), Ts(e, "beforeChange", e, n), e.cm && Ts(e.cm, "beforeChange", e.cm, n), n.canceled ? null : {
                from: n.from,
                to: n.to,
                text: n.text,
                origin: n.origin
            }
        }

        function Co(e, t, o) {
            if (e.cm) {
                if (!e.cm.curOp) return Bt(e.cm, Co)(e, t, o);
                if (e.cm.state.suppressEdits) return
            }
            if (!(Si(e, "beforeChange") || e.cm && Si(e.cm, "beforeChange")) || (t = bo(e, t, !0))) {
                var n = xr && !o && nn(e, t.from, t.to);
                if (n)
                    for (var i = n.length - 1; i >= 0; --i) Eo(e, {
                        from: n[i].from,
                        to: n[i].to,
                        text: i ? [""] : t.text
                    });
                else Eo(e, t)
            }
        }

        function Eo(e, t) {
            if (1 != t.text.length || "" != t.text[0] || 0 != Nr(t.from, t.to)) {
                var o = yo(e, t);
                ri(e, t, o, e.cm ? e.cm.curOp.id : NaN), ko(e, t, o, en(e, t));
                var n = [];
                jn(e, function(e, o) {
                    o || -1 != wi(n, e.history) || (fi(e.history, t), n.push(e.history)), ko(e, t, null, en(e, t))
                })
            }
        }

        function So(e, t, o) {
            if (!e.cm || !e.cm.state.suppressEdits) {
                for (var n, i = e.history, r = e.sel, s = "undo" == t ? i.done : i.undone, a = "undo" == t ? i.undone : i.done, l = 0; l < s.length && (n = s[l], o ? !n.ranges || n.equals(e.sel) : n.ranges); l++);
                if (l != s.length) {
                    for (i.lastOrigin = i.lastSelOrigin = null; n = s.pop(), n.ranges;) {
                        if (li(n, a), o && !n.equals(e.sel)) return void ke(e, n, {
                            clearRedo: !1
                        });
                        r = n
                    }
                    var c = [];
                    li(r, a), a.push({
                        changes: c,
                        generation: i.generation
                    }), i.generation = n.generation || ++i.maxGeneration;
                    for (var u = Si(e, "beforeChange") || e.cm && Si(e.cm, "beforeChange"), l = n.changes.length - 1; l >= 0; --l) {
                        var g = n.changes[l];
                        if (g.origin = t, u && !bo(e, g, !1)) return void(s.length = 0);
                        c.push(oi(e, g));
                        var p = l ? yo(e, g) : xi(s);
                        ko(e, g, p, on(e, g)), !l && e.cm && e.cm.scrollIntoView({
                            from: g.from,
                            to: jr(g)
                        });
                        var h = [];
                        jn(e, function(e, t) {
                            t || -1 != wi(h, e.history) || (fi(e.history, g), h.push(e.history)), ko(e, g, null, on(e, g))
                        })
                    }
                }
            }
        }

        function To(e, t) {
            if (0 != t && (e.first += t, e.sel = new ce(Ii(e.sel.ranges, function(e) {
                    return new ue(Ir(e.anchor.line + t, e.anchor.ch), Ir(e.head.line + t, e.head.ch))
                }), e.sel.primIndex), e.cm)) {
                Rt(e.cm, e.first, e.first - t, t);
                for (var o = e.cm.display, n = o.viewFrom; n < o.viewTo; n++) Lt(e.cm, n, "gutter")
            }
        }

        function ko(e, t, o, n) {
            if (e.cm && !e.cm.curOp) return Bt(e.cm, ko)(e, t, o, n);
            if (t.to.line < e.first) return void To(e, t.text.length - 1 - (t.to.line - t.from.line));
            if (!(t.from.line > e.lastLine())) {
                if (t.from.line < e.first) {
                    var i = t.text.length - 1 - (e.first - t.from.line);
                    To(e, i), t = {
                        from: Ir(e.first, 0),
                        to: Ir(t.to.line + i, t.to.ch),
                        text: [xi(t.text)],
                        origin: t.origin
                    }
                }
                var r = e.lastLine();
                t.to.line > r && (t = {
                    from: t.from,
                    to: Ir(r, Xn(e, r).text.length),
                    text: [t.text[0]],
                    origin: t.origin
                }), t.removed = zn(e, t.from, t.to), o || (o = yo(e, t)), e.cm ? Ao(e.cm, t, n) : Wn(e, t, n), Ae(e, o, xs)
            }
        }

        function Ao(e, t, o) {
            var n = e.doc,
                i = e.display,
                s = t.from,
                a = t.to,
                l = !1,
                c = s.line;
            e.options.lineWrapping || (c = Qn(dn(Xn(n, s.line))), n.iter(c, a.line + 1, function(e) {
                return e == i.maxLine ? (l = !0, !0) : void 0
            })), n.sel.contains(t.from, t.to) > -1 && Ei(e), Wn(n, t, o, r(e)), e.options.lineWrapping || (n.iter(c, s.line + t.text.length, function(e) {
                var t = g(e);
                t > i.maxLineLength && (i.maxLine = e, i.maxLineLength = t, i.maxLineChanged = !0, l = !1)
            }), l && (e.curOp.updateMaxLine = !0)), n.frontier = Math.min(n.frontier, s.line), Me(e, 400);
            var u = t.text.length - (a.line - s.line) - 1;
            t.full ? Rt(e) : s.line != a.line || 1 != t.text.length || Vn(e.doc, t) ? Rt(e, s.line, a.line + 1, u) : Lt(e, s.line, "text");
            var p = Si(e, "changes"),
                h = Si(e, "change");
            if (h || p) {
                var d = {
                    from: s,
                    to: a,
                    text: t.text,
                    removed: t.removed,
                    origin: t.origin
                };
                h && _i(e, "change", e, d), p && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(d)
            }
            e.display.selForContextMenu = null
        }

        function Bo(e, t, o, n, i) {
            if (n || (n = o), Nr(n, o) < 0) {
                var r = n;
                n = o, o = r
            }
            "string" == typeof t && (t = js(t)), Co(e, {
                from: o,
                to: n,
                text: t,
                origin: i
            })
        }

        function xo(e, t) {
            if (!Ci(e, "scrollCursorIntoView")) {
                var o = e.display,
                    n = o.sizer.getBoundingClientRect(),
                    i = null;
                if (t.top + n.top < 0 ? i = !0 : t.bottom + n.top > (window.innerHeight || document.documentElement.clientHeight) && (i = !1), null != i && !br) {
                    var r = Fi("div", "\u200b", null, "position: absolute; top: " + (t.top - o.viewOffset - Ue(e.display)) + "px; height: " + (t.bottom - t.top + Ge(e) + o.barHeight) + "px; left: " + t.left + "px; width: 2px;");
                    e.display.lineSpace.appendChild(r), r.scrollIntoView(i), e.display.lineSpace.removeChild(r)
                }
            }
        }

        function wo(e, t, o, n) {
            null == n && (n = 0);
            for (var i = 0; 5 > i; i++) {
                var r = !1,
                    s = ut(e, t),
                    a = o && o != t ? ut(e, o) : s,
                    l = No(e, Math.min(s.left, a.left), Math.min(s.top, a.top) - n, Math.max(s.left, a.left), Math.max(s.bottom, a.bottom) + n),
                    c = e.doc.scrollTop,
                    u = e.doc.scrollLeft;
                if (null != l.scrollTop && (Jt(e, l.scrollTop), Math.abs(e.doc.scrollTop - c) > 1 && (r = !0)), null != l.scrollLeft && (Zt(e, l.scrollLeft), Math.abs(e.doc.scrollLeft - u) > 1 && (r = !0)), !r) break
            }
            return s
        }

        function Io(e, t, o, n, i) {
            var r = No(e, t, o, n, i);
            null != r.scrollTop && Jt(e, r.scrollTop), null != r.scrollLeft && Zt(e, r.scrollLeft)
        }

        function No(e, t, o, n, i) {
            var r = e.display,
                s = ft(e.display);
            0 > o && (o = 0);
            var a = e.curOp && null != e.curOp.scrollTop ? e.curOp.scrollTop : r.scroller.scrollTop,
                l = je(e),
                c = {};
            i - o > l && (i = o + l);
            var u = e.doc.height + Ve(r),
                g = s > o,
                p = i > u - s;
            if (a > o) c.scrollTop = g ? 0 : o;
            else if (i > a + l) {
                var h = Math.min(o, (p ? u : i) - l);
                h != a && (c.scrollTop = h)
            }
            var d = e.curOp && null != e.curOp.scrollLeft ? e.curOp.scrollLeft : r.scroller.scrollLeft,
                f = Ke(e) - (e.options.fixedGutter ? r.gutters.offsetWidth : 0),
                m = n - t > f;
            return m && (n = t + f), 10 > t ? c.scrollLeft = 0 : d > t ? c.scrollLeft = Math.max(0, t - (m ? 0 : 10)) : n > f + d - 3 && (c.scrollLeft = n + (m ? 0 : 10) - f), c
        }

        function Ro(e, t, o) {
            null == t && null == o || Oo(e), null != t && (e.curOp.scrollLeft = (null == e.curOp.scrollLeft ? e.doc.scrollLeft : e.curOp.scrollLeft) + t), null != o && (e.curOp.scrollTop = (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + o)
        }

        function Lo(e) {
            Oo(e);
            var t = e.getCursor(),
                o = t,
                n = t;
            e.options.lineWrapping || (o = t.ch ? Ir(t.line, t.ch - 1) : t, n = Ir(t.line, t.ch + 1)), e.curOp.scrollToPos = {
                from: o,
                to: n,
                margin: e.options.cursorScrollMargin,
                isCursor: !0
            }
        }

        function Oo(e) {
            var t = e.curOp.scrollToPos;
            if (t) {
                e.curOp.scrollToPos = null;
                var o = gt(e, t.from),
                    n = gt(e, t.to),
                    i = No(e, Math.min(o.left, n.left), Math.min(o.top, n.top) - t.margin, Math.max(o.right, n.right), Math.max(o.bottom, n.bottom) + t.margin);
                e.scrollTo(i.scrollLeft, i.scrollTop)
            }
        }

        function Do(e, t, o, n) {
            var i, r = e.doc;
            null == o && (o = "add"), "smart" == o && (r.mode.indent ? i = He(e, t) : o = "prev");
            var s = e.options.tabSize,
                a = Xn(r, t),
                l = Ns(a.text, null, s);
            a.stateAfter && (a.stateAfter = null);
            var c, u = a.text.match(/^\s*/)[0];
            if (n || /\S/.test(a.text)) {
                if ("smart" == o && (c = r.mode.indent(i, a.text.slice(u.length), a.text), c == Bs || c > 150)) {
                    if (!n) return;
                    o = "prev"
                }
            } else c = 0, o = "not";
            "prev" == o ? c = t > r.first ? Ns(Xn(r, t - 1).text, null, s) : 0 : "add" == o ? c = l + e.options.indentUnit : "subtract" == o ? c = l - e.options.indentUnit : "number" == typeof o && (c = l + o), c = Math.max(0, c);
            var g = "",
                p = 0;
            if (e.options.indentWithTabs)
                for (var h = Math.floor(c / s); h; --h) p += s, g += "	";
            if (c > p && (g += Bi(c - p)), g != u) return Bo(r, g, Ir(t, 0), Ir(t, u.length), "+input"), a.stateAfter = null, !0;
            for (var h = 0; h < r.sel.ranges.length; h++) {
                var d = r.sel.ranges[h];
                if (d.head.line == t && d.head.ch < u.length) {
                    var p = Ir(t, u.length);
                    Ce(r, h, new ue(p, p));
                    break
                }
            }
        }

        function Mo(e, t, o, n) {
            var i = t,
                r = t;
            return "number" == typeof t ? r = Xn(e, he(e, t)) : i = Qn(t), null == i ? null : (n(r, i) && e.cm && Lt(e.cm, i, o), r)
        }

        function Po(e, t) {
            for (var o = e.doc.sel.ranges, n = [], i = 0; i < o.length; i++) {
                for (var r = t(o[i]); n.length && Nr(r.from, xi(n).to) <= 0;) {
                    var s = n.pop();
                    if (Nr(s.from, r.from) < 0) {
                        r.from = s.from;
                        break
                    }
                }
                n.push(r)
            }
            At(e, function() {
                for (var t = n.length - 1; t >= 0; t--) Bo(e.doc, "", n[t].from, n[t].to, "+delete");
                Lo(e)
            })
        }

        function Fo(e, t, o, n, i) {
            function r() {
                var t = a + o;
                return t < e.first || t >= e.first + e.size ? g = !1 : (a = t, u = Xn(e, t))
            }

            function s(e) {
                var t = (i ? ar : lr)(u, l, o, !0);
                if (null == t) {
                    if (e || !r()) return g = !1;
                    l = i ? (0 > o ? er : Zi)(u) : 0 > o ? u.text.length : 0
                } else l = t;
                return !0
            }
            var a = t.line,
                l = t.ch,
                c = o,
                u = Xn(e, a),
                g = !0;
            if ("char" == n) s();
            else if ("column" == n) s(!0);
            else if ("word" == n || "group" == n)
                for (var p = null, h = "group" == n, d = e.cm && e.cm.getHelper(t, "wordChars"), f = !0; !(0 > o) || s(!f); f = !1) {
                    var m = u.text.charAt(l) || "\n",
                        y = Di(m, d) ? "w" : h && "\n" == m ? "n" : !h || /\s/.test(m) ? null : "p";
                    if (!h || f || y || (y = "s"), p && p != y) {
                        0 > o && (o = 1, s());
                        break
                    }
                    if (y && (p = y), o > 0 && !s(!f)) break
                }
            var v = Ie(e, Ir(a, l), c, !0);
            return g || (v.hitSide = !0), v
        }

        function Ho(e, t, o, n) {
            var i, r = e.doc,
                s = t.left;
            if ("page" == n) {
                var a = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
                i = t.top + o * (a - (0 > o ? 1.5 : .5) * ft(e.display))
            } else "line" == n && (i = o > 0 ? t.bottom + 3 : t.top - 3);
            for (;;) {
                var l = ht(e, s, i);
                if (!l.outside) break;
                if (0 > o ? 0 >= i : i >= r.height) {
                    l.hitSide = !0;
                    break
                }
                i += 5 * o
            }
            return l
        }

        function Uo(t, o, n, i) {
            e.defaults[t] = o, n && (Xr[t] = i ? function(e, t, o) {
                o != zr && n(e, t, o)
            } : n)
        }

        function Vo(e) {
            for (var t, o, n, i, r = e.split(/-(?!$)/), e = r[r.length - 1], s = 0; s < r.length - 1; s++) {
                var a = r[s];
                if (/^(cmd|meta|m)$/i.test(a)) i = !0;
                else if (/^a(lt)?$/i.test(a)) t = !0;
                else if (/^(c|ctrl|control)$/i.test(a)) o = !0;
                else {
                    if (!/^s(hift)$/i.test(a)) throw new Error("Unrecognized modifier name: " + a);
                    n = !0
                }
            }
            return t && (e = "Alt-" + e), o && (e = "Ctrl-" + e), i && (e = "Cmd-" + e), n && (e = "Shift-" + e), e
        }

        function Wo(e) {
            return "string" == typeof e ? ns[e] : e
        }

        function Go(e, t, o, n, i) {
            if (n && n.shared) return Ko(e, t, o, n, i);
            if (e.cm && !e.cm.curOp) return Bt(e.cm, Go)(e, t, o, n, i);
            var r = new cs(e, i),
                s = Nr(t, o);
            if (n && Li(n, r, !1), s > 0 || 0 == s && r.clearWhenEmpty !== !1) return r;
            if (r.replacedWith && (r.collapsed = !0, r.widgetNode = Fi("span", [r.replacedWith], "CodeMirror-widget"), n.handleMouseEvents || r.widgetNode.setAttribute("cm-ignore-events", "true"), n.insertLeft && (r.widgetNode.insertLeft = !0)), r.collapsed) {
                if (hn(e, t.line, t, o, r) || t.line != o.line && hn(e, o.line, t, o, r)) throw new Error("Inserting collapsed marker partially overlapping an existing one");
                wr = !0
            }
            r.addToHistory && ri(e, {
                from: t,
                to: o,
                origin: "markText"
            }, e.sel, NaN);
            var a, l = t.line,
                c = e.cm;
            if (e.iter(l, o.line + 1, function(e) {
                    c && r.collapsed && !c.options.lineWrapping && dn(e) == c.display.maxLine && (a = !0), r.collapsed && l != t.line && $n(e, 0), Qo(e, new zo(r, l == t.line ? t.ch : null, l == o.line ? o.ch : null)), ++l
                }), r.collapsed && e.iter(t.line, o.line + 1, function(t) {
                    vn(e, t) && $n(t, 0)
                }), r.clearOnEnter && Es(r, "beforeCursorEnter", function() {
                    r.clear()
                }), r.readOnly && (xr = !0, (e.history.done.length || e.history.undone.length) && e.clearHistory()), r.collapsed && (r.id = ++ls, r.atomic = !0), c) {
                if (a && (c.curOp.updateMaxLine = !0), r.collapsed) Rt(c, t.line, o.line + 1);
                else if (r.className || r.title || r.startStyle || r.endStyle || r.css)
                    for (var u = t.line; u <= o.line; u++) Lt(c, u, "text");
                r.atomic && xe(c.doc), _i(c, "markerAdded", c, r)
            }
            return r
        }

        function Ko(e, t, o, n, i) {
            n = Li(n), n.shared = !1;
            var r = [Go(e, t, o, n, i)],
                s = r[0],
                a = n.widgetNode;
            return jn(e, function(e) {
                a && (n.widgetNode = a.cloneNode(!0)), r.push(Go(e, de(e, t), de(e, o), n, i));
                for (var l = 0; l < e.linked.length; ++l)
                    if (e.linked[l].isParent) return;
                s = xi(r)
            }), new us(r, s)
        }

        function jo(e) {
            return e.findMarks(Ir(e.first, 0), e.clipPos(Ir(e.lastLine())), function(e) {
                return e.parent
            })
        }

        function Yo(e, t) {
            for (var o = 0; o < t.length; o++) {
                var n = t[o],
                    i = n.find(),
                    r = e.clipPos(i.from),
                    s = e.clipPos(i.to);
                if (Nr(r, s)) {
                    var a = Go(e, r, s, n.primary, n.primary.type);
                    n.markers.push(a), a.parent = n
                }
            }
        }

        function Xo(e) {
            for (var t = 0; t < e.length; t++) {
                var o = e[t],
                    n = [o.primary.doc];
                jn(o.primary.doc, function(e) {
                    n.push(e)
                });
                for (var i = 0; i < o.markers.length; i++) {
                    var r = o.markers[i]; - 1 == wi(n, r.doc) && (r.parent = null, o.markers.splice(i--, 1))
                }
            }
        }

        function zo(e, t, o) {
            this.marker = e, this.from = t, this.to = o
        }

        function qo(e, t) {
            if (e)
                for (var o = 0; o < e.length; ++o) {
                    var n = e[o];
                    if (n.marker == t) return n
                }
        }

        function $o(e, t) {
            for (var o, n = 0; n < e.length; ++n) e[n] != t && (o || (o = [])).push(e[n]);
            return o
        }

        function Qo(e, t) {
            e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t], t.marker.attachLine(e)
        }

        function Jo(e, t, o) {
            if (e)
                for (var n, i = 0; i < e.length; ++i) {
                    var r = e[i],
                        s = r.marker,
                        a = null == r.from || (s.inclusiveLeft ? r.from <= t : r.from < t);
                    if (a || r.from == t && "bookmark" == s.type && (!o || !r.marker.insertLeft)) {
                        var l = null == r.to || (s.inclusiveRight ? r.to >= t : r.to > t);
                        (n || (n = [])).push(new zo(s, r.from, l ? null : r.to))
                    }
                }
            return n
        }

        function Zo(e, t, o) {
            if (e)
                for (var n, i = 0; i < e.length; ++i) {
                    var r = e[i],
                        s = r.marker,
                        a = null == r.to || (s.inclusiveRight ? r.to >= t : r.to > t);
                    if (a || r.from == t && "bookmark" == s.type && (!o || r.marker.insertLeft)) {
                        var l = null == r.from || (s.inclusiveLeft ? r.from <= t : r.from < t);
                        (n || (n = [])).push(new zo(s, l ? null : r.from - t, null == r.to ? null : r.to - t))
                    }
                }
            return n
        }

        function en(e, t) {
            if (t.full) return null;
            var o = me(e, t.from.line) && Xn(e, t.from.line).markedSpans,
                n = me(e, t.to.line) && Xn(e, t.to.line).markedSpans;
            if (!o && !n) return null;
            var i = t.from.ch,
                r = t.to.ch,
                s = 0 == Nr(t.from, t.to),
                a = Jo(o, i, s),
                l = Zo(n, r, s),
                c = 1 == t.text.length,
                u = xi(t.text).length + (c ? i : 0);
            if (a)
                for (var g = 0; g < a.length; ++g) {
                    var p = a[g];
                    if (null == p.to) {
                        var h = qo(l, p.marker);
                        h ? c && (p.to = null == h.to ? null : h.to + u) : p.to = i
                    }
                }
            if (l)
                for (var g = 0; g < l.length; ++g) {
                    var p = l[g];
                    if (null != p.to && (p.to += u), null == p.from) {
                        var h = qo(a, p.marker);
                        h || (p.from = u, c && (a || (a = [])).push(p))
                    } else p.from += u, c && (a || (a = [])).push(p)
                }
            a && (a = tn(a)), l && l != a && (l = tn(l));
            var d = [a];
            if (!c) {
                var f, m = t.text.length - 2;
                if (m > 0 && a)
                    for (var g = 0; g < a.length; ++g) null == a[g].to && (f || (f = [])).push(new zo(a[g].marker, null, null));
                for (var g = 0; m > g; ++g) d.push(f);
                d.push(l)
            }
            return d
        }

        function tn(e) {
            for (var t = 0; t < e.length; ++t) {
                var o = e[t];
                null != o.from && o.from == o.to && o.marker.clearWhenEmpty !== !1 && e.splice(t--, 1)
            }
            return e.length ? e : null
        }

        function on(e, t) {
            var o = gi(e, t),
                n = en(e, t);
            if (!o) return n;
            if (!n) return o;
            for (var i = 0; i < o.length; ++i) {
                var r = o[i],
                    s = n[i];
                if (r && s) e: for (var a = 0; a < s.length; ++a) {
                    for (var l = s[a], c = 0; c < r.length; ++c)
                        if (r[c].marker == l.marker) continue e;
                    r.push(l)
                } else s && (o[i] = s)
            }
            return o
        }

        function nn(e, t, o) {
            var n = null;
            if (e.iter(t.line, o.line + 1, function(e) {
                    if (e.markedSpans)
                        for (var t = 0; t < e.markedSpans.length; ++t) {
                            var o = e.markedSpans[t].marker;
                            !o.readOnly || n && -1 != wi(n, o) || (n || (n = [])).push(o)
                        }
                }), !n) return null;
            for (var i = [{
                    from: t,
                    to: o
                }], r = 0; r < n.length; ++r)
                for (var s = n[r], a = s.find(0), l = 0; l < i.length; ++l) {
                    var c = i[l];
                    if (!(Nr(c.to, a.from) < 0 || Nr(c.from, a.to) > 0)) {
                        var u = [l, 1],
                            g = Nr(c.from, a.from),
                            p = Nr(c.to, a.to);
                        (0 > g || !s.inclusiveLeft && !g) && u.push({
                            from: c.from,
                            to: a.from
                        }), (p > 0 || !s.inclusiveRight && !p) && u.push({
                            from: a.to,
                            to: c.to
                        }), i.splice.apply(i, u), l += u.length - 1
                    }
                }
            return i
        }

        function rn(e) {
            var t = e.markedSpans;
            if (t) {
                for (var o = 0; o < t.length; ++o) t[o].marker.detachLine(e);
                e.markedSpans = null
            }
        }

        function sn(e, t) {
            if (t) {
                for (var o = 0; o < t.length; ++o) t[o].marker.attachLine(e);
                e.markedSpans = t
            }
        }

        function an(e) {
            return e.inclusiveLeft ? -1 : 0
        }

        function ln(e) {
            return e.inclusiveRight ? 1 : 0
        }

        function cn(e, t) {
            var o = e.lines.length - t.lines.length;
            if (0 != o) return o;
            var n = e.find(),
                i = t.find(),
                r = Nr(n.from, i.from) || an(e) - an(t);
            if (r) return -r;
            var s = Nr(n.to, i.to) || ln(e) - ln(t);
            return s ? s : t.id - e.id
        }

        function un(e, t) {
            var o, n = wr && e.markedSpans;
            if (n)
                for (var i, r = 0; r < n.length; ++r) i = n[r], i.marker.collapsed && null == (t ? i.from : i.to) && (!o || cn(o, i.marker) < 0) && (o = i.marker);
            return o
        }

        function gn(e) {
            return un(e, !0)
        }

        function pn(e) {
            return un(e, !1)
        }

        function hn(e, t, o, n, i) {
            var r = Xn(e, t),
                s = wr && r.markedSpans;
            if (s)
                for (var a = 0; a < s.length; ++a) {
                    var l = s[a];
                    if (l.marker.collapsed) {
                        var c = l.marker.find(0),
                            u = Nr(c.from, o) || an(l.marker) - an(i),
                            g = Nr(c.to, n) || ln(l.marker) - ln(i);
                        if (!(u >= 0 && 0 >= g || 0 >= u && g >= 0) && (0 >= u && (Nr(c.to, o) > 0 || l.marker.inclusiveRight && i.inclusiveLeft) || u >= 0 && (Nr(c.from, n) < 0 || l.marker.inclusiveLeft && i.inclusiveRight))) return !0
                    }
                }
        }

        function dn(e) {
            for (var t; t = gn(e);) e = t.find(-1, !0).line;
            return e
        }

        function fn(e) {
            for (var t, o; t = pn(e);) e = t.find(1, !0).line, (o || (o = [])).push(e);
            return o
        }

        function mn(e, t) {
            var o = Xn(e, t),
                n = dn(o);
            return o == n ? t : Qn(n)
        }

        function yn(e, t) {
            if (t > e.lastLine()) return t;
            var o, n = Xn(e, t);
            if (!vn(e, n)) return t;
            for (; o = pn(n);) n = o.find(1, !0).line;
            return Qn(n) + 1
        }

        function vn(e, t) {
            var o = wr && t.markedSpans;
            if (o)
                for (var n, i = 0; i < o.length; ++i)
                    if (n = o[i], n.marker.collapsed) {
                        if (null == n.from) return !0;
                        if (!n.marker.widgetNode && 0 == n.from && n.marker.inclusiveLeft && _n(e, t, n)) return !0
                    }
        }

        function _n(e, t, o) {
            if (null == o.to) {
                var n = o.marker.find(1, !0);
                return _n(e, n.line, qo(n.line.markedSpans, o.marker))
            }
            if (o.marker.inclusiveRight && o.to == t.text.length) return !0;
            for (var i, r = 0; r < t.markedSpans.length; ++r)
                if (i = t.markedSpans[r], i.marker.collapsed && !i.marker.widgetNode && i.from == o.to && (null == i.to || i.to != o.from) && (i.marker.inclusiveLeft || o.marker.inclusiveRight) && _n(e, t, i)) return !0
        }

        function bn(e, t, o) {
            Zn(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && Ro(e, null, o)
        }

        function Cn(e) {
            if (null != e.height) return e.height;
            var t = e.doc.cm;
            if (!t) return 0;
            if (!Fs(document.body, e.node)) {
                var o = "position: relative;";
                e.coverGutter && (o += "margin-left: -" + t.display.gutters.offsetWidth + "px;"), e.noHScroll && (o += "width: " + t.display.wrapper.clientWidth + "px;"), Ui(t.display.measure, Fi("div", [e.node], null, o))
            }
            return e.height = e.node.offsetHeight
        }

        function En(e, t, o, n) {
            var i = new gs(e, o, n),
                r = e.cm;
            return r && i.noHScroll && (r.display.alignWidgets = !0), Mo(e, t, "widget", function(t) {
                var o = t.widgets || (t.widgets = []);
                if (null == i.insertAt ? o.push(i) : o.splice(Math.min(o.length - 1, Math.max(0, i.insertAt)), 0, i), i.line = t, r && !vn(e, t)) {
                    var n = Zn(t) < e.scrollTop;
                    $n(t, t.height + Cn(i)), n && Ro(r, null, i.height), r.curOp.forceUpdate = !0
                }
                return !0
            }), i
        }

        function Sn(e, t, o, n) {
            e.text = t, e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null), null != e.order && (e.order = null), rn(e), sn(e, o);
            var i = n ? n(e) : 1;
            i != e.height && $n(e, i)
        }

        function Tn(e) {
            e.parent = null, rn(e)
        }

        function kn(e, t) {
            if (e)
                for (;;) {
                    var o = e.match(/(?:^|\s+)line-(background-)?(\S+)/);
                    if (!o) break;
                    e = e.slice(0, o.index) + e.slice(o.index + o[0].length);
                    var n = o[1] ? "bgClass" : "textClass";
                    null == t[n] ? t[n] = o[2] : new RegExp("(?:^|s)" + o[2] + "(?:$|s)").test(t[n]) || (t[n] += " " + o[2])
                }
            return e
        }

        function An(t, o) {
            if (t.blankLine) return t.blankLine(o);
            if (t.innerMode) {
                var n = e.innerMode(t, o);
                return n.mode.blankLine ? n.mode.blankLine(n.state) : void 0
            }
        }

        function Bn(t, o, n, i) {
            for (var r = 0; 10 > r; r++) {
                i && (i[0] = e.innerMode(t, n).mode);
                var s = t.token(o, n);
                if (o.pos > o.start) return s
            }
            throw new Error("Mode " + t.name + " failed to advance stream.")
        }

        function xn(e, t, o, n) {
            function i(e) {
                return {
                    start: g.start,
                    end: g.pos,
                    string: g.current(),
                    type: r || null,
                    state: e ? es(s.mode, u) : u
                }
            }
            var r, s = e.doc,
                a = s.mode;
            t = de(s, t);
            var l, c = Xn(s, t.line),
                u = He(e, t.line, o),
                g = new as(c.text, e.options.tabSize);
            for (n && (l = []);
                (n || g.pos < t.ch) && !g.eol();) g.start = g.pos, r = Bn(a, g, u), n && l.push(i(!0));
            return n ? l : i()
        }

        function wn(e, t, o, n, i, r, s) {
            var a = o.flattenSpans;
            null == a && (a = e.options.flattenSpans);
            var l, c = 0,
                u = null,
                g = new as(t, e.options.tabSize),
                p = e.options.addModeClass && [null];
            for ("" == t && kn(An(o, n), r); !g.eol();) {
                if (g.pos > e.options.maxHighlightLength ? (a = !1, s && Rn(e, t, n, g.pos), g.pos = t.length, l = null) : l = kn(Bn(o, g, n, p), r), p) {
                    var h = p[0].name;
                    h && (l = "m-" + (l ? h + " " + l : h))
                }
                if (!a || u != l) {
                    for (; c < g.start;) c = Math.min(g.start, c + 5e4), i(c, u);
                    u = l
                }
                g.start = g.pos
            }
            for (; c < g.pos;) {
                var d = Math.min(g.pos, c + 5e4);
                i(d, u), c = d
            }
        }

        function In(e, t, o, n) {
            var i = [e.state.modeGen],
                r = {};
            wn(e, t.text, e.doc.mode, o, function(e, t) {
                i.push(e, t)
            }, r, n);
            for (var s = 0; s < e.state.overlays.length; ++s) {
                var a = e.state.overlays[s],
                    l = 1,
                    c = 0;
                wn(e, t.text, a.mode, !0, function(e, t) {
                    for (var o = l; e > c;) {
                        var n = i[l];
                        n > e && i.splice(l, 1, e, i[l + 1], n), l += 2, c = Math.min(e, n)
                    }
                    if (t)
                        if (a.opaque) i.splice(o, l - o, e, "cm-overlay " + t), l = o + 2;
                        else
                            for (; l > o; o += 2) {
                                var r = i[o + 1];
                                i[o + 1] = (r ? r + " " : "") + "cm-overlay " + t
                            }
                }, r)
            }
            return {
                styles: i,
                classes: r.bgClass || r.textClass ? r : null
            }
        }

        function Nn(e, t, o) {
            if (!t.styles || t.styles[0] != e.state.modeGen) {
                var n = In(e, t, t.stateAfter = He(e, Qn(t)));
                t.styles = n.styles, n.classes ? t.styleClasses = n.classes : t.styleClasses && (t.styleClasses = null), o === e.doc.frontier && e.doc.frontier++
            }
            return t.styles
        }

        function Rn(e, t, o, n) {
            var i = e.doc.mode,
                r = new as(t, e.options.tabSize);
            for (r.start = r.pos = n || 0, "" == t && An(i, o); !r.eol() && r.pos <= e.options.maxHighlightLength;) Bn(i, r, o), r.start = r.pos
        }

        function Ln(e, t) {
            if (!e || /^\s*$/.test(e)) return null;
            var o = t.addModeClass ? ds : hs;
            return o[e] || (o[e] = e.replace(/\S+/g, "cm-$&"))
        }

        function On(e, t) {
            var o = Fi("span", null, null, dr ? "padding-right: .1px" : null),
                n = {
                    pre: Fi("pre", [o]),
                    content: o,
                    col: 0,
                    pos: 0,
                    cm: e,
                    splitSpaces: (pr || dr) && e.getOption("lineWrapping")
                };
            t.measure = {};
            for (var i = 0; i <= (t.rest ? t.rest.length : 0); i++) {
                var r, s = i ? t.rest[i - 1] : t.line;
                n.pos = 0, n.addToken = Mn, zi(e.display.measure) && (r = ei(s)) && (n.addToken = Fn(n.addToken, r)), n.map = [];
                var a = t != e.display.externalMeasured && Qn(s);
                Un(s, n, Nn(e, s, a)), s.styleClasses && (s.styleClasses.bgClass && (n.bgClass = Gi(s.styleClasses.bgClass, n.bgClass || "")), s.styleClasses.textClass && (n.textClass = Gi(s.styleClasses.textClass, n.textClass || ""))), 0 == n.map.length && n.map.push(0, 0, n.content.appendChild(Xi(e.display.measure))), 0 == i ? (t.measure.map = n.map, t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(n.map), (t.measure.caches || (t.measure.caches = [])).push({}))
            }
            return dr && /\bcm-tab\b/.test(n.content.lastChild.className) && (n.content.className = "cm-tab-wrap-hack"), Ts(e, "renderLine", e, t.line, n.pre), n.pre.className && (n.textClass = Gi(n.pre.className, n.textClass || "")), n
        }

        function Dn(e) {
            var t = Fi("span", "\u2022", "cm-invalidchar");
            return t.title = "\\u" + e.charCodeAt(0).toString(16), t.setAttribute("aria-label", t.title), t
        }

        function Mn(e, t, o, n, i, r, s) {
            if (t) {
                var a = e.splitSpaces ? t.replace(/ {3,}/g, Pn) : t,
                    l = e.cm.state.specialChars,
                    c = !1;
                if (l.test(t))
                    for (var u = document.createDocumentFragment(), g = 0;;) {
                        l.lastIndex = g;
                        var p = l.exec(t),
                            h = p ? p.index - g : t.length - g;
                        if (h) {
                            var d = document.createTextNode(a.slice(g, g + h));
                            pr && 9 > hr ? u.appendChild(Fi("span", [d])) : u.appendChild(d), e.map.push(e.pos, e.pos + h, d), e.col += h, e.pos += h
                        }
                        if (!p) break;
                        if (g += h + 1, "	" == p[0]) {
                            var f = e.cm.options.tabSize,
                                m = f - e.col % f,
                                d = u.appendChild(Fi("span", Bi(m), "cm-tab"));
                            d.setAttribute("role", "presentation"), d.setAttribute("cm-text", "	"), e.col += m
                        } else {
                            var d = e.cm.options.specialCharPlaceholder(p[0]);
                            d.setAttribute("cm-text", p[0]), pr && 9 > hr ? u.appendChild(Fi("span", [d])) : u.appendChild(d), e.col += 1
                        }
                        e.map.push(e.pos, e.pos + 1, d), e.pos++
                    } else {
                        e.col += t.length;
                        var u = document.createTextNode(a);
                        e.map.push(e.pos, e.pos + t.length, u), pr && 9 > hr && (c = !0), e.pos += t.length
                    }
                if (o || n || i || c || s) {
                    var y = o || "";
                    n && (y += n), i && (y += i);
                    var v = Fi("span", [u], y, s);
                    return r && (v.title = r), e.content.appendChild(v)
                }
                e.content.appendChild(u)
            }
        }

        function Pn(e) {
            for (var t = " ", o = 0; o < e.length - 2; ++o) t += o % 2 ? " " : "\xa0";
            return t += " "
        }

        function Fn(e, t) {
            return function(o, n, i, r, s, a, l) {
                i = i ? i + " cm-force-border" : "cm-force-border";
                for (var c = o.pos, u = c + n.length;;) {
                    for (var g = 0; g < t.length; g++) {
                        var p = t[g];
                        if (p.to > c && p.from <= c) break
                    }
                    if (p.to >= u) return e(o, n, i, r, s, a, l);
                    e(o, n.slice(0, p.to - c), i, r, null, a, l), r = null, n = n.slice(p.to - c), c = p.to
                }
            }
        }

        function Hn(e, t, o, n) {
            var i = !n && o.widgetNode;
            i && e.map.push(e.pos, e.pos + t, i), !n && e.cm.display.input.needsContentAttribute && (i || (i = e.content.appendChild(document.createElement("span"))), i.setAttribute("cm-marker", o.id)), i && (e.cm.display.input.setUneditable(i), e.content.appendChild(i)), e.pos += t
        }

        function Un(e, t, o) {
            var n = e.markedSpans,
                i = e.text,
                r = 0;
            if (n)
                for (var s, a, l, c, u, g, p, h = i.length, d = 0, f = 1, m = "", y = 0;;) {
                    if (y == d) {
                        l = c = u = g = a = "", p = null, y = 1 / 0;
                        for (var v = [], _ = 0; _ < n.length; ++_) {
                            var b = n[_],
                                C = b.marker;
                            "bookmark" == C.type && b.from == d && C.widgetNode ? v.push(C) : b.from <= d && (null == b.to || b.to > d || C.collapsed && b.to == d && b.from == d) ? (null != b.to && b.to != d && y > b.to && (y = b.to, c = ""), C.className && (l += " " + C.className), C.css && (a = C.css), C.startStyle && b.from == d && (u += " " + C.startStyle), C.endStyle && b.to == y && (c += " " + C.endStyle), C.title && !g && (g = C.title), C.collapsed && (!p || cn(p.marker, C) < 0) && (p = b)) : b.from > d && y > b.from && (y = b.from)
                        }
                        if (p && (p.from || 0) == d) {
                            if (Hn(t, (null == p.to ? h + 1 : p.to) - d, p.marker, null == p.from), null == p.to) return;
                            p.to == d && (p = !1)
                        }
                        if (!p && v.length)
                            for (var _ = 0; _ < v.length; ++_) Hn(t, 0, v[_])
                    }
                    if (d >= h) break;
                    for (var E = Math.min(h, y);;) {
                        if (m) {
                            var S = d + m.length;
                            if (!p) {
                                var T = S > E ? m.slice(0, E - d) : m;
                                t.addToken(t, T, s ? s + l : l, u, d + T.length == y ? c : "", g, a)
                            }
                            if (S >= E) {
                                m = m.slice(E - d), d = E;
                                break
                            }
                            d = S, u = ""
                        }
                        m = i.slice(r, r = o[f++]), s = Ln(o[f++], t.cm.options)
                    }
                } else
                    for (var f = 1; f < o.length; f += 2) t.addToken(t, i.slice(r, r = o[f]), Ln(o[f + 1], t.cm.options))
        }

        function Vn(e, t) {
            return 0 == t.from.ch && 0 == t.to.ch && "" == xi(t.text) && (!e.cm || e.cm.options.wholeLineUpdateBefore)
        }

        function Wn(e, t, o, n) {
            function i(e) {
                return o ? o[e] : null
            }

            function r(e, o, i) {
                Sn(e, o, i, n), _i(e, "change", e, t)
            }

            function s(e, t) {
                for (var o = e, r = []; t > o; ++o) r.push(new ps(c[o], i(o), n));
                return r
            }
            var a = t.from,
                l = t.to,
                c = t.text,
                u = Xn(e, a.line),
                g = Xn(e, l.line),
                p = xi(c),
                h = i(c.length - 1),
                d = l.line - a.line;
            if (t.full) e.insert(0, s(0, c.length)), e.remove(c.length, e.size - c.length);
            else if (Vn(e, t)) {
                var f = s(0, c.length - 1);
                r(g, g.text, h), d && e.remove(a.line, d), f.length && e.insert(a.line, f)
            } else if (u == g)
                if (1 == c.length) r(u, u.text.slice(0, a.ch) + p + u.text.slice(l.ch), h);
                else {
                    var f = s(1, c.length - 1);
                    f.push(new ps(p + u.text.slice(l.ch), h, n)), r(u, u.text.slice(0, a.ch) + c[0], i(0)), e.insert(a.line + 1, f)
                } else if (1 == c.length) r(u, u.text.slice(0, a.ch) + c[0] + g.text.slice(l.ch), i(0)), e.remove(a.line + 1, d);
            else {
                r(u, u.text.slice(0, a.ch) + c[0], i(0)), r(g, p + g.text.slice(l.ch), h);
                var f = s(1, c.length - 1);
                d > 1 && e.remove(a.line + 1, d - 1), e.insert(a.line + 1, f)
            }
            _i(e, "change", e, t)
        }

        function Gn(e) {
            this.lines = e, this.parent = null;
            for (var t = 0, o = 0; t < e.length; ++t) e[t].parent = this, o += e[t].height;
            this.height = o
        }

        function Kn(e) {
            this.children = e;
            for (var t = 0, o = 0, n = 0; n < e.length; ++n) {
                var i = e[n];
                t += i.chunkSize(), o += i.height, i.parent = this
            }
            this.size = t, this.height = o, this.parent = null
        }

        function jn(e, t, o) {
            function n(e, i, r) {
                if (e.linked)
                    for (var s = 0; s < e.linked.length; ++s) {
                        var a = e.linked[s];
                        if (a.doc != i) {
                            var l = r && a.sharedHist;
                            o && !l || (t(a.doc, l), n(a.doc, e, l))
                        }
                    }
            }
            n(e, null, !0)
        }

        function Yn(e, t) {
            if (t.cm) throw new Error("This document is already in use.");
            e.doc = t, t.cm = e, s(e), o(e), e.options.lineWrapping || p(e), e.options.mode = t.modeOption, Rt(e)
        }

        function Xn(e, t) {
            if (t -= e.first, 0 > t || t >= e.size) throw new Error("There is no line " + (t + e.first) + " in the document.");
            for (var o = e; !o.lines;)
                for (var n = 0;; ++n) {
                    var i = o.children[n],
                        r = i.chunkSize();
                    if (r > t) {
                        o = i;
                        break
                    }
                    t -= r
                }
            return o.lines[t]
        }

        function zn(e, t, o) {
            var n = [],
                i = t.line;
            return e.iter(t.line, o.line + 1, function(e) {
                var r = e.text;
                i == o.line && (r = r.slice(0, o.ch)), i == t.line && (r = r.slice(t.ch)), n.push(r), ++i
            }), n
        }

        function qn(e, t, o) {
            var n = [];
            return e.iter(t, o, function(e) {
                n.push(e.text)
            }), n
        }

        function $n(e, t) {
            var o = t - e.height;
            if (o)
                for (var n = e; n; n = n.parent) n.height += o
        }

        function Qn(e) {
            if (null == e.parent) return null;
            for (var t = e.parent, o = wi(t.lines, e), n = t.parent; n; t = n, n = n.parent)
                for (var i = 0; n.children[i] != t; ++i) o += n.children[i].chunkSize();
            return o + t.first
        }

        function Jn(e, t) {
            var o = e.first;
            e: do {
                for (var n = 0; n < e.children.length; ++n) {
                    var i = e.children[n],
                        r = i.height;
                    if (r > t) {
                        e = i;
                        continue e
                    }
                    t -= r, o += i.chunkSize()
                }
                return o
            } while (!e.lines);
            for (var n = 0; n < e.lines.length; ++n) {
                var s = e.lines[n],
                    a = s.height;
                if (a > t) break;
                t -= a
            }
            return o + n
        }

        function Zn(e) {
            e = dn(e);
            for (var t = 0, o = e.parent, n = 0; n < o.lines.length; ++n) {
                var i = o.lines[n];
                if (i == e) break;
                t += i.height
            }
            for (var r = o.parent; r; o = r, r = o.parent)
                for (var n = 0; n < r.children.length; ++n) {
                    var s = r.children[n];
                    if (s == o) break;
                    t += s.height
                }
            return t
        }

        function ei(e) {
            var t = e.order;
            return null == t && (t = e.order = Qs(e.text)), t
        }

        function ti(e) {
            this.done = [], this.undone = [], this.undoDepth = 1 / 0, this.lastModTime = this.lastSelTime = 0, this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, this.generation = this.maxGeneration = e || 1
        }

        function oi(e, t) {
            var o = {
                from: X(t.from),
                to: jr(t),
                text: zn(e, t.from, t.to)
            };
            return ci(e, o, t.from.line, t.to.line + 1), jn(e, function(e) {
                ci(e, o, t.from.line, t.to.line + 1)
            }, !0), o
        }

        function ni(e) {
            for (; e.length;) {
                var t = xi(e);
                if (!t.ranges) break;
                e.pop()
            }
        }

        function ii(e, t) {
            return t ? (ni(e.done), xi(e.done)) : e.done.length && !xi(e.done).ranges ? xi(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(), xi(e.done)) : void 0
        }

        function ri(e, t, o, n) {
            var i = e.history;
            i.undone.length = 0;
            var r, s = +new Date;
            if ((i.lastOp == n || i.lastOrigin == t.origin && t.origin && ("+" == t.origin.charAt(0) && e.cm && i.lastModTime > s - e.cm.options.historyEventDelay || "*" == t.origin.charAt(0))) && (r = ii(i, i.lastOp == n))) {
                var a = xi(r.changes);
                0 == Nr(t.from, t.to) && 0 == Nr(t.from, a.to) ? a.to = jr(t) : r.changes.push(oi(e, t))
            } else {
                var l = xi(i.done);
                for (l && l.ranges || li(e.sel, i.done), r = {
                        changes: [oi(e, t)],
                        generation: i.generation
                    }, i.done.push(r); i.done.length > i.undoDepth;) i.done.shift(), i.done[0].ranges || i.done.shift()
            }
            i.done.push(o), i.generation = ++i.maxGeneration, i.lastModTime = i.lastSelTime = s, i.lastOp = i.lastSelOp = n, i.lastOrigin = i.lastSelOrigin = t.origin, a || Ts(e, "historyAdded")
        }

        function si(e, t, o, n) {
            var i = t.charAt(0);
            return "*" == i || "+" == i && o.ranges.length == n.ranges.length && o.somethingSelected() == n.somethingSelected() && new Date - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500)
        }

        function ai(e, t, o, n) {
            var i = e.history,
                r = n && n.origin;
            o == i.lastSelOp || r && i.lastSelOrigin == r && (i.lastModTime == i.lastSelTime && i.lastOrigin == r || si(e, r, xi(i.done), t)) ? i.done[i.done.length - 1] = t : li(t, i.done), i.lastSelTime = +new Date, i.lastSelOrigin = r, i.lastSelOp = o, n && n.clearRedo !== !1 && ni(i.undone)
        }

        function li(e, t) {
            var o = xi(t);
            o && o.ranges && o.equals(e) || t.push(e)
        }

        function ci(e, t, o, n) {
            var i = t["spans_" + e.id],
                r = 0;
            e.iter(Math.max(e.first, o), Math.min(e.first + e.size, n), function(o) {
                o.markedSpans && ((i || (i = t["spans_" + e.id] = {}))[r] = o.markedSpans), ++r
            })
        }

        function ui(e) {
            if (!e) return null;
            for (var t, o = 0; o < e.length; ++o) e[o].marker.explicitlyCleared ? t || (t = e.slice(0, o)) : t && t.push(e[o]);
            return t ? t.length ? t : null : e
        }

        function gi(e, t) {
            var o = t["spans_" + e.id];
            if (!o) return null;
            for (var n = 0, i = []; n < t.text.length; ++n) i.push(ui(o[n]));
            return i
        }

        function pi(e, t, o) {
            for (var n = 0, i = []; n < e.length; ++n) {
                var r = e[n];
                if (r.ranges) i.push(o ? ce.prototype.deepCopy.call(r) : r);
                else {
                    var s = r.changes,
                        a = [];
                    i.push({
                        changes: a
                    });
                    for (var l = 0; l < s.length; ++l) {
                        var c, u = s[l];
                        if (a.push({
                                from: u.from,
                                to: u.to,
                                text: u.text
                            }), t)
                            for (var g in u)(c = g.match(/^spans_(\d+)$/)) && wi(t, Number(c[1])) > -1 && (xi(a)[g] = u[g], delete u[g])
                    }
                }
            }
            return i
        }

        function hi(e, t, o, n) {
            o < e.line ? e.line += n : t < e.line && (e.line = t, e.ch = 0)
        }

        function di(e, t, o, n) {
            for (var i = 0; i < e.length; ++i) {
                var r = e[i],
                    s = !0;
                if (r.ranges) {
                    r.copied || (r = e[i] = r.deepCopy(), r.copied = !0);
                    for (var a = 0; a < r.ranges.length; a++) hi(r.ranges[a].anchor, t, o, n), hi(r.ranges[a].head, t, o, n)
                } else {
                    for (var a = 0; a < r.changes.length; ++a) {
                        var l = r.changes[a];
                        if (o < l.from.line) l.from = Ir(l.from.line + n, l.from.ch), l.to = Ir(l.to.line + n, l.to.ch);
                        else if (t <= l.to.line) {
                            s = !1;
                            break
                        }
                    }
                    s || (e.splice(0, i + 1), i = 0)
                }
            }
        }

        function fi(e, t) {
            var o = t.from.line,
                n = t.to.line,
                i = t.text.length - (n - o) - 1;
            di(e.done, o, n, i), di(e.undone, o, n, i)
        }

        function mi(e) {
            return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue
        }

        function yi(e) {
            return e.target || e.srcElement
        }

        function vi(e) {
            var t = e.which;
            return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), Sr && e.ctrlKey && 1 == t && (t = 3), t
        }

        function _i(e, t) {
            function o(e) {
                return function() {
                    e.apply(null, r)
                }
            }
            var n = e._handlers && e._handlers[t];
            if (n) {
                var i, r = Array.prototype.slice.call(arguments, 2);
                Pr ? i = Pr.delayedCallbacks : ks ? i = ks : (i = ks = [], setTimeout(bi, 0));
                for (var s = 0; s < n.length; ++s) i.push(o(n[s]))
            }
        }

        function bi() {
            var e = ks;
            ks = null;
            for (var t = 0; t < e.length; ++t) e[t]()
        }

        function Ci(e, t, o) {
            return "string" == typeof t && (t = {
                type: t,
                preventDefault: function() {
                    this.defaultPrevented = !0
                }
            }), Ts(e, o || t.type, e, t), mi(t) || t.codemirrorIgnore
        }

        function Ei(e) {
            var t = e._handlers && e._handlers.cursorActivity;
            if (t)
                for (var o = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), n = 0; n < t.length; ++n) - 1 == wi(o, t[n]) && o.push(t[n])
        }

        function Si(e, t) {
            var o = e._handlers && e._handlers[t];
            return o && o.length > 0
        }

        function Ti(e) {
            e.prototype.on = function(e, t) {
                Es(this, e, t)
            }, e.prototype.off = function(e, t) {
                Ss(this, e, t)
            }
        }

        function ki() {
            this.id = null
        }

        function Ai(e, t, o) {
            for (var n = 0, i = 0;;) {
                var r = e.indexOf("	", n); - 1 == r && (r = e.length);
                var s = r - n;
                if (r == e.length || i + s >= t) return n + Math.min(s, t - i);
                if (i += r - n, i += o - i % o, n = r + 1, i >= t) return n
            }
        }

        function Bi(e) {
            for (; Rs.length <= e;) Rs.push(xi(Rs) + " ");
            return Rs[e]
        }

        function xi(e) {
            return e[e.length - 1]
        }

        function wi(e, t) {
            for (var o = 0; o < e.length; ++o)
                if (e[o] == t) return o;
            return -1
        }

        function Ii(e, t) {
            for (var o = [], n = 0; n < e.length; n++) o[n] = t(e[n], n);
            return o
        }

        function Ni() {}

        function Ri(e, t) {
            var o;
            return Object.create ? o = Object.create(e) : (Ni.prototype = e, o = new Ni), t && Li(t, o), o
        }

        function Li(e, t, o) {
            t || (t = {});
            for (var n in e) !e.hasOwnProperty(n) || o === !1 && t.hasOwnProperty(n) || (t[n] = e[n]);
            return t
        }

        function Oi(e) {
            var t = Array.prototype.slice.call(arguments, 1);
            return function() {
                return e.apply(null, t)
            }
        }

        function Di(e, t) {
            return t ? t.source.indexOf("\\w") > -1 && Ms(e) ? !0 : t.test(e) : Ms(e)
        }

        function Mi(e) {
            for (var t in e)
                if (e.hasOwnProperty(t) && e[t]) return !1;
            return !0
        }

        function Pi(e) {
            return e.charCodeAt(0) >= 768 && Ps.test(e)
        }

        function Fi(e, t, o, n) {
            var i = document.createElement(e);
            if (o && (i.className = o), n && (i.style.cssText = n), "string" == typeof t) i.appendChild(document.createTextNode(t));
            else if (t)
                for (var r = 0; r < t.length; ++r) i.appendChild(t[r]);
            return i
        }

        function Hi(e) {
            for (var t = e.childNodes.length; t > 0; --t) e.removeChild(e.firstChild);
            return e
        }

        function Ui(e, t) {
            return Hi(e).appendChild(t)
        }

        function Vi() {
            return document.activeElement
        }

        function Wi(e) {
            return new RegExp("(^|\\s)" + e + "(?:$|\\s)\\s*")
        }

        function Gi(e, t) {
            for (var o = e.split(" "), n = 0; n < o.length; n++) o[n] && !Wi(o[n]).test(t) && (t += " " + o[n]);
            return t
        }

        function Ki(e) {
            if (document.body.getElementsByClassName)
                for (var t = document.body.getElementsByClassName("CodeMirror"), o = 0; o < t.length; o++) {
                    var n = t[o].CodeMirror;
                    n && e(n)
                }
        }

        function ji() {
            Gs || (Yi(), Gs = !0)
        }

        function Yi() {
            var e;
            Es(window, "resize", function() {
                null == e && (e = setTimeout(function() {
                    e = null, Ki(Vt)
                }, 100))
            }), Es(window, "blur", function() {
                Ki(po)
            })
        }

        function Xi(e) {
            if (null == Hs) {
                var t = Fi("span", "\u200b");
                Ui(e, Fi("span", [t, document.createTextNode("x")])), 0 != e.firstChild.offsetHeight && (Hs = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(pr && 8 > hr))
            }
            var o = Hs ? Fi("span", "\u200b") : Fi("span", "\xa0", null, "display: inline-block; width: 1px; margin-right: -1px");
            return o.setAttribute("cm-text", ""), o
        }

        function zi(e) {
            if (null != Us) return Us;
            var t = Ui(e, document.createTextNode("A\u062eA")),
                o = Os(t, 0, 1).getBoundingClientRect();
            if (!o || o.left == o.right) return !1;
            var n = Os(t, 1, 2).getBoundingClientRect();
            return Us = n.right - o.right < 3
        }

        function qi(e) {
            if (null != zs) return zs;
            var t = Ui(e, Fi("span", "x")),
                o = t.getBoundingClientRect(),
                n = Os(t, 0, 1).getBoundingClientRect();
            return zs = Math.abs(o.left - n.left) > 1
        }

        function $i(e, t, o, n) {
            if (!e) return n(t, o, "ltr");
            for (var i = !1, r = 0; r < e.length; ++r) {
                var s = e[r];
                (s.from < o && s.to > t || t == o && s.to == t) && (n(Math.max(s.from, t), Math.min(s.to, o), 1 == s.level ? "rtl" : "ltr"), i = !0)
            }
            i || n(t, o, "ltr")
        }

        function Qi(e) {
            return e.level % 2 ? e.to : e.from
        }

        function Ji(e) {
            return e.level % 2 ? e.from : e.to
        }

        function Zi(e) {
            var t = ei(e);
            return t ? Qi(t[0]) : 0
        }

        function er(e) {
            var t = ei(e);
            return t ? Ji(xi(t)) : e.text.length
        }

        function tr(e, t) {
            var o = Xn(e.doc, t),
                n = dn(o);
            n != o && (t = Qn(n));
            var i = ei(n),
                r = i ? i[0].level % 2 ? er(n) : Zi(n) : 0;
            return Ir(t, r)
        }

        function or(e, t) {
            for (var o, n = Xn(e.doc, t); o = pn(n);) n = o.find(1, !0).line, t = null;
            var i = ei(n),
                r = i ? i[0].level % 2 ? Zi(n) : er(n) : n.text.length;
            return Ir(null == t ? Qn(n) : t, r)
        }

        function nr(e, t) {
            var o = tr(e, t.line),
                n = Xn(e.doc, o.line),
                i = ei(n);
            if (!i || 0 == i[0].level) {
                var r = Math.max(0, n.text.search(/\S/)),
                    s = t.line == o.line && t.ch <= r && t.ch;
                return Ir(o.line, s ? 0 : r)
            }
            return o
        }

        function ir(e, t, o) {
            var n = e[0].level;
            return t == n ? !0 : o == n ? !1 : o > t
        }

        function rr(e, t) {
            $s = null;
            for (var o, n = 0; n < e.length; ++n) {
                var i = e[n];
                if (i.from < t && i.to > t) return n;
                if (i.from == t || i.to == t) {
                    if (null != o) return ir(e, i.level, e[o].level) ? (i.from != i.to && ($s = o), n) : (i.from != i.to && ($s = n), o);
                    o = n
                }
            }
            return o
        }

        function sr(e, t, o, n) {
            if (!n) return t + o;
            do t += o; while (t > 0 && Pi(e.text.charAt(t)));
            return t
        }

        function ar(e, t, o, n) {
            var i = ei(e);
            if (!i) return lr(e, t, o, n);
            for (var r = rr(i, t), s = i[r], a = sr(e, t, s.level % 2 ? -o : o, n);;) {
                if (a > s.from && a < s.to) return a;
                if (a == s.from || a == s.to) return rr(i, a) == r ? a : (s = i[r += o], o > 0 == s.level % 2 ? s.to : s.from);
                if (s = i[r += o], !s) return null;
                a = o > 0 == s.level % 2 ? sr(e, s.to, -1, n) : sr(e, s.from, 1, n)
            }
        }

        function lr(e, t, o, n) {
            var i = t + o;
            if (n)
                for (; i > 0 && Pi(e.text.charAt(i));) i += o;
            return 0 > i || i > e.text.length ? null : i
        }
        var cr = /gecko\/\d/i.test(navigator.userAgent),
            ur = /MSIE \d/.test(navigator.userAgent),
            gr = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),
            pr = ur || gr,
            hr = pr && (ur ? document.documentMode || 6 : gr[1]),
            dr = /WebKit\//.test(navigator.userAgent),
            fr = dr && /Qt\/\d+\.\d+/.test(navigator.userAgent),
            mr = /Chrome\//.test(navigator.userAgent),
            yr = /Opera\//.test(navigator.userAgent),
            vr = /Apple Computer/.test(navigator.vendor),
            _r = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),
            br = /PhantomJS/.test(navigator.userAgent),
            Cr = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent),
            Er = Cr || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
            Sr = Cr || /Mac/.test(navigator.platform),
            Tr = /win/i.test(navigator.platform),
            kr = yr && navigator.userAgent.match(/Version\/(\d*\.\d*)/);
        kr && (kr = Number(kr[1])), kr && kr >= 15 && (yr = !1, dr = !0);
        var Ar = Sr && (fr || yr && (null == kr || 12.11 > kr)),
            Br = cr || pr && hr >= 9,
            xr = !1,
            wr = !1;
        f.prototype = Li({
            update: function(e) {
                var t = e.scrollWidth > e.clientWidth + 1,
                    o = e.scrollHeight > e.clientHeight + 1,
                    n = e.nativeBarWidth;
                if (o) {
                    this.vert.style.display = "block", this.vert.style.bottom = t ? n + "px" : "0";
                    var i = e.viewHeight - (t ? n : 0);
                    this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + i) + "px"
                } else this.vert.style.display = "", this.vert.firstChild.style.height = "0";
                if (t) {
                    this.horiz.style.display = "block", this.horiz.style.right = o ? n + "px" : "0", this.horiz.style.left = e.barLeft + "px";
                    var r = e.viewWidth - e.barLeft - (o ? n : 0);
                    this.horiz.firstChild.style.width = e.scrollWidth - e.clientWidth + r + "px"
                } else this.horiz.style.display = "", this.horiz.firstChild.style.width = "0";
                return !this.checkedOverlay && e.clientHeight > 0 && (0 == n && this.overlayHack(), this.checkedOverlay = !0), {
                    right: o ? n : 0,
                    bottom: t ? n : 0
                }
            },
            setScrollLeft: function(e) {
                this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e)
            },
            setScrollTop: function(e) {
                this.vert.scrollTop != e && (this.vert.scrollTop = e)
            },
            overlayHack: function() {
                var e = Sr && !_r ? "12px" : "18px";
                this.horiz.style.minHeight = this.vert.style.minWidth = e;
                var t = this,
                    o = function(e) {
                        yi(e) != t.vert && yi(e) != t.horiz && Bt(t.cm, Kt)(e)
                    };
                Es(this.vert, "mousedown", o), Es(this.horiz, "mousedown", o)
            },
            clear: function() {
                var e = this.horiz.parentNode;
                e.removeChild(this.horiz), e.removeChild(this.vert)
            }
        }, f.prototype), m.prototype = Li({
            update: function() {
                return {
                    bottom: 0,
                    right: 0
                }
            },
            setScrollLeft: function() {},
            setScrollTop: function() {},
            clear: function() {}
        }, m.prototype), e.scrollbarModel = {
            "native": f,
            "null": m
        }, k.prototype.signal = function(e, t) {
            Si(e, t) && this.events.push(arguments)
        }, k.prototype.finish = function() {
            for (var e = 0; e < this.events.length; e++) Ts.apply(null, this.events[e])
        };
        var Ir = e.Pos = function(e, t) {
                return this instanceof Ir ? (this.line = e, void(this.ch = t)) : new Ir(e, t)
            },
            Nr = e.cmpPos = function(e, t) {
                return e.line - t.line || e.ch - t.ch
            },
            Rr = null;
        te.prototype = Li({
            init: function(e) {
                function t(e) {
                    if (n.somethingSelected()) Rr = n.getSelections(), o.inaccurateSelection && (o.prevInput = "", o.inaccurateSelection = !1, r.value = Rr.join("\n"), Ls(r));
                    else {
                        if (!n.options.lineWiseCopyCut) return;
                        var t = Z(n);
                        Rr = t.text, "cut" == e.type ? n.setSelections(t.ranges, null, xs) : (o.prevInput = "", r.value = t.text.join("\n"), Ls(r))
                    }
                    "cut" == e.type && (n.state.cutIncoming = !0)
                }
                var o = this,
                    n = this.cm,
                    i = this.wrapper = oe(),
                    r = this.textarea = i.firstChild;
                e.wrapper.insertBefore(i, e.wrapper.firstChild), Cr && (r.style.width = "0px"), Es(r, "input", function() {
                    pr && hr >= 9 && o.hasSelection && (o.hasSelection = null), o.poll()
                }), Es(r, "paste", function() {
                    if (dr && !n.state.fakedLastChar && !(new Date - n.state.lastMiddleDown < 200)) {
                        var e = r.selectionStart,
                            t = r.selectionEnd;
                        r.value += "$", r.selectionEnd = t, r.selectionStart = e, n.state.fakedLastChar = !0
                    }
                    n.state.pasteIncoming = !0, o.fastPoll()
                }), Es(r, "cut", t), Es(r, "copy", t), Es(e.scroller, "paste", function(t) {
                    Wt(e, t) || (n.state.pasteIncoming = !0, o.focus())
                }), Es(e.lineSpace, "selectstart", function(t) {
                    Wt(e, t) || _s(t)
                }), Es(r, "compositionstart", function() {
                    var e = n.getCursor("from");
                    o.composing = {
                        start: e,
                        range: n.markText(e, n.getCursor("to"), {
                            className: "CodeMirror-composing"
                        })
                    }
                }), Es(r, "compositionend", function() {
                    o.composing && (o.poll(), o.composing.range.clear(), o.composing = null)
                })
            },
            prepareSelection: function() {
                var e = this.cm,
                    t = e.display,
                    o = e.doc,
                    n = Re(e);
                if (e.options.moveInputWithCursor) {
                    var i = ut(e, o.sel.primary().head, "div"),
                        r = t.wrapper.getBoundingClientRect(),
                        s = t.lineDiv.getBoundingClientRect();
                    n.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, i.top + s.top - r.top)), n.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, i.left + s.left - r.left))
                }
                return n
            },
            showSelection: function(e) {
                var t = this.cm,
                    o = t.display;
                Ui(o.cursorDiv, e.cursors), Ui(o.selectionDiv, e.selection), null != e.teTop && (this.wrapper.style.top = e.teTop + "px", this.wrapper.style.left = e.teLeft + "px")
            },
            reset: function(e) {
                if (!this.contextMenuPending) {
                    var t, o, n = this.cm,
                        i = n.doc;
                    if (n.somethingSelected()) {
                        this.prevInput = "";
                        var r = i.sel.primary();
                        t = Xs && (r.to().line - r.from().line > 100 || (o = n.getSelection()).length > 1e3);
                        var s = t ? "-" : o || n.getSelection();
                        this.textarea.value = s, n.state.focused && Ls(this.textarea), pr && hr >= 9 && (this.hasSelection = s)
                    } else e || (this.prevInput = this.textarea.value = "", pr && hr >= 9 && (this.hasSelection = null));
                    this.inaccurateSelection = t
                }
            },
            getField: function() {
                return this.textarea
            },
            supportsTouch: function() {
                return !1
            },
            focus: function() {
                if ("nocursor" != this.cm.options.readOnly && (!Er || Vi() != this.textarea)) try {
                    this.textarea.focus()
                } catch (e) {}
            },
            blur: function() {
                this.textarea.blur()
            },
            resetPosition: function() {
                this.wrapper.style.top = this.wrapper.style.left = 0
            },
            receivedFocus: function() {
                this.slowPoll()
            },
            slowPoll: function() {
                var e = this;
                e.pollingFast || e.polling.set(this.cm.options.pollInterval, function() {
                    e.poll(), e.cm.state.focused && e.slowPoll()
                })
            },
            fastPoll: function() {
                function e() {
                    var n = o.poll();
                    n || t ? (o.pollingFast = !1, o.slowPoll()) : (t = !0, o.polling.set(60, e))
                }
                var t = !1,
                    o = this;
                o.pollingFast = !0, o.polling.set(20, e)
            },
            poll: function() {
                var e = this.cm,
                    t = this.textarea,
                    o = this.prevInput;
                if (!e.state.focused || Ys(t) && !o || Q(e) || e.options.disableInput || e.state.keySeq) return !1;
                e.state.pasteIncoming && e.state.fakedLastChar && (t.value = t.value.substring(0, t.value.length - 1), e.state.fakedLastChar = !1);
                var n = t.value;
                if (n == o && !e.somethingSelected()) return !1;
                if (pr && hr >= 9 && this.hasSelection === n || Sr && /[\uf700-\uf7ff]/.test(n)) return e.display.input.reset(), !1;
                if (e.doc.sel == e.display.selForContextMenu) {
                    var i = n.charCodeAt(0);
                    if (8203 != i || o || (o = "\u200b"), 8666 == i) return this.reset(), this.cm.execCommand("undo")
                }
                for (var r = 0, s = Math.min(o.length, n.length); s > r && o.charCodeAt(r) == n.charCodeAt(r);) ++r;
                var a = this;
                return At(e, function() {
                    J(e, n.slice(r), o.length - r, null, a.composing ? "*compose" : null), n.length > 1e3 || n.indexOf("\n") > -1 ? t.value = a.prevInput = "" : a.prevInput = n, a.composing && (a.composing.range.clear(), a.composing.range = e.markText(a.composing.start, e.getCursor("to"), {
                        className: "CodeMirror-composing"
                    }))
                }), !0
            },
            ensurePolled: function() {
                this.pollingFast && this.poll() && (this.pollingFast = !1)
            },
            onKeyPress: function() {
                pr && hr >= 9 && (this.hasSelection = null), this.fastPoll()
            },
            onContextMenu: function(e) {
                function t() {
                    if (null != s.selectionStart) {
                        var e = i.somethingSelected(),
                            t = "\u200b" + (e ? s.value : "");
                        s.value = "\u21da", s.value = t, n.prevInput = e ? "" : "\u200b", s.selectionStart = 1, s.selectionEnd = t.length, r.selForContextMenu = i.doc.sel
                    }
                }

                function o() {
                    if (n.contextMenuPending = !1, n.wrapper.style.position = "relative", s.style.cssText = u, pr && 9 > hr && r.scrollbars.setScrollTop(r.scroller.scrollTop = l), null != s.selectionStart) {
                        (!pr || pr && 9 > hr) && t();
                        var e = 0,
                            o = function() {
                                r.selForContextMenu == i.doc.sel && 0 == s.selectionStart && s.selectionEnd > 0 && "\u200b" == n.prevInput ? Bt(i, os.selectAll)(i) : e++ < 10 ? r.detectingSelectAll = setTimeout(o, 500) : r.input.reset()
                            };
                        r.detectingSelectAll = setTimeout(o, 200)
                    }
                }
                var n = this,
                    i = n.cm,
                    r = i.display,
                    s = n.textarea,
                    a = Gt(i, e),
                    l = r.scroller.scrollTop;
                if (a && !yr) {
                    var c = i.options.resetSelectionOnContextMenu;
                    c && -1 == i.doc.sel.contains(a) && Bt(i, ke)(i.doc, pe(a), xs);
                    var u = s.style.cssText;
                    if (n.wrapper.style.position = "absolute", s.style.cssText = "position: fixed; width: 30px; height: 30px; top: " + (e.clientY - 5) + "px; left: " + (e.clientX - 5) + "px; z-index: 1000; background: " + (pr ? "rgba(255, 255, 255, .05)" : "transparent") + "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", dr) var g = window.scrollY;
                    if (r.input.focus(), dr && window.scrollTo(null, g), r.input.reset(), i.somethingSelected() || (s.value = n.prevInput = " "), n.contextMenuPending = !0, r.selForContextMenu = i.doc.sel, clearTimeout(r.detectingSelectAll), pr && hr >= 9 && t(), Br) {
                        Cs(e);
                        var p = function() {
                            Ss(window, "mouseup", p), setTimeout(o, 20)
                        };
                        Es(window, "mouseup", p)
                    } else setTimeout(o, 50)
                }
            },
            setUneditable: Ni,
            needsContentAttribute: !1
        }, te.prototype), ne.prototype = Li({
            init: function(e) {
                function t(e) {
                    if (n.somethingSelected()) Rr = n.getSelections(), "cut" == e.type && n.replaceSelection("", null, "cut");
                    else {
                        if (!n.options.lineWiseCopyCut) return;
                        var t = Z(n);
                        Rr = t.text, "cut" == e.type && n.operation(function() {
                            n.setSelections(t.ranges, 0, xs), n.replaceSelection("", null, "cut")
                        })
                    }
                    if (e.clipboardData && !Cr) e.preventDefault(), e.clipboardData.clearData(), e.clipboardData.setData("text/plain", Rr.join("\n"));
                    else {
                        var o = oe(),
                            i = o.firstChild;
                        n.display.lineSpace.insertBefore(o, n.display.lineSpace.firstChild), i.value = Rr.join("\n");
                        var r = document.activeElement;
                        Ls(i), setTimeout(function() {
                            n.display.lineSpace.removeChild(o), r.focus()
                        }, 50)
                    }
                }
                var o = this,
                    n = o.cm,
                    i = o.div = e.lineDiv;
                i.contentEditable = "true", ee(i), Es(i, "paste", function(e) {
                    var t = e.clipboardData && e.clipboardData.getData("text/plain");
                    t && (e.preventDefault(), n.replaceSelection(t, null, "paste"))
                }), Es(i, "compositionstart", function(e) {
                    var t = e.data;
                    if (o.composing = {
                            sel: n.doc.sel,
                            data: t,
                            startData: t
                        }, t) {
                        var i = n.doc.sel.primary(),
                            r = n.getLine(i.head.line),
                            s = r.indexOf(t, Math.max(0, i.head.ch - t.length));
                        s > -1 && s <= i.head.ch && (o.composing.sel = pe(Ir(i.head.line, s), Ir(i.head.line, s + t.length)))
                    }
                }), Es(i, "compositionupdate", function(e) {
                    o.composing.data = e.data
                }), Es(i, "compositionend", function(e) {
                    var t = o.composing;
                    t && (e.data == t.startData || /\u200b/.test(e.data) || (t.data = e.data), setTimeout(function() {
                        t.handled || o.applyComposition(t), o.composing == t && (o.composing = null)
                    }, 50))
                }), Es(i, "touchstart", function() {
                    o.forceCompositionEnd()
                }), Es(i, "input", function() {
                    o.composing || o.pollContent() || At(o.cm, function() {
                        Rt(n)
                    })
                }), Es(i, "copy", t), Es(i, "cut", t)
            },
            prepareSelection: function() {
                var e = Re(this.cm, !1);
                return e.focus = this.cm.state.focused, e
            },
            showSelection: function(e) {
                e && this.cm.display.view.length && (e.focus && this.showPrimarySelection(), this.showMultipleSelections(e))
            },
            showPrimarySelection: function() {
                var e = window.getSelection(),
                    t = this.cm.doc.sel.primary(),
                    o = se(this.cm, e.anchorNode, e.anchorOffset),
                    n = se(this.cm, e.focusNode, e.focusOffset);
                if (!o || o.bad || !n || n.bad || 0 != Nr(q(o, n), t.from()) || 0 != Nr(z(o, n), t.to())) {
                    var i = ie(this.cm, t.from()),
                        r = ie(this.cm, t.to());
                    if (i || r) {
                        var s = this.cm.display.view,
                            a = e.rangeCount && e.getRangeAt(0);
                        if (i) {
                            if (!r) {
                                var l = s[s.length - 1].measure,
                                    c = l.maps ? l.maps[l.maps.length - 1] : l.map;
                                r = {
                                    node: c[c.length - 1],
                                    offset: c[c.length - 2] - c[c.length - 3]
                                }
                            }
                        } else i = {
                            node: s[0].measure.map[2],
                            offset: 0
                        };
                        try {
                            var u = Os(i.node, i.offset, r.offset, r.node)
                        } catch (g) {}
                        u && (e.removeAllRanges(), e.addRange(u), a && null == e.anchorNode ? e.addRange(a) : cr && this.startGracePeriod()), this.rememberSelection()
                    }
                }
            },
            startGracePeriod: function() {
                var e = this;
                clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout(function() {
                    e.gracePeriod = !1, e.selectionChanged() && e.cm.operation(function() {
                        e.cm.curOp.selectionChanged = !0
                    })
                }, 20)
            },
            showMultipleSelections: function(e) {
                Ui(this.cm.display.cursorDiv, e.cursors), Ui(this.cm.display.selectionDiv, e.selection)
            },
            rememberSelection: function() {
                var e = window.getSelection();
                this.lastAnchorNode = e.anchorNode, this.lastAnchorOffset = e.anchorOffset, this.lastFocusNode = e.focusNode, this.lastFocusOffset = e.focusOffset
            },
            selectionInEditor: function() {
                var e = window.getSelection();
                if (!e.rangeCount) return !1;
                var t = e.getRangeAt(0).commonAncestorContainer;
                return Fs(this.div, t)
            },
            focus: function() {
                "nocursor" != this.cm.options.readOnly && this.div.focus()
            },
            blur: function() {
                this.div.blur()
            },
            getField: function() {
                return this.div
            },
            supportsTouch: function() {
                return !0
            },
            receivedFocus: function() {
                function e() {
                    t.cm.state.focused && (t.pollSelection(), t.polling.set(t.cm.options.pollInterval, e))
                }
                var t = this;
                this.selectionInEditor() ? this.pollSelection() : At(this.cm, function() {
                    t.cm.curOp.selectionChanged = !0
                }), this.polling.set(this.cm.options.pollInterval, e)
            },
            selectionChanged: function() {
                var e = window.getSelection();
                return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset
            },
            pollSelection: function() {
                if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
                    var e = window.getSelection(),
                        t = this.cm;
                    this.rememberSelection();
                    var o = se(t, e.anchorNode, e.anchorOffset),
                        n = se(t, e.focusNode, e.focusOffset);
                    o && n && At(t, function() {
                        ke(t.doc, pe(o, n), xs), (o.bad || n.bad) && (t.curOp.selectionChanged = !0)
                    })
                }
            },
            pollContent: function() {
                var e = this.cm,
                    t = e.display,
                    o = e.doc.sel.primary(),
                    n = o.from(),
                    i = o.to();
                if (n.line < t.viewFrom || i.line > t.viewTo - 1) return !1;
                var r;
                if (n.line == t.viewFrom || 0 == (r = Dt(e, n.line))) var s = Qn(t.view[0].line),
                    a = t.view[0].node;
                else var s = Qn(t.view[r].line),
                    a = t.view[r - 1].node.nextSibling;
                var l = Dt(e, i.line);
                if (l == t.view.length - 1) var c = t.viewTo - 1,
                    u = t.view[l].node;
                else var c = Qn(t.view[l + 1].line) - 1,
                    u = t.view[l + 1].node.previousSibling;
                for (var g = js(le(e, a, u, s, c)), p = zn(e.doc, Ir(s, 0), Ir(c, Xn(e.doc, c).text.length)); g.length > 1 && p.length > 1;)
                    if (xi(g) == xi(p)) g.pop(), p.pop(), c--;
                    else {
                        if (g[0] != p[0]) break;
                        g.shift(), p.shift(), s++
                    }
                for (var h = 0, d = 0, f = g[0], m = p[0], y = Math.min(f.length, m.length); y > h && f.charCodeAt(h) == m.charCodeAt(h);) ++h;
                for (var v = xi(g), _ = xi(p), b = Math.min(v.length - (1 == g.length ? h : 0), _.length - (1 == p.length ? h : 0)); b > d && v.charCodeAt(v.length - d - 1) == _.charCodeAt(_.length - d - 1);) ++d;
                g[g.length - 1] = v.slice(0, v.length - d), g[0] = g[0].slice(h);
                var C = Ir(s, h),
                    E = Ir(c, p.length ? xi(p).length - d : 0);
                return g.length > 1 || g[0] || Nr(C, E) ? (Bo(e.doc, g, C, E, "+input"), !0) : void 0
            },
            ensurePolled: function() {
                this.forceCompositionEnd()
            },
            reset: function() {
                this.forceCompositionEnd()
            },
            forceCompositionEnd: function() {
                this.composing && !this.composing.handled && (this.applyComposition(this.composing), this.composing.handled = !0, this.div.blur(), this.div.focus())
            },
            applyComposition: function(e) {
                e.data && e.data != e.startData && Bt(this.cm, J)(this.cm, e.data, 0, e.sel)
            },
            setUneditable: function(e) {
                e.setAttribute("contenteditable", "false")
            },
            onKeyPress: function(e) {
                e.preventDefault(), Bt(this.cm, J)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0)
            },
            onContextMenu: Ni,
            resetPosition: Ni,
            needsContentAttribute: !0
        }, ne.prototype), e.inputStyles = {
            textarea: te,
            contenteditable: ne
        }, ce.prototype = {
            primary: function() {
                return this.ranges[this.primIndex]
            },
            equals: function(e) {
                if (e == this) return !0;
                if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length) return !1;
                for (var t = 0; t < this.ranges.length; t++) {
                    var o = this.ranges[t],
                        n = e.ranges[t];
                    if (0 != Nr(o.anchor, n.anchor) || 0 != Nr(o.head, n.head)) return !1
                }
                return !0
            },
            deepCopy: function() {
                for (var e = [], t = 0; t < this.ranges.length; t++) e[t] = new ue(X(this.ranges[t].anchor), X(this.ranges[t].head));
                return new ce(e, this.primIndex)
            },
            somethingSelected: function() {
                for (var e = 0; e < this.ranges.length; e++)
                    if (!this.ranges[e].empty()) return !0;
                return !1
            },
            contains: function(e, t) {
                t || (t = e);
                for (var o = 0; o < this.ranges.length; o++) {
                    var n = this.ranges[o];
                    if (Nr(t, n.from()) >= 0 && Nr(e, n.to()) <= 0) return o
                }
                return -1
            }
        }, ue.prototype = {
            from: function() {
                return q(this.anchor, this.head)
            },
            to: function() {
                return z(this.anchor, this.head)
            },
            empty: function() {
                return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch
            }
        };
        var Lr, Or, Dr, Mr = {
                left: 0,
                right: 0,
                top: 0,
                bottom: 0
            },
            Pr = null,
            Fr = 0,
            Hr = 0,
            Ur = 0,
            Vr = null;
        pr ? Vr = -.53 : cr ? Vr = 15 : mr ? Vr = -.7 : vr && (Vr = -1 / 3);
        var Wr = function(e) {
            var t = e.wheelDeltaX,
                o = e.wheelDeltaY;
            return null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail), null == o && e.detail && e.axis == e.VERTICAL_AXIS ? o = e.detail : null == o && (o = e.wheelDelta), {
                x: t,
                y: o
            }
        };
        e.wheelEventPixels = function(e) {
            var t = Wr(e);
            return t.x *= Vr, t.y *= Vr, t
        };
        var Gr = new ki,
            Kr = null,
            jr = e.changeEnd = function(e) {
                return e.text ? Ir(e.from.line + e.text.length - 1, xi(e.text).length + (1 == e.text.length ? e.from.ch : 0)) : e.to
            };
        e.prototype = {
            constructor: e,
            focus: function() {
                window.focus(), this.display.input.focus()
            },
            setOption: function(e, t) {
                var o = this.options,
                    n = o[e];
                o[e] == t && "mode" != e || (o[e] = t, Xr.hasOwnProperty(e) && Bt(this, Xr[e])(this, t, n))
            },
            getOption: function(e) {
                return this.options[e]
            },
            getDoc: function() {
                return this.doc
            },
            addKeyMap: function(e, t) {
                this.state.keyMaps[t ? "push" : "unshift"](Wo(e))
            },
            removeKeyMap: function(e) {
                for (var t = this.state.keyMaps, o = 0; o < t.length; ++o)
                    if (t[o] == e || t[o].name == e) return t.splice(o, 1), !0
            },
            addOverlay: xt(function(t, o) {
                var n = t.token ? t : e.getMode(this.options, t);
                if (n.startState) throw new Error("Overlays may not be stateful.");
                this.state.overlays.push({
                    mode: n,
                    modeSpec: t,
                    opaque: o && o.opaque
                }), this.state.modeGen++, Rt(this)
            }),
            removeOverlay: xt(function(e) {
                for (var t = this.state.overlays, o = 0; o < t.length; ++o) {
                    var n = t[o].modeSpec;
                    if (n == e || "string" == typeof e && n.name == e) return t.splice(o, 1), this.state.modeGen++, void Rt(this)
                }
            }),
            indentLine: xt(function(e, t, o) {
                "string" != typeof t && "number" != typeof t && (t = null == t ? this.options.smartIndent ? "smart" : "prev" : t ? "add" : "subtract"), me(this.doc, e) && Do(this, e, t, o)
            }),
            indentSelection: xt(function(e) {
                for (var t = this.doc.sel.ranges, o = -1, n = 0; n < t.length; n++) {
                    var i = t[n];
                    if (i.empty()) i.head.line > o && (Do(this, i.head.line, e, !0), o = i.head.line, n == this.doc.sel.primIndex && Lo(this));
                    else {
                        var r = i.from(),
                            s = i.to(),
                            a = Math.max(o, r.line);
                        o = Math.min(this.lastLine(), s.line - (s.ch ? 0 : 1)) + 1;
                        for (var l = a; o > l; ++l) Do(this, l, e);
                        var c = this.doc.sel.ranges;
                        0 == r.ch && t.length == c.length && c[n].from().ch > 0 && Ce(this.doc, n, new ue(r, c[n].to()), xs)
                    }
                }
            }),
            getTokenAt: function(e, t) {
                return xn(this, e, t)
            },
            getLineTokens: function(e, t) {
                return xn(this, Ir(e), t, !0)
            },
            getTokenTypeAt: function(e) {
                e = de(this.doc, e);
                var t, o = Nn(this, Xn(this.doc, e.line)),
                    n = 0,
                    i = (o.length - 1) / 2,
                    r = e.ch;
                if (0 == r) t = o[2];
                else
                    for (;;) {
                        var s = n + i >> 1;
                        if ((s ? o[2 * s - 1] : 0) >= r) i = s;
                        else {
                            if (!(o[2 * s + 1] < r)) {
                                t = o[2 * s + 2];
                                break
                            }
                            n = s + 1
                        }
                    }
                var a = t ? t.indexOf("cm-overlay ") : -1;
                return 0 > a ? t : 0 == a ? null : t.slice(0, a - 1)
            },
            getModeAt: function(t) {
                var o = this.doc.mode;
                return o.innerMode ? e.innerMode(o, this.getTokenAt(t).state).mode : o
            },
            getHelper: function(e, t) {
                return this.getHelpers(e, t)[0]
            },
            getHelpers: function(e, t) {
                var o = [];
                if (!Zr.hasOwnProperty(t)) return o;
                var n = Zr[t],
                    i = this.getModeAt(e);
                if ("string" == typeof i[t]) n[i[t]] && o.push(n[i[t]]);
                else if (i[t])
                    for (var r = 0; r < i[t].length; r++) {
                        var s = n[i[t][r]];
                        s && o.push(s)
                    } else i.helperType && n[i.helperType] ? o.push(n[i.helperType]) : n[i.name] && o.push(n[i.name]);
                for (var r = 0; r < n._global.length; r++) {
                    var a = n._global[r];
                    a.pred(i, this) && -1 == wi(o, a.val) && o.push(a.val)
                }
                return o
            },
            getStateAfter: function(e, t) {
                var o = this.doc;
                return e = he(o, null == e ? o.first + o.size - 1 : e), He(this, e + 1, t)
            },
            cursorCoords: function(e, t) {
                var o, n = this.doc.sel.primary();
                return o = null == e ? n.head : "object" == typeof e ? de(this.doc, e) : e ? n.from() : n.to(), ut(this, o, t || "page")
            },
            charCoords: function(e, t) {
                return ct(this, de(this.doc, e), t || "page")
            },
            coordsChar: function(e, t) {
                return e = lt(this, e, t || "page"), ht(this, e.left, e.top)
            },
            lineAtHeight: function(e, t) {
                return e = lt(this, {
                    top: e,
                    left: 0
                }, t || "page").top, Jn(this.doc, e + this.display.viewOffset)
            },
            heightAtLine: function(e, t) {
                var o, n = !1;
                if ("number" == typeof e) {
                    var i = this.doc.first + this.doc.size - 1;
                    e < this.doc.first ? e = this.doc.first : e > i && (e = i, n = !0), o = Xn(this.doc, e)
                } else o = e;
                return at(this, o, {
                    top: 0,
                    left: 0
                }, t || "page").top + (n ? this.doc.height - Zn(o) : 0)
            },
            defaultTextHeight: function() {
                return ft(this.display)
            },
            defaultCharWidth: function() {
                return mt(this.display)
            },
            setGutterMarker: xt(function(e, t, o) {
                return Mo(this.doc, e, "gutter", function(e) {
                    var n = e.gutterMarkers || (e.gutterMarkers = {});
                    return n[t] = o, !o && Mi(n) && (e.gutterMarkers = null), !0
                })
            }),
            clearGutter: xt(function(e) {
                var t = this,
                    o = t.doc,
                    n = o.first;
                o.iter(function(o) {
                    o.gutterMarkers && o.gutterMarkers[e] && (o.gutterMarkers[e] = null, Lt(t, n, "gutter"), Mi(o.gutterMarkers) && (o.gutterMarkers = null)), ++n
                })
            }),
            lineInfo: function(e) {
                if ("number" == typeof e) {
                    if (!me(this.doc, e)) return null;
                    var t = e;
                    if (e = Xn(this.doc, e), !e) return null
                } else {
                    var t = Qn(e);
                    if (null == t) return null
                }
                return {
                    line: t,
                    handle: e,
                    text: e.text,
                    gutterMarkers: e.gutterMarkers,
                    textClass: e.textClass,
                    bgClass: e.bgClass,
                    wrapClass: e.wrapClass,
                    widgets: e.widgets
                }
            },
            getViewport: function() {
                return {
                    from: this.display.viewFrom,
                    to: this.display.viewTo
                }
            },
            addWidget: function(e, t, o, n, i) {
                var r = this.display;
                e = ut(this, de(this.doc, e));
                var s = e.bottom,
                    a = e.left;
                if (t.style.position = "absolute", t.setAttribute("cm-ignore-events", "true"), this.display.input.setUneditable(t), r.sizer.appendChild(t), "over" == n) s = e.top;
                else if ("above" == n || "near" == n) {
                    var l = Math.max(r.wrapper.clientHeight, this.doc.height),
                        c = Math.max(r.sizer.clientWidth, r.lineSpace.clientWidth);
                    ("above" == n || e.bottom + t.offsetHeight > l) && e.top > t.offsetHeight ? s = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= l && (s = e.bottom), a + t.offsetWidth > c && (a = c - t.offsetWidth)
                }
                t.style.top = s + "px", t.style.left = t.style.right = "", "right" == i ? (a = r.sizer.clientWidth - t.offsetWidth, t.style.right = "0px") : ("left" == i ? a = 0 : "middle" == i && (a = (r.sizer.clientWidth - t.offsetWidth) / 2), t.style.left = a + "px"), o && Io(this, a, s, a + t.offsetWidth, s + t.offsetHeight)
            },
            triggerOnKeyDown: xt(so),
            triggerOnKeyPress: xt(co),
            triggerOnKeyUp: lo,
            execCommand: function(e) {
                return os.hasOwnProperty(e) ? os[e](this) : void 0
            },
            findPosH: function(e, t, o, n) {
                var i = 1;
                0 > t && (i = -1, t = -t);
                for (var r = 0, s = de(this.doc, e); t > r && (s = Fo(this.doc, s, i, o, n), !s.hitSide); ++r);
                return s
            },
            moveH: xt(function(e, t) {
                var o = this;
                o.extendSelectionsBy(function(n) {
                    return o.display.shift || o.doc.extend || n.empty() ? Fo(o.doc, n.head, e, t, o.options.rtlMoveVisually) : 0 > e ? n.from() : n.to()
                }, Is)
            }),
            deleteH: xt(function(e, t) {
                var o = this.doc.sel,
                    n = this.doc;
                o.somethingSelected() ? n.replaceSelection("", null, "+delete") : Po(this, function(o) {
                    var i = Fo(n, o.head, e, t, !1);
                    return 0 > e ? {
                        from: i,
                        to: o.head
                    } : {
                        from: o.head,
                        to: i
                    }
                })
            }),
            findPosV: function(e, t, o, n) {
                var i = 1,
                    r = n;
                0 > t && (i = -1, t = -t);
                for (var s = 0, a = de(this.doc, e); t > s; ++s) {
                    var l = ut(this, a, "div");
                    if (null == r ? r = l.left : l.left = r, a = Ho(this, l, i, o), a.hitSide) break
                }
                return a
            },
            moveV: xt(function(e, t) {
                var o = this,
                    n = this.doc,
                    i = [],
                    r = !o.display.shift && !n.extend && n.sel.somethingSelected();
                if (n.extendSelectionsBy(function(s) {
                        if (r) return 0 > e ? s.from() : s.to();
                        var a = ut(o, s.head, "div");
                        null != s.goalColumn && (a.left = s.goalColumn), i.push(a.left);
                        var l = Ho(o, a, e, t);
                        return "page" == t && s == n.sel.primary() && Ro(o, null, ct(o, l, "div").top - a.top), l
                    }, Is), i.length)
                    for (var s = 0; s < n.sel.ranges.length; s++) n.sel.ranges[s].goalColumn = i[s]
            }),
            findWordAt: function(e) {
                var t = this.doc,
                    o = Xn(t, e.line).text,
                    n = e.ch,
                    i = e.ch;
                if (o) {
                    var r = this.getHelper(e, "wordChars");
                    (e.xRel < 0 || i == o.length) && n ? --n : ++i;
                    for (var s = o.charAt(n), a = Di(s, r) ? function(e) {
                            return Di(e, r)
                        } : /\s/.test(s) ? function(e) {
                            return /\s/.test(e)
                        } : function(e) {
                            return !/\s/.test(e) && !Di(e)
                        }; n > 0 && a(o.charAt(n - 1));) --n;
                    for (; i < o.length && a(o.charAt(i));) ++i
                }
                return new ue(Ir(e.line, n), Ir(e.line, i))
            },
            toggleOverwrite: function(e) {
                null != e && e == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? Ws(this.display.cursorDiv, "CodeMirror-overwrite") : Vs(this.display.cursorDiv, "CodeMirror-overwrite"), Ts(this, "overwriteToggle", this, this.state.overwrite))
            },
            hasFocus: function() {
                return this.display.input.getField() == Vi()
            },
            scrollTo: xt(function(e, t) {
                null == e && null == t || Oo(this), null != e && (this.curOp.scrollLeft = e), null != t && (this.curOp.scrollTop = t)
            }),
            getScrollInfo: function() {
                var e = this.display.scroller;
                return {
                    left: e.scrollLeft,
                    top: e.scrollTop,
                    height: e.scrollHeight - Ge(this) - this.display.barHeight,
                    width: e.scrollWidth - Ge(this) - this.display.barWidth,
                    clientHeight: je(this),
                    clientWidth: Ke(this)
                }
            },
            scrollIntoView: xt(function(e, t) {
                if (null == e ? (e = {
                        from: this.doc.sel.primary().head,
                        to: null
                    }, null == t && (t = this.options.cursorScrollMargin)) : "number" == typeof e ? e = {
                        from: Ir(e, 0),
                        to: null
                    } : null == e.from && (e = {
                        from: e,
                        to: null
                    }), e.to || (e.to = e.from), e.margin = t || 0, null != e.from.line) Oo(this), this.curOp.scrollToPos = e;
                else {
                    var o = No(this, Math.min(e.from.left, e.to.left), Math.min(e.from.top, e.to.top) - e.margin, Math.max(e.from.right, e.to.right), Math.max(e.from.bottom, e.to.bottom) + e.margin);
                    this.scrollTo(o.scrollLeft, o.scrollTop)
                }
            }),
            setSize: xt(function(e, t) {
                function o(e) {
                    return "number" == typeof e || /^\d+$/.test(String(e)) ? e + "px" : e
                }
                var n = this;
                null != e && (n.display.wrapper.style.width = o(e)), null != t && (n.display.wrapper.style.height = o(t)), n.options.lineWrapping && nt(this);
                var i = n.display.viewFrom;
                n.doc.iter(i, n.display.viewTo, function(e) {
                    if (e.widgets)
                        for (var t = 0; t < e.widgets.length; t++)
                            if (e.widgets[t].noHScroll) {
                                Lt(n, i, "widget");
                                break
                            }++i
                }), n.curOp.forceUpdate = !0, Ts(n, "refresh", this)
            }),
            operation: function(e) {
                return At(this, e)
            },
            refresh: xt(function() {
                var e = this.display.cachedTextHeight;
                Rt(this), this.curOp.forceUpdate = !0, it(this), this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop), u(this), (null == e || Math.abs(e - ft(this.display)) > .5) && s(this), Ts(this, "refresh", this)
            }),
            swapDoc: xt(function(e) {
                var t = this.doc;
                return t.cm = null, Yn(this, e), it(this), this.display.input.reset(), this.scrollTo(e.scrollLeft, e.scrollTop), this.curOp.forceScroll = !0, _i(this, "swapDoc", this, t), t
            }),
            getInputField: function() {
                return this.display.input.getField()
            },
            getWrapperElement: function() {
                return this.display.wrapper
            },
            getScrollerElement: function() {
                return this.display.scroller
            },
            getGutterElement: function() {
                return this.display.gutters
            }
        }, Ti(e);
        var Yr = e.defaults = {},
            Xr = e.optionHandlers = {},
            zr = e.Init = {
                toString: function() {
                    return "CodeMirror.Init"
                }
            };
        Uo("value", "", function(e, t) {
            e.setValue(t)
        }, !0), Uo("mode", null, function(e, t) {
            e.doc.modeOption = t, o(e)
        }, !0), Uo("indentUnit", 2, o, !0), Uo("indentWithTabs", !1), Uo("smartIndent", !0), Uo("tabSize", 4, function(e) {
            n(e), it(e), Rt(e)
        }, !0), Uo("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(t, o, n) {
            t.state.specialChars = new RegExp(o.source + (o.test("	") ? "" : "|	"), "g"), n != e.Init && t.refresh()
        }), Uo("specialCharPlaceholder", Dn, function(e) {
            e.refresh()
        }, !0), Uo("electricChars", !0), Uo("inputStyle", Er ? "contenteditable" : "textarea", function() {
            throw new Error("inputStyle can not (yet) be changed in a running editor")
        }, !0), Uo("rtlMoveVisually", !Tr), Uo("wholeLineUpdateBefore", !0), Uo("theme", "default", function(e) {
            a(e), l(e)
        }, !0), Uo("keyMap", "default", function(t, o, n) {
            var i = Wo(o),
                r = n != e.Init && Wo(n);
            r && r.detach && r.detach(t, i), i.attach && i.attach(t, r || null)
        }), Uo("extraKeys", null), Uo("lineWrapping", !1, i, !0), Uo("gutters", [], function(e) {
            h(e.options), l(e)
        }, !0), Uo("fixedGutter", !0, function(e, t) {
            e.display.gutters.style.left = t ? T(e.display) + "px" : "0", e.refresh()
        }, !0), Uo("coverGutterNextToScrollbar", !1, function(e) {
            v(e)
        }, !0), Uo("scrollbarStyle", "native", function(e) {
            y(e), v(e), e.display.scrollbars.setScrollTop(e.doc.scrollTop), e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)
        }, !0), Uo("lineNumbers", !1, function(e) {
            h(e.options), l(e)
        }, !0), Uo("firstLineNumber", 1, l, !0), Uo("lineNumberFormatter", function(e) {
            return e
        }, l, !0), Uo("showCursorWhenSelecting", !1, Ne, !0), Uo("resetSelectionOnContextMenu", !0), Uo("lineWiseCopyCut", !0), Uo("readOnly", !1, function(e, t) {
            "nocursor" == t ? (po(e), e.display.input.blur(), e.display.disabled = !0) : (e.display.disabled = !1, t || e.display.input.reset())
        }), Uo("disableInput", !1, function(e, t) {
            t || e.display.input.reset()
        }, !0), Uo("dragDrop", !0, Ut), Uo("cursorBlinkRate", 530), Uo("cursorScrollMargin", 0), Uo("cursorHeight", 1, Ne, !0), Uo("singleCursorHeightPerLine", !0, Ne, !0), Uo("workTime", 100), Uo("workDelay", 100), Uo("flattenSpans", !0, n, !0), Uo("addModeClass", !1, n, !0), Uo("pollInterval", 100), Uo("undoDepth", 200, function(e, t) {
            e.doc.history.undoDepth = t
        }), Uo("historyEventDelay", 1250), Uo("viewportMargin", 10, function(e) {
            e.refresh()
        }, !0), Uo("maxHighlightLength", 1e4, n, !0), Uo("moveInputWithCursor", !0, function(e, t) {
            t || e.display.input.resetPosition()
        }), Uo("tabindex", null, function(e, t) {
            e.display.input.getField().tabIndex = t || ""
        }), Uo("autofocus", null);
        var qr = e.modes = {},
            $r = e.mimeModes = {};
        e.defineMode = function(t, o) {
            e.defaults.mode || "null" == t || (e.defaults.mode = t), arguments.length > 2 && (o.dependencies = Array.prototype.slice.call(arguments, 2)), qr[t] = o
        }, e.defineMIME = function(e, t) {
            $r[e] = t
        }, e.resolveMode = function(t) {
            if ("string" == typeof t && $r.hasOwnProperty(t)) t = $r[t];
            else if (t && "string" == typeof t.name && $r.hasOwnProperty(t.name)) {
                var o = $r[t.name];
                "string" == typeof o && (o = {
                    name: o
                }), t = Ri(o, t), t.name = o.name
            } else if ("string" == typeof t && /^[\w\-]+\/[\w\-]+\+xml$/.test(t)) return e.resolveMode("application/xml");
            return "string" == typeof t ? {
                name: t
            } : t || {
                name: "null"
            }
        }, e.getMode = function(t, o) {
            var o = e.resolveMode(o),
                n = qr[o.name];
            if (!n) return e.getMode(t, "text/plain");
            var i = n(t, o);
            if (Qr.hasOwnProperty(o.name)) {
                var r = Qr[o.name];
                for (var s in r) r.hasOwnProperty(s) && (i.hasOwnProperty(s) && (i["_" + s] = i[s]), i[s] = r[s])
            }
            if (i.name = o.name, o.helperType && (i.helperType = o.helperType), o.modeProps)
                for (var s in o.modeProps) i[s] = o.modeProps[s];
            return i
        }, e.defineMode("null", function() {
            return {
                token: function(e) {
                    e.skipToEnd()
                }
            }
        }), e.defineMIME("text/plain", "null");
        var Qr = e.modeExtensions = {};
        e.extendMode = function(e, t) {
            var o = Qr.hasOwnProperty(e) ? Qr[e] : Qr[e] = {};
            Li(t, o)
        }, e.defineExtension = function(t, o) {
            e.prototype[t] = o
        }, e.defineDocExtension = function(e, t) {
            ms.prototype[e] = t;
        }, e.defineOption = Uo;
        var Jr = [];
        e.defineInitHook = function(e) {
            Jr.push(e)
        };
        var Zr = e.helpers = {};
        e.registerHelper = function(t, o, n) {
            Zr.hasOwnProperty(t) || (Zr[t] = e[t] = {
                _global: []
            }), Zr[t][o] = n
        }, e.registerGlobalHelper = function(t, o, n, i) {
            e.registerHelper(t, o, i), Zr[t]._global.push({
                pred: n,
                val: i
            })
        };
        var es = e.copyState = function(e, t) {
                if (t === !0) return t;
                if (e.copyState) return e.copyState(t);
                var o = {};
                for (var n in t) {
                    var i = t[n];
                    i instanceof Array && (i = i.concat([])), o[n] = i
                }
                return o
            },
            ts = e.startState = function(e, t, o) {
                return e.startState ? e.startState(t, o) : !0
            };
        e.innerMode = function(e, t) {
            for (; e.innerMode;) {
                var o = e.innerMode(t);
                if (!o || o.mode == e) break;
                t = o.state, e = o.mode
            }
            return o || {
                mode: e,
                state: t
            }
        };
        var os = e.commands = {
                selectAll: function(e) {
                    e.setSelection(Ir(e.firstLine(), 0), Ir(e.lastLine()), xs)
                },
                singleSelection: function(e) {
                    e.setSelection(e.getCursor("anchor"), e.getCursor("head"), xs)
                },
                killLine: function(e) {
                    Po(e, function(t) {
                        if (t.empty()) {
                            var o = Xn(e.doc, t.head.line).text.length;
                            return t.head.ch == o && t.head.line < e.lastLine() ? {
                                from: t.head,
                                to: Ir(t.head.line + 1, 0)
                            } : {
                                from: t.head,
                                to: Ir(t.head.line, o)
                            }
                        }
                        return {
                            from: t.from(),
                            to: t.to()
                        }
                    })
                },
                deleteLine: function(e) {
                    Po(e, function(t) {
                        return {
                            from: Ir(t.from().line, 0),
                            to: de(e.doc, Ir(t.to().line + 1, 0))
                        }
                    })
                },
                delLineLeft: function(e) {
                    Po(e, function(e) {
                        return {
                            from: Ir(e.from().line, 0),
                            to: e.from()
                        }
                    })
                },
                delWrappedLineLeft: function(e) {
                    Po(e, function(t) {
                        var o = e.charCoords(t.head, "div").top + 5,
                            n = e.coordsChar({
                                left: 0,
                                top: o
                            }, "div");
                        return {
                            from: n,
                            to: t.from()
                        }
                    })
                },
                delWrappedLineRight: function(e) {
                    Po(e, function(t) {
                        var o = e.charCoords(t.head, "div").top + 5,
                            n = e.coordsChar({
                                left: e.display.lineDiv.offsetWidth + 100,
                                top: o
                            }, "div");
                        return {
                            from: t.from(),
                            to: n
                        }
                    })
                },
                undo: function(e) {
                    e.undo()
                },
                redo: function(e) {
                    e.redo()
                },
                undoSelection: function(e) {
                    e.undoSelection()
                },
                redoSelection: function(e) {
                    e.redoSelection()
                },
                goDocStart: function(e) {
                    e.extendSelection(Ir(e.firstLine(), 0))
                },
                goDocEnd: function(e) {
                    e.extendSelection(Ir(e.lastLine()))
                },
                goLineStart: function(e) {
                    e.extendSelectionsBy(function(t) {
                        return tr(e, t.head.line)
                    }, {
                        origin: "+move",
                        bias: 1
                    })
                },
                goLineStartSmart: function(e) {
                    e.extendSelectionsBy(function(t) {
                        return nr(e, t.head)
                    }, {
                        origin: "+move",
                        bias: 1
                    })
                },
                goLineEnd: function(e) {
                    e.extendSelectionsBy(function(t) {
                        return or(e, t.head.line)
                    }, {
                        origin: "+move",
                        bias: -1
                    })
                },
                goLineRight: function(e) {
                    e.extendSelectionsBy(function(t) {
                        var o = e.charCoords(t.head, "div").top + 5;
                        return e.coordsChar({
                            left: e.display.lineDiv.offsetWidth + 100,
                            top: o
                        }, "div")
                    }, Is)
                },
                goLineLeft: function(e) {
                    e.extendSelectionsBy(function(t) {
                        var o = e.charCoords(t.head, "div").top + 5;
                        return e.coordsChar({
                            left: 0,
                            top: o
                        }, "div")
                    }, Is)
                },
                goLineLeftSmart: function(e) {
                    e.extendSelectionsBy(function(t) {
                        var o = e.charCoords(t.head, "div").top + 5,
                            n = e.coordsChar({
                                left: 0,
                                top: o
                            }, "div");
                        return n.ch < e.getLine(n.line).search(/\S/) ? nr(e, t.head) : n
                    }, Is)
                },
                goLineUp: function(e) {
                    e.moveV(-1, "line")
                },
                goLineDown: function(e) {
                    e.moveV(1, "line")
                },
                goPageUp: function(e) {
                    e.moveV(-1, "page")
                },
                goPageDown: function(e) {
                    e.moveV(1, "page")
                },
                goCharLeft: function(e) {
                    e.moveH(-1, "char")
                },
                goCharRight: function(e) {
                    e.moveH(1, "char")
                },
                goColumnLeft: function(e) {
                    e.moveH(-1, "column")
                },
                goColumnRight: function(e) {
                    e.moveH(1, "column")
                },
                goWordLeft: function(e) {
                    e.moveH(-1, "word")
                },
                goGroupRight: function(e) {
                    e.moveH(1, "group")
                },
                goGroupLeft: function(e) {
                    e.moveH(-1, "group")
                },
                goWordRight: function(e) {
                    e.moveH(1, "word")
                },
                delCharBefore: function(e) {
                    e.deleteH(-1, "char")
                },
                delCharAfter: function(e) {
                    e.deleteH(1, "char")
                },
                delWordBefore: function(e) {
                    e.deleteH(-1, "word")
                },
                delWordAfter: function(e) {
                    e.deleteH(1, "word")
                },
                delGroupBefore: function(e) {
                    e.deleteH(-1, "group")
                },
                delGroupAfter: function(e) {
                    e.deleteH(1, "group")
                },
                indentAuto: function(e) {
                    e.indentSelection("smart")
                },
                indentMore: function(e) {
                    e.indentSelection("add")
                },
                indentLess: function(e) {
                    e.indentSelection("subtract")
                },
                insertTab: function(e) {
                    e.replaceSelection("	")
                },
                insertSoftTab: function(e) {
                    for (var t = [], o = e.listSelections(), n = e.options.tabSize, i = 0; i < o.length; i++) {
                        var r = o[i].from(),
                            s = Ns(e.getLine(r.line), r.ch, n);
                        t.push(new Array(n - s % n + 1).join(" "))
                    }
                    e.replaceSelections(t)
                },
                defaultTab: function(e) {
                    e.somethingSelected() ? e.indentSelection("add") : e.execCommand("insertTab")
                },
                transposeChars: function(e) {
                    At(e, function() {
                        for (var t = e.listSelections(), o = [], n = 0; n < t.length; n++) {
                            var i = t[n].head,
                                r = Xn(e.doc, i.line).text;
                            if (r)
                                if (i.ch == r.length && (i = new Ir(i.line, i.ch - 1)), i.ch > 0) i = new Ir(i.line, i.ch + 1), e.replaceRange(r.charAt(i.ch - 1) + r.charAt(i.ch - 2), Ir(i.line, i.ch - 2), i, "+transpose");
                                else if (i.line > e.doc.first) {
                                var s = Xn(e.doc, i.line - 1).text;
                                s && e.replaceRange(r.charAt(0) + "\n" + s.charAt(s.length - 1), Ir(i.line - 1, s.length - 1), Ir(i.line, 1), "+transpose")
                            }
                            o.push(new ue(i, i))
                        }
                        e.setSelections(o)
                    })
                },
                newlineAndIndent: function(e) {
                    At(e, function() {
                        for (var t = e.listSelections().length, o = 0; t > o; o++) {
                            var n = e.listSelections()[o];
                            e.replaceRange("\n", n.anchor, n.head, "+input"), e.indentLine(n.from().line + 1, null, !0), Lo(e)
                        }
                    })
                },
                toggleOverwrite: function(e) {
                    e.toggleOverwrite()
                }
            },
            ns = e.keyMap = {};
        ns.basic = {
            Left: "goCharLeft",
            Right: "goCharRight",
            Up: "goLineUp",
            Down: "goLineDown",
            End: "goLineEnd",
            Home: "goLineStartSmart",
            PageUp: "goPageUp",
            PageDown: "goPageDown",
            Delete: "delCharAfter",
            Backspace: "delCharBefore",
            "Shift-Backspace": "delCharBefore",
            Tab: "defaultTab",
            "Shift-Tab": "indentAuto",
            Enter: "newlineAndIndent",
            Insert: "toggleOverwrite",
            Esc: "singleSelection"
        }, ns.pcDefault = {
            "Ctrl-A": "selectAll",
            "Ctrl-D": "deleteLine",
            "Ctrl-Z": "undo",
            "Shift-Ctrl-Z": "redo",
            "Ctrl-Y": "redo",
            "Ctrl-Home": "goDocStart",
            "Ctrl-End": "goDocEnd",
            "Ctrl-Up": "goLineUp",
            "Ctrl-Down": "goLineDown",
            "Ctrl-Left": "goGroupLeft",
            "Ctrl-Right": "goGroupRight",
            "Alt-Left": "goLineStart",
            "Alt-Right": "goLineEnd",
            "Ctrl-Backspace": "delGroupBefore",
            "Ctrl-Delete": "delGroupAfter",
            "Ctrl-S": "save",
            "Ctrl-F": "find",
            "Ctrl-G": "findNext",
            "Shift-Ctrl-G": "findPrev",
            "Shift-Ctrl-F": "replace",
            "Shift-Ctrl-R": "replaceAll",
            "Ctrl-[": "indentLess",
            "Ctrl-]": "indentMore",
            "Ctrl-U": "undoSelection",
            "Shift-Ctrl-U": "redoSelection",
            "Alt-U": "redoSelection",
            fallthrough: "basic"
        }, ns.emacsy = {
            "Ctrl-F": "goCharRight",
            "Ctrl-B": "goCharLeft",
            "Ctrl-P": "goLineUp",
            "Ctrl-N": "goLineDown",
            "Alt-F": "goWordRight",
            "Alt-B": "goWordLeft",
            "Ctrl-A": "goLineStart",
            "Ctrl-E": "goLineEnd",
            "Ctrl-V": "goPageDown",
            "Shift-Ctrl-V": "goPageUp",
            "Ctrl-D": "delCharAfter",
            "Ctrl-H": "delCharBefore",
            "Alt-D": "delWordAfter",
            "Alt-Backspace": "delWordBefore",
            "Ctrl-K": "killLine",
            "Ctrl-T": "transposeChars"
        }, ns.macDefault = {
            "Cmd-A": "selectAll",
            "Cmd-D": "deleteLine",
            "Cmd-Z": "undo",
            "Shift-Cmd-Z": "redo",
            "Cmd-Y": "redo",
            "Cmd-Home": "goDocStart",
            "Cmd-Up": "goDocStart",
            "Cmd-End": "goDocEnd",
            "Cmd-Down": "goDocEnd",
            "Alt-Left": "goGroupLeft",
            "Alt-Right": "goGroupRight",
            "Cmd-Left": "goLineLeft",
            "Cmd-Right": "goLineRight",
            "Alt-Backspace": "delGroupBefore",
            "Ctrl-Alt-Backspace": "delGroupAfter",
            "Alt-Delete": "delGroupAfter",
            "Cmd-S": "save",
            "Cmd-F": "find",
            "Cmd-G": "findNext",
            "Shift-Cmd-G": "findPrev",
            "Cmd-Alt-F": "replace",
            "Shift-Cmd-Alt-F": "replaceAll",
            "Cmd-[": "indentLess",
            "Cmd-]": "indentMore",
            "Cmd-Backspace": "delWrappedLineLeft",
            "Cmd-Delete": "delWrappedLineRight",
            "Cmd-U": "undoSelection",
            "Shift-Cmd-U": "redoSelection",
            "Ctrl-Up": "goDocStart",
            "Ctrl-Down": "goDocEnd",
            fallthrough: ["basic", "emacsy"]
        }, ns["default"] = Sr ? ns.macDefault : ns.pcDefault, e.normalizeKeyMap = function(e) {
            var t = {};
            for (var o in e)
                if (e.hasOwnProperty(o)) {
                    var n = e[o];
                    if (/^(name|fallthrough|(de|at)tach)$/.test(o)) continue;
                    if ("..." == n) {
                        delete e[o];
                        continue
                    }
                    for (var i = Ii(o.split(" "), Vo), r = 0; r < i.length; r++) {
                        var s, a;
                        r == i.length - 1 ? (a = o, s = n) : (a = i.slice(0, r + 1).join(" "), s = "...");
                        var l = t[a];
                        if (l) {
                            if (l != s) throw new Error("Inconsistent bindings for " + a)
                        } else t[a] = s
                    }
                    delete e[o]
                }
            for (var c in t) e[c] = t[c];
            return e
        };
        var is = e.lookupKey = function(e, t, o, n) {
                t = Wo(t);
                var i = t.call ? t.call(e, n) : t[e];
                if (i === !1) return "nothing";
                if ("..." === i) return "multi";
                if (null != i && o(i)) return "handled";
                if (t.fallthrough) {
                    if ("[object Array]" != Object.prototype.toString.call(t.fallthrough)) return is(e, t.fallthrough, o, n);
                    for (var r = 0; r < t.fallthrough.length; r++) {
                        var s = is(e, t.fallthrough[r], o, n);
                        if (s) return s
                    }
                }
            },
            rs = e.isModifierKey = function(e) {
                var t = "string" == typeof e ? e : qs[e.keyCode];
                return "Ctrl" == t || "Alt" == t || "Shift" == t || "Mod" == t
            },
            ss = e.keyName = function(e, t) {
                if (yr && 34 == e.keyCode && e["char"]) return !1;
                var o = qs[e.keyCode],
                    n = o;
                return null == n || e.altGraphKey ? !1 : (e.altKey && "Alt" != o && (n = "Alt-" + n), (Ar ? e.metaKey : e.ctrlKey) && "Ctrl" != o && (n = "Ctrl-" + n), (Ar ? e.ctrlKey : e.metaKey) && "Cmd" != o && (n = "Cmd-" + n), !t && e.shiftKey && "Shift" != o && (n = "Shift-" + n), n)
            };
        e.fromTextArea = function(t, o) {
            function n() {
                t.value = c.getValue()
            }
            if (o = o ? Li(o) : {}, o.value = t.value, !o.tabindex && t.tabIndex && (o.tabindex = t.tabIndex), !o.placeholder && t.placeholder && (o.placeholder = t.placeholder), null == o.autofocus) {
                var i = Vi();
                o.autofocus = i == t || null != t.getAttribute("autofocus") && i == document.body
            }
            if (t.form && (Es(t.form, "submit", n), !o.leaveSubmitMethodAlone)) {
                var r = t.form,
                    s = r.submit;
                try {
                    var a = r.submit = function() {
                        n(), r.submit = s, r.submit(), r.submit = a
                    }
                } catch (l) {}
            }
            o.finishInit = function(e) {
                e.save = n, e.getTextArea = function() {
                    return t
                }, e.toTextArea = function() {
                    e.toTextArea = isNaN, n(), t.parentNode.removeChild(e.getWrapperElement()), t.style.display = "", t.form && (Ss(t.form, "submit", n), "function" == typeof t.form.submit && (t.form.submit = s))
                }
            }, t.style.display = "none";
            var c = e(function(e) {
                t.parentNode.insertBefore(e, t.nextSibling)
            }, o);
            return c
        };
        var as = e.StringStream = function(e, t) {
            this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, this.lineStart = 0
        };
        as.prototype = {
            eol: function() {
                return this.pos >= this.string.length
            },
            sol: function() {
                return this.pos == this.lineStart
            },
            peek: function() {
                return this.string.charAt(this.pos) || void 0
            },
            next: function() {
                return this.pos < this.string.length ? this.string.charAt(this.pos++) : void 0
            },
            eat: function(e) {
                var t = this.string.charAt(this.pos);
                if ("string" == typeof e) var o = t == e;
                else var o = t && (e.test ? e.test(t) : e(t));
                return o ? (++this.pos, t) : void 0
            },
            eatWhile: function(e) {
                for (var t = this.pos; this.eat(e););
                return this.pos > t
            },
            eatSpace: function() {
                for (var e = this.pos;
                    /[\s\u00a0]/.test(this.string.charAt(this.pos));) ++this.pos;
                return this.pos > e
            },
            skipToEnd: function() {
                this.pos = this.string.length
            },
            skipTo: function(e) {
                var t = this.string.indexOf(e, this.pos);
                return t > -1 ? (this.pos = t, !0) : void 0
            },
            backUp: function(e) {
                this.pos -= e
            },
            column: function() {
                return this.lastColumnPos < this.start && (this.lastColumnValue = Ns(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? Ns(this.string, this.lineStart, this.tabSize) : 0)
            },
            indentation: function() {
                return Ns(this.string, null, this.tabSize) - (this.lineStart ? Ns(this.string, this.lineStart, this.tabSize) : 0)
            },
            match: function(e, t, o) {
                if ("string" != typeof e) {
                    var n = this.string.slice(this.pos).match(e);
                    return n && n.index > 0 ? null : (n && t !== !1 && (this.pos += n[0].length), n)
                }
                var i = function(e) {
                        return o ? e.toLowerCase() : e
                    },
                    r = this.string.substr(this.pos, e.length);
                return i(r) == i(e) ? (t !== !1 && (this.pos += e.length), !0) : void 0
            },
            current: function() {
                return this.string.slice(this.start, this.pos)
            },
            hideFirstChars: function(e, t) {
                this.lineStart += e;
                try {
                    return t()
                } finally {
                    this.lineStart -= e
                }
            }
        };
        var ls = 0,
            cs = e.TextMarker = function(e, t) {
                this.lines = [], this.type = t, this.doc = e, this.id = ++ls
            };
        Ti(cs), cs.prototype.clear = function() {
            if (!this.explicitlyCleared) {
                var e = this.doc.cm,
                    t = e && !e.curOp;
                if (t && yt(e), Si(this, "clear")) {
                    var o = this.find();
                    o && _i(this, "clear", o.from, o.to)
                }
                for (var n = null, i = null, r = 0; r < this.lines.length; ++r) {
                    var s = this.lines[r],
                        a = qo(s.markedSpans, this);
                    e && !this.collapsed ? Lt(e, Qn(s), "text") : e && (null != a.to && (i = Qn(s)), null != a.from && (n = Qn(s))), s.markedSpans = $o(s.markedSpans, a), null == a.from && this.collapsed && !vn(this.doc, s) && e && $n(s, ft(e.display))
                }
                if (e && this.collapsed && !e.options.lineWrapping)
                    for (var r = 0; r < this.lines.length; ++r) {
                        var l = dn(this.lines[r]),
                            c = g(l);
                        c > e.display.maxLineLength && (e.display.maxLine = l, e.display.maxLineLength = c, e.display.maxLineChanged = !0)
                    }
                null != n && e && this.collapsed && Rt(e, n, i + 1), this.lines.length = 0, this.explicitlyCleared = !0, this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, e && xe(e.doc)), e && _i(e, "markerCleared", e, this), t && _t(e), this.parent && this.parent.clear()
            }
        }, cs.prototype.find = function(e, t) {
            null == e && "bookmark" == this.type && (e = 1);
            for (var o, n, i = 0; i < this.lines.length; ++i) {
                var r = this.lines[i],
                    s = qo(r.markedSpans, this);
                if (null != s.from && (o = Ir(t ? r : Qn(r), s.from), -1 == e)) return o;
                if (null != s.to && (n = Ir(t ? r : Qn(r), s.to), 1 == e)) return n
            }
            return o && {
                from: o,
                to: n
            }
        }, cs.prototype.changed = function() {
            var e = this.find(-1, !0),
                t = this,
                o = this.doc.cm;
            e && o && At(o, function() {
                var n = e.line,
                    i = Qn(e.line),
                    r = $e(o, i);
                if (r && (ot(r), o.curOp.selectionChanged = o.curOp.forceUpdate = !0), o.curOp.updateMaxLine = !0, !vn(t.doc, n) && null != t.height) {
                    var s = t.height;
                    t.height = null;
                    var a = Cn(t) - s;
                    a && $n(n, n.height + a)
                }
            })
        }, cs.prototype.attachLine = function(e) {
            if (!this.lines.length && this.doc.cm) {
                var t = this.doc.cm.curOp;
                t.maybeHiddenMarkers && -1 != wi(t.maybeHiddenMarkers, this) || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this)
            }
            this.lines.push(e)
        }, cs.prototype.detachLine = function(e) {
            if (this.lines.splice(wi(this.lines, e), 1), !this.lines.length && this.doc.cm) {
                var t = this.doc.cm.curOp;
                (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this)
            }
        };
        var ls = 0,
            us = e.SharedTextMarker = function(e, t) {
                this.markers = e, this.primary = t;
                for (var o = 0; o < e.length; ++o) e[o].parent = this
            };
        Ti(us), us.prototype.clear = function() {
            if (!this.explicitlyCleared) {
                this.explicitlyCleared = !0;
                for (var e = 0; e < this.markers.length; ++e) this.markers[e].clear();
                _i(this, "clear")
            }
        }, us.prototype.find = function(e, t) {
            return this.primary.find(e, t)
        };
        var gs = e.LineWidget = function(e, t, o) {
            if (o)
                for (var n in o) o.hasOwnProperty(n) && (this[n] = o[n]);
            this.doc = e, this.node = t
        };
        Ti(gs), gs.prototype.clear = function() {
            var e = this.doc.cm,
                t = this.line.widgets,
                o = this.line,
                n = Qn(o);
            if (null != n && t) {
                for (var i = 0; i < t.length; ++i) t[i] == this && t.splice(i--, 1);
                t.length || (o.widgets = null);
                var r = Cn(this);
                $n(o, Math.max(0, o.height - r)), e && At(e, function() {
                    bn(e, o, -r), Lt(e, n, "widget")
                })
            }
        }, gs.prototype.changed = function() {
            var e = this.height,
                t = this.doc.cm,
                o = this.line;
            this.height = null;
            var n = Cn(this) - e;
            n && ($n(o, o.height + n), t && At(t, function() {
                t.curOp.forceUpdate = !0, bn(t, o, n)
            }))
        };
        var ps = e.Line = function(e, t, o) {
            this.text = e, sn(this, t), this.height = o ? o(this) : 1
        };
        Ti(ps), ps.prototype.lineNo = function() {
            return Qn(this)
        };
        var hs = {},
            ds = {};
        Gn.prototype = {
            chunkSize: function() {
                return this.lines.length
            },
            removeInner: function(e, t) {
                for (var o = e, n = e + t; n > o; ++o) {
                    var i = this.lines[o];
                    this.height -= i.height, Tn(i), _i(i, "delete")
                }
                this.lines.splice(e, t)
            },
            collapse: function(e) {
                e.push.apply(e, this.lines)
            },
            insertInner: function(e, t, o) {
                this.height += o, this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e));
                for (var n = 0; n < t.length; ++n) t[n].parent = this
            },
            iterN: function(e, t, o) {
                for (var n = e + t; n > e; ++e)
                    if (o(this.lines[e])) return !0
            }
        }, Kn.prototype = {
            chunkSize: function() {
                return this.size
            },
            removeInner: function(e, t) {
                this.size -= t;
                for (var o = 0; o < this.children.length; ++o) {
                    var n = this.children[o],
                        i = n.chunkSize();
                    if (i > e) {
                        var r = Math.min(t, i - e),
                            s = n.height;
                        if (n.removeInner(e, r), this.height -= s - n.height, i == r && (this.children.splice(o--, 1), n.parent = null), 0 == (t -= r)) break;
                        e = 0
                    } else e -= i
                }
                if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0] instanceof Gn))) {
                    var a = [];
                    this.collapse(a), this.children = [new Gn(a)], this.children[0].parent = this
                }
            },
            collapse: function(e) {
                for (var t = 0; t < this.children.length; ++t) this.children[t].collapse(e)
            },
            insertInner: function(e, t, o) {
                this.size += t.length, this.height += o;
                for (var n = 0; n < this.children.length; ++n) {
                    var i = this.children[n],
                        r = i.chunkSize();
                    if (r >= e) {
                        if (i.insertInner(e, t, o), i.lines && i.lines.length > 50) {
                            for (; i.lines.length > 50;) {
                                var s = i.lines.splice(i.lines.length - 25, 25),
                                    a = new Gn(s);
                                i.height -= a.height, this.children.splice(n + 1, 0, a), a.parent = this
                            }
                            this.maybeSpill()
                        }
                        break
                    }
                    e -= r
                }
            },
            maybeSpill: function() {
                if (!(this.children.length <= 10)) {
                    var e = this;
                    do {
                        var t = e.children.splice(e.children.length - 5, 5),
                            o = new Kn(t);
                        if (e.parent) {
                            e.size -= o.size, e.height -= o.height;
                            var n = wi(e.parent.children, e);
                            e.parent.children.splice(n + 1, 0, o)
                        } else {
                            var i = new Kn(e.children);
                            i.parent = e, e.children = [i, o], e = i
                        }
                        o.parent = e.parent
                    } while (e.children.length > 10);
                    e.parent.maybeSpill()
                }
            },
            iterN: function(e, t, o) {
                for (var n = 0; n < this.children.length; ++n) {
                    var i = this.children[n],
                        r = i.chunkSize();
                    if (r > e) {
                        var s = Math.min(t, r - e);
                        if (i.iterN(e, s, o)) return !0;
                        if (0 == (t -= s)) break;
                        e = 0
                    } else e -= r
                }
            }
        };
        var fs = 0,
            ms = e.Doc = function(e, t, o) {
                if (!(this instanceof ms)) return new ms(e, t, o);
                null == o && (o = 0), Kn.call(this, [new Gn([new ps("", null)])]), this.first = o, this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, this.cleanGeneration = 1, this.frontier = o;
                var n = Ir(o, 0);
                this.sel = pe(n), this.history = new ti(null), this.id = ++fs, this.modeOption = t, "string" == typeof e && (e = js(e)), Wn(this, {
                    from: n,
                    to: n,
                    text: e
                }), ke(this, pe(n), xs)
            };
        ms.prototype = Ri(Kn.prototype, {
            constructor: ms,
            iter: function(e, t, o) {
                o ? this.iterN(e - this.first, t - e, o) : this.iterN(this.first, this.first + this.size, e)
            },
            insert: function(e, t) {
                for (var o = 0, n = 0; n < t.length; ++n) o += t[n].height;
                this.insertInner(e - this.first, t, o)
            },
            remove: function(e, t) {
                this.removeInner(e - this.first, t)
            },
            getValue: function(e) {
                var t = qn(this, this.first, this.first + this.size);
                return e === !1 ? t : t.join(e || "\n")
            },
            setValue: wt(function(e) {
                var t = Ir(this.first, 0),
                    o = this.first + this.size - 1;
                Co(this, {
                    from: t,
                    to: Ir(o, Xn(this, o).text.length),
                    text: js(e),
                    origin: "setValue",
                    full: !0
                }, !0), ke(this, pe(t))
            }),
            replaceRange: function(e, t, o, n) {
                t = de(this, t), o = o ? de(this, o) : t, Bo(this, e, t, o, n)
            },
            getRange: function(e, t, o) {
                var n = zn(this, de(this, e), de(this, t));
                return o === !1 ? n : n.join(o || "\n")
            },
            getLine: function(e) {
                var t = this.getLineHandle(e);
                return t && t.text
            },
            getLineHandle: function(e) {
                return me(this, e) ? Xn(this, e) : void 0
            },
            getLineNumber: function(e) {
                return Qn(e)
            },
            getLineHandleVisualStart: function(e) {
                return "number" == typeof e && (e = Xn(this, e)), dn(e)
            },
            lineCount: function() {
                return this.size
            },
            firstLine: function() {
                return this.first
            },
            lastLine: function() {
                return this.first + this.size - 1
            },
            clipPos: function(e) {
                return de(this, e)
            },
            getCursor: function(e) {
                var t, o = this.sel.primary();
                return t = null == e || "head" == e ? o.head : "anchor" == e ? o.anchor : "end" == e || "to" == e || e === !1 ? o.to() : o.from()
            },
            listSelections: function() {
                return this.sel.ranges
            },
            somethingSelected: function() {
                return this.sel.somethingSelected()
            },
            setCursor: wt(function(e, t, o) {
                Ee(this, de(this, "number" == typeof e ? Ir(e, t || 0) : e), null, o)
            }),
            setSelection: wt(function(e, t, o) {
                Ee(this, de(this, e), de(this, t || e), o)
            }),
            extendSelection: wt(function(e, t, o) {
                _e(this, de(this, e), t && de(this, t), o)
            }),
            extendSelections: wt(function(e, t) {
                be(this, ye(this, e, t))
            }),
            extendSelectionsBy: wt(function(e, t) {
                be(this, Ii(this.sel.ranges, e), t)
            }),
            setSelections: wt(function(e, t, o) {
                if (e.length) {
                    for (var n = 0, i = []; n < e.length; n++) i[n] = new ue(de(this, e[n].anchor), de(this, e[n].head));
                    null == t && (t = Math.min(e.length - 1, this.sel.primIndex)), ke(this, ge(i, t), o)
                }
            }),
            addSelection: wt(function(e, t, o) {
                var n = this.sel.ranges.slice(0);
                n.push(new ue(de(this, e), de(this, t || e))), ke(this, ge(n, n.length - 1), o)
            }),
            getSelection: function(e) {
                for (var t, o = this.sel.ranges, n = 0; n < o.length; n++) {
                    var i = zn(this, o[n].from(), o[n].to());
                    t = t ? t.concat(i) : i
                }
                return e === !1 ? t : t.join(e || "\n")
            },
            getSelections: function(e) {
                for (var t = [], o = this.sel.ranges, n = 0; n < o.length; n++) {
                    var i = zn(this, o[n].from(), o[n].to());
                    e !== !1 && (i = i.join(e || "\n")), t[n] = i
                }
                return t
            },
            replaceSelection: function(e, t, o) {
                for (var n = [], i = 0; i < this.sel.ranges.length; i++) n[i] = e;
                this.replaceSelections(n, t, o || "+input")
            },
            replaceSelections: wt(function(e, t, o) {
                for (var n = [], i = this.sel, r = 0; r < i.ranges.length; r++) {
                    var s = i.ranges[r];
                    n[r] = {
                        from: s.from(),
                        to: s.to(),
                        text: js(e[r]),
                        origin: o
                    }
                }
                for (var a = t && "end" != t && _o(this, n, t), r = n.length - 1; r >= 0; r--) Co(this, n[r]);
                a ? Te(this, a) : this.cm && Lo(this.cm)
            }),
            undo: wt(function() {
                So(this, "undo")
            }),
            redo: wt(function() {
                So(this, "redo")
            }),
            undoSelection: wt(function() {
                So(this, "undo", !0)
            }),
            redoSelection: wt(function() {
                So(this, "redo", !0)
            }),
            setExtending: function(e) {
                this.extend = e
            },
            getExtending: function() {
                return this.extend
            },
            historySize: function() {
                for (var e = this.history, t = 0, o = 0, n = 0; n < e.done.length; n++) e.done[n].ranges || ++t;
                for (var n = 0; n < e.undone.length; n++) e.undone[n].ranges || ++o;
                return {
                    undo: t,
                    redo: o
                }
            },
            clearHistory: function() {
                this.history = new ti(this.history.maxGeneration)
            },
            markClean: function() {
                this.cleanGeneration = this.changeGeneration(!0)
            },
            changeGeneration: function(e) {
                return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), this.history.generation
            },
            isClean: function(e) {
                return this.history.generation == (e || this.cleanGeneration)
            },
            getHistory: function() {
                return {
                    done: pi(this.history.done),
                    undone: pi(this.history.undone)
                }
            },
            setHistory: function(e) {
                var t = this.history = new ti(this.history.maxGeneration);
                t.done = pi(e.done.slice(0), null, !0), t.undone = pi(e.undone.slice(0), null, !0)
            },
            addLineClass: wt(function(e, t, o) {
                return Mo(this, e, "gutter" == t ? "gutter" : "class", function(e) {
                    var n = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass";
                    if (e[n]) {
                        if (Wi(o).test(e[n])) return !1;
                        e[n] += " " + o
                    } else e[n] = o;
                    return !0
                })
            }),
            removeLineClass: wt(function(e, t, o) {
                return Mo(this, e, "gutter" == t ? "gutter" : "class", function(e) {
                    var n = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass",
                        i = e[n];
                    if (!i) return !1;
                    if (null == o) e[n] = null;
                    else {
                        var r = i.match(Wi(o));
                        if (!r) return !1;
                        var s = r.index + r[0].length;
                        e[n] = i.slice(0, r.index) + (r.index && s != i.length ? " " : "") + i.slice(s) || null
                    }
                    return !0
                })
            }),
            addLineWidget: wt(function(e, t, o) {
                return En(this, e, t, o)
            }),
            removeLineWidget: function(e) {
                e.clear()
            },
            markText: function(e, t, o) {
                return Go(this, de(this, e), de(this, t), o, "range")
            },
            setBookmark: function(e, t) {
                var o = {
                    replacedWith: t && (null == t.nodeType ? t.widget : t),
                    insertLeft: t && t.insertLeft,
                    clearWhenEmpty: !1,
                    shared: t && t.shared,
                    handleMouseEvents: t && t.handleMouseEvents
                };
                return e = de(this, e), Go(this, e, e, o, "bookmark")
            },
            findMarksAt: function(e) {
                e = de(this, e);
                var t = [],
                    o = Xn(this, e.line).markedSpans;
                if (o)
                    for (var n = 0; n < o.length; ++n) {
                        var i = o[n];
                        (null == i.from || i.from <= e.ch) && (null == i.to || i.to >= e.ch) && t.push(i.marker.parent || i.marker)
                    }
                return t
            },
            findMarks: function(e, t, o) {
                e = de(this, e), t = de(this, t);
                var n = [],
                    i = e.line;
                return this.iter(e.line, t.line + 1, function(r) {
                    var s = r.markedSpans;
                    if (s)
                        for (var a = 0; a < s.length; a++) {
                            var l = s[a];
                            i == e.line && e.ch > l.to || null == l.from && i != e.line || i == t.line && l.from > t.ch || o && !o(l.marker) || n.push(l.marker.parent || l.marker)
                        }++i
                }), n
            },
            getAllMarks: function() {
                var e = [];
                return this.iter(function(t) {
                    var o = t.markedSpans;
                    if (o)
                        for (var n = 0; n < o.length; ++n) null != o[n].from && e.push(o[n].marker)
                }), e
            },
            posFromIndex: function(e) {
                var t, o = this.first;
                return this.iter(function(n) {
                    var i = n.text.length + 1;
                    return i > e ? (t = e, !0) : (e -= i, void++o)
                }), de(this, Ir(o, t))
            },
            indexFromPos: function(e) {
                e = de(this, e);
                var t = e.ch;
                return e.line < this.first || e.ch < 0 ? 0 : (this.iter(this.first, e.line, function(e) {
                    t += e.text.length + 1
                }), t)
            },
            copy: function(e) {
                var t = new ms(qn(this, this.first, this.first + this.size), this.modeOption, this.first);
                return t.scrollTop = this.scrollTop, t.scrollLeft = this.scrollLeft, t.sel = this.sel, t.extend = !1, e && (t.history.undoDepth = this.history.undoDepth, t.setHistory(this.getHistory())), t
            },
            linkedDoc: function(e) {
                e || (e = {});
                var t = this.first,
                    o = this.first + this.size;
                null != e.from && e.from > t && (t = e.from), null != e.to && e.to < o && (o = e.to);
                var n = new ms(qn(this, t, o), e.mode || this.modeOption, t);
                return e.sharedHist && (n.history = this.history), (this.linked || (this.linked = [])).push({
                    doc: n,
                    sharedHist: e.sharedHist
                }), n.linked = [{
                    doc: this,
                    isParent: !0,
                    sharedHist: e.sharedHist
                }], Yo(n, jo(this)), n
            },
            unlinkDoc: function(t) {
                if (t instanceof e && (t = t.doc), this.linked)
                    for (var o = 0; o < this.linked.length; ++o) {
                        var n = this.linked[o];
                        if (n.doc == t) {
                            this.linked.splice(o, 1), t.unlinkDoc(this), Xo(jo(this));
                            break
                        }
                    }
                if (t.history == this.history) {
                    var i = [t.id];
                    jn(t, function(e) {
                        i.push(e.id)
                    }, !0), t.history = new ti(null), t.history.done = pi(this.history.done, i), t.history.undone = pi(this.history.undone, i)
                }
            },
            iterLinkedDocs: function(e) {
                jn(this, e)
            },
            getMode: function() {
                return this.mode
            },
            getEditor: function() {
                return this.cm
            }
        }), ms.prototype.eachLine = ms.prototype.iter;
        var ys = "iter insert remove copy getEditor".split(" ");
        for (var vs in ms.prototype) ms.prototype.hasOwnProperty(vs) && wi(ys, vs) < 0 && (e.prototype[vs] = function(e) {
            return function() {
                return e.apply(this.doc, arguments)
            }
        }(ms.prototype[vs]));
        Ti(ms);
        var _s = e.e_preventDefault = function(e) {
                e.preventDefault ? e.preventDefault() : e.returnValue = !1
            },
            bs = e.e_stopPropagation = function(e) {
                e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0
            },
            Cs = e.e_stop = function(e) {
                _s(e), bs(e)
            },
            Es = e.on = function(e, t, o) {
                if (e.addEventListener) e.addEventListener(t, o, !1);
                else if (e.attachEvent) e.attachEvent("on" + t, o);
                else {
                    var n = e._handlers || (e._handlers = {}),
                        i = n[t] || (n[t] = []);
                    i.push(o)
                }
            },
            Ss = e.off = function(e, t, o) {
                if (e.removeEventListener) e.removeEventListener(t, o, !1);
                else if (e.detachEvent) e.detachEvent("on" + t, o);
                else {
                    var n = e._handlers && e._handlers[t];
                    if (!n) return;
                    for (var i = 0; i < n.length; ++i)
                        if (n[i] == o) {
                            n.splice(i, 1);
                            break
                        }
                }
            },
            Ts = e.signal = function(e, t) {
                var o = e._handlers && e._handlers[t];
                if (o)
                    for (var n = Array.prototype.slice.call(arguments, 2), i = 0; i < o.length; ++i) o[i].apply(null, n)
            },
            ks = null,
            As = 30,
            Bs = e.Pass = {
                toString: function() {
                    return "CodeMirror.Pass"
                }
            },
            xs = {
                scroll: !1
            },
            ws = {
                origin: "*mouse"
            },
            Is = {
                origin: "+move"
            };
        ki.prototype.set = function(e, t) {
            clearTimeout(this.id), this.id = setTimeout(t, e)
        };
        var Ns = e.countColumn = function(e, t, o, n, i) {
                null == t && (t = e.search(/[^\s\u00a0]/), -1 == t && (t = e.length));
                for (var r = n || 0, s = i || 0;;) {
                    var a = e.indexOf("	", r);
                    if (0 > a || a >= t) return s + (t - r);
                    s += a - r, s += o - s % o, r = a + 1
                }
            },
            Rs = [""],
            Ls = function(e) {
                e.select()
            };
        Cr ? Ls = function(e) {
            e.selectionStart = 0, e.selectionEnd = e.value.length
        } : pr && (Ls = function(e) {
            try {
                e.select()
            } catch (t) {}
        });
        var Os, Ds = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
            Ms = e.isWordChar = function(e) {
                return /\w/.test(e) || e > "\x80" && (e.toUpperCase() != e.toLowerCase() || Ds.test(e))
            },
            Ps = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
        Os = document.createRange ? function(e, t, o, n) {
            var i = document.createRange();
            return i.setEnd(n || e, o), i.setStart(e, t), i
        } : function(e, t, o) {
            var n = document.body.createTextRange();
            try {
                n.moveToElementText(e.parentNode)
            } catch (i) {
                return n
            }
            return n.collapse(!0), n.moveEnd("character", o), n.moveStart("character", t), n
        };
        var Fs = e.contains = function(e, t) {
            if (3 == t.nodeType && (t = t.parentNode), e.contains) return e.contains(t);
            do
                if (11 == t.nodeType && (t = t.host), t == e) return !0;
            while (t = t.parentNode)
        };
        pr && 11 > hr && (Vi = function() {
            try {
                return document.activeElement
            } catch (e) {
                return document.body
            }
        });
        var Hs, Us, Vs = e.rmClass = function(e, t) {
                var o = e.className,
                    n = Wi(t).exec(o);
                if (n) {
                    var i = o.slice(n.index + n[0].length);
                    e.className = o.slice(0, n.index) + (i ? n[1] + i : "")
                }
            },
            Ws = e.addClass = function(e, t) {
                var o = e.className;
                Wi(t).test(o) || (e.className += (o ? " " : "") + t)
            },
            Gs = !1,
            Ks = function() {
                if (pr && 9 > hr) return !1;
                var e = Fi("div");
                return "draggable" in e || "dragDrop" in e
            }(),
            js = e.splitLines = 3 != "\n\nb".split(/\n/).length ? function(e) {
                for (var t = 0, o = [], n = e.length; n >= t;) {
                    var i = e.indexOf("\n", t); - 1 == i && (i = e.length);
                    var r = e.slice(t, "\r" == e.charAt(i - 1) ? i - 1 : i),
                        s = r.indexOf("\r"); - 1 != s ? (o.push(r.slice(0, s)), t += s + 1) : (o.push(r), t = i + 1)
                }
                return o
            } : function(e) {
                return e.split(/\r\n?|\n/)
            },
            Ys = window.getSelection ? function(e) {
                try {
                    return e.selectionStart != e.selectionEnd
                } catch (t) {
                    return !1
                }
            } : function(e) {
                try {
                    var t = e.ownerDocument.selection.createRange()
                } catch (o) {}
                return t && t.parentElement() == e ? 0 != t.compareEndPoints("StartToEnd", t) : !1
            },
            Xs = function() {
                var e = Fi("div");
                return "oncopy" in e ? !0 : (e.setAttribute("oncopy", "return;"), "function" == typeof e.oncopy)
            }(),
            zs = null,
            qs = {
                3: "Enter",
                8: "Backspace",
                9: "Tab",
                13: "Enter",
                16: "Shift",
                17: "Ctrl",
                18: "Alt",
                19: "Pause",
                20: "CapsLock",
                27: "Esc",
                32: "Space",
                33: "PageUp",
                34: "PageDown",
                35: "End",
                36: "Home",
                37: "Left",
                38: "Up",
                39: "Right",
                40: "Down",
                44: "PrintScrn",
                45: "Insert",
                46: "Delete",
                59: ";",
                61: "=",
                91: "Mod",
                92: "Mod",
                93: "Mod",
                107: "=",
                109: "-",
                127: "Delete",
                173: "-",
                186: ";",
                187: "=",
                188: ",",
                189: "-",
                190: ".",
                191: "/",
                192: "`",
                219: "[",
                220: "\\",
                221: "]",
                222: "'",
                63232: "Up",
                63233: "Down",
                63234: "Left",
                63235: "Right",
                63272: "Delete",
                63273: "Home",
                63275: "End",
                63276: "PageUp",
                63277: "PageDown",
                63302: "Insert"
            };
        e.keyNames = qs,
            function() {
                for (var e = 0; 10 > e; e++) qs[e + 48] = qs[e + 96] = String(e);
                for (var e = 65; 90 >= e; e++) qs[e] = String.fromCharCode(e);
                for (var e = 1; 12 >= e; e++) qs[e + 111] = qs[e + 63235] = "F" + e
            }();
        var $s, Qs = function() {
            function e(e) {
                return 247 >= e ? o.charAt(e) : e >= 1424 && 1524 >= e ? "R" : e >= 1536 && 1773 >= e ? n.charAt(e - 1536) : e >= 1774 && 2220 >= e ? "r" : e >= 8192 && 8203 >= e ? "w" : 8204 == e ? "b" : "L"
            }

            function t(e, t, o) {
                this.level = e, this.from = t, this.to = o
            }
            var o = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",
                n = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",
                i = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,
                r = /[stwN]/,
                s = /[LRr]/,
                a = /[Lb1n]/,
                l = /[1n]/,
                c = "L";
            return function(o) {
                if (!i.test(o)) return !1;
                for (var n, u = o.length, g = [], p = 0; u > p; ++p) g.push(n = e(o.charCodeAt(p)));
                for (var p = 0, h = c; u > p; ++p) {
                    var n = g[p];
                    "m" == n ? g[p] = h : h = n
                }
                for (var p = 0, d = c; u > p; ++p) {
                    var n = g[p];
                    "1" == n && "r" == d ? g[p] = "n" : s.test(n) && (d = n, "r" == n && (g[p] = "R"))
                }
                for (var p = 1, h = g[0]; u - 1 > p; ++p) {
                    var n = g[p];
                    "+" == n && "1" == h && "1" == g[p + 1] ? g[p] = "1" : "," != n || h != g[p + 1] || "1" != h && "n" != h || (g[p] = h), h = n
                }
                for (var p = 0; u > p; ++p) {
                    var n = g[p];
                    if ("," == n) g[p] = "N";
                    else if ("%" == n) {
                        for (var f = p + 1; u > f && "%" == g[f]; ++f);
                        for (var m = p && "!" == g[p - 1] || u > f && "1" == g[f] ? "1" : "N", y = p; f > y; ++y) g[y] = m;
                        p = f - 1
                    }
                }
                for (var p = 0, d = c; u > p; ++p) {
                    var n = g[p];
                    "L" == d && "1" == n ? g[p] = "L" : s.test(n) && (d = n)
                }
                for (var p = 0; u > p; ++p)
                    if (r.test(g[p])) {
                        for (var f = p + 1; u > f && r.test(g[f]); ++f);
                        for (var v = "L" == (p ? g[p - 1] : c), _ = "L" == (u > f ? g[f] : c), m = v || _ ? "L" : "R", y = p; f > y; ++y) g[y] = m;
                        p = f - 1
                    }
                for (var b, C = [], p = 0; u > p;)
                    if (a.test(g[p])) {
                        var E = p;
                        for (++p; u > p && a.test(g[p]); ++p);
                        C.push(new t(0, E, p))
                    } else {
                        var S = p,
                            T = C.length;
                        for (++p; u > p && "L" != g[p]; ++p);
                        for (var y = S; p > y;)
                            if (l.test(g[y])) {
                                y > S && C.splice(T, 0, new t(1, S, y));
                                var k = y;
                                for (++y; p > y && l.test(g[y]); ++y);
                                C.splice(T, 0, new t(2, k, y)), S = y
                            } else ++y;
                        p > S && C.splice(T, 0, new t(1, S, p))
                    }
                return 1 == C[0].level && (b = o.match(/^\s+/)) && (C[0].from = b[0].length, C.unshift(new t(0, 0, b[0].length))), 1 == xi(C).level && (b = o.match(/\s+$/)) && (xi(C).to -= b[0].length, C.push(new t(0, u - b[0].length, u))), 2 == C[0].level && C.unshift(new t(1, C[0].to, C[0].to)), C[0].level != xi(C).level && C.push(new t(C[0].level, u, u)), C
            }
        }();
        return e.version = "5.2.1", e
    }), define("search/search", ["../../lib/codemirror/lib/codemirror"], function(e) {
        function t(e) {
            this.cm_ = e, this.cursor_ = null, this.query_ = null, this.index_ = 0, this.resultsCount_ = 0
        }
        return t.prototype.updateCursor_ = function(e, t) {
            return this.cm_.getSearchCursor(e, t, !0)
        }, t.prototype.computeResultsCount_ = function(e) {
            e = e.toLowerCase(), this.index_ = 0, this.resultsCount_ = 0;
            var t = this.cursor_.pos.from.line,
                o = this.cursor_.pos.from.ch,
                n = e.length;
            this.cm_.eachLine(function(i) {
                for (var r = i.text.toLowerCase(), s = i.lineNo(), a = 0;;) {
                    if (a = r.indexOf(e, a), !(a >= 0)) break;
                    this.resultsCount_++, (t > s || s == t && o > a) && this.index_++, a += n
                }
            }.bind(this))
        }, t.prototype.resetSelection_ = function() {
            this.cm_.setCursor(this.cm_.getCursor("anchor"))
        }, t.prototype.clear = function() {
            this.query_ = null, this.cursor_ = null
        }, t.prototype.getCurrentIndex = function() {
            return this.index_
        }, t.prototype.getResultsCount = function() {
            return this.resultsCount_
        }, t.prototype.find = function(e) {
            this.query_ = e;
            var t = this.cm_.getCursor("start");
            this.cursor_ = this.updateCursor_(e, t), this.computeResultsCount_(e), this.findNext()
        }, t.prototype.findNext = function(t) {
            if (!this.cursor_) throw "Internal error: cursor should be initialized.";
            var o = t || !1,
                n = this.cursor_.find(o);
            if (!n) {
                var i = e.Pos(this.cm_.lastLine()),
                    r = e.Pos(this.cm_.firstLine(), 0);
                this.cursor_ = this.updateCursor_(this.query_, o ? i : r), n = this.cursor_.find(o)
            }
            n ? (this.cm_.setSelection(this.cursor_.from(), this.cursor_.to()), this.index_ += o ? -1 : 1, this.index_ = this.index_ % this.resultsCount_, 0 === this.index_ && (this.index_ = this.resultsCount_)) : this.resetSelection_()
        }, t.prototype.getQuery = function() {
            return this.query_
        }, t.prototype.unfocus = function() {
            this.cm_.focus()
        }, t
    }), define("search/search-controller", ["jquery", "../../lib/codemirror/lib/codemirror"], function(e, t) {
        function o(t) {
            this.search_ = t, e("#search-button").click(this.onSearchButton_.bind(this)), e("#search-input").bind("input", this.onChange_.bind(this)), e("#search-input").keydown(this.onKeydown_.bind(this)), e("#search-next").click(this.onFindNext_.bind(this)), e("#search-previous").click(this.onFindPrevious_.bind(this)), e("body").focusin(this.onChangeFocus_.bind(this))
        }
        return o.prototype.updateSearchCount_ = function() {
            if (0 === e("#search-input").val().length) return void e("#search-count").text("");
            var t = this.search_.getResultsCount(),
                o = this.search_.getCurrentIndex();
            e("#search-count").text(o + " of " + t), 0 === t ? e("#search-count").addClass("nomatches") : e("#search-count").removeClass("nomatches")
        }, o.prototype.findNext_ = function(e) {
            this.search_.getQuery() && (this.search_.findNext(e), this.updateSearchCount_(e))
        }, o.prototype.onSearchButton_ = function() {
            return this.search_.clear(), e("#search-input").select(), !1
        }, o.prototype.onChangeFocus_ = function() {
            e(document.activeElement).parents(".editor-toolbar").length || (e("#search-input").val(""), e("#search-count").text(""), this.search_.clear())
        }, o.prototype.onChange_ = function() {
            var t = e("#search-input").val();
            t !== this.search_.getQuery() && (t ? this.search_.find(t) : this.search_.clear(), this.updateSearchCount_())
        }, o.prototype.onKeydown_ = function(e) {
            switch (e.keyCode) {
                case 13:
                    e.stopPropagation(), this.findNext_(e.shiftKey);
                    break;
                case 27:
                    e.stopPropagation(), this.search_.unfocus()
            }
        }, o.prototype.onFindNext_ = function() {
            this.findNext_()
        }, o.prototype.onFindPrevious_ = function() {
            this.findNext_(!0)
        }, o
    }),
    function(e) {
        if ("object" == typeof exports && "object" == typeof module) module.exports = e();
        else {
            if ("function" == typeof define && define.amd) return define("../lib/codemirror/lib/codemirror", [], e);
            this.CodeMirror = e()
        }
    }(function() {
        function e(o, n) {
            if (!(this instanceof e)) return new e(o, n);
            this.options = n = n ? Li(n) : {}, Li(Yr, n, !1), h(n);
            var i = n.value;
            "string" == typeof i && (i = new ms(i, n.mode)), this.doc = i;
            var r = new e.inputStyles[n.inputStyle](this),
                s = this.display = new t(o, i, r);
            s.wrapper.CodeMirror = this, c(this), a(this), n.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"), n.autofocus && !Er && s.input.focus(), y(this), this.state = {
                keyMaps: [],
                overlays: [],
                modeGen: 0,
                overwrite: !1,
                delayingBlurEvent: !1,
                focused: !1,
                suppressEdits: !1,
                pasteIncoming: !1,
                cutIncoming: !1,
                draggingText: !1,
                highlight: new ki,
                keySeq: null,
                specialChars: null
            };
            var l = this;
            pr && 11 > hr && setTimeout(function() {
                l.display.input.reset(!0)
            }, 20), Ht(this), ji(), yt(this), this.curOp.forceUpdate = !0, Yn(this, i), n.autofocus && !Er || l.hasFocus() ? setTimeout(Oi(go, this), 20) : po(this);
            for (var u in Xr) Xr.hasOwnProperty(u) && Xr[u](this, n[u], zr);
            E(this), n.finishInit && n.finishInit(this);
            for (var g = 0; g < Jr.length; ++g) Jr[g](this);
            _t(this), dr && n.lineWrapping && "optimizelegibility" == getComputedStyle(s.lineDiv).textRendering && (s.lineDiv.style.textRendering = "auto")
        }

        function t(e, t, o) {
            var n = this;
            this.input = o, n.scrollbarFiller = Fi("div", null, "CodeMirror-scrollbar-filler"), n.scrollbarFiller.setAttribute("cm-not-content", "true"), n.gutterFiller = Fi("div", null, "CodeMirror-gutter-filler"), n.gutterFiller.setAttribute("cm-not-content", "true"), n.lineDiv = Fi("div", null, "CodeMirror-code"), n.selectionDiv = Fi("div", null, null, "position: relative; z-index: 1"), n.cursorDiv = Fi("div", null, "CodeMirror-cursors"), n.measure = Fi("div", null, "CodeMirror-measure"), n.lineMeasure = Fi("div", null, "CodeMirror-measure"), n.lineSpace = Fi("div", [n.measure, n.lineMeasure, n.selectionDiv, n.cursorDiv, n.lineDiv], null, "position: relative; outline: none"), n.mover = Fi("div", [Fi("div", [n.lineSpace], "CodeMirror-lines")], null, "position: relative"), n.sizer = Fi("div", [n.mover], "CodeMirror-sizer"), n.sizerWidth = null, n.heightForcer = Fi("div", null, null, "position: absolute; height: " + As + "px; width: 1px;"), n.gutters = Fi("div", null, "CodeMirror-gutters"), n.lineGutter = null, n.scroller = Fi("div", [n.sizer, n.heightForcer, n.gutters], "CodeMirror-scroll"), n.scroller.setAttribute("tabIndex", "-1"), n.wrapper = Fi("div", [n.scrollbarFiller, n.gutterFiller, n.scroller], "CodeMirror"), pr && 8 > hr && (n.gutters.style.zIndex = -1, n.scroller.style.paddingRight = 0), dr || cr && Er || (n.scroller.draggable = !0), e && (e.appendChild ? e.appendChild(n.wrapper) : e(n.wrapper)), n.viewFrom = n.viewTo = t.first, n.reportedViewFrom = n.reportedViewTo = t.first, n.view = [], n.renderedView = null, n.externalMeasured = null, n.viewOffset = 0, n.lastWrapHeight = n.lastWrapWidth = 0, n.updateLineNumbers = null, n.nativeBarWidth = n.barHeight = n.barWidth = 0, n.scrollbarsClipped = !1, n.lineNumWidth = n.lineNumInnerWidth = n.lineNumChars = null, n.alignWidgets = !1, n.cachedCharWidth = n.cachedTextHeight = n.cachedPaddingH = null, n.maxLine = null, n.maxLineLength = 0, n.maxLineChanged = !1, n.wheelDX = n.wheelDY = n.wheelStartX = n.wheelStartY = null, n.shift = !1, n.selForContextMenu = null, n.activeTouch = null, o.init(n)
        }

        function o(t) {
            t.doc.mode = e.getMode(t.options, t.doc.modeOption), n(t)
        }

        function n(e) {
            e.doc.iter(function(e) {
                e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null)
            }), e.doc.frontier = e.doc.first, Me(e, 100), e.state.modeGen++, e.curOp && Rt(e)
        }

        function i(e) {
            e.options.lineWrapping ? (Ws(e.display.wrapper, "CodeMirror-wrap"), e.display.sizer.style.minWidth = "", e.display.sizerWidth = null) : (Vs(e.display.wrapper, "CodeMirror-wrap"), p(e)), s(e), Rt(e), it(e), setTimeout(function() {
                v(e)
            }, 100)
        }

        function r(e) {
            var t = ft(e.display),
                o = e.options.lineWrapping,
                n = o && Math.max(5, e.display.scroller.clientWidth / mt(e.display) - 3);
            return function(i) {
                if (vn(e.doc, i)) return 0;
                var r = 0;
                if (i.widgets)
                    for (var s = 0; s < i.widgets.length; s++) i.widgets[s].height && (r += i.widgets[s].height);
                return o ? r + (Math.ceil(i.text.length / n) || 1) * t : r + t
            }
        }

        function s(e) {
            var t = e.doc,
                o = r(e);
            t.iter(function(e) {
                var t = o(e);
                t != e.height && $n(e, t)
            })
        }

        function a(e) {
            e.display.wrapper.className = e.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + e.options.theme.replace(/(^|\s)\s*/g, " cm-s-"), it(e)
        }

        function l(e) {
            c(e), Rt(e), setTimeout(function() {
                C(e)
            }, 20)
        }

        function c(e) {
            var t = e.display.gutters,
                o = e.options.gutters;
            Hi(t);
            for (var n = 0; n < o.length; ++n) {
                var i = o[n],
                    r = t.appendChild(Fi("div", null, "CodeMirror-gutter " + i));
                "CodeMirror-linenumbers" == i && (e.display.lineGutter = r, r.style.width = (e.display.lineNumWidth || 1) + "px")
            }
            t.style.display = n ? "" : "none", u(e)
        }

        function u(e) {
            var t = e.display.gutters.offsetWidth;
            e.display.sizer.style.marginLeft = t + "px"
        }

        function g(e) {
            if (0 == e.height) return 0;
            for (var t, o = e.text.length, n = e; t = gn(n);) {
                var i = t.find(0, !0);
                n = i.from.line, o += i.from.ch - i.to.ch
            }
            for (n = e; t = pn(n);) {
                var i = t.find(0, !0);
                o -= n.text.length - i.from.ch, n = i.to.line, o += n.text.length - i.to.ch
            }
            return o
        }

        function p(e) {
            var t = e.display,
                o = e.doc;
            t.maxLine = Xn(o, o.first), t.maxLineLength = g(t.maxLine), t.maxLineChanged = !0, o.iter(function(e) {
                var o = g(e);
                o > t.maxLineLength && (t.maxLineLength = o, t.maxLine = e)
            })
        }

        function h(e) {
            var t = wi(e.gutters, "CodeMirror-linenumbers"); - 1 == t && e.lineNumbers ? e.gutters = e.gutters.concat(["CodeMirror-linenumbers"]) : t > -1 && !e.lineNumbers && (e.gutters = e.gutters.slice(0), e.gutters.splice(t, 1))
        }

        function d(e) {
            var t = e.display,
                o = t.gutters.offsetWidth,
                n = Math.round(e.doc.height + Ve(e.display));
            return {
                clientHeight: t.scroller.clientHeight,
                viewHeight: t.wrapper.clientHeight,
                scrollWidth: t.scroller.scrollWidth,
                clientWidth: t.scroller.clientWidth,
                viewWidth: t.wrapper.clientWidth,
                barLeft: e.options.fixedGutter ? o : 0,
                docHeight: n,
                scrollHeight: n + Ge(e) + t.barHeight,
                nativeBarWidth: t.nativeBarWidth,
                gutterWidth: o
            }
        }

        function f(e, t, o) {
            this.cm = o;
            var n = this.vert = Fi("div", [Fi("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar"),
                i = this.horiz = Fi("div", [Fi("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
            e(n), e(i), Es(n, "scroll", function() {
                n.clientHeight && t(n.scrollTop, "vertical")
            }), Es(i, "scroll", function() {
                i.clientWidth && t(i.scrollLeft, "horizontal")
            }), this.checkedOverlay = !1, pr && 8 > hr && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px")
        }

        function m() {}

        function y(t) {
            t.display.scrollbars && (t.display.scrollbars.clear(), t.display.scrollbars.addClass && Vs(t.display.wrapper, t.display.scrollbars.addClass)), t.display.scrollbars = new e.scrollbarModel[t.options.scrollbarStyle](function(e) {
                t.display.wrapper.insertBefore(e, t.display.scrollbarFiller), Es(e, "mousedown", function() {
                    t.state.focused && setTimeout(function() {
                        t.display.input.focus()
                    }, 0)
                }), e.setAttribute("cm-not-content", "true")
            }, function(e, o) {
                "horizontal" == o ? Zt(t, e) : Jt(t, e)
            }, t), t.display.scrollbars.addClass && Ws(t.display.wrapper, t.display.scrollbars.addClass)
        }

        function v(e, t) {
            t || (t = d(e));
            var o = e.display.barWidth,
                n = e.display.barHeight;
            _(e, t);
            for (var i = 0; 4 > i && o != e.display.barWidth || n != e.display.barHeight; i++) o != e.display.barWidth && e.options.lineWrapping && N(e), _(e, d(e)), o = e.display.barWidth, n = e.display.barHeight
        }

        function _(e, t) {
            var o = e.display,
                n = o.scrollbars.update(t);
            o.sizer.style.paddingRight = (o.barWidth = n.right) + "px", o.sizer.style.paddingBottom = (o.barHeight = n.bottom) + "px", n.right && n.bottom ? (o.scrollbarFiller.style.display = "block", o.scrollbarFiller.style.height = n.bottom + "px", o.scrollbarFiller.style.width = n.right + "px") : o.scrollbarFiller.style.display = "", n.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (o.gutterFiller.style.display = "block", o.gutterFiller.style.height = n.bottom + "px", o.gutterFiller.style.width = t.gutterWidth + "px") : o.gutterFiller.style.display = ""
        }

        function b(e, t, o) {
            var n = o && null != o.top ? Math.max(0, o.top) : e.scroller.scrollTop;
            n = Math.floor(n - Ue(e));
            var i = o && null != o.bottom ? o.bottom : n + e.wrapper.clientHeight,
                r = Jn(t, n),
                s = Jn(t, i);
            if (o && o.ensure) {
                var a = o.ensure.from.line,
                    l = o.ensure.to.line;
                r > a ? (r = a, s = Jn(t, Zn(Xn(t, a)) + e.wrapper.clientHeight)) : Math.min(l, t.lastLine()) >= s && (r = Jn(t, Zn(Xn(t, l)) - e.wrapper.clientHeight), s = l)
            }
            return {
                from: r,
                to: Math.max(s, r + 1)
            }
        }

        function C(e) {
            var t = e.display,
                o = t.view;
            if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) {
                for (var n = T(t) - t.scroller.scrollLeft + e.doc.scrollLeft, i = t.gutters.offsetWidth, r = n + "px", s = 0; s < o.length; s++)
                    if (!o[s].hidden) {
                        e.options.fixedGutter && o[s].gutter && (o[s].gutter.style.left = r);
                        var a = o[s].alignable;
                        if (a)
                            for (var l = 0; l < a.length; l++) a[l].style.left = r
                    }
                e.options.fixedGutter && (t.gutters.style.left = n + i + "px")
            }
        }

        function E(e) {
            if (!e.options.lineNumbers) return !1;
            var t = e.doc,
                o = S(e.options, t.first + t.size - 1),
                n = e.display;
            if (o.length != n.lineNumChars) {
                var i = n.measure.appendChild(Fi("div", [Fi("div", o)], "CodeMirror-linenumber CodeMirror-gutter-elt")),
                    r = i.firstChild.offsetWidth,
                    s = i.offsetWidth - r;
                return n.lineGutter.style.width = "", n.lineNumInnerWidth = Math.max(r, n.lineGutter.offsetWidth - s) + 1, n.lineNumWidth = n.lineNumInnerWidth + s, n.lineNumChars = n.lineNumInnerWidth ? o.length : -1, n.lineGutter.style.width = n.lineNumWidth + "px", u(e), !0
            }
            return !1
        }

        function S(e, t) {
            return String(e.lineNumberFormatter(t + e.firstLineNumber))
        }

        function T(e) {
            return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left
        }

        function k(e, t, o) {
            var n = e.display;
            this.viewport = t, this.visible = b(n, e.doc, t), this.editorIsHidden = !n.wrapper.offsetWidth, this.wrapperHeight = n.wrapper.clientHeight, this.wrapperWidth = n.wrapper.clientWidth, this.oldDisplayWidth = Ke(e), this.force = o, this.dims = L(e), this.events = []
        }

        function A(e) {
            var t = e.display;
            !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth, t.heightForcer.style.height = Ge(e) + "px", t.sizer.style.marginBottom = -t.nativeBarWidth + "px", t.sizer.style.borderRightWidth = Ge(e) + "px", t.scrollbarsClipped = !0)
        }

        function B(e, t) {
            var o = e.display,
                n = e.doc;
            if (t.editorIsHidden) return Ot(e), !1;
            if (!t.force && t.visible.from >= o.viewFrom && t.visible.to <= o.viewTo && (null == o.updateLineNumbers || o.updateLineNumbers >= o.viewTo) && o.renderedView == o.view && 0 == Ft(e)) return !1;
            E(e) && (Ot(e), t.dims = L(e));
            var i = n.first + n.size,
                r = Math.max(t.visible.from - e.options.viewportMargin, n.first),
                s = Math.min(i, t.visible.to + e.options.viewportMargin);
            o.viewFrom < r && r - o.viewFrom < 20 && (r = Math.max(n.first, o.viewFrom)), o.viewTo > s && o.viewTo - s < 20 && (s = Math.min(i, o.viewTo)), wr && (r = mn(e.doc, r), s = yn(e.doc, s));
            var a = r != o.viewFrom || s != o.viewTo || o.lastWrapHeight != t.wrapperHeight || o.lastWrapWidth != t.wrapperWidth;
            Pt(e, r, s), o.viewOffset = Zn(Xn(e.doc, o.viewFrom)), e.display.mover.style.top = o.viewOffset + "px";
            var l = Ft(e);
            if (!a && 0 == l && !t.force && o.renderedView == o.view && (null == o.updateLineNumbers || o.updateLineNumbers >= o.viewTo)) return !1;
            var c = Vi();
            return l > 4 && (o.lineDiv.style.display = "none"), O(e, o.updateLineNumbers, t.dims), l > 4 && (o.lineDiv.style.display = ""), o.renderedView = o.view, c && Vi() != c && c.offsetHeight && c.focus(), Hi(o.cursorDiv), Hi(o.selectionDiv), o.gutters.style.height = 0, a && (o.lastWrapHeight = t.wrapperHeight, o.lastWrapWidth = t.wrapperWidth, Me(e, 400)), o.updateLineNumbers = null, !0
        }

        function x(e, t) {
            for (var o = t.force, n = t.viewport, i = !0;; i = !1) {
                if (i && e.options.lineWrapping && t.oldDisplayWidth != Ke(e)) o = !0;
                else if (o = !1, n && null != n.top && (n = {
                        top: Math.min(e.doc.height + Ve(e.display) - je(e), n.top)
                    }), t.visible = b(e.display, e.doc, n), t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo) break;
                if (!B(e, t)) break;
                N(e);
                var r = d(e);
                Ne(e), I(e, r), v(e, r)
            }
            t.signal(e, "update", e), e.display.viewFrom == e.display.reportedViewFrom && e.display.viewTo == e.display.reportedViewTo || (t.signal(e, "viewportChange", e, e.display.viewFrom, e.display.viewTo), e.display.reportedViewFrom = e.display.viewFrom, e.display.reportedViewTo = e.display.viewTo)
        }

        function w(e, t) {
            var o = new k(e, t);
            if (B(e, o)) {
                N(e), x(e, o);
                var n = d(e);
                Ne(e), I(e, n), v(e, n), o.finish()
            }
        }

        function I(e, t) {
            e.display.sizer.style.minHeight = t.docHeight + "px";
            var o = t.docHeight + e.display.barHeight;
            e.display.heightForcer.style.top = o + "px", e.display.gutters.style.height = Math.max(o + Ge(e), t.clientHeight) + "px"
        }

        function N(e) {
            for (var t = e.display, o = t.lineDiv.offsetTop, n = 0; n < t.view.length; n++) {
                var i, r = t.view[n];
                if (!r.hidden) {
                    if (pr && 8 > hr) {
                        var s = r.node.offsetTop + r.node.offsetHeight;
                        i = s - o, o = s
                    } else {
                        var a = r.node.getBoundingClientRect();
                        i = a.bottom - a.top
                    }
                    var l = r.line.height - i;
                    if (2 > i && (i = ft(t)), (l > .001 || -.001 > l) && ($n(r.line, i), R(r.line), r.rest))
                        for (var c = 0; c < r.rest.length; c++) R(r.rest[c])
                }
            }
        }

        function R(e) {
            if (e.widgets)
                for (var t = 0; t < e.widgets.length; ++t) e.widgets[t].height = e.widgets[t].node.offsetHeight
        }

        function L(e) {
            for (var t = e.display, o = {}, n = {}, i = t.gutters.clientLeft, r = t.gutters.firstChild, s = 0; r; r = r.nextSibling, ++s) o[e.options.gutters[s]] = r.offsetLeft + r.clientLeft + i, n[e.options.gutters[s]] = r.clientWidth;
            return {
                fixedPos: T(t),
                gutterTotalWidth: t.gutters.offsetWidth,
                gutterLeft: o,
                gutterWidth: n,
                wrapperWidth: t.wrapper.clientWidth
            }
        }

        function O(e, t, o) {
            function n(t) {
                var o = t.nextSibling;
                return dr && Sr && e.display.currentWheelTarget == t ? t.style.display = "none" : t.parentNode.removeChild(t), o
            }
            for (var i = e.display, r = e.options.lineNumbers, s = i.lineDiv, a = s.firstChild, l = i.view, c = i.viewFrom, u = 0; u < l.length; u++) {
                var g = l[u];
                if (g.hidden);
                else if (g.node && g.node.parentNode == s) {
                    for (; a != g.node;) a = n(a);
                    var p = r && null != t && c >= t && g.lineNumber;
                    g.changes && (wi(g.changes, "gutter") > -1 && (p = !1), D(e, g, c, o)), p && (Hi(g.lineNumber), g.lineNumber.appendChild(document.createTextNode(S(e.options, c)))), a = g.node.nextSibling
                } else {
                    var h = G(e, g, c, o);
                    s.insertBefore(h, a)
                }
                c += g.size
            }
            for (; a;) a = n(a)
        }

        function D(e, t, o, n) {
            for (var i = 0; i < t.changes.length; i++) {
                var r = t.changes[i];
                "text" == r ? H(e, t) : "gutter" == r ? V(e, t, o, n) : "class" == r ? U(t) : "widget" == r && W(e, t, n)
            }
            t.changes = null
        }

        function M(e) {
            return e.node == e.text && (e.node = Fi("div", null, null, "position: relative"), e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text), e.node.appendChild(e.text), pr && 8 > hr && (e.node.style.zIndex = 2)), e.node
        }

        function P(e) {
            var t = e.bgClass ? e.bgClass + " " + (e.line.bgClass || "") : e.line.bgClass;
            if (t && (t += " CodeMirror-linebackground"), e.background) t ? e.background.className = t : (e.background.parentNode.removeChild(e.background), e.background = null);
            else if (t) {
                var o = M(e);
                e.background = o.insertBefore(Fi("div", null, t), o.firstChild)
            }
        }

        function F(e, t) {
            var o = e.display.externalMeasured;
            return o && o.line == t.line ? (e.display.externalMeasured = null, t.measure = o.measure, o.built) : On(e, t)
        }

        function H(e, t) {
            var o = t.text.className,
                n = F(e, t);
            t.text == t.node && (t.node = n.pre), t.text.parentNode.replaceChild(n.pre, t.text), t.text = n.pre, n.bgClass != t.bgClass || n.textClass != t.textClass ? (t.bgClass = n.bgClass, t.textClass = n.textClass, U(t)) : o && (t.text.className = o)
        }

        function U(e) {
            P(e), e.line.wrapClass ? M(e).className = e.line.wrapClass : e.node != e.text && (e.node.className = "");
            var t = e.textClass ? e.textClass + " " + (e.line.textClass || "") : e.line.textClass;
            e.text.className = t || ""
        }

        function V(e, t, o, n) {
            t.gutter && (t.node.removeChild(t.gutter), t.gutter = null);
            var i = t.line.gutterMarkers;
            if (e.options.lineNumbers || i) {
                var r = M(t),
                    s = t.gutter = Fi("div", null, "CodeMirror-gutter-wrapper", "left: " + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + "px; width: " + n.gutterTotalWidth + "px");
                if (e.display.input.setUneditable(s), r.insertBefore(s, t.text), t.line.gutterClass && (s.className += " " + t.line.gutterClass), !e.options.lineNumbers || i && i["CodeMirror-linenumbers"] || (t.lineNumber = s.appendChild(Fi("div", S(e.options, o), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + n.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + e.display.lineNumInnerWidth + "px"))), i)
                    for (var a = 0; a < e.options.gutters.length; ++a) {
                        var l = e.options.gutters[a],
                            c = i.hasOwnProperty(l) && i[l];
                        c && s.appendChild(Fi("div", [c], "CodeMirror-gutter-elt", "left: " + n.gutterLeft[l] + "px; width: " + n.gutterWidth[l] + "px"))
                    }
            }
        }

        function W(e, t, o) {
            t.alignable && (t.alignable = null);
            for (var n, i = t.node.firstChild; i; i = n) {
                var n = i.nextSibling;
                "CodeMirror-linewidget" == i.className && t.node.removeChild(i)
            }
            K(e, t, o)
        }

        function G(e, t, o, n) {
            var i = F(e, t);
            return t.text = t.node = i.pre, i.bgClass && (t.bgClass = i.bgClass), i.textClass && (t.textClass = i.textClass), U(t), V(e, t, o, n), K(e, t, n), t.node
        }

        function K(e, t, o) {
            if (j(e, t.line, t, o, !0), t.rest)
                for (var n = 0; n < t.rest.length; n++) j(e, t.rest[n], t, o, !1)
        }

        function j(e, t, o, n, i) {
            if (t.widgets)
                for (var r = M(o), s = 0, a = t.widgets; s < a.length; ++s) {
                    var l = a[s],
                        c = Fi("div", [l.node], "CodeMirror-linewidget");
                    l.handleMouseEvents || c.setAttribute("cm-ignore-events", "true"), Y(l, c, o, n), e.display.input.setUneditable(c), i && l.above ? r.insertBefore(c, o.gutter || o.text) : r.appendChild(c), _i(l, "redraw")
                }
        }

        function Y(e, t, o, n) {
            if (e.noHScroll) {
                (o.alignable || (o.alignable = [])).push(t);
                var i = n.wrapperWidth;
                t.style.left = n.fixedPos + "px", e.coverGutter || (i -= n.gutterTotalWidth, t.style.paddingLeft = n.gutterTotalWidth + "px"), t.style.width = i + "px"
            }
            e.coverGutter && (t.style.zIndex = 5, t.style.position = "relative", e.noHScroll || (t.style.marginLeft = -n.gutterTotalWidth + "px"))
        }

        function X(e) {
            return Ir(e.line, e.ch)
        }

        function z(e, t) {
            return Nr(e, t) < 0 ? t : e
        }

        function q(e, t) {
            return Nr(e, t) < 0 ? e : t
        }

        function $(e) {
            e.state.focused || (e.display.input.focus(), go(e))
        }

        function Q(e) {
            return e.options.readOnly || e.doc.cantEdit
        }

        function J(e, t, o, n, i) {
            var r = e.doc;
            e.display.shift = !1, n || (n = r.sel);
            var s = js(t),
                a = null;
            e.state.pasteIncoming && n.ranges.length > 1 && (Rr && Rr.join("\n") == t ? a = n.ranges.length % Rr.length == 0 && Ii(Rr, js) : s.length == n.ranges.length && (a = Ii(s, function(e) {
                return [e]
            })));
            for (var l = n.ranges.length - 1; l >= 0; l--) {
                var c = n.ranges[l],
                    u = c.from(),
                    g = c.to();
                c.empty() && (o && o > 0 ? u = Ir(u.line, u.ch - o) : e.state.overwrite && !e.state.pasteIncoming && (g = Ir(g.line, Math.min(Xn(r, g.line).text.length, g.ch + xi(s).length))));
                var p = e.curOp.updateInput,
                    h = {
                        from: u,
                        to: g,
                        text: a ? a[l % a.length] : s,
                        origin: i || (e.state.pasteIncoming ? "paste" : e.state.cutIncoming ? "cut" : "+input")
                    };
                if (Co(e.doc, h), _i(e, "inputRead", e, h), t && !e.state.pasteIncoming && e.options.electricChars && e.options.smartIndent && c.head.ch < 100 && (!l || n.ranges[l - 1].head.line != c.head.line)) {
                    var d = e.getModeAt(c.head),
                        f = jr(h),
                        m = !1;
                    if (d.electricChars) {
                        for (var y = 0; y < d.electricChars.length; y++)
                            if (t.indexOf(d.electricChars.charAt(y)) > -1) {
                                m = Do(e, f.line, "smart");
                                break
                            }
                    } else d.electricInput && d.electricInput.test(Xn(r, f.line).text.slice(0, f.ch)) && (m = Do(e, f.line, "smart"));
                    m && _i(e, "electricInput", e, f.line)
                }
            }
            Lo(e), e.curOp.updateInput = p, e.curOp.typing = !0, e.state.pasteIncoming = e.state.cutIncoming = !1
        }

        function Z(e) {
            for (var t = [], o = [], n = 0; n < e.doc.sel.ranges.length; n++) {
                var i = e.doc.sel.ranges[n].head.line,
                    r = {
                        anchor: Ir(i, 0),
                        head: Ir(i + 1, 0)
                    };
                o.push(r), t.push(e.getRange(r.anchor, r.head))
            }
            return {
                text: t,
                ranges: o
            }
        }

        function ee(e) {
            e.setAttribute("autocorrect", "off"), e.setAttribute("autocapitalize", "off"), e.setAttribute("spellcheck", "false")
        }

        function te(e) {
            this.cm = e, this.prevInput = "", this.pollingFast = !1, this.polling = new ki, this.inaccurateSelection = !1, this.hasSelection = !1, this.composing = null
        }

        function oe() {
            var e = Fi("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),
                t = Fi("div", [e], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
            return dr ? e.style.width = "1000px" : e.setAttribute("wrap", "off"), Cr && (e.style.border = "1px solid black"), ee(e), t
        }

        function ne(e) {
            this.cm = e, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, this.polling = new ki, this.gracePeriod = !1
        }

        function ie(e, t) {
            var o = $e(e, t.line);
            if (!o || o.hidden) return null;
            var n = Xn(e.doc, t.line),
                i = Xe(o, n, t.line),
                r = ei(n),
                s = "left";
            if (r) {
                var a = rr(r, t.ch);
                s = a % 2 ? "right" : "left"
            }
            var l = Ze(i.map, t.ch, "left");
            return l.offset = "right" == l.collapse ? l.end : l.start, l
        }

        function re(e, t) {
            return t && (e.bad = !0), e
        }

        function se(e, t, o) {
            var n;
            if (t == e.display.lineDiv) {
                if (n = e.display.lineDiv.childNodes[o], !n) return re(e.clipPos(Ir(e.display.viewTo - 1)), !0);
                t = null, o = 0
            } else
                for (n = t;; n = n.parentNode) {
                    if (!n || n == e.display.lineDiv) return null;
                    if (n.parentNode && n.parentNode == e.display.lineDiv) break
                }
            for (var i = 0; i < e.display.view.length; i++) {
                var r = e.display.view[i];
                if (r.node == n) return ae(r, t, o)
            }
        }

        function ae(e, t, o) {
            function n(t, o, n) {
                for (var i = -1; i < (u ? u.length : 0); i++)
                    for (var r = 0 > i ? c.map : u[i], s = 0; s < r.length; s += 3) {
                        var a = r[s + 2];
                        if (a == t || a == o) {
                            var l = Qn(0 > i ? e.line : e.rest[i]),
                                g = r[s] + n;
                            return (0 > n || a != t) && (g = r[s + (n ? 1 : 0)]), Ir(l, g)
                        }
                    }
            }
            var i = e.text.firstChild,
                r = !1;
            if (!t || !Fs(i, t)) return re(Ir(Qn(e.line), 0), !0);
            if (t == i && (r = !0, t = i.childNodes[o], o = 0, !t)) {
                var s = e.rest ? xi(e.rest) : e.line;
                return re(Ir(Qn(s), s.text.length), r)
            }
            var a = 3 == t.nodeType ? t : null,
                l = t;
            for (a || 1 != t.childNodes.length || 3 != t.firstChild.nodeType || (a = t.firstChild, o && (o = a.nodeValue.length)); l.parentNode != i;) l = l.parentNode;
            var c = e.measure,
                u = c.maps,
                g = n(a, l, o);
            if (g) return re(g, r);
            for (var p = l.nextSibling, h = a ? a.nodeValue.length - o : 0; p; p = p.nextSibling) {
                if (g = n(p, p.firstChild, 0)) return re(Ir(g.line, g.ch - h), r);
                h += p.textContent.length
            }
            for (var d = l.previousSibling, h = o; d; d = d.previousSibling) {
                if (g = n(d, d.firstChild, -1)) return re(Ir(g.line, g.ch + h), r);
                h += p.textContent.length
            }
        }

        function le(e, t, o, n, i) {
            function r(e) {
                return function(t) {
                    return t.id == e
                }
            }

            function s(t) {
                if (1 == t.nodeType) {
                    var o = t.getAttribute("cm-text");
                    if (null != o) return "" == o && (o = t.textContent.replace(/\u200b/g, "")), void(a += o);
                    var c, u = t.getAttribute("cm-marker");
                    if (u) {
                        var g = e.findMarks(Ir(n, 0), Ir(i + 1, 0), r(+u));
                        return void(g.length && (c = g[0].find()) && (a += zn(e.doc, c.from, c.to).join("\n")))
                    }
                    if ("false" == t.getAttribute("contenteditable")) return;
                    for (var p = 0; p < t.childNodes.length; p++) s(t.childNodes[p]);
                    /^(pre|div|p)$/i.test(t.nodeName) && (l = !0)
                } else if (3 == t.nodeType) {
                    var h = t.nodeValue;
                    if (!h) return;
                    l && (a += "\n", l = !1), a += h
                }
            }
            for (var a = "", l = !1; s(t), t != o;) t = t.nextSibling;
            return a
        }

        function ce(e, t) {
            this.ranges = e, this.primIndex = t
        }

        function ue(e, t) {
            this.anchor = e, this.head = t
        }

        function ge(e, t) {
            var o = e[t];
            e.sort(function(e, t) {
                return Nr(e.from(), t.from())
            }), t = wi(e, o);
            for (var n = 1; n < e.length; n++) {
                var i = e[n],
                    r = e[n - 1];
                if (Nr(r.to(), i.from()) >= 0) {
                    var s = q(r.from(), i.from()),
                        a = z(r.to(), i.to()),
                        l = r.empty() ? i.from() == i.head : r.from() == r.head;
                    t >= n && --t, e.splice(--n, 2, new ue(l ? a : s, l ? s : a))
                }
            }
            return new ce(e, t)
        }

        function pe(e, t) {
            return new ce([new ue(e, t || e)], 0)
        }

        function he(e, t) {
            return Math.max(e.first, Math.min(t, e.first + e.size - 1))
        }

        function de(e, t) {
            if (t.line < e.first) return Ir(e.first, 0);
            var o = e.first + e.size - 1;
            return t.line > o ? Ir(o, Xn(e, o).text.length) : fe(t, Xn(e, t.line).text.length)
        }

        function fe(e, t) {
            var o = e.ch;
            return null == o || o > t ? Ir(e.line, t) : 0 > o ? Ir(e.line, 0) : e
        }

        function me(e, t) {
            return t >= e.first && t < e.first + e.size
        }

        function ye(e, t) {
            for (var o = [], n = 0; n < t.length; n++) o[n] = de(e, t[n]);
            return o
        }

        function ve(e, t, o, n) {
            if (e.cm && e.cm.display.shift || e.extend) {
                var i = t.anchor;
                if (n) {
                    var r = Nr(o, i) < 0;
                    r != Nr(n, i) < 0 ? (i = o, o = n) : r != Nr(o, n) < 0 && (o = n)
                }
                return new ue(i, o)
            }
            return new ue(n || o, o)
        }

        function _e(e, t, o, n) {
            ke(e, new ce([ve(e, e.sel.primary(), t, o)], 0), n)
        }

        function be(e, t, o) {
            for (var n = [], i = 0; i < e.sel.ranges.length; i++) n[i] = ve(e, e.sel.ranges[i], t[i], null);
            var r = ge(n, e.sel.primIndex);
            ke(e, r, o)
        }

        function Ce(e, t, o, n) {
            var i = e.sel.ranges.slice(0);
            i[t] = o, ke(e, ge(i, e.sel.primIndex), n)
        }

        function Ee(e, t, o, n) {
            ke(e, pe(t, o), n)
        }

        function Se(e, t) {
            var o = {
                ranges: t.ranges,
                update: function(t) {
                    this.ranges = [];
                    for (var o = 0; o < t.length; o++) this.ranges[o] = new ue(de(e, t[o].anchor), de(e, t[o].head))
                }
            };
            return Ts(e, "beforeSelectionChange", e, o), e.cm && Ts(e.cm, "beforeSelectionChange", e.cm, o), o.ranges != t.ranges ? ge(o.ranges, o.ranges.length - 1) : t
        }

        function Te(e, t, o) {
            var n = e.history.done,
                i = xi(n);
            i && i.ranges ? (n[n.length - 1] = t, Ae(e, t, o)) : ke(e, t, o)
        }

        function ke(e, t, o) {
            Ae(e, t, o), ai(e, e.sel, e.cm ? e.cm.curOp.id : NaN, o)
        }

        function Ae(e, t, o) {
            (Si(e, "beforeSelectionChange") || e.cm && Si(e.cm, "beforeSelectionChange")) && (t = Se(e, t));
            var n = o && o.bias || (Nr(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1);
            Be(e, we(e, t, n, !0)), o && o.scroll === !1 || !e.cm || Lo(e.cm)
        }

        function Be(e, t) {
            t.equals(e.sel) || (e.sel = t, e.cm && (e.cm.curOp.updateInput = e.cm.curOp.selectionChanged = !0, Ei(e.cm)), _i(e, "cursorActivity", e))
        }

        function xe(e) {
            Be(e, we(e, e.sel, null, !1), xs)
        }

        function we(e, t, o, n) {
            for (var i, r = 0; r < t.ranges.length; r++) {
                var s = t.ranges[r],
                    a = Ie(e, s.anchor, o, n),
                    l = Ie(e, s.head, o, n);
                (i || a != s.anchor || l != s.head) && (i || (i = t.ranges.slice(0, r)), i[r] = new ue(a, l))
            }
            return i ? ge(i, t.primIndex) : t
        }

        function Ie(e, t, o, n) {
            var i = !1,
                r = t,
                s = o || 1;
            e.cantEdit = !1;
            e: for (;;) {
                var a = Xn(e, r.line);
                if (a.markedSpans)
                    for (var l = 0; l < a.markedSpans.length; ++l) {
                        var c = a.markedSpans[l],
                            u = c.marker;
                        if ((null == c.from || (u.inclusiveLeft ? c.from <= r.ch : c.from < r.ch)) && (null == c.to || (u.inclusiveRight ? c.to >= r.ch : c.to > r.ch))) {
                            if (n && (Ts(u, "beforeCursorEnter"), u.explicitlyCleared)) {
                                if (a.markedSpans) {
                                    --l;
                                    continue
                                }
                                break
                            }
                            if (!u.atomic) continue;
                            var g = u.find(0 > s ? -1 : 1);
                            if (0 == Nr(g, r) && (g.ch += s, g.ch < 0 ? g = g.line > e.first ? de(e, Ir(g.line - 1)) : null : g.ch > a.text.length && (g = g.line < e.first + e.size - 1 ? Ir(g.line + 1, 0) : null), !g)) {
                                if (i) return n ? (e.cantEdit = !0, Ir(e.first, 0)) : Ie(e, t, o, !0);
                                i = !0, g = t, s = -s
                            }
                            r = g;
                            continue e
                        }
                    }
                return r
            }
        }

        function Ne(e) {
            e.display.input.showSelection(e.display.input.prepareSelection())
        }

        function Re(e, t) {
            for (var o = e.doc, n = {}, i = n.cursors = document.createDocumentFragment(), r = n.selection = document.createDocumentFragment(), s = 0; s < o.sel.ranges.length; s++)
                if (t !== !1 || s != o.sel.primIndex) {
                    var a = o.sel.ranges[s],
                        l = a.empty();
                    (l || e.options.showCursorWhenSelecting) && Le(e, a, i), l || Oe(e, a, r)
                }
            return n
        }

        function Le(e, t, o) {
            var n = ut(e, t.head, "div", null, null, !e.options.singleCursorHeightPerLine),
                i = o.appendChild(Fi("div", "\xa0", "CodeMirror-cursor"));
            if (i.style.left = n.left + "px", i.style.top = n.top + "px", i.style.height = Math.max(0, n.bottom - n.top) * e.options.cursorHeight + "px", n.other) {
                var r = o.appendChild(Fi("div", "\xa0", "CodeMirror-cursor CodeMirror-secondarycursor"));
                r.style.display = "", r.style.left = n.other.left + "px", r.style.top = n.other.top + "px", r.style.height = .85 * (n.other.bottom - n.other.top) + "px"
            }
        }

        function Oe(e, t, o) {
            function n(e, t, o, n) {
                0 > t && (t = 0), t = Math.round(t), n = Math.round(n), a.appendChild(Fi("div", null, "CodeMirror-selected", "position: absolute; left: " + e + "px; top: " + t + "px; width: " + (null == o ? u - e : o) + "px; height: " + (n - t) + "px"))
            }

            function i(t, o, i) {
                function r(o, n) {
                    return ct(e, Ir(t, o), "div", g, n)
                }
                var a, l, g = Xn(s, t),
                    p = g.text.length;
                return $i(ei(g), o || 0, null == i ? p : i, function(e, t, s) {
                    var g, h, d, f = r(e, "left");
                    if (e == t) g = f, h = d = f.left;
                    else {
                        if (g = r(t - 1, "right"), "rtl" == s) {
                            var m = f;
                            f = g, g = m
                        }
                        h = f.left, d = g.right
                    }
                    null == o && 0 == e && (h = c), g.top - f.top > 3 && (n(h, f.top, null, f.bottom), h = c, f.bottom < g.top && n(h, f.bottom, null, g.top)), null == i && t == p && (d = u), (!a || f.top < a.top || f.top == a.top && f.left < a.left) && (a = f), (!l || g.bottom > l.bottom || g.bottom == l.bottom && g.right > l.right) && (l = g), c + 1 > h && (h = c), n(h, g.top, d - h, g.bottom)
                }), {
                    start: a,
                    end: l
                }
            }
            var r = e.display,
                s = e.doc,
                a = document.createDocumentFragment(),
                l = We(e.display),
                c = l.left,
                u = Math.max(r.sizerWidth, Ke(e) - r.sizer.offsetLeft) - l.right,
                g = t.from(),
                p = t.to();
            if (g.line == p.line) i(g.line, g.ch, p.ch);
            else {
                var h = Xn(s, g.line),
                    d = Xn(s, p.line),
                    f = dn(h) == dn(d),
                    m = i(g.line, g.ch, f ? h.text.length + 1 : null).end,
                    y = i(p.line, f ? 0 : null, p.ch).start;
                f && (m.top < y.top - 2 ? (n(m.right, m.top, null, m.bottom), n(c, y.top, y.left, y.bottom)) : n(m.right, m.top, y.left - m.right, m.bottom)), m.bottom < y.top && n(c, m.bottom, null, y.top)
            }
            o.appendChild(a)
        }

        function De(e) {
            if (e.state.focused) {
                var t = e.display;
                clearInterval(t.blinker);
                var o = !0;
                t.cursorDiv.style.visibility = "", e.options.cursorBlinkRate > 0 ? t.blinker = setInterval(function() {
                    t.cursorDiv.style.visibility = (o = !o) ? "" : "hidden"
                }, e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = "hidden")
            }
        }

        function Me(e, t) {
            e.doc.mode.startState && e.doc.frontier < e.display.viewTo && e.state.highlight.set(t, Oi(Pe, e))
        }

        function Pe(e) {
            var t = e.doc;
            if (t.frontier < t.first && (t.frontier = t.first), !(t.frontier >= e.display.viewTo)) {
                var o = +new Date + e.options.workTime,
                    n = es(t.mode, He(e, t.frontier)),
                    i = [];
                t.iter(t.frontier, Math.min(t.first + t.size, e.display.viewTo + 500), function(r) {
                    if (t.frontier >= e.display.viewFrom) {
                        var s = r.styles,
                            a = In(e, r, n, !0);
                        r.styles = a.styles;
                        var l = r.styleClasses,
                            c = a.classes;
                        c ? r.styleClasses = c : l && (r.styleClasses = null);
                        for (var u = !s || s.length != r.styles.length || l != c && (!l || !c || l.bgClass != c.bgClass || l.textClass != c.textClass), g = 0; !u && g < s.length; ++g) u = s[g] != r.styles[g];
                        u && i.push(t.frontier), r.stateAfter = es(t.mode, n)
                    } else Rn(e, r.text, n), r.stateAfter = t.frontier % 5 == 0 ? es(t.mode, n) : null;
                    return ++t.frontier, +new Date > o ? (Me(e, e.options.workDelay), !0) : void 0
                }), i.length && At(e, function() {
                    for (var t = 0; t < i.length; t++) Lt(e, i[t], "text")
                })
            }
        }

        function Fe(e, t, o) {
            for (var n, i, r = e.doc, s = o ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), a = t; a > s; --a) {
                if (a <= r.first) return r.first;
                var l = Xn(r, a - 1);
                if (l.stateAfter && (!o || a <= r.frontier)) return a;
                var c = Ns(l.text, null, e.options.tabSize);
                (null == i || n > c) && (i = a - 1, n = c)
            }
            return i
        }

        function He(e, t, o) {
            var n = e.doc,
                i = e.display;
            if (!n.mode.startState) return !0;
            var r = Fe(e, t, o),
                s = r > n.first && Xn(n, r - 1).stateAfter;
            return s = s ? es(n.mode, s) : ts(n.mode), n.iter(r, t, function(o) {
                Rn(e, o.text, s);
                var a = r == t - 1 || r % 5 == 0 || r >= i.viewFrom && r < i.viewTo;
                o.stateAfter = a ? es(n.mode, s) : null, ++r
            }), o && (n.frontier = r), s
        }

        function Ue(e) {
            return e.lineSpace.offsetTop
        }

        function Ve(e) {
            return e.mover.offsetHeight - e.lineSpace.offsetHeight
        }

        function We(e) {
            if (e.cachedPaddingH) return e.cachedPaddingH;
            var t = Ui(e.measure, Fi("pre", "x")),
                o = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle,
                n = {
                    left: parseInt(o.paddingLeft),
                    right: parseInt(o.paddingRight)
                };
            return isNaN(n.left) || isNaN(n.right) || (e.cachedPaddingH = n), n
        }

        function Ge(e) {
            return As - e.display.nativeBarWidth
        }

        function Ke(e) {
            return e.display.scroller.clientWidth - Ge(e) - e.display.barWidth;
        }

        function je(e) {
            return e.display.scroller.clientHeight - Ge(e) - e.display.barHeight
        }

        function Ye(e, t, o) {
            var n = e.options.lineWrapping,
                i = n && Ke(e);
            if (!t.measure.heights || n && t.measure.width != i) {
                var r = t.measure.heights = [];
                if (n) {
                    t.measure.width = i;
                    for (var s = t.text.firstChild.getClientRects(), a = 0; a < s.length - 1; a++) {
                        var l = s[a],
                            c = s[a + 1];
                        Math.abs(l.bottom - c.bottom) > 2 && r.push((l.bottom + c.top) / 2 - o.top)
                    }
                }
                r.push(o.bottom - o.top)
            }
        }

        function Xe(e, t, o) {
            if (e.line == t) return {
                map: e.measure.map,
                cache: e.measure.cache
            };
            for (var n = 0; n < e.rest.length; n++)
                if (e.rest[n] == t) return {
                    map: e.measure.maps[n],
                    cache: e.measure.caches[n]
                };
            for (var n = 0; n < e.rest.length; n++)
                if (Qn(e.rest[n]) > o) return {
                    map: e.measure.maps[n],
                    cache: e.measure.caches[n],
                    before: !0
                }
        }

        function ze(e, t) {
            t = dn(t);
            var o = Qn(t),
                n = e.display.externalMeasured = new It(e.doc, t, o);
            n.lineN = o;
            var i = n.built = On(e, n);
            return n.text = i.pre, Ui(e.display.lineMeasure, i.pre), n
        }

        function qe(e, t, o, n) {
            return Je(e, Qe(e, t), o, n)
        }

        function $e(e, t) {
            if (t >= e.display.viewFrom && t < e.display.viewTo) return e.display.view[Dt(e, t)];
            var o = e.display.externalMeasured;
            return o && t >= o.lineN && t < o.lineN + o.size ? o : void 0
        }

        function Qe(e, t) {
            var o = Qn(t),
                n = $e(e, o);
            n && !n.text ? n = null : n && n.changes && D(e, n, o, L(e)), n || (n = ze(e, t));
            var i = Xe(n, t, o);
            return {
                line: t,
                view: n,
                rect: null,
                map: i.map,
                cache: i.cache,
                before: i.before,
                hasHeights: !1
            }
        }

        function Je(e, t, o, n, i) {
            t.before && (o = -1);
            var r, s = o + (n || "");
            return t.cache.hasOwnProperty(s) ? r = t.cache[s] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()), t.hasHeights || (Ye(e, t.view, t.rect), t.hasHeights = !0), r = et(e, t, o, n), r.bogus || (t.cache[s] = r)), {
                left: r.left,
                right: r.right,
                top: i ? r.rtop : r.top,
                bottom: i ? r.rbottom : r.bottom
            }
        }

        function Ze(e, t, o) {
            for (var n, i, r, s, a = 0; a < e.length; a += 3) {
                var l = e[a],
                    c = e[a + 1];
                if (l > t ? (i = 0, r = 1, s = "left") : c > t ? (i = t - l, r = i + 1) : (a == e.length - 3 || t == c && e[a + 3] > t) && (r = c - l, i = r - 1, t >= c && (s = "right")), null != i) {
                    if (n = e[a + 2], l == c && o == (n.insertLeft ? "left" : "right") && (s = o), "left" == o && 0 == i)
                        for (; a && e[a - 2] == e[a - 3] && e[a - 1].insertLeft;) n = e[(a -= 3) + 2], s = "left";
                    if ("right" == o && i == c - l)
                        for (; a < e.length - 3 && e[a + 3] == e[a + 4] && !e[a + 5].insertLeft;) n = e[(a += 3) + 2], s = "right";
                    break
                }
            }
            return {
                node: n,
                start: i,
                end: r,
                collapse: s,
                coverStart: l,
                coverEnd: c
            }
        }

        function et(e, t, o, n) {
            var i, r = Ze(t.map, o, n),
                s = r.node,
                a = r.start,
                l = r.end,
                c = r.collapse;
            if (3 == s.nodeType) {
                for (var u = 0; 4 > u; u++) {
                    for (; a && Pi(t.line.text.charAt(r.coverStart + a));) --a;
                    for (; r.coverStart + l < r.coverEnd && Pi(t.line.text.charAt(r.coverStart + l));) ++l;
                    if (pr && 9 > hr && 0 == a && l == r.coverEnd - r.coverStart) i = s.parentNode.getBoundingClientRect();
                    else if (pr && e.options.lineWrapping) {
                        var g = Os(s, a, l).getClientRects();
                        i = g.length ? g["right" == n ? g.length - 1 : 0] : Mr
                    } else i = Os(s, a, l).getBoundingClientRect() || Mr;
                    if (i.left || i.right || 0 == a) break;
                    l = a, a -= 1, c = "right"
                }
                pr && 11 > hr && (i = tt(e.display.measure, i))
            } else {
                a > 0 && (c = n = "right");
                var g;
                i = e.options.lineWrapping && (g = s.getClientRects()).length > 1 ? g["right" == n ? g.length - 1 : 0] : s.getBoundingClientRect()
            }
            if (pr && 9 > hr && !a && (!i || !i.left && !i.right)) {
                var p = s.parentNode.getClientRects()[0];
                i = p ? {
                    left: p.left,
                    right: p.left + mt(e.display),
                    top: p.top,
                    bottom: p.bottom
                } : Mr
            }
            for (var h = i.top - t.rect.top, d = i.bottom - t.rect.top, f = (h + d) / 2, m = t.view.measure.heights, u = 0; u < m.length - 1 && !(f < m[u]); u++);
            var y = u ? m[u - 1] : 0,
                v = m[u],
                _ = {
                    left: ("right" == c ? i.right : i.left) - t.rect.left,
                    right: ("left" == c ? i.left : i.right) - t.rect.left,
                    top: y,
                    bottom: v
                };
            return i.left || i.right || (_.bogus = !0), e.options.singleCursorHeightPerLine || (_.rtop = h, _.rbottom = d), _
        }

        function tt(e, t) {
            if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !qi(e)) return t;
            var o = screen.logicalXDPI / screen.deviceXDPI,
                n = screen.logicalYDPI / screen.deviceYDPI;
            return {
                left: t.left * o,
                right: t.right * o,
                top: t.top * n,
                bottom: t.bottom * n
            }
        }

        function ot(e) {
            if (e.measure && (e.measure.cache = {}, e.measure.heights = null, e.rest))
                for (var t = 0; t < e.rest.length; t++) e.measure.caches[t] = {}
        }

        function nt(e) {
            e.display.externalMeasure = null, Hi(e.display.lineMeasure);
            for (var t = 0; t < e.display.view.length; t++) ot(e.display.view[t])
        }

        function it(e) {
            nt(e), e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null, e.options.lineWrapping || (e.display.maxLineChanged = !0), e.display.lineNumChars = null
        }

        function rt() {
            return window.pageXOffset || (document.documentElement || document.body).scrollLeft
        }

        function st() {
            return window.pageYOffset || (document.documentElement || document.body).scrollTop
        }

        function at(e, t, o, n) {
            if (t.widgets)
                for (var i = 0; i < t.widgets.length; ++i)
                    if (t.widgets[i].above) {
                        var r = Cn(t.widgets[i]);
                        o.top += r, o.bottom += r
                    }
            if ("line" == n) return o;
            n || (n = "local");
            var s = Zn(t);
            if ("local" == n ? s += Ue(e.display) : s -= e.display.viewOffset, "page" == n || "window" == n) {
                var a = e.display.lineSpace.getBoundingClientRect();
                s += a.top + ("window" == n ? 0 : st());
                var l = a.left + ("window" == n ? 0 : rt());
                o.left += l, o.right += l
            }
            return o.top += s, o.bottom += s, o
        }

        function lt(e, t, o) {
            if ("div" == o) return t;
            var n = t.left,
                i = t.top;
            if ("page" == o) n -= rt(), i -= st();
            else if ("local" == o || !o) {
                var r = e.display.sizer.getBoundingClientRect();
                n += r.left, i += r.top
            }
            var s = e.display.lineSpace.getBoundingClientRect();
            return {
                left: n - s.left,
                top: i - s.top
            }
        }

        function ct(e, t, o, n, i) {
            return n || (n = Xn(e.doc, t.line)), at(e, n, qe(e, n, t.ch, i), o)
        }

        function ut(e, t, o, n, i, r) {
            function s(t, s) {
                var a = Je(e, i, t, s ? "right" : "left", r);
                return s ? a.left = a.right : a.right = a.left, at(e, n, a, o)
            }

            function a(e, t) {
                var o = l[t],
                    n = o.level % 2;
                return e == Qi(o) && t && o.level < l[t - 1].level ? (o = l[--t], e = Ji(o) - (o.level % 2 ? 0 : 1), n = !0) : e == Ji(o) && t < l.length - 1 && o.level < l[t + 1].level && (o = l[++t], e = Qi(o) - o.level % 2, n = !1), n && e == o.to && e > o.from ? s(e - 1) : s(e, n)
            }
            n = n || Xn(e.doc, t.line), i || (i = Qe(e, n));
            var l = ei(n),
                c = t.ch;
            if (!l) return s(c);
            var u = rr(l, c),
                g = a(c, u);
            return null != $s && (g.other = a(c, $s)), g
        }

        function gt(e, t) {
            var o = 0,
                t = de(e.doc, t);
            e.options.lineWrapping || (o = mt(e.display) * t.ch);
            var n = Xn(e.doc, t.line),
                i = Zn(n) + Ue(e.display);
            return {
                left: o,
                right: o,
                top: i,
                bottom: i + n.height
            }
        }

        function pt(e, t, o, n) {
            var i = Ir(e, t);
            return i.xRel = n, o && (i.outside = !0), i
        }

        function ht(e, t, o) {
            var n = e.doc;
            if (o += e.display.viewOffset, 0 > o) return pt(n.first, 0, !0, -1);
            var i = Jn(n, o),
                r = n.first + n.size - 1;
            if (i > r) return pt(n.first + n.size - 1, Xn(n, r).text.length, !0, 1);
            0 > t && (t = 0);
            for (var s = Xn(n, i);;) {
                var a = dt(e, s, i, t, o),
                    l = pn(s),
                    c = l && l.find(0, !0);
                if (!l || !(a.ch > c.from.ch || a.ch == c.from.ch && a.xRel > 0)) return a;
                i = Qn(s = c.to.line)
            }
        }

        function dt(e, t, o, n, i) {
            function r(n) {
                var i = ut(e, Ir(o, n), "line", t, c);
                return a = !0, s > i.bottom ? i.left - l : s < i.top ? i.left + l : (a = !1, i.left)
            }
            var s = i - Zn(t),
                a = !1,
                l = 2 * e.display.wrapper.clientWidth,
                c = Qe(e, t),
                u = ei(t),
                g = t.text.length,
                p = Zi(t),
                h = er(t),
                d = r(p),
                f = a,
                m = r(h),
                y = a;
            if (n > m) return pt(o, h, y, 1);
            for (;;) {
                if (u ? h == p || h == ar(t, p, 1) : 1 >= h - p) {
                    for (var v = d > n || m - n >= n - d ? p : h, _ = n - (v == p ? d : m); Pi(t.text.charAt(v));) ++v;
                    var b = pt(o, v, v == p ? f : y, -1 > _ ? -1 : _ > 1 ? 1 : 0);
                    return b
                }
                var C = Math.ceil(g / 2),
                    E = p + C;
                if (u) {
                    E = p;
                    for (var S = 0; C > S; ++S) E = ar(t, E, 1)
                }
                var T = r(E);
                T > n ? (h = E, m = T, (y = a) && (m += 1e3), g = C) : (p = E, d = T, f = a, g -= C)
            }
        }

        function ft(e) {
            if (null != e.cachedTextHeight) return e.cachedTextHeight;
            if (null == Lr) {
                Lr = Fi("pre");
                for (var t = 0; 49 > t; ++t) Lr.appendChild(document.createTextNode("x")), Lr.appendChild(Fi("br"));
                Lr.appendChild(document.createTextNode("x"))
            }
            Ui(e.measure, Lr);
            var o = Lr.offsetHeight / 50;
            return o > 3 && (e.cachedTextHeight = o), Hi(e.measure), o || 1
        }

        function mt(e) {
            if (null != e.cachedCharWidth) return e.cachedCharWidth;
            var t = Fi("span", "xxxxxxxxxx"),
                o = Fi("pre", [t]);
            Ui(e.measure, o);
            var n = t.getBoundingClientRect(),
                i = (n.right - n.left) / 10;
            return i > 2 && (e.cachedCharWidth = i), i || 10
        }

        function yt(e) {
            e.curOp = {
                cm: e,
                viewChanged: !1,
                startHeight: e.doc.height,
                forceUpdate: !1,
                updateInput: null,
                typing: !1,
                changeObjs: null,
                cursorActivityHandlers: null,
                cursorActivityCalled: 0,
                selectionChanged: !1,
                updateMaxLine: !1,
                scrollLeft: null,
                scrollTop: null,
                scrollToPos: null,
                focus: !1,
                id: ++Fr
            }, Pr ? Pr.ops.push(e.curOp) : e.curOp.ownsGroup = Pr = {
                ops: [e.curOp],
                delayedCallbacks: []
            }
        }

        function vt(e) {
            var t = e.delayedCallbacks,
                o = 0;
            do {
                for (; o < t.length; o++) t[o]();
                for (var n = 0; n < e.ops.length; n++) {
                    var i = e.ops[n];
                    if (i.cursorActivityHandlers)
                        for (; i.cursorActivityCalled < i.cursorActivityHandlers.length;) i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)
                }
            } while (o < t.length)
        }

        function _t(e) {
            var t = e.curOp,
                o = t.ownsGroup;
            if (o) try {
                vt(o)
            } finally {
                Pr = null;
                for (var n = 0; n < o.ops.length; n++) o.ops[n].cm.curOp = null;
                bt(o)
            }
        }

        function bt(e) {
            for (var t = e.ops, o = 0; o < t.length; o++) Ct(t[o]);
            for (var o = 0; o < t.length; o++) Et(t[o]);
            for (var o = 0; o < t.length; o++) St(t[o]);
            for (var o = 0; o < t.length; o++) Tt(t[o]);
            for (var o = 0; o < t.length; o++) kt(t[o])
        }

        function Ct(e) {
            var t = e.cm,
                o = t.display;
            A(t), e.updateMaxLine && p(t), e.mustUpdate = e.viewChanged || e.forceUpdate || null != e.scrollTop || e.scrollToPos && (e.scrollToPos.from.line < o.viewFrom || e.scrollToPos.to.line >= o.viewTo) || o.maxLineChanged && t.options.lineWrapping, e.update = e.mustUpdate && new k(t, e.mustUpdate && {
                top: e.scrollTop,
                ensure: e.scrollToPos
            }, e.forceUpdate)
        }

        function Et(e) {
            e.updatedDisplay = e.mustUpdate && B(e.cm, e.update)
        }

        function St(e) {
            var t = e.cm,
                o = t.display;
            e.updatedDisplay && N(t), e.barMeasure = d(t), o.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = qe(t, o.maxLine, o.maxLine.text.length).left + 3, t.display.sizerWidth = e.adjustWidthTo, e.barMeasure.scrollWidth = Math.max(o.scroller.clientWidth, o.sizer.offsetLeft + e.adjustWidthTo + Ge(t) + t.display.barWidth), e.maxScrollLeft = Math.max(0, o.sizer.offsetLeft + e.adjustWidthTo - Ke(t))), (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = o.input.prepareSelection())
        }

        function Tt(e) {
            var t = e.cm;
            null != e.adjustWidthTo && (t.display.sizer.style.minWidth = e.adjustWidthTo + "px", e.maxScrollLeft < t.doc.scrollLeft && Zt(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0), t.display.maxLineChanged = !1), e.preparedSelection && t.display.input.showSelection(e.preparedSelection), e.updatedDisplay && I(t, e.barMeasure), (e.updatedDisplay || e.startHeight != t.doc.height) && v(t, e.barMeasure), e.selectionChanged && De(t), t.state.focused && e.updateInput && t.display.input.reset(e.typing), e.focus && e.focus == Vi() && $(e.cm)
        }

        function kt(e) {
            var t = e.cm,
                o = t.display,
                n = t.doc;
            if (e.updatedDisplay && x(t, e.update), null == o.wheelStartX || null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos || (o.wheelStartX = o.wheelStartY = null), null == e.scrollTop || o.scroller.scrollTop == e.scrollTop && !e.forceScroll || (n.scrollTop = Math.max(0, Math.min(o.scroller.scrollHeight - o.scroller.clientHeight, e.scrollTop)), o.scrollbars.setScrollTop(n.scrollTop), o.scroller.scrollTop = n.scrollTop), null == e.scrollLeft || o.scroller.scrollLeft == e.scrollLeft && !e.forceScroll || (n.scrollLeft = Math.max(0, Math.min(o.scroller.scrollWidth - Ke(t), e.scrollLeft)), o.scrollbars.setScrollLeft(n.scrollLeft), o.scroller.scrollLeft = n.scrollLeft, C(t)), e.scrollToPos) {
                var i = wo(t, de(n, e.scrollToPos.from), de(n, e.scrollToPos.to), e.scrollToPos.margin);
                e.scrollToPos.isCursor && t.state.focused && xo(t, i)
            }
            var r = e.maybeHiddenMarkers,
                s = e.maybeUnhiddenMarkers;
            if (r)
                for (var a = 0; a < r.length; ++a) r[a].lines.length || Ts(r[a], "hide");
            if (s)
                for (var a = 0; a < s.length; ++a) s[a].lines.length && Ts(s[a], "unhide");
            o.wrapper.offsetHeight && (n.scrollTop = t.display.scroller.scrollTop), e.changeObjs && Ts(t, "changes", t, e.changeObjs), e.update && e.update.finish()
        }

        function At(e, t) {
            if (e.curOp) return t();
            yt(e);
            try {
                return t()
            } finally {
                _t(e)
            }
        }

        function Bt(e, t) {
            return function() {
                if (e.curOp) return t.apply(e, arguments);
                yt(e);
                try {
                    return t.apply(e, arguments)
                } finally {
                    _t(e)
                }
            }
        }

        function xt(e) {
            return function() {
                if (this.curOp) return e.apply(this, arguments);
                yt(this);
                try {
                    return e.apply(this, arguments)
                } finally {
                    _t(this)
                }
            }
        }

        function wt(e) {
            return function() {
                var t = this.cm;
                if (!t || t.curOp) return e.apply(this, arguments);
                yt(t);
                try {
                    return e.apply(this, arguments)
                } finally {
                    _t(t)
                }
            }
        }

        function It(e, t, o) {
            this.line = t, this.rest = fn(t), this.size = this.rest ? Qn(xi(this.rest)) - o + 1 : 1, this.node = this.text = null, this.hidden = vn(e, t)
        }

        function Nt(e, t, o) {
            for (var n, i = [], r = t; o > r; r = n) {
                var s = new It(e.doc, Xn(e.doc, r), r);
                n = r + s.size, i.push(s)
            }
            return i
        }

        function Rt(e, t, o, n) {
            null == t && (t = e.doc.first), null == o && (o = e.doc.first + e.doc.size), n || (n = 0);
            var i = e.display;
            if (n && o < i.viewTo && (null == i.updateLineNumbers || i.updateLineNumbers > t) && (i.updateLineNumbers = t), e.curOp.viewChanged = !0, t >= i.viewTo) wr && mn(e.doc, t) < i.viewTo && Ot(e);
            else if (o <= i.viewFrom) wr && yn(e.doc, o + n) > i.viewFrom ? Ot(e) : (i.viewFrom += n, i.viewTo += n);
            else if (t <= i.viewFrom && o >= i.viewTo) Ot(e);
            else if (t <= i.viewFrom) {
                var r = Mt(e, o, o + n, 1);
                r ? (i.view = i.view.slice(r.index), i.viewFrom = r.lineN, i.viewTo += n) : Ot(e)
            } else if (o >= i.viewTo) {
                var r = Mt(e, t, t, -1);
                r ? (i.view = i.view.slice(0, r.index), i.viewTo = r.lineN) : Ot(e)
            } else {
                var s = Mt(e, t, t, -1),
                    a = Mt(e, o, o + n, 1);
                s && a ? (i.view = i.view.slice(0, s.index).concat(Nt(e, s.lineN, a.lineN)).concat(i.view.slice(a.index)), i.viewTo += n) : Ot(e)
            }
            var l = i.externalMeasured;
            l && (o < l.lineN ? l.lineN += n : t < l.lineN + l.size && (i.externalMeasured = null))
        }

        function Lt(e, t, o) {
            e.curOp.viewChanged = !0;
            var n = e.display,
                i = e.display.externalMeasured;
            if (i && t >= i.lineN && t < i.lineN + i.size && (n.externalMeasured = null), !(t < n.viewFrom || t >= n.viewTo)) {
                var r = n.view[Dt(e, t)];
                if (null != r.node) {
                    var s = r.changes || (r.changes = []); - 1 == wi(s, o) && s.push(o)
                }
            }
        }

        function Ot(e) {
            e.display.viewFrom = e.display.viewTo = e.doc.first, e.display.view = [], e.display.viewOffset = 0
        }

        function Dt(e, t) {
            if (t >= e.display.viewTo) return null;
            if (t -= e.display.viewFrom, 0 > t) return null;
            for (var o = e.display.view, n = 0; n < o.length; n++)
                if (t -= o[n].size, 0 > t) return n
        }

        function Mt(e, t, o, n) {
            var i, r = Dt(e, t),
                s = e.display.view;
            if (!wr || o == e.doc.first + e.doc.size) return {
                index: r,
                lineN: o
            };
            for (var a = 0, l = e.display.viewFrom; r > a; a++) l += s[a].size;
            if (l != t) {
                if (n > 0) {
                    if (r == s.length - 1) return null;
                    i = l + s[r].size - t, r++
                } else i = l - t;
                t += i, o += i
            }
            for (; mn(e.doc, o) != o;) {
                if (r == (0 > n ? 0 : s.length - 1)) return null;
                o += n * s[r - (0 > n ? 1 : 0)].size, r += n
            }
            return {
                index: r,
                lineN: o
            }
        }

        function Pt(e, t, o) {
            var n = e.display,
                i = n.view;
            0 == i.length || t >= n.viewTo || o <= n.viewFrom ? (n.view = Nt(e, t, o), n.viewFrom = t) : (n.viewFrom > t ? n.view = Nt(e, t, n.viewFrom).concat(n.view) : n.viewFrom < t && (n.view = n.view.slice(Dt(e, t))), n.viewFrom = t, n.viewTo < o ? n.view = n.view.concat(Nt(e, n.viewTo, o)) : n.viewTo > o && (n.view = n.view.slice(0, Dt(e, o)))), n.viewTo = o
        }

        function Ft(e) {
            for (var t = e.display.view, o = 0, n = 0; n < t.length; n++) {
                var i = t[n];
                i.hidden || i.node && !i.changes || ++o
            }
            return o
        }

        function Ht(e) {
            function t() {
                i.activeTouch && (r = setTimeout(function() {
                    i.activeTouch = null
                }, 1e3), s = i.activeTouch, s.end = +new Date)
            }

            function o(e) {
                if (1 != e.touches.length) return !1;
                var t = e.touches[0];
                return t.radiusX <= 1 && t.radiusY <= 1
            }

            function n(e, t) {
                if (null == t.left) return !0;
                var o = t.left - e.left,
                    n = t.top - e.top;
                return o * o + n * n > 400
            }
            var i = e.display;
            Es(i.scroller, "mousedown", Bt(e, Kt)), pr && 11 > hr ? Es(i.scroller, "dblclick", Bt(e, function(t) {
                if (!Ci(e, t)) {
                    var o = Gt(e, t);
                    if (o && !qt(e, t) && !Wt(e.display, t)) {
                        _s(t);
                        var n = e.findWordAt(o);
                        _e(e.doc, n.anchor, n.head)
                    }
                }
            })) : Es(i.scroller, "dblclick", function(t) {
                Ci(e, t) || _s(t)
            }), Br || Es(i.scroller, "contextmenu", function(t) {
                ho(e, t)
            });
            var r, s = {
                end: 0
            };
            Es(i.scroller, "touchstart", function(e) {
                if (!o(e)) {
                    clearTimeout(r);
                    var t = +new Date;
                    i.activeTouch = {
                        start: t,
                        moved: !1,
                        prev: t - s.end <= 300 ? s : null
                    }, 1 == e.touches.length && (i.activeTouch.left = e.touches[0].pageX, i.activeTouch.top = e.touches[0].pageY)
                }
            }), Es(i.scroller, "touchmove", function() {
                i.activeTouch && (i.activeTouch.moved = !0)
            }), Es(i.scroller, "touchend", function(o) {
                var r = i.activeTouch;
                if (r && !Wt(i, o) && null != r.left && !r.moved && new Date - r.start < 300) {
                    var s, a = e.coordsChar(i.activeTouch, "page");
                    s = !r.prev || n(r, r.prev) ? new ue(a, a) : !r.prev.prev || n(r, r.prev.prev) ? e.findWordAt(a) : new ue(Ir(a.line, 0), de(e.doc, Ir(a.line + 1, 0))), e.setSelection(s.anchor, s.head), e.focus(), _s(o)
                }
                t()
            }), Es(i.scroller, "touchcancel", t), Es(i.scroller, "scroll", function() {
                i.scroller.clientHeight && (Jt(e, i.scroller.scrollTop), Zt(e, i.scroller.scrollLeft, !0), Ts(e, "scroll", e))
            }), Es(i.scroller, "mousewheel", function(t) {
                eo(e, t)
            }), Es(i.scroller, "DOMMouseScroll", function(t) {
                eo(e, t)
            }), Es(i.wrapper, "scroll", function() {
                i.wrapper.scrollTop = i.wrapper.scrollLeft = 0
            }), i.dragFunctions = {
                simple: function(t) {
                    Ci(e, t) || Cs(t)
                },
                start: function(t) {
                    Qt(e, t)
                },
                drop: Bt(e, $t)
            };
            var a = i.input.getField();
            Es(a, "keyup", function(t) {
                lo.call(e, t)
            }), Es(a, "keydown", Bt(e, so)), Es(a, "keypress", Bt(e, co)), Es(a, "focus", Oi(go, e)), Es(a, "blur", Oi(po, e))
        }

        function Ut(t, o, n) {
            var i = n && n != e.Init;
            if (!o != !i) {
                var r = t.display.dragFunctions,
                    s = o ? Es : Ss;
                s(t.display.scroller, "dragstart", r.start), s(t.display.scroller, "dragenter", r.simple), s(t.display.scroller, "dragover", r.simple), s(t.display.scroller, "drop", r.drop)
            }
        }

        function Vt(e) {
            var t = e.display;
            t.lastWrapHeight == t.wrapper.clientHeight && t.lastWrapWidth == t.wrapper.clientWidth || (t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null, t.scrollbarsClipped = !1, e.setSize())
        }

        function Wt(e, t) {
            for (var o = yi(t); o != e.wrapper; o = o.parentNode)
                if (!o || 1 == o.nodeType && "true" == o.getAttribute("cm-ignore-events") || o.parentNode == e.sizer && o != e.mover) return !0
        }

        function Gt(e, t, o, n) {
            var i = e.display;
            if (!o && "true" == yi(t).getAttribute("cm-not-content")) return null;
            var r, s, a = i.lineSpace.getBoundingClientRect();
            try {
                r = t.clientX - a.left, s = t.clientY - a.top
            } catch (t) {
                return null
            }
            var l, c = ht(e, r, s);
            if (n && 1 == c.xRel && (l = Xn(e.doc, c.line).text).length == c.ch) {
                var u = Ns(l, l.length, e.options.tabSize) - l.length;
                c = Ir(c.line, Math.max(0, Math.round((r - We(e.display).left) / mt(e.display)) - u))
            }
            return c
        }

        function Kt(e) {
            var t = this,
                o = t.display;
            if (!(o.activeTouch && o.input.supportsTouch() || Ci(t, e))) {
                if (o.shift = e.shiftKey, Wt(o, e)) return void(dr || (o.scroller.draggable = !1, setTimeout(function() {
                    o.scroller.draggable = !0
                }, 100)));
                if (!qt(t, e)) {
                    var n = Gt(t, e);
                    switch (window.focus(), vi(e)) {
                        case 1:
                            n ? jt(t, e, n) : yi(e) == o.scroller && _s(e);
                            break;
                        case 2:
                            dr && (t.state.lastMiddleDown = +new Date), n && _e(t.doc, n), setTimeout(function() {
                                o.input.focus()
                            }, 20), _s(e);
                            break;
                        case 3:
                            Br ? ho(t, e) : uo(t)
                    }
                }
            }
        }

        function jt(e, t, o) {
            pr ? setTimeout(Oi($, e), 0) : e.curOp.focus = Vi();
            var n, i = +new Date;
            Dr && Dr.time > i - 400 && 0 == Nr(Dr.pos, o) ? n = "triple" : Or && Or.time > i - 400 && 0 == Nr(Or.pos, o) ? (n = "double", Dr = {
                time: i,
                pos: o
            }) : (n = "single", Or = {
                time: i,
                pos: o
            });
            var r, s = e.doc.sel,
                a = Sr ? t.metaKey : t.ctrlKey;
            e.options.dragDrop && Ks && !Q(e) && "single" == n && (r = s.contains(o)) > -1 && !s.ranges[r].empty() ? Yt(e, t, o, a) : Xt(e, t, o, n, a)
        }

        function Yt(e, t, o, n) {
            var i = e.display,
                r = +new Date,
                s = Bt(e, function(a) {
                    dr && (i.scroller.draggable = !1), e.state.draggingText = !1, Ss(document, "mouseup", s), Ss(i.scroller, "drop", s), Math.abs(t.clientX - a.clientX) + Math.abs(t.clientY - a.clientY) < 10 && (_s(a), !n && +new Date - 200 < r && _e(e.doc, o), dr || pr && 9 == hr ? setTimeout(function() {
                        document.body.focus(), i.input.focus()
                    }, 20) : i.input.focus())
                });
            dr && (i.scroller.draggable = !0), e.state.draggingText = s, i.scroller.dragDrop && i.scroller.dragDrop(), Es(document, "mouseup", s), Es(i.scroller, "drop", s)
        }

        function Xt(e, t, o, n, i) {
            function r(t) {
                if (0 != Nr(m, t))
                    if (m = t, "rect" == n) {
                        for (var i = [], r = e.options.tabSize, s = Ns(Xn(c, o.line).text, o.ch, r), a = Ns(Xn(c, t.line).text, t.ch, r), l = Math.min(s, a), h = Math.max(s, a), d = Math.min(o.line, t.line), f = Math.min(e.lastLine(), Math.max(o.line, t.line)); f >= d; d++) {
                            var y = Xn(c, d).text,
                                v = Ai(y, l, r);
                            l == h ? i.push(new ue(Ir(d, v), Ir(d, v))) : y.length > v && i.push(new ue(Ir(d, v), Ir(d, Ai(y, h, r))))
                        }
                        i.length || i.push(new ue(o, o)), ke(c, ge(p.ranges.slice(0, g).concat(i), g), {
                            origin: "*mouse",
                            scroll: !1
                        }), e.scrollIntoView(t)
                    } else {
                        var _ = u,
                            b = _.anchor,
                            C = t;
                        if ("single" != n) {
                            if ("double" == n) var E = e.findWordAt(t);
                            else var E = new ue(Ir(t.line, 0), de(c, Ir(t.line + 1, 0)));
                            Nr(E.anchor, b) > 0 ? (C = E.head, b = q(_.from(), E.anchor)) : (C = E.anchor, b = z(_.to(), E.head))
                        }
                        var i = p.ranges.slice(0);
                        i[g] = new ue(de(c, b), C), ke(c, ge(i, g), ws)
                    }
            }

            function s(t) {
                var o = ++v,
                    i = Gt(e, t, !0, "rect" == n);
                if (i)
                    if (0 != Nr(i, m)) {
                        e.curOp.focus = Vi(), r(i);
                        var a = b(l, c);
                        (i.line >= a.to || i.line < a.from) && setTimeout(Bt(e, function() {
                            v == o && s(t)
                        }), 150)
                    } else {
                        var u = t.clientY < y.top ? -20 : t.clientY > y.bottom ? 20 : 0;
                        u && setTimeout(Bt(e, function() {
                            v == o && (l.scroller.scrollTop += u, s(t))
                        }), 50)
                    }
            }

            function a(e) {
                v = 1 / 0, _s(e), l.input.focus(), Ss(document, "mousemove", _), Ss(document, "mouseup", C), c.history.lastSelOrigin = null
            }
            var l = e.display,
                c = e.doc;
            _s(t);
            var u, g, p = c.sel,
                h = p.ranges;
            if (i && !t.shiftKey ? (g = c.sel.contains(o), u = g > -1 ? h[g] : new ue(o, o)) : (u = c.sel.primary(), g = c.sel.primIndex), t.altKey) n = "rect", i || (u = new ue(o, o)), o = Gt(e, t, !0, !0), g = -1;
            else if ("double" == n) {
                var d = e.findWordAt(o);
                u = e.display.shift || c.extend ? ve(c, u, d.anchor, d.head) : d
            } else if ("triple" == n) {
                var f = new ue(Ir(o.line, 0), de(c, Ir(o.line + 1, 0)));
                u = e.display.shift || c.extend ? ve(c, u, f.anchor, f.head) : f
            } else u = ve(c, u, o);
            i ? -1 == g ? (g = h.length, ke(c, ge(h.concat([u]), g), {
                scroll: !1,
                origin: "*mouse"
            })) : h.length > 1 && h[g].empty() && "single" == n && !t.shiftKey ? (ke(c, ge(h.slice(0, g).concat(h.slice(g + 1)), 0)), p = c.sel) : Ce(c, g, u, ws) : (g = 0, ke(c, new ce([u], 0), ws), p = c.sel);
            var m = o,
                y = l.wrapper.getBoundingClientRect(),
                v = 0,
                _ = Bt(e, function(e) {
                    vi(e) ? s(e) : a(e)
                }),
                C = Bt(e, a);
            Es(document, "mousemove", _), Es(document, "mouseup", C)
        }

        function zt(e, t, o, n, i) {
            try {
                var r = t.clientX,
                    s = t.clientY
            } catch (t) {
                return !1
            }
            if (r >= Math.floor(e.display.gutters.getBoundingClientRect().right)) return !1;
            n && _s(t);
            var a = e.display,
                l = a.lineDiv.getBoundingClientRect();
            if (s > l.bottom || !Si(e, o)) return mi(t);
            s -= l.top - a.viewOffset;
            for (var c = 0; c < e.options.gutters.length; ++c) {
                var u = a.gutters.childNodes[c];
                if (u && u.getBoundingClientRect().right >= r) {
                    var g = Jn(e.doc, s),
                        p = e.options.gutters[c];
                    return i(e, o, e, g, p, t), mi(t)
                }
            }
        }

        function qt(e, t) {
            return zt(e, t, "gutterClick", !0, _i)
        }

        function $t(e) {
            var t = this;
            if (!Ci(t, e) && !Wt(t.display, e)) {
                _s(e), pr && (Hr = +new Date);
                var o = Gt(t, e, !0),
                    n = e.dataTransfer.files;
                if (o && !Q(t))
                    if (n && n.length && window.FileReader && window.File)
                        for (var i = n.length, r = Array(i), s = 0, a = function(e, n) {
                                var a = new FileReader;
                                a.onload = Bt(t, function() {
                                    if (r[n] = a.result, ++s == i) {
                                        o = de(t.doc, o);
                                        var e = {
                                            from: o,
                                            to: o,
                                            text: js(r.join("\n")),
                                            origin: "paste"
                                        };
                                        Co(t.doc, e), Te(t.doc, pe(o, jr(e)))
                                    }
                                }), a.readAsText(e)
                            }, l = 0; i > l; ++l) a(n[l], l);
                    else {
                        if (t.state.draggingText && t.doc.sel.contains(o) > -1) return t.state.draggingText(e), void setTimeout(function() {
                            t.display.input.focus()
                        }, 20);
                        try {
                            var r = e.dataTransfer.getData("Text");
                            if (r) {
                                if (t.state.draggingText && !(Sr ? e.altKey : e.ctrlKey)) var c = t.listSelections();
                                if (Ae(t.doc, pe(o, o)), c)
                                    for (var l = 0; l < c.length; ++l) Bo(t.doc, "", c[l].anchor, c[l].head, "drag");
                                t.replaceSelection(r, "around", "paste"), t.display.input.focus()
                            }
                        } catch (e) {}
                    }
            }
        }

        function Qt(e, t) {
            if (pr && (!e.state.draggingText || +new Date - Hr < 100)) return void Cs(t);
            if (!Ci(e, t) && !Wt(e.display, t) && (t.dataTransfer.setData("Text", e.getSelection()), t.dataTransfer.setDragImage && !vr)) {
                var o = Fi("img", null, null, "position: fixed; left: 0; top: 0;");
                o.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==", yr && (o.width = o.height = 1, e.display.wrapper.appendChild(o), o._top = o.offsetTop), t.dataTransfer.setDragImage(o, 0, 0), yr && o.parentNode.removeChild(o)
            }
        }

        function Jt(e, t) {
            Math.abs(e.doc.scrollTop - t) < 2 || (e.doc.scrollTop = t, cr || w(e, {
                top: t
            }), e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t), e.display.scrollbars.setScrollTop(t), cr && w(e), Me(e, 100))
        }

        function Zt(e, t, o) {
            (o ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) || (t = Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth), e.doc.scrollLeft = t, C(e), e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t), e.display.scrollbars.setScrollLeft(t))
        }

        function eo(e, t) {
            var o = Wr(t),
                n = o.x,
                i = o.y,
                r = e.display,
                s = r.scroller;
            if (n && s.scrollWidth > s.clientWidth || i && s.scrollHeight > s.clientHeight) {
                if (i && Sr && dr) e: for (var a = t.target, l = r.view; a != s; a = a.parentNode)
                    for (var c = 0; c < l.length; c++)
                        if (l[c].node == a) {
                            e.display.currentWheelTarget = a;
                            break e
                        }
                if (n && !cr && !yr && null != Vr) return i && Jt(e, Math.max(0, Math.min(s.scrollTop + i * Vr, s.scrollHeight - s.clientHeight))), Zt(e, Math.max(0, Math.min(s.scrollLeft + n * Vr, s.scrollWidth - s.clientWidth))), _s(t), void(r.wheelStartX = null);
                if (i && null != Vr) {
                    var u = i * Vr,
                        g = e.doc.scrollTop,
                        p = g + r.wrapper.clientHeight;
                    0 > u ? g = Math.max(0, g + u - 50) : p = Math.min(e.doc.height, p + u + 50), w(e, {
                        top: g,
                        bottom: p
                    })
                }
                20 > Ur && (null == r.wheelStartX ? (r.wheelStartX = s.scrollLeft, r.wheelStartY = s.scrollTop, r.wheelDX = n, r.wheelDY = i, setTimeout(function() {
                    if (null != r.wheelStartX) {
                        var e = s.scrollLeft - r.wheelStartX,
                            t = s.scrollTop - r.wheelStartY,
                            o = t && r.wheelDY && t / r.wheelDY || e && r.wheelDX && e / r.wheelDX;
                        r.wheelStartX = r.wheelStartY = null, o && (Vr = (Vr * Ur + o) / (Ur + 1), ++Ur)
                    }
                }, 200)) : (r.wheelDX += n, r.wheelDY += i))
            }
        }

        function to(e, t, o) {
            if ("string" == typeof t && (t = os[t], !t)) return !1;
            e.display.input.ensurePolled();
            var n = e.display.shift,
                i = !1;
            try {
                Q(e) && (e.state.suppressEdits = !0), o && (e.display.shift = !1), i = t(e) != Bs
            } finally {
                e.display.shift = n, e.state.suppressEdits = !1
            }
            return i
        }

        function oo(e, t, o) {
            for (var n = 0; n < e.state.keyMaps.length; n++) {
                var i = is(t, e.state.keyMaps[n], o, e);
                if (i) return i
            }
            return e.options.extraKeys && is(t, e.options.extraKeys, o, e) || is(t, e.options.keyMap, o, e)
        }

        function no(e, t, o, n) {
            var i = e.state.keySeq;
            if (i) {
                if (rs(t)) return "handled";
                Gr.set(50, function() {
                    e.state.keySeq == i && (e.state.keySeq = null, e.display.input.reset())
                }), t = i + " " + t
            }
            var r = oo(e, t, n);
            return "multi" == r && (e.state.keySeq = t), "handled" == r && _i(e, "keyHandled", e, t, o), "handled" != r && "multi" != r || (_s(o), De(e)), i && !r && /\'$/.test(t) ? (_s(o), !0) : !!r
        }

        function io(e, t) {
            var o = ss(t, !0);
            return o ? t.shiftKey && !e.state.keySeq ? no(e, "Shift-" + o, t, function(t) {
                return to(e, t, !0)
            }) || no(e, o, t, function(t) {
                return ("string" == typeof t ? /^go[A-Z]/.test(t) : t.motion) ? to(e, t) : void 0
            }) : no(e, o, t, function(t) {
                return to(e, t)
            }) : !1
        }

        function ro(e, t, o) {
            return no(e, "'" + o + "'", t, function(t) {
                return to(e, t, !0)
            })
        }

        function so(e) {
            var t = this;
            if (t.curOp.focus = Vi(), !Ci(t, e)) {
                pr && 11 > hr && 27 == e.keyCode && (e.returnValue = !1);
                var o = e.keyCode;
                t.display.shift = 16 == o || e.shiftKey;
                var n = io(t, e);
                yr && (Kr = n ? o : null, !n && 88 == o && !Xs && (Sr ? e.metaKey : e.ctrlKey) && t.replaceSelection("", null, "cut")), 18 != o || /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) || ao(t)
            }
        }

        function ao(e) {
            function t(e) {
                18 != e.keyCode && e.altKey || (Vs(o, "CodeMirror-crosshair"), Ss(document, "keyup", t), Ss(document, "mouseover", t))
            }
            var o = e.display.lineDiv;
            Ws(o, "CodeMirror-crosshair"), Es(document, "keyup", t), Es(document, "mouseover", t)
        }

        function lo(e) {
            16 == e.keyCode && (this.doc.sel.shift = !1), Ci(this, e)
        }

        function co(e) {
            var t = this;
            if (!(Wt(t.display, e) || Ci(t, e) || e.ctrlKey && !e.altKey || Sr && e.metaKey)) {
                var o = e.keyCode,
                    n = e.charCode;
                if (yr && o == Kr) return Kr = null, void _s(e);
                if (!yr || e.which && !(e.which < 10) || !io(t, e)) {
                    var i = String.fromCharCode(null == n ? o : n);
                    ro(t, e, i) || t.display.input.onKeyPress(e)
                }
            }
        }

        function uo(e) {
            e.state.delayingBlurEvent = !0, setTimeout(function() {
                e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1, po(e))
            }, 100)
        }

        function go(e) {
            e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1), "nocursor" != e.options.readOnly && (e.state.focused || (Ts(e, "focus", e), e.state.focused = !0, Ws(e.display.wrapper, "CodeMirror-focused"), e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(), dr && setTimeout(function() {
                e.display.input.reset(!0)
            }, 20)), e.display.input.receivedFocus()), De(e))
        }

        function po(e) {
            e.state.delayingBlurEvent || (e.state.focused && (Ts(e, "blur", e), e.state.focused = !1, Vs(e.display.wrapper, "CodeMirror-focused")), clearInterval(e.display.blinker), setTimeout(function() {
                e.state.focused || (e.display.shift = !1)
            }, 150))
        }

        function ho(e, t) {
            Wt(e.display, t) || fo(e, t) || e.display.input.onContextMenu(t)
        }

        function fo(e, t) {
            return Si(e, "gutterContextMenu") ? zt(e, t, "gutterContextMenu", !1, Ts) : !1
        }

        function mo(e, t) {
            if (Nr(e, t.from) < 0) return e;
            if (Nr(e, t.to) <= 0) return jr(t);
            var o = e.line + t.text.length - (t.to.line - t.from.line) - 1,
                n = e.ch;
            return e.line == t.to.line && (n += jr(t).ch - t.to.ch), Ir(o, n)
        }

        function yo(e, t) {
            for (var o = [], n = 0; n < e.sel.ranges.length; n++) {
                var i = e.sel.ranges[n];
                o.push(new ue(mo(i.anchor, t), mo(i.head, t)))
            }
            return ge(o, e.sel.primIndex)
        }

        function vo(e, t, o) {
            return e.line == t.line ? Ir(o.line, e.ch - t.ch + o.ch) : Ir(o.line + (e.line - t.line), e.ch)
        }

        function _o(e, t, o) {
            for (var n = [], i = Ir(e.first, 0), r = i, s = 0; s < t.length; s++) {
                var a = t[s],
                    l = vo(a.from, i, r),
                    c = vo(jr(a), i, r);
                if (i = a.to, r = c, "around" == o) {
                    var u = e.sel.ranges[s],
                        g = Nr(u.head, u.anchor) < 0;
                    n[s] = new ue(g ? c : l, g ? l : c)
                } else n[s] = new ue(l, l)
            }
            return new ce(n, e.sel.primIndex)
        }

        function bo(e, t, o) {
            var n = {
                canceled: !1,
                from: t.from,
                to: t.to,
                text: t.text,
                origin: t.origin,
                cancel: function() {
                    this.canceled = !0
                }
            };
            return o && (n.update = function(t, o, n, i) {
                t && (this.from = de(e, t)), o && (this.to = de(e, o)), n && (this.text = n), void 0 !== i && (this.origin = i)
            }), Ts(e, "beforeChange", e, n), e.cm && Ts(e.cm, "beforeChange", e.cm, n), n.canceled ? null : {
                from: n.from,
                to: n.to,
                text: n.text,
                origin: n.origin
            }
        }

        function Co(e, t, o) {
            if (e.cm) {
                if (!e.cm.curOp) return Bt(e.cm, Co)(e, t, o);
                if (e.cm.state.suppressEdits) return
            }
            if (!(Si(e, "beforeChange") || e.cm && Si(e.cm, "beforeChange")) || (t = bo(e, t, !0))) {
                var n = xr && !o && nn(e, t.from, t.to);
                if (n)
                    for (var i = n.length - 1; i >= 0; --i) Eo(e, {
                        from: n[i].from,
                        to: n[i].to,
                        text: i ? [""] : t.text
                    });
                else Eo(e, t)
            }
        }

        function Eo(e, t) {
            if (1 != t.text.length || "" != t.text[0] || 0 != Nr(t.from, t.to)) {
                var o = yo(e, t);
                ri(e, t, o, e.cm ? e.cm.curOp.id : NaN), ko(e, t, o, en(e, t));
                var n = [];
                jn(e, function(e, o) {
                    o || -1 != wi(n, e.history) || (fi(e.history, t), n.push(e.history)), ko(e, t, null, en(e, t))
                })
            }
        }

        function So(e, t, o) {
            if (!e.cm || !e.cm.state.suppressEdits) {
                for (var n, i = e.history, r = e.sel, s = "undo" == t ? i.done : i.undone, a = "undo" == t ? i.undone : i.done, l = 0; l < s.length && (n = s[l], o ? !n.ranges || n.equals(e.sel) : n.ranges); l++);
                if (l != s.length) {
                    for (i.lastOrigin = i.lastSelOrigin = null; n = s.pop(), n.ranges;) {
                        if (li(n, a), o && !n.equals(e.sel)) return void ke(e, n, {
                            clearRedo: !1
                        });
                        r = n
                    }
                    var c = [];
                    li(r, a), a.push({
                        changes: c,
                        generation: i.generation
                    }), i.generation = n.generation || ++i.maxGeneration;
                    for (var u = Si(e, "beforeChange") || e.cm && Si(e.cm, "beforeChange"), l = n.changes.length - 1; l >= 0; --l) {
                        var g = n.changes[l];
                        if (g.origin = t, u && !bo(e, g, !1)) return void(s.length = 0);
                        c.push(oi(e, g));
                        var p = l ? yo(e, g) : xi(s);
                        ko(e, g, p, on(e, g)), !l && e.cm && e.cm.scrollIntoView({
                            from: g.from,
                            to: jr(g)
                        });
                        var h = [];
                        jn(e, function(e, t) {
                            t || -1 != wi(h, e.history) || (fi(e.history, g), h.push(e.history)), ko(e, g, null, on(e, g))
                        })
                    }
                }
            }
        }

        function To(e, t) {
            if (0 != t && (e.first += t, e.sel = new ce(Ii(e.sel.ranges, function(e) {
                    return new ue(Ir(e.anchor.line + t, e.anchor.ch), Ir(e.head.line + t, e.head.ch))
                }), e.sel.primIndex), e.cm)) {
                Rt(e.cm, e.first, e.first - t, t);
                for (var o = e.cm.display, n = o.viewFrom; n < o.viewTo; n++) Lt(e.cm, n, "gutter")
            }
        }

        function ko(e, t, o, n) {
            if (e.cm && !e.cm.curOp) return Bt(e.cm, ko)(e, t, o, n);
            if (t.to.line < e.first) return void To(e, t.text.length - 1 - (t.to.line - t.from.line));
            if (!(t.from.line > e.lastLine())) {
                if (t.from.line < e.first) {
                    var i = t.text.length - 1 - (e.first - t.from.line);
                    To(e, i), t = {
                        from: Ir(e.first, 0),
                        to: Ir(t.to.line + i, t.to.ch),
                        text: [xi(t.text)],
                        origin: t.origin
                    }
                }
                var r = e.lastLine();
                t.to.line > r && (t = {
                    from: t.from,
                    to: Ir(r, Xn(e, r).text.length),
                    text: [t.text[0]],
                    origin: t.origin
                }), t.removed = zn(e, t.from, t.to), o || (o = yo(e, t)), e.cm ? Ao(e.cm, t, n) : Wn(e, t, n), Ae(e, o, xs)
            }
        }

        function Ao(e, t, o) {
            var n = e.doc,
                i = e.display,
                s = t.from,
                a = t.to,
                l = !1,
                c = s.line;
            e.options.lineWrapping || (c = Qn(dn(Xn(n, s.line))), n.iter(c, a.line + 1, function(e) {
                return e == i.maxLine ? (l = !0, !0) : void 0
            })), n.sel.contains(t.from, t.to) > -1 && Ei(e), Wn(n, t, o, r(e)), e.options.lineWrapping || (n.iter(c, s.line + t.text.length, function(e) {
                var t = g(e);
                t > i.maxLineLength && (i.maxLine = e, i.maxLineLength = t, i.maxLineChanged = !0, l = !1)
            }), l && (e.curOp.updateMaxLine = !0)), n.frontier = Math.min(n.frontier, s.line), Me(e, 400);
            var u = t.text.length - (a.line - s.line) - 1;
            t.full ? Rt(e) : s.line != a.line || 1 != t.text.length || Vn(e.doc, t) ? Rt(e, s.line, a.line + 1, u) : Lt(e, s.line, "text");
            var p = Si(e, "changes"),
                h = Si(e, "change");
            if (h || p) {
                var d = {
                    from: s,
                    to: a,
                    text: t.text,
                    removed: t.removed,
                    origin: t.origin
                };
                h && _i(e, "change", e, d), p && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(d)
            }
            e.display.selForContextMenu = null
        }

        function Bo(e, t, o, n, i) {
            if (n || (n = o), Nr(n, o) < 0) {
                var r = n;
                n = o, o = r
            }
            "string" == typeof t && (t = js(t)), Co(e, {
                from: o,
                to: n,
                text: t,
                origin: i
            })
        }

        function xo(e, t) {
            if (!Ci(e, "scrollCursorIntoView")) {
                var o = e.display,
                    n = o.sizer.getBoundingClientRect(),
                    i = null;
                if (t.top + n.top < 0 ? i = !0 : t.bottom + n.top > (window.innerHeight || document.documentElement.clientHeight) && (i = !1), null != i && !br) {
                    var r = Fi("div", "\u200b", null, "position: absolute; top: " + (t.top - o.viewOffset - Ue(e.display)) + "px; height: " + (t.bottom - t.top + Ge(e) + o.barHeight) + "px; left: " + t.left + "px; width: 2px;");
                    e.display.lineSpace.appendChild(r), r.scrollIntoView(i), e.display.lineSpace.removeChild(r)
                }
            }
        }

        function wo(e, t, o, n) {
            null == n && (n = 0);
            for (var i = 0; 5 > i; i++) {
                var r = !1,
                    s = ut(e, t),
                    a = o && o != t ? ut(e, o) : s,
                    l = No(e, Math.min(s.left, a.left), Math.min(s.top, a.top) - n, Math.max(s.left, a.left), Math.max(s.bottom, a.bottom) + n),
                    c = e.doc.scrollTop,
                    u = e.doc.scrollLeft;
                if (null != l.scrollTop && (Jt(e, l.scrollTop), Math.abs(e.doc.scrollTop - c) > 1 && (r = !0)), null != l.scrollLeft && (Zt(e, l.scrollLeft), Math.abs(e.doc.scrollLeft - u) > 1 && (r = !0)), !r) break
            }
            return s
        }

        function Io(e, t, o, n, i) {
            var r = No(e, t, o, n, i);
            null != r.scrollTop && Jt(e, r.scrollTop), null != r.scrollLeft && Zt(e, r.scrollLeft)
        }

        function No(e, t, o, n, i) {
            var r = e.display,
                s = ft(e.display);
            0 > o && (o = 0);
            var a = e.curOp && null != e.curOp.scrollTop ? e.curOp.scrollTop : r.scroller.scrollTop,
                l = je(e),
                c = {};
            i - o > l && (i = o + l);
            var u = e.doc.height + Ve(r),
                g = s > o,
                p = i > u - s;
            if (a > o) c.scrollTop = g ? 0 : o;
            else if (i > a + l) {
                var h = Math.min(o, (p ? u : i) - l);
                h != a && (c.scrollTop = h)
            }
            var d = e.curOp && null != e.curOp.scrollLeft ? e.curOp.scrollLeft : r.scroller.scrollLeft,
                f = Ke(e) - (e.options.fixedGutter ? r.gutters.offsetWidth : 0),
                m = n - t > f;
            return m && (n = t + f), 10 > t ? c.scrollLeft = 0 : d > t ? c.scrollLeft = Math.max(0, t - (m ? 0 : 10)) : n > f + d - 3 && (c.scrollLeft = n + (m ? 0 : 10) - f), c
        }

        function Ro(e, t, o) {
            null == t && null == o || Oo(e), null != t && (e.curOp.scrollLeft = (null == e.curOp.scrollLeft ? e.doc.scrollLeft : e.curOp.scrollLeft) + t), null != o && (e.curOp.scrollTop = (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + o)
        }

        function Lo(e) {
            Oo(e);
            var t = e.getCursor(),
                o = t,
                n = t;
            e.options.lineWrapping || (o = t.ch ? Ir(t.line, t.ch - 1) : t, n = Ir(t.line, t.ch + 1)), e.curOp.scrollToPos = {
                from: o,
                to: n,
                margin: e.options.cursorScrollMargin,
                isCursor: !0
            }
        }

        function Oo(e) {
            var t = e.curOp.scrollToPos;
            if (t) {
                e.curOp.scrollToPos = null;
                var o = gt(e, t.from),
                    n = gt(e, t.to),
                    i = No(e, Math.min(o.left, n.left), Math.min(o.top, n.top) - t.margin, Math.max(o.right, n.right), Math.max(o.bottom, n.bottom) + t.margin);
                e.scrollTo(i.scrollLeft, i.scrollTop)
            }
        }

        function Do(e, t, o, n) {
            var i, r = e.doc;
            null == o && (o = "add"), "smart" == o && (r.mode.indent ? i = He(e, t) : o = "prev");
            var s = e.options.tabSize,
                a = Xn(r, t),
                l = Ns(a.text, null, s);
            a.stateAfter && (a.stateAfter = null);
            var c, u = a.text.match(/^\s*/)[0];
            if (n || /\S/.test(a.text)) {
                if ("smart" == o && (c = r.mode.indent(i, a.text.slice(u.length), a.text), c == Bs || c > 150)) {
                    if (!n) return;
                    o = "prev"
                }
            } else c = 0, o = "not";
            "prev" == o ? c = t > r.first ? Ns(Xn(r, t - 1).text, null, s) : 0 : "add" == o ? c = l + e.options.indentUnit : "subtract" == o ? c = l - e.options.indentUnit : "number" == typeof o && (c = l + o), c = Math.max(0, c);
            var g = "",
                p = 0;
            if (e.options.indentWithTabs)
                for (var h = Math.floor(c / s); h; --h) p += s, g += "	";
            if (c > p && (g += Bi(c - p)), g != u) return Bo(r, g, Ir(t, 0), Ir(t, u.length), "+input"), a.stateAfter = null, !0;
            for (var h = 0; h < r.sel.ranges.length; h++) {
                var d = r.sel.ranges[h];
                if (d.head.line == t && d.head.ch < u.length) {
                    var p = Ir(t, u.length);
                    Ce(r, h, new ue(p, p));
                    break
                }
            }
        }

        function Mo(e, t, o, n) {
            var i = t,
                r = t;
            return "number" == typeof t ? r = Xn(e, he(e, t)) : i = Qn(t), null == i ? null : (n(r, i) && e.cm && Lt(e.cm, i, o), r)
        }

        function Po(e, t) {
            for (var o = e.doc.sel.ranges, n = [], i = 0; i < o.length; i++) {
                for (var r = t(o[i]); n.length && Nr(r.from, xi(n).to) <= 0;) {
                    var s = n.pop();
                    if (Nr(s.from, r.from) < 0) {
                        r.from = s.from;
                        break
                    }
                }
                n.push(r)
            }
            At(e, function() {
                for (var t = n.length - 1; t >= 0; t--) Bo(e.doc, "", n[t].from, n[t].to, "+delete");
                Lo(e)
            })
        }

        function Fo(e, t, o, n, i) {
            function r() {
                var t = a + o;
                return t < e.first || t >= e.first + e.size ? g = !1 : (a = t, u = Xn(e, t))
            }

            function s(e) {
                var t = (i ? ar : lr)(u, l, o, !0);
                if (null == t) {
                    if (e || !r()) return g = !1;
                    l = i ? (0 > o ? er : Zi)(u) : 0 > o ? u.text.length : 0
                } else l = t;
                return !0
            }
            var a = t.line,
                l = t.ch,
                c = o,
                u = Xn(e, a),
                g = !0;
            if ("char" == n) s();
            else if ("column" == n) s(!0);
            else if ("word" == n || "group" == n)
                for (var p = null, h = "group" == n, d = e.cm && e.cm.getHelper(t, "wordChars"), f = !0; !(0 > o) || s(!f); f = !1) {
                    var m = u.text.charAt(l) || "\n",
                        y = Di(m, d) ? "w" : h && "\n" == m ? "n" : !h || /\s/.test(m) ? null : "p";
                    if (!h || f || y || (y = "s"), p && p != y) {
                        0 > o && (o = 1, s());
                        break
                    }
                    if (y && (p = y), o > 0 && !s(!f)) break
                }
            var v = Ie(e, Ir(a, l), c, !0);
            return g || (v.hitSide = !0), v
        }

        function Ho(e, t, o, n) {
            var i, r = e.doc,
                s = t.left;
            if ("page" == n) {
                var a = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
                i = t.top + o * (a - (0 > o ? 1.5 : .5) * ft(e.display))
            } else "line" == n && (i = o > 0 ? t.bottom + 3 : t.top - 3);
            for (;;) {
                var l = ht(e, s, i);
                if (!l.outside) break;
                if (0 > o ? 0 >= i : i >= r.height) {
                    l.hitSide = !0;
                    break
                }
                i += 5 * o
            }
            return l
        }

        function Uo(t, o, n, i) {
            e.defaults[t] = o, n && (Xr[t] = i ? function(e, t, o) {
                o != zr && n(e, t, o)
            } : n)
        }

        function Vo(e) {
            for (var t, o, n, i, r = e.split(/-(?!$)/), e = r[r.length - 1], s = 0; s < r.length - 1; s++) {
                var a = r[s];
                if (/^(cmd|meta|m)$/i.test(a)) i = !0;
                else if (/^a(lt)?$/i.test(a)) t = !0;
                else if (/^(c|ctrl|control)$/i.test(a)) o = !0;
                else {
                    if (!/^s(hift)$/i.test(a)) throw new Error("Unrecognized modifier name: " + a);
                    n = !0
                }
            }
            return t && (e = "Alt-" + e), o && (e = "Ctrl-" + e), i && (e = "Cmd-" + e), n && (e = "Shift-" + e), e
        }

        function Wo(e) {
            return "string" == typeof e ? ns[e] : e
        }

        function Go(e, t, o, n, i) {
            if (n && n.shared) return Ko(e, t, o, n, i);
            if (e.cm && !e.cm.curOp) return Bt(e.cm, Go)(e, t, o, n, i);
            var r = new cs(e, i),
                s = Nr(t, o);
            if (n && Li(n, r, !1), s > 0 || 0 == s && r.clearWhenEmpty !== !1) return r;
            if (r.replacedWith && (r.collapsed = !0, r.widgetNode = Fi("span", [r.replacedWith], "CodeMirror-widget"), n.handleMouseEvents || r.widgetNode.setAttribute("cm-ignore-events", "true"), n.insertLeft && (r.widgetNode.insertLeft = !0)), r.collapsed) {
                if (hn(e, t.line, t, o, r) || t.line != o.line && hn(e, o.line, t, o, r)) throw new Error("Inserting collapsed marker partially overlapping an existing one");
                wr = !0
            }
            r.addToHistory && ri(e, {
                from: t,
                to: o,
                origin: "markText"
            }, e.sel, NaN);
            var a, l = t.line,
                c = e.cm;
            if (e.iter(l, o.line + 1, function(e) {
                    c && r.collapsed && !c.options.lineWrapping && dn(e) == c.display.maxLine && (a = !0), r.collapsed && l != t.line && $n(e, 0), Qo(e, new zo(r, l == t.line ? t.ch : null, l == o.line ? o.ch : null)), ++l
                }), r.collapsed && e.iter(t.line, o.line + 1, function(t) {
                    vn(e, t) && $n(t, 0)
                }), r.clearOnEnter && Es(r, "beforeCursorEnter", function() {
                    r.clear()
                }), r.readOnly && (xr = !0, (e.history.done.length || e.history.undone.length) && e.clearHistory()), r.collapsed && (r.id = ++ls, r.atomic = !0), c) {
                if (a && (c.curOp.updateMaxLine = !0), r.collapsed) Rt(c, t.line, o.line + 1);
                else if (r.className || r.title || r.startStyle || r.endStyle || r.css)
                    for (var u = t.line; u <= o.line; u++) Lt(c, u, "text");
                r.atomic && xe(c.doc), _i(c, "markerAdded", c, r)
            }
            return r
        }

        function Ko(e, t, o, n, i) {
            n = Li(n), n.shared = !1;
            var r = [Go(e, t, o, n, i)],
                s = r[0],
                a = n.widgetNode;
            return jn(e, function(e) {
                a && (n.widgetNode = a.cloneNode(!0)), r.push(Go(e, de(e, t), de(e, o), n, i));
                for (var l = 0; l < e.linked.length; ++l)
                    if (e.linked[l].isParent) return;
                s = xi(r)
            }), new us(r, s)
        }

        function jo(e) {
            return e.findMarks(Ir(e.first, 0), e.clipPos(Ir(e.lastLine())), function(e) {
                return e.parent
            })
        }

        function Yo(e, t) {
            for (var o = 0; o < t.length; o++) {
                var n = t[o],
                    i = n.find(),
                    r = e.clipPos(i.from),
                    s = e.clipPos(i.to);
                if (Nr(r, s)) {
                    var a = Go(e, r, s, n.primary, n.primary.type);
                    n.markers.push(a), a.parent = n
                }
            }
        }

        function Xo(e) {
            for (var t = 0; t < e.length; t++) {
                var o = e[t],
                    n = [o.primary.doc];
                jn(o.primary.doc, function(e) {
                    n.push(e)
                });
                for (var i = 0; i < o.markers.length; i++) {
                    var r = o.markers[i]; - 1 == wi(n, r.doc) && (r.parent = null, o.markers.splice(i--, 1))
                }
            }
        }

        function zo(e, t, o) {
            this.marker = e, this.from = t, this.to = o
        }

        function qo(e, t) {
            if (e)
                for (var o = 0; o < e.length; ++o) {
                    var n = e[o];
                    if (n.marker == t) return n
                }
        }

        function $o(e, t) {
            for (var o, n = 0; n < e.length; ++n) e[n] != t && (o || (o = [])).push(e[n]);
            return o
        }

        function Qo(e, t) {
            e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t], t.marker.attachLine(e)
        }

        function Jo(e, t, o) {
            if (e)
                for (var n, i = 0; i < e.length; ++i) {
                    var r = e[i],
                        s = r.marker,
                        a = null == r.from || (s.inclusiveLeft ? r.from <= t : r.from < t);
                    if (a || r.from == t && "bookmark" == s.type && (!o || !r.marker.insertLeft)) {
                        var l = null == r.to || (s.inclusiveRight ? r.to >= t : r.to > t);
                        (n || (n = [])).push(new zo(s, r.from, l ? null : r.to))
                    }
                }
            return n
        }

        function Zo(e, t, o) {
            if (e)
                for (var n, i = 0; i < e.length; ++i) {
                    var r = e[i],
                        s = r.marker,
                        a = null == r.to || (s.inclusiveRight ? r.to >= t : r.to > t);
                    if (a || r.from == t && "bookmark" == s.type && (!o || r.marker.insertLeft)) {
                        var l = null == r.from || (s.inclusiveLeft ? r.from <= t : r.from < t);
                        (n || (n = [])).push(new zo(s, l ? null : r.from - t, null == r.to ? null : r.to - t))
                    }
                }
            return n
        }

        function en(e, t) {
            if (t.full) return null;
            var o = me(e, t.from.line) && Xn(e, t.from.line).markedSpans,
                n = me(e, t.to.line) && Xn(e, t.to.line).markedSpans;
            if (!o && !n) return null;
            var i = t.from.ch,
                r = t.to.ch,
                s = 0 == Nr(t.from, t.to),
                a = Jo(o, i, s),
                l = Zo(n, r, s),
                c = 1 == t.text.length,
                u = xi(t.text).length + (c ? i : 0);
            if (a)
                for (var g = 0; g < a.length; ++g) {
                    var p = a[g];
                    if (null == p.to) {
                        var h = qo(l, p.marker);
                        h ? c && (p.to = null == h.to ? null : h.to + u) : p.to = i
                    }
                }
            if (l)
                for (var g = 0; g < l.length; ++g) {
                    var p = l[g];
                    if (null != p.to && (p.to += u), null == p.from) {
                        var h = qo(a, p.marker);
                        h || (p.from = u, c && (a || (a = [])).push(p))
                    } else p.from += u, c && (a || (a = [])).push(p)
                }
            a && (a = tn(a)), l && l != a && (l = tn(l));
            var d = [a];
            if (!c) {
                var f, m = t.text.length - 2;
                if (m > 0 && a)
                    for (var g = 0; g < a.length; ++g) null == a[g].to && (f || (f = [])).push(new zo(a[g].marker, null, null));
                for (var g = 0; m > g; ++g) d.push(f);
                d.push(l)
            }
            return d
        }

        function tn(e) {
            for (var t = 0; t < e.length; ++t) {
                var o = e[t];
                null != o.from && o.from == o.to && o.marker.clearWhenEmpty !== !1 && e.splice(t--, 1)
            }
            return e.length ? e : null
        }

        function on(e, t) {
            var o = gi(e, t),
                n = en(e, t);
            if (!o) return n;
            if (!n) return o;
            for (var i = 0; i < o.length; ++i) {
                var r = o[i],
                    s = n[i];
                if (r && s) e: for (var a = 0; a < s.length; ++a) {
                    for (var l = s[a], c = 0; c < r.length; ++c)
                        if (r[c].marker == l.marker) continue e;
                    r.push(l)
                } else s && (o[i] = s)
            }
            return o
        }

        function nn(e, t, o) {
            var n = null;
            if (e.iter(t.line, o.line + 1, function(e) {
                    if (e.markedSpans)
                        for (var t = 0; t < e.markedSpans.length; ++t) {
                            var o = e.markedSpans[t].marker;
                            !o.readOnly || n && -1 != wi(n, o) || (n || (n = [])).push(o)
                        }
                }), !n) return null;
            for (var i = [{
                    from: t,
                    to: o
                }], r = 0; r < n.length; ++r)
                for (var s = n[r], a = s.find(0), l = 0; l < i.length; ++l) {
                    var c = i[l];
                    if (!(Nr(c.to, a.from) < 0 || Nr(c.from, a.to) > 0)) {
                        var u = [l, 1],
                            g = Nr(c.from, a.from),
                            p = Nr(c.to, a.to);
                        (0 > g || !s.inclusiveLeft && !g) && u.push({
                            from: c.from,
                            to: a.from
                        }), (p > 0 || !s.inclusiveRight && !p) && u.push({
                            from: a.to,
                            to: c.to
                        }), i.splice.apply(i, u), l += u.length - 1
                    }
                }
            return i
        }

        function rn(e) {
            var t = e.markedSpans;
            if (t) {
                for (var o = 0; o < t.length; ++o) t[o].marker.detachLine(e);
                e.markedSpans = null
            }
        }

        function sn(e, t) {
            if (t) {
                for (var o = 0; o < t.length; ++o) t[o].marker.attachLine(e);
                e.markedSpans = t
            }
        }

        function an(e) {
            return e.inclusiveLeft ? -1 : 0
        }

        function ln(e) {
            return e.inclusiveRight ? 1 : 0
        }

        function cn(e, t) {
            var o = e.lines.length - t.lines.length;
            if (0 != o) return o;
            var n = e.find(),
                i = t.find(),
                r = Nr(n.from, i.from) || an(e) - an(t);
            if (r) return -r;
            var s = Nr(n.to, i.to) || ln(e) - ln(t);
            return s ? s : t.id - e.id
        }

        function un(e, t) {
            var o, n = wr && e.markedSpans;
            if (n)
                for (var i, r = 0; r < n.length; ++r) i = n[r], i.marker.collapsed && null == (t ? i.from : i.to) && (!o || cn(o, i.marker) < 0) && (o = i.marker);
            return o
        }

        function gn(e) {
            return un(e, !0)
        }

        function pn(e) {
            return un(e, !1)
        }

        function hn(e, t, o, n, i) {
            var r = Xn(e, t),
                s = wr && r.markedSpans;
            if (s)
                for (var a = 0; a < s.length; ++a) {
                    var l = s[a];
                    if (l.marker.collapsed) {
                        var c = l.marker.find(0),
                            u = Nr(c.from, o) || an(l.marker) - an(i),
                            g = Nr(c.to, n) || ln(l.marker) - ln(i);
                        if (!(u >= 0 && 0 >= g || 0 >= u && g >= 0) && (0 >= u && (Nr(c.to, o) > 0 || l.marker.inclusiveRight && i.inclusiveLeft) || u >= 0 && (Nr(c.from, n) < 0 || l.marker.inclusiveLeft && i.inclusiveRight))) return !0
                    }
                }
        }

        function dn(e) {
            for (var t; t = gn(e);) e = t.find(-1, !0).line;
            return e
        }

        function fn(e) {
            for (var t, o; t = pn(e);) e = t.find(1, !0).line, (o || (o = [])).push(e);
            return o
        }

        function mn(e, t) {
            var o = Xn(e, t),
                n = dn(o);
            return o == n ? t : Qn(n)
        }

        function yn(e, t) {
            if (t > e.lastLine()) return t;
            var o, n = Xn(e, t);
            if (!vn(e, n)) return t;
            for (; o = pn(n);) n = o.find(1, !0).line;
            return Qn(n) + 1
        }

        function vn(e, t) {
            var o = wr && t.markedSpans;
            if (o)
                for (var n, i = 0; i < o.length; ++i)
                    if (n = o[i], n.marker.collapsed) {
                        if (null == n.from) return !0;
                        if (!n.marker.widgetNode && 0 == n.from && n.marker.inclusiveLeft && _n(e, t, n)) return !0
                    }
        }

        function _n(e, t, o) {
            if (null == o.to) {
                var n = o.marker.find(1, !0);
                return _n(e, n.line, qo(n.line.markedSpans, o.marker))
            }
            if (o.marker.inclusiveRight && o.to == t.text.length) return !0;
            for (var i, r = 0; r < t.markedSpans.length; ++r)
                if (i = t.markedSpans[r], i.marker.collapsed && !i.marker.widgetNode && i.from == o.to && (null == i.to || i.to != o.from) && (i.marker.inclusiveLeft || o.marker.inclusiveRight) && _n(e, t, i)) return !0
        }

        function bn(e, t, o) {
            Zn(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && Ro(e, null, o)
        }

        function Cn(e) {
            if (null != e.height) return e.height;
            var t = e.doc.cm;
            if (!t) return 0;
            if (!Fs(document.body, e.node)) {
                var o = "position: relative;";
                e.coverGutter && (o += "margin-left: -" + t.display.gutters.offsetWidth + "px;"), e.noHScroll && (o += "width: " + t.display.wrapper.clientWidth + "px;"), Ui(t.display.measure, Fi("div", [e.node], null, o))
            }
            return e.height = e.node.offsetHeight
        }

        function En(e, t, o, n) {
            var i = new gs(e, o, n),
                r = e.cm;
            return r && i.noHScroll && (r.display.alignWidgets = !0), Mo(e, t, "widget", function(t) {
                var o = t.widgets || (t.widgets = []);
                if (null == i.insertAt ? o.push(i) : o.splice(Math.min(o.length - 1, Math.max(0, i.insertAt)), 0, i), i.line = t, r && !vn(e, t)) {
                    var n = Zn(t) < e.scrollTop;
                    $n(t, t.height + Cn(i)), n && Ro(r, null, i.height), r.curOp.forceUpdate = !0
                }
                return !0
            }), i
        }

        function Sn(e, t, o, n) {
            e.text = t, e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null), null != e.order && (e.order = null), rn(e), sn(e, o);
            var i = n ? n(e) : 1;
            i != e.height && $n(e, i)
        }

        function Tn(e) {
            e.parent = null, rn(e)
        }

        function kn(e, t) {
            if (e)
                for (;;) {
                    var o = e.match(/(?:^|\s+)line-(background-)?(\S+)/);
                    if (!o) break;
                    e = e.slice(0, o.index) + e.slice(o.index + o[0].length);
                    var n = o[1] ? "bgClass" : "textClass";
                    null == t[n] ? t[n] = o[2] : new RegExp("(?:^|s)" + o[2] + "(?:$|s)").test(t[n]) || (t[n] += " " + o[2])
                }
            return e
        }

        function An(t, o) {
            if (t.blankLine) return t.blankLine(o);
            if (t.innerMode) {
                var n = e.innerMode(t, o);
                return n.mode.blankLine ? n.mode.blankLine(n.state) : void 0
            }
        }

        function Bn(t, o, n, i) {
            for (var r = 0; 10 > r; r++) {
                i && (i[0] = e.innerMode(t, n).mode);
                var s = t.token(o, n);
                if (o.pos > o.start) return s
            }
            throw new Error("Mode " + t.name + " failed to advance stream.")
        }

        function xn(e, t, o, n) {
            function i(e) {
                return {
                    start: g.start,
                    end: g.pos,
                    string: g.current(),
                    type: r || null,
                    state: e ? es(s.mode, u) : u
                }
            }
            var r, s = e.doc,
                a = s.mode;
            t = de(s, t);
            var l, c = Xn(s, t.line),
                u = He(e, t.line, o),
                g = new as(c.text, e.options.tabSize);
            for (n && (l = []);
                (n || g.pos < t.ch) && !g.eol();) g.start = g.pos, r = Bn(a, g, u), n && l.push(i(!0));
            return n ? l : i()
        }

        function wn(e, t, o, n, i, r, s) {
            var a = o.flattenSpans;
            null == a && (a = e.options.flattenSpans);
            var l, c = 0,
                u = null,
                g = new as(t, e.options.tabSize),
                p = e.options.addModeClass && [null];
            for ("" == t && kn(An(o, n), r); !g.eol();) {
                if (g.pos > e.options.maxHighlightLength ? (a = !1, s && Rn(e, t, n, g.pos), g.pos = t.length, l = null) : l = kn(Bn(o, g, n, p), r), p) {
                    var h = p[0].name;
                    h && (l = "m-" + (l ? h + " " + l : h))
                }
                if (!a || u != l) {
                    for (; c < g.start;) c = Math.min(g.start, c + 5e4), i(c, u);
                    u = l
                }
                g.start = g.pos
            }
            for (; c < g.pos;) {
                var d = Math.min(g.pos, c + 5e4);
                i(d, u), c = d
            }
        }

        function In(e, t, o, n) {
            var i = [e.state.modeGen],
                r = {};
            wn(e, t.text, e.doc.mode, o, function(e, t) {
                i.push(e, t)
            }, r, n);
            for (var s = 0; s < e.state.overlays.length; ++s) {
                var a = e.state.overlays[s],
                    l = 1,
                    c = 0;
                wn(e, t.text, a.mode, !0, function(e, t) {
                    for (var o = l; e > c;) {
                        var n = i[l];
                        n > e && i.splice(l, 1, e, i[l + 1], n), l += 2, c = Math.min(e, n)
                    }
                    if (t)
                        if (a.opaque) i.splice(o, l - o, e, "cm-overlay " + t), l = o + 2;
                        else
                            for (; l > o; o += 2) {
                                var r = i[o + 1];
                                i[o + 1] = (r ? r + " " : "") + "cm-overlay " + t
                            }
                }, r)
            }
            return {
                styles: i,
                classes: r.bgClass || r.textClass ? r : null
            }
        }

        function Nn(e, t, o) {
            if (!t.styles || t.styles[0] != e.state.modeGen) {
                var n = In(e, t, t.stateAfter = He(e, Qn(t)));
                t.styles = n.styles, n.classes ? t.styleClasses = n.classes : t.styleClasses && (t.styleClasses = null), o === e.doc.frontier && e.doc.frontier++
            }
            return t.styles
        }

        function Rn(e, t, o, n) {
            var i = e.doc.mode,
                r = new as(t, e.options.tabSize);
            for (r.start = r.pos = n || 0, "" == t && An(i, o); !r.eol() && r.pos <= e.options.maxHighlightLength;) Bn(i, r, o), r.start = r.pos
        }

        function Ln(e, t) {
            if (!e || /^\s*$/.test(e)) return null;
            var o = t.addModeClass ? ds : hs;
            return o[e] || (o[e] = e.replace(/\S+/g, "cm-$&"))
        }

        function On(e, t) {
            var o = Fi("span", null, null, dr ? "padding-right: .1px" : null),
                n = {
                    pre: Fi("pre", [o]),
                    content: o,
                    col: 0,
                    pos: 0,
                    cm: e,
                    splitSpaces: (pr || dr) && e.getOption("lineWrapping")
                };
            t.measure = {};
            for (var i = 0; i <= (t.rest ? t.rest.length : 0); i++) {
                var r, s = i ? t.rest[i - 1] : t.line;
                n.pos = 0, n.addToken = Mn, zi(e.display.measure) && (r = ei(s)) && (n.addToken = Fn(n.addToken, r)), n.map = [];
                var a = t != e.display.externalMeasured && Qn(s);
                Un(s, n, Nn(e, s, a)), s.styleClasses && (s.styleClasses.bgClass && (n.bgClass = Gi(s.styleClasses.bgClass, n.bgClass || "")), s.styleClasses.textClass && (n.textClass = Gi(s.styleClasses.textClass, n.textClass || ""))), 0 == n.map.length && n.map.push(0, 0, n.content.appendChild(Xi(e.display.measure))), 0 == i ? (t.measure.map = n.map, t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(n.map), (t.measure.caches || (t.measure.caches = [])).push({}))
            }
            return dr && /\bcm-tab\b/.test(n.content.lastChild.className) && (n.content.className = "cm-tab-wrap-hack"), Ts(e, "renderLine", e, t.line, n.pre), n.pre.className && (n.textClass = Gi(n.pre.className, n.textClass || "")), n
        }

        function Dn(e) {
            var t = Fi("span", "\u2022", "cm-invalidchar");
            return t.title = "\\u" + e.charCodeAt(0).toString(16), t.setAttribute("aria-label", t.title), t
        }

        function Mn(e, t, o, n, i, r, s) {
            if (t) {
                var a = e.splitSpaces ? t.replace(/ {3,}/g, Pn) : t,
                    l = e.cm.state.specialChars,
                    c = !1;
                if (l.test(t))
                    for (var u = document.createDocumentFragment(), g = 0;;) {
                        l.lastIndex = g;
                        var p = l.exec(t),
                            h = p ? p.index - g : t.length - g;
                        if (h) {
                            var d = document.createTextNode(a.slice(g, g + h));
                            pr && 9 > hr ? u.appendChild(Fi("span", [d])) : u.appendChild(d), e.map.push(e.pos, e.pos + h, d), e.col += h, e.pos += h
                        }
                        if (!p) break;
                        if (g += h + 1, "	" == p[0]) {
                            var f = e.cm.options.tabSize,
                                m = f - e.col % f,
                                d = u.appendChild(Fi("span", Bi(m), "cm-tab"));
                            d.setAttribute("role", "presentation"), d.setAttribute("cm-text", "	"), e.col += m
                        } else {
                            var d = e.cm.options.specialCharPlaceholder(p[0]);
                            d.setAttribute("cm-text", p[0]), pr && 9 > hr ? u.appendChild(Fi("span", [d])) : u.appendChild(d), e.col += 1
                        }
                        e.map.push(e.pos, e.pos + 1, d), e.pos++
                    } else {
                        e.col += t.length;
                        var u = document.createTextNode(a);
                        e.map.push(e.pos, e.pos + t.length, u), pr && 9 > hr && (c = !0), e.pos += t.length
                    }
                if (o || n || i || c || s) {
                    var y = o || "";
                    n && (y += n), i && (y += i);
                    var v = Fi("span", [u], y, s);
                    return r && (v.title = r), e.content.appendChild(v)
                }
                e.content.appendChild(u)
            }
        }

        function Pn(e) {
            for (var t = " ", o = 0; o < e.length - 2; ++o) t += o % 2 ? " " : "\xa0";
            return t += " "
        }

        function Fn(e, t) {
            return function(o, n, i, r, s, a, l) {
                i = i ? i + " cm-force-border" : "cm-force-border";
                for (var c = o.pos, u = c + n.length;;) {
                    for (var g = 0; g < t.length; g++) {
                        var p = t[g];
                        if (p.to > c && p.from <= c) break
                    }
                    if (p.to >= u) return e(o, n, i, r, s, a, l);
                    e(o, n.slice(0, p.to - c), i, r, null, a, l), r = null, n = n.slice(p.to - c), c = p.to
                }
            }
        }

        function Hn(e, t, o, n) {
            var i = !n && o.widgetNode;
            i && e.map.push(e.pos, e.pos + t, i), !n && e.cm.display.input.needsContentAttribute && (i || (i = e.content.appendChild(document.createElement("span"))), i.setAttribute("cm-marker", o.id)), i && (e.cm.display.input.setUneditable(i), e.content.appendChild(i)), e.pos += t
        }

        function Un(e, t, o) {
            var n = e.markedSpans,
                i = e.text,
                r = 0;
            if (n)
                for (var s, a, l, c, u, g, p, h = i.length, d = 0, f = 1, m = "", y = 0;;) {
                    if (y == d) {
                        l = c = u = g = a = "", p = null, y = 1 / 0;
                        for (var v = [], _ = 0; _ < n.length; ++_) {
                            var b = n[_],
                                C = b.marker;
                            "bookmark" == C.type && b.from == d && C.widgetNode ? v.push(C) : b.from <= d && (null == b.to || b.to > d || C.collapsed && b.to == d && b.from == d) ? (null != b.to && b.to != d && y > b.to && (y = b.to, c = ""), C.className && (l += " " + C.className), C.css && (a = C.css), C.startStyle && b.from == d && (u += " " + C.startStyle), C.endStyle && b.to == y && (c += " " + C.endStyle), C.title && !g && (g = C.title), C.collapsed && (!p || cn(p.marker, C) < 0) && (p = b)) : b.from > d && y > b.from && (y = b.from)
                        }
                        if (p && (p.from || 0) == d) {
                            if (Hn(t, (null == p.to ? h + 1 : p.to) - d, p.marker, null == p.from), null == p.to) return;
                            p.to == d && (p = !1)
                        }
                        if (!p && v.length)
                            for (var _ = 0; _ < v.length; ++_) Hn(t, 0, v[_])
                    }
                    if (d >= h) break;
                    for (var E = Math.min(h, y);;) {
                        if (m) {
                            var S = d + m.length;
                            if (!p) {
                                var T = S > E ? m.slice(0, E - d) : m;
                                t.addToken(t, T, s ? s + l : l, u, d + T.length == y ? c : "", g, a)
                            }
                            if (S >= E) {
                                m = m.slice(E - d), d = E;
                                break
                            }
                            d = S, u = ""
                        }
                        m = i.slice(r, r = o[f++]), s = Ln(o[f++], t.cm.options)
                    }
                } else
                    for (var f = 1; f < o.length; f += 2) t.addToken(t, i.slice(r, r = o[f]), Ln(o[f + 1], t.cm.options))
        }

        function Vn(e, t) {
            return 0 == t.from.ch && 0 == t.to.ch && "" == xi(t.text) && (!e.cm || e.cm.options.wholeLineUpdateBefore)
        }

        function Wn(e, t, o, n) {
            function i(e) {
                return o ? o[e] : null
            }

            function r(e, o, i) {
                Sn(e, o, i, n), _i(e, "change", e, t)
            }

            function s(e, t) {
                for (var o = e, r = []; t > o; ++o) r.push(new ps(c[o], i(o), n));
                return r
            }
            var a = t.from,
                l = t.to,
                c = t.text,
                u = Xn(e, a.line),
                g = Xn(e, l.line),
                p = xi(c),
                h = i(c.length - 1),
                d = l.line - a.line;
            if (t.full) e.insert(0, s(0, c.length)), e.remove(c.length, e.size - c.length);
            else if (Vn(e, t)) {
                var f = s(0, c.length - 1);
                r(g, g.text, h), d && e.remove(a.line, d), f.length && e.insert(a.line, f)
            } else if (u == g)
                if (1 == c.length) r(u, u.text.slice(0, a.ch) + p + u.text.slice(l.ch), h);
                else {
                    var f = s(1, c.length - 1);
                    f.push(new ps(p + u.text.slice(l.ch), h, n)), r(u, u.text.slice(0, a.ch) + c[0], i(0)), e.insert(a.line + 1, f)
                } else if (1 == c.length) r(u, u.text.slice(0, a.ch) + c[0] + g.text.slice(l.ch), i(0)), e.remove(a.line + 1, d);
            else {
                r(u, u.text.slice(0, a.ch) + c[0], i(0)), r(g, p + g.text.slice(l.ch), h);
                var f = s(1, c.length - 1);
                d > 1 && e.remove(a.line + 1, d - 1), e.insert(a.line + 1, f)
            }
            _i(e, "change", e, t)
        }

        function Gn(e) {
            this.lines = e, this.parent = null;
            for (var t = 0, o = 0; t < e.length; ++t) e[t].parent = this, o += e[t].height;
            this.height = o
        }

        function Kn(e) {
            this.children = e;
            for (var t = 0, o = 0, n = 0; n < e.length; ++n) {
                var i = e[n];
                t += i.chunkSize(), o += i.height, i.parent = this
            }
            this.size = t, this.height = o, this.parent = null
        }

        function jn(e, t, o) {
            function n(e, i, r) {
                if (e.linked)
                    for (var s = 0; s < e.linked.length; ++s) {
                        var a = e.linked[s];
                        if (a.doc != i) {
                            var l = r && a.sharedHist;
                            o && !l || (t(a.doc, l), n(a.doc, e, l))
                        }
                    }
            }
            n(e, null, !0)
        }

        function Yn(e, t) {
            if (t.cm) throw new Error("This document is already in use.");
            e.doc = t, t.cm = e, s(e), o(e), e.options.lineWrapping || p(e), e.options.mode = t.modeOption, Rt(e)
        }

        function Xn(e, t) {
            if (t -= e.first, 0 > t || t >= e.size) throw new Error("There is no line " + (t + e.first) + " in the document.");
            for (var o = e; !o.lines;)
                for (var n = 0;; ++n) {
                    var i = o.children[n],
                        r = i.chunkSize();
                    if (r > t) {
                        o = i;
                        break
                    }
                    t -= r
                }
            return o.lines[t]
        }

        function zn(e, t, o) {
            var n = [],
                i = t.line;
            return e.iter(t.line, o.line + 1, function(e) {
                var r = e.text;
                i == o.line && (r = r.slice(0, o.ch)), i == t.line && (r = r.slice(t.ch)), n.push(r), ++i
            }), n
        }

        function qn(e, t, o) {
            var n = [];
            return e.iter(t, o, function(e) {
                n.push(e.text)
            }), n
        }

        function $n(e, t) {
            var o = t - e.height;
            if (o)
                for (var n = e; n; n = n.parent) n.height += o
        }

        function Qn(e) {
            if (null == e.parent) return null;
            for (var t = e.parent, o = wi(t.lines, e), n = t.parent; n; t = n, n = n.parent)
                for (var i = 0; n.children[i] != t; ++i) o += n.children[i].chunkSize();
            return o + t.first
        }

        function Jn(e, t) {
            var o = e.first;
            e: do {
                for (var n = 0; n < e.children.length; ++n) {
                    var i = e.children[n],
                        r = i.height;
                    if (r > t) {
                        e = i;
                        continue e
                    }
                    t -= r, o += i.chunkSize()
                }
                return o
            } while (!e.lines);
            for (var n = 0; n < e.lines.length; ++n) {
                var s = e.lines[n],
                    a = s.height;
                if (a > t) break;
                t -= a
            }
            return o + n
        }

        function Zn(e) {
            e = dn(e);
            for (var t = 0, o = e.parent, n = 0; n < o.lines.length; ++n) {
                var i = o.lines[n];
                if (i == e) break;
                t += i.height
            }
            for (var r = o.parent; r; o = r, r = o.parent)
                for (var n = 0; n < r.children.length; ++n) {
                    var s = r.children[n];
                    if (s == o) break;
                    t += s.height
                }
            return t
        }

        function ei(e) {
            var t = e.order;
            return null == t && (t = e.order = Qs(e.text)), t
        }

        function ti(e) {
            this.done = [], this.undone = [], this.undoDepth = 1 / 0, this.lastModTime = this.lastSelTime = 0, this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, this.generation = this.maxGeneration = e || 1
        }

        function oi(e, t) {
            var o = {
                from: X(t.from),
                to: jr(t),
                text: zn(e, t.from, t.to)
            };
            return ci(e, o, t.from.line, t.to.line + 1), jn(e, function(e) {
                ci(e, o, t.from.line, t.to.line + 1)
            }, !0), o
        }

        function ni(e) {
            for (; e.length;) {
                var t = xi(e);
                if (!t.ranges) break;
                e.pop()
            }
        }

        function ii(e, t) {
            return t ? (ni(e.done), xi(e.done)) : e.done.length && !xi(e.done).ranges ? xi(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(), xi(e.done)) : void 0
        }

        function ri(e, t, o, n) {
            var i = e.history;
            i.undone.length = 0;
            var r, s = +new Date;
            if ((i.lastOp == n || i.lastOrigin == t.origin && t.origin && ("+" == t.origin.charAt(0) && e.cm && i.lastModTime > s - e.cm.options.historyEventDelay || "*" == t.origin.charAt(0))) && (r = ii(i, i.lastOp == n))) {
                var a = xi(r.changes);
                0 == Nr(t.from, t.to) && 0 == Nr(t.from, a.to) ? a.to = jr(t) : r.changes.push(oi(e, t))
            } else {
                var l = xi(i.done);
                for (l && l.ranges || li(e.sel, i.done), r = {
                        changes: [oi(e, t)],
                        generation: i.generation
                    }, i.done.push(r); i.done.length > i.undoDepth;) i.done.shift(), i.done[0].ranges || i.done.shift()
            }
            i.done.push(o), i.generation = ++i.maxGeneration, i.lastModTime = i.lastSelTime = s, i.lastOp = i.lastSelOp = n, i.lastOrigin = i.lastSelOrigin = t.origin, a || Ts(e, "historyAdded")
        }

        function si(e, t, o, n) {
            var i = t.charAt(0);
            return "*" == i || "+" == i && o.ranges.length == n.ranges.length && o.somethingSelected() == n.somethingSelected() && new Date - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500)
        }

        function ai(e, t, o, n) {
            var i = e.history,
                r = n && n.origin;
            o == i.lastSelOp || r && i.lastSelOrigin == r && (i.lastModTime == i.lastSelTime && i.lastOrigin == r || si(e, r, xi(i.done), t)) ? i.done[i.done.length - 1] = t : li(t, i.done), i.lastSelTime = +new Date, i.lastSelOrigin = r, i.lastSelOp = o, n && n.clearRedo !== !1 && ni(i.undone)
        }

        function li(e, t) {
            var o = xi(t);
            o && o.ranges && o.equals(e) || t.push(e)
        }

        function ci(e, t, o, n) {
            var i = t["spans_" + e.id],
                r = 0;
            e.iter(Math.max(e.first, o), Math.min(e.first + e.size, n), function(o) {
                o.markedSpans && ((i || (i = t["spans_" + e.id] = {}))[r] = o.markedSpans), ++r
            })
        }

        function ui(e) {
            if (!e) return null;
            for (var t, o = 0; o < e.length; ++o) e[o].marker.explicitlyCleared ? t || (t = e.slice(0, o)) : t && t.push(e[o]);
            return t ? t.length ? t : null : e
        }

        function gi(e, t) {
            var o = t["spans_" + e.id];
            if (!o) return null;
            for (var n = 0, i = []; n < t.text.length; ++n) i.push(ui(o[n]));
            return i
        }

        function pi(e, t, o) {
            for (var n = 0, i = []; n < e.length; ++n) {
                var r = e[n];
                if (r.ranges) i.push(o ? ce.prototype.deepCopy.call(r) : r);
                else {
                    var s = r.changes,
                        a = [];
                    i.push({
                        changes: a
                    });
                    for (var l = 0; l < s.length; ++l) {
                        var c, u = s[l];
                        if (a.push({
                                from: u.from,
                                to: u.to,
                                text: u.text
                            }), t)
                            for (var g in u)(c = g.match(/^spans_(\d+)$/)) && wi(t, Number(c[1])) > -1 && (xi(a)[g] = u[g], delete u[g])
                    }
                }
            }
            return i
        }

        function hi(e, t, o, n) {
            o < e.line ? e.line += n : t < e.line && (e.line = t, e.ch = 0)
        }

        function di(e, t, o, n) {
            for (var i = 0; i < e.length; ++i) {
                var r = e[i],
                    s = !0;
                if (r.ranges) {
                    r.copied || (r = e[i] = r.deepCopy(), r.copied = !0);
                    for (var a = 0; a < r.ranges.length; a++) hi(r.ranges[a].anchor, t, o, n), hi(r.ranges[a].head, t, o, n)
                } else {
                    for (var a = 0; a < r.changes.length; ++a) {
                        var l = r.changes[a];
                        if (o < l.from.line) l.from = Ir(l.from.line + n, l.from.ch), l.to = Ir(l.to.line + n, l.to.ch);
                        else if (t <= l.to.line) {
                            s = !1;
                            break
                        }
                    }
                    s || (e.splice(0, i + 1), i = 0)
                }
            }
        }

        function fi(e, t) {
            var o = t.from.line,
                n = t.to.line,
                i = t.text.length - (n - o) - 1;
            di(e.done, o, n, i), di(e.undone, o, n, i)
        }

        function mi(e) {
            return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue
        }

        function yi(e) {
            return e.target || e.srcElement
        }

        function vi(e) {
            var t = e.which;
            return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), Sr && e.ctrlKey && 1 == t && (t = 3), t
        }

        function _i(e, t) {
            function o(e) {
                return function() {
                    e.apply(null, r)
                }
            }
            var n = e._handlers && e._handlers[t];
            if (n) {
                var i, r = Array.prototype.slice.call(arguments, 2);
                Pr ? i = Pr.delayedCallbacks : ks ? i = ks : (i = ks = [], setTimeout(bi, 0));
                for (var s = 0; s < n.length; ++s) i.push(o(n[s]))
            }
        }

        function bi() {
            var e = ks;
            ks = null;
            for (var t = 0; t < e.length; ++t) e[t]()
        }

        function Ci(e, t, o) {
            return "string" == typeof t && (t = {
                type: t,
                preventDefault: function() {
                    this.defaultPrevented = !0
                }
            }), Ts(e, o || t.type, e, t), mi(t) || t.codemirrorIgnore
        }

        function Ei(e) {
            var t = e._handlers && e._handlers.cursorActivity;
            if (t)
                for (var o = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), n = 0; n < t.length; ++n) - 1 == wi(o, t[n]) && o.push(t[n])
        }

        function Si(e, t) {
            var o = e._handlers && e._handlers[t];
            return o && o.length > 0
        }

        function Ti(e) {
            e.prototype.on = function(e, t) {
                Es(this, e, t)
            }, e.prototype.off = function(e, t) {
                Ss(this, e, t)
            }
        }

        function ki() {
            this.id = null
        }

        function Ai(e, t, o) {
            for (var n = 0, i = 0;;) {
                var r = e.indexOf("	", n); - 1 == r && (r = e.length);
                var s = r - n;
                if (r == e.length || i + s >= t) return n + Math.min(s, t - i);
                if (i += r - n, i += o - i % o, n = r + 1, i >= t) return n
            }
        }

        function Bi(e) {
            for (; Rs.length <= e;) Rs.push(xi(Rs) + " ");
            return Rs[e]
        }

        function xi(e) {
            return e[e.length - 1]
        }

        function wi(e, t) {
            for (var o = 0; o < e.length; ++o)
                if (e[o] == t) return o;
            return -1
        }

        function Ii(e, t) {
            for (var o = [], n = 0; n < e.length; n++) o[n] = t(e[n], n);
            return o
        }

        function Ni() {}

        function Ri(e, t) {
            var o;
            return Object.create ? o = Object.create(e) : (Ni.prototype = e, o = new Ni), t && Li(t, o), o
        }

        function Li(e, t, o) {
            t || (t = {});
            for (var n in e) !e.hasOwnProperty(n) || o === !1 && t.hasOwnProperty(n) || (t[n] = e[n]);
            return t
        }

        function Oi(e) {
            var t = Array.prototype.slice.call(arguments, 1);
            return function() {
                return e.apply(null, t)
            }
        }

        function Di(e, t) {
            return t ? t.source.indexOf("\\w") > -1 && Ms(e) ? !0 : t.test(e) : Ms(e)
        }

        function Mi(e) {
            for (var t in e)
                if (e.hasOwnProperty(t) && e[t]) return !1;
            return !0
        }

        function Pi(e) {
            return e.charCodeAt(0) >= 768 && Ps.test(e)
        }

        function Fi(e, t, o, n) {
            var i = document.createElement(e);
            if (o && (i.className = o), n && (i.style.cssText = n), "string" == typeof t) i.appendChild(document.createTextNode(t));
            else if (t)
                for (var r = 0; r < t.length; ++r) i.appendChild(t[r]);
            return i
        }

        function Hi(e) {
            for (var t = e.childNodes.length; t > 0; --t) e.removeChild(e.firstChild);
            return e
        }

        function Ui(e, t) {
            return Hi(e).appendChild(t)
        }

        function Vi() {
            return document.activeElement
        }

        function Wi(e) {
            return new RegExp("(^|\\s)" + e + "(?:$|\\s)\\s*")
        }

        function Gi(e, t) {
            for (var o = e.split(" "), n = 0; n < o.length; n++) o[n] && !Wi(o[n]).test(t) && (t += " " + o[n]);
            return t
        }

        function Ki(e) {
            if (document.body.getElementsByClassName)
                for (var t = document.body.getElementsByClassName("CodeMirror"), o = 0; o < t.length; o++) {
                    var n = t[o].CodeMirror;
                    n && e(n)
                }
        }

        function ji() {
            Gs || (Yi(), Gs = !0)
        }

        function Yi() {
            var e;
            Es(window, "resize", function() {
                null == e && (e = setTimeout(function() {
                    e = null, Ki(Vt)
                }, 100))
            }), Es(window, "blur", function() {
                Ki(po)
            })
        }

        function Xi(e) {
            if (null == Hs) {
                var t = Fi("span", "\u200b");
                Ui(e, Fi("span", [t, document.createTextNode("x")])), 0 != e.firstChild.offsetHeight && (Hs = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(pr && 8 > hr))
            }
            var o = Hs ? Fi("span", "\u200b") : Fi("span", "\xa0", null, "display: inline-block; width: 1px; margin-right: -1px");
            return o.setAttribute("cm-text", ""), o
        }

        function zi(e) {
            if (null != Us) return Us;
            var t = Ui(e, document.createTextNode("A\u062eA")),
                o = Os(t, 0, 1).getBoundingClientRect();
            if (!o || o.left == o.right) return !1;
            var n = Os(t, 1, 2).getBoundingClientRect();
            return Us = n.right - o.right < 3
        }

        function qi(e) {
            if (null != zs) return zs;
            var t = Ui(e, Fi("span", "x")),
                o = t.getBoundingClientRect(),
                n = Os(t, 0, 1).getBoundingClientRect();
            return zs = Math.abs(o.left - n.left) > 1
        }

        function $i(e, t, o, n) {
            if (!e) return n(t, o, "ltr");
            for (var i = !1, r = 0; r < e.length; ++r) {
                var s = e[r];
                (s.from < o && s.to > t || t == o && s.to == t) && (n(Math.max(s.from, t), Math.min(s.to, o), 1 == s.level ? "rtl" : "ltr"), i = !0)
            }
            i || n(t, o, "ltr")
        }

        function Qi(e) {
            return e.level % 2 ? e.to : e.from
        }

        function Ji(e) {
            return e.level % 2 ? e.from : e.to
        }

        function Zi(e) {
            var t = ei(e);
            return t ? Qi(t[0]) : 0
        }

        function er(e) {
            var t = ei(e);
            return t ? Ji(xi(t)) : e.text.length
        }

        function tr(e, t) {
            var o = Xn(e.doc, t),
                n = dn(o);
            n != o && (t = Qn(n));
            var i = ei(n),
                r = i ? i[0].level % 2 ? er(n) : Zi(n) : 0;
            return Ir(t, r)
        }

        function or(e, t) {
            for (var o, n = Xn(e.doc, t); o = pn(n);) n = o.find(1, !0).line, t = null;
            var i = ei(n),
                r = i ? i[0].level % 2 ? Zi(n) : er(n) : n.text.length;
            return Ir(null == t ? Qn(n) : t, r)
        }

        function nr(e, t) {
            var o = tr(e, t.line),
                n = Xn(e.doc, o.line),
                i = ei(n);
            if (!i || 0 == i[0].level) {
                var r = Math.max(0, n.text.search(/\S/)),
                    s = t.line == o.line && t.ch <= r && t.ch;
                return Ir(o.line, s ? 0 : r)
            }
            return o
        }

        function ir(e, t, o) {
            var n = e[0].level;
            return t == n ? !0 : o == n ? !1 : o > t
        }

        function rr(e, t) {
            $s = null;
            for (var o, n = 0; n < e.length; ++n) {
                var i = e[n];
                if (i.from < t && i.to > t) return n;
                if (i.from == t || i.to == t) {
                    if (null != o) return ir(e, i.level, e[o].level) ? (i.from != i.to && ($s = o), n) : (i.from != i.to && ($s = n), o);
                    o = n
                }
            }
            return o
        }

        function sr(e, t, o, n) {
            if (!n) return t + o;
            do t += o; while (t > 0 && Pi(e.text.charAt(t)));
            return t
        }

        function ar(e, t, o, n) {
            var i = ei(e);
            if (!i) return lr(e, t, o, n);
            for (var r = rr(i, t), s = i[r], a = sr(e, t, s.level % 2 ? -o : o, n);;) {
                if (a > s.from && a < s.to) return a;
                if (a == s.from || a == s.to) return rr(i, a) == r ? a : (s = i[r += o], o > 0 == s.level % 2 ? s.to : s.from);
                if (s = i[r += o], !s) return null;
                a = o > 0 == s.level % 2 ? sr(e, s.to, -1, n) : sr(e, s.from, 1, n)
            }
        }

        function lr(e, t, o, n) {
            var i = t + o;
            if (n)
                for (; i > 0 && Pi(e.text.charAt(i));) i += o;
            return 0 > i || i > e.text.length ? null : i
        }
        var cr = /gecko\/\d/i.test(navigator.userAgent),
            ur = /MSIE \d/.test(navigator.userAgent),
            gr = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),
            pr = ur || gr,
            hr = pr && (ur ? document.documentMode || 6 : gr[1]),
            dr = /WebKit\//.test(navigator.userAgent),
            fr = dr && /Qt\/\d+\.\d+/.test(navigator.userAgent),
            mr = /Chrome\//.test(navigator.userAgent),
            yr = /Opera\//.test(navigator.userAgent),
            vr = /Apple Computer/.test(navigator.vendor),
            _r = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),
            br = /PhantomJS/.test(navigator.userAgent),
            Cr = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent),
            Er = Cr || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
            Sr = Cr || /Mac/.test(navigator.platform),
            Tr = /win/i.test(navigator.platform),
            kr = yr && navigator.userAgent.match(/Version\/(\d*\.\d*)/);
        kr && (kr = Number(kr[1])), kr && kr >= 15 && (yr = !1, dr = !0);
        var Ar = Sr && (fr || yr && (null == kr || 12.11 > kr)),
            Br = cr || pr && hr >= 9,
            xr = !1,
            wr = !1;
        f.prototype = Li({
            update: function(e) {
                var t = e.scrollWidth > e.clientWidth + 1,
                    o = e.scrollHeight > e.clientHeight + 1,
                    n = e.nativeBarWidth;
                if (o) {
                    this.vert.style.display = "block", this.vert.style.bottom = t ? n + "px" : "0";
                    var i = e.viewHeight - (t ? n : 0);
                    this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + i) + "px"
                } else this.vert.style.display = "", this.vert.firstChild.style.height = "0";
                if (t) {
                    this.horiz.style.display = "block", this.horiz.style.right = o ? n + "px" : "0", this.horiz.style.left = e.barLeft + "px";
                    var r = e.viewWidth - e.barLeft - (o ? n : 0);
                    this.horiz.firstChild.style.width = e.scrollWidth - e.clientWidth + r + "px"
                } else this.horiz.style.display = "", this.horiz.firstChild.style.width = "0";
                return !this.checkedOverlay && e.clientHeight > 0 && (0 == n && this.overlayHack(), this.checkedOverlay = !0), {
                    right: o ? n : 0,
                    bottom: t ? n : 0
                }
            },
            setScrollLeft: function(e) {
                this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e)
            },
            setScrollTop: function(e) {
                this.vert.scrollTop != e && (this.vert.scrollTop = e)
            },
            overlayHack: function() {
                var e = Sr && !_r ? "12px" : "18px";
                this.horiz.style.minHeight = this.vert.style.minWidth = e;
                var t = this,
                    o = function(e) {
                        yi(e) != t.vert && yi(e) != t.horiz && Bt(t.cm, Kt)(e)
                    };
                Es(this.vert, "mousedown", o),
                    Es(this.horiz, "mousedown", o)
            },
            clear: function() {
                var e = this.horiz.parentNode;
                e.removeChild(this.horiz), e.removeChild(this.vert)
            }
        }, f.prototype), m.prototype = Li({
            update: function() {
                return {
                    bottom: 0,
                    right: 0
                }
            },
            setScrollLeft: function() {},
            setScrollTop: function() {},
            clear: function() {}
        }, m.prototype), e.scrollbarModel = {
            "native": f,
            "null": m
        }, k.prototype.signal = function(e, t) {
            Si(e, t) && this.events.push(arguments)
        }, k.prototype.finish = function() {
            for (var e = 0; e < this.events.length; e++) Ts.apply(null, this.events[e])
        };
        var Ir = e.Pos = function(e, t) {
                return this instanceof Ir ? (this.line = e, void(this.ch = t)) : new Ir(e, t)
            },
            Nr = e.cmpPos = function(e, t) {
                return e.line - t.line || e.ch - t.ch
            },
            Rr = null;
        te.prototype = Li({
            init: function(e) {
                function t(e) {
                    if (n.somethingSelected()) Rr = n.getSelections(), o.inaccurateSelection && (o.prevInput = "", o.inaccurateSelection = !1, r.value = Rr.join("\n"), Ls(r));
                    else {
                        if (!n.options.lineWiseCopyCut) return;
                        var t = Z(n);
                        Rr = t.text, "cut" == e.type ? n.setSelections(t.ranges, null, xs) : (o.prevInput = "", r.value = t.text.join("\n"), Ls(r))
                    }
                    "cut" == e.type && (n.state.cutIncoming = !0)
                }
                var o = this,
                    n = this.cm,
                    i = this.wrapper = oe(),
                    r = this.textarea = i.firstChild;
                e.wrapper.insertBefore(i, e.wrapper.firstChild), Cr && (r.style.width = "0px"), Es(r, "input", function() {
                    pr && hr >= 9 && o.hasSelection && (o.hasSelection = null), o.poll()
                }), Es(r, "paste", function() {
                    if (dr && !n.state.fakedLastChar && !(new Date - n.state.lastMiddleDown < 200)) {
                        var e = r.selectionStart,
                            t = r.selectionEnd;
                        r.value += "$", r.selectionEnd = t, r.selectionStart = e, n.state.fakedLastChar = !0
                    }
                    n.state.pasteIncoming = !0, o.fastPoll()
                }), Es(r, "cut", t), Es(r, "copy", t), Es(e.scroller, "paste", function(t) {
                    Wt(e, t) || (n.state.pasteIncoming = !0, o.focus())
                }), Es(e.lineSpace, "selectstart", function(t) {
                    Wt(e, t) || _s(t)
                }), Es(r, "compositionstart", function() {
                    var e = n.getCursor("from");
                    o.composing = {
                        start: e,
                        range: n.markText(e, n.getCursor("to"), {
                            className: "CodeMirror-composing"
                        })
                    }
                }), Es(r, "compositionend", function() {
                    o.composing && (o.poll(), o.composing.range.clear(), o.composing = null)
                })
            },
            prepareSelection: function() {
                var e = this.cm,
                    t = e.display,
                    o = e.doc,
                    n = Re(e);
                if (e.options.moveInputWithCursor) {
                    var i = ut(e, o.sel.primary().head, "div"),
                        r = t.wrapper.getBoundingClientRect(),
                        s = t.lineDiv.getBoundingClientRect();
                    n.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, i.top + s.top - r.top)), n.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, i.left + s.left - r.left))
                }
                return n
            },
            showSelection: function(e) {
                var t = this.cm,
                    o = t.display;
                Ui(o.cursorDiv, e.cursors), Ui(o.selectionDiv, e.selection), null != e.teTop && (this.wrapper.style.top = e.teTop + "px", this.wrapper.style.left = e.teLeft + "px")
            },
            reset: function(e) {
                if (!this.contextMenuPending) {
                    var t, o, n = this.cm,
                        i = n.doc;
                    if (n.somethingSelected()) {
                        this.prevInput = "";
                        var r = i.sel.primary();
                        t = Xs && (r.to().line - r.from().line > 100 || (o = n.getSelection()).length > 1e3);
                        var s = t ? "-" : o || n.getSelection();
                        this.textarea.value = s, n.state.focused && Ls(this.textarea), pr && hr >= 9 && (this.hasSelection = s)
                    } else e || (this.prevInput = this.textarea.value = "", pr && hr >= 9 && (this.hasSelection = null));
                    this.inaccurateSelection = t
                }
            },
            getField: function() {
                return this.textarea
            },
            supportsTouch: function() {
                return !1
            },
            focus: function() {
                if ("nocursor" != this.cm.options.readOnly && (!Er || Vi() != this.textarea)) try {
                    this.textarea.focus()
                } catch (e) {}
            },
            blur: function() {
                this.textarea.blur()
            },
            resetPosition: function() {
                this.wrapper.style.top = this.wrapper.style.left = 0
            },
            receivedFocus: function() {
                this.slowPoll()
            },
            slowPoll: function() {
                var e = this;
                e.pollingFast || e.polling.set(this.cm.options.pollInterval, function() {
                    e.poll(), e.cm.state.focused && e.slowPoll()
                })
            },
            fastPoll: function() {
                function e() {
                    var n = o.poll();
                    n || t ? (o.pollingFast = !1, o.slowPoll()) : (t = !0, o.polling.set(60, e))
                }
                var t = !1,
                    o = this;
                o.pollingFast = !0, o.polling.set(20, e)
            },
            poll: function() {
                var e = this.cm,
                    t = this.textarea,
                    o = this.prevInput;
                if (!e.state.focused || Ys(t) && !o || Q(e) || e.options.disableInput || e.state.keySeq) return !1;
                e.state.pasteIncoming && e.state.fakedLastChar && (t.value = t.value.substring(0, t.value.length - 1), e.state.fakedLastChar = !1);
                var n = t.value;
                if (n == o && !e.somethingSelected()) return !1;
                if (pr && hr >= 9 && this.hasSelection === n || Sr && /[\uf700-\uf7ff]/.test(n)) return e.display.input.reset(), !1;
                if (e.doc.sel == e.display.selForContextMenu) {
                    var i = n.charCodeAt(0);
                    if (8203 != i || o || (o = "\u200b"), 8666 == i) return this.reset(), this.cm.execCommand("undo")
                }
                for (var r = 0, s = Math.min(o.length, n.length); s > r && o.charCodeAt(r) == n.charCodeAt(r);) ++r;
                var a = this;
                return At(e, function() {
                    J(e, n.slice(r), o.length - r, null, a.composing ? "*compose" : null), n.length > 1e3 || n.indexOf("\n") > -1 ? t.value = a.prevInput = "" : a.prevInput = n, a.composing && (a.composing.range.clear(), a.composing.range = e.markText(a.composing.start, e.getCursor("to"), {
                        className: "CodeMirror-composing"
                    }))
                }), !0
            },
            ensurePolled: function() {
                this.pollingFast && this.poll() && (this.pollingFast = !1)
            },
            onKeyPress: function() {
                pr && hr >= 9 && (this.hasSelection = null), this.fastPoll()
            },
            onContextMenu: function(e) {
                function t() {
                    if (null != s.selectionStart) {
                        var e = i.somethingSelected(),
                            t = "\u200b" + (e ? s.value : "");
                        s.value = "\u21da", s.value = t, n.prevInput = e ? "" : "\u200b", s.selectionStart = 1, s.selectionEnd = t.length, r.selForContextMenu = i.doc.sel
                    }
                }

                function o() {
                    if (n.contextMenuPending = !1, n.wrapper.style.position = "relative", s.style.cssText = u, pr && 9 > hr && r.scrollbars.setScrollTop(r.scroller.scrollTop = l), null != s.selectionStart) {
                        (!pr || pr && 9 > hr) && t();
                        var e = 0,
                            o = function() {
                                r.selForContextMenu == i.doc.sel && 0 == s.selectionStart && s.selectionEnd > 0 && "\u200b" == n.prevInput ? Bt(i, os.selectAll)(i) : e++ < 10 ? r.detectingSelectAll = setTimeout(o, 500) : r.input.reset()
                            };
                        r.detectingSelectAll = setTimeout(o, 200)
                    }
                }
                var n = this,
                    i = n.cm,
                    r = i.display,
                    s = n.textarea,
                    a = Gt(i, e),
                    l = r.scroller.scrollTop;
                if (a && !yr) {
                    var c = i.options.resetSelectionOnContextMenu;
                    c && -1 == i.doc.sel.contains(a) && Bt(i, ke)(i.doc, pe(a), xs);
                    var u = s.style.cssText;
                    if (n.wrapper.style.position = "absolute", s.style.cssText = "position: fixed; width: 30px; height: 30px; top: " + (e.clientY - 5) + "px; left: " + (e.clientX - 5) + "px; z-index: 1000; background: " + (pr ? "rgba(255, 255, 255, .05)" : "transparent") + "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", dr) var g = window.scrollY;
                    if (r.input.focus(), dr && window.scrollTo(null, g), r.input.reset(), i.somethingSelected() || (s.value = n.prevInput = " "), n.contextMenuPending = !0, r.selForContextMenu = i.doc.sel, clearTimeout(r.detectingSelectAll), pr && hr >= 9 && t(), Br) {
                        Cs(e);
                        var p = function() {
                            Ss(window, "mouseup", p), setTimeout(o, 20)
                        };
                        Es(window, "mouseup", p)
                    } else setTimeout(o, 50)
                }
            },
            setUneditable: Ni,
            needsContentAttribute: !1
        }, te.prototype), ne.prototype = Li({
            init: function(e) {
                function t(e) {
                    if (n.somethingSelected()) Rr = n.getSelections(), "cut" == e.type && n.replaceSelection("", null, "cut");
                    else {
                        if (!n.options.lineWiseCopyCut) return;
                        var t = Z(n);
                        Rr = t.text, "cut" == e.type && n.operation(function() {
                            n.setSelections(t.ranges, 0, xs), n.replaceSelection("", null, "cut")
                        })
                    }
                    if (e.clipboardData && !Cr) e.preventDefault(), e.clipboardData.clearData(), e.clipboardData.setData("text/plain", Rr.join("\n"));
                    else {
                        var o = oe(),
                            i = o.firstChild;
                        n.display.lineSpace.insertBefore(o, n.display.lineSpace.firstChild), i.value = Rr.join("\n");
                        var r = document.activeElement;
                        Ls(i), setTimeout(function() {
                            n.display.lineSpace.removeChild(o), r.focus()
                        }, 50)
                    }
                }
                var o = this,
                    n = o.cm,
                    i = o.div = e.lineDiv;
                i.contentEditable = "true", ee(i), Es(i, "paste", function(e) {
                    var t = e.clipboardData && e.clipboardData.getData("text/plain");
                    t && (e.preventDefault(), n.replaceSelection(t, null, "paste"))
                }), Es(i, "compositionstart", function(e) {
                    var t = e.data;
                    if (o.composing = {
                            sel: n.doc.sel,
                            data: t,
                            startData: t
                        }, t) {
                        var i = n.doc.sel.primary(),
                            r = n.getLine(i.head.line),
                            s = r.indexOf(t, Math.max(0, i.head.ch - t.length));
                        s > -1 && s <= i.head.ch && (o.composing.sel = pe(Ir(i.head.line, s), Ir(i.head.line, s + t.length)))
                    }
                }), Es(i, "compositionupdate", function(e) {
                    o.composing.data = e.data
                }), Es(i, "compositionend", function(e) {
                    var t = o.composing;
                    t && (e.data == t.startData || /\u200b/.test(e.data) || (t.data = e.data), setTimeout(function() {
                        t.handled || o.applyComposition(t), o.composing == t && (o.composing = null)
                    }, 50))
                }), Es(i, "touchstart", function() {
                    o.forceCompositionEnd()
                }), Es(i, "input", function() {
                    o.composing || o.pollContent() || At(o.cm, function() {
                        Rt(n)
                    })
                }), Es(i, "copy", t), Es(i, "cut", t)
            },
            prepareSelection: function() {
                var e = Re(this.cm, !1);
                return e.focus = this.cm.state.focused, e
            },
            showSelection: function(e) {
                e && this.cm.display.view.length && (e.focus && this.showPrimarySelection(), this.showMultipleSelections(e))
            },
            showPrimarySelection: function() {
                var e = window.getSelection(),
                    t = this.cm.doc.sel.primary(),
                    o = se(this.cm, e.anchorNode, e.anchorOffset),
                    n = se(this.cm, e.focusNode, e.focusOffset);
                if (!o || o.bad || !n || n.bad || 0 != Nr(q(o, n), t.from()) || 0 != Nr(z(o, n), t.to())) {
                    var i = ie(this.cm, t.from()),
                        r = ie(this.cm, t.to());
                    if (i || r) {
                        var s = this.cm.display.view,
                            a = e.rangeCount && e.getRangeAt(0);
                        if (i) {
                            if (!r) {
                                var l = s[s.length - 1].measure,
                                    c = l.maps ? l.maps[l.maps.length - 1] : l.map;
                                r = {
                                    node: c[c.length - 1],
                                    offset: c[c.length - 2] - c[c.length - 3]
                                }
                            }
                        } else i = {
                            node: s[0].measure.map[2],
                            offset: 0
                        };
                        try {
                            var u = Os(i.node, i.offset, r.offset, r.node)
                        } catch (g) {}
                        u && (e.removeAllRanges(), e.addRange(u), a && null == e.anchorNode ? e.addRange(a) : cr && this.startGracePeriod()), this.rememberSelection()
                    }
                }
            },
            startGracePeriod: function() {
                var e = this;
                clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout(function() {
                    e.gracePeriod = !1, e.selectionChanged() && e.cm.operation(function() {
                        e.cm.curOp.selectionChanged = !0
                    })
                }, 20)
            },
            showMultipleSelections: function(e) {
                Ui(this.cm.display.cursorDiv, e.cursors), Ui(this.cm.display.selectionDiv, e.selection)
            },
            rememberSelection: function() {
                var e = window.getSelection();
                this.lastAnchorNode = e.anchorNode, this.lastAnchorOffset = e.anchorOffset, this.lastFocusNode = e.focusNode, this.lastFocusOffset = e.focusOffset
            },
            selectionInEditor: function() {
                var e = window.getSelection();
                if (!e.rangeCount) return !1;
                var t = e.getRangeAt(0).commonAncestorContainer;
                return Fs(this.div, t)
            },
            focus: function() {
                "nocursor" != this.cm.options.readOnly && this.div.focus()
            },
            blur: function() {
                this.div.blur()
            },
            getField: function() {
                return this.div
            },
            supportsTouch: function() {
                return !0
            },
            receivedFocus: function() {
                function e() {
                    t.cm.state.focused && (t.pollSelection(), t.polling.set(t.cm.options.pollInterval, e))
                }
                var t = this;
                this.selectionInEditor() ? this.pollSelection() : At(this.cm, function() {
                    t.cm.curOp.selectionChanged = !0
                }), this.polling.set(this.cm.options.pollInterval, e)
            },
            selectionChanged: function() {
                var e = window.getSelection();
                return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset
            },
            pollSelection: function() {
                if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
                    var e = window.getSelection(),
                        t = this.cm;
                    this.rememberSelection();
                    var o = se(t, e.anchorNode, e.anchorOffset),
                        n = se(t, e.focusNode, e.focusOffset);
                    o && n && At(t, function() {
                        ke(t.doc, pe(o, n), xs), (o.bad || n.bad) && (t.curOp.selectionChanged = !0)
                    })
                }
            },
            pollContent: function() {
                var e = this.cm,
                    t = e.display,
                    o = e.doc.sel.primary(),
                    n = o.from(),
                    i = o.to();
                if (n.line < t.viewFrom || i.line > t.viewTo - 1) return !1;
                var r;
                if (n.line == t.viewFrom || 0 == (r = Dt(e, n.line))) var s = Qn(t.view[0].line),
                    a = t.view[0].node;
                else var s = Qn(t.view[r].line),
                    a = t.view[r - 1].node.nextSibling;
                var l = Dt(e, i.line);
                if (l == t.view.length - 1) var c = t.viewTo - 1,
                    u = t.view[l].node;
                else var c = Qn(t.view[l + 1].line) - 1,
                    u = t.view[l + 1].node.previousSibling;
                for (var g = js(le(e, a, u, s, c)), p = zn(e.doc, Ir(s, 0), Ir(c, Xn(e.doc, c).text.length)); g.length > 1 && p.length > 1;)
                    if (xi(g) == xi(p)) g.pop(), p.pop(), c--;
                    else {
                        if (g[0] != p[0]) break;
                        g.shift(), p.shift(), s++
                    }
                for (var h = 0, d = 0, f = g[0], m = p[0], y = Math.min(f.length, m.length); y > h && f.charCodeAt(h) == m.charCodeAt(h);) ++h;
                for (var v = xi(g), _ = xi(p), b = Math.min(v.length - (1 == g.length ? h : 0), _.length - (1 == p.length ? h : 0)); b > d && v.charCodeAt(v.length - d - 1) == _.charCodeAt(_.length - d - 1);) ++d;
                g[g.length - 1] = v.slice(0, v.length - d), g[0] = g[0].slice(h);
                var C = Ir(s, h),
                    E = Ir(c, p.length ? xi(p).length - d : 0);
                return g.length > 1 || g[0] || Nr(C, E) ? (Bo(e.doc, g, C, E, "+input"), !0) : void 0
            },
            ensurePolled: function() {
                this.forceCompositionEnd()
            },
            reset: function() {
                this.forceCompositionEnd()
            },
            forceCompositionEnd: function() {
                this.composing && !this.composing.handled && (this.applyComposition(this.composing), this.composing.handled = !0, this.div.blur(), this.div.focus())
            },
            applyComposition: function(e) {
                e.data && e.data != e.startData && Bt(this.cm, J)(this.cm, e.data, 0, e.sel)
            },
            setUneditable: function(e) {
                e.setAttribute("contenteditable", "false")
            },
            onKeyPress: function(e) {
                e.preventDefault(), Bt(this.cm, J)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0)
            },
            onContextMenu: Ni,
            resetPosition: Ni,
            needsContentAttribute: !0
        }, ne.prototype), e.inputStyles = {
            textarea: te,
            contenteditable: ne
        }, ce.prototype = {
            primary: function() {
                return this.ranges[this.primIndex]
            },
            equals: function(e) {
                if (e == this) return !0;
                if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length) return !1;
                for (var t = 0; t < this.ranges.length; t++) {
                    var o = this.ranges[t],
                        n = e.ranges[t];
                    if (0 != Nr(o.anchor, n.anchor) || 0 != Nr(o.head, n.head)) return !1
                }
                return !0
            },
            deepCopy: function() {
                for (var e = [], t = 0; t < this.ranges.length; t++) e[t] = new ue(X(this.ranges[t].anchor), X(this.ranges[t].head));
                return new ce(e, this.primIndex)
            },
            somethingSelected: function() {
                for (var e = 0; e < this.ranges.length; e++)
                    if (!this.ranges[e].empty()) return !0;
                return !1
            },
            contains: function(e, t) {
                t || (t = e);
                for (var o = 0; o < this.ranges.length; o++) {
                    var n = this.ranges[o];
                    if (Nr(t, n.from()) >= 0 && Nr(e, n.to()) <= 0) return o
                }
                return -1
            }
        }, ue.prototype = {
            from: function() {
                return q(this.anchor, this.head)
            },
            to: function() {
                return z(this.anchor, this.head)
            },
            empty: function() {
                return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch
            }
        };
        var Lr, Or, Dr, Mr = {
                left: 0,
                right: 0,
                top: 0,
                bottom: 0
            },
            Pr = null,
            Fr = 0,
            Hr = 0,
            Ur = 0,
            Vr = null;
        pr ? Vr = -.53 : cr ? Vr = 15 : mr ? Vr = -.7 : vr && (Vr = -1 / 3);
        var Wr = function(e) {
            var t = e.wheelDeltaX,
                o = e.wheelDeltaY;
            return null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail), null == o && e.detail && e.axis == e.VERTICAL_AXIS ? o = e.detail : null == o && (o = e.wheelDelta), {
                x: t,
                y: o
            }
        };
        e.wheelEventPixels = function(e) {
            var t = Wr(e);
            return t.x *= Vr, t.y *= Vr, t
        };
        var Gr = new ki,
            Kr = null,
            jr = e.changeEnd = function(e) {
                return e.text ? Ir(e.from.line + e.text.length - 1, xi(e.text).length + (1 == e.text.length ? e.from.ch : 0)) : e.to
            };
        e.prototype = {
            constructor: e,
            focus: function() {
                window.focus(), this.display.input.focus()
            },
            setOption: function(e, t) {
                var o = this.options,
                    n = o[e];
                o[e] == t && "mode" != e || (o[e] = t, Xr.hasOwnProperty(e) && Bt(this, Xr[e])(this, t, n))
            },
            getOption: function(e) {
                return this.options[e]
            },
            getDoc: function() {
                return this.doc
            },
            addKeyMap: function(e, t) {
                this.state.keyMaps[t ? "push" : "unshift"](Wo(e))
            },
            removeKeyMap: function(e) {
                for (var t = this.state.keyMaps, o = 0; o < t.length; ++o)
                    if (t[o] == e || t[o].name == e) return t.splice(o, 1), !0
            },
            addOverlay: xt(function(t, o) {
                var n = t.token ? t : e.getMode(this.options, t);
                if (n.startState) throw new Error("Overlays may not be stateful.");
                this.state.overlays.push({
                    mode: n,
                    modeSpec: t,
                    opaque: o && o.opaque
                }), this.state.modeGen++, Rt(this)
            }),
            removeOverlay: xt(function(e) {
                for (var t = this.state.overlays, o = 0; o < t.length; ++o) {
                    var n = t[o].modeSpec;
                    if (n == e || "string" == typeof e && n.name == e) return t.splice(o, 1), this.state.modeGen++, void Rt(this)
                }
            }),
            indentLine: xt(function(e, t, o) {
                "string" != typeof t && "number" != typeof t && (t = null == t ? this.options.smartIndent ? "smart" : "prev" : t ? "add" : "subtract"), me(this.doc, e) && Do(this, e, t, o)
            }),
            indentSelection: xt(function(e) {
                for (var t = this.doc.sel.ranges, o = -1, n = 0; n < t.length; n++) {
                    var i = t[n];
                    if (i.empty()) i.head.line > o && (Do(this, i.head.line, e, !0), o = i.head.line, n == this.doc.sel.primIndex && Lo(this));
                    else {
                        var r = i.from(),
                            s = i.to(),
                            a = Math.max(o, r.line);
                        o = Math.min(this.lastLine(), s.line - (s.ch ? 0 : 1)) + 1;
                        for (var l = a; o > l; ++l) Do(this, l, e);
                        var c = this.doc.sel.ranges;
                        0 == r.ch && t.length == c.length && c[n].from().ch > 0 && Ce(this.doc, n, new ue(r, c[n].to()), xs)
                    }
                }
            }),
            getTokenAt: function(e, t) {
                return xn(this, e, t)
            },
            getLineTokens: function(e, t) {
                return xn(this, Ir(e), t, !0)
            },
            getTokenTypeAt: function(e) {
                e = de(this.doc, e);
                var t, o = Nn(this, Xn(this.doc, e.line)),
                    n = 0,
                    i = (o.length - 1) / 2,
                    r = e.ch;
                if (0 == r) t = o[2];
                else
                    for (;;) {
                        var s = n + i >> 1;
                        if ((s ? o[2 * s - 1] : 0) >= r) i = s;
                        else {
                            if (!(o[2 * s + 1] < r)) {
                                t = o[2 * s + 2];
                                break
                            }
                            n = s + 1
                        }
                    }
                var a = t ? t.indexOf("cm-overlay ") : -1;
                return 0 > a ? t : 0 == a ? null : t.slice(0, a - 1)
            },
            getModeAt: function(t) {
                var o = this.doc.mode;
                return o.innerMode ? e.innerMode(o, this.getTokenAt(t).state).mode : o
            },
            getHelper: function(e, t) {
                return this.getHelpers(e, t)[0]
            },
            getHelpers: function(e, t) {
                var o = [];
                if (!Zr.hasOwnProperty(t)) return o;
                var n = Zr[t],
                    i = this.getModeAt(e);
                if ("string" == typeof i[t]) n[i[t]] && o.push(n[i[t]]);
                else if (i[t])
                    for (var r = 0; r < i[t].length; r++) {
                        var s = n[i[t][r]];
                        s && o.push(s)
                    } else i.helperType && n[i.helperType] ? o.push(n[i.helperType]) : n[i.name] && o.push(n[i.name]);
                for (var r = 0; r < n._global.length; r++) {
                    var a = n._global[r];
                    a.pred(i, this) && -1 == wi(o, a.val) && o.push(a.val)
                }
                return o
            },
            getStateAfter: function(e, t) {
                var o = this.doc;
                return e = he(o, null == e ? o.first + o.size - 1 : e), He(this, e + 1, t)
            },
            cursorCoords: function(e, t) {
                var o, n = this.doc.sel.primary();
                return o = null == e ? n.head : "object" == typeof e ? de(this.doc, e) : e ? n.from() : n.to(), ut(this, o, t || "page")
            },
            charCoords: function(e, t) {
                return ct(this, de(this.doc, e), t || "page")
            },
            coordsChar: function(e, t) {
                return e = lt(this, e, t || "page"), ht(this, e.left, e.top)
            },
            lineAtHeight: function(e, t) {
                return e = lt(this, {
                    top: e,
                    left: 0
                }, t || "page").top, Jn(this.doc, e + this.display.viewOffset)
            },
            heightAtLine: function(e, t) {
                var o, n = !1;
                if ("number" == typeof e) {
                    var i = this.doc.first + this.doc.size - 1;
                    e < this.doc.first ? e = this.doc.first : e > i && (e = i, n = !0), o = Xn(this.doc, e)
                } else o = e;
                return at(this, o, {
                    top: 0,
                    left: 0
                }, t || "page").top + (n ? this.doc.height - Zn(o) : 0)
            },
            defaultTextHeight: function() {
                return ft(this.display)
            },
            defaultCharWidth: function() {
                return mt(this.display)
            },
            setGutterMarker: xt(function(e, t, o) {
                return Mo(this.doc, e, "gutter", function(e) {
                    var n = e.gutterMarkers || (e.gutterMarkers = {});
                    return n[t] = o, !o && Mi(n) && (e.gutterMarkers = null), !0
                })
            }),
            clearGutter: xt(function(e) {
                var t = this,
                    o = t.doc,
                    n = o.first;
                o.iter(function(o) {
                    o.gutterMarkers && o.gutterMarkers[e] && (o.gutterMarkers[e] = null, Lt(t, n, "gutter"), Mi(o.gutterMarkers) && (o.gutterMarkers = null)), ++n
                })
            }),
            lineInfo: function(e) {
                if ("number" == typeof e) {
                    if (!me(this.doc, e)) return null;
                    var t = e;
                    if (e = Xn(this.doc, e), !e) return null
                } else {
                    var t = Qn(e);
                    if (null == t) return null
                }
                return {
                    line: t,
                    handle: e,
                    text: e.text,
                    gutterMarkers: e.gutterMarkers,
                    textClass: e.textClass,
                    bgClass: e.bgClass,
                    wrapClass: e.wrapClass,
                    widgets: e.widgets
                }
            },
            getViewport: function() {
                return {
                    from: this.display.viewFrom,
                    to: this.display.viewTo
                }
            },
            addWidget: function(e, t, o, n, i) {
                var r = this.display;
                e = ut(this, de(this.doc, e));
                var s = e.bottom,
                    a = e.left;
                if (t.style.position = "absolute", t.setAttribute("cm-ignore-events", "true"), this.display.input.setUneditable(t), r.sizer.appendChild(t), "over" == n) s = e.top;
                else if ("above" == n || "near" == n) {
                    var l = Math.max(r.wrapper.clientHeight, this.doc.height),
                        c = Math.max(r.sizer.clientWidth, r.lineSpace.clientWidth);
                    ("above" == n || e.bottom + t.offsetHeight > l) && e.top > t.offsetHeight ? s = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= l && (s = e.bottom), a + t.offsetWidth > c && (a = c - t.offsetWidth)
                }
                t.style.top = s + "px", t.style.left = t.style.right = "", "right" == i ? (a = r.sizer.clientWidth - t.offsetWidth, t.style.right = "0px") : ("left" == i ? a = 0 : "middle" == i && (a = (r.sizer.clientWidth - t.offsetWidth) / 2), t.style.left = a + "px"), o && Io(this, a, s, a + t.offsetWidth, s + t.offsetHeight)
            },
            triggerOnKeyDown: xt(so),
            triggerOnKeyPress: xt(co),
            triggerOnKeyUp: lo,
            execCommand: function(e) {
                return os.hasOwnProperty(e) ? os[e](this) : void 0
            },
            findPosH: function(e, t, o, n) {
                var i = 1;
                0 > t && (i = -1, t = -t);
                for (var r = 0, s = de(this.doc, e); t > r && (s = Fo(this.doc, s, i, o, n), !s.hitSide); ++r);
                return s
            },
            moveH: xt(function(e, t) {
                var o = this;
                o.extendSelectionsBy(function(n) {
                    return o.display.shift || o.doc.extend || n.empty() ? Fo(o.doc, n.head, e, t, o.options.rtlMoveVisually) : 0 > e ? n.from() : n.to()
                }, Is)
            }),
            deleteH: xt(function(e, t) {
                var o = this.doc.sel,
                    n = this.doc;
                o.somethingSelected() ? n.replaceSelection("", null, "+delete") : Po(this, function(o) {
                    var i = Fo(n, o.head, e, t, !1);
                    return 0 > e ? {
                        from: i,
                        to: o.head
                    } : {
                        from: o.head,
                        to: i
                    }
                })
            }),
            findPosV: function(e, t, o, n) {
                var i = 1,
                    r = n;
                0 > t && (i = -1, t = -t);
                for (var s = 0, a = de(this.doc, e); t > s; ++s) {
                    var l = ut(this, a, "div");
                    if (null == r ? r = l.left : l.left = r, a = Ho(this, l, i, o), a.hitSide) break
                }
                return a
            },
            moveV: xt(function(e, t) {
                var o = this,
                    n = this.doc,
                    i = [],
                    r = !o.display.shift && !n.extend && n.sel.somethingSelected();
                if (n.extendSelectionsBy(function(s) {
                        if (r) return 0 > e ? s.from() : s.to();
                        var a = ut(o, s.head, "div");
                        null != s.goalColumn && (a.left = s.goalColumn), i.push(a.left);
                        var l = Ho(o, a, e, t);
                        return "page" == t && s == n.sel.primary() && Ro(o, null, ct(o, l, "div").top - a.top), l
                    }, Is), i.length)
                    for (var s = 0; s < n.sel.ranges.length; s++) n.sel.ranges[s].goalColumn = i[s]
            }),
            findWordAt: function(e) {
                var t = this.doc,
                    o = Xn(t, e.line).text,
                    n = e.ch,
                    i = e.ch;
                if (o) {
                    var r = this.getHelper(e, "wordChars");
                    (e.xRel < 0 || i == o.length) && n ? --n : ++i;
                    for (var s = o.charAt(n), a = Di(s, r) ? function(e) {
                            return Di(e, r)
                        } : /\s/.test(s) ? function(e) {
                            return /\s/.test(e)
                        } : function(e) {
                            return !/\s/.test(e) && !Di(e)
                        }; n > 0 && a(o.charAt(n - 1));) --n;
                    for (; i < o.length && a(o.charAt(i));) ++i
                }
                return new ue(Ir(e.line, n), Ir(e.line, i))
            },
            toggleOverwrite: function(e) {
                null != e && e == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? Ws(this.display.cursorDiv, "CodeMirror-overwrite") : Vs(this.display.cursorDiv, "CodeMirror-overwrite"), Ts(this, "overwriteToggle", this, this.state.overwrite))
            },
            hasFocus: function() {
                return this.display.input.getField() == Vi()
            },
            scrollTo: xt(function(e, t) {
                null == e && null == t || Oo(this), null != e && (this.curOp.scrollLeft = e), null != t && (this.curOp.scrollTop = t)
            }),
            getScrollInfo: function() {
                var e = this.display.scroller;
                return {
                    left: e.scrollLeft,
                    top: e.scrollTop,
                    height: e.scrollHeight - Ge(this) - this.display.barHeight,
                    width: e.scrollWidth - Ge(this) - this.display.barWidth,
                    clientHeight: je(this),
                    clientWidth: Ke(this)
                }
            },
            scrollIntoView: xt(function(e, t) {
                if (null == e ? (e = {
                        from: this.doc.sel.primary().head,
                        to: null
                    }, null == t && (t = this.options.cursorScrollMargin)) : "number" == typeof e ? e = {
                        from: Ir(e, 0),
                        to: null
                    } : null == e.from && (e = {
                        from: e,
                        to: null
                    }), e.to || (e.to = e.from), e.margin = t || 0, null != e.from.line) Oo(this), this.curOp.scrollToPos = e;
                else {
                    var o = No(this, Math.min(e.from.left, e.to.left), Math.min(e.from.top, e.to.top) - e.margin, Math.max(e.from.right, e.to.right), Math.max(e.from.bottom, e.to.bottom) + e.margin);
                    this.scrollTo(o.scrollLeft, o.scrollTop)
                }
            }),
            setSize: xt(function(e, t) {
                function o(e) {
                    return "number" == typeof e || /^\d+$/.test(String(e)) ? e + "px" : e
                }
                var n = this;
                null != e && (n.display.wrapper.style.width = o(e)), null != t && (n.display.wrapper.style.height = o(t)), n.options.lineWrapping && nt(this);
                var i = n.display.viewFrom;
                n.doc.iter(i, n.display.viewTo, function(e) {
                    if (e.widgets)
                        for (var t = 0; t < e.widgets.length; t++)
                            if (e.widgets[t].noHScroll) {
                                Lt(n, i, "widget");
                                break
                            }++i
                }), n.curOp.forceUpdate = !0, Ts(n, "refresh", this)
            }),
            operation: function(e) {
                return At(this, e)
            },
            refresh: xt(function() {
                var e = this.display.cachedTextHeight;
                Rt(this), this.curOp.forceUpdate = !0, it(this), this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop), u(this), (null == e || Math.abs(e - ft(this.display)) > .5) && s(this), Ts(this, "refresh", this)
            }),
            swapDoc: xt(function(e) {
                var t = this.doc;
                return t.cm = null, Yn(this, e), it(this), this.display.input.reset(), this.scrollTo(e.scrollLeft, e.scrollTop), this.curOp.forceScroll = !0, _i(this, "swapDoc", this, t), t
            }),
            getInputField: function() {
                return this.display.input.getField()
            },
            getWrapperElement: function() {
                return this.display.wrapper
            },
            getScrollerElement: function() {
                return this.display.scroller
            },
            getGutterElement: function() {
                return this.display.gutters
            }
        }, Ti(e);
        var Yr = e.defaults = {},
            Xr = e.optionHandlers = {},
            zr = e.Init = {
                toString: function() {
                    return "CodeMirror.Init"
                }
            };
        Uo("value", "", function(e, t) {
            e.setValue(t)
        }, !0), Uo("mode", null, function(e, t) {
            e.doc.modeOption = t, o(e)
        }, !0), Uo("indentUnit", 2, o, !0), Uo("indentWithTabs", !1), Uo("smartIndent", !0), Uo("tabSize", 4, function(e) {
            n(e), it(e), Rt(e)
        }, !0), Uo("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(t, o, n) {
            t.state.specialChars = new RegExp(o.source + (o.test("	") ? "" : "|	"), "g"), n != e.Init && t.refresh()
        }), Uo("specialCharPlaceholder", Dn, function(e) {
            e.refresh()
        }, !0), Uo("electricChars", !0), Uo("inputStyle", Er ? "contenteditable" : "textarea", function() {
            throw new Error("inputStyle can not (yet) be changed in a running editor")
        }, !0), Uo("rtlMoveVisually", !Tr), Uo("wholeLineUpdateBefore", !0), Uo("theme", "default", function(e) {
            a(e), l(e)
        }, !0), Uo("keyMap", "default", function(t, o, n) {
            var i = Wo(o),
                r = n != e.Init && Wo(n);
            r && r.detach && r.detach(t, i), i.attach && i.attach(t, r || null)
        }), Uo("extraKeys", null), Uo("lineWrapping", !1, i, !0), Uo("gutters", [], function(e) {
            h(e.options), l(e)
        }, !0), Uo("fixedGutter", !0, function(e, t) {
            e.display.gutters.style.left = t ? T(e.display) + "px" : "0", e.refresh()
        }, !0), Uo("coverGutterNextToScrollbar", !1, function(e) {
            v(e)
        }, !0), Uo("scrollbarStyle", "native", function(e) {
            y(e), v(e), e.display.scrollbars.setScrollTop(e.doc.scrollTop), e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)
        }, !0), Uo("lineNumbers", !1, function(e) {
            h(e.options), l(e)
        }, !0), Uo("firstLineNumber", 1, l, !0), Uo("lineNumberFormatter", function(e) {
            return e
        }, l, !0), Uo("showCursorWhenSelecting", !1, Ne, !0), Uo("resetSelectionOnContextMenu", !0), Uo("lineWiseCopyCut", !0), Uo("readOnly", !1, function(e, t) {
            "nocursor" == t ? (po(e), e.display.input.blur(), e.display.disabled = !0) : (e.display.disabled = !1, t || e.display.input.reset())
        }), Uo("disableInput", !1, function(e, t) {
            t || e.display.input.reset()
        }, !0), Uo("dragDrop", !0, Ut), Uo("cursorBlinkRate", 530), Uo("cursorScrollMargin", 0), Uo("cursorHeight", 1, Ne, !0), Uo("singleCursorHeightPerLine", !0, Ne, !0), Uo("workTime", 100), Uo("workDelay", 100), Uo("flattenSpans", !0, n, !0), Uo("addModeClass", !1, n, !0), Uo("pollInterval", 100), Uo("undoDepth", 200, function(e, t) {
            e.doc.history.undoDepth = t
        }), Uo("historyEventDelay", 1250), Uo("viewportMargin", 10, function(e) {
            e.refresh()
        }, !0), Uo("maxHighlightLength", 1e4, n, !0), Uo("moveInputWithCursor", !0, function(e, t) {
            t || e.display.input.resetPosition()
        }), Uo("tabindex", null, function(e, t) {
            e.display.input.getField().tabIndex = t || ""
        }), Uo("autofocus", null);
        var qr = e.modes = {},
            $r = e.mimeModes = {};
        e.defineMode = function(t, o) {
            e.defaults.mode || "null" == t || (e.defaults.mode = t), arguments.length > 2 && (o.dependencies = Array.prototype.slice.call(arguments, 2)), qr[t] = o
        }, e.defineMIME = function(e, t) {
            $r[e] = t
        }, e.resolveMode = function(t) {
            if ("string" == typeof t && $r.hasOwnProperty(t)) t = $r[t];
            else if (t && "string" == typeof t.name && $r.hasOwnProperty(t.name)) {
                var o = $r[t.name];
                "string" == typeof o && (o = {
                    name: o
                }), t = Ri(o, t), t.name = o.name
            } else if ("string" == typeof t && /^[\w\-]+\/[\w\-]+\+xml$/.test(t)) return e.resolveMode("application/xml");
            return "string" == typeof t ? {
                name: t
            } : t || {
                name: "null"
            }
        }, e.getMode = function(t, o) {
            var o = e.resolveMode(o),
                n = qr[o.name];
            if (!n) return e.getMode(t, "text/plain");
            var i = n(t, o);
            if (Qr.hasOwnProperty(o.name)) {
                var r = Qr[o.name];
                for (var s in r) r.hasOwnProperty(s) && (i.hasOwnProperty(s) && (i["_" + s] = i[s]), i[s] = r[s])
            }
            if (i.name = o.name, o.helperType && (i.helperType = o.helperType), o.modeProps)
                for (var s in o.modeProps) i[s] = o.modeProps[s];
            return i
        }, e.defineMode("null", function() {
            return {
                token: function(e) {
                    e.skipToEnd()
                }
            }
        }), e.defineMIME("text/plain", "null");
        var Qr = e.modeExtensions = {};
        e.extendMode = function(e, t) {
            var o = Qr.hasOwnProperty(e) ? Qr[e] : Qr[e] = {};
            Li(t, o)
        }, e.defineExtension = function(t, o) {
            e.prototype[t] = o
        }, e.defineDocExtension = function(e, t) {
            ms.prototype[e] = t
        }, e.defineOption = Uo;
        var Jr = [];
        e.defineInitHook = function(e) {
            Jr.push(e)
        };
        var Zr = e.helpers = {};
        e.registerHelper = function(t, o, n) {
            Zr.hasOwnProperty(t) || (Zr[t] = e[t] = {
                _global: []
            }), Zr[t][o] = n
        }, e.registerGlobalHelper = function(t, o, n, i) {
            e.registerHelper(t, o, i), Zr[t]._global.push({
                pred: n,
                val: i
            })
        };
        var es = e.copyState = function(e, t) {
                if (t === !0) return t;
                if (e.copyState) return e.copyState(t);
                var o = {};
                for (var n in t) {
                    var i = t[n];
                    i instanceof Array && (i = i.concat([])), o[n] = i
                }
                return o
            },
            ts = e.startState = function(e, t, o) {
                return e.startState ? e.startState(t, o) : !0
            };
        e.innerMode = function(e, t) {
            for (; e.innerMode;) {
                var o = e.innerMode(t);
                if (!o || o.mode == e) break;
                t = o.state, e = o.mode
            }
            return o || {
                mode: e,
                state: t
            }
        };
        var os = e.commands = {
                selectAll: function(e) {
                    e.setSelection(Ir(e.firstLine(), 0), Ir(e.lastLine()), xs)
                },
                singleSelection: function(e) {
                    e.setSelection(e.getCursor("anchor"), e.getCursor("head"), xs)
                },
                killLine: function(e) {
                    Po(e, function(t) {
                        if (t.empty()) {
                            var o = Xn(e.doc, t.head.line).text.length;
                            return t.head.ch == o && t.head.line < e.lastLine() ? {
                                from: t.head,
                                to: Ir(t.head.line + 1, 0)
                            } : {
                                from: t.head,
                                to: Ir(t.head.line, o)
                            }
                        }
                        return {
                            from: t.from(),
                            to: t.to()
                        }
                    })
                },
                deleteLine: function(e) {
                    Po(e, function(t) {
                        return {
                            from: Ir(t.from().line, 0),
                            to: de(e.doc, Ir(t.to().line + 1, 0))
                        }
                    })
                },
                delLineLeft: function(e) {
                    Po(e, function(e) {
                        return {
                            from: Ir(e.from().line, 0),
                            to: e.from()
                        }
                    })
                },
                delWrappedLineLeft: function(e) {
                    Po(e, function(t) {
                        var o = e.charCoords(t.head, "div").top + 5,
                            n = e.coordsChar({
                                left: 0,
                                top: o
                            }, "div");
                        return {
                            from: n,
                            to: t.from()
                        }
                    })
                },
                delWrappedLineRight: function(e) {
                    Po(e, function(t) {
                        var o = e.charCoords(t.head, "div").top + 5,
                            n = e.coordsChar({
                                left: e.display.lineDiv.offsetWidth + 100,
                                top: o
                            }, "div");
                        return {
                            from: t.from(),
                            to: n
                        }
                    })
                },
                undo: function(e) {
                    e.undo()
                },
                redo: function(e) {
                    e.redo()
                },
                undoSelection: function(e) {
                    e.undoSelection()
                },
                redoSelection: function(e) {
                    e.redoSelection()
                },
                goDocStart: function(e) {
                    e.extendSelection(Ir(e.firstLine(), 0))
                },
                goDocEnd: function(e) {
                    e.extendSelection(Ir(e.lastLine()))
                },
                goLineStart: function(e) {
                    e.extendSelectionsBy(function(t) {
                        return tr(e, t.head.line)
                    }, {
                        origin: "+move",
                        bias: 1
                    })
                },
                goLineStartSmart: function(e) {
                    e.extendSelectionsBy(function(t) {
                        return nr(e, t.head)
                    }, {
                        origin: "+move",
                        bias: 1
                    })
                },
                goLineEnd: function(e) {
                    e.extendSelectionsBy(function(t) {
                        return or(e, t.head.line)
                    }, {
                        origin: "+move",
                        bias: -1
                    })
                },
                goLineRight: function(e) {
                    e.extendSelectionsBy(function(t) {
                        var o = e.charCoords(t.head, "div").top + 5;
                        return e.coordsChar({
                            left: e.display.lineDiv.offsetWidth + 100,
                            top: o
                        }, "div")
                    }, Is)
                },
                goLineLeft: function(e) {
                    e.extendSelectionsBy(function(t) {
                        var o = e.charCoords(t.head, "div").top + 5;
                        return e.coordsChar({
                            left: 0,
                            top: o
                        }, "div")
                    }, Is)
                },
                goLineLeftSmart: function(e) {
                    e.extendSelectionsBy(function(t) {
                        var o = e.charCoords(t.head, "div").top + 5,
                            n = e.coordsChar({
                                left: 0,
                                top: o
                            }, "div");
                        return n.ch < e.getLine(n.line).search(/\S/) ? nr(e, t.head) : n
                    }, Is)
                },
                goLineUp: function(e) {
                    e.moveV(-1, "line")
                },
                goLineDown: function(e) {
                    e.moveV(1, "line")
                },
                goPageUp: function(e) {
                    e.moveV(-1, "page")
                },
                goPageDown: function(e) {
                    e.moveV(1, "page")
                },
                goCharLeft: function(e) {
                    e.moveH(-1, "char")
                },
                goCharRight: function(e) {
                    e.moveH(1, "char")
                },
                goColumnLeft: function(e) {
                    e.moveH(-1, "column")
                },
                goColumnRight: function(e) {
                    e.moveH(1, "column")
                },
                goWordLeft: function(e) {
                    e.moveH(-1, "word")
                },
                goGroupRight: function(e) {
                    e.moveH(1, "group")
                },
                goGroupLeft: function(e) {
                    e.moveH(-1, "group")
                },
                goWordRight: function(e) {
                    e.moveH(1, "word")
                },
                delCharBefore: function(e) {
                    e.deleteH(-1, "char")
                },
                delCharAfter: function(e) {
                    e.deleteH(1, "char")
                },
                delWordBefore: function(e) {
                    e.deleteH(-1, "word")
                },
                delWordAfter: function(e) {
                    e.deleteH(1, "word")
                },
                delGroupBefore: function(e) {
                    e.deleteH(-1, "group")
                },
                delGroupAfter: function(e) {
                    e.deleteH(1, "group")
                },
                indentAuto: function(e) {
                    e.indentSelection("smart")
                },
                indentMore: function(e) {
                    e.indentSelection("add")
                },
                indentLess: function(e) {
                    e.indentSelection("subtract")
                },
                insertTab: function(e) {
                    e.replaceSelection("	")
                },
                insertSoftTab: function(e) {
                    for (var t = [], o = e.listSelections(), n = e.options.tabSize, i = 0; i < o.length; i++) {
                        var r = o[i].from(),
                            s = Ns(e.getLine(r.line), r.ch, n);
                        t.push(new Array(n - s % n + 1).join(" "))
                    }
                    e.replaceSelections(t)
                },
                defaultTab: function(e) {
                    e.somethingSelected() ? e.indentSelection("add") : e.execCommand("insertTab")
                },
                transposeChars: function(e) {
                    At(e, function() {
                        for (var t = e.listSelections(), o = [], n = 0; n < t.length; n++) {
                            var i = t[n].head,
                                r = Xn(e.doc, i.line).text;
                            if (r)
                                if (i.ch == r.length && (i = new Ir(i.line, i.ch - 1)), i.ch > 0) i = new Ir(i.line, i.ch + 1), e.replaceRange(r.charAt(i.ch - 1) + r.charAt(i.ch - 2), Ir(i.line, i.ch - 2), i, "+transpose");
                                else if (i.line > e.doc.first) {
                                var s = Xn(e.doc, i.line - 1).text;
                                s && e.replaceRange(r.charAt(0) + "\n" + s.charAt(s.length - 1), Ir(i.line - 1, s.length - 1), Ir(i.line, 1), "+transpose")
                            }
                            o.push(new ue(i, i))
                        }
                        e.setSelections(o)
                    })
                },
                newlineAndIndent: function(e) {
                    At(e, function() {
                        for (var t = e.listSelections().length, o = 0; t > o; o++) {
                            var n = e.listSelections()[o];
                            e.replaceRange("\n", n.anchor, n.head, "+input"), e.indentLine(n.from().line + 1, null, !0), Lo(e)
                        }
                    })
                },
                toggleOverwrite: function(e) {
                    e.toggleOverwrite()
                }
            },
            ns = e.keyMap = {};
        ns.basic = {
            Left: "goCharLeft",
            Right: "goCharRight",
            Up: "goLineUp",
            Down: "goLineDown",
            End: "goLineEnd",
            Home: "goLineStartSmart",
            PageUp: "goPageUp",
            PageDown: "goPageDown",
            Delete: "delCharAfter",
            Backspace: "delCharBefore",
            "Shift-Backspace": "delCharBefore",
            Tab: "defaultTab",
            "Shift-Tab": "indentAuto",
            Enter: "newlineAndIndent",
            Insert: "toggleOverwrite",
            Esc: "singleSelection"
        }, ns.pcDefault = {
            "Ctrl-A": "selectAll",
            "Ctrl-D": "deleteLine",
            "Ctrl-Z": "undo",
            "Shift-Ctrl-Z": "redo",
            "Ctrl-Y": "redo",
            "Ctrl-Home": "goDocStart",
            "Ctrl-End": "goDocEnd",
            "Ctrl-Up": "goLineUp",
            "Ctrl-Down": "goLineDown",
            "Ctrl-Left": "goGroupLeft",
            "Ctrl-Right": "goGroupRight",
            "Alt-Left": "goLineStart",
            "Alt-Right": "goLineEnd",
            "Ctrl-Backspace": "delGroupBefore",
            "Ctrl-Delete": "delGroupAfter",
            "Ctrl-S": "save",
            "Ctrl-F": "find",
            "Ctrl-G": "findNext",
            "Shift-Ctrl-G": "findPrev",
            "Shift-Ctrl-F": "replace",
            "Shift-Ctrl-R": "replaceAll",
            "Ctrl-[": "indentLess",
            "Ctrl-]": "indentMore",
            "Ctrl-U": "undoSelection",
            "Shift-Ctrl-U": "redoSelection",
            "Alt-U": "redoSelection",
            fallthrough: "basic"
        }, ns.emacsy = {
            "Ctrl-F": "goCharRight",
            "Ctrl-B": "goCharLeft",
            "Ctrl-P": "goLineUp",
            "Ctrl-N": "goLineDown",
            "Alt-F": "goWordRight",
            "Alt-B": "goWordLeft",
            "Ctrl-A": "goLineStart",
            "Ctrl-E": "goLineEnd",
            "Ctrl-V": "goPageDown",
            "Shift-Ctrl-V": "goPageUp",
            "Ctrl-D": "delCharAfter",
            "Ctrl-H": "delCharBefore",
            "Alt-D": "delWordAfter",
            "Alt-Backspace": "delWordBefore",
            "Ctrl-K": "killLine",
            "Ctrl-T": "transposeChars"
        }, ns.macDefault = {
            "Cmd-A": "selectAll",
            "Cmd-D": "deleteLine",
            "Cmd-Z": "undo",
            "Shift-Cmd-Z": "redo",
            "Cmd-Y": "redo",
            "Cmd-Home": "goDocStart",
            "Cmd-Up": "goDocStart",
            "Cmd-End": "goDocEnd",
            "Cmd-Down": "goDocEnd",
            "Alt-Left": "goGroupLeft",
            "Alt-Right": "goGroupRight",
            "Cmd-Left": "goLineLeft",
            "Cmd-Right": "goLineRight",
            "Alt-Backspace": "delGroupBefore",
            "Ctrl-Alt-Backspace": "delGroupAfter",
            "Alt-Delete": "delGroupAfter",
            "Cmd-S": "save",
            "Cmd-F": "find",
            "Cmd-G": "findNext",
            "Shift-Cmd-G": "findPrev",
            "Cmd-Alt-F": "replace",
            "Shift-Cmd-Alt-F": "replaceAll",
            "Cmd-[": "indentLess",
            "Cmd-]": "indentMore",
            "Cmd-Backspace": "delWrappedLineLeft",
            "Cmd-Delete": "delWrappedLineRight",
            "Cmd-U": "undoSelection",
            "Shift-Cmd-U": "redoSelection",
            "Ctrl-Up": "goDocStart",
            "Ctrl-Down": "goDocEnd",
            fallthrough: ["basic", "emacsy"]
        }, ns["default"] = Sr ? ns.macDefault : ns.pcDefault, e.normalizeKeyMap = function(e) {
            var t = {};
            for (var o in e)
                if (e.hasOwnProperty(o)) {
                    var n = e[o];
                    if (/^(name|fallthrough|(de|at)tach)$/.test(o)) continue;
                    if ("..." == n) {
                        delete e[o];
                        continue
                    }
                    for (var i = Ii(o.split(" "), Vo), r = 0; r < i.length; r++) {
                        var s, a;
                        r == i.length - 1 ? (a = o, s = n) : (a = i.slice(0, r + 1).join(" "), s = "...");
                        var l = t[a];
                        if (l) {
                            if (l != s) throw new Error("Inconsistent bindings for " + a)
                        } else t[a] = s
                    }
                    delete e[o]
                }
            for (var c in t) e[c] = t[c];
            return e
        };
        var is = e.lookupKey = function(e, t, o, n) {
                t = Wo(t);
                var i = t.call ? t.call(e, n) : t[e];
                if (i === !1) return "nothing";
                if ("..." === i) return "multi";
                if (null != i && o(i)) return "handled";
                if (t.fallthrough) {
                    if ("[object Array]" != Object.prototype.toString.call(t.fallthrough)) return is(e, t.fallthrough, o, n);
                    for (var r = 0; r < t.fallthrough.length; r++) {
                        var s = is(e, t.fallthrough[r], o, n);
                        if (s) return s
                    }
                }
            },
            rs = e.isModifierKey = function(e) {
                var t = "string" == typeof e ? e : qs[e.keyCode];
                return "Ctrl" == t || "Alt" == t || "Shift" == t || "Mod" == t
            },
            ss = e.keyName = function(e, t) {
                if (yr && 34 == e.keyCode && e["char"]) return !1;
                var o = qs[e.keyCode],
                    n = o;
                return null == n || e.altGraphKey ? !1 : (e.altKey && "Alt" != o && (n = "Alt-" + n), (Ar ? e.metaKey : e.ctrlKey) && "Ctrl" != o && (n = "Ctrl-" + n), (Ar ? e.ctrlKey : e.metaKey) && "Cmd" != o && (n = "Cmd-" + n), !t && e.shiftKey && "Shift" != o && (n = "Shift-" + n), n)
            };
        e.fromTextArea = function(t, o) {
            function n() {
                t.value = c.getValue()
            }
            if (o = o ? Li(o) : {}, o.value = t.value, !o.tabindex && t.tabIndex && (o.tabindex = t.tabIndex), !o.placeholder && t.placeholder && (o.placeholder = t.placeholder), null == o.autofocus) {
                var i = Vi();
                o.autofocus = i == t || null != t.getAttribute("autofocus") && i == document.body
            }
            if (t.form && (Es(t.form, "submit", n), !o.leaveSubmitMethodAlone)) {
                var r = t.form,
                    s = r.submit;
                try {
                    var a = r.submit = function() {
                        n(), r.submit = s, r.submit(), r.submit = a
                    }
                } catch (l) {}
            }
            o.finishInit = function(e) {
                e.save = n, e.getTextArea = function() {
                    return t
                }, e.toTextArea = function() {
                    e.toTextArea = isNaN, n(), t.parentNode.removeChild(e.getWrapperElement()), t.style.display = "", t.form && (Ss(t.form, "submit", n), "function" == typeof t.form.submit && (t.form.submit = s))
                }
            }, t.style.display = "none";
            var c = e(function(e) {
                t.parentNode.insertBefore(e, t.nextSibling)
            }, o);
            return c
        };
        var as = e.StringStream = function(e, t) {
            this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, this.lineStart = 0
        };
        as.prototype = {
            eol: function() {
                return this.pos >= this.string.length
            },
            sol: function() {
                return this.pos == this.lineStart
            },
            peek: function() {
                return this.string.charAt(this.pos) || void 0
            },
            next: function() {
                return this.pos < this.string.length ? this.string.charAt(this.pos++) : void 0
            },
            eat: function(e) {
                var t = this.string.charAt(this.pos);
                if ("string" == typeof e) var o = t == e;
                else var o = t && (e.test ? e.test(t) : e(t));
                return o ? (++this.pos, t) : void 0
            },
            eatWhile: function(e) {
                for (var t = this.pos; this.eat(e););
                return this.pos > t
            },
            eatSpace: function() {
                for (var e = this.pos;
                    /[\s\u00a0]/.test(this.string.charAt(this.pos));) ++this.pos;
                return this.pos > e
            },
            skipToEnd: function() {
                this.pos = this.string.length
            },
            skipTo: function(e) {
                var t = this.string.indexOf(e, this.pos);
                return t > -1 ? (this.pos = t, !0) : void 0
            },
            backUp: function(e) {
                this.pos -= e
            },
            column: function() {
                return this.lastColumnPos < this.start && (this.lastColumnValue = Ns(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? Ns(this.string, this.lineStart, this.tabSize) : 0)
            },
            indentation: function() {
                return Ns(this.string, null, this.tabSize) - (this.lineStart ? Ns(this.string, this.lineStart, this.tabSize) : 0)
            },
            match: function(e, t, o) {
                if ("string" != typeof e) {
                    var n = this.string.slice(this.pos).match(e);
                    return n && n.index > 0 ? null : (n && t !== !1 && (this.pos += n[0].length), n)
                }
                var i = function(e) {
                        return o ? e.toLowerCase() : e
                    },
                    r = this.string.substr(this.pos, e.length);
                return i(r) == i(e) ? (t !== !1 && (this.pos += e.length), !0) : void 0
            },
            current: function() {
                return this.string.slice(this.start, this.pos)
            },
            hideFirstChars: function(e, t) {
                this.lineStart += e;
                try {
                    return t()
                } finally {
                    this.lineStart -= e
                }
            }
        };
        var ls = 0,
            cs = e.TextMarker = function(e, t) {
                this.lines = [], this.type = t, this.doc = e, this.id = ++ls
            };
        Ti(cs), cs.prototype.clear = function() {
            if (!this.explicitlyCleared) {
                var e = this.doc.cm,
                    t = e && !e.curOp;
                if (t && yt(e), Si(this, "clear")) {
                    var o = this.find();
                    o && _i(this, "clear", o.from, o.to)
                }
                for (var n = null, i = null, r = 0; r < this.lines.length; ++r) {
                    var s = this.lines[r],
                        a = qo(s.markedSpans, this);
                    e && !this.collapsed ? Lt(e, Qn(s), "text") : e && (null != a.to && (i = Qn(s)), null != a.from && (n = Qn(s))), s.markedSpans = $o(s.markedSpans, a), null == a.from && this.collapsed && !vn(this.doc, s) && e && $n(s, ft(e.display))
                }
                if (e && this.collapsed && !e.options.lineWrapping)
                    for (var r = 0; r < this.lines.length; ++r) {
                        var l = dn(this.lines[r]),
                            c = g(l);
                        c > e.display.maxLineLength && (e.display.maxLine = l, e.display.maxLineLength = c, e.display.maxLineChanged = !0)
                    }
                null != n && e && this.collapsed && Rt(e, n, i + 1), this.lines.length = 0, this.explicitlyCleared = !0, this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, e && xe(e.doc)), e && _i(e, "markerCleared", e, this), t && _t(e), this.parent && this.parent.clear()
            }
        }, cs.prototype.find = function(e, t) {
            null == e && "bookmark" == this.type && (e = 1);
            for (var o, n, i = 0; i < this.lines.length; ++i) {
                var r = this.lines[i],
                    s = qo(r.markedSpans, this);
                if (null != s.from && (o = Ir(t ? r : Qn(r), s.from), -1 == e)) return o;
                if (null != s.to && (n = Ir(t ? r : Qn(r), s.to), 1 == e)) return n
            }
            return o && {
                from: o,
                to: n
            }
        }, cs.prototype.changed = function() {
            var e = this.find(-1, !0),
                t = this,
                o = this.doc.cm;
            e && o && At(o, function() {
                var n = e.line,
                    i = Qn(e.line),
                    r = $e(o, i);
                if (r && (ot(r), o.curOp.selectionChanged = o.curOp.forceUpdate = !0), o.curOp.updateMaxLine = !0, !vn(t.doc, n) && null != t.height) {
                    var s = t.height;
                    t.height = null;
                    var a = Cn(t) - s;
                    a && $n(n, n.height + a)
                }
            })
        }, cs.prototype.attachLine = function(e) {
            if (!this.lines.length && this.doc.cm) {
                var t = this.doc.cm.curOp;
                t.maybeHiddenMarkers && -1 != wi(t.maybeHiddenMarkers, this) || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this)
            }
            this.lines.push(e)
        }, cs.prototype.detachLine = function(e) {
            if (this.lines.splice(wi(this.lines, e), 1), !this.lines.length && this.doc.cm) {
                var t = this.doc.cm.curOp;
                (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this)
            }
        };
        var ls = 0,
            us = e.SharedTextMarker = function(e, t) {
                this.markers = e, this.primary = t;
                for (var o = 0; o < e.length; ++o) e[o].parent = this
            };
        Ti(us), us.prototype.clear = function() {
            if (!this.explicitlyCleared) {
                this.explicitlyCleared = !0;
                for (var e = 0; e < this.markers.length; ++e) this.markers[e].clear();
                _i(this, "clear")
            }
        }, us.prototype.find = function(e, t) {
            return this.primary.find(e, t)
        };
        var gs = e.LineWidget = function(e, t, o) {
            if (o)
                for (var n in o) o.hasOwnProperty(n) && (this[n] = o[n]);
            this.doc = e, this.node = t
        };
        Ti(gs), gs.prototype.clear = function() {
            var e = this.doc.cm,
                t = this.line.widgets,
                o = this.line,
                n = Qn(o);
            if (null != n && t) {
                for (var i = 0; i < t.length; ++i) t[i] == this && t.splice(i--, 1);
                t.length || (o.widgets = null);
                var r = Cn(this);
                $n(o, Math.max(0, o.height - r)), e && At(e, function() {
                    bn(e, o, -r), Lt(e, n, "widget")
                })
            }
        }, gs.prototype.changed = function() {
            var e = this.height,
                t = this.doc.cm,
                o = this.line;
            this.height = null;
            var n = Cn(this) - e;
            n && ($n(o, o.height + n), t && At(t, function() {
                t.curOp.forceUpdate = !0, bn(t, o, n)
            }))
        };
        var ps = e.Line = function(e, t, o) {
            this.text = e, sn(this, t), this.height = o ? o(this) : 1
        };
        Ti(ps), ps.prototype.lineNo = function() {
            return Qn(this)
        };
        var hs = {},
            ds = {};
        Gn.prototype = {
            chunkSize: function() {
                return this.lines.length
            },
            removeInner: function(e, t) {
                for (var o = e, n = e + t; n > o; ++o) {
                    var i = this.lines[o];
                    this.height -= i.height, Tn(i), _i(i, "delete")
                }
                this.lines.splice(e, t)
            },
            collapse: function(e) {
                e.push.apply(e, this.lines)
            },
            insertInner: function(e, t, o) {
                this.height += o, this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e));
                for (var n = 0; n < t.length; ++n) t[n].parent = this
            },
            iterN: function(e, t, o) {
                for (var n = e + t; n > e; ++e)
                    if (o(this.lines[e])) return !0
            }
        }, Kn.prototype = {
            chunkSize: function() {
                return this.size
            },
            removeInner: function(e, t) {
                this.size -= t;
                for (var o = 0; o < this.children.length; ++o) {
                    var n = this.children[o],
                        i = n.chunkSize();
                    if (i > e) {
                        var r = Math.min(t, i - e),
                            s = n.height;
                        if (n.removeInner(e, r), this.height -= s - n.height, i == r && (this.children.splice(o--, 1), n.parent = null), 0 == (t -= r)) break;
                        e = 0
                    } else e -= i
                }
                if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0] instanceof Gn))) {
                    var a = [];
                    this.collapse(a), this.children = [new Gn(a)], this.children[0].parent = this
                }
            },
            collapse: function(e) {
                for (var t = 0; t < this.children.length; ++t) this.children[t].collapse(e)
            },
            insertInner: function(e, t, o) {
                this.size += t.length, this.height += o;
                for (var n = 0; n < this.children.length; ++n) {
                    var i = this.children[n],
                        r = i.chunkSize();
                    if (r >= e) {
                        if (i.insertInner(e, t, o), i.lines && i.lines.length > 50) {
                            for (; i.lines.length > 50;) {
                                var s = i.lines.splice(i.lines.length - 25, 25),
                                    a = new Gn(s);
                                i.height -= a.height, this.children.splice(n + 1, 0, a), a.parent = this
                            }
                            this.maybeSpill()
                        }
                        break
                    }
                    e -= r
                }
            },
            maybeSpill: function() {
                if (!(this.children.length <= 10)) {
                    var e = this;
                    do {
                        var t = e.children.splice(e.children.length - 5, 5),
                            o = new Kn(t);
                        if (e.parent) {
                            e.size -= o.size, e.height -= o.height;
                            var n = wi(e.parent.children, e);
                            e.parent.children.splice(n + 1, 0, o)
                        } else {
                            var i = new Kn(e.children);
                            i.parent = e, e.children = [i, o], e = i
                        }
                        o.parent = e.parent
                    } while (e.children.length > 10);
                    e.parent.maybeSpill()
                }
            },
            iterN: function(e, t, o) {
                for (var n = 0; n < this.children.length; ++n) {
                    var i = this.children[n],
                        r = i.chunkSize();
                    if (r > e) {
                        var s = Math.min(t, r - e);
                        if (i.iterN(e, s, o)) return !0;
                        if (0 == (t -= s)) break;
                        e = 0
                    } else e -= r
                }
            }
        };
        var fs = 0,
            ms = e.Doc = function(e, t, o) {
                if (!(this instanceof ms)) return new ms(e, t, o);
                null == o && (o = 0), Kn.call(this, [new Gn([new ps("", null)])]), this.first = o, this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, this.cleanGeneration = 1, this.frontier = o;
                var n = Ir(o, 0);
                this.sel = pe(n), this.history = new ti(null), this.id = ++fs, this.modeOption = t, "string" == typeof e && (e = js(e)), Wn(this, {
                    from: n,
                    to: n,
                    text: e
                }), ke(this, pe(n), xs)
            };
        ms.prototype = Ri(Kn.prototype, {
            constructor: ms,
            iter: function(e, t, o) {
                o ? this.iterN(e - this.first, t - e, o) : this.iterN(this.first, this.first + this.size, e)
            },
            insert: function(e, t) {
                for (var o = 0, n = 0; n < t.length; ++n) o += t[n].height;
                this.insertInner(e - this.first, t, o)
            },
            remove: function(e, t) {
                this.removeInner(e - this.first, t)
            },
            getValue: function(e) {
                var t = qn(this, this.first, this.first + this.size);
                return e === !1 ? t : t.join(e || "\n")
            },
            setValue: wt(function(e) {
                var t = Ir(this.first, 0),
                    o = this.first + this.size - 1;
                Co(this, {
                    from: t,
                    to: Ir(o, Xn(this, o).text.length),
                    text: js(e),
                    origin: "setValue",
                    full: !0
                }, !0), ke(this, pe(t))
            }),
            replaceRange: function(e, t, o, n) {
                t = de(this, t), o = o ? de(this, o) : t, Bo(this, e, t, o, n)
            },
            getRange: function(e, t, o) {
                var n = zn(this, de(this, e), de(this, t));
                return o === !1 ? n : n.join(o || "\n")
            },
            getLine: function(e) {
                var t = this.getLineHandle(e);
                return t && t.text
            },
            getLineHandle: function(e) {
                return me(this, e) ? Xn(this, e) : void 0
            },
            getLineNumber: function(e) {
                return Qn(e)
            },
            getLineHandleVisualStart: function(e) {
                return "number" == typeof e && (e = Xn(this, e)), dn(e)
            },
            lineCount: function() {
                return this.size
            },
            firstLine: function() {
                return this.first
            },
            lastLine: function() {
                return this.first + this.size - 1
            },
            clipPos: function(e) {
                return de(this, e)
            },
            getCursor: function(e) {
                var t, o = this.sel.primary();
                return t = null == e || "head" == e ? o.head : "anchor" == e ? o.anchor : "end" == e || "to" == e || e === !1 ? o.to() : o.from()
            },
            listSelections: function() {
                return this.sel.ranges
            },
            somethingSelected: function() {
                return this.sel.somethingSelected()
            },
            setCursor: wt(function(e, t, o) {
                Ee(this, de(this, "number" == typeof e ? Ir(e, t || 0) : e), null, o)
            }),
            setSelection: wt(function(e, t, o) {
                Ee(this, de(this, e), de(this, t || e), o)
            }),
            extendSelection: wt(function(e, t, o) {
                _e(this, de(this, e), t && de(this, t), o)
            }),
            extendSelections: wt(function(e, t) {
                be(this, ye(this, e, t))
            }),
            extendSelectionsBy: wt(function(e, t) {
                be(this, Ii(this.sel.ranges, e), t)
            }),
            setSelections: wt(function(e, t, o) {
                if (e.length) {
                    for (var n = 0, i = []; n < e.length; n++) i[n] = new ue(de(this, e[n].anchor), de(this, e[n].head));
                    null == t && (t = Math.min(e.length - 1, this.sel.primIndex)), ke(this, ge(i, t), o)
                }
            }),
            addSelection: wt(function(e, t, o) {
                var n = this.sel.ranges.slice(0);
                n.push(new ue(de(this, e), de(this, t || e))), ke(this, ge(n, n.length - 1), o)
            }),
            getSelection: function(e) {
                for (var t, o = this.sel.ranges, n = 0; n < o.length; n++) {
                    var i = zn(this, o[n].from(), o[n].to());
                    t = t ? t.concat(i) : i
                }
                return e === !1 ? t : t.join(e || "\n")
            },
            getSelections: function(e) {
                for (var t = [], o = this.sel.ranges, n = 0; n < o.length; n++) {
                    var i = zn(this, o[n].from(), o[n].to());
                    e !== !1 && (i = i.join(e || "\n")), t[n] = i
                }
                return t
            },
            replaceSelection: function(e, t, o) {
                for (var n = [], i = 0; i < this.sel.ranges.length; i++) n[i] = e;
                this.replaceSelections(n, t, o || "+input")
            },
            replaceSelections: wt(function(e, t, o) {
                for (var n = [], i = this.sel, r = 0; r < i.ranges.length; r++) {
                    var s = i.ranges[r];
                    n[r] = {
                        from: s.from(),
                        to: s.to(),
                        text: js(e[r]),
                        origin: o
                    }
                }
                for (var a = t && "end" != t && _o(this, n, t), r = n.length - 1; r >= 0; r--) Co(this, n[r]);
                a ? Te(this, a) : this.cm && Lo(this.cm)
            }),
            undo: wt(function() {
                So(this, "undo")
            }),
            redo: wt(function() {
                So(this, "redo")
            }),
            undoSelection: wt(function() {
                So(this, "undo", !0)
            }),
            redoSelection: wt(function() {
                So(this, "redo", !0)
            }),
            setExtending: function(e) {
                this.extend = e
            },
            getExtending: function() {
                return this.extend
            },
            historySize: function() {
                for (var e = this.history, t = 0, o = 0, n = 0; n < e.done.length; n++) e.done[n].ranges || ++t;
                for (var n = 0; n < e.undone.length; n++) e.undone[n].ranges || ++o;
                return {
                    undo: t,
                    redo: o
                }
            },
            clearHistory: function() {
                this.history = new ti(this.history.maxGeneration)
            },
            markClean: function() {
                this.cleanGeneration = this.changeGeneration(!0)
            },
            changeGeneration: function(e) {
                return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), this.history.generation
            },
            isClean: function(e) {
                return this.history.generation == (e || this.cleanGeneration)
            },
            getHistory: function() {
                return {
                    done: pi(this.history.done),
                    undone: pi(this.history.undone)
                }
            },
            setHistory: function(e) {
                var t = this.history = new ti(this.history.maxGeneration);
                t.done = pi(e.done.slice(0), null, !0), t.undone = pi(e.undone.slice(0), null, !0)
            },
            addLineClass: wt(function(e, t, o) {
                return Mo(this, e, "gutter" == t ? "gutter" : "class", function(e) {
                    var n = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass";
                    if (e[n]) {
                        if (Wi(o).test(e[n])) return !1;
                        e[n] += " " + o
                    } else e[n] = o;
                    return !0
                })
            }),
            removeLineClass: wt(function(e, t, o) {
                return Mo(this, e, "gutter" == t ? "gutter" : "class", function(e) {
                    var n = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass",
                        i = e[n];
                    if (!i) return !1;
                    if (null == o) e[n] = null;
                    else {
                        var r = i.match(Wi(o));
                        if (!r) return !1;
                        var s = r.index + r[0].length;
                        e[n] = i.slice(0, r.index) + (r.index && s != i.length ? " " : "") + i.slice(s) || null
                    }
                    return !0
                })
            }),
            addLineWidget: wt(function(e, t, o) {
                return En(this, e, t, o)
            }),
            removeLineWidget: function(e) {
                e.clear()
            },
            markText: function(e, t, o) {
                return Go(this, de(this, e), de(this, t), o, "range")
            },
            setBookmark: function(e, t) {
                var o = {
                    replacedWith: t && (null == t.nodeType ? t.widget : t),
                    insertLeft: t && t.insertLeft,
                    clearWhenEmpty: !1,
                    shared: t && t.shared,
                    handleMouseEvents: t && t.handleMouseEvents
                };
                return e = de(this, e), Go(this, e, e, o, "bookmark")
            },
            findMarksAt: function(e) {
                e = de(this, e);
                var t = [],
                    o = Xn(this, e.line).markedSpans;
                if (o)
                    for (var n = 0; n < o.length; ++n) {
                        var i = o[n];
                        (null == i.from || i.from <= e.ch) && (null == i.to || i.to >= e.ch) && t.push(i.marker.parent || i.marker)
                    }
                return t
            },
            findMarks: function(e, t, o) {
                e = de(this, e), t = de(this, t);
                var n = [],
                    i = e.line;
                return this.iter(e.line, t.line + 1, function(r) {
                    var s = r.markedSpans;
                    if (s)
                        for (var a = 0; a < s.length; a++) {
                            var l = s[a];
                            i == e.line && e.ch > l.to || null == l.from && i != e.line || i == t.line && l.from > t.ch || o && !o(l.marker) || n.push(l.marker.parent || l.marker)
                        }++i
                }), n
            },
            getAllMarks: function() {
                var e = [];
                return this.iter(function(t) {
                    var o = t.markedSpans;
                    if (o)
                        for (var n = 0; n < o.length; ++n) null != o[n].from && e.push(o[n].marker)
                }), e
            },
            posFromIndex: function(e) {
                var t, o = this.first;
                return this.iter(function(n) {
                    var i = n.text.length + 1;
                    return i > e ? (t = e, !0) : (e -= i, void++o)
                }), de(this, Ir(o, t))
            },
            indexFromPos: function(e) {
                e = de(this, e);
                var t = e.ch;
                return e.line < this.first || e.ch < 0 ? 0 : (this.iter(this.first, e.line, function(e) {
                    t += e.text.length + 1
                }), t)
            },
            copy: function(e) {
                var t = new ms(qn(this, this.first, this.first + this.size), this.modeOption, this.first);
                return t.scrollTop = this.scrollTop, t.scrollLeft = this.scrollLeft, t.sel = this.sel, t.extend = !1, e && (t.history.undoDepth = this.history.undoDepth, t.setHistory(this.getHistory())), t
            },
            linkedDoc: function(e) {
                e || (e = {});
                var t = this.first,
                    o = this.first + this.size;
                null != e.from && e.from > t && (t = e.from), null != e.to && e.to < o && (o = e.to);
                var n = new ms(qn(this, t, o), e.mode || this.modeOption, t);
                return e.sharedHist && (n.history = this.history), (this.linked || (this.linked = [])).push({
                    doc: n,
                    sharedHist: e.sharedHist
                }), n.linked = [{
                    doc: this,
                    isParent: !0,
                    sharedHist: e.sharedHist
                }], Yo(n, jo(this)), n
            },
            unlinkDoc: function(t) {
                if (t instanceof e && (t = t.doc), this.linked)
                    for (var o = 0; o < this.linked.length; ++o) {
                        var n = this.linked[o];
                        if (n.doc == t) {
                            this.linked.splice(o, 1), t.unlinkDoc(this), Xo(jo(this));
                            break
                        }
                    }
                if (t.history == this.history) {
                    var i = [t.id];
                    jn(t, function(e) {
                        i.push(e.id)
                    }, !0), t.history = new ti(null), t.history.done = pi(this.history.done, i), t.history.undone = pi(this.history.undone, i)
                }
            },
            iterLinkedDocs: function(e) {
                jn(this, e)
            },
            getMode: function() {
                return this.mode
            },
            getEditor: function() {
                return this.cm
            }
        }), ms.prototype.eachLine = ms.prototype.iter;
        var ys = "iter insert remove copy getEditor".split(" ");
        for (var vs in ms.prototype) ms.prototype.hasOwnProperty(vs) && wi(ys, vs) < 0 && (e.prototype[vs] = function(e) {
            return function() {
                return e.apply(this.doc, arguments)
            }
        }(ms.prototype[vs]));
        Ti(ms);
        var _s = e.e_preventDefault = function(e) {
                e.preventDefault ? e.preventDefault() : e.returnValue = !1
            },
            bs = e.e_stopPropagation = function(e) {
                e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0
            },
            Cs = e.e_stop = function(e) {
                _s(e), bs(e)
            },
            Es = e.on = function(e, t, o) {
                if (e.addEventListener) e.addEventListener(t, o, !1);
                else if (e.attachEvent) e.attachEvent("on" + t, o);
                else {
                    var n = e._handlers || (e._handlers = {}),
                        i = n[t] || (n[t] = []);
                    i.push(o)
                }
            },
            Ss = e.off = function(e, t, o) {
                if (e.removeEventListener) e.removeEventListener(t, o, !1);
                else if (e.detachEvent) e.detachEvent("on" + t, o);
                else {
                    var n = e._handlers && e._handlers[t];
                    if (!n) return;
                    for (var i = 0; i < n.length; ++i)
                        if (n[i] == o) {
                            n.splice(i, 1);
                            break
                        }
                }
            },
            Ts = e.signal = function(e, t) {
                var o = e._handlers && e._handlers[t];
                if (o)
                    for (var n = Array.prototype.slice.call(arguments, 2), i = 0; i < o.length; ++i) o[i].apply(null, n)
            },
            ks = null,
            As = 30,
            Bs = e.Pass = {
                toString: function() {
                    return "CodeMirror.Pass"
                }
            },
            xs = {
                scroll: !1
            },
            ws = {
                origin: "*mouse"
            },
            Is = {
                origin: "+move"
            };
        ki.prototype.set = function(e, t) {
            clearTimeout(this.id), this.id = setTimeout(t, e)
        };
        var Ns = e.countColumn = function(e, t, o, n, i) {
                null == t && (t = e.search(/[^\s\u00a0]/), -1 == t && (t = e.length));
                for (var r = n || 0, s = i || 0;;) {
                    var a = e.indexOf("	", r);
                    if (0 > a || a >= t) return s + (t - r);
                    s += a - r, s += o - s % o, r = a + 1
                }
            },
            Rs = [""],
            Ls = function(e) {
                e.select()
            };
        Cr ? Ls = function(e) {
            e.selectionStart = 0, e.selectionEnd = e.value.length
        } : pr && (Ls = function(e) {
            try {
                e.select()
            } catch (t) {}
        });
        var Os, Ds = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
            Ms = e.isWordChar = function(e) {
                return /\w/.test(e) || e > "\x80" && (e.toUpperCase() != e.toLowerCase() || Ds.test(e))
            },
            Ps = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
        Os = document.createRange ? function(e, t, o, n) {
            var i = document.createRange();
            return i.setEnd(n || e, o), i.setStart(e, t), i
        } : function(e, t, o) {
            var n = document.body.createTextRange();
            try {
                n.moveToElementText(e.parentNode)
            } catch (i) {
                return n
            }
            return n.collapse(!0), n.moveEnd("character", o), n.moveStart("character", t), n
        };
        var Fs = e.contains = function(e, t) {
            if (3 == t.nodeType && (t = t.parentNode), e.contains) return e.contains(t);
            do
                if (11 == t.nodeType && (t = t.host), t == e) return !0;
            while (t = t.parentNode)
        };
        pr && 11 > hr && (Vi = function() {
            try {
                return document.activeElement
            } catch (e) {
                return document.body
            }
        });
        var Hs, Us, Vs = e.rmClass = function(e, t) {
                var o = e.className,
                    n = Wi(t).exec(o);
                if (n) {
                    var i = o.slice(n.index + n[0].length);
                    e.className = o.slice(0, n.index) + (i ? n[1] + i : "")
                }
            },
            Ws = e.addClass = function(e, t) {
                var o = e.className;
                Wi(t).test(o) || (e.className += (o ? " " : "") + t)
            },
            Gs = !1,
            Ks = function() {
                if (pr && 9 > hr) return !1;
                var e = Fi("div");
                return "draggable" in e || "dragDrop" in e
            }(),
            js = e.splitLines = 3 != "\n\nb".split(/\n/).length ? function(e) {
                for (var t = 0, o = [], n = e.length; n >= t;) {
                    var i = e.indexOf("\n", t); - 1 == i && (i = e.length);
                    var r = e.slice(t, "\r" == e.charAt(i - 1) ? i - 1 : i),
                        s = r.indexOf("\r"); - 1 != s ? (o.push(r.slice(0, s)), t += s + 1) : (o.push(r), t = i + 1)
                }
                return o
            } : function(e) {
                return e.split(/\r\n?|\n/)
            },
            Ys = window.getSelection ? function(e) {
                try {
                    return e.selectionStart != e.selectionEnd
                } catch (t) {
                    return !1
                }
            } : function(e) {
                try {
                    var t = e.ownerDocument.selection.createRange()
                } catch (o) {}
                return t && t.parentElement() == e ? 0 != t.compareEndPoints("StartToEnd", t) : !1
            },
            Xs = function() {
                var e = Fi("div");
                return "oncopy" in e ? !0 : (e.setAttribute("oncopy", "return;"), "function" == typeof e.oncopy)
            }(),
            zs = null,
            qs = {
                3: "Enter",
                8: "Backspace",
                9: "Tab",
                13: "Enter",
                16: "Shift",
                17: "Ctrl",
                18: "Alt",
                19: "Pause",
                20: "CapsLock",
                27: "Esc",
                32: "Space",
                33: "PageUp",
                34: "PageDown",
                35: "End",
                36: "Home",
                37: "Left",
                38: "Up",
                39: "Right",
                40: "Down",
                44: "PrintScrn",
                45: "Insert",
                46: "Delete",
                59: ";",
                61: "=",
                91: "Mod",
                92: "Mod",
                93: "Mod",
                107: "=",
                109: "-",
                127: "Delete",
                173: "-",
                186: ";",
                187: "=",
                188: ",",
                189: "-",
                190: ".",
                191: "/",
                192: "`",
                219: "[",
                220: "\\",
                221: "]",
                222: "'",
                63232: "Up",
                63233: "Down",
                63234: "Left",
                63235: "Right",
                63272: "Delete",
                63273: "Home",
                63275: "End",
                63276: "PageUp",
                63277: "PageDown",
                63302: "Insert"
            };
        e.keyNames = qs,
            function() {
                for (var e = 0; 10 > e; e++) qs[e + 48] = qs[e + 96] = String(e);
                for (var e = 65; 90 >= e; e++) qs[e] = String.fromCharCode(e);
                for (var e = 1; 12 >= e; e++) qs[e + 111] = qs[e + 63235] = "F" + e
            }();
        var $s, Qs = function() {
            function e(e) {
                return 247 >= e ? o.charAt(e) : e >= 1424 && 1524 >= e ? "R" : e >= 1536 && 1773 >= e ? n.charAt(e - 1536) : e >= 1774 && 2220 >= e ? "r" : e >= 8192 && 8203 >= e ? "w" : 8204 == e ? "b" : "L"
            }

            function t(e, t, o) {
                this.level = e, this.from = t, this.to = o
            }
            var o = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",
                n = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",
                i = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,
                r = /[stwN]/,
                s = /[LRr]/,
                a = /[Lb1n]/,
                l = /[1n]/,
                c = "L";
            return function(o) {
                if (!i.test(o)) return !1;
                for (var n, u = o.length, g = [], p = 0; u > p; ++p) g.push(n = e(o.charCodeAt(p)));
                for (var p = 0, h = c; u > p; ++p) {
                    var n = g[p];
                    "m" == n ? g[p] = h : h = n
                }
                for (var p = 0, d = c; u > p; ++p) {
                    var n = g[p];
                    "1" == n && "r" == d ? g[p] = "n" : s.test(n) && (d = n, "r" == n && (g[p] = "R"))
                }
                for (var p = 1, h = g[0]; u - 1 > p; ++p) {
                    var n = g[p];
                    "+" == n && "1" == h && "1" == g[p + 1] ? g[p] = "1" : "," != n || h != g[p + 1] || "1" != h && "n" != h || (g[p] = h), h = n
                }
                for (var p = 0; u > p; ++p) {
                    var n = g[p];
                    if ("," == n) g[p] = "N";
                    else if ("%" == n) {
                        for (var f = p + 1; u > f && "%" == g[f]; ++f);
                        for (var m = p && "!" == g[p - 1] || u > f && "1" == g[f] ? "1" : "N", y = p; f > y; ++y) g[y] = m;
                        p = f - 1
                    }
                }
                for (var p = 0, d = c; u > p; ++p) {
                    var n = g[p];
                    "L" == d && "1" == n ? g[p] = "L" : s.test(n) && (d = n)
                }
                for (var p = 0; u > p; ++p)
                    if (r.test(g[p])) {
                        for (var f = p + 1; u > f && r.test(g[f]); ++f);
                        for (var v = "L" == (p ? g[p - 1] : c), _ = "L" == (u > f ? g[f] : c), m = v || _ ? "L" : "R", y = p; f > y; ++y) g[y] = m;
                        p = f - 1
                    }
                for (var b, C = [], p = 0; u > p;)
                    if (a.test(g[p])) {
                        var E = p;
                        for (++p; u > p && a.test(g[p]); ++p);
                        C.push(new t(0, E, p))
                    } else {
                        var S = p,
                            T = C.length;
                        for (++p; u > p && "L" != g[p]; ++p);
                        for (var y = S; p > y;)
                            if (l.test(g[y])) {
                                y > S && C.splice(T, 0, new t(1, S, y));
                                var k = y;
                                for (++y; p > y && l.test(g[y]); ++y);
                                C.splice(T, 0, new t(2, k, y)), S = y
                            } else ++y;
                        p > S && C.splice(T, 0, new t(1, S, p))
                    }
                return 1 == C[0].level && (b = o.match(/^\s+/)) && (C[0].from = b[0].length, C.unshift(new t(0, 0, b[0].length))), 1 == xi(C).level && (b = o.match(/\s+$/)) && (xi(C).to -= b[0].length, C.push(new t(0, u - b[0].length, u))), 2 == C[0].level && C.unshift(new t(1, C[0].to, C[0].to)), C[0].level != xi(C).level && C.push(new t(C[0].level, u, u)), C
            }
        }();
        return e.version = "5.2.1", e
    }),
    function(e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define("../lib/codemirror/mode/xml/xml", ["../../lib/codemirror"], e) : e(CodeMirror)
    }(function(e) {
        e.defineMode("xml", function(t, o) {
                function n(e, t) {
                    function o(o) {
                        return t.tokenize = o, o(e, t)
                    }
                    var n = e.next();
                    if ("<" == n) return e.eat("!") ? e.eat("[") ? e.match("CDATA[") ? o(s("atom", "]]>")) : null : e.match("--") ? o(s("comment", "-->")) : e.match("DOCTYPE", !0, !0) ? (e.eatWhile(/[\w\._\-]/), o(a(1))) : null : e.eat("?") ? (e.eatWhile(/[\w\._\-]/), t.tokenize = s("meta", "?>"), "meta") : (S = e.eat("/") ? "closeTag" : "openTag", t.tokenize = i, "tag bracket");
                    if ("&" == n) {
                        var r;
                        return r = e.eat("#") ? e.eat("x") ? e.eatWhile(/[a-fA-F\d]/) && e.eat(";") : e.eatWhile(/[\d]/) && e.eat(";") : e.eatWhile(/[\w\.\-:]/) && e.eat(";"), r ? "atom" : "error"
                    }
                    return e.eatWhile(/[^&<]/), null
                }

                function i(e, t) {
                    var o = e.next();
                    if (">" == o || "/" == o && e.eat(">")) return t.tokenize = n, S = ">" == o ? "endTag" : "selfcloseTag", "tag bracket";
                    if ("=" == o) return S = "equals", null;
                    if ("<" == o) {
                        t.tokenize = n, t.state = g, t.tagName = t.tagStart = null;
                        var i = t.tokenize(e, t);
                        return i ? i + " tag error" : "tag error"
                    }
                    return /[\'\"]/.test(o) ? (t.tokenize = r(o), t.stringStartCol = e.column(), t.tokenize(e, t)) : (e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/), "word")
                }

                function r(e) {
                    var t = function(t, o) {
                        for (; !t.eol();)
                            if (t.next() == e) {
                                o.tokenize = i;
                                break
                            }
                        return "string"
                    };
                    return t.isInAttribute = !0, t
                }

                function s(e, t) {
                    return function(o, i) {
                        for (; !o.eol();) {
                            if (o.match(t)) {
                                i.tokenize = n;
                                break
                            }
                            o.next()
                        }
                        return e
                    }
                }

                function a(e) {
                    return function(t, o) {
                        for (var i; null != (i = t.next());) {
                            if ("<" == i) return o.tokenize = a(e + 1), o.tokenize(t, o);
                            if (">" == i) {
                                if (1 == e) {
                                    o.tokenize = n;
                                    break
                                }
                                return o.tokenize = a(e - 1), o.tokenize(t, o)
                            }
                        }
                        return "meta"
                    }
                }

                function l(e, t, o) {
                    this.prev = e.context, this.tagName = t, this.indent = e.indented, this.startOfLine = o, (k.doNotIndent.hasOwnProperty(t) || e.context && e.context.noIndent) && (this.noIndent = !0)
                }

                function c(e) {
                    e.context && (e.context = e.context.prev)
                }

                function u(e, t) {
                    for (var o;;) {
                        if (!e.context) return;
                        if (o = e.context.tagName, !k.contextGrabbers.hasOwnProperty(o) || !k.contextGrabbers[o].hasOwnProperty(t)) return;
                        c(e)
                    }
                }

                function g(e, t, o) {
                    return "openTag" == e ? (o.tagStart = t.column(), p) : "closeTag" == e ? h : g
                }

                function p(e, t, o) {
                    return "word" == e ? (o.tagName = t.current(), T = "tag", m) : (T = "error", p)
                }

                function h(e, t, o) {
                    if ("word" == e) {
                        var n = t.current();
                        return o.context && o.context.tagName != n && k.implicitlyClosed.hasOwnProperty(o.context.tagName) && c(o), o.context && o.context.tagName == n ? (T = "tag", d) : (T = "tag error", f)
                    }
                    return T = "error", f
                }

                function d(e, t, o) {
                    return "endTag" != e ? (T = "error", d) : (c(o), g)
                }

                function f(e, t, o) {
                    return T = "error", d(e, t, o)
                }

                function m(e, t, o) {
                    if ("word" == e) return T = "attribute", y;
                    if ("endTag" == e || "selfcloseTag" == e) {
                        var n = o.tagName,
                            i = o.tagStart;
                        return o.tagName = o.tagStart = null, "selfcloseTag" == e || k.autoSelfClosers.hasOwnProperty(n) ? u(o, n) : (u(o, n), o.context = new l(o, n, i == o.indented)), g
                    }
                    return T = "error", m
                }

                function y(e, t, o) {
                    return "equals" == e ? v : (k.allowMissing || (T = "error"), m(e, t, o))
                }

                function v(e, t, o) {
                    return "string" == e ? _ : "word" == e && k.allowUnquoted ? (T = "string", m) : (T = "error", m(e, t, o))
                }

                function _(e, t, o) {
                    return "string" == e ? _ : m(e, t, o)
                }
                var b = t.indentUnit,
                    C = o.multilineTagIndentFactor || 1,
                    E = o.multilineTagIndentPastTag;
                null == E && (E = !0);
                var S, T, k = o.htmlMode ? {
                        autoSelfClosers: {
                            area: !0,
                            base: !0,
                            br: !0,
                            col: !0,
                            command: !0,
                            embed: !0,
                            frame: !0,
                            hr: !0,
                            img: !0,
                            input: !0,
                            keygen: !0,
                            link: !0,
                            meta: !0,
                            param: !0,
                            source: !0,
                            track: !0,
                            wbr: !0,
                            menuitem: !0
                        },
                        implicitlyClosed: {
                            dd: !0,
                            li: !0,
                            optgroup: !0,
                            option: !0,
                            p: !0,
                            rp: !0,
                            rt: !0,
                            tbody: !0,
                            td: !0,
                            tfoot: !0,
                            th: !0,
                            tr: !0
                        },
                        contextGrabbers: {
                            dd: {
                                dd: !0,
                                dt: !0
                            },
                            dt: {
                                dd: !0,
                                dt: !0
                            },
                            li: {
                                li: !0
                            },
                            option: {
                                option: !0,
                                optgroup: !0
                            },
                            optgroup: {
                                optgroup: !0
                            },
                            p: {
                                address: !0,
                                article: !0,
                                aside: !0,
                                blockquote: !0,
                                dir: !0,
                                div: !0,
                                dl: !0,
                                fieldset: !0,
                                footer: !0,
                                form: !0,
                                h1: !0,
                                h2: !0,
                                h3: !0,
                                h4: !0,
                                h5: !0,
                                h6: !0,
                                header: !0,
                                hgroup: !0,
                                hr: !0,
                                menu: !0,
                                nav: !0,
                                ol: !0,
                                p: !0,
                                pre: !0,
                                section: !0,
                                table: !0,
                                ul: !0
                            },
                            rp: {
                                rp: !0,
                                rt: !0
                            },
                            rt: {
                                rp: !0,
                                rt: !0
                            },
                            tbody: {
                                tbody: !0,
                                tfoot: !0
                            },
                            td: {
                                td: !0,
                                th: !0
                            },
                            tfoot: {
                                tbody: !0
                            },
                            th: {
                                td: !0,
                                th: !0
                            },
                            thead: {
                                tbody: !0,
                                tfoot: !0
                            },
                            tr: {
                                tr: !0
                            }
                        },
                        doNotIndent: {
                            pre: !0
                        },
                        allowUnquoted: !0,
                        allowMissing: !0,
                        caseFold: !0
                    } : {
                        autoSelfClosers: {},
                        implicitlyClosed: {},
                        contextGrabbers: {},
                        doNotIndent: {},
                        allowUnquoted: !1,
                        allowMissing: !1,
                        caseFold: !1
                    },
                    A = o.alignCDATA;
                return {
                    startState: function() {
                        return {
                            tokenize: n,
                            state: g,
                            indented: 0,
                            tagName: null,
                            tagStart: null,
                            context: null
                        }
                    },
                    token: function(e, t) {
                        if (!t.tagName && e.sol() && (t.indented = e.indentation()), e.eatSpace()) return null;
                        S = null;
                        var o = t.tokenize(e, t);
                        return (o || S) && "comment" != o && (T = null, t.state = t.state(S || o, e, t), T && (o = "error" == T ? o + " error" : T)), o
                    },
                    indent: function(t, o, r) {
                        var s = t.context;
                        if (t.tokenize.isInAttribute) return t.tagStart == t.indented ? t.stringStartCol + 1 : t.indented + b;
                        if (s && s.noIndent) return e.Pass;
                        if (t.tokenize != i && t.tokenize != n) return r ? r.match(/^(\s*)/)[0].length : 0;
                        if (t.tagName) return E ? t.tagStart + t.tagName.length + 2 : t.tagStart + b * C;
                        if (A && /<!\[CDATA\[/.test(o)) return 0;
                        var a = o && /^<(\/)?([\w_:\.-]*)/.exec(o);
                        if (a && a[1])
                            for (; s;) {
                                if (s.tagName == a[2]) {
                                    s = s.prev;
                                    break
                                }
                                if (!k.implicitlyClosed.hasOwnProperty(s.tagName)) break;
                                s = s.prev
                            } else if (a)
                                for (; s;) {
                                    var l = k.contextGrabbers[s.tagName];
                                    if (!l || !l.hasOwnProperty(a[2])) break;
                                    s = s.prev
                                }
                            for (; s && !s.startOfLine;) s = s.prev;
                        return s ? s.indent + b : 0
                    },
                    electricInput: /<\/[\s\w:]+>$/,
                    blockCommentStart: "<!--",
                    blockCommentEnd: "-->",
                    configuration: o.htmlMode ? "html" : "xml",
                    helperType: o.htmlMode ? "html" : "xml"
                }
            }), e.defineMIME("text/xml", "xml"), e.defineMIME("application/xml", "xml"),
            e.mimeModes.hasOwnProperty("text/html") || e.defineMIME("text/html", {
                name: "xml",
                htmlMode: !0
            })
    }),
    function(e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define("../lib/codemirror/addon/mode/simple", ["../../lib/codemirror"], e) : e(CodeMirror)
    }(function(e) {
        function t(e, t) {
            if (!e.hasOwnProperty(t)) throw new Error("Undefined state " + t + "in simple mode")
        }

        function o(e, t) {
            if (!e) return /(?:)/;
            var o = "";
            return e instanceof RegExp ? (e.ignoreCase && (o = "i"), e = e.source) : e = String(e), new RegExp((t === !1 ? "" : "^") + "(?:" + e + ")", o)
        }

        function n(e) {
            if (!e) return null;
            if ("string" == typeof e) return e.replace(/\./g, " ");
            for (var t = [], o = 0; o < e.length; o++) t.push(e[o] && e[o].replace(/\./g, " "));
            return t
        }

        function i(e, i) {
            (e.next || e.push) && t(i, e.next || e.push), this.regex = o(e.regex), this.token = n(e.token), this.data = e
        }

        function r(e, t) {
            return function(o, n) {
                if (n.pending) {
                    var i = n.pending.shift();
                    return 0 == n.pending.length && (n.pending = null), o.pos += i.text.length, i.token
                }
                if (n.local) {
                    if (n.local.end && o.match(n.local.end)) {
                        var r = n.local.endToken || null;
                        return n.local = n.localState = null, r
                    }
                    var s, r = n.local.mode.token(o, n.localState);
                    return n.local.endScan && (s = n.local.endScan.exec(o.current())) && (o.pos = o.start + s.index), r
                }
                for (var l = e[n.state], c = 0; c < l.length; c++) {
                    var u = l[c],
                        g = (!u.data.sol || o.sol()) && o.match(u.regex);
                    if (g) {
                        if (u.data.next ? n.state = u.data.next : u.data.push ? ((n.stack || (n.stack = [])).push(n.state), n.state = u.data.push) : u.data.pop && n.stack && n.stack.length && (n.state = n.stack.pop()), u.data.mode && a(t, n, u.data.mode, u.token), u.data.indent && n.indent.push(o.indentation() + t.indentUnit), u.data.dedent && n.indent.pop(), g.length > 2) {
                            n.pending = [];
                            for (var p = 2; p < g.length; p++) g[p] && n.pending.push({
                                text: g[p],
                                token: u.token[p - 1]
                            });
                            return o.backUp(g[0].length - (g[1] ? g[1].length : 0)), u.token[0]
                        }
                        return u.token && u.token.join ? u.token[0] : u.token
                    }
                }
                return o.next(), null
            }
        }

        function s(e, t) {
            if (e === t) return !0;
            if (!e || "object" != typeof e || !t || "object" != typeof t) return !1;
            var o = 0;
            for (var n in e)
                if (e.hasOwnProperty(n)) {
                    if (!t.hasOwnProperty(n) || !s(e[n], t[n])) return !1;
                    o++
                }
            for (var n in t) t.hasOwnProperty(n) && o--;
            return 0 == o
        }

        function a(t, n, i, r) {
            var a;
            if (i.persistent)
                for (var l = n.persistentStates; l && !a; l = l.next)(i.spec ? s(i.spec, l.spec) : i.mode == l.mode) && (a = l);
            var c = a ? a.mode : i.mode || e.getMode(t, i.spec),
                u = a ? a.state : e.startState(c);
            i.persistent && !a && (n.persistentStates = {
                mode: c,
                spec: i.spec,
                state: u,
                next: n.persistentStates
            }), n.localState = u, n.local = {
                mode: c,
                end: i.end && o(i.end),
                endScan: i.end && i.forceEnd !== !1 && o(i.end, !1),
                endToken: r && r.join ? r[r.length - 1] : r
            }
        }

        function l(e, t) {
            for (var o = 0; o < t.length; o++)
                if (t[o] === e) return !0
        }

        function c(t, o) {
            return function(n, i, r) {
                if (n.local && n.local.mode.indent) return n.local.mode.indent(n.localState, i, r);
                if (null == n.indent || n.local || o.dontIndentStates && l(n.state, o.dontIndentStates) > -1) return e.Pass;
                var s = n.indent.length - 1,
                    a = t[n.state];
                e: for (;;) {
                    for (var c = 0; c < a.length; c++) {
                        var u = a[c];
                        if (u.data.dedent && u.data.dedentIfLineStart !== !1) {
                            var g = u.regex.exec(i);
                            if (g && g[0]) {
                                s--, (u.next || u.push) && (a = t[u.next || u.push]), i = i.slice(g[0].length);
                                continue e
                            }
                        }
                    }
                    break
                }
                return 0 > s ? 0 : n.indent[s]
            }
        }
        e.defineSimpleMode = function(t, o) {
            e.defineMode(t, function(t) {
                return e.simpleMode(t, o)
            })
        }, e.simpleMode = function(o, n) {
            t(n, "start");
            var s = {},
                a = n.meta || {},
                l = !1;
            for (var u in n)
                if (u != a && n.hasOwnProperty(u))
                    for (var g = s[u] = [], p = n[u], h = 0; h < p.length; h++) {
                        var d = p[h];
                        g.push(new i(d, n)), (d.indent || d.dedent) && (l = !0)
                    }
                var f = {
                    startState: function() {
                        return {
                            state: "start",
                            pending: null,
                            local: null,
                            localState: null,
                            indent: l ? [] : null
                        }
                    },
                    copyState: function(t) {
                        var o = {
                            state: t.state,
                            pending: t.pending,
                            local: t.local,
                            localState: null,
                            indent: t.indent && t.indent.slice(0)
                        };
                        t.localState && (o.localState = e.copyState(t.local.mode, t.localState)), t.stack && (o.stack = t.stack.slice(0));
                        for (var n = t.persistentStates; n; n = n.next) o.persistentStates = {
                            mode: n.mode,
                            spec: n.spec,
                            state: n.state == t.localState ? o.localState : e.copyState(n.mode, n.state),
                            next: o.persistentStates
                        };
                        return o
                    },
                    token: r(s, o),
                    innerMode: function(e) {
                        return e.local && {
                            mode: e.local.mode,
                            state: e.localState
                        }
                    },
                    indent: c(s, a)
                };
            if (a)
                for (var m in a) a.hasOwnProperty(m) && (f[m] = a[m]);
            return f
        }
    }),
    function(e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define("../lib/codemirror/mode/picaxe/picaxe", ["../../lib/codemirror"], e) : e(CodeMirror)
    }(function(e) {
        e.defineMode("picaxe", function(e, t) {
            function o(e) {
                return new RegExp("^((" + e.join(")|(") + "))\\b", "i")
            }

            function n(e, t) {
                t.currentIndent++
            }

            function i(e, t) {
                t.currentIndent--
            }

            function r(e, t) {
                if (e.eatSpace()) return null;
                var o = s(e, t);
                return t.startOfLine = !1, "string" == typeof o && ("systemlabel" == o ? o = "link" : "genericlabel" == o ? o = "error" : "nameddirective" == o ? o = "property" : "genericdirective" == o ? o = "property" : "namedvariable" == o ? o = "variable" : "namedatvariable" == o ? o = "variable" : "genericvariable" == o ? o = "variable-2" : "genericatvariable" == o ? o = "variable-2" : "namedconstant" == o ? o = "number" : "mamedoperator" == o && (o = "operator")), o
            }

            function s(e, t) {
                if (t.inMultiLineComment) return t.startOfLine && e.match(/^(\#endrem)/i) ? (t.inMultiLineComment = !1, "comment") : (e.skipToEnd(), "comment");
                if (t.startOfLine && e.match(/^(\#rem)/i)) return e.skipToEnd(), t.inMultiLineComment = !0, "comment";
                if (t.startOfLine && e.match(R)) return e.skipToEnd(), "flowdirective";
                var o = e.peek();
                return ";" === o || "'" === o || "`" === o ? (e.skipToEnd(), "comment") : e.match(f) ? "string" : e.match(y) ? "number" : e.match(v) ? "number" : e.match(m) ? "number" : e.match(B) ? "systemlabel" : e.match(x) ? "genericlabel" : e.match(_) ? "keyword" : t.startOfLine && e.match(A) ? (e.skipTo('"') || e.skipTo(":") || e.skipToEnd(), "nameddirective") : t.startOfLine && e.match(N) ? (e.skipTo('"') || e.skipTo(":") || e.skipToEnd(), "genericdirective") : e.match(S) ? "namedvariable" : e.match(T) ? "namedatvariable" : e.match(k) ? "namedconstant" : e.match(b) ? "mamedoperator" : e.match(C) ? "operator" : e.match(E) ? "operator" : e.match(w) ? "genericvariable" : e.match(I) ? "genericatvariable" : (e.next(), "error")
            }

            function a(e, t) {
                var o = t.tokenize(e, t),
                    r = e.current();
                if ("." === r) return o = t.tokenize(e, t), r = e.current(), "variable" === o ? "variable" : "error";
                var s = "[({".indexOf(r);
                return -1 !== s && n(e, t), "dedent" === l && i(e, t) ? "error" : (s = "])}".indexOf(r), -1 !== s && i(e, t) ? "error" : o)
            }
            var l = null,
                c = ["if", "for", "select"],
                u = ["else", "elseif", "case"],
                g = ["endif", "next", "endselect"],
                p = (o(c), o(u)),
                h = o(g),
                d = o([]),
                f = new RegExp('["][^"\n\r]*["\n\r]'),
                m = new RegExp("([0-9]{1,10})"),
                y = new RegExp("(0[xX][0-9a-fA-F]+)|(\\$[0-9a-fA-F]+)"),
                v = new RegExp("(%[01]+)"),
                _ = o(["adcconfig", "backward", "bcdtoascii", "bcdtobin", "bintoascii", "bintobcd", "booti2c", "branch", "button", "calibadc", "calibadc10", "calibfreq", "call", "case", "clearbit", "compsetup", "count", "daclevel", "dacsetup", "data", "debug", "dec", "disablebod", "disabletime", "disconnect", "do", "doze", "eeprom", "else", "elseif", "enablebod", "enabletime", "end", "endif", "endselect", "exit", "for", "forward", "fvrsetup", "get", "gosub", "goto", "halt", "hi2cin", "hi2cout", "hi2csetup", "hibernate", "high", "hintsetup", "hpwm", "hpwmduty", "hpwmout", "hserin", "hserout", "hsersetup", "hshin", "hshout", "hspiin", "hspiout", "hspisetup", "i2cmaster", "i2cread", "i2cslave", "i2cwrite", "if", "inc", "infrain", "infrain2", "infraout", "input", "inputtype", "irin", "irout", "kbin", "kbled", "keyin", "keyled", "let", "lookdown", "lookup", "loop", "low", "nap", "next", "off", "on", "output", "owin", "owout", "pause", "pauseus", "pause_int", "peek", "peeksfr", "play", "poke", "pokesfr", "porta", "portb", "portc", "portd", "pot", "pullup", "pulsin", "pulsout", "put", "pwm", "pwmdiv4", "pwmdiv16", "pwmdiv64", "pwmduty", "pwmout", "random", "read", "readadc", "readadc10", "readdac", "readdac10", "readfirmware", "readi2c", "readinternaltemp", "readmem", "readoutputs", "readowclk", "readowsn", "readpinsc", "readportc", "readrevision", "readsilicon", "readtable", "readtemp", "readtemp12", "reconnect", "reset", "resetowclk", "restart", "resume", "return", "reverse", "rfin", "rfout", "run", "select", "sensor", "serin", "serout", "serrxd", "sertxd", "servo", "servopos", "setbit", "setfreq", "setint", "setintflags", "settimer", "shiftin", "shiftout", "shin", "shout", "sleep", "sound", "spiin", "spiout", "srlatch", "srreset", "srset", "step", "stop", "suspend", "swap", "switch", "switchoff", "switchon", "symbol", "table", "tablecopy", "then", "tmr3setup", "to", "toggle", "togglebit", "touch", "touch16", "tune", "ultra", "uniin", "uniout", "until", "vartoascii", "wait", "while", "word", "write", "writei2c", "writemem"]),
                b = o(["and", "andnot", "atan", "bit", "clear", "cos", "dcd", "dig", "inv", "is", "max", "min", "mod", "nand", "ncd", "nob", "nor", "not", "or", "ornot", "rev", "set", "sin", "sqr", "xnor", "xor", "xornot"]),
                C = new RegExp("^[\\+\\-\\*\\/\\&\\|\\^\\%|=<>]"),
                E = new RegExp("^((==)|(<>)|(<=)|(>=)|(<>)|(<<)|(>>)|(!=)|(//)|(\\*\\*)|(\\/\\/)|(\\*\\/)|(\\&\\/)|(\\|\\/)|(\\^\\/))"),
                S = o(["adcsetup", "adcsetup2", "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "b10", "b11", "b12", "b13", "b14", "b15", "b16", "b17", "b18", "b19", "b20", "b21", "b22", "b23", "b24", "b25", "b26", "b27", "b28", "b29", "b30", "b31", "b32", "b33", "b34", "b35", "b36", "b37", "b38", "b39", "b40", "b41", "b42", "b43", "b44", "b45", "b46", "b47", "b48", "b49", "b50", "b51", "b52", "b53", "b54", "b55", "bit0", "bit1", "bit2", "bit3", "bit4", "bit5", "bit6", "bit7", "bit8", "bit9", "bit10", "bit11", "bit12", "bit13", "bit14", "bit15", "bit16", "bit17", "bit18", "bit19", "bit20", "bit21", "bit22", "bit23", "bit24", "bit25", "bit26", "bit27", "bit28", "bit29", "bit30", "bit31", "bptr", "bptr0", "bptr1", "bptr2", "bptr3", "bptr4", "bptr5", "bptr6", "bptr7", "bptrdec", "bptrinc", "compflag", "compvalue", "dir0", "dir1", "dir2", "dir3", "dir4", "dir5", "dir6", "dir7", "dira.0", "dira.1", "dira.2", "dira.3", "dira.4", "dira.5", "dira.6", "dira.7", "dirb.0", "dirb.1", "dirb.2", "dirb.3", "dirb.4", "dirb.5", "dirb.6", "dirb.7", "dirc.0", "dirc.1", "dirc.2", "dirc.3", "dirc.4", "dirc.5", "dirc.6", "dirc.7", "dird.0", "dird.1", "dird.2", "dird.3", "dird.4", "dird.5", "dird.6", "dird.7", "dirs", "dirsa", "dirsb", "dirsc", "dirsd", "flag0", "flag1", "flag2", "flag3", "flag4", "flag5", "flag6", "flag7", "flag8", "flag9", "flag10", "flag11", "flag12", "flag13", "flag14", "flag15", "flags", "flagsh", "flagsl", "hi2cflag", "hi2clast", "hint0flag", "hint1flag", "hint2flag", "hintflag", "hserflag", "hserinflag", "hserinptr", "hserptr", "infra", "input0", "input1", "input2", "input3", "input4", "input5", "input6", "input7", "keyvalue", "outpin0", "outpin1", "outpin2", "outpin3", "outpin4", "outpin5", "outpin6", "outpin7", "outpina.0", "outpina.1", "outpina.2", "outpina.3", "outpina.4", "outpina.5", "outpina.6", "outpina.7", "outpinb.0", "outpinb.1", "outpinb.2", "outpinb.3", "outpinb.4", "outpinb.5", "outpinb.6", "outpinb.7", "outpinc.0", "outpinc.1", "outpinc.2", "outpinc.3", "outpinc.4", "outpinc.5", "outpinc.6", "outpinc.7", "outpind.0", "outpind.1", "outpind.2", "outpind.3", "outpind.4", "outpind.5", "outpind.6", "outpind.7", "outpins", "outpinsa", "outpinsb", "outpinsc", "outpinsd", "pin0", "pin1", "pin2", "pin3", "pin4", "pin5", "pin6", "pin7", "pina.0", "pina.1", "pina.2", "pina.3", "pina.4", "pina.5", "pina.6", "pina.7", "pinb.0", "pinb.1", "pinb.2", "pinb.3", "pinb.4", "pinb.5", "pinb.6", "pinb.7", "pinc.0", "pinc.1", "pinc.2", "pinc.3", "pinc.4", "pinc.5", "pinc.6", "pinc.7", "pind.0", "pind.1", "pind.2", "pind.3", "pind.4", "pind.5", "pind.6", "pind.7", "pins", "pinsa", "pinsb", "pinsc", "pinsd", "port", "ptr", "ptr0", "ptr1", "ptr2", "ptr3", "ptr4", "ptr5", "ptr6", "ptr7", "ptr8", "ptr9", "ptr10", "ptr11", "ptr12", "ptr13", "ptr14", "ptr15", "ptrh", "ptrl", "ptrdec", "ptrinc", "s_w0", "s_w1", "s_w2", "s_w3", "s_w4", "s_w5", "s_w6", "s_w7", "task", "time", "timer", "timer3", "toflag", "trisc", "w0", "w1", "w2", "w3", "w4", "w5", "w6", "w7", "w8", "w9", "w10", "w11", "w12", "w13", "w14", "w15", "w16", "w17", "w18", "w19", "w20", "w21", "w22", "w23", "w24", "w25", "w26", "w27", "@bptr", "@bptrdec", "@bptrinc", "@bptr", "@bptrdec", "@bptrinc"]),
                T = o(["@ptr", "@ptrinc", "@ptrdec", "@bptr", "@bptrinc", "@bptrdec"]),
                k = o(["a.0", "a.1", "a.2", "a.3", "a.4", "a.5", "a.6", "a.7", "b.0", "b.1", "b.2", "b.3", "b.4", "b.5", "b.6", "b.7", "c.0", "c.1", "c.2", "c.3", "c.4", "c.5", "c.6", "c.7", "d.0", "d.1", "d.2", "d.3", "d.4", "d.5", "d.6", "d.7", "b300_4", "b300_8", "b300_16", "b300_20", "b300_32", "b300_40", "b300_64", "b600_4", "b600_8", "b600_16", "b600_20", "b600_32", "b600_40", "b600_64", "b1200_4", "b1200_8", "b1200_16", "b1200_20", "b1200_32", "b1200_40", "b1200_64", "b2400_4", "b2400_8", "b2400_16", "b2400_20", "b2400_32", "b2400_40", "b2400_64", "b4800_4", "b4800_8", "b4800_16", "b4800_20", "b4800_32", "b4800_40", "b4800_64", "b9600_4", "b9600_8", "b9600_16", "b9600_20", "b9600_32", "b9600_40", "b9600_64", "b14400_4", "b14400_8", "b14400_16", "b14400_20", "b14400_32", "b14400_40", "b14400_64", "b19200_4", "b19200_8", "b19200_16", "b19200_20", "b19200_32", "b19200_40", "b19200_64", "b28800_4", "b28800_8", "b28800_16", "b28800_20", "b28800_32", "b28800_40", "b28800_64", "b31250_4", "b31250_8", "b31250_16", "b31250_20", "b31250_32", "b31250_40", "b31250_64", "b38400_4", "b38400_8", "b38400_16", "b38400_20", "b38400_32", "b38400_40", "b38400_64", "b57600_4", "b57600_8", "b57600_16", "b57600_20", "b57600_32", "b57600_40", "b57600_64", "b76800_4", "b76800_8", "b76800_16", "b76800_20", "b76800_32", "b76800_40", "b76800_64", "b115200_4", "b115200_8", "b115200_16", "b115200_20", "b115200_32", "b115200_40", "b115200_64", "cls", "cr", "em4", "em8", "em16", "em20", "em32", "em40", "em64", "fvr1024", "fvr2048", "fvr4096", "i2cbyte", "i2cword", "i2cfast", "i2cfast4", "i2cfast8", "i2cfast16", "i2cfast20", "i2cfast32", "i2cfast40", "i2cfast64", "i2cfast_4", "i2cfast_8", "i2cfast_16", "i2cfast_20", "i2cfast_32", "i2cfast_40", "i2cfast_64", "i2cslow", "i2cslow4", "i2cslow8", "i2cslow16", "i2cslow20", "i2cslow32", "i2cslow40", "i2cslow64", "i2cslow_4", "i2cslow_8", "i2cslow_16", "i2cslow_20", "i2cslow_32", "i2cslow_40", "i2cslow_64", "it_raw_h", "it_raw_l", "it_5v0", "it_4v5", "it_3v5", "it_4v0", "it_3v3", "it_3v0", "k31", "k62", "k125", "k250", "k500", "lf", "lsbfirst", "lsbfirst_h", "lsbfirst_l", "lsbpost", "lsbpost_h", "lsbpost_l", "lsbpre", "lsbpre_h", "lsbpre_l", "msbfirst_h", "msbfirst_l", "msbfirst", "msbpost", "msbpost_h", "msbpost_l", "msbpre", "msbpre_h", "msbpre_l", "m1", "m2", "m4", "m8", "m16", "m32", "m64", "n300", "n300_4", "n600", "n600_4", "n600_8", "n1200", "n1200_4", "n1200_8", "n2400", "n2400_4", "n2400_8", "n2400_16", "n4800", "n4800_4", "n4800_8", "n4800_16", "n4800_32", "n9600", "n9600_8", "n9600_16", "n9600_32", "n9600_64", "n19200", "n19200_16", "n19200_32", "n19200_64", "n38400", "n38400_32", "n38400_64", "n76800", "n76800_64", "output0", "output1", "output2", "output3", "output4", "output5", "output6", "output7", "ownoreset", "ownoreset_bit", "owresetafter", "owresetafter_bit", "owresetbefore", "owresetbefore_bit", "owresetboth", "owresetboth_bit", "owresetfirst", "owresetfirst_bit", "pwmfull_f", "pwmfull_r", "pwmhalf", "pwmsingle", "pwmhhhh", "pwmhlhl", "pwmlhlh", "pwmllll", "s.0", "s.1", "s.2", "s.3", "s.4", "s.5", "s.6", "s.7", "s.8", "s.9", "s.10", "s.11", "s.12", "s.13", "s.a0", "s.a1", "s.a2", "s.a3", "s.a4", "s.a5", "spifast", "spimedium", "spislow", "spimode00", "spimode00e", "spimode01", "spimode01e", "spimode10", "spimode10e", "spimode11", "spimode11e", "t1s_4", "t1s_8", "t1s_16", "t1s_20", "t1s_32", "t1s_40", "t1s_64", "t300", "t300_4", "t600", "t600_4", "t600_8", "t1200", "t1200_4", "t1200_8", "t2400", "t2400_4", "t2400_8", "t2400_16", "t4800", "t4800_4", "t4800_8", "t4800_16", "t4800_32", "t9600", "t9600_8", "t9600_16", "t9600_32", "t9600_64", "t19200", "t19200_16", "t19200_32", "t19200_64", "t38400", "t38400_32", "t38400_64", "t76800", "t76800_64", "uni_crrd", "uni_eral", "uni_rdsr", "uni_read", "uni_setal", "uni_wren", "uni_wrdi", "uni_write", "uni_wrsr"]),
                A = new RegExp("^#((ifdef)|(com)|(define)|(end)|(endrem)|(error)|(freq)|(gosubs)|(ifdef)|(ifndef)|(include)|(no_data)|(no_end)|(no_table)|(picaxe)|(picaxe08)|(picaxe08m)|(picaxe08m2)|(picaxe08m2le)|(picaxe14m)|(picaxe14m2)|(picaxe18)|(picaxe18a)|(picaxe18m)|(picaxe18m2)|(picaxe18m2_c)|(picaxe18x)|(picaxe20m)|(picaxe20m2)|(picaxe20x2)|(picaxe28)|(picaxe28a)|(picaxe28x)|(picaxe28x1)|(picaxe28x2)|(picaxe40x)|(picaxe40x1)|(picaxe40x2)|(rem)|(sim)|(simspeed)|(simtask)|(slot)|(terminal)|(undefine))", "i"),
                B = new RegExp("start0:|start1:|start2:|start3:|start4:|start5:|start6:|start7:|interrupt:", "i"),
                x = new RegExp("^[_A-Za-z][_A-Za-z0-9.]*[:]"),
                w = new RegExp("^[_A-Za-z][_A-Za-z0-9.]*"),
                I = new RegExp("^[@][_A-Za-z][_A-Za-z0-9.]*"),
                N = new RegExp("^#.*$"),
                R = new RegExp("^#Flow.*$"),
                L = {
                    electricChars: "dDpPtTfFeE ",
                    startState: function() {
                        return {
                            tokenize: r,
                            lastToken: null,
                            currentIndent: 0,
                            nextLineIndent: 0,
                            doInCurrentLine: !1,
                            startOfLine: !1,
                            inMultiLineComment: !1
                        }
                    },
                    token: function(e, t) {
                        e.sol() && (t.currentIndent += t.nextLineIndent, t.nextLineIndent = 0, t.doInCurrentLine = 0, t.startOfLine = !0);
                        var o = a(e, t);
                        return t.lastToken = {
                            style: o,
                            content: e.current()
                        }, o
                    },
                    indent: function(t, o) {
                        var n = o.replace(/^\s+|\s+$/g, "");
                        return n.match(h) || n.match(d) || n.match(p) ? e.indentUnit * (t.currentIndent - 1) : t.currentIndent < 0 ? 0 : t.currentIndent * e.indentUnit
                    }
                };
            return L
        }), e.defineMIME("text/x-picaxe", "picaxe")
    }),
    function(e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define("../lib/codemirror/addon/search/searchcursor", ["../../lib/codemirror"], e) : e(CodeMirror)
    }(function(e) {
        function t(e, t, i, r) {
            if (this.atOccurrence = !1, this.doc = e, null == r && "string" == typeof t && (r = !1), i = i ? e.clipPos(i) : n(0, 0), this.pos = {
                    from: i,
                    to: i
                }, "string" != typeof t) t.global || (t = new RegExp(t.source, t.ignoreCase ? "ig" : "g")), this.matches = function(o, i) {
                if (o) {
                    t.lastIndex = 0;
                    for (var r, s, a = e.getLine(i.line).slice(0, i.ch), l = 0;;) {
                        t.lastIndex = l;
                        var c = t.exec(a);
                        if (!c) break;
                        if (r = c, s = r.index, l = r.index + (r[0].length || 1), l == a.length) break
                    }
                    var u = r && r[0].length || 0;
                    u || (0 == s && 0 == a.length ? r = void 0 : s != e.getLine(i.line).length && u++)
                } else {
                    t.lastIndex = i.ch;
                    var a = e.getLine(i.line),
                        r = t.exec(a),
                        u = r && r[0].length || 0,
                        s = r && r.index;
                    s + u == a.length || u || (u = 1)
                }
                return r && u ? {
                    from: n(i.line, s),
                    to: n(i.line, s + u),
                    match: r
                } : void 0
            };
            else {
                var s = t;
                r && (t = t.toLowerCase());
                var a = r ? function(e) {
                        return e.toLowerCase()
                    } : function(e) {
                        return e
                    },
                    l = t.split("\n");
                if (1 == l.length) t.length ? this.matches = function(i, r) {
                    if (i) {
                        var l = e.getLine(r.line).slice(0, r.ch),
                            c = a(l),
                            u = c.lastIndexOf(t);
                        if (u > -1) return u = o(l, c, u), {
                            from: n(r.line, u),
                            to: n(r.line, u + s.length)
                        }
                    } else {
                        var l = e.getLine(r.line).slice(r.ch),
                            c = a(l),
                            u = c.indexOf(t);
                        if (u > -1) return u = o(l, c, u) + r.ch, {
                            from: n(r.line, u),
                            to: n(r.line, u + s.length)
                        }
                    }
                } : this.matches = function() {};
                else {
                    var c = s.split("\n");
                    this.matches = function(t, o) {
                        var i = l.length - 1;
                        if (t) {
                            if (o.line - (l.length - 1) < e.firstLine()) return;
                            if (a(e.getLine(o.line).slice(0, c[i].length)) != l[l.length - 1]) return;
                            for (var r = n(o.line, c[i].length), s = o.line - 1, u = i - 1; u >= 1; --u, --s)
                                if (l[u] != a(e.getLine(s))) return;
                            var g = e.getLine(s),
                                p = g.length - c[0].length;
                            if (a(g.slice(p)) != l[0]) return;
                            return {
                                from: n(s, p),
                                to: r
                            }
                        }
                        if (!(o.line + (l.length - 1) > e.lastLine())) {
                            var g = e.getLine(o.line),
                                p = g.length - c[0].length;
                            if (a(g.slice(p)) == l[0]) {
                                for (var h = n(o.line, p), s = o.line + 1, u = 1; i > u; ++u, ++s)
                                    if (l[u] != a(e.getLine(s))) return;
                                if (a(e.getLine(s).slice(0, c[i].length)) == l[i]) return {
                                    from: h,
                                    to: n(s, c[i].length)
                                }
                            }
                        }
                    }
                }
            }
        }

        function o(e, t, o) {
            if (e.length == t.length) return o;
            for (var n = Math.min(o, e.length);;) {
                var i = e.slice(0, n).toLowerCase().length;
                if (o > i) ++n;
                else {
                    if (!(i > o)) return n;
                    --n
                }
            }
        }
        var n = e.Pos;
        t.prototype = {
            findNext: function() {
                return this.find(!1)
            },
            findPrevious: function() {
                return this.find(!0)
            },
            find: function(e) {
                function t(e) {
                    var t = n(e, 0);
                    return o.pos = {
                        from: t,
                        to: t
                    }, o.atOccurrence = !1, !1
                }
                for (var o = this, i = this.doc.clipPos(e ? this.pos.from : this.pos.to);;) {
                    if (this.pos = this.matches(e, i)) return this.atOccurrence = !0, this.pos.match || !0;
                    if (e) {
                        if (!i.line) return t(0);
                        i = n(i.line - 1, this.doc.getLine(i.line - 1).length)
                    } else {
                        var r = this.doc.lineCount();
                        if (i.line == r - 1) return t(r);
                        i = n(i.line + 1, 0)
                    }
                }
            },
            from: function() {
                return this.atOccurrence ? this.pos.from : void 0
            },
            to: function() {
                return this.atOccurrence ? this.pos.to : void 0
            },
            replace: function(t, o) {
                if (this.atOccurrence) {
                    var i = e.splitLines(t);
                    this.doc.replaceRange(i, this.pos.from, this.pos.to, o), this.pos.to = n(this.pos.from.line + i.length - 1, i[i.length - 1].length + (1 == i.length ? this.pos.from.ch : 0))
                }
            }
        }, e.defineExtension("getSearchCursor", function(e, o, n) {
            return new t(this.doc, e, o, n)
        }), e.defineDocExtension("getSearchCursor", function(e, o, n) {
            return new t(this, e, o, n)
        }), e.defineExtension("selectMatches", function(t, o) {
            for (var n = [], i = this.getSearchCursor(t, this.getCursor("from"), o); i.findNext() && !(e.cmpPos(i.to(), this.getCursor("to")) > 0);) n.push({
                anchor: i.from(),
                head: i.to()
            });
            n.length && this.setSelections(n, 0)
        })
    }), define("basiceditor", ["jquery", "../lib/shared/filesystem", "./lang", "./messages", "./config", "./search/search", "./search/search-controller", "./ui/modals", "../lib/codemirror/lib/codemirror", "../lib/codemirror/mode/xml/xml", "../lib/codemirror/addon/mode/simple", "../lib/codemirror/mode/picaxe/picaxe", "../lib/codemirror/addon/search/searchcursor"], function(e, t, o, n, i, r, s, a, l) {
        function c() {
            e("#search-button").click()
        }

        function u() {
            e("#gotoline-button").click()
        }

        function g() {
            e("#px-fm-new").click()
        }

        function p() {
            e("#px-fm-open").click()
        }

        function h() {
            e("#px-fm-save").click()
        }

        function d() {
            e("#px-m-syntax").click()
        }

        function f() {
            e("#px-m-download").click()
        }

        function m() {
            n.show(o.get("READ_ONLY_BASIC"))
        }

        function y(e, t) {
            t.removed.join() != t.text.join() && (C.dirty = !0, b.off("change", y))
        }

        function v(e, t) {
            C.setContent(t)
        }

        function _() {
            window.setTimeout(function() {
                a.showMessageModal(o.get("NO_CLIPBOARD_HEAD"), o.get("NO_CLIPBOARD_BODY"), o.get("CLOSE_ACTION"), null, function() {})
            }, 500)
        }
        var b = l.fromTextArea(e("#content_basic").get(0), {
            lineNumbers: !0,
            lineWiseCopyCut: !1,
            mode: "picaxe",
            theme: "picaxe"
        });
        b.on("cursorActivity", function() {
            var t = b.getDoc(),
                n = t.getCursor();
            e("#pos-line").text(o.get("LINE") + (n.line + 1)), e("#pos-char").text(", " + o.get("CHAR") + (n.ch + 1));
            var i = t.lineCount();
            e("#total-lines").text(i > 1 ? o.get("LINES_N_TOTAL").replace("%1", i) : o.get("LINE_1_TOTAL"))
        }), b.setOption("extraKeys", {
            F3: c,
            F4: d,
            F5: f,
            "Cmd-N": g,
            "Ctrl-N": g,
            "Cmd-S": h,
            "Ctrl-S": h,
            "Cmd-O": p,
            "Ctrl-O": p,
            "Cmd-F": c,
            "Ctrl-F": c,
            "Cmd-L": u,
            "Ctrl-L": u
        }), new s(new r(b));
        var C = {};
        C.dirty = !1, C.getContent = function() {
            return b.getValue()
        };
        var E = -1;
        return C.handleError = function(e) {
            -1 != E && C.clearError();
            var t = "line# ",
                o = e.indexOf(t); - 1 != o && (E = parseInt(e.substr(o + t.length).split(",")[0]) - 1, b.addLineClass(E, "background", "line-error"))
        }, C.clearError = function() {
            b.removeLineClass(E, "background", "line-error"), E = -1
        }, C.setContent = function(e) {
            b.setValue(e)
        }, C.hasError = function() {
            return -1 != E
        }, C.stripFlowDirectives = function() {
            b.setValue(b.getValue().replace(/^#Flow.*$\n/gm, ""))
        }, C.setReadOnlyCode = function(e) {
            b.setOption("readOnly", e), e ? (i.isPicaxeEditor || b.on("focus", m), b.off("change", y)) : (b.off("focus", m), C.dirty = !1, b.on("change", y))
        }, C.load = function() {
            t.loadText("bas", v)
        }, C.save = function() {
            t.save(C.getContent(), "text/plain", "picaxe.bas", function() {
                C.dirty = !1
            }, function() {})
        }, C.discard = function() {
            C.setContent("main:\n"), C.dirty = !1
        }, C.gotoLine = function(e) {
            b.focus(), e -= 1, b.setCursor({
                line: e,
                ch: 0
            });
            var t = b.getScrollInfo().clientHeight,
                o = b.charCoords({
                    line: e,
                    ch: 0
                }, "local");
            b.scrollTo(null, (o.top + o.bottom - t) / 2)
        }, C.setReadOnlyCode(!0), C.setFontSize = function(t) {
            e("#pane-basic").css("font-size", t + "px")
        }, C.setOption = function(e, t) {
            b.setOption(e, t)
        }, C.getOption = function(e) {
            return b.getOption(e)
        }, C.selectRange = function(e, t) {
            b.setSelection(e, t)
        }, C.undo = function() {
            b.execCommand("undo")
        }, C.redo = function() {
            b.execCommand("redo")
        }, C.selectAll = function() {
            b.execCommand("selectAll")
        }, C.cut = function() {
            _()
        }, C.copy = function() {
            _()
        }, C.paste = function() {
            _()
        }, C
    }), define("mode", ["jquery", "signals", "./ui/tabs", "./basiceditor", "./messages", "./events"], function(e, t, o, n, i, r) {
        var s = {
            BLOCKS_MODE: "blocks",
            CODE_MODE: "code"
        };
        return s.mode = s.BLOCKS_MODE, s.isBlocks = function() {
            return s.mode == s.BLOCKS_MODE
        }, s.switchToBlocks = function() {
            s.mode = s.BLOCKS_MODE, e("body").removeClass("code-mode"), o.setActive(o.BLOCKS_TAB), n.setReadOnlyCode(!0), i.clear(), r.modeChanged.dispatch(s.mode)
        }, s.switchToCode = function() {
            s.mode = s.CODE_MODE, e("body").addClass("code-mode"), o.setActive(o.BASIC_TAB), n.setReadOnlyCode(!1), n.stripFlowDirectives(), i.clear(), r.modeChanged.dispatch(s.mode)
        }, s.resetModeSwitch = function(t) {
            e("input:radio[name=edit-mode]").parent().removeClass("active"), e("input:radio[name=edit-mode][value=" + t + "]").prop("checked", !0).parent().addClass("active")
        }, s
    }), define("picaxe/debug/ui", ["blocklylib", "./comms", "../../ui/tabs", "../../lang", "serial-ports", "../../events", "../../mode"], function(e, t, o, n, i, r, s) {
        function a(e) {
            return u(e, 3)
        }

        function l(e) {
            return "%" + u(e.toString(2), 8)
        }

        function c(e, t) {
            var o = u(e.toString(16).toUpperCase(), 2);
            return 0 != t && (o = "$" + o), o
        }

        function u(e, t, o) {
            o || (o = "0");
            for (var n = e + ""; n.length < t;) n = o + n;
            return n
        }

        function g(e) {
            $("#pane-debug > div").html(e)
        }
        var p;
        t.error.add(function(e) {
            g("<span class='error'>" + e + "</span>")
        }), t.debugPacketReceived.add(function(t) {
            var o = Array.prototype.join.call(t, [","]);
            if (p != o) {
                p = o;
                for (var n = e.mainWorkspace, i = e.Variables.allVariables(n).slice().sort(function(e, t) {
                        return e.toLowerCase().localeCompare(t.toLowerCase())
                    }), r = "<table class='table table-condensed table-striped'>", h = 0; h < t.length; h++) {
                    var d, f, m, y = t[h],
                        v = h % 2 == 0;
                    if (v) {
                        var _ = c(t[h + 1], !1) + c(y, !1),
                            b = Math.floor(h / 2);
                        d = "w" + b, s.isBlocks() && b < i.length && (d = i[b]), f = u(parseInt(_, 16), 5), m = "$" + _
                    } else d = f = m = "";
                    r += s.isBlocks() ? "<tr><td>" + d + "</td><td>" + f + "</td><td>" + m + "</td><td></td><td></td><td></td><td></td></tr>" : "<tr><td>b" + h + "</td><td>" + a(y) + "</td><td>" + c(y) + "</td><td>" + l(y) + "</td><td>" + d + "</td><td>" + f + "</td><td>" + m + "</td></tr>"
                }
                r += "</table>", g(r)
            }
        });
        var h = {};
        return h.enable = function() {
            $("#pane-debug, #tab-debug").show(), o.setActive(o.DEBUG_TAB), $("body").addClass("debug"), i.value ? $("#pane-debug > div").html(n.get("DEBUG_WAIT").replace("%1", i.value)) : $("#pane-debug > div").html(n.get("DEBUG_WAIT").replace("%1", "COM port"))
        }, h.disable = function() {
            $("#pane-debug, #tab-debug").hide(), s.isBlocks() ? o.setActive(o.BLOCKS_TAB) : o.setActive(o.BASIC_TAB), $("body").removeClass("debug"), r.debugClosed.dispatch(), p = ""
        }, h.apiDebugPacket = function(e) {
            t.debugPacketReceived.dispatch(e)
        }, h.apiConnect = function(e) {
            t.apiConnect(e)
        }, h
    }), define("ui/menubar-data", [], function() {
        return {
            menus: [{
                id: "m-project",
                options: [{
                    id: "pm-new"
                }, {
                    id: "pm-open"
                }, {
                    id: "pm-merge"
                }, {
                    id: "pm-save"
                }, {
                    id: "pm-saveas",
                    "class": "px-cloudweb"
                }, {
                    id: "pm-importlocal",
                    "class": "px-cloudweb"
                }, {
                    id: "pm-exportlocal",
                    "class": "px-cloudweb"
                }, {
                    id: "pm-openfromcloud",
                    "class": "px-local-signed-in"
                }, {
                    id: "pm-savetocloud",
                    "class": "px-local-signed-in"
                }, {
                    id: "pm-export"
                }]
            }, {
                id: "m-file",
                options: [{
                    id: "fm-new"
                }, {
                    id: "fm-open"
                }, {
                    id: "fm-save"
                }, {
                    id: "fm-saveas",
                    "class": "px-cloudweb"
                }, {
                    id: "fm-importlocal",
                    "class": "px-cloudweb"
                }, {
                    id: "fm-exportlocal",
                    "class": "px-cloudweb"
                }, {
                    id: "fm-openfromcloud",
                    "class": "px-local-signed-in"
                }, {
                    id: "fm-savetocloud",
                    "class": "px-local-signed-in"
                }]
            }, {
                id: "m-edit",
                options: [{
                    id: "em-undo"
                }, {
                    id: "em-redo"
                }, {
                    id: "em-cut"
                }, {
                    id: "em-copy"
                }, {
                    id: "em-paste"
                }, {
                    id: "em-select-all"
                }]
            }, {
                id: "m-blocks-edit",
                options: [{
                    id: "bem-undo"
                }, {
                    id: "bem-redo"
                }, {
                    id: "bem-cut"
                }, {
                    id: "bem-copy"
                }, {
                    id: "bem-paste"
                }]
            }, {
                id: "m-settings",
                options: [{
                    id: "sm-models",
                    selectable: !0,
                    submenu: {
                        id: "sm-models-menu"
                    },
                    "class": "dropdown-submenu"
                }, {
                    id: "sm-ports",
                    selectable: !0,
                    submenu: {
                        id: "sm-ports-menu"
                    },
                    "class": "dropdown-submenu px-local"
                }, {
                    id: "sm-pin-name-settings"
                }, {
                    id: "sm-code-settings"
                }, {
                    id: "sm-blocks-settings"
                }, {
                    id: "sm-showsimulator",
                    "class": "px-checkbox-item px-blocks-menuitem",
                    checkbox: !0
                }, {
                    id: "sm-onlinecompile",
                    "class": "px-local px-checkbox-item",
                    checkbox: !0
                }]
            }, {
                id: "m-picaxe",
                options: [{
                    id: "m-syntax"
                }, {
                    id: "m-upload",
                    "class": "px-local"
                }, {
                    id: "m-download",
                    "class": "px-cloudweb"
                }, {
                    id: "m-clear-memory",
                    "class": "px-local"
                }, {
                    id: "m-debug",
                    "class": "px-local"
                }],
                "class": "px-compiler"
            }]
        }
    }), define("ui/templates", [], function() {
        var e = '{{#menus}}	<li id="px-{{id}}" class="dropdown{{#class}} {{class}}{{/class}}">    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{label}} <span class="caret"></span></a>    <ul class="dropdown-menu" role="menu">	{{#options}}      <li{{#class}} class="{{class}}"{{/class}}{{#selectLabel}} data-select="true" data-select-label="{{selectLabel}}"{{/selectLabel}}>{{#checkbox}}<input type="checkbox" id="px-{{id}}-checkbox"/>{{/checkbox}}<a id="px-{{id}}" href="#">{{label}}</a>{{#submenu}}<ul id="px-{{id}}" class="dropdown-menu"></ul>{{/submenu}}</li>	{{/options}}     </ul>  </li>  {{/menus}}',
            t = '<ul class="settings-form">{{#settings}}		{{#number}}		<li class="settings-text">			<label for="setting-{{id}}">{{label}}</label>			<input type="number" id="setting-{{id}}" size="1" maxlength="2" value="0" min="{{min}}" max="{{max}}">		</li>		{{/number}}		{{#check}}		<li class="settings-check">			<label for="setting-{{id}}">{{label}}</label>			<input type="checkbox" id="setting-{{id}}">		</li>		{{/check}}		{{/settings}}</ul>',
            o = '<table class="table pin-name-form">		<thead><tr><th>{pin-name-id-head}</th><th>{pin-name-label-head}</th></tr></thead>		<tbody>{{#pinNames}}		<tr>			<td><label for="pin-{{id}}">{{id}}</label></td>			<td><input type="text" id="pin-{{id}}" size="12" maxlength="12" value="{{value}}" placeholder="{{placeholder}}"></td>		</tr>		{{/pinNames}}</tbody></table>';
        return {
            menu: e,
            settings: t,
            pinNameForm: o
        }
    }),
    function(e, t) {
        "object" == typeof exports && exports ? t(exports) : "function" == typeof define && define.amd ? define("ui/../../lib/mustache", ["exports"], t) : (e.Mustache = {}, t(Mustache))
    }(this, function(e) {
        function t(e) {
            return "function" == typeof e
        }

        function o(e) {
            return f(e) ? "array" : typeof e
        }

        function n(e) {
            return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
        }

        function i(e, t) {
            return null != e && "object" == typeof e && t in e
        }

        function r(e, t) {
            return m.call(e, t)
        }

        function s(e) {
            return !r(y, e)
        }

        function a(e) {
            return String(e).replace(/[&<>"'\/]/g, function(e) {
                return v[e]
            })
        }

        function l(t, o) {
            function i() {
                if (y && !v)
                    for (; m.length;) delete d[m.pop()];
                else m = [];
                y = !1, v = !1
            }

            function r(e) {
                if ("string" == typeof e && (e = e.split(b, 2)), !f(e) || 2 !== e.length) throw new Error("Invalid tags: " + e);
                a = new RegExp(n(e[0]) + "\\s*"), l = new RegExp("\\s*" + n(e[1])), p = new RegExp("\\s*" + n("}" + e[1]))
            }
            if (!t) return [];
            var a, l, p, h = [],
                d = [],
                m = [],
                y = !1,
                v = !1;
            r(o || e.tags);
            for (var T, k, A, B, x, w, I = new g(t); !I.eos();) {
                if (T = I.pos, A = I.scanUntil(a))
                    for (var N = 0, R = A.length; R > N; ++N) B = A.charAt(N), s(B) ? m.push(d.length) : v = !0, d.push(["text", B, T, T + 1]), T += 1, "\n" === B && i();
                if (!I.scan(a)) break;
                if (y = !0, k = I.scan(S) || "name", I.scan(_), "=" === k ? (A = I.scanUntil(C), I.scan(C), I.scanUntil(l)) : "{" === k ? (A = I.scanUntil(p), I.scan(E), I.scanUntil(l), k = "&") : A = I.scanUntil(l), !I.scan(l)) throw new Error("Unclosed tag at " + I.pos);
                if (x = [k, A, T, I.pos], d.push(x), "#" === k || "^" === k) h.push(x);
                else if ("/" === k) {
                    if (w = h.pop(), !w) throw new Error('Unopened section "' + A + '" at ' + T);
                    if (w[1] !== A) throw new Error('Unclosed section "' + w[1] + '" at ' + T)
                } else "name" === k || "{" === k || "&" === k ? v = !0 : "=" === k && r(A)
            }
            if (w = h.pop()) throw new Error('Unclosed section "' + w[1] + '" at ' + I.pos);
            return u(c(d))
        }

        function c(e) {
            for (var t, o, n = [], i = 0, r = e.length; r > i; ++i) t = e[i], t && ("text" === t[0] && o && "text" === o[0] ? (o[1] += t[1], o[3] = t[3]) : (n.push(t), o = t));
            return n
        }

        function u(e) {
            for (var t, o, n = [], i = n, r = [], s = 0, a = e.length; a > s; ++s) switch (t = e[s], t[0]) {
                case "#":
                case "^":
                    i.push(t), r.push(t), i = t[4] = [];
                    break;
                case "/":
                    o = r.pop(), o[5] = t[2], i = r.length > 0 ? r[r.length - 1][4] : n;
                    break;
                default:
                    i.push(t)
            }
            return n
        }

        function g(e) {
            this.string = e, this.tail = e, this.pos = 0
        }

        function p(e, t) {
            this.view = e, this.cache = {
                ".": this.view
            }, this.parent = t
        }

        function h() {
            this.cache = {}
        }
        var d = Object.prototype.toString,
            f = Array.isArray || function(e) {
                return "[object Array]" === d.call(e)
            },
            m = RegExp.prototype.test,
            y = /\S/,
            v = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#39;",
                "/": "&#x2F;"
            },
            _ = /\s*/,
            b = /\s+/,
            C = /\s*=/,
            E = /\s*\}/,
            S = /#|\^|\/|>|\{|&|=|!/;
        g.prototype.eos = function() {
            return "" === this.tail
        }, g.prototype.scan = function(e) {
            var t = this.tail.match(e);
            if (!t || 0 !== t.index) return "";
            var o = t[0];
            return this.tail = this.tail.substring(o.length), this.pos += o.length, o
        }, g.prototype.scanUntil = function(e) {
            var t, o = this.tail.search(e);
            switch (o) {
                case -1:
                    t = this.tail, this.tail = "";
                    break;
                case 0:
                    t = "";
                    break;
                default:
                    t = this.tail.substring(0, o), this.tail = this.tail.substring(o)
            }
            return this.pos += t.length, t
        }, p.prototype.push = function(e) {
            return new p(e, this)
        }, p.prototype.lookup = function(e) {
            var o, n = this.cache;
            if (n.hasOwnProperty(e)) o = n[e];
            else {
                for (var r, s, a = this, l = !1; a;) {
                    if (e.indexOf(".") > 0)
                        for (o = a.view, r = e.split("."), s = 0; null != o && s < r.length;) s === r.length - 1 && (l = i(o, r[s])), o = o[r[s++]];
                    else o = a.view[e], l = i(a.view, e);
                    if (l) break;
                    a = a.parent
                }
                n[e] = o
            }
            return t(o) && (o = o.call(this.view)), o
        }, h.prototype.clearCache = function() {
            this.cache = {}
        }, h.prototype.parse = function(e, t) {
            var o = this.cache,
                n = o[e];
            return null == n && (n = o[e] = l(e, t)), n
        }, h.prototype.render = function(e, t, o) {
            var n = this.parse(e),
                i = t instanceof p ? t : new p(t);
            return this.renderTokens(n, i, o, e)
        }, h.prototype.renderTokens = function(e, t, o, n) {
            for (var i, r, s, a = "", l = 0, c = e.length; c > l; ++l) s = void 0, i = e[l], r = i[0], "#" === r ? s = this.renderSection(i, t, o, n) : "^" === r ? s = this.renderInverted(i, t, o, n) : ">" === r ? s = this.renderPartial(i, t, o, n) : "&" === r ? s = this.unescapedValue(i, t) : "name" === r ? s = this.escapedValue(i, t) : "text" === r && (s = this.rawValue(i)), void 0 !== s && (a += s);
            return a
        }, h.prototype.renderSection = function(e, o, n, i) {
            function r(e) {
                return s.render(e, o, n)
            }
            var s = this,
                a = "",
                l = o.lookup(e[1]);
            if (l) {
                if (f(l))
                    for (var c = 0, u = l.length; u > c; ++c) a += this.renderTokens(e[4], o.push(l[c]), n, i);
                else if ("object" == typeof l || "string" == typeof l || "number" == typeof l) a += this.renderTokens(e[4], o.push(l), n, i);
                else if (t(l)) {
                    if ("string" != typeof i) throw new Error("Cannot use higher-order sections without the original template");
                    l = l.call(o.view, i.slice(e[3], e[5]), r), null != l && (a += l)
                } else a += this.renderTokens(e[4], o, n, i);
                return a
            }
        }, h.prototype.renderInverted = function(e, t, o, n) {
            var i = t.lookup(e[1]);
            return !i || f(i) && 0 === i.length ? this.renderTokens(e[4], t, o, n) : void 0
        }, h.prototype.renderPartial = function(e, o, n) {
            if (n) {
                var i = t(n) ? n(e[1]) : n[e[1]];
                return null != i ? this.renderTokens(this.parse(i), o, n, i) : void 0
            }
        }, h.prototype.unescapedValue = function(e, t) {
            var o = t.lookup(e[1]);
            return null != o ? o : void 0
        }, h.prototype.escapedValue = function(t, o) {
            var n = o.lookup(t[1]);
            return null != n ? e.escape(n) : void 0
        }, h.prototype.rawValue = function(e) {
            return e[1]
        }, e.name = "mustache.js", e.version = "2.1.2", e.tags = ["{{", "}}"];
        var T = new h;
        e.clearCache = function() {
            return T.clearCache()
        }, e.parse = function(e, t) {
            return T.parse(e, t)
        }, e.render = function(e, t, n) {
            if ("string" != typeof e) throw new TypeError('Invalid template! Template should be a "string" but "' + o(e) + '" was given as the first argument for mustache#render(template, view, partials)');
            return T.render(e, t, n)
        }, e.to_html = function(o, n, i, r) {
            var s = e.render(o, n, i);
            return t(r) ? void r(s) : s
        }, e.escape = a, e.Scanner = g, e.Context = p, e.Writer = h
    }), define("ui/template-utils", ["../../lib/mustache"], function(e) {
        function t(e, o) {
            for (var n in e) "object" == typeof e[n] && t(e[n], o);
            o(e)
        }
        var o = {};
        return o.make = function(o, n, i) {
            return i && t(o, i), e.parse(n), e.render(n, o)
        }, o
    }), define("ui/menubar", ["jquery", "signals", "../lang", "../events", "./menubar-data", "./templates", "./template-utils", "../config"], function(e, t, o, n, i, r, s, a) {
        function l() {
            function t(e) {
                e.id && (e.label = o.get(e.id)), e.selectable && (e.selectLabel = o.get(e.id + "-selectLabel"))
            }
            var a = s.make(i, r.menu, t);
            e(a).insertBefore(e("#mode-group")), e(".dropdown-submenu").mouseover(function(t) {
                e(t.currentTarget).addClass("activated")
            }), e("nav a[id]").on("click", function(t) {
                var o = e(t.currentTarget),
                    n = o.parent();
                if (!n.hasClass("disabled")) {
                    if (n.hasClass("px-checkbox-item")) {
                        var i = n.find("input[type=checkbox]"),
                            r = !i.prop("checked");
                        return p.setCheckbox(c(i.attr("id")), r), void i.change()
                    }
                    n.parent().parent().removeClass("open"), p.itemClicked.dispatch(o.attr("id"))
                }
            }), e("nav input[type=checkbox]").on("click", function(t) {
                t.stopPropagation();
                var o = e(t.currentTarget);
                return o.parent().hasClass("disabled") ? !1 : void 0
            }).on("change", function(t) {
                var o = e(t.currentTarget);
                p.checkboxSet.dispatch(c(o.attr("id")), 1 == o.prop("checked"))
            }), e("#px-sm-ports").parent().on("selected.bs.dropdown", function(t) {
                var o = e(t.relatedTarget).attr("data-value");
                p.portSelected.dispatch(o)
            }), e("#px-sm-models").parent().on("selected.bs.dropdown", function(t) {
                var o = e(t.relatedTarget).attr("data-value");
                p.modelSelected.dispatch(o)
            }).on("click", function(e) {
                p.itemClicked.dispatch(e.target.id)
            }), e("#px-m-settings").parent().on("show.bs.dropdown", function() {
                p.settingsMenuShown.dispatch()
            }), e("li.px-checkbox-item a").mouseover(function(t) {
                e(this).parent().addClass("focused")
            }).mouseout(function(t) {
                e(this).parent().removeClass("focused")
            }), n.menuReady.dispatch()
        }

        function c(e) {
            return e.substr(3).replace("-checkbox", "")
        }

        function u(t, o) {
            if (o > -1) {
                var n = t.find("li a").eq(o);
                t.trigger(e.Event("click", {
                    target: n.get(0)
                }))
            }
        }

        function g(e, t) {
            var o = e.find("li").index(e.find("li[data-value=" + t + "]"));
            u(e, o)
        }
        e("#nav-menus > ul > li").parent().on("show.bs.dropdown", function() {
            p.menuShown.dispatch()
        });
        var p = {};
        return p.init = l, p.itemClicked = new t, p.checkboxSet = new t, p.portSelected = new t, p.modelSelected = new t, p.settingsMenuShown = new t, p.menuShown = new t, p.setCheckbox = function(t, o) {
            e("#px-" + t + "-checkbox").prop("checked", o)
        }, p.makeModelsMenu = function(t, n) {
            var i = e("#px-sm-models-menu");
            i.empty(), t.forEach(function(e) {
                i.append('<li data-value="' + e + '"><a href="#">' + e + "</a></li>")
            }), a.isApp && (i.append('<li role="separator" class="divider"></li>'), i.append('<li class="px-local no-select"><a id="px-sm-checktype" href="#">' + o.get("sm-checktype") + "</a></li>")), u(i, n)
        }, p.enableItems = function(t, o) {
            var n = "#px-",
                i = t.map(function(e) {
                    return n + e
                }).join(",");
            e(i).parent().toggleClass("disabled", !o)
        }, p.makePortsMenu = function(t, n) {
            var i = e("#px-sm-ports-menu");
            i.empty(), t.length > 0 ? t.forEach(function(e) {
                e.displayName ? i.append('<li data-value="' + e.id + '"><a href="#">' + e.name + " " + e.displayName + "</a></li>") : i.append('<li data-value="' + e.id + '"><a href="#">' + e.name + "</a></li>")
            }) : i.append('<li class="disabled"><a href="#">' + o.get("NO_PORTS") + "</a></li>"), u(i, n)
        }, p.selectPort = function(t) {
            g(e("#px-sm-ports-menu"), t)
        }, p.selectModel = function(t) {
            g(e("#px-sm-models-menu"), t)
        }, p
    }), define("xmleditor", ["jquery"], function(e) {
        var t = e("#content_xml");
        t.attr("disabled", "true");
        var o = {};
        return o.getContent = function() {
            return t.text()
        }, o.setContent = function(e) {
            t.text(e)
        }, o
    }), define("jseditor", ["jquery"], function(e) {
        var t = e("#content_js");
        t.attr("disabled", "true");
        var o = {};
        return o.getContent = function() {
            return t.text()
        }, o.setContent = function(e) {
            t.text(e)
        }, o
    }), define("ui/toolbar", ["jquery", "signals"], function(e, t) {
        var o = "search-active gotoline-active";
        e("body").focusin(function() {
            e(document.activeElement).parents(".editor-toolbar").length || (e("#gotoline-input").val(""), e(".editor-toolbar").removeClass(o))
        }), e("#search-button").click(function() {
            e(".editor-toolbar").removeClass(o).addClass("search-active")
        }), e("#gotoline-button").click(function() {
            e("#gotoline-input").select(), e(".editor-toolbar").removeClass(o).addClass("gotoline-active")
        }), e("#gotoline-input").on("keydown", function(t) {
            return 13 == t.keyCode ? (e("#gotoline-action").click(), !1) : void 0
        }), e("#gotoline-action").click(function() {
            var t = e("#gotoline-input"),
                o = parseInt(t.val());
            isNaN(o) ? t.val(1) : n.gotoLineRequested.dispatch(o)
        });
        var n = {};
        return n.gotoLineRequested = new t, n
    }), define("backup", ["blocklylib", "./events", "storage", "./basiceditor", "./project", "./mode"], function(e, t, o, n, i, r) {
        var s = {};
        return s.saved = !1, s.save = function() {
            var t = e.mainWorkspace.options.languageTree;
            t = t.hasAttribute("edited") ? e.Xml.domToText(t) : "", o.set({
                xml: i.getXml(),
                basic: n.getContent(),
                mode: r.mode,
                toolbox: t
            }), s.saved = !0
        }, s.restore = function() {
            var t = ["xml", "basic", "mode", "toolbox"];
            o.get(t, function(t) {
                t.mode == r.CODE_MODE ? (r.switchToCode(), r.resetModeSwitch(r.CODE_MODE), n.setContent(t.basic)) : t.mode == r.BLOCKS_MODE && i.setFromXml(t.xml), null != t.toolbox && t.toolbox.length > 0 && e.updateToolbox(e.Xml.textToDom(t.toolbox))
            })
        }, s
    }), define("cloud/request", ["../utils", "../config"], function(e, t) {
        var o = {
            data: {},
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            error: function(e, t, o) {
                console.log("cloud/request JSON error " + t + "," + o)
            }
        };
        return function(n, i) {
            var r = {};
            e.mixin(r, o), e.mixin(r, i), t.isApp && (n = t.cloudUrl + n), $.ajax(n, r)
        }
    }), define("cloud/files", ["jquery", "signals", "./request", "../ui/modals", "../project", "../basiceditor", "../lang", "../picaxe/models", "../mode", "../utils", "../events"], function(e, t, o, n, i, r, s, a, l, c, u) {
        function g() {
            return l.isBlocks()
        }

        function p(e) {
            var t = new Date(e);
            return t.toLocaleDateString() + " " + t.toLocaleTimeString()
        }

        function h(e) {
            var t = e.mode == T,
                o = t ? e.blockly_xml : e.code;
            A.fileSelected.dispatch(o, f(e.platform_id)), E = e
        }

        function d(e) {
            var t = S.filter(function(t) {
                return t.name == e
            });
            return t.length ? t[0].id : null
        }

        function f(e) {
            var t = S.filter(function(t) {
                return t.id == e
            });
            return t.length ? t[0].name.toUpperCase() : null
        }

        function m() {
            return g() ? i.getBasic() : r.getContent()
        }

        function y(e, t, o) {
            var n = {
                project: {
                    code: m(),
                    name: e || E.name,
                    platform_id: d(a.value.toLowerCase()),
                    mode: g() ? T : k,
                    blockly_xml: i.getXml()
                }
            };
            return t && (n.commit = t), c.mixin(n.project, o), JSON.stringify(n)
        }

        function v() {
            o("/platforms.json", {
                complete: function(e) {
                    S = e.responseJSON
                }
            })
        }

        function _() {
            return g() ? i.getExampleXMLText() : "main:\n"
        }

        function b(e) {
            var t = "/projects/" + E.id + ".json";
            o(t, {
                data: y(null, "save"),
                type: "PUT",
                complete: function(n, i) {
                    o(t, {
                        complete: function(t, o) {
                            h(t.responseJSON), e && e()
                        }
                    })
                }
            })
        }

        function C(t) {
            var o;
            if (t.length > 0) {
                var i = "";
                t.forEach(function(e) {
                    e.mode == T == g() && (i += '<tr data-value="' + e.id + '">          <td><span class="glyphicon glyphicon-file"></span>' + e.name + "</td>          <td>" + p(e.updated_at) + "</td>          <td>" + (e.platform_id ? f(e.platform_id) : "") + "</td>        </tr>")
                });
                var r = '<table class="table table-hover file-listing">        <thead>          <tr>            <th>' + s.get("FILE_NAME") + "</th>            <th>" + s.get("FILE_UPDATED") + "</th>            <th>" + s.get("FILE_PLATFORM") + "</th>          </tr>        </thead>        <tbody>" + i + "</tbody>      </table>",
                    a = null;
                n.showMessageModal(s.get("FILE_OPEN_TITLE"), r, s.get("SELECT_ACTION"), s.get("CANCEL_ACTION"), function() {
                    if (!a) return !1;
                    var e = t.filter(function(e) {
                        return e.id == a
                    })[0];
                    h(e)
                }, function() {}), o = e(".file-listing tbody tr"), o.click(function(t) {
                    o.removeClass("success"), e(t.currentTarget).addClass("success"), a = e(t.currentTarget).data("value")
                })
            } else n.showMessageModal(s.get("FILE_OPEN_NO_FILES_TITLE"), s.get("FILE_OPEN_NO_FILES_MSG"), s.get("OK_ACTION"), null, function() {}, function() {})
        }
        var E, S, T = "blocklylib",
            k = "code",
            A = {};
        return A.saving = !1, A.fileSelected = new t, A.init = function() {
            v()
        }, A.reset = function() {
            E = null
        }, A.getFileName = function() {
            return (E ? E.name : s.get("FILE_NEW_FILENAME")) + ".axe"
        }, A.showCreateFileDialog = function() {
            var e = s.get("FILE_NEW_FILENAME");
            n.showPromptModal(s.get("FILE_NEW_TITLE"), e, s.get("OK_ACTION"), s.get("CANCEL_ACTION"), function(t) {
                t = t || e;
                var n = {},
                    i = _();
                g() ? n.blockly_xml = i : n.code = i;
                var r = y(t, null, n);
                o("/projects.json", {
                    data: r,
                    type: "POST",
                    complete: function(e) {
                        h(e.responseJSON), console.log("new file complete")
                    }
                })
            }, function() {})
        }, A.showSaveFileAsDialog = function() {
            var e = s.get("FILE_NEW_FILENAME");
            n.showPromptModal(s.get("FILE_SAVEAS_TITLE"), e, s.get("OK_ACTION"), s.get("CANCEL_ACTION"), function(t) {
                t = t || e, o("/projects.json", {
                    data: y(t),
                    type: "POST",
                    complete: function(e) {
                        h(e.responseJSON)
                    }
                })
            }, function() {})
        }, A.showOpenFileDialog = function() {
            o("/projects.json", {
                complete: function(e) {
                    C(e.responseJSON)
                }
            })
        }, A.saveFile = function() {
            b()
        }, A
    }), define("log", ["signals"], function(e) {
        var t = new e,
            o = function(e) {
                t.dispatch(e)
            };
        return o.logged = t, o
    }), define("block-editor/block-history", ["blocklylib", "../project", "../events", "../mode"], function(e, t, o, n) {
        function i(e) {
            this.id = ++c, this.state = e
        }

        function r() {
            if (!u) {
                var e = t.getXml(),
                    o = new i(e);
                p.push(o), h = [], p.length > 30 && p.shift(), s()
            }
        }

        function s() {
            o.blockHistoryChange.dispatch()
        }

        function a() {
            u || (p = [], h = [])
        }

        function l(e) {
            u = !0, t.setFromXml(e.state), s(), window.setTimeout(function() {
                u = !1
            }, 100)
        }
        var c = 0;
        o.newProject.add(function() {
            a()
        }), o.workspaceChange.add(function() {
            u || window.setTimeout(function() {
                r()
            }, 1.5 * e.BUMP_DELAY)
        });
        var u = !1,
            g = {},
            p = [],
            h = [];
        return a(), g.isUndoAvailable = function() {
            return p.length > 1
        }, g.isRedoAvailable = function() {
            return h.length > 0
        }, g.undo = function() {
            if (n.isBlocks() && !u) {
                if (!g.isUndoAvailable()) return void console.warn("block-history undo - no state available");
                var e = p.pop();
                h.push(e);
                var t = p[p.length - 1];
                l(t)
            }
        }, g.redo = function() {
            if (n.isBlocks() && !u) {
                if (!g.isRedoAvailable()) return void console.warn("block-history redo - no state available");
                var e = h.pop();
                p.push(e), l(e)
            }
        }, g
    }), define("block-editor/breakpoints", ["blocklylib", "signals"], function(e, t) {
        function o(e, t) {
            r.breakpointSet.dispatch(e, t)
        }

        function n(e) {
            e && e.breakpoint && e.removeBreakpoint()
        }
        var i = [],
            r = {};
        return r.breakpointSet = new t, r.add = function(t) {
            if (-1 == i.indexOf(t)) {
                var n = e.mainWorkspace.getBlockById(t);
                n && (n.addBreakpoint(), i.push(t), o(n.id, !0))
            }
        }, r.remove = function(t) {
            var r = e.mainWorkspace.getBlockById(t);
            n(r), o(t, !1);
            var s = i.indexOf(t); - 1 != s && i.splice(s, 1)
        }, r.removeAll = function() {
            e.mainWorkspace.getAllBlocks().forEach(n), i = []
        }, r
    }), define("picaxe/pin-data", [], function() {
        return {
            "08M2": ["V,C.5,C.4,C.3", "0V,C.0,C.1,C.2"],
            "14M2": ["+V,C.5,C.4,C.3,C.2,C.1,C.0", "0V,B.0,B.1,B.2,B.3,B.4,B.5"],
            "18M2": ["C.2,C.3,C.4,C.5,0V,B.0,B.1,B.2,B.3", "C.1,C.0,C.7,C.6,+V,B.7,B.6,B.5,B.4"],
            "20M2": ["+V,RXD,C.7,C.6,C.5,C.4,C.3,C.2,C.1,C.0", "0V,TXD,B.0,B.1,B.2,B.3,B.4,B.5,B.6,B.7"],
            "20X2": ["+V,RXD,C.7,C.6,C.5,C.4,C.3,C.2,C.1,C.0", "0V,A.0,B.0,B.1,B.2,B.3,B.4,B.5,B.6,B.7"],
            "28X1": ["RST,A.0,A.1,A.2,A.3,RXD,TXD,0V,RES,RES,C.0,C.1,C.2,C.3", "B.7,B.6,B.5,B.4,B.3,B.2,B.1,B.0,V+,0V,C.7,C.6,C.5,C.4"],
            "28X2": ["RST,A.0,A.1,A.2,A.3,RXD,A.4,0V,RES,RES,C.0,C.1,C.2,C.3", "B.7,B.6,B.5,B.4,B.3,B.2,B.1,B.0,V+,0V,C.7,C.6,C.5,C.4"],
            "40X1": ["RST,A.0,A.1,A.2,A.3,RXD,TXD,A.5,A.6,A.7,V+,0V,RES,RES,C.0,C.1,C.2,C.3,D.0,D.1", "B.7,B.6,B.5,B.4,B.3,B.2,B.1,B.0,V+,0V,D.7,D.6,D.5,D.4,C.7,C.6,C.5,C.4,D.3,D.2"],
            "40X2": ["RST,A.0,A.1,A.2,A.3,RXD,A.4,A.5,A.6,A.7,V+,0V,RES,RES,C.0,C.1,C.2,C.3,D.0,D.1", "B.7,B.6,B.5,B.4,B.3,B.2,B.1,B.0,V+,0V,D.7,D.6,D.5,D.4,C.7,C.6,C.5,C.4,D.3,D.2"]
        }
    }), define("simulation/knob", [], function() {
        return function(e, t, o, n) {
            var i = $('<input type="text" value="' + o + '" class="dial"/>');
            $(".diagram").append(i);
            var r = 60,
                s = i.knob({
                    min: 0,
                    max: 255,
                    angleOffset: 90,
                    angleArc: 315,
                    width: r,
                    height: r,
                    bgColor: "#737373",
                    fgColor: "#FFF009",
                    change: function(e) {
                        n(e)
                    }
                }),
                a = e.offset(),
                l = a.top - .25 * r,
                c = a.left - .25 * r;
            s.addClass("knob").offset({
                top: l,
                left: c
            }).mousedown(function(e) {
                e.stopPropagation()
            }).contextmenu(function(e) {
                e.preventDefault()
            });
            var u = $("<div />").text(t).addClass("knob-label").offset({
                top: l + 15,
                left: c + 46
            });
            $(".diagram").append(u), setTimeout(function() {
                var e = function() {
                    s.remove(), u.remove(), $("body").off("mousedown", e)
                };
                $("body").on("mousedown", e)
            }, 0)
        }
    }), define("simulation/memory", [], function() {
        function e(e) {
            this.size = e, this.data = new Uint8Array(e), this.pointer = 0
        }
        return e.prototype.read = function(e) {
            "undefined" != typeof e && (this.pointer = e % this.size);
            var t = this.data[this.pointer];
            return this.incrementPointer_(), t
        }, e.prototype.incrementPointer_ = function(e) {
            this.pointer = (this.pointer + 1) % this.size
        }, e.prototype.write = function(e, t) {
            var o;
            "undefined" == typeof t ? o = e : (this.pointer = e % this.size, o = t), o instanceof Array || (o = [o]);
            var n = this;
            o.forEach(function(e) {
                n.data[n.pointer] = e, n.incrementPointer_()
            })
        }, e
    }), define("simulation/byte", [], function() {
        function e(e) {
            this.value = e || 0
        }
        return e.prototype.isBitSet = function(e) {
            var t = 1 << e;
            return (this.value & t) == t
        }, e.prototype.setBit = function(e) {
            this.value = this.value | 1 << e
        }, e.prototype.clearBit = function(e) {
            this.value = this.value & ~(1 << e)
        }, e.prototype.invertBit = function(e) {
            this.value = this.value ^ 1 << e
        }, e.prototype.setByte = function(e) {
            this.value = e
        }, e.prototype.getByte = function() {
            return this.value
        }, e.prototype.clone = function() {
            return new e(this.value)
        }, e
    }), define("simulation/pins-state", ["signals", "./memory", "./byte", "../picaxe/models"], function(e, t, o, n) {
        function i(e) {
            return e = Math.floor(e), Math.max(Math.min(255, e), 0)
        }

        function r(e) {
            var t = {};
            for (var o in e) t[o] = e[o].clone();
            return t
        }

        function s(e) {
            e.A = new o, e.B = new o, e.C = new o, e.D = new o
        }

        function a(e, t) {
            var o = t.split(".");
            if (1 != o.length) {
                var n = o[0];
                return {
                    "byte": e[n],
                    offset: parseInt(o[1])
                }
            }
        }

        function l(e, t) {
            return {
                "byte": e[t]
            }
        }

        function c(e, t, o) {
            var n = a(e, t),
                i = n["byte"];
            o ? i.setBit(n.offset) : i.clearBit(n.offset)
        }

        function u(e, t, o) {
            var n = l(e, t),
                i = n["byte"];
            i.setByte(o)
        }
        var g = {},
            p = {},
            h = {},
            d = {},
            f = {};
        return f.dirSet = new e, f.bitSet = new e, f.inputBitSet = new e, f.reset = function() {
            f.disconnected = !1, f.i2c = new t(2048), f.eeprom = new t(256), s(p), h = r(d)
        }, f.setupModel = function(e) {
            s(d);
            for (var t in e) {
                var o = e[t];
                if (-1 == o.indexOf("In")) {
                    var n = a(d, t);
                    n["byte"].setBit(n.offset, !0)
                }
            }
            s(p), h = r(d)
        }, f.setAnalog = function(e, t) {
            var o = i(t);
            g[e] = o
        }, f.getAnalog = function(e) {
            var t = g[e];
            return "undefined" == typeof t && (t = 128), t
        }, f.setInputBoolean = function(e, t) {
            c(h, e, !1), c(p, e, t), f.dirSet.dispatch(e, !1), f.inputBitSet.dispatch(e, t)
        }, f.setOutputBoolean = function(e, t) {
            c(h, e, !0), c(p, e, t), f.dirSet.dispatch(e, !0), f.bitSet.dispatch(e, t)
        }, f.setDirsBoolean = function(e, t) {
            c(h, e, !0), f.dirSet.dispatch(e, !0)
        }, f.setPort = function(e, t) {
            var o = i(t),
                n = l(h, e),
                r = n["byte"],
                s = r.getByte();
            u(p, e, o & s), 128 & s && f.bitSet.dispatch(e + ".7", 128 & o), 64 & s && f.bitSet.dispatch(e + ".6", 64 & o), 32 & s && f.bitSet.dispatch(e + ".5", 32 & o), 16 & s && f.bitSet.dispatch(e + ".4", 16 & o), 8 & s && f.bitSet.dispatch(e + ".3", 8 & o), 4 & s && f.bitSet.dispatch(e + ".2", 4 & o), 2 & s && f.bitSet.dispatch(e + ".1", 2 & o), 1 & s && f.bitSet.dispatch(e + ".0", 1 & o)
        }, f.setPortInput = function(e, t) {
            var o, r, s = i(t),
                a = l(h, e),
                c = a["byte"],
                g = c.getByte(),
                d = 255 ^ g;
            "08M2" == n.value ? o = !1 : "28X2" == n.value && "A" == e ? (o = !1, r = !1) : (o = !0, r = !0), u(p, e, s & d), 128 & d && o && f.inputBitSet.dispatch(e + ".7", 128 & s), 64 & d && o && f.inputBitSet.dispatch(e + ".6", 64 & s), 32 & d && r && f.inputBitSet.dispatch(e + ".5", 32 & s), 16 & d && r && f.inputBitSet.dispatch(e + ".4", 16 & s), 8 & d && f.inputBitSet.dispatch(e + ".3", 8 & s), 4 & d && f.inputBitSet.dispatch(e + ".2", 4 & s), 2 & d && f.inputBitSet.dispatch(e + ".1", 2 & s), 1 & d && f.inputBitSet.dispatch(e + ".0", 1 & s)
        }, f.setDirs = function(e, t) {
            var o = i(t);
            u(h, e, o), f.dirSet.dispatch(e + ".7", 128 & o), f.dirSet.dispatch(e + ".6", 64 & o), f.dirSet.dispatch(e + ".5", 32 & o), f.dirSet.dispatch(e + ".4", 16 & o), f.dirSet.dispatch(e + ".3", 8 & o), f.dirSet.dispatch(e + ".2", 4 & o), f.dirSet.dispatch(e + ".1", 2 & o), f.dirSet.dispatch(e + ".0", 1 & o)
        }, f.getPortBoolean = function(e) {
            var t = a(p, e);
            if (t) {
                var o = t["byte"];
                return o.isBitSet(t.offset)
            }
        }, f.getPortByte = function(e) {
            var t = l(p, e),
                o = t["byte"];
            return o.getByte()
        }, f.getDirsBoolean = function(e) {
            var t = a(dirsBytes, e),
                o = t["byte"];
            return o.isBitSet(t.offset)
        }, f.getDirsByte = function(e) {
            var t = l(h, e),
                o = t["byte"];
            return o.getByte()
        }, f
    }), define("simulation/diagram", ["jquery", "signals", "data-utils", "../picaxe/pin-data", "./knob", "./pins-state", "../lang", "../settings/pin-names"], function(e, t, o, n, i, r, s, a) {
        function l(e) {
            return document.createElementNS("http://www.w3.org/2000/svg", e)
        }

        function c(t, o, n, i, r) {
            var s = e(l("rect")).attr({
                x: o,
                y: n,
                width: i,
                height: r
            });
            return t.append(s), s
        }

        function u(t, o, n, i) {
            var r = e(l("text")).attr({
                x: n,
                y: i
            }).text(o);
            return t.append(r), r
        }

        function g(t, o) {
            var n = e(l("g"));
            n.attr({
                "class": o
            }), t = t.map(function(e) {
                return e.get(0)
            }), e(t).wrapAll(n)
        }

        function p(t) {
            var o = 200,
                s = ".diagram svg",
                a = e(s);
            a.empty(), m = [], y = [];
            var l = t;
            switch (t.toUpperCase()) {
                case "08":
                case "08M":
                case "08M2LE":
                    l = "08M2";
                    break;
                case "14M":
                    l = "14M2";
                    break;
                case "18":
                case "18A":
                case "18M":
                case "18X":
                    l = "18M2";
                    break;
                case "20M":
                    l = "20M2";
                    break;
                case "28":
                case "28A":
                case "28X":
                    l = "28X1";
                    break;
                case "40X":
                    l = "40X1";
                    break;
                default:
                    l = t
            }
            var p = n[l];
            v = p[0].split(","), _ = p[1].split(",");
            var h = 20,
                d = 8,
                f = 100,
                b = v.length,
                C = 5,
                E = b * h + (b - 1) * d;
            a.attr("height", E + C + 2);
            var A = (o - f) / 2,
                B = (c(a, A, C, f, E).attr({
                    "class": "chip"
                }), 15);
            c(a, (o - B) / 2, C, B, 20).attr({
                "class": "chip-dent"
            });
            for (var x = A - h, w = A + f, I = 4, N = A + I, R = A + f - I, L = 14, O = [], D = [], M = 0; b > M; M++) {
                var P = C + M * (h + d),
                    F = c(a, x, P, h, h);
                m.push(F), O.push(u(a, v[M], N, P + L));
                var H = c(a, w, P, h, h);
                y.push(H), D.push(u(a, _[M], R, P + L))
            }
            g(m, S), g(y, T), g(O, "left-labels"), g(D, "right-labels");
            var U = u(a, t, o / 2, C);
            U.attr({
                "class": "chip-label",
                transform: "translate(7," + E / 2 + ") rotate(-90, " + o / 2 + ", " + C + ")"
            }), e("." + S + ",." + T).mousedown(function(t) {
                var o = e(t.target),
                    n = o.attr("class"),
                    s = o.find("title").text(),
                    a = o.index(),
                    l = o.parent().attr("class"),
                    c = l == S ? v : _,
                    u = c[a],
                    g = !1,
                    p = !1; - 1 == s.indexOf("Reset") && "RST" != u || 1 != t.which || (k.clickReset.dispatch(u), g = !0), -1 == s.indexOf("Serial In") && "RXD" != u || 1 != t.which || (k.clickRxd.dispatch(u), p = !0), n && -1 == n.indexOf("leg-in") || (-1 != s.indexOf("In") && 3 == t.which ? i(o, u, r.getAnalog(u), function(e) {
                    k.knobInput.dispatch(u, e)
                }) : 1 == t.which && k.clickInput.dispatch(u, g, p))
            })
        }

        function h(e) {
            var t, o = v.indexOf(e);
            return o > -1 ? t = m[o] : (o = _.indexOf(e), o > -1 && (t = y[o])), t
        }

        function d(e, t, n) {
            var i = e.attr("class"),
                r = i ? i.split(" ") : [],
                s = -1 != r.indexOf(t);
            n ? s || r.push(t) : s && o.deleteValue(r, t), e.attr({
                "class": r.join(" ")
            })
        }

        function f(e) {
            var t = C[e],
                o = a.get(e);
            o != e && (o = e + "[" + o + "]");
            var n = o + "\n" + t.join(","); - 1 != n.indexOf("ADC") && (n += E), b[e].text(n)
        }
        var m, y, v, _, b, C, E, S = "left-legs",
            T = "right-legs",
            k = {};
        return k.knobInput = new t, k.clickInput = new t, k.clickReset = new t, k.clickRxd = new t, k.visibleChanged = new t, k.reset = function() {
            E || (E = "\n" + s.get("ANALOG_PROMPT")), e("." + S + " rect,." + T + " rect").attr("class", null), b = {};
            for (var t in C) {
                var o = C[t],
                    n = h(t);
                n.empty();
                var i = e(l("title"));
                n.append(i), b[t] = i, f(t), -1 != o.indexOf("In") ? k.markPinAsInput(t) : -1 != o.indexOf("Out") && k.markPinAsOutput(t)
            }
        }, k.redrawTooltips = function() {
            if (b) {
                var e = Object.keys(C);
                e.forEach(function(e) {
                    f(e)
                })
            }
        }, k.markPinAsInput = function(e) {
            var t = h(e);
            if (!t) return !1;
            var o = t.find("title").text();
            return -1 == o.indexOf("In") ? !1 : (d(t, "leg-out-off", !1), d(t, "leg-out-on", !1), d(t, "leg-in-off", !0), !0)
        }, k.markPinAsOutput = function(e) {
            var t = h(e);
            if (!t) return !1;
            var o = t.find("title").text();
            return -1 == o.indexOf("Out") ? !1 : (d(t, "leg-in-off", !1), d(t, "leg-in-on", !1), d(t, "leg-out-off", !0), !0)
        }, k.show = function() {
            e("body").addClass("simulator"), k.visibleChanged.dispatch(!0)
        }, k.hide = function() {
            e("body").removeClass("simulator"), k.visibleChanged.dispatch(!1)
        }, k.setPinInput = function(e, t) {
            var o = h(e);
            o ? k.markPinAsInput(e) && d(o, "leg-in-on", t) : console.warn("diagram. setPinInput " + e + " not found")
        }, k.setPinOutput = function(e, t) {
            var o = h(e);
            o ? k.markPinAsOutput(e) && d(o, "leg-out-on", t) : console.warn("diagram. setPinInput " + e + " not found")
        }, k.setModelData = function(e) {
            C = e, k.reset()
        }, k.updateModel = function(e) {
            p(e)
        }, k
    }), define("blockly/audio", ["blocklylib", "data-utils", "../events"], function(e, t, o) {
        var n = [],
            i = {};
        return i.stop = function() {
            n.forEach(function(e) {
                e.pause()
            }), n = []
        }, i.pause = function() {}, i.resume = function() {}, i.setVolume = function(e) {}, i.setMasterVolume = function(t) {
            e.mainWorkspace.setMasterVolume(t), o.volumeSet.dispatch(t)
        }, i.playFile = function(o, i) {
            var r = "temp",
                s = e.mainWorkspace;
            s.loadAudio_([o], r);
            var a = s.playAudio(r, .5);
            a.addEventListener("ended", function() {
                delete s.SOUNDS_[r], t.deleteValue(n, a), i && i()
            }), n.push(a)
        }, i
    }), define("settings/settings", ["blocklylib", "jquery", "signals", "storage", "../config", "../basiceditor", "../simulation/diagram", "../blockly/audio"], function(e, t, o, n, i, r, s, a) {
        function l() {
            var e = [p.SETTING_FONT_SIZE, p.SETTING_INDENT_WITH_TABS, p.SETTING_LINE_WRAPPING, p.SETTING_TAB_SIZE, p.SETTING_LINE_NUMBERS, p.SETTING_SMART_INDENT, p.SETTING_SOUND, p.SETTING_GRID, p.SETTING_TRASH_AT_TOP, p.SETTING_SIMULATOR_VISIBLE, p.SETTING_ONLINE_COMPILE];
            n.get(e, function(t) {
                e.forEach(function(e) {
                    var o, n = t[e],
                        s = !(null === n || void 0 === n);
                    switch (e) {
                        case p.SETTING_FONT_SIZE:
                            o = s ? n : u;
                            break;
                        case p.SETTING_GRID:
                        case p.SETTING_SOUND:
                        case p.SETTING_ONLINE_COMPILE:
                            o = s ? n : !0;
                            break;
                        case p.SETTING_SIMULATOR_VISIBLE:
                            o = i.isPicaxeEditor ? !1 : s ? n : !0;
                            break;
                        case p.SETTING_TRASH_AT_TOP:
                        case p.SETTING_SMART_INDENT:
                            o = s ? n : !1;
                            break;
                        default:
                            o = s ? n : r.getOption(e)
                    }
                    p.set(e, o), p.use(e)
                }), p.restored.dispatch()
            })
        }

        function c() {
            n.set(g, function() {
                console.log("editor settings saved")
            })
        }
        var u = 16,
            g = {},
            p = {};
        return p.SETTING_FONT_SIZE = "fontsize", p.SETTING_INDENT_WITH_TABS = "indentWithTabs", p.SETTING_LINE_WRAPPING = "lineWrapping", p.SETTING_TAB_SIZE = "tabSize", p.SETTING_LINE_NUMBERS = "lineNumbers", p.SETTING_SMART_INDENT = "smartIndent", p.SETTING_SOUND = "sound", p.SETTING_GRID = "grid", p.SETTING_TRASH_AT_TOP = "trashAtTop", p.SETTING_SIMULATOR_VISIBLE = "simulatorVisible", p.SETTING_ONLINE_COMPILE = "onlineCompile", p.restored = new o, p.init = function() {
            l()
        }, p.getAll = function() {
            return g
        }, p.get = function(e) {
            return g[e]
        }, p.use = function(o) {
            var n = g[o];
            switch (o) {
                case p.SETTING_FONT_SIZE:
                    r.setFontSize(n);
                    break;
                case p.SETTING_INDENT_WITH_TABS:
                case p.SETTING_LINE_WRAPPING:
                case p.SETTING_TAB_SIZE:
                case p.SETTING_LINE_NUMBERS:
                case p.SETTING_SMART_INDENT:
                    r.setOption(o, n);
                    break;
                case p.SETTING_SOUND:
                    a.setMasterVolume(n ? 1 : 0);
                    break;
                case p.SETTING_TRASH_AT_TOP:
                    var i = e.mainWorkspace.trashcan;
                    i && (i.positionTopRight = n, i.position());
                    break;
                case p.SETTING_SIMULATOR_VISIBLE:
                    n ? s.show() : s.hide();
                    break;
                case p.SETTING_GRID:
                    t("body").toggleClass("no-grid", !n)
            }
        }, p.set = function(e, t) {
            g[e] = t
        }, p.save = function() {
            c()
        }, p
    }), define("ui/settings-field-data", [], function() {
        var e = {
                settings: [{
                    id: "fontsize",
                    number: !0,
                    min: 8,
                    max: 50
                }, {
                    id: "indentWithTabs",
                    check: !0
                }, {
                    id: "tabSize",
                    number: !0,
                    min: 1,
                    max: 10
                }, {
                    id: "lineWrapping",
                    check: !0
                }, {
                    id: "lineNumbers",
                    check: !0
                }]
            },
            t = {
                settings: [{
                    id: "grid",
                    check: !0
                }, {
                    id: "sound",
                    check: !0
                }, {
                    id: "trashAtTop",
                    check: !0
                }]
            };
        return {
            code: e,
            blocks: t
        }
    }), define("settings/settings-ui", ["jquery", "../lang", "./settings", "../ui/modals", "../ui/settings-field-data", "../ui/templates", "../ui/template-utils"], function(e, t, o, n, i, r, s) {
        function a(e, t) {
            var n = e.attr("id"),
                i = n.split("-")[1];
            "number" == e.attr("type") && (t = Math.max(Math.min(t, parseFloat(e.attr("max"))), e.attr("min")), e.val(t)), o.set(i, t), o.use(i, t)
        }

        function l(e) {
            e.id && (e.label = t.get("SETTINGS_" + e.id.toUpperCase()))
        }

        function c(t, o) {
            t.forEach(function(t) {
                e("#setting-" + t).prop("checked", o[t])
            })
        }

        function u(t, o) {
            t.forEach(function(t) {
                e("#setting-" + t).val(o[t])
            })
        }

        function g() {
            var t = e(".settings-form ");
            t.find("input[type=number]").change(function(t) {
                var o = e(t.target);
                a(o, o.val())
            }), t.find("input[type=checkbox]").change(function(t) {
                var o = e(t.target);
                a(o, o.prop("checked"))
            })
        }
        var p = {};
        return p.showCodeSettings = function() {
            var e = o.getAll(),
                a = s.make(i.code, r.settings, l);
            n.showMessageModal(t.get("CODE_SETTINGS_TITLE"), a, t.get("CLOSE_ACTION"), null, function() {
                o.save()
            }), g(), u([o.SETTING_FONT_SIZE, o.SETTING_TAB_SIZE], e), c([o.SETTING_INDENT_WITH_TABS, o.SETTING_LINE_WRAPPING, o.SETTING_LINE_NUMBERS, o.SETTING_SMART_INDENT], e)
        }, p.showBlocksSettings = function() {
            var e = o.getAll(),
                a = s.make(i.blocks, r.settings, l);
            n.showMessageModal(t.get("BLOCK_SETTINGS_TITLE"), a, t.get("CLOSE_ACTION"), null, function() {
                o.save()
            }), g(), c([o.SETTING_GRID, o.SETTING_SOUND, o.SETTING_TRASH_AT_TOP], e)
        }, p
    }), define("settings/pin-names-ui", ["jquery", "../lang", "./pin-names", "../ui/modals", "../ui/templates", "../ui/template-utils", "../blockly/io"], function(e, t, o, n, i, r, s) {
        var a = {};
        return a.show = function() {
            var a = s.getAllPins(),
                l = o.getAll(),
                c = a.map(function(e) {
                    return {
                        id: e,
                        value: l[e] || "",
                        placeholder: null == l[e] ? e : ""
                    }
                });
            c = {
                pinNames: c
            };
            var u = r.make(c, i.pinNameForm);
            ["pin-name-id-head", "pin-name-label-head"].forEach(function(e) {
                u = u.replace("{" + e + "}", t.get(e))
            }), n.showMessageModal(t.get("sm-pin-name-settings"), u, t.get("OK_ACTION"), t.get("CANCEL_ACTION"), function() {
                var t = e(".pin-name-form input").toArray(),
                    n = {};
                t.forEach(function(t) {
                    var i = e(t),
                        r = i.attr("id").split("-")[1],
                        s = i.val();
                    s = s.replace(/\"/g, ""), s = s.replace(/:/g, ""), s = s.replace(/\|/g, ""), s = s.trim(), s == r ? o.get(r) != r && o.deleteId(r) : /^[A-Da-d].[0-7]$/.test(s) || ("" == s ? o.get(r) != r && o.deleteId(r) : n[r] = s)
                }), o.updateAll(n)
            })
        }, a
    }), define("controller/picaxe-commands", ["../picaxe/models", "../ui/menubar", "../blockly/io"], function(e, t, o) {
        var n = {};
        return n.selectModel = function(n, i) {
            null !== n && (e.set(n), o.selectType(n), i && t.selectModel(n))
        }, n
    }), define("controller/../../lib/shared/filesystem", ["jquery", "signals", "FileSaver", "blob"], function(e, t, o, n) {
        function i(e) {
            var t = new window.FileReader;
            return t.onloadend = function(t) {
                var o = t.target;
                2 == o.readyState && (c.dispatch(e.name, o.result), a.val(""))
            }, t
        }

        function r(e, t, o) {
            l.addOnce(function(e) {
                t(e, i(e))
            }), c.addOnce(o), s(e)
        }

        function s(e) {
            a.attr("accept", "." + e), a.click()
        }
        var a = e('<input type="file" id="load" style="display:none" />');
        e("body").append(a), a.change(function(e) {
            var t = e.target.files;
            1 == t.length && l.dispatch(t[0])
        });
        var l = new t,
            c = new t,
            u = {};
        return u.loadText = function(e, t) {
            r(e, function(e, t) {
                t.readAsText(e)
            }, t)
        }, u.loadArrayBuffer = function(e, t) {
            r(e, function(e, t) {
                t.readAsArrayBuffer(e)
            }, t)
        }, u.getLocalFileAs = function(e, t, o) {
            var n = new XMLHttpRequest;
            n.open("GET", e, !0), n.responseType = t, n.onload = function(e) {
                o(n.response)
            }, n.send(null)
        }, u.saveBlob = function(e, t, n, i) {
            var r = function(e) {
                    n && n(e)
                },
                s = function() {
                    i && i()
                };
            if ("undefined" != typeof chrome && chrome.fileSystem) {
                var a = {};
                if (-1 != t.indexOf(".")) {
                    var l = t.split(".").pop();
                    a = {
                        extensions: [l]
                    }
                }
                chrome.fileSystem.chooseEntry({
                    type: "saveFile",
                    suggestedName: t,
                    accepts: [a]
                }, function(t) {
                    return null != chrome.runtime.lastError ? (console.warn("filesystem save:" + chrome.runtime.lastError.message), void s()) : t ? void t.createWriter(function(o) {
                        o.onwriteend = function(e) {
                            console.info("filesystem save. Write completed."), r(t.name)
                        }, o.onerror = function(e) {
                            console.error("filesystem save. Write failed: " + e.toString()), s()
                        }, o.write(e)
                    }, function() {
                        console.error("filesystem save. Couldn't create writer"), s()
                    }) : (console.warn("filesystem save. user didn't select a file"), void s())
                })
            } else o(e, t)
        }, u.save = function(e, t, o, i, r) {
            var s = new n([e], {
                type: t
            });
            u.saveBlob(s, o, i, r)
        }, u
    }), define("block-editor/block-clipboard", ["blocklylib", "../events", "../mode", "../ui/tabs"], function(e, t, o, n) {
        function i() {
            return o.isBlocks() && n.getActive() == n.BLOCKS_TAB && !e.WidgetDiv.isVisible()
        }

        function r(o) {
            i() && e.selected && e.selected.isDeletable() && e.selected.isMovable() && e.selected.workspace == e.mainWorkspace && (e.hideChaff(), e.copy_(e.selected), o && e.selected.dispose(!0, !0), t.clipboardSet.dispatch())
        }
        $(document).keydown(function(e) {
            (e.altKey || e.ctrlKey || e.metaKey) && (67 == e.keyCode ? s.copy() : 88 == e.keyCode ? s.cut() : 86 == e.keyCode && s.paste())
        });
        var s = {};
        return s.cut = function() {
            r(!0)
        }, s.copy = function() {
            r(!1)
        }, s.paste = function() {
            i() && e.clipboardXml_ && (e.hideChaff(), e.mainWorkspace.paste(e.clipboardXml_))
        }, s
    }), define("controller/blocks-edit-controller", ["blocklylib", "../events", "../ui/menubar", "../block-editor/block-history", "../block-editor/block-clipboard"], function(e, t, o, n, i) {
        function r() {
            o.enableItems(["bem-undo", "bem-redo", "bem-cut", "bem-copy", "bem-paste"], !1)
        }
        t.blockHistoryChange.add(function() {
            o.enableItems(["bem-undo"], n.isUndoAvailable()), o.enableItems(["bem-redo"], n.isRedoAvailable())
        }), t.selectionChange.add(function() {
            o.enableItems(["bem-cut", "bem-copy"], null !== e.selected)
        }), t.clipboardSet.add(function() {
            o.enableItems(["bem-paste"], !0)
        }), t.inited.add(r), t.newProject.add(r), o.itemClicked.add(function(e) {
            switch (e = e.replace("px-bem-", "")) {
                case "undo":
                    n.undo();
                    break;
                case "redo":
                    n.redo();
                    break;
                case "cut":
                    i.cut();
                    break;
                case "copy":
                    i.copy();
                    break;
                case "paste":
                    i.paste()
            }
        })
    }), define("controller/mode-controller", ["jquery", "../lang", "../ui/modals", "../ui/tabs", "../mode", "../basiceditor"], function(e, t, o, n, i, r) {
        function s(e) {
            e == i.CODE_MODE ? o.showMessageModal(t.get("WARNING"), t.get("SWITCH_TO_CODE_WARNING"), t.get("SWITCH_TO_CODE"), t.get("STAY_IN_BLOCKS"), function() {
                i.switchToCode(), n.removeLocks()
            }, function() {
                i.resetModeSwitch(i.BLOCKS_MODE)
            }) : r.dirty ? o.showMessageModal(t.get("WARNING"), t.get("SWITCH_TO_BLOCKS_WARNING"), t.get("SWITCH_TO_BLOCKS"), t.get("STAY_IN_CODE"), function() {
                i.switchToBlocks(), n.addLocks()
            }, function() {
                i.resetModeSwitch(i.CODE_MODE)
            }) : (i.switchToBlocks(), n.addLocks())
        }
        e("input:radio[name=edit-mode]").change(function() {
            var t = e(this).val();
            s(t)
        })
    }), define("controller/file-project-commands", ["../ui/modals", "../lang", "../ui/tabs", "../project", "../basiceditor", "../settings/pin-names"], function(e, t, o, n, i, r) {
        var s = {};
        return s.openProject = function() {
            function i() {
                n.load(!1), o.setActive(o.BLOCKS_TAB)
            }
            n.dirty ? e.showMessageModal(t.get("WARNING"), t.get("LOSE_CHANGES_WARNING"), t.get("OK_ACTION"), t.get("CANCEL_ACTION"), i, function() {}) : i()
        }, s.mergeProject = function() {
            n.load(function(o, n) {
                e.showMessageModal(t.get("MERGE_PROJECT"), t.get("MERGE_PROMPT"), t.get("MERGE_ACTION"), t.get("DONT_MERGE_ACTION"), o, n)
            }), o.setActive(o.BLOCKS_TAB)
        }, s.newProject = function() {
            function o() {
                n.discard(), i.setContent(n.getBasic()), r.reset()
            }
            n.dirty ? e.showMessageModal(t.get("WARNING"), t.get("LOSE_CHANGES_WARNING"), t.get("NEW_PROJECT_ACTION"), t.get("CANCEL_ACTION"), o, function() {}) : o()
        }, s.newFile = function() {
            function o() {
                i.discard()
            }
            i.dirty ? e.showMessageModal(t.get("WARNING"), t.get("LOSE_CHANGES_WARNING"), t.get("NEW_PROGRAM_ACTION"), t.get("CANCEL_ACTION"), o, function() {}) : o()
        }, s.openFile = function() {
            function o() {
                i.load()
            }
            i.dirty ? e.showMessageModal(t.get("WARNING"), t.get("LOSE_CHANGES_WARNING"), t.get("OPEN_ACTION"), t.get("CANCEL_ACTION"), o, function() {}) : o()
        }, s.saveProject = function() {
            n.save()
        }, s.saveFile = function() {
            i.save()
        }, s.editorCut = function() {
            i.cut()
        }, s.editorCopy = function() {
            i.copy()
        }, s.editorPaste = function() {
            i.paste()
        }, s.editorUndo = function() {
            i.undo();
        }, s.editorRedo = function() {
            i.redo()
        }, s.editorSelectAll = function() {
            i.selectAll()
        }, s
    });
var out$ = "undefined" != typeof exports && exports || this,
    doctype = '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';
if (out$.svgAsDataUri = function(e, t, o, n) {
        o = o || {}, o.scale = o.scale || 1;
        var i, r, s = document.createElement("div"),
            a = e.cloneNode(!0);
        if ("svg" == e.tagName) {
            var l = e.getBoundingClientRect();
            i = l.width || parseInt(a.getAttribute("width") || a.style.width || out$.getComputedStyle(e).getPropertyValue("width")), r = l.height || parseInt(a.getAttribute("height") || a.style.height || out$.getComputedStyle(e).getPropertyValue("height"))
        } else {
            var l = e.getBBox();
            i = l.x + l.width, r = l.y + l.height, a.setAttribute("transform", a.getAttribute("transform").replace(/translate\(.*?\)/, ""));
            var c = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            c.appendChild(a), a = c
        }
        a.setAttribute("version", "1.1");
        var u = (parseFloat(t.contentLeft) - parseFloat(t.viewLeft)).toString(),
            g = (parseFloat(t.contentTop) - parseFloat(t.viewTop)).toString(),
            p = parseFloat(t.contentWidth).toString(),
            h = parseFloat(t.contentHeight).toString();
        a.setAttribute("viewBox", u + " " + g + " " + p + " " + h), a.setAttribute("width", t.contentWidth), a.setAttribute("height", t.contentHeight), a.setAttribute("style", "background-color: #FFFFFF"), s.appendChild(a);
        var d = styles(e, o.selectorRemap),
            f = document.createElement("style");
        f.setAttribute("type", "text/css"), f.innerHTML = "<![CDATA[\n" + d + "\n]]>";
        var m = document.createElement("defs");
        m.appendChild(f), a.insertBefore(m, a.firstChild);
        for (var y = a.getElementsByClassName("blocklyScrollbarKnob"), v = 0; v < y.length; v++) y[v].setAttribute("visibility", "hidden");
        y = a.getElementsByClassName("blocklyScrollbarBackground");
        for (var v = 0; v < y.length; v++) y[v].setAttribute("visibility", "hidden");
        y = a.querySelectorAll("image");
        for (var v = 0; v < y.length; v++) y[v].setAttribute("visibility", "hidden");
        var c = doctype + s.innerHTML;
        c = c.replace(/&nbsp/g, "&#160"), c = c.replace(/sans-serif/g, 'Arial, Verdana, "Nimbus Sans L", Helvetica');
        var _ = "data:image/svg+xml;base64," + window.btoa(unescape(encodeURIComponent(c)));
        n && n(_)
    }, out$.saveSvgAsPng = function(e, t, o, n) {
        n = n || {}, out$.svgAsDataUri(e, o, n, function(e) {
            var o = new Image;
            o.src = e, o.onload = function() {
                var e = document.createElement("canvas");
                e.width = o.width, e.height = o.height;
                var n = e.getContext("2d");
                n.drawImage(o, 0, 0);
                var i = document.createElement("a");
                i.download = t, i.target = "_blank";
                var r = e.toDataURL("image/png");
                i.href = r, document.body.appendChild(i), i.addEventListener("click", function(e) {
                    i.parentNode.removeChild(i)
                }), i.click()
            }, o.onerror = function() {
                console.log("Error")
            }
        })
    }, out$.svgAsBlob = function(e, t, o, n) {
        o = o || {}, out$.svgAsDataUri(e, t, o, function(e) {
            var t = new Image;
            t.onload = function() {
                var e = document.createElement("canvas");
                e.width = t.width, e.height = t.height;
                var o = e.getContext("2d");
                o.drawImage(t, 0, 0);
                var i = e.toDataURL("image/png");
                n && n(dataURItoBlob(i))
            }, t.onerror = function() {
                console.log("Error")
            }, t.src = e
        })
    }, define("controller/../../lib/saveSvgAsPng", function() {}), define("controller/controller", ["blocklylib", "jquery", "language-selection", "../lang", "../picaxe/models", "../picaxe/debug/comms", "../picaxe/debug/ui", "../ui/tabs", "../mode", "../project", "../messages", "../ui/menubar", "../xmleditor", "../basiceditor", "../jseditor", "../config", "../ui/toolbar", "../backup", "../cloud/files", "../events", "../log", "../block-editor/block-history", "../block-editor/breakpoints", "../settings/settings-ui", "../settings/settings", "../settings/pin-names-ui", "../settings/pin-names", "./picaxe-commands", "../simulation/diagram", "../../lib/shared/filesystem", "../blockly/parse-events", "../blockly/callbacks", "../blockly/io", "./blocks-edit-controller", "./mode-controller", "./file-project-commands", "../../lib/saveSvgAsPng"], function(e, t, o, n, i, r, s, a, l, c, u, g, p, h, d, f, m, y, v, _, b, C, E, S, T, k, A, B, x, w, I, N, R) {
        function L() {
            h.setContent(c.getBasic())
        }

        function O() {
            d.setContent(c.getJS())
        }

        function D() {
            p.setContent(c.getXml(!0))
        }

        function M() {
            r.disconnect(), s.disable()
        }
        t(document).bind("keydown", "ctrl+z", function() {
            C.undo()
        }).bind("keydown", "ctrl+y", function() {
            C.redo()
        }), f.isApp || (t(window).on("beforeunload", function(e) {
            return v.saving || y.saved || !c.dirty && !h.dirty ? void 0 : n.get("UNLOAD_WARNING")
        }), o.beforeChange.add(function() {
            y.save()
        })), g.itemClicked.add(function(o) {
            function n(e) {
                t("body").toggleClass(s, e)
            }
            switch (u.clear(), o) {
                case "px-sm-pin-name-settings":
                    k.show();
                    break;
                case "px-sm-code-settings":
                    S.showCodeSettings();
                    break;
                case "px-sm-blocks-settings":
                    S.showBlocksSettings();
                    break;
                case "px-pm-export":
                    e.hideChaff();
                    var i = e.mainWorkspace.getMetrics(),
                        r = {
                            selectorRemap: function(e) {
                                return "body.no-grid rect.blocklyMainBackground" == e ? "rect.blocklyMainBackground" : e
                            }
                        },
                        s = "no-grid",
                        a = !t("body").hasClass(s);
                    a && n(!0), window.svgAsBlob(t("#content_blocks .blocklySvg")[0], i, r, function(e) {
                        w.saveBlob(e, "project.png"), a && n(!1)
                    })
            }
        }), t("#sim-download").click(function() {
            return u.clear(), _.requestBlocklyRedraw.dispatch(), chrome.serial ? void 0 : void _.rtsProgram.dispatch()
        }), g.checkboxSet.add(function(e, t) {
            switch (e) {
                case "sm-showsimulator":
                    t ? x.show() : x.hide()
            }
        }), x.visibleChanged.add(function(e) {
            T.set(T.SETTING_SIMULATOR_VISIBLE, e), T.save(), _.requestBlocklyRedraw.dispatch()
        }), g.modelSelected.add(function(e, t) {
            if (B.selectModel(e, t), l.isBlocks()) switch (a.getActive()) {
                case a.BASIC_TAB:
                    L();
                    break;
                case a.JS_TAB:
                    O();
                    break;
                case a.XML_TAB:
                    D()
            }
        }), g.menuShown.add(function() {
            e.hideChaff()
        }), _.pinNamesUpdated.add(function() {
            R.updateAllPinLists(), x.redrawTooltips()
        }), _.projectParsed.add(function() {
            var e = c.getSettings();
            e.picaxe && B.selectModel(e.picaxe, !0), e.pinNames && A.deserialise(e.pinNames)
        }), b.logged.add(function(e) {
            console.log(e)
        }), _.compilerError.add(function(e) {
            l.mode == l.BLOCKS_MODE && L(), u.showSyntaxError(e, function() {
                h.clearError()
            }), h.handleError(e)
        }), _.requestBlocklyRedraw.add(function() {
            e && e.mainWorkspace && e.fireUiEvent(e.mainWorkspace.getCanvas(), "resize")
        }), t("#tab-debug button.close").click(function(e) {
            M(), e.stopPropagation()
        }), a.tabSelected.add(function(t, o) {
            switch (o) {
                case a.XML_TAB:
                    break;
                case a.DEBUG_TAB:
                    return;
                case a.BLOCKS_TAB:
                    e.hideChaff(), u.clearBlockly();
                    break;
                case a.BASIC_TAB:
                    h.hasError() && h.clearError()
            }
            switch (t) {
                case a.BLOCKS_TAB:
                    u.clear(), _.requestBlocklyRedraw.dispatch();
                    break;
                case a.XML_TAB:
                    D();
                    break;
                case a.BASIC_TAB:
                    h.hasError() || L();
                    break;
                case a.JS_TAB:
                    O()
            }
        }), m.gotoLineRequested.add(function(e) {
            h.gotoLine(e)
        }), I.onEvent = u.showBlockly, N.onBlockAdded = function(e) {
            _.blockAdded.dispatch(e)
        }, N.onSetBreakpoint = function(e, t) {
            t ? E.add(e.id) : E.remove(e.id)
        }, N.onPinNames = function(e) {
            k.show()
        };
        var P = {};
        return P.init = function() {
            g.init();
            var o = i.getList();
            g.makeModelsMenu(o, o.indexOf(i.value)), y.restore();
            var n = e.mainWorkspace;
            n.addChangeListener(function() {
                0 === e.dragMode_ && _.workspaceChange.dispatch()
            }), e.bindEvent_(n.getCanvas(), "blocklySelectChange", null, function() {
                _.selectionChange.dispatch()
            }), t(".diagram svg, .blocklyWidgetDiv, .blocklyToolboxDiv").contextmenu(function(e) {
                e.preventDefault()
            })
        }, P
    }), define("blockly/context-menus", ["./callbacks", "./msg"], function(e, t) {
        function o(o) {
            var n = this,
                i = e.onSetBreakpoint,
                r = {
                    text: this.breakpoint ? t.get("CONTEXT_REMOVE_BREAKPOINT") : t.get("CONTEXT_ADD_BREAKPOINT"),
                    enabled: !0,
                    callback: this.breakpoint ? function() {
                        i(n, !1)
                    } : function() {
                        i(n, !0)
                    }
                };
            o.push(r)
        }

        function n(o) {
            var n = this,
                i = e.onRunWizard,
                r = {
                    text: t.get("CONTEXT_RUN_WIZARD"),
                    enabled: !0,
                    callback: function() {
                        i(n)
                    }
                };
            o.push(r)
        }

        function i(o) {
            var n = this,
                i = e.onOpenSnippet,
                r = {
                    text: t.get("CONTEXT_OPEN_SNIPPET"),
                    enabled: !0,
                    callback: function() {
                        i(n)
                    }
                };
            o.push(r)
        }

        function r(o) {
            var n = this,
                i = e.onPinNames,
                r = {
                    text: t.get("CONTEXT_PIN_NAMES"),
                    enabled: !0,
                    callback: function() {
                        i(n)
                    }
                };
            o.push(r)
        }
        var s = {};
        return s.customContextMenu = function(e) {
            r.apply(this, [e]), o.apply(this, [e])
        }, s.wizardContextMenu = function(e) {
            r.apply(this, [e]), o.apply(this, [e]);
            var t = "undefined" != typeof eoWebBrowser;
            t && n.apply(this, [e])
        }, s.snippetContextMenu = function(e) {
            r.apply(this, [e]), o.apply(this, [e]);
            var t = "undefined" != typeof eoWebBrowser;
            t && i.apply(this, [e])
        }, s
    }), define("blockly/colors", [], function() {
        var e = "#b18e35",
            t = "#d05f2d",
            o = "#5ba5a5",
            n = "#3f71b5",
            i = "#49a6d4",
            r = "#7c5385",
            s = "#009933",
            a = "#b32d5e",
            l = "#fffacd",
            c = {};
        return c.OUTPUT = o, c.INPUT = i, c.INPUT_PIN = i, c.DELAYS = e, c.LOOPS = e, c.VARIABLES = t, c.VARIABLES_IF = t, c.VALS = n, c.VALS_VAR = t, c.VALS_VAL = n, c.VALS_STR = a, c.PROCEDURES = r, c.TASK = e, c.TASK_START = s, c.TASK_STOP = e, c.SERIAL = e, c.SERIAL_INPUT = c.INPUT, c.SERIAL_OUTPUT = c.OUTPUT, c.ADVANCED = e, c.ADVANCED_RESET = e, c.ADVANCED_COMMENT = l, c.FLOW = "#80a55b", c.MOTORS = c.OUTPUT, c
    }), define("blockly/variables", ["blocklylib", "./parse-events", "./generators/picaxebasic"], function(e, t, o) {
        var n = {};
        return n.makeCmpList = function() {
            return [
                [">", ">"],
                ["<", "<"],
                [">=", ">="],
                ["<=", "<="],
                ["=", "="],
                ["<>", "<>"]
            ]
        }, n.getAll = function(e, t) {
            return t.map(function(t) {
                return e.getFieldValue(t)
            })
        }, n.rename = function(t, o, n, i) {
            o.forEach(function(o) {
                var r = t.getFieldValue(o);
                r && e.Names.equals(n, r) && t.setTitleValue(i, o)
            })
        }, n.validateVarName = function(e) {
            if (!/^[A-Za-z][_A-Za-z0-9_]*$/.test(e)) return t.onEvent(t.types.INFO, t.msgs.BAD_VAR_NAME), null;
            var n = e.toLowerCase();
            return /^[b,w,f][0-9]+$/.test(n) || 0 === n.indexOf("label") || -1 != ("," + o.KEYWORDS + ",").indexOf("," + n + ",") ? (t.onEvent(t.types.INFO, t.msgs.RESERVED_VAR_NAME, e), null) : e
        }, n.defaultVarName = "varA", n.defaultVarName2 = "varB", n.defaultVarName3 = "varC", n.defaultVarName4 = "varD", n
    }), define("blockly/blocks/advanced", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../variables", "../block-utils"], function(e, t, o, n, i, r, s, a) {
        var l = e.Blocks;
        l.picaxe_advanced_comment = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.ADVANCED_COMMENT), this.appendDummyInput().appendField(new e.FieldTextArea(t.get("ADVANCED_COMMENT")), "CODE"), this.setPreviousStatement(!1), this.setNextStatement(!1), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_basic = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("ADVANCED_BASIC")).appendField(new e.FieldTextArea(t.get("DEFAULT_BASIC")), "CODE"), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.snippetContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_custom = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(new e.FieldTextInput(t.get("ADVANCED_CUSTOM_TITLE")), "TITLE"), this.appendDummyInput().appendField(t.get("ADVANCED_BASIC")).appendField(new e.FieldTextArea(t.get("DEFAULT_BASIC")), "CODE"), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.snippetContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_slot = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/hash-slot"), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("ADVANCED_SLOT")).appendField(new e.FieldDropdown(i.makeSlotsList()), "SLOT"), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this), this.isInFlyout && 1 == a.getMaxSlot() && a.disable(this)
            },
            slots: "SLOT"
        }, l.picaxe_advanced_run = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/run"), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("ADVANCED_RUN")).appendField(new e.FieldDropdown(i.makeSlotsList()), "SLOT"), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this), this.isInFlyout && 1 == a.getMaxSlot() && a.disable(this)
            },
            slots: "SLOT"
        }, l.picaxe_advanced_reset = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/reset"), this.setColour(r.ADVANCED), this.setColour(r.ADVANCED_RESET), this.appendDummyInput().appendField(t.get("ADVANCED_RESET_ALL")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!1), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_read = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/read"), this.setColour(r.ADVANCED), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL, o.TYPES.VARCOMMA]).appendField(t.get("ADVANCED_READ")), this.appendValueInput("LOCATION").setCheck(o.TYPES.VAL).appendField(t.get("ADVANCED_FROM_EEPROM")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            }
        }, l.picaxe_advanced_write = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/write"), this.setColour(r.ADVANCED), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL, o.TYPES.VARCOMMA]).appendField(t.get("ADVANCED_WRITE")), this.appendValueInput("LOCATION").setCheck(o.TYPES.VAL).appendField(t.get("ADVANCED_TO_EEPROM")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            }
        }, l.picaxe_advanced_i2csetup = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/hi2csetup"), this.setColour(r.ADVANCED), this.appendValueInput("ADDRESS").setCheck(o.TYPES.VAL).appendField(t.get("ADVANCED_SET_I2C_ADDRESS_TO")), this.appendDummyInput().setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("FALSE"), "FAST").appendField("i2cfast").appendField(new e.FieldCheckbox("FALSE"), "WORD").appendField("i2cword"), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_i2csetup_device = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/hi2csetup"), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("ADVANCED_SET_I2C_ADDRESS_TO")).appendField(new e.FieldDropdown([
                    ["EEPROM", "EEPROM"],
                    ["DS1307", "DS1307"],
                    ["Nunchuck A", "Nunchuck A"],
                    ["Nunchuck B", "Nunchuck B"],
                    ["Lego NXT Color V2", "Lego NXT Color V2"],
                    ["Lego NXT Temp", "Lego NXT Temp"],
                    ["None", "None"]
                ]), "DEVICE"), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_i2cread = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/hi2cin"), this.setColour(r.ADVANCED), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL, o.TYPES.VARCOMMA]).appendField(t.get("ADVANCED_READ")), this.appendValueInput("LOCATION").setCheck(o.TYPES.VAL).appendField(t.get("ADVANCED_FROM_I2C")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_i2cwrite = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/hi2cout"), this.setColour(r.ADVANCED), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL, o.TYPES.VARCOMMA]).appendField(t.get("ADVANCED_WRITE")), this.appendValueInput("LOCATION").setCheck(o.TYPES.VAL).appendField(t.get("ADVANCED_TO_I2C")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_disconnect = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/disconnect"), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("ADVANCED_DISCONNECT")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_reconnect = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/reconnect"), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("ADVANCED_RECONNECT")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            }
        }, l.picaxe_advanced_setint = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/setint"), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("ADVANCED_INTERRUPT_WHEN")).appendField(new e.FieldDropdown(i.makeSetintPinList()), "PIN").appendField(t.get("ADVANCED_IS")).appendField(new e.FieldDropdown([
                    [t.get("INPUT_ON_STATE"), "1"],
                    [t.get("INPUT_OFF_STATE"), "0"]
                ]), "STATE"), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            setintPins: "PIN",
            onchange: function() {
                if (a.canSetWarning(this)) {
                    var o;
                    e.Procedures.getDefinition("interrupt", e.mainWorkspace) || (o = t.get("MISSING_INTERRUPT") + " interrupt"), this.setWarningText(o)
                }
            }
        }, l.picaxe_advanced_setintoff = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/setint"), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("ADVANCED_DISABLE_INTERRUPT")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            onchange: function() {
                if (a.canSetWarning(this)) {
                    var o;
                    e.Procedures.getDefinition("interrupt", e.mainWorkspace) || (o = t.get("MISSING_INTERRUPT") + " interrupt"), this.setWarningText(o)
                }
            }
        }
    }), define("blockly/blocks/control", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../block-utils"], function(e, t, o, n, i, r, s) {
        var a = e.Blocks;
        a.picaxe_control_start = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.TASK_START), this.appendDummyInput().appendField(t.get("CONTROL_START")), this.setNextStatement(!0), this.setTooltip(""), this.isInFlyout ? s.isStartDisabled() && s.disable(this) : s.addStart(this), this.customContextMenu = n.customContextMenu, s.newBlock(this)
            },
            dispose: function() {
                this.isInFlyout || s.removeStart(this), this.constructor.prototype.dispose.apply(this, arguments)
            }
        }
    }), define("blockly/blocks/custom", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../block-utils"], function(e, t, o, n, i, r, s) {
        var a = e.Blocks;
        a.picaxe_custom_outputon = {
            init: function() {
                this.setHelpUrl("http://www.example.com/command-details"), this.setColour("#ff6600"), this.appendDummyInput().appendField("custom turn output").appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN").appendField(new e.FieldDropdown([
                    ["on", "1"],
                    ["off", "0"]
                ]), "VALUE"), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, s.newBlock(this)
            },
            outputPins: "PIN"
        }
    }), define("blockly/blocks/delays", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../block-utils"], function(e, t, o, n, i, r, s) {
        var a = e.Blocks;
        a.picaxe_delays_pause = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/pause"), this.setColour(r.DELAYS), this.appendValueInput("TIME").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(t.get("DELAYS_MS")).appendField(t.get("DELAYS_PAUSE_FOR")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = s.checkInputs, s.newBlock(this)
            }
        }, a.picaxe_delays_sleep = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/sleep"), this.setColour(r.DELAYS), this.appendValueInput("TIME").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(t.get("DELAYS_S")).appendField(t.get("DELAYS_SLEEP_FOR")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = s.checkInputs, s.newBlock(this)
            }
        }, a.picaxe_delays_pauseus = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/pauseus"), this.setColour(r.DELAYS), this.appendValueInput("TIME").setCheck(o.TYPES.VAL).appendField(t.get("DELAYS_PAUSE_FOR")), this.appendDummyInput().appendField(t.get("DELAYS_US")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = s.checkInputs, s.newBlock(this)
            }
        }, a.picaxe_delays_until_pin = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/do"), this.setColour(r.DELAYS), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN").appendField(t.get("INPUT_IS")).appendField(new e.FieldDropdown([
                    [t.get("INPUT_ON_STATE"), "1"],
                    [t.get("INPUT_OFF_STATE"), "0"]
                ]), "STATE").appendField(t.get("DELAYS_UNTIL_INPUT")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, s.newBlock(this)
            },
            inputPins: "PIN"
        }
    }), define("blockly/blocks/flow", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../variables", "../block-utils"], function(e, t, o, n, i, r, s, a) {
        var l = e.Blocks,
            c = 1e3,
            u = 2e3;
        l.picaxe_flow_mutator_if = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/if"), this.setColour(r.VARIABLES_IF), this.appendValueInput("VAR10").setCheck(o.TYPES.VAL).appendField(t.get("VARIABLES_IF")), this.appendDummyInput("OPH0").appendField(new e.FieldDropdown(s.makeCmpList()), "OP0"), this.appendValueInput("VAR20").setCheck(o.TYPES.VAL), this.appendStatementInput("THEN0").appendField(t.get("VARIABLES_THEN")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setMutator(new e.Mutator(["controls_if_elseif", "controls_if_elseifand", "controls_if_else"])), this.setTooltip(""), this.elseifCount_ = 0, this.elseifandCount_ = 0, this.elseCount_ = 0, this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            mutationToDom: function() {
                if (!this.elseifCount_ && !this.elseifandCount_ && !this.elseCount_) return null;
                var e = document.createElement("mutation");
                return this.elseifCount_ && e.setAttribute("elseif", this.elseifCount_), this.elseifandCount_ && e.setAttribute("elseifand", this.elseifandCount_), this.elseCount_ && e.setAttribute("else", 1), e
            },
            domToMutation: function(n) {
                this.elseifCount_ = parseInt(n.getAttribute("elseif"), 10), this.elseifandCount_ = parseInt(n.getAttribute("elseifand"), 10), this.elseCount_ = parseInt(n.getAttribute("else"), 10);
                for (var i = 1; i <= this.elseifCount_; i++) this.appendValueInput("VAR1" + i).setCheck(o.TYPES.VAL).appendField(t.get("VARIABLES_ELSEIF")), this.appendDummyInput("OPH" + i).appendField(new e.FieldDropdown(s.makeCmpList()), "OP" + i), this.appendValueInput("VAR2" + i).setCheck(o.TYPES.VAL), this.appendStatementInput("THEN" + i).appendField(t.get("VARIABLES_THEN"));
                for (var i = 1; i <= this.elseifandCount_; i++) this.appendValueInput("VAR1" + (u + i)).setCheck(o.TYPES.VAL).appendField(t.get("VARIABLES_ELSEIF")), this.appendDummyInput("OPH" + (u + i)).appendField(new e.FieldDropdown(s.makeCmpList()), "OP" + (u + i)), this.appendValueInput("VAR2" + (u + i)).setCheck(o.TYPES.VAL), this.appendValueInput("VAR1" + (c + i)).setCheck(o.TYPES.VAL).appendField(new e.FieldDropdown([
                    [t.get("INPUT_AND"), "AND"],
                    [t.get("INPUT_OR"), "OR"]
                ]), "ANDOR" + i), this.appendDummyInput("OPH" + (c + i)).appendField(new e.FieldDropdown(s.makeCmpList()), "OP" + (c + i)), this.appendValueInput("VAR2" + (c + i)).setCheck(o.TYPES.VAL), this.appendStatementInput("THEN" + (c + i)).appendField(t.get("VARIABLES_THEN"));
                this.elseCount_ && this.appendStatementInput("ELSE").appendField(t.get("VARIABLES_ELSE"))
            },
            decompose: function(t) {
                e.bindEvent_(t.getCanvas(), "blocklyWorkspaceChange", this, function() {
                    console.log("mutator workspace changed"), console.log("this.elseCount_:" + this.elseCount_)
                });
                var o = e.Block.obtain(t, "controls_if_if");
                o.initSvg();
                for (var n = o.getInput("STACK").connection, i = 1; i <= this.elseifCount_; i++) {
                    var r = e.Block.obtain(t, "controls_if_elseif");
                    r.initSvg(), n.connect(r.previousConnection), n = r.nextConnection
                }
                for (var i = 1; i <= this.elseifandCount_; i++) {
                    var s = e.Block.obtain(t, "controls_if_elseifand");
                    s.initSvg(), n.connect(s.previousConnection), n = s.nextConnection
                }
                if (this.elseCount_) {
                    var a = e.Block.obtain(t, "controls_if_else");
                    a.initSvg(), n.connect(a.previousConnection)
                }
                return o
            },
            compose: function(n) {
                this.elseCount_ && this.removeInput("ELSE"), this.elseCount_ = 0;
                for (var i = this.elseifCount_; i > 0; i--) this.removeInput("VAR1" + i), this.removeInput("OPH" + i), this.removeInput("VAR2" + i), this.removeInput("THEN" + i);
                for (var i = this.elseifandCount_; i > 0; i--) this.removeInput("VAR1" + (u + i)), this.removeInput("OPH" + (u + i)), this.removeInput("VAR2" + (u + i)), this.removeInput("ANDOR" + i), this.removeInput("VAR1" + (c + i)), this.removeInput("OPH" + (c + i)), this.removeInput("VAR2" + (c + i)), this.removeInput("THEN" + (c + i));
                this.elseifCount_ = 0, this.elseifandCount_ = 0;
                for (var r = n.getInputTargetBlock("STACK"); r;) {
                    switch (r.type) {
                        case "controls_if_elseif":
                            this.elseifCount_++;
                            var a = this.appendValueInput("VAR1" + this.elseifCount_).setCheck(o.TYPES.VAL).appendField(t.get("VARIABLES_ELSEIF")),
                                l = (this.appendDummyInput("OPH" + this.elseifCount_).appendField(new e.FieldDropdown(s.makeCmpList()), "OP" + this.elseifCount_), this.appendValueInput("VAR2" + this.elseifCount_).setCheck(o.TYPES.VAL)),
                                g = this.appendStatementInput("THEN" + this.elseifCount_).appendField(t.get("VARIABLES_THEN"));
                            r.var1Connection_ && a.connection.connect(r.var1Connection_), r.opValue_ && this.setFieldValue(r.opValue_, "OP" + this.elseifCount_), r.var2Connection_ && l.connection.connect(r.var2Connection_), r.thenConnection_ && g.connection.connect(r.thenConnection_);
                            break;
                        case "controls_if_elseifand":
                            this.elseifandCount_++;
                            var p = this.appendValueInput("VAR1" + (u + this.elseifandCount_)).setCheck(o.TYPES.VAL).appendField(t.get("VARIABLES_ELSEIF")),
                                h = (this.appendDummyInput("OPH" + (u + this.elseifandCount_)).appendField(new e.FieldDropdown(s.makeCmpList()), "OP" + (u + this.elseifandCount_)), this.appendValueInput("VAR2" + (u + this.elseifandCount_)).setCheck(o.TYPES.VAL)),
                                d = this.appendValueInput("VAR1" + (c + this.elseifandCount_)).setCheck(o.TYPES.VAL).appendField(new e.FieldDropdown([
                                    [t.get("INPUT_AND"), "AND"],
                                    [t.get("INPUT_OR"), "OR"]
                                ]), "ANDOR" + this.elseifandCount_),
                                f = (this.appendDummyInput("OPH" + (c + this.elseifandCount_)).appendField(new e.FieldDropdown(s.makeCmpList()), "OP" + (c + this.elseifandCount_)), this.appendValueInput("VAR2" + (c + this.elseifandCount_)).setCheck(o.TYPES.VAL)),
                                g = this.appendStatementInput("THEN" + (c + this.elseifandCount_)).appendField(t.get("VARIABLES_THEN"));
                            r.var1ConnectionA_ && p.connection.connect(r.var1ConnectionA_), r.opValueA_ && this.setFieldValue(r.opValueA_, "OP" + (u + this.elseifandCount_)), r.var2ConnectionA_ && h.connection.connect(r.var2ConnectionA_), r.var1ConnectionAnd_ && d.connection.connect(r.var1ConnectionAnd_), r.opValueAnd_ && this.setFieldValue(r.opValueAnd_, "OP" + (c + this.elseifandCount_)), r.var2ConnectionAnd_ && f.connection.connect(r.var2ConnectionAnd_), r.thenConnection_ && g.connection.connect(r.thenConnection_);
                            break;
                        case "controls_if_else":
                            this.elseCount_++;
                            var m = this.appendStatementInput("ELSE");
                            m.appendField(t.get("VARIABLES_ELSE")), r.thenConnection_ && m.connection.connect(r.thenConnection_);
                            break;
                        default:
                            throw "Unknown block type."
                    }
                    r = r.nextConnection && r.nextConnection.targetBlock()
                }
            },
            saveConnections: function(e) {
                for (var t, o = e.getInputTargetBlock("STACK"), n = 1; o;) {
                    switch (o.type) {
                        case "controls_if_elseif":
                            var i = this.getInput("VAR1" + n),
                                r = this.getFieldValue("OP" + n),
                                s = this.getInput("VAR2" + n);
                            t = this.getInput("THEN" + n), o.opValue_ = r, o.var1Connection_ = i && i.connection.targetConnection, o.var2Connection_ = s && s.connection.targetConnection, o.thenConnection_ = t && t.connection.targetConnection, n++;
                            break;
                        case "controls_if_elseifand":
                            var a = this.getInput("VAR1" + (u + n)),
                                l = this.getFieldValue("OP" + (u + n)),
                                g = this.getInput("VAR2" + (u + n));
                            o.opValueA_ = l, o.var1ConnectionA_ = a && a.connection.targetConnection, o.var2ConnectionA_ = g && g.connection.targetConnection;
                            var p = this.getInput("VAR1" + (c + n)),
                                h = this.getFieldValue("OP" + (c + n)),
                                d = this.getInput("VAR2" + (c + n));
                            o.opValueAnd_ = h, o.var1ConnectionAnd_ = p && p.connection.targetConnection, o.var2ConnectionAnd_ = d && d.connection.targetConnection, t = this.getInput("THEN" + (c + n)), o.thenConnection_ = t && t.connection.targetConnection, n++;
                            break;
                        case "controls_if_else":
                            t = this.getInput("ELSE"), o.thenConnection_ = t && t.connection.targetConnection;
                            break;
                        default:
                            throw "Unknown block type."
                    }
                    o = o.nextConnection && o.nextConnection.targetBlock()
                }
            }
        }, l.controls_if_if = {
            init: function() {
                this.setColour(r.VARIABLES_IF), this.appendDummyInput().appendField(t.get("VARIABLES_IF")), this.appendStatementInput("STACK"), this.setTooltip(""), this.contextMenu = !1
            }
        }, l.controls_if_elseif = {
            init: function() {
                this.setColour(r.VARIABLES_IF), this.appendDummyInput().appendField(t.get("VARIABLES_ELSEIF")), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.contextMenu = !1
            }
        }, l.controls_if_elseifand = {
            init: function() {
                this.setColour(r.VARIABLES_IF), this.appendDummyInput().appendField(t.get("VARIABLES_ELSEIF") + " " + t.get("INPUT_AND") + "/" + t.get("INPUT_OR")), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.contextMenu = !1
            }
        }, l.controls_if_else = {
            init: function() {
                this.setColour(r.VARIABLES_IF), this.appendDummyInput().appendField(t.get("VARIABLES_ELSE")), this.setPreviousStatement(!0), this.setTooltip(""), this.contextMenu = !1
            }
        }
    }), define("blockly/field-variable", ["blocklylib", "../ui/modals"], function(e, t) {
        function o(t, n) {
            var r;
            r = n ? function(t) {
                var o = this;
                return i.call(o, t, function(i) {
                    var r;
                    r = void 0 === i ? t : null === i ? o.getValue() : i;
                    var s = n.call(o, r);
                    r = null === s ? e.Variables.defaultVarName : s, o.setValue(r)
                }), null
            } : i, o.superClass_.constructor.call(this, e.FieldVariable.dropdownCreate, r), this.setValue(t || "")
        }

        function n(o, n, i) {
            e.hideChaff(), t.showRenamePrompt(o, n, function(t) {
                t && (t = t.replace(/[\s\xa0]+/g, " ").replace(/^ | $/g, ""), t != e.Msg.RENAME_VARIABLE && t != e.Msg.NEW_VARIABLE || (t = null)), i(t)
            })
        }

        function i(t, o) {
            var i = this,
                r = this.sourceBlock_.workspace;
            if (t == e.Msg.RENAME_VARIABLE) {
                var s = this.getText();
                return n(e.Msg.RENAME_VARIABLE_TITLE.replace("%1", s), s, function(t) {
                    t && e.Variables.renameVariable(s, t, r), o ? o(t) : i.setValue(t)
                }), "..."
            }
            if (t == e.Msg.NEW_VARIABLE) {
                for (var a = "", l = e.Variables.allVariables(e.mainWorkspace), c = 65; 90 >= c; c++) {
                    var u = "var" + String.fromCharCode(c);
                    if (-1 == l.indexOf(u)) {
                        a = u;
                        break
                    }
                }
                return n(e.Msg.NEW_VARIABLE_TITLE, a, function(t) {
                    t && e.Variables.renameVariable(t, t, r), o ? o(t) : i.setValue(t)
                }), "..."
            }
            return o && o(t), t
        }
        return goog.inherits(o, e.FieldVariable), o
    }), define("blockly/blocks/input", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../variables", "../field-variable", "../block-utils"], function(e, t, o, n, i, r, s, a, l) {
        var c = e.Blocks;
        c.picaxe_input_ifpin = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/if-pin"), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_IF_INPUT")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN"), this.appendDummyInput().appendField(t.get("INPUT_IS")).appendField(new e.FieldDropdown([
                    [t.get("INPUT_ON_STATE"), "1"],
                    [t.get("INPUT_OFF_STATE"), "0"]
                ]), "STATE"), this.appendStatementInput("THEN").appendField(t.get("INPUT_THEN")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            },
            inputPins: "PIN"
        }, c.picaxe_input_ifpinelse = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/if-pin"), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_IF_INPUT")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN"), this.appendDummyInput().appendField(t.get("INPUT_IS")).appendField(new e.FieldDropdown([
                    [t.get("INPUT_ON_STATE"), "1"],
                    [t.get("INPUT_OFF_STATE"), "0"]
                ]), "STATE"), this.appendStatementInput("THEN").appendField(t.get("INPUT_THEN")), this.appendStatementInput("ELSE").appendField(t.get("INPUT_ELSE")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            },
            inputPins: "PIN"
        }, c.picaxe_input_readadc = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/readadc"), this.setColour(r.INPUT), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeADCPinList()), "PIN"), this.appendDummyInput().appendField(t.get("INPUT_READ_ANALOGUE")).appendField(new a(s.defaultVarName, s.validateVarName), "VAR").appendField(t.get("INPUT_TO")),
                    this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            adcPins: "PIN"
        }, c.picaxe_input_readtemp = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/readtemp"), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_READ_TEMPERATURE")).appendField(new e.FieldDropdown(i.makeReadTempPinList()), "PIN"), this.appendDummyInput().appendField(t.get("INPUT_TO")).appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            readTempPins: "PIN"
        }, c.picaxe_input_ultra = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/ultra"), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_READ_ULTRASONIC")).appendField(new e.FieldDropdown(i.makeInputAndOutputPinList()), "PIN").appendField(t.get("INPUT_TO")).appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            inputAndOutputPins: "PIN"
        }, c.picaxe_input_ultra2 = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/ultra"), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_READ_ULTRASONIC")).appendField("(" + t.get("INPUT_2_PINS") + ")"), this.appendDummyInput().appendField(t.get("INPUT_TRIGGER")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN").appendField(t.get("INPUT_ECHO")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN2").appendField(t.get("INPUT_TO")).appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            outputPins: "PIN",
            inputPins: "PIN2",
            onchange: function() {
                if (l.canSetWarning(this)) {
                    var e;
                    this.getFieldValue("PIN") == this.getFieldValue("PIN2") && (e = t.get("WARNING_SAME_PIN")), this.setWarningText(e)
                }
            }
        }, c.picaxe_input_irin = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/irin"), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_READ_INFRARED")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN").appendField(t.get("INPUT_TO")).appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.appendDummyInput().setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("TRUE"), "TV").appendField(t.get("INPUT_READ_TV")), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            inputPins: "PIN"
        }, c.picaxe_input_irin_timeout = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/irin"), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_READ_INFRARED")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN").appendField(t.get("INPUT_TO")).appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.appendDummyInput().setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("TRUE"), "TV").appendField(t.get("INPUT_READ_TV")), this.appendValueInput("TIMEOUT").setCheck(o.TYPES.VAL).setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("FALSE"), "USE_TIMEOUT").appendField(t.get("INPUT_TIMEOUT")), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            inputPins: "PIN"
        }, c.picaxe_input_irintv = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/irin"), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_READ_TV_INFRARED")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN"), this.appendDummyInput().appendField(t.get("INPUT_TO")).appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            inputPins: "PIN"
        }, c.picaxe_input_inputPin = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_INPUT")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN"), this.setInputsInline(!0), this.setOutput(!0, o.TYPES.EXP), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            inputPins: "PIN"
        }, c.picaxe_input_inputPort = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.INPUT), this.appendDummyInput().appendField("pins").appendField(new e.FieldDropdown(i.makeInputPortList()), "PIN"), this.setInputsInline(!0), this.setOutput(!0, o.TYPES.EXP), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            ports: "PIN"
        }
    }), define("blockly/blocks/io", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../block-utils"], function(e, t, o, n, i, r, s) {
        var a = e.Blocks;
        a.picaxe_io_inputval = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.INPUT), this.appendDummyInput().appendField(t.get("INPUT_INPUT")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN"), this.setInputsInline(!0), this.setOutput(!0, o.TYPES.VAL), this.setTooltip("")
            },
            inputPins: "PIN"
        }
    }), define("blockly/blocks/loops", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../variables", "../field-variable", "../block-utils"], function(e, t, o, n, i, r, s, a, l) {
        var c = e.Blocks;
        c.picaxe_loops_forever = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/do"), this.setColour(r.LOOPS), this.appendDummyInput().appendField(t.get("LOOPS_FOREVER")), this.appendStatementInput("NAME").appendField(t.get("LOOPS_DO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            }
        }, c.picaxe_loops_repeat = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/do"), this.setColour(r.LOOPS), this.appendValueInput("VAR1").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(new e.FieldDropdown(s.makeCmpList()), "OP"), this.appendValueInput("VAR2").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(t.get("LOOPS_UNTIL")), this.appendStatementInput("REPEAT").appendField(t.get("LOOPS_REPEAT")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            }
        }, c.picaxe_loops_repeat_pin = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/do"), this.setColour(r.LOOPS), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN").appendField(t.get("INPUT_IS")).appendField(new e.FieldDropdown([
                    [t.get("INPUT_ON_STATE"), "1"],
                    [t.get("INPUT_OFF_STATE"), "0"]
                ]), "STATE").appendField(t.get("LOOPS_UNTIL_INPUT")), this.appendStatementInput("REPEAT").appendField(t.get("LOOPS_REPEAT")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            inputPins: "PIN"
        }, c.picaxe_loops_while = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/do"), this.setColour(r.LOOPS), this.appendValueInput("VAR1").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(new e.FieldDropdown(s.makeCmpList()), "OP"), this.appendValueInput("VAR2").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(t.get("LOOPS_WHILE")), this.appendStatementInput("DO").appendField(t.get("LOOPS_DO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            }
        }, c.picaxe_loops_while_pin = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/do"), this.setColour(r.LOOPS), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN").appendField(t.get("INPUT_IS")).appendField(new e.FieldDropdown([
                    [t.get("INPUT_ON_STATE"), "1"],
                    [t.get("INPUT_OFF_STATE"), "0"]
                ]), "STATE").appendField(t.get("LOOPS_WHILE_INPUT")), this.appendStatementInput("DO").appendField(t.get("LOOPS_DO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            inputPins: "PIN"
        }, c.picaxe_loops_count = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/for"), this.setColour(r.LOOPS), this.appendDummyInput().appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.appendValueInput("FROM").setCheck(o.TYPES.VAL).appendField(t.get("LOOPS_WO")), this.appendValueInput("TO").setCheck(o.TYPES.VAL).appendField(t.get("LOOPS_FROM")), this.appendValueInput("STEP").setCheck(o.TYPES.VAL).appendField(t.get("LOOPS_TO")), this.appendDummyInput().appendField(t.get("LOOPS_BY")).appendField(t.get("LOOPS_COUNT_WITH")), this.appendStatementInput("DO").appendField(t.get("LOOPS_DO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            }
        }, c.picaxe_loops_countdown = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/for"), this.setColour(r.LOOPS), this.appendDummyInput().appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.appendValueInput("FROM").setCheck(o.TYPES.VAL).appendField(t.get("LOOPS_WO")), this.appendValueInput("TO").setCheck(o.TYPES.VAL).appendField(t.get("LOOPS_FROM")), this.appendValueInput("STEP").setCheck(o.TYPES.VAL).appendField(t.get("LOOPS_TO")), this.appendDummyInput().appendField(t.get("LOOPS_BY")).appendField(t.get("LOOPS_COUNT_DOWN_WITH")), this.appendStatementInput("DO").appendField(t.get("LOOPS_DO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            }
        }
    }), define("blockly/blocks/motors", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../block-utils"], function(e, t, o, n, i, r, s) {
        var a = e.Blocks,
            l = "bot120";
        a.picaxe_motors_BOT120 = {
            init: function() {
                function i(t) {
                    return new e.FieldImage("assets/" + t + ".png", 16, 16, "*")
                }

                function a(t) {
                    "FALSE" != t && c.inputList.forEach(function(t) {
                        t.fieldRow.forEach(function(t) {
                            t instanceof e.FieldCheckbox && t != c && t.setValue("FALSE")
                        })
                    })
                }

                function l(t) {
                    return new e.FieldCheckbox(t ? "TRUE" : "FALSE", a)
                }
                var c = this;
                this.setHelpUrl(o.HELP_URL + "/../commands/stop"), this.setColour(r.MOTORS), this.appendDummyInput().appendField(i("fl")).appendField(l(), "FL").appendField(l(), "F").appendField(l(), "FR").appendField(i("fr")).appendField("BOT120 Microbot"), this.appendDummyInput().appendField(i("l")).appendField(l(), "L").appendField(l(!0), "STOP").appendField(l(), "R").appendField(i("r")), this.appendDummyInput().appendField(i("bl")).appendField(l(), "BL").appendField(l(), "B").appendField(l(), "BR").appendField(i("br")).appendField(t.get("MOTORS_SET_SPEED")).appendField(new e.FieldDropdown([
                    [t.get("MOTORS_NO_CHANGE"), "	; No speed change;"],
                    [t.get("MOTORS_FAST"), "	input C.5 ; fast"],
                    [t.get("MOTORS_SLOW"), "	output C.5 ; slow"]
                ]), "SPEED"), this.setTooltip(""), this.setPreviousStatement(!0), this.setNextStatement(!0), this.padIcons = !0, this.customContextMenu = n.customContextMenu, s.newBlock(this)
            }
        }, a.picaxe_motors_AXE120 = {
            init: function() {
                function i(t) {
                    return new e.FieldImage("assets/" + t + ".png", 16, 16, "*")
                }

                function a(t) {
                    "FALSE" != t && c.inputList.forEach(function(t) {
                        t.fieldRow.forEach(function(t) {
                            t instanceof e.FieldCheckbox && t != c && t.setValue("FALSE")
                        })
                    })
                }

                function l(t) {
                    return new e.FieldCheckbox(t ? "TRUE" : "FALSE", a)
                }
                var c = this;
                this.setHelpUrl(o.HELP_URL + "/../commands/stop"), this.setColour(r.MOTORS), this.appendDummyInput().appendField(i("fl")).appendField(l(), "FL").appendField(l(), "F").appendField(l(), "FR").appendField(i("fr")).appendField("AXE120"), this.appendValueInput("LEFT").setCheck(o.TYPES.VAL).appendField(i("l")).appendField(l(), "L").appendField(l(!0), "STOP").appendField(l(), "R").appendField(i("r")).appendField(t.get("MOTORS_LEFT")), this.appendValueInput("RIGHT").setCheck(o.TYPES.VAL).appendField(i("bl")).appendField(l(), "BL").appendField(l(), "B").appendField(l(), "BR").appendField(i("br")).appendField(t.get("MOTORS_RIGHT")), this.setTooltip(""), this.setPreviousStatement(!0), this.setNextStatement(!0), this.padIcons = !0, this.customContextMenu = n.customContextMenu, s.newBlock(this)
            }
        }, a.picaxe_motors_KMR01 = {
            init: function() {
                function i(t) {
                    return new e.FieldImage("assets/" + t + ".png", 16, 16, "*")
                }

                function a(t) {
                    "FALSE" != t && c.inputList.forEach(function(t) {
                        t.fieldRow.forEach(function(t) {
                            t instanceof e.FieldCheckbox && t != c && t.setValue("FALSE")
                        })
                    })
                }

                function l(t) {
                    return new e.FieldCheckbox(t ? "TRUE" : "FALSE", a)
                }
                var c = this;
                this.setHelpUrl(o.HELP_URL + "/../commands/stop"), this.setColour(r.MOTORS), this.appendDummyInput().appendField(i("fl")).appendField(l(), "FL").appendField(l(), "F").appendField(l(), "FR").appendField(i("fr")).appendField("K-MR-01"), this.appendValueInput("LEFT").setCheck(o.TYPES.VAL).appendField(i("l")).appendField(l(), "L").appendField(l(!0), "STOP").appendField(l(), "R").appendField(i("r")).appendField(t.get("MOTORS_LEFT")), this.appendValueInput("RIGHT").setCheck(o.TYPES.VAL).appendField(i("bl")).appendField(l(), "BL").appendField(l(), "B").appendField(l(), "BR").appendField(i("br")).appendField(t.get("MOTORS_RIGHT")), this.setTooltip(""), this.setPreviousStatement(!0), this.setNextStatement(!0), this.padIcons = !0, this.customContextMenu = n.customContextMenu, s.newBlock(this)
            }
        }, a.picaxe_motors_CHI035 = {
            init: function() {
                function t(t) {
                    return new e.FieldImage("assets/" + t + ".png", 16, 16, "*")
                }

                function i(t) {
                    "FALSE" != t && l.inputList.forEach(function(t) {
                        t.fieldRow.forEach(function(t) {
                            t instanceof e.FieldCheckbox && t != l && t.setValue("FALSE")
                        })
                    })
                }

                function a(t) {
                    return new e.FieldCheckbox(t ? "TRUE" : "FALSE", i)
                }
                var l = this;
                this.setHelpUrl(o.HELP_URL + "/../commands/stop"), this.setColour(r.MOTORS), this.appendDummyInput().appendField(t("fl")).appendField(a(), "FL").appendField(a(), "F").appendField(a(), "FR").appendField(t("fr")).appendField("CHI035"), this.appendDummyInput().appendField(t("l")).appendField(a(), "L").appendField(a(!0), "STOP").appendField(a(), "R").appendField(t("r")).appendField("AXE020"), this.appendDummyInput().appendField(t("bl")).appendField(a(), "BL").appendField(a(), "B").appendField(a(), "BR").appendField(t("br")), this.setTooltip(""), this.setPreviousStatement(!0), this.setNextStatement(!0), this.padIcons = !0, this.customContextMenu = n.customContextMenu, s.newBlock(this)
            }
        }, a.picaxe_motors_AXE023 = {
            init: function() {
                function t(t) {
                    return new e.FieldImage("assets/" + t + ".png", 16, 16, "*")
                }

                function i(t) {
                    "FALSE" != t && l.inputList.forEach(function(t) {
                        t.fieldRow.forEach(function(t) {
                            t instanceof e.FieldCheckbox && t != l && t.setValue("FALSE")
                        })
                    })
                }

                function a(t) {
                    return new e.FieldCheckbox(t ? "TRUE" : "FALSE", i)
                }
                var l = this;
                this.setHelpUrl(o.HELP_URL + "/../commands/stop"), this.setColour(r.MOTORS), this.appendDummyInput().appendField(t("fl")).appendField(a(), "FL").appendField(a(), "F").appendField(a(), "FR").appendField(t("fr")).appendField("AXE023"), this.appendDummyInput().appendField(t("l")).appendField(a(), "L").appendField(a(!0), "STOP").appendField(a(), "R").appendField(t("r")), this.appendDummyInput().appendField(t("bl")).appendField(a(), "BL").appendField(a(), "B").appendField(a(), "BR").appendField(t("br")), this.setTooltip(""), this.setPreviousStatement(!0), this.setNextStatement(!0), this.padIcons = !0, this.customContextMenu = n.customContextMenu, s.newBlock(this)
            }
        }, a.picaxe_motors_servo = {
            init: function() {
                function i(t) {
                    return new e.FieldImage("assets/" + t + ".png", 16, 16, "*")
                }

                function a(t) {
                    "FALSE" != t && c.inputList.forEach(function(t) {
                        t.fieldRow.forEach(function(t) {
                            t instanceof e.FieldCheckbox && t != c && t.setValue("FALSE")
                        })
                    })
                }

                function l(t) {
                    return new e.FieldCheckbox(t ? "TRUE" : "FALSE", a)
                }
                var c = this;
                this.setHelpUrl(o.HELP_URL + "/../commands/stop"), this.setColour(r.MOTORS), this.appendDummyInput().appendField(i("fl")).appendField(l(), "FL").appendField(l(), "F").appendField(l(), "FR").appendField(i("fr")).appendField(t.get("MOTORS_SERVO_MOTOR")), this.appendDummyInput().appendField(i("l")).appendField(l(), "L").appendField(l(!0), "STOP").appendField(l(), "R").appendField(i("r")), this.appendDummyInput().appendField(i("bl")).appendField(l(), "BL").appendField(l(), "B").appendField(l(), "BR").appendField(i("br")), this.setTooltip(""), this.setPreviousStatement(!0), this.setNextStatement(!0), this.padIcons = !0, this.customContextMenu = n.customContextMenu, s.newBlock(this)
            },
            onchange: function() {
                if (s.canSetWarning(this)) {
                    var o, n = e.mainWorkspace.getAllBlocks().some(function(e) {
                        return "picaxe_motors_servo_setup" == e.type
                    });
                    n || (o = t.get("MISSING_SERVO_SETUP")), this.setWarningText(o)
                }
            }
        }, a.picaxe_motors_generic = {
            init: function() {
                function i(t) {
                    return new e.FieldImage("assets/" + t + ".png", 16, 16, "*", function() {
                        u.setFieldValue(t.toUpperCase(), "COMMAND_MOTORS")
                    })
                }

                function a(e) {
                    e ? (u.appendValueInput("LEFT").setAlign(Blockly.ALIGN_RIGHT).setCheck(o.TYPES.VAL).appendField(t.get("MOTORS_LEFT")), u.appendValueInput("RIGHT").setAlign(Blockly.ALIGN_RIGHT).setCheck(o.TYPES.VAL).appendField(t.get("MOTORS_RIGHT")), g = !0) : (u.removeInput("LEFT"), u.removeInput("RIGHT"), g = !1)
                }

                function c(o) {
                    o ? (u.appendDummyInput("SPEED").appendField(t.get("MOTORS_SET_SPEED")).appendField(new e.FieldDropdown([
                        [t.get("MOTORS_NO_CHANGE"), "	; No speed change;"],
                        [t.get("MOTORS_FAST"), "	input C.5 ; fast"],
                        [t.get("MOTORS_SLOW"), "	output C.5 ; slow"]
                    ]), "SPEED"), p = !0) : (u.removeInput("SPEED"), p = !1)
                }
                var u = this,
                    g = !1,
                    p = !1;
                this.setHelpUrl(o.HELP_URL + "/../commands/stop"), this.setColour(r.MOTORS), this.appendDummyInput().appendField(i("fl")).appendField(i("f")).appendField(i("fr")).appendField(new e.FieldDropdown([
                    ["AXE020", "axe020"],
                    ["AXE023", "axe023"],
                    ["AXE120", "axe120"],
                    ["AXE120+" + t.get("MOTORS_GENERIC_SPEED"), "axe120s"],
                    ["BOT120 Microbot", "bot120"],
                    ["BOT120 Microbot+" + t.get("MOTORS_GENERIC_SPEED"), "bot120s"],
                    ["CHI035", "chi035"],
                    [t.get("MOTORS_KMR01"), "kmr01"],
                    [t.get("MOTORS_KMR01") + "+" + t.get("MOTORS_GENERIC_SPEED"), "kmr01s"],
                    [t.get("MOTORS_SERVO_MOTOR"), "servo"]
                ]), "MOTORS_TYPE"), this.appendDummyInput().appendField(i("l")).appendField(i("stop")).appendField(i("r")), this.appendDummyInput("dropdown").appendField(i("bl")).appendField(i("b")).appendField(i("br")).appendField(new e.FieldDropdown([
                    [t.get("MOTORS_DIRECTION_FORWARD_LEFT"), "FL"],
                    [t.get("MOTORS_DIRECTION_FORWARD"), "F"],
                    [t.get("MOTORS_DIRECTION_FORWARD_RIGHT"), "FR"],
                    [t.get("MOTORS_DIRECTION_LEFT"), "L"],
                    [t.get("MOTORS_DIRECTION_STOP"), "STOP"],
                    [t.get("MOTORS_DIRECTION_RIGHT"), "R"],
                    [t.get("MOTORS_DIRECTION_BACKWARD_LEFT"), "BL"],
                    [t.get("MOTORS_DIRECTION_BACKWARD"), "B"],
                    [t.get("MOTORS_DIRECTION_BACKWARD_RIGHT"), "BR"]
                ]), "COMMAND_MOTORS"), a(!0), this.onchange = function() {
                    if (l = this.getFieldValue("MOTORS_TYPE"), "axe120s" == l || "kmr01s" == l ? (p && c(!1), g || a(!0)) : "bot120s" == l ? (g && a(!1), p || c(!0)) : (g && a(!1), p && c(!1)), "servo" == l) {
                        if (!s.canSetWarning(this)) return;
                        var o, n = e.mainWorkspace.getAllBlocks().some(function(e) {
                            return "picaxe_motors_servo_setup" == e.type
                        });
                        n || (o = t.get("MISSING_SERVO_SETUP")), this.setWarningText(o)
                    } else this.setWarningText(null)
                }, this.isInFlyout && this.setFieldValue(l, "MOTORS_TYPE"), this.setTooltip(""), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.padIcons = !0, this.customContextMenu = n.customContextMenu, s.newBlock(this)
            }
        }, a.picaxe_motors_servo_setup = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/servo"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("MOTORS_SERVO_A")).appendField(new e.FieldDropdown(i.makeServoPinList()), "PIN"), this.appendValueInput("STOPA").setCheck(o.TYPES.VAL).setAlign(e.ALIGN_RIGHT).appendField(t.get("MOTORS_STOP_A")), this.appendValueInput("OFFSETA").setCheck(o.TYPES.VAL).setAlign(e.ALIGN_RIGHT).appendField(t.get("MOTORS_OFFSET_A")), this.appendDummyInput().appendField(t.get("MOTORS_SERVO_B")).appendField(new e.FieldDropdown(i.makeServoPinList()), "PIN2"), this.appendValueInput("STOPB").setCheck(o.TYPES.VAL).setAlign(e.ALIGN_RIGHT).appendField(t.get("MOTORS_STOP_B")), this.appendValueInput("OFFSETB").setCheck(o.TYPES.VAL).setAlign(e.ALIGN_RIGHT).appendField(t.get("MOTORS_OFFSET_B")), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = s.checkInputs, s.newBlock(this)
            },
            servoPins: ["PIN", "PIN2"]
        }
    }), define("blockly/blocks/output", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../variables", "../block-utils", "../generators/picaxebasic"], function(e, t, o, n, i, r, s, a, l) {
        var c = e.Blocks;
        c.picaxe_output_outputon = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/high"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN").appendField(t.get("LOOPS_WO")).appendField(new e.FieldDropdown([
                    [t.get("OUTPUT_ON_STATE"), "1"],
                    [t.get("OUTPUT_OFF_STATE"), "0"]
                ]), "VALUE").appendField(t.get("OUTPUT_TURN_OUTPUT")), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            outputPins: "PIN"
        }, c.picaxe_output_outputonfor = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/high"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN").appendField(t.get("LOOPS_WO")), this.appendValueInput("TIME").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(t.get("OUTPUT_MS")).appendField(t.get("OUTPUT_FOR")).appendField(new e.FieldDropdown([
                    [t.get("OUTPUT_ON_STATE"), "1"],
                    [t.get("OUTPUT_OFF_STATE"), "0"]
                ]), "VALUE").appendField(t.get("OUTPUT_TURN_OUTPUT")), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            outputPins: "PIN"
        }, c.picaxe_output_pulseoutput = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/pulsout"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN").appendField(t.get("LOOPS_WO")), this.appendValueInput("TIME").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(t.get("OUTPUT_MS")).appendField(t.get("OUTPUT_FOR")).appendField(t.get("OUTPUT_PULSE_OUTPUT")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            outputPins: "PIN"
        }, c.picaxe_output_motor = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_SET_MOTOR")).appendField(new e.FieldDropdown(i.makeMotorPinList()), "MOTOR").appendField(t.get("OUTPUT_TO")).appendField(new e.FieldDropdown([
                    [t.get("OUTPUT_FORWARDS"), "F"],
                    [t.get("OUTPUT_BACKWARDS"), "B"],
                    [t.get("OUTPUT_STOP"), "S"]
                ]), "DIRECTION"), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            motorPins: "MOTOR"
        }, c.picaxe_output_motorfor = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.OUTPUT), this.appendValueInput("TIME").setCheck(o.TYPES.VAL).appendField(t.get("OUTPUT_SET_MOTOR")).appendField(new e.FieldDropdown(i.makeMotorPinList()), "MOTOR").appendField(t.get("OUTPUT_TO")).appendField(new e.FieldDropdown([
                    [t.get("OUTPUT_FORWARDS"), "F"],
                    [t.get("OUTPUT_BACKWARDS"), "B"]
                ]), "DIRECTION").appendField(t.get("OUTPUT_FOR")), this.appendDummyInput().appendField(t.get("OUTPUT_MS")), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            motorPins: "MOTOR"
        }, c.picaxe_output_sound = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/sound"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN").appendField(t.get("OUTPUT_ON")), this.appendValueInput("TIME").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(t.get("OUTPUT_MS")).appendField(t.get("OUTPUT_FOR")), this.appendValueInput("NOTE").setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(t.get("OUTPUT_PLAY_NOTE")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            outputPins: "PIN"
        }, c.picaxe_output_play = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/play"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(new e.FieldDropdown(i.makeTunePinList()), "PIN").appendField(t.get("OUTPUT_ON")).appendField(new e.FieldDropdown([
                    [t.get("OUTPUT_SONG_0"), "0"],
                    [t.get("OUTPUT_SONG_1"), "1"],
                    [t.get("OUTPUT_SONG_2"), "2"],
                    [t.get("OUTPUT_SONG_3"), "3"]
                ]), "SONG").appendField(t.get("OUTPUT_PLAY")), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            tunePins: "PIN"
        }, c.picaxe_output_tune = {
            init: function() {
                var i = "undefined" != typeof eoWebBrowser;
                this.setHelpUrl(o.HELP_URL + "/../commands/tune"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_TUNE")).appendField(new e.FieldTextArea(t.get(i ? "DEFAULT_TUNE" : "DEFAULT_BASIC")), "CODE"), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.wizardContextMenu, a.newBlock(this)
            }
        }, c.picaxe_output_spe035 = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../products/spe035"), this.setColour(r.OUTPUT), this.appendValueInput("VALUE").setCheck(o.TYPES.VAL).appendField("SPE035").appendField(new e.FieldDropdown([
                    [t.get("OUTPUT_PLAY_INITIALISE"), "setup"],
                    [t.get("OUTPUT_PLAY_PLAY_TUNE"), "play"],
                    [t.get("OUTPUT_PLAY_STOP_TUNE"), "stop"],
                    [t.get("OUTPUT_PLAY_PAUSE_TUNE"), "pause"],
                    [t.get("OUTPUT_PLAY_RESUME_TUNE"), "resume"],
                    [t.get("OUTPUT_PLAY_SET_VOLUME_TO"), "volume"]
                ]), "COMMAND"), this.appendDummyInput().appendField(t.get("OUTPUT_ON")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN"), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            outputPins: "PIN",
            onchange: function() {
                if (a.canSetWarning(this)) {
                    var e, o = this.getFieldValue("COMMAND"),
                        n = l.valueToCode(this, "VALUE", l.ORDER_ATOMIC);
                    "play" == o ? n ? n > 255 && (e = t.get("TUNE_VALUE")) : e = t.get("MISSING_BLOCKS") : "volume" == o && (n ? n > 30 && (e = t.get("VOLUME_VALUE")) : e = t.get("MISSING_BLOCKS")), this.setWarningText(e)
                }
            }
        }, c.picaxe_output_irout = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/irout"), this.setColour(r.OUTPUT), this.appendValueInput("COMMAND").setCheck(o.TYPES.VAL).appendField(t.get("OUTPUT_SEND_INFRARED")), this.appendDummyInput().appendField(t.get("OUTPUT_TO")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN"), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            outputPins: "PIN"
        }, c.picaxe_output_servo = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/servo"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_SET_SERVO")).appendField(new e.FieldDropdown(i.makeServoPinList()), "PIN"), this.appendValueInput("POSITION").setCheck(o.TYPES.VAL).appendField(t.get("OUTPUT_TO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            servoPins: "PIN"
        }, c.picaxe_output_servopos = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/servo"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_SET_SERVOPOS")).appendField(new e.FieldDropdown(i.makeServoPinList()), "PIN"), this.appendValueInput("POSITION").setCheck(o.TYPES.VAL).appendField(t.get("OUTPUT_TO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            servoPins: "PIN"
        }, c.picaxe_output_pwmout = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/pwmout"), this.setColour(r.OUTPUT), this.appendValueInput("PERIOD").setCheck(o.TYPES.VAL).appendField(t.get("OUTPUT_SET_PWMOUT_PERIOD")), this.appendValueInput("DUTY").setCheck(o.TYPES.VAL).appendField(t.get("OUTPUT_DUTY")), this.appendDummyInput().appendField(t.get("OUTPUT_ON")).appendField(new e.FieldDropdown(i.makePwmOutPinList()), "PIN"), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), i.checkPwmout(this), this.customContextMenu = n.wizardContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            pwmOutPins: "PIN"
        }, c.picaxe_output_pins = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/let"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_SET_PINS")).appendField(new e.FieldDropdown(i.makePortList()), "PIN"), this.appendValueInput("VALUE").setCheck(o.TYPES.VAL).appendField(t.get("OUTPUT_TO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            ports: "PIN"
        }, c.picaxe_output_dirs = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/let"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_SET_DIRS")).appendField(new e.FieldDropdown(i.makeDirectionPortList()), "PIN"), this.appendValueInput("VALUE").setCheck(o.TYPES.VAL).appendField(t.get("OUTPUT_TO")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = a.checkInputs, a.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            },
            directionPorts: "PIN"
        }, c.picaxe_output_high = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/high"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_HIGH")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN"), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            outputPins: "PIN"
        }, c.picaxe_output_low = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/low"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_LOW")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN"), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"),
                    this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            outputPins: "PIN"
        }, c.picaxe_output_toggle = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/toggle"), this.setColour(r.OUTPUT), this.appendDummyInput().appendField(t.get("OUTPUT_TOGGLE")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN"), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, a.newBlock(this)
            },
            outputPins: "PIN"
        }
    }), define("blockly/blocks/procedures", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../callbacks", "../block-utils"], function(e, t, o, n, i, r, s, a) {
        var l = e.Blocks;
        l.procedures_defnoreturn = {
            init: function() {
                this.arguments_ = [], this.setHelpUrl(t.get("PROCEDURES_DEFNORETURN_HELPURL")), this.setColour(r.PROCEDURES);
                var o = e.Procedures.findLegalName(t.get("PROCEDURES_DEFNORETURN_PROCEDURE"), this),
                    n = new e.FieldTextInput(o, function(t) {
                        return e.Procedures.rename.apply(this, [t.substr(0, 30)])
                    });
                n.validateOnInputChange = !0, n.setSpellcheck(!1), this.appendDummyInput().appendField(t.get("PROCEDURES_DEFNORETURN_TITLE")).appendField(n, "NAME").appendField("", "PARAMS"), this.setTooltip(t.get("PROCEDURES_DEFNORETURN_TOOLTIP")), this.arguments_ = [], this.setStatements_(!0), this.statementConnection_ = null, a.newBlock(this)
            },
            onchange: a.checkInputs,
            validate: function() {
                var t = e.Procedures.findLegalName(this.getFieldValue("NAME"), this);
                this.setFieldValue(t, "NAME")
            },
            setStatements_: function(e) {
                this.hasStatements_ !== e && (e ? (this.appendStatementInput("STACK").appendField(t.get("PROCEDURES_DEFNORETURN_DO")), this.getInput("RETURN") && this.moveInputBefore("STACK", "RETURN")) : this.removeInput("STACK", !0), this.hasStatements_ = e)
            },
            mutationToDom: function() {
                for (var e = document.createElement("mutation"), t = 0; t < this.arguments_.length; t++) {
                    var o = document.createElement("arg");
                    o.setAttribute("name", this.arguments_[t]), e.appendChild(o)
                }
                return this.hasStatements_ || e.setAttribute("statements", "false"), e
            },
            domToMutation: function(e) {
                this.arguments_ = [];
                for (var t, o = 0; t = e.childNodes[o]; o++) "arg" == t.nodeName.toLowerCase() && this.arguments_.push(t.getAttribute("name"));
                this.setStatements_("false" !== e.getAttribute("statements"))
            },
            decompose: function(t) {
                var o = e.Block.obtain(t, "procedures_mutatorcontainer");
                o.initSvg(), this.getInput("RETURN") ? o.setFieldValue(this.hasStatements_ ? "TRUE" : "FALSE", "STATEMENTS") : o.getInput("STATEMENT_INPUT").setVisible(!1);
                for (var n = o.getInput("STACK").connection, i = 0; i < this.arguments_.length; i++) {
                    var r = e.Block.obtain(t, "procedures_mutatorarg");
                    r.initSvg(), r.setFieldValue(this.arguments_[i], "NAME"), r.oldLocation = i, n.connect(r.previousConnection), n = r.nextConnection
                }
                return e.Procedures.mutateCallers(this.getFieldValue("NAME"), this.workspace, this.arguments_, null), o
            },
            compose: function(t) {
                this.arguments_ = [], this.paramIds_ = [];
                for (var o = t.getInputTargetBlock("STACK"); o;) this.arguments_.push(o.getFieldValue("NAME")), this.paramIds_.push(o.id), o = o.nextConnection && o.nextConnection.targetBlock();
                e.Procedures.mutateCallers(this.getFieldValue("NAME"), this.workspace, this.arguments_, this.paramIds_);
                var n, i = t.getFieldValue("STATEMENTS");
                if (null !== i && (i = "TRUE" == i, this.hasStatements_ != i))
                    if (i) this.setStatements_(!0), n = this.getInput("STACK").connection, n.targetConnection || !this.statementConnection_ || this.statementConnection_.targetConnection || this.statementConnection_.sourceBlock_.workspace != this.workspace ? this.statementConnection_ = null : n.connect(this.statementConnection_);
                    else {
                        if (n = this.getInput("STACK").connection, this.statementConnection_ = n.targetConnection, this.statementConnection_) {
                            var r = n.targetBlock();
                            r.setParent(null), r.bumpNeighbours_()
                        }
                        this.setStatements_(!1)
                    }
            },
            dispose: function() {
                var t = this.getFieldValue("NAME");
                e.Procedures.disposeCallers(t, this.workspace), this.constructor.prototype.dispose.apply(this, arguments)
            },
            getProcedureDef: function() {
                return [this.getFieldValue("NAME"), this.arguments_, !1]
            },
            getVars: function() {
                return this.arguments_
            },
            customContextMenu: function(o) {
                var n = {
                        enabled: !0
                    },
                    i = this.getFieldValue("NAME");
                n.text = t.get("PROCEDURES_CREATE_DO").replace("%1", i);
                var r = goog.dom.createDom("mutation");
                r.setAttribute("name", i);
                for (var s = 0; s < this.arguments_.length; s++) {
                    var a = goog.dom.createDom("arg");
                    a.setAttribute("name", this.arguments_[s]), r.appendChild(a)
                }
                var l = goog.dom.createDom("block", null, r);
                l.setAttribute("type", this.callType_), n.callback = e.ContextMenu.callbackFactory(this, l), o.push(n)
            },
            callType_: "procedures_callnoreturn"
        }, l.procedures_mutatorcontainer = {
            init: function() {
                this.setColour(r.PROCEDURES), this.appendDummyInput().appendField(t.get("PROCEDURES_MUTATORCONTAINER_TITLE")), this.appendStatementInput("STACK"), this.appendDummyInput("STATEMENT_INPUT").appendField(t.get("PROCEDURES_ALLOW_STATEMENTS")).appendField(new e.FieldCheckbox("TRUE"), "STATEMENTS"), this.setTooltip(t.get("PROCEDURES_MUTATORCONTAINER_TOOLTIP")), this.contextMenu = !1
            }
        }, l.procedures_callnoreturn = {
            init: function() {
                this.setHelpUrl(t.get("PROCEDURES_CALLNORETURN_HELPURL")), this.setColour(r.PROCEDURES), this.appendDummyInput("TOPROW").appendField("", "NAME").appendField(t.get("PROCEDURES_CALLNORETURN_CALL")), this.setPreviousStatement(!0), this.setNextStatement(!0), this.arguments_ = [], this.quarkConnections_ = {}, this.quarkArguments_ = null, a.newBlock(this)
            },
            getProcedureCall: function() {
                return this.getFieldValue("NAME")
            },
            renameProcedure: function(o, n) {
                e.Names.equals(o, this.getProcedureCall()) && (this.setFieldValue(n, "NAME"), this.setTooltip((this.outputConnection ? t.get("PROCEDURES_CALLRETURN_TOOLTIP") : t.get("PROCEDURES_CALLNORETURN_TOOLTIP")).replace("%1", n)))
            },
            setProcedureParameters: function(e, t) {},
            mutationToDom: function() {
                var e = document.createElement("mutation");
                return e.setAttribute("name", this.getProcedureCall()), e
            },
            domToMutation: function(e) {
                var o = e.getAttribute("name");
                this.setFieldValue(o, "NAME"), this.setTooltip((this.outputConnection ? t.get("PROCEDURES_CALLRETURN_TOOLTIP") : t.get("PROCEDURES_CALLNORETURN_TOOLTIP")).replace("%1", o))
            },
            customContextMenu: function(o) {
                var n = {
                    enabled: !0
                };
                n.text = t.get("PROCEDURES_HIGHLIGHT_DEF");
                var i = this.getProcedureCall(),
                    r = this.workspace;
                n.callback = function() {
                    var t = e.Procedures.getDefinition(i, r);
                    t && t.select()
                }, o.push(n);
                var a = this,
                    l = s.onSetBreakpoint,
                    c = {
                        text: this.breakpoint ? t.get("CONTEXT_REMOVE_BREAKPOINT") : t.get("CONTEXT_ADD_BREAKPOINT"),
                        enabled: !0,
                        callback: this.breakpoint ? function() {
                            l(a, !1)
                        } : function() {
                            l(a, !0)
                        }
                    };
                o.push(c)
            }
        }
    }), define("blockly/blocks/serial", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../variables", "../field-variable", "../block-utils"], function(e, t, o, n, i, r, s, a, l) {
        var c = e.Blocks;
        c.picaxe_serial_debug = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/debug"), this.setColour(r.SERIAL_OUTPUT), this.appendDummyInput().appendField(t.get("SERIAL_DEBUG")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            }
        }, c.picaxe_serial_serout = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/serout"), this.setColour(r.SERIAL_OUTPUT), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL, o.TYPES.STR, o.TYPES.VARCOMMA]).appendField(t.get("SERIAL_SERIAL_OUTPUT_AT")).appendField(new e.FieldDropdown(i.makeBaudRateList()), "BAUD").appendField(t.get("SERIAL_ON")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN"), this.appendDummyInput().setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("TRUE"), "ASCII").appendField(t.get("SERIAL_SEND_AS_ASCII")), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            outputPins: "PIN",
            baudRates: "BAUD",
            onchange: l.checkInputs
        }, c.picaxe_serial_sertxd = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/sertxd"), this.setColour(r.SERIAL_OUTPUT), this.appendValueInput("VALUE").appendField(t.get("SERIAL_SERTXD")).setCheck([o.TYPES.VAL, o.TYPES.STR, o.TYPES.VARCOMMA]), this.appendDummyInput().setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("TRUE"), "ASCII").appendField(t.get("SERIAL_SEND_AS_ASCII")), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            onchange: l.checkInputs
        }, c.picaxe_serial_hserout = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/hserout"), this.setColour(r.SERIAL_OUTPUT), this.appendValueInput("VALUE").appendField(t.get("SERIAL_HSEROUT")).setCheck([o.TYPES.VAL, o.TYPES.STR]), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), i.checkHSerialType(this), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            onchange: l.checkInputs
        }, c.picaxe_serial_lcd = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/serout"), this.setColour(r.SERIAL_OUTPUT), this.appendValueInput("VALUE").appendField(t.get("SERIAL_LCD_PRINT_ON")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN").setCheck([o.TYPES.VAL, o.TYPES.STR]), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            outputPins: "PIN",
            onchange: l.checkInputs
        }, c.picaxe_serial_lcdcmd = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/serout"), this.setColour(r.SERIAL_OUTPUT), this.appendDummyInput().appendField(t.get("SERIAL_LCD_SEND")).appendField(new e.FieldDropdown([
                    [t.get("SERIAL_LCD_CLEAR"), "254, 1"],
                    [t.get("SERIAL_LCD_MOVE_LINE_1"), "254, 0x80"],
                    [t.get("SERIAL_LCD_MOVE_LINE_2"), "254, 0xC0"]
                ]), "CODETAG").appendField(t.get("SERIAL_TO")).appendField(new e.FieldDropdown(i.makeOutputPinList()), "PIN"), this.setInputsInline(!0), this.setPreviousStatement(!0, "null"), this.setNextStatement(!0, "null"), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            outputPins: "PIN"
        }, c.picaxe_serial_serin = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/serin"), this.setColour(r.SERIAL_INPUT), this.appendDummyInput().appendField(t.get("SERIAL_SERIAL_IN_AT")).appendField(new e.FieldDropdown(i.makeBaudRateList()), "BAUD").appendField(t.get("SERIAL_ON")).appendField(new e.FieldDropdown(i.makeInputPinList()), "PIN").appendField(t.get("SERIAL_TO")).appendField(new a(s.defaultVarName, s.validateVarName), "NAME"), this.appendDummyInput().setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("TRUE"), "ASCII").appendField(t.get("SERIAL_RECEIVE_AS_ASCII")), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            },
            baudRates: "BAUD",
            inputPins: "PIN"
        }, c.picaxe_serial_serrxd = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/serrxd"), this.setColour(r.SERIAL_INPUT), this.appendDummyInput().appendField(t.get("SERIAL_SERRXD")).appendField(new a(s.defaultVarName, s.validateVarName), "NAME"), this.appendDummyInput().setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("TRUE"), "ASCII").appendField(t.get("SERIAL_RECEIVE_AS_ASCII")), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            }
        }, c.picaxe_serial_hserin = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/hserin"), this.setColour(r.SERIAL_INPUT), this.appendDummyInput().appendField(t.get("SERIAL_HSERIN_TO")).appendField(new a(s.defaultVarName, s.validateVarName), "NAME"), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), i.checkHSerialType(this), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            }
        }, c.picaxe_serial_hsersetup = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/hsersetup"), this.setColour(r.SERIAL), this.appendDummyInput().appendField(t.get("SERIAL_HSERSETUP")).appendField(new e.FieldDropdown(i.makehBaudRateList()), "BAUD"), this.appendDummyInput().setAlign(e.ALIGN_LEFT).appendField(" ").appendField(new e.FieldCheckbox("FALSE"), "INVERT").appendField(t.get("SERIAL_INVERT_POLARITY")), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), i.checkHSerialType(this), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            hbaudRates: "BAUD"
        }
    }), define("blockly/blocks/tasks", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../block-utils", "../variables"], function(e, t, o, n, i, r, s, a) {
        var l = e.Blocks;
        l.picaxe_tasks_stop = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/stop"), this.setColour(r.TASK_STOP), this.appendDummyInput().appendField(t.get("TASKS_STOP_THIS_TASK")), this.setPreviousStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, s.newBlock(this)
            }
        }, l.picaxe_tasks_suspend = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/suspend"), this.setColour(r.TASK), this.appendValueInput("TASK").setCheck(o.TYPES.VAL).appendField(t.get("TASKS_SUSPEND_TASK")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = s.checkInputs, s.newBlock(this), this.isInFlyout && 1 == s.getMaxStart() && s.disable(this)
            },
            getVars: function() {
                return a.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return a.rename(this, ["NAME"], e, t)
            }
        }, l.picaxe_tasks_resume = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/resume"), this.setColour(r.TASK), this.appendValueInput("TASK").setCheck(o.TYPES.VAL).appendField(t.get("TASKS_RESUME_TASK")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = s.checkInputs, s.newBlock(this), this.isInFlyout && 1 == s.getMaxStart() && s.disable(this)
            },
            getVars: function() {
                return a.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return a.rename(this, ["NAME"], e, t)
            }
        }, l.picaxe_tasks_restart = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/restart"), this.setColour(r.TASK), this.appendValueInput("TASK").setCheck(o.TYPES.VAL).appendField(t.get("TASKS_RESTART_TASK")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = s.checkInputs, s.newBlock(this), this.isInFlyout && 1 == s.getMaxStart() && s.disable(this)
            },
            getVars: function() {
                return a.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return a.rename(this, ["NAME"], e, t)
            }
        }, l.picaxe_tasks_reset = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/reset"), this.setColour(r.ADVANCED), this.appendDummyInput().appendField(t.get("TASKS_RESTART_ALL")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!1), this.setTooltip(""), this.customContextMenu = n.customContextMenu, s.newBlock(this)
            }
        }
    }), define("blockly/blocks/vals", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../variables", "../field-variable", "../parse-events", "../block-utils"], function(e, t, o, n, i, r, s, a, l, c) {
        function u(e) {
            function t(e, t, o) {
                var n = e.replace(o, "").toLowerCase();
                return parseInt(n, t).toString(t) == n
            }
            var o = e,
                n = "0",
                i = /(^(0b)|^%)0*/gm,
                r = /(^(0x)|^\$)0*/gm;
            if (i.test(o)) t(o, 2, i) || (o = n);
            else if (r.test(o)) t(o, 16, r) || (o = n);
            else {
                var s = parseFloat(o);
                isNaN(s) ? o = n : (s = +s.toFixed(0), s = Math.abs(s), s = Math.min(s, 65535), o = s.toString(10))
            }
            return o != e && l.onEvent(l.types.INFO, l.msgs.VALUE_CHANGED, e, o), o
        }
        var g = e.Blocks;
        g.picaxe_vals_let = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/let"), this.setColour(r.VALS), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL, o.TYPES.EXP]).appendField(t.get("VALS_LET")).appendField(new a(s.defaultVarName, s.validateVarName), "NAME").appendField("="), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, c.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            },
            onchange: c.checkInputs
        }, g.picaxe_vals_varop = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/let"), this.setColour(r.VALS), this.appendValueInput("VAR1").setCheck([o.TYPES.VAL, o.TYPES.EXP]), this.appendDummyInput().appendField(new e.FieldDropdown([
                    ["+", "+"],
                    ["-", "-"],
                    ["*", "*"],
                    ["**", "**"],
                    ["/", "/"],
                    ["%", "%"],
                    ["and", "and"],
                    ["or", "or"],
                    ["xor", "xor"],
                    ["max", "max"],
                    ["min", "min"]
                ]), "OP"), this.appendValueInput("VAR2").setCheck([o.TYPES.VAL, o.TYPES.EXP]), this.setInputsInline(!0), this.setOutput(!0, o.TYPES.EXP), this.setTooltip(""), c.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR1", "VAR2"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR1", "VAR2"], e, t)
            },
            onchange: c.checkInputs
        }, g.picaxe_vals_varcomma = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/let"), this.setColour(r.VALS_VAR), this.appendValueInput("VAR1").setCheck([o.TYPES.VAL, o.TYPES.VARCOMMA]), this.appendDummyInput().appendField(","), this.appendValueInput("VAR2").setCheck([o.TYPES.VAL, o.TYPES.VARCOMMA]), this.setInputsInline(!0), this.setOutput(!0, o.TYPES.VARCOMMA), this.setTooltip(""), c.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR1", "VAR2"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR1", "VAR2"], e, t)
            },
            onchange: c.checkInputs
        }, g.picaxe_vals_var = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.VALS_VAR), this.appendDummyInput().appendField(new a(s.defaultVarName, s.validateVarName), "VAR"), this.setOutput(!0, o.TYPES.VAL), this.setTooltip(""), c.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["VAR"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["VAR"], e, t)
            }
        }, g.picaxe_vals_val = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.VALS_VAL), this.appendDummyInput().appendField(new e.FieldTextInput("1", u), "VALUE"), this.setOutput(!0, o.TYPES.VAL), this.setTooltip(""), c.newBlock(this)
            }
        }, g.picaxe_vals_str = {
            init: function() {
                this.setHelpUrl(o.HELP_URL), this.setColour(r.VALS_STR), "" === t.get("VALS_STR_LEFT_QUOTE") ? this.appendDummyInput().appendField(new e.FieldImage(o.PATH_TO_BLOCKLY + "media/quote0.png", 12, 12, '"')).appendField(new e.FieldTextInput(t.get("VALS_STR_DEFAULT")), "TEXT").appendField(new e.FieldImage(o.PATH_TO_BLOCKLY + "media/quote1.png", 12, 12, '"')) : this.appendDummyInput().appendField(t.get("VALS_STR_LEFT_QUOTE")).appendField(new e.FieldTextInput(t.get("VALS_STR_DEFAULT")), "TEXT").appendField(t.get("VALS_STR_RIGHT_QUOTE")), this.setOutput(!0, "String"), this.setTooltip(""), c.newBlock(this)
            }
        }
    }), define("blockly/blocks/variables", ["blocklylib", "../msg", "../constants", "../context-menus", "../io", "../colors", "../variables", "../field-variable", "../block-utils"], function(e, t, o, n, i, r, s, a, l) {
        var c = e.Blocks;
        c.picaxe_variables_if = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/if"), this.setColour(r.VARIABLES_IF), this.appendValueInput("VAR1").setCheck(o.TYPES.VAL).appendField(t.get("VARIABLES_IF")), this.appendDummyInput().appendField(new e.FieldDropdown(s.makeCmpList()), "OP"), this.appendValueInput("VAR2").setCheck(o.TYPES.VAL), this.appendStatementInput("THEN").appendField(t.get("VARIABLES_THEN")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            }
        }, c.picaxe_variables_ifelse = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/if"), this.setColour(r.VARIABLES_IF), this.appendValueInput("VAR1").appendField(t.get("VARIABLES_IF")).setCheck(o.TYPES.VAL), this.appendDummyInput().appendField(new e.FieldDropdown(s.makeCmpList()), "OP"), this.appendValueInput("VAR2").setCheck(o.TYPES.VAL), this.appendStatementInput("THEN").appendField(t.get("VARIABLES_THEN")), this.appendStatementInput("ELSE").appendField(t.get("VARIABLES_ELSE")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            }
        }, c.picaxe_variables_set = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/let"), this.setColour(r.VARIABLES), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL, o.TYPES.EXP]).appendField(new a(s.defaultVarName, s.validateVarName), "NAME").appendField(t.get("VARIABLES_TO")), this.appendDummyInput().appendField(t.get("VARIABLES_SET")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            }
        }, c.picaxe_variables_random = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/random"), this.setColour(r.VARIABLES), this.appendDummyInput().appendField(t.get("VARIABLES_SET")).appendField(new a(s.defaultVarName, s.validateVarName), "NAME"), this.appendDummyInput().appendField(t.get("VARIABLES_TO_RANDOM")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            }
        }, c.picaxe_variables_inc = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/inc"), this.setColour(r.VARIABLES), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL]).appendField(t.get("VARIABLES_INCREASE")).appendField(new a(s.defaultVarName, s.validateVarName), "NAME").appendField(t.get("VARIABLES_BY")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            }
        }, c.picaxe_variables_dec = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/dec"), this.setColour(r.VARIABLES), this.appendValueInput("VALUE").setCheck([o.TYPES.VAL]).appendField(t.get("VARIABLES_DECREASE")).appendField(new a(s.defaultVarName, s.validateVarName), "NAME").appendField(t.get("VARIABLES_BY")), this.setInputsInline(!0), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, this.onchange = l.checkInputs, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME"], e, t)
            }
        }, c.picaxe_variables_bintoascii = {
            init: function() {
                this.setHelpUrl(o.HELP_URL + "/../commands/bintoascii"), this.setColour(r.VARIABLES), this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField(t.get("VARIABLES_CONVERT_TO_ASCII")).appendField(new a(s.defaultVarName, s.validateVarName), "NAME"), this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("100").appendField(new a(s.defaultVarName2, s.validateVarName), "NAME100"), this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("10").appendField(new a(s.defaultVarName3, s.validateVarName), "NAME10"), this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("1").appendField(new a(s.defaultVarName4, s.validateVarName), "NAME1"), this.setInputsInline(!1), this.setPreviousStatement(!0), this.setNextStatement(!0), this.setTooltip(""), this.customContextMenu = n.customContextMenu, l.newBlock(this)
            },
            getVars: function() {
                return s.getAll(this, ["NAME", "NAME100", "NAME10", "NAME1"])
            },
            renameVar: function(e, t) {
                return s.rename(this, ["NAME", "NAME100", "NAME10", "NAME1"], e, t)
            },
            onchange: function() {
                if (l.canSetWarning(this)) {
                    var e, o;
                    this.getFieldValue("NAME") == this.getFieldValue("NAME100") && (o = !0), this.getFieldValue("NAME") == this.getFieldValue("NAME10") && (o = !0), this.getFieldValue("NAME") == this.getFieldValue("NAME1") && (o = !0), this.getFieldValue("NAME100") == this.getFieldValue("NAME10") && (o = !0), this.getFieldValue("NAME100") == this.getFieldValue("NAME1") && (o = !0), this.getFieldValue("NAME10") == this.getFieldValue("NAME1") && (o = !0), o && (e = t.get("WARNING_SAME_VARIABLE")), this.setWarningText(e)
                }
            }
        }
    }), define("blockly/generators/picaxebasic/advanced", ["blocklylib", "../picaxebasic", "../../io"], function(e, t, o) {
        t.picaxe_advanced_comment = function(e) {
            var o = (e.getFieldValue("CODE"), "\n");
            return t.wrapOutput(e, o)
        }, t.picaxe_advanced_basic = function(e) {
            var o = e.getFieldValue("CODE"),
                n = o + "\n";
            return t.wrapOutput(e, n)
        }, t.picaxe_advanced_slot = function(e) {
            var o = e.getFieldValue("SLOT"),
                n = "#slot " + o + "\n";
            return t.wrapOutput(e, n)
        }, t.picaxe_advanced_run = function(e) {
            var o = e.getFieldValue("SLOT"),
                n = "	run " + o + "\n";
            return t.wrapOutput(e, n)
        }, t.picaxe_advanced_custom = function(e) {
            var o = e.getFieldValue("TITLE"),
                n = e.getFieldValue("CODE"),
                i = "; " + o + "\n" + n + "\n";
            return t.wrapOutput(e, i)
        }, t.picaxe_advanced_reset = function(e) {
            var o = "	reset\n";
            return t.wrapOutput(e, o)
        }, t.picaxe_advanced_read = function(e) {
            var o = t.valueToCode(e, "LOCATION", t.ORDER_ATOMIC),
                n = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC),
                i = "	read " + o + ", " + n + "\n";
            return t.wrapOutput(e, i)
        }, t.picaxe_advanced_write = function(e) {
            var o = t.valueToCode(e, "LOCATION", t.ORDER_ATOMIC),
                n = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC),
                i = "	write " + o + ", " + n + "\n";
            return t.wrapOutput(e, i)
        }, t.picaxe_advanced_i2csetup = function(e) {
            var o = t.valueToCode(e, "ADDRESS", t.ORDER_ATOMIC),
                n = "TRUE" == e.getFieldValue("FAST") ? ", i2cfast" : ", i2cslow",
                i = "TRUE" == e.getFieldValue("WORD") ? ", i2cword\n" : ", i2cbyte\n",
                r = "	hi2csetup i2cmaster, " + o + n + i;
            return t.wrapOutput(e, r)
        }, t.picaxe_advanced_i2csetup_device = function(e) {
            var o = e.getFieldValue("DEVICE"),
                n = "	hi2csetup i2cmaster, ";
            return "EEPROM" == o && (n += "$A0, i2cslow, i2cbyte\n"), "DS1307" == o && (n += "$D0, i2cslow, i2cbyte\n"), "Nunchuck A" == o && (n += "$A4, i2cslow, i2cbyte\n	pause 10\n	hi2cout ($40, $00)\n	;Remember to decode Nunchuck values! result ^ $17 + $17 & $FF\n"), "Nunchuck B" == o && (n += "$A4, i2cslow, i2cbyte\n	pause 10\n	hi2cout ($F0, $55)\n	hi2cout ($FB, $00)\n"), "Lego NXT Color V2" == o && (n += "$02, i2cslow, i2cbyte\n	;$42=color $43=red $44=green $45=blue\n"), "Lego NXT Temp" == o && (n += "$98, i2cslow, i2cbyte\n	hi2cout ($01, $00)\n"), "None" == o && (n += "0, 0, 0\n"), t.wrapOutput(e, n)
        }, t.picaxe_advanced_i2cread = function(e) {
            var o = t.valueToCode(e, "LOCATION", t.ORDER_ATOMIC),
                n = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC),
                i = "	hi2cin " + o + ", ( " + n + " )\n";
            return t.wrapOutput(e, i)
        }, t.picaxe_advanced_i2cwrite = function(e) {
            var o = t.valueToCode(e, "LOCATION", t.ORDER_ATOMIC),
                n = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC),
                i = "	hi2cout " + o + ", ( " + n + " )\n";
            return t.wrapOutput(e, i)
        }, t.picaxe_advanced_disconnect = function(e) {
            var o = "	disconnect\n";
            return t.wrapOutput(e, o)
        }, t.picaxe_advanced_reconnect = function(e) {
            var o = "	reconnect\n";
            return t.wrapOutput(e, o)
        }, t.picaxe_advanced_setint = function(e) {
            var o = t.getPinName(e),
                n = "" === o ? "" : ", " + o[0],
                i = "" === o ? "0" : o[o.length - 1],
                r = "" === o ? "0" : (1 << parseInt(i)).toString(),
                s = e.getFieldValue("STATE"),
                a = "1" == s ? r : "0",
                l = "	setint " + a + ", " + r + n + "\n";
            return t.wrapOutput(e, l)
        }, t.picaxe_advanced_setintoff = function(e) {
            var n = o.getSetintPort(),
                i = "	setint 0, 0, " + n + "\n";
            return t.wrapOutput(e, i)
        }
    }), define("blockly/generators/picaxebasic/control", ["../picaxebasic", "../../block-utils"], function(e, t) {
        e.picaxe_control_start = function(o) {
            var n;
            return n = t.startBlocks.length > 1 ? "start" + o.startIndex + ":\n" : "main:\n", e.wrapOutput(o, n)
        }
    }), define("blockly/generators/picaxebasic/custom", ["../picaxebasic"], function(e) {
        e.picaxe_custom_outputon = function(t) {
            var o = t.getFieldValue("VALUE"),
                n = "1" == o ? "	high" : "	low";
            return n += " " + e.getPinName(t), n += "\n", e.wrapOutput(t, n)
        }
    }), define("blockly/generators/picaxebasic/delays", ["../picaxebasic"], function(e) {
        e.picaxe_delays_pause = function(t) {
            var o = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                n = "	pause " + o + "\n";
            return e.wrapOutput(t, n)
        }, e.picaxe_delays_sleep = function(t) {
            var o = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                n = parseFloat(o);
            isNaN(n) || (n = Math.abs(n), n = 10 * n / 21, n = Math.floor(n), n = Math.min(n, 65535), o = n.toString(10));
            var i = "	sleep " + o + "\n";
            return e.wrapOutput(t, i)
        }, e.picaxe_delays_pauseus = function(t) {
            var o = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                n = "	pauseus " + o + "\n";
            return e.wrapOutput(t, n)
        }, e.picaxe_delays_until_pin = function(t) {
            var o = e.getPinName(t),
                n = t.getFieldValue("STATE"),
                i = "pin" + o + " = " + n,
                r = "	do\n		pause 10\n";
            return r += "	loop until " + i + "\n", e.wrapOutput(t, r)
        }
    }), define("blockly/generators/picaxebasic/flow", ["../picaxebasic"], function(e) {
        e.getComparisonCode = function(t, o) {
            "undefined" == typeof o && (o = "");
            var n = e.valueToCode(t, "VAR1" + o, e.ORDER_ATOMIC),
                i = t.getFieldValue("OP" + o),
                r = e.valueToCode(t, "VAR2" + o, e.ORDER_ATOMIC),
                s = parseFloat(n),
                a = parseFloat(r);
            if (!isNaN(s) && !isNaN(a)) {
                console.info("picaxe_vals_varop: converting num cmp num comparison");
                var l = !1;
                return "=" == i ? s == a && (l = !0) : "<>" == i ? s != a && (l = !0) : ">=" == i ? s >= a && (l = !0) : "<=" == i ? a >= s && (l = !0) : ">" == i ? s > a && (l = !0) : "<" == i && a > s && (l = !0), l ? "b0 = b0" : "b0 <> b0"
            }
            if (!isNaN(s) && isNaN(a) && (console.info("picaxe_vals_varop: swapping comparison"), "<>" != i)) {
                -1 != i.indexOf("<") ? i = i.replace(/</g, ">") : -1 != i.indexOf(">") && (i = i.replace(/>/g, "<"));
                var c = n;
                n = r, r = c
            }
            return n + " " + i + " " + r
        }, e.picaxe_flow_mutator_if = function(t) {
            var o = 0,
                n = e.getComparisonCode(t, 0),
                i = n,
                r = e.statementToCode(t, "THEN" + o),
                s = "	if " + n + " then\n" + r;
            for (o = 1; o <= t.elseifCount_; o++) n = e.getComparisonCode(t, o), r = e.statementToCode(t, "THEN" + o), s += "	elseif " + n + " then\n" + r;
            for (o = 1; o <= t.elseifandCount_; o++) {
                n = e.getComparisonCode(t, 2e3 + o), i = e.getComparisonCode(t, 1e3 + o);
                var a = t.getFieldValue("ANDOR" + o);
                r = e.statementToCode(t, "THEN" + (1e3 + o)), s += "	elseif " + n + " " + a + " " + i + " then\n" + r
            }
            return t.elseCount_ && (r = e.statementToCode(t, "ELSE"), s += "	else\n" + r), s += "	endif\n", e.wrapOutput(t, s)
        }
    }), define("blockly/generators/picaxebasic/input", ["blocklylib", "../picaxebasic"], function(e, t) {
        t.picaxe_input_ifpin = function(e) {
            var o = t.getPinName(e),
                n = t.statementToCode(e, "THEN"),
                i = e.getFieldValue("STATE"),
                r = "	if pin" + o + " = " + i + " then\n";
            return r += n, r += "	endif\n", t.wrapOutput(e, r)
        }, t.picaxe_input_ifpinelse = function(e) {
            var o = t.getPinName(e),
                n = e.getFieldValue("STATE"),
                i = t.statementToCode(e, "THEN"),
                r = t.statementToCode(e, "ELSE"),
                s = "	if pin" + o + " = " + n + " then\n";
            return s += i, s += "	else\n", s += r, s += "	endif\n", t.wrapOutput(e, s)
        }, t.picaxe_input_readadc = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = "	readadc " + n + ", " + i + "\n";
            return t.wrapOutput(o, r)
        }, t.picaxe_input_readtemp = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = "	readtemp " + n + ", " + i + "\n";
            return t.wrapOutput(o, r)
        }, t.picaxe_input_ultra = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = "	ultra " + n + ", ";
            return r += i + "\n", t.wrapOutput(o, r)
        }, t.picaxe_input_ultra2 = function(o) {
            var n = t.getPinName(o),
                i = t.getPinName2(o),
                r = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                s = "	ultra " + n + ", ";
            return s += i + ", ", s += r + "\n", t.wrapOutput(o, s)
        }, t.picaxe_input_irin = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = "\n	" + i + " = " + i + " and 127";
            r += "TRUE" == o.getFieldValue("TV") ? " + 1\n" : "\n";
            var s = "	irin " + n + ", " + i + r;
            return t.wrapOutput(o, s)
        }, t.picaxe_input_irin_timeout = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = "\n	" + i + " = " + i + " and 127";
            r += "TRUE" == o.getFieldValue("TV") ? " + 1\n" : "\n";
            var s = t.valueToCode(o, "TIMEOUT", t.ORDER_ATOMIC);
            s || (s = "500"), s = "TRUE" == o.getFieldValue("USE_TIMEOUT") ? "[" + s + "], " : "";
            var a = "	irin " + s + n + ", " + i + r;
            return t.wrapOutput(o, a)
        }, t.picaxe_input_irintv = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = "	irin " + n + ", " + i + "\n";
            return r += "	" + i + " = " + i + " and 127 + 1\n", t.wrapOutput(o, r)
        }, t.picaxe_input_inputPin = function(e) {
            var o = t.getPinName(e);
            return ["pin" + o, t.ORDER_ATOMIC]
        }, t.picaxe_input_inputPort = function(e) {
            var o = t.getPinName(e);
            return ["pins" + o, t.ORDER_ATOMIC]
        }
    }), define("blockly/generators/picaxebasic/io", ["../picaxebasic", "../../io"], function(e, t) {
        e.picaxe_io_inputval = function(t) {
            var o = e.getPinName(t);
            return ["pin" + o, e.ORDER_ATOMIC]
        }
    }), define("blockly/generators/picaxebasic/loops", ["blocklylib", "../picaxebasic"], function(e, t) {
        t.picaxe_loops_forever = function(e) {
            var o = t.statementToCode(e, "NAME"),
                n = "	do\n";
            return n += o, n += "	loop\n", t.wrapOutput(e, n)
        }, t.picaxe_loops_repeat = function(e) {
            var o = t.statementToCode(e, "REPEAT"),
                n = t.getComparisonCode(e),
                i = "	do\n";
            return i += o, i += "	loop until " + n + "\n", t.wrapOutput(e, i)
        }, t.picaxe_loops_repeat_pin = function(e) {
            var o = t.statementToCode(e, "REPEAT"),
                n = t.getPinName(e),
                i = e.getFieldValue("STATE"),
                r = "pin" + n + " = " + i,
                s = "	do\n";
            return s += o, s += "	loop until " + r + "\n", t.wrapOutput(e, s)
        }, t.picaxe_loops_while = function(e) {
            var o = t.statementToCode(e, "DO"),
                n = t.getComparisonCode(e),
                i = "	do while " + n + "\n";
            return i += o, i += "	loop\n", t.wrapOutput(e, i)
        }, t.picaxe_loops_while_pin = function(e) {
            var o = t.statementToCode(e, "DO"),
                n = t.getPinName(e),
                i = e.getFieldValue("STATE"),
                r = "pin" + n + " = " + i,
                s = "	do while " + r + "\n";
            return s += o, s += "	loop\n", t.wrapOutput(e, s)
        }, t.picaxe_loops_count = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                i = t.valueToCode(o, "FROM", t.ORDER_ATOMIC),
                r = t.valueToCode(o, "TO", t.ORDER_ATOMIC),
                s = t.valueToCode(o, "STEP", t.ORDER_ATOMIC),
                a = t.statementToCode(o, "DO"),
                l = "	for " + n + " = " + i + " to " + r + " step " + s + "\n";
            return l += a, l += "	next " + n + "\n", t.wrapOutput(o, l)
        }, t.picaxe_loops_countdown = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                i = t.valueToCode(o, "FROM", t.ORDER_ATOMIC),
                r = t.valueToCode(o, "TO", t.ORDER_ATOMIC),
                s = t.valueToCode(o, "STEP", t.ORDER_ATOMIC),
                a = t.statementToCode(o, "DO"),
                l = "	for " + n + " = " + i + " to " + r + " step -" + s + "\n";
            return l += a, l += "	next " + n + "\n", t.wrapOutput(o, l)
        }
    }), define("blockly/generators/picaxebasic/motors", ["../picaxebasic"], function(e) {
        e.picaxe_motors_BOT120 = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = t.getFieldValue("SPEED");
            return n ? n += "\n" : n = "", o("FL") ? n += "	low B.4,B.5,B.7 : high B.6" : o("F") ? n += "	low B.5,B.7 : high B.4,B.6" : o("FR") ? n += "	low B.5,B.6,B.7 : high B.4" : o("L") ? n += "	low B.4,B.7 : high B.5,B.6" : o("STOP") ? n += "	low B.4,B.5,B.6,B.7" : o("R") ? n += "	low B.5,B.6 : high B.4,B.7" : o("BR") ? n += "	low B.4,B.6,B.7 : high B.5" : o("B") ? n += "	low B.4,B.6 : high B.5,B.7" : o("BL") && (n += "	low B.4,B.5,B.6 : high B.7"), n += "\n", e.wrapOutput(t, n)
        }, e.picaxe_motors_CHI035 = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = "";
            return o("FL") ? n += "	low B.4,B.5,B.7 : high B.6" : o("F") ? n += "	low B.5,B.7 : high B.4,B.6" : o("FR") ? n += "	low B.5,B.6,B.7 : high B.4" : o("L") ? n += "	low B.4,B.7 : high B.5,B.6" : o("STOP") ? n += "	low B.4,B.5,B.6,B.7" : o("R") ? n += "	low B.5,B.6 : high B.4,B.7" : o("BR") ? n += "	low B.4,B.6,B.7 : high B.5" : o("B") ? n += "	low B.4,B.6 : high B.5,B.7" : o("BL") && (n += "	low B.4,B.5,B.6 : high B.7"), n += "\n", e.wrapOutput(t, n)
        }, e.picaxe_motors_AXE120 = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = "",
                i = e.valueToCode(t, "LEFT", e.ORDER_ATOMIC),
                r = e.valueToCode(t, "RIGHT", e.ORDER_ATOMIC);
            return (i || r) && (n += "	let dirsB = %11110000\n", n += "	let pinsB = %00000000\n", n += "	pause 10\n"), i && (n += "	let pinsB = %00110000; left speed\n", n += "	pulsout B.6, " + i + "\n", n += "	pause 10\n"), r && (n += "	let pinsB = %11000000; right speed\n", n += "	pulsout B.4, " + r + "\n", n += "	pause 10\n"), (i || r) && (n += "	let pinsB = %00000000\n"), o("FL") ? n += "	low B.4,B.5,B.7 : high B.6" : o("F") ? n += "	low B.5,B.7 : high B.4,B.6" : o("FR") ? n += "	low B.5,B.6,B.7 : high B.4" : o("L") ? n += "	low B.4,B.7 : high B.5,B.6" : o("STOP") ? n += "	low B.4,B.5,B.6,B.7" : o("R") ? n += "	low B.5,B.6 : high B.4,B.7" : o("BR") ? n += "	low B.4,B.6,B.7 : high B.5" : o("B") ? n += "	low B.4,B.6 : high B.5,B.7" : o("BL") && (n += "	low B.4,B.5,B.6 : high B.7"), n += "\n", e.wrapOutput(t, n)
        }, e.picaxe_motors_KMR01 = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = "",
                i = e.valueToCode(t, "LEFT", e.ORDER_ATOMIC),
                r = e.valueToCode(t, "RIGHT", e.ORDER_ATOMIC);
            return (i || r) && (n += "	let dirsB = %11110000\n", n += "	let pinsB = %00000000\n", n += "	pause 10\n"), i && (n += "	let pinsB = %00110000; left speed\n", n += "	pulsout B.6, " + i + "\n", n += "	pause 10\n"), r && (n += "	let pinsB = %11000000; right speed\n", n += "	pulsout B.4, " + r + "\n", n += "	pause 10\n"), (i || r) && (n += "	let pinsB = %00000000\n"), o("FL") ? n += "	low B.5,B.6,B.7 : high B.4" : o("F") ? n += "	low B.4,B.6 : high B.5,B.7" : o("FR") ? n += "	low B.4,B.5,B.7 : high B.6" : o("L") ? n += "	low B.5,B.6 : high B.4,B.7" : o("STOP") ? n += "	low B.4,B.5,B.6,B.7" : o("R") ? n += "	low B.4,B.7 : high B.5,B.6" : o("BL") ? n += "	low B.4,B.6,B.7 : high B.5" : o("B") ? n += "	low B.5,B.7 : high B.4,B.6" : o("BR") && (n += "	low B.4,B.5,B.6 : high B.7"), n += "\n", e.wrapOutput(t, n)
        }, e.picaxe_motors_AXE023 = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = "";
            return o("FL") ? n += "	low C.0,C.1,C.4 : high C.2" : o("F") ? n += "	low C.1,C.4 : high C.0,C.2" : o("FR") ? n += "	low C.1,C.2,C.4 : high C.0" : o("L") ? n += "	low C.0,C.4 : high C.1,C.2" : o("STOP") ? n += "	low C.0,C.1,C.2,C.4" : o("R") ? n += "	low C.1,C.2 : high C.0,C.4" : o("BR") ? n += "	low C.0,C.2,C.4 : high C.1" : o("B") ? n += "	low C.0,C.2 : high C.1,C.4" : o("BL") && (n += "	low C.0,C.1,C.2 : high C.4"), n += "\n", e.wrapOutput(t, n)
        }, e.picaxe_motors_servo = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = "";
            return n += "#IFNDEF servo_motors_defined\n", n += "#ERROR You must use a 'servo motor setup' command first!\n", n += "#ENDIF\n", o("FL") ? n += "	servopos SMA_pin, SMA_stop : servopos SMB_pin, SMB_forward" : o("F") ? n += "	servopos SMA_pin, SMA_forward : servopos SMB_pin, SMB_forward" : o("FR") ? n += "	servopos SMA_pin, SMA_forward : servopos SMB_pin, SMB_stop" : o("L") ? n += "	servopos SMA_pin, SMA_back : servopos SMB_pin, SMB_forward" : o("STOP") ? n += "	servopos SMA_pin, SMA_stop : servopos SMB_pin, SMB_stop" : o("R") ? n += "	servopos SMA_pin, SMA_forward : servopos SMB_pin, SMB_back" : o("BL") ? n += "servopos SMA_pin, SMA_back : servopos SMB_pin, SMB_stop" : o("B") ? n += "	servopos SMA_pin, SMA_back : servopos SMB_pin, SMB_back" : o("BR") && (n += "servopos SMA_pin, SMA_stop : servopos SMB_pin, SMB_back"), n += "\n", e.wrapOutput(t, n)
        }, e.picaxe_motors_generic = function(t) {
            var o = t.getFieldValue("MOTORS_TYPE"),
                n = "";
            return "axe020" == o ? n += e.picaxe_motors_CHI035(t) : "axe023" == o ? n += e.picaxe_motors_AXE023(t) : "axe120" == o || "axe120s" == o ? n += e.picaxe_motors_AXE120(t) : "kmr01" == o || "kmr01s" == o ? n += e.picaxe_motors_KMR01(t) : "chi035" == o ? n += e.picaxe_motors_CHI035(t) : "bot120" == o || "bot120s" == o ? n += e.picaxe_motors_BOT120(t) : "servo" == o && (n += e.picaxe_motors_servo(t)), n
        }, e.picaxe_motors_servo_setup = function(t) {
            var o = e.getPinName(t),
                n = e.getPinName2(t),
                i = e.valueToCode(t, "STOPA", e.ORDER_ATOMIC),
                r = e.valueToCode(t, "OFFSETA", e.ORDER_ATOMIC),
                s = e.valueToCode(t, "STOPB", e.ORDER_ATOMIC),
                a = e.valueToCode(t, "OFFSETB", e.ORDER_ATOMIC),
                l = "";
            return l += "#IFNDEF servo_motors_defined\n", l += "#DEFINE servo_motors_defined\n", l += "	symbol SMA_pin = " + o + "\n", l += "	symbol SMA_stop = " + i + "\n", l += "	symbol SMA_speed = " + r + "\n", l += "	symbol SMA_forward = SMA_stop - SMA_speed\n", l += "	symbol SMA_back = SMA_stop + SMA_speed\n", l += "	symbol SMB_pin = " + n + "\n", l += "	symbol SMB_stop = " + s + "\n", l += "	symbol SMB_speed = " + a + "\n", l += "	symbol SMB_forward = SMB_stop + SMB_speed\n", l += "	symbol SMB_back = SMB_stop - SMB_speed\n", l += "	servo SMA_pin, SMA_stop\n", l += "	servo SMB_pin, SMB_stop\n", l += "#ENDIF\n", e.wrapOutput(t, l)
        }
    }), define("blockly/generators/picaxebasic/output", ["../picaxebasic", "../../io"], function(e, t) {
        function o(e, o) {
            var r, s;
            "08" == t.selectedType.substring(0, 2) ? (r = i[e + ".F"], s = i[e + ".R"]) : (r = n[e + ".F"], s = n[e + ".R"]);
            var a, l;
            "F" == o ? (a = "high", l = "low") : "B" == o ? (a = "low", l = "high") : (a = "low", l = "low");
            var c;
            return c = "	" + a + " " + r, c += "\n", c += "	" + l + " " + s, c += "\n"
        }
        var n = {
                "A.R": "B.0",
                "A.F": "B.1",
                "B.R": "B.2",
                "B.F": "B.3",
                "C.R": "B.4",
                "C.F": "B.5",
                "D.R": "B.6",
                "D.F": "B.7"
            },
            i = {
                "A.R": "C.0",
                "A.F": "C.1",
                "B.R": "C.2",
                "B.F": "C.4"
            };
        e.picaxe_output_outputon = function(t) {
            var o = t.getFieldValue("VALUE"),
                n = "1" == o ? "	high" : "	low";
            return n += " " + e.getPinName(t), n += "\n", e.wrapOutput(t, n)
        }, e.picaxe_output_outputonfor = function(t) {
            var o = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                n = t.getFieldValue("VALUE"),
                i = "1" == n ? "	high" : "	low";
            return i += " " + e.getPinName(t), i += "\n", i += e.addLock("	pause " + o + "\n"), i += "1" == n ? "	low" : "	high", i += " " + e.getPinName(t), i += "\n", e.wrapOutput(t, i)
        }, e.picaxe_output_pulseoutput = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                i = "	toggle " + o + "\n";
            return i += "	pause " + n + "\n", i += "	toggle " + o + "\n", e.wrapOutput(t, i)
        }, e.picaxe_output_motor = function(t) {
            var n = t.getFieldValue("MOTOR"),
                i = t.getFieldValue("DIRECTION"),
                r = o(n, i);
            return e.wrapOutput(t, r)
        }, e.picaxe_output_motorfor = function(t) {
            var n = t.getFieldValue("MOTOR"),
                i = t.getFieldValue("DIRECTION"),
                r = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                s = o(n, i);
            return s += e.addLock("	pause " + r + "\n"), s += o(n, "S"), s += "\n", e.wrapOutput(t, s)
        }, e.picaxe_output_sound = function(t) {
            var o = e.valueToCode(t, "NOTE", e.ORDER_ATOMIC),
                n = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                i = e.getPinName(t),
                r = "	sound " + i + ", ( " + o + ", " + n + ")\n";
            return r = e.addLock(r), e.wrapOutput(t, r)
        }, e.picaxe_output_play = function(o) {
            var n, i = e.getPinName(o),
                r = o.getFieldValue("SONG");
            return n = "08" == t.selectedType.substring(0, 2) ? "	play " + r + ", 0\n" : "	play " + i + ", " + r + "\n", e.wrapOutput(o, n)
        }, e.picaxe_output_spe035 = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC),
                i = t.getFieldValue("COMMAND"),
                r = "";
            return "setup" == i && (r += "	high " + o + "\n	pause 1\n"), r += "	setfreq m8\n", r += "	serout " + o + ", T9600_8, ($7E, $FF, $06, ", "play" == i ? r += "$12, $00, $00, " + n + ", $EF)	;SPE035 play\n" : "stop" == i ? r += "$16, $00, $00, $00, $EF)	;SPE035 stop\n" : "pause" == i ? r += "$0E, $00, $00, $00, $EF)	;SPE035 pause\n" : "resume" == i ? r += "$0D, $00, $00, $00, $EF)	;SPE035 resume\n" : "volume" == i ? r += "$06, $00, $00, " + n + ", $EF)	;SPE035 volume\n" : "setup" == i && (r += "$09, $00, $00, $02, $EF)	;SPE035 initialise\n"), r += "	setfreq mdefault\n	pause 100\n", e.wrapOutput(t, r)
        }, e.picaxe_output_tune = function(t) {
            var o = t.getFieldValue("CODE"),
                n = "	" + o + "\n";
            return e.wrapOutput(t, n)
        }, e.picaxe_output_irout = function(t) {
            var o = e.valueToCode(t, "COMMAND", e.ORDER_ATOMIC),
                n = e.getPinName(t),
                i = "	irout " + n + ", 1, " + o + "\n";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_servo = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "POSITION", e.ORDER_ATOMIC),
                i = "	servo " + o + ", " + n + "\n";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_servopos = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "POSITION", e.ORDER_ATOMIC),
                i = "	servopos " + o + ", " + n + "\n";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_pwmout = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "PERIOD", e.ORDER_ATOMIC),
                i = e.valueToCode(t, "DUTY", e.ORDER_ATOMIC),
                r = "	pwmout " + o + ", " + n + ", " + i + "\n";
            return e.wrapOutput(t, r)
        }, e.picaxe_output_pins = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC),
                i = "	let pins" + o + " = " + n + "\n";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_dirs = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC),
                i = "	let dirs" + o + " = " + n + "\n";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_high = function(t) {
            var o = e.getPinName(t),
                n = "	high " + o + "\n";
            return e.wrapOutput(t, n)
        }, e.picaxe_output_low = function(t) {
            var o = e.getPinName(t),
                n = "	low " + o + "\n";
            return e.wrapOutput(t, n)
        }, e.picaxe_output_toggle = function(t) {
            var o = e.getPinName(t),
                n = "	toggle " + o + "\n";
            return e.wrapOutput(t, n)
        }
    }), define("blockly/generators/picaxebasic/procedures", ["blocklylib", "../picaxebasic"], function(e, t) {
        t.procedures_callnoreturn = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Procedures.NAME_TYPE),
                i = "	call " + n + "\n";
            return t.wrapOutput(o, i)
        }, t.procedures_defnoreturn = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Procedures.NAME_TYPE),
                i = t.statementToCode(o, "STACK"),
                r = n + ":\n";
            return r += i, r += "	return\n", t.wrapOutput(o, r)
        }
    }), define("blockly/generators/picaxebasic/serial", ["blocklylib", "../picaxebasic"], function(e, t) {
        t.picaxe_serial_debug = function(e) {
            var o = "	debug\n";
            return t.wrapOutput(e, o)
        }, t.picaxe_serial_serout = function(e) {
            var o = t.getPinName(e),
                n = e.getFieldValue("BAUD"),
                i = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC),
                r = "TRUE" == e.getFieldValue("ASCII");
            '"' != i[0] && r && (i = "#" + i, i = i.replace(/, /g, ", #"));
            var s = "	serout " + o + ", " + n + ", ( " + i + " )\n";
            return t.wrapOutput(e, s)
        }, t.picaxe_serial_sertxd = function(e) {
            var o = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC),
                n = "TRUE" == e.getFieldValue("ASCII");
            '"' != o[0] && n && (o = "#" + o, o = o.replace(/, /g, ", #"));
            var i = "	sertxd ( " + o + " )\n";
            return t.wrapOutput(e, i)
        }, t.picaxe_serial_hserout = function(e) {
            var o = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC),
                n = "	hserout 0, ( " + o + " )\n";
            return n += "	pause 100\n", t.wrapOutput(e, n)
        }, t.picaxe_serial_lcd = function(e) {
            var o = "N2400",
                n = t.getPinName(e),
                i = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC);
            '"' != i[0] && (i = "#" + i);
            var r = "	serout " + n + ", " + o + ", ( " + i + " )\n";
            return t.wrapOutput(e, r)
        }, t.picaxe_serial_lcdcmd = function(e) {
            var o = "N2400",
                n = t.getPinName(e),
                i = e.getFieldValue("CODETAG"),
                r = "	serout " + n + ", " + o + ", ( " + i + " )\n";
            return "254, 1" == i && (r += "	pause 10\n"), t.wrapOutput(e, r)
        }, t.picaxe_serial_serin = function(o) {
            var n = t.getPinName(o),
                i = o.getFieldValue("BAUD"),
                r = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                s = "TRUE" == o.getFieldValue("ASCII") ? "#" : "",
                a = "	serin " + n + ", " + i + ", " + s + r + "\n";
            return t.wrapOutput(o, a)
        }, t.picaxe_serial_serrxd = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                i = "TRUE" == o.getFieldValue("ASCII") ? "#" : "",
                r = "	serrxd " + i + n + "\n";
            return t.wrapOutput(o, r)
        }, t.picaxe_serial_hserin = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                i = "	if hserflag = 1 then\n";
            return i += "		do\n", i += "			let " + n + " = @ptrinc\n", i += "		loop while ptr <> hserptr\n", i += "		let hserflag = 0\n", i += "	else\n", i += "		let " + n + " = 0\n", i += "	end if\n", t.wrapOutput(o, i)
        }, t.picaxe_serial_hsersetup = function(e) {
            var o = e.getFieldValue("BAUD"),
                n = "TRUE" == e.getFieldValue("INVERT") ? ", %111\n" : ", %001\n",
                i = "	hsersetup " + o + n;
            return t.wrapOutput(e, i)
        }
    }), define("blockly/generators/picaxebasic/tasks", ["../picaxebasic"], function(e) {
        e.picaxe_tasks_stop = function(t) {
            var o = "	stop\n";
            return e.wrapOutput(t, o)
        }, e.picaxe_tasks_suspend = function(t) {
            var o = e.valueToCode(t, "TASK", e.ORDER_ATOMIC),
                n = "	suspend " + o + "\n";
            return e.wrapOutput(t, n)
        }, e.picaxe_tasks_resume = function(t) {
            var o = e.valueToCode(t, "TASK", e.ORDER_ATOMIC),
                n = "	resume " + o + "\n";
            return e.wrapOutput(t, n)
        }, e.picaxe_tasks_restart = function(t) {
            var o = e.valueToCode(t, "TASK", e.ORDER_ATOMIC),
                n = "	restart " + o + "\n";
            return e.wrapOutput(t, n)
        }, e.picaxe_tasks_reset = function(t) {
            var o = "	reset\n";
            return e.wrapOutput(t, o)
        }
    }), define("blockly/generators/picaxebasic/vals", ["blocklylib", "../picaxebasic"], function(e, t) {
        t.picaxe_vals_let = function(o) {
            var n = t.valueToCode(o, "VALUE", t.ORDER_ATOMIC),
                i = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                r = "	let " + i + " = " + n + "\n";
            return t.wrapOutput(o, r)
        }, t.picaxe_vals_varop = function(e) {
            var o = t.valueToCode(e, "VAR1", t.ORDER_ATOMIC),
                n = e.getFieldValue("OP"),
                i = t.valueToCode(e, "VAR2", t.ORDER_ATOMIC),
                r = o + " " + n + " " + i;
            return r = t.wrapOutput(e, r, !0), [r, t.ORDER_ATOMIC]
        }, t.picaxe_vals_varcomma = function(e) {
            var o = t.valueToCode(e, "VAR1", t.ORDER_ATOMIC),
                n = t.valueToCode(e, "VAR2", t.ORDER_ATOMIC),
                i = o + " , " + n;
            return i = t.wrapOutput(e, i, !0), [i, t.ORDER_ATOMIC]
        }, t.picaxe_vals_var = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE);
            return [n, t.ORDER_ATOMIC]
        }, t.picaxe_vals_val = function(e) {
            var o = e.getFieldValue("VALUE");
            return [o, t.ORDER_ATOMIC]
        }, t.picaxe_vals_str = function(e) {
            var o = e.getFieldValue("TEXT");
            return o = '"' + o + '"', [o, t.ORDER_ATOMIC]
        }
    }), define("blockly/generators/picaxebasic/variables", ["blocklylib", "../picaxebasic"], function(e, t) {
        t.picaxe_variables_set = function(o) {
            var n = t.valueToCode(o, "VALUE", t.ORDER_ATOMIC),
                i = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                r = "	let " + i + " = " + n + "\n";
            return t.wrapOutput(o, r)
        }, t.picaxe_variables_random = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                i = "	random " + n + "\n";
            return t.wrapOutput(o, i)
        }, t.picaxe_variables_if = function(e) {
            var o = t.statementToCode(e, "THEN"),
                n = t.getComparisonCode(e),
                i = "	if " + n + " then\n";
            return i += o, i += "	endif\n", t.wrapOutput(e, i)
        }, t.picaxe_variables_ifelse = function(e) {
            var o = t.statementToCode(e, "THEN"),
                n = t.statementToCode(e, "ELSE"),
                i = t.getComparisonCode(e),
                r = "	if " + i + " then\n";
            return r += o, r += "	else\n", r += n, r += "	endif\n", t.wrapOutput(e, r)
        }, t.picaxe_variables_inc = function(o) {
            var n = t.valueToCode(o, "VALUE", t.ORDER_ATOMIC),
                i = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                r = "	let " + i + " = " + i + " + " + n + "\n";
            return t.wrapOutput(o, r)
        }, t.picaxe_variables_dec = function(o) {
            var n = t.valueToCode(o, "VALUE", t.ORDER_ATOMIC),
                i = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                r = "	let " + i + " = " + i + " - " + n + "\n";
            return t.wrapOutput(o, r)
        }, t.picaxe_variables_bintoascii = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                i = t.variableDB_.getName(o.getFieldValue("NAME100"), e.Variables.NAME_TYPE),
                r = t.variableDB_.getName(o.getFieldValue("NAME10"), e.Variables.NAME_TYPE),
                s = t.variableDB_.getName(o.getFieldValue("NAME1"), e.Variables.NAME_TYPE),
                a = "	bintoascii " + n + " , " + i + " , " + r + " , " + s + "\n";
            return t.wrapOutput(o, a)
        }
    }), define("blockly/generators/javascript/advanced", ["../javascript", "../../io"], function(e, t) {
        e.picaxe_advanced_comment = function(t) {
            var o = "/* " + t.getFieldValue("CODE").trim() + " */";
            return e.wrapOutput(t, o)
        }, e.picaxe_advanced_slot = function(t) {
            var o = "/* #slot " + t.getFieldValue("SLOT") + " */";
            return e.wrapOutput(t, o)
        }, e.picaxe_advanced_run = function(t) {
            var o = t.getFieldValue("SLOT"),
                n = "/* run " + o + " */";
            return 0 == o && (n = "picaxe.reset();"), e.wrapOutput(t, n)
        }, e.picaxe_advanced_basic = function(t) {
            var o = "/* " + t.getFieldValue("CODE").trim() + " */";
            return e.wrapOutput(t, o)
        }, e.picaxe_advanced_reset = function(t) {
            var o = "picaxe.reset();";
            return e.wrapOutput(t, o)
        }, e.picaxe_advanced_read = function(t) {
            var o = e.valueToCode(t, "LOCATION", e.ORDER_ATOMIC),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC);
            o || (o = 0);
            var i = "";
            return n ? (n = n.replace(/ /g, "").split(","), n.forEach(function(e, t) {
                i += e + " = picaxe.eeprom.read(" + (0 == t ? o : "") + ");\n"
            }), i = i.slice(0, -1)) : i = "\n", e.wrapOutput(t, i)
        }, e.picaxe_advanced_write = function(t) {
            var o = e.valueToCode(t, "LOCATION", e.ORDER_ATOMIC),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC);
            o || (o = 0), n || (n = 0);
            var i = "picaxe.eeprom.write(" + o + ", [" + n + "]);";
            return e.wrapOutput(t, i)
        }, e.picaxe_advanced_i2csetup = function(t) {
            var o = e.valueToCode(t, "ADDRESS", e.ORDER_ATOMIC);
            o || (o = 0);
            var n = "TRUE" == t.getFieldValue("FAST") ? ", picaxe.i2c.FAST" : ", picaxe.i2c.SLOW",
                i = "TRUE" == t.getFieldValue("WORD") ? ", picaxe.i2c.WORD" : ", picaxe.i2c.BYTE",
                r = "picaxe.i2c.setup(picaxe.i2c.MASTER, " + o + n + i + ");";
            return e.wrapOutput(t, r)
        }, e.picaxe_advanced_i2csetup_device = function(t) {
            var o = t.getFieldValue("DEVICE"),
                n = "picaxe.i2c.setup(picaxe.i2c.MASTER, ";
            return "EEPROM" == o && (n += "160, picaxe.i2c.SLOW, picaxe.i2c.BYTE);"), "DS1307" == o && (n += "208, picaxe.i2c.SLOW, picaxe.i2c.BYTE);"), "Nunchuck A" == o && (n += "164, picaxe.i2c.SLOW, picaxe.i2c.BYTE);\npicaxe.pause(10);\npicaxe.i2c.write(60, 0);\n//Remember to decode Nunchuck values! result ^ 0x17 + 0x17 & 0xFF;"), "Nunchuck B" == o && (n += "164, picaxe.i2c.SLOW, picaxe.i2c.BYTE);\npicaxe.pause(10);\npicaxe.i2c.write(240, 85);\npicaxe.i2c.write(251, 0);"), "Lego NXT Color V2" == o && (n += "2, picaxe.i2c.SLOW, picaxe.i2c.BYTE);\n//0x42=color 0x43=red 0x44=green 0x45=blue;"), "Lego NXT Temp" == o && (n += "152, picaxe.i2c.SLOW, picaxe.i2c.BYTE);\npicaxe.i2c.write(1, 0);"), "None" == o && (n += "0, 0, 0);"), e.wrapOutput(t, n)
        }, e.picaxe_advanced_i2cread = function(t) {
            var o = e.valueToCode(t, "LOCATION", e.ORDER_ATOMIC),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC);
            o || (o = 0);
            var i = "";
            return n ? (n = n.replace(/ /g, "").split(","), n.forEach(function(e, t) {
                i += e + " = picaxe.i2c.read(" + (0 == t ? o : "") + ");\n"
            }), i = i.slice(0, -1)) : i = "\n", e.wrapOutput(t, i)
        }, e.picaxe_advanced_i2cwrite = function(t) {
            var o = e.valueToCode(t, "LOCATION", e.ORDER_ATOMIC),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC);
            o || (o = 0), n || (n = 0);
            var i = "picaxe.i2c.write(" + o + ", [ " + n + " ]);";
            return e.wrapOutput(t, i)
        }, e.picaxe_advanced_disconnect = function(t) {
            var o = "picaxe.serial.disconnect();";
            return e.wrapOutput(t, o)
        }, e.picaxe_advanced_reconnect = function(t) {
            var o = "picaxe.serial.reconnect();";
            return e.wrapOutput(t, o)
        }, e.picaxe_advanced_setint = function(t) {
            var o = e.getPinName(t),
                n = "" === o ? "" : ", '" + o[1],
                i = "" === o ? "0" : o[o.length - 2],
                r = "" === o ? "0" : (1 << parseInt(i)).toString(),
                s = t.getFieldValue("STATE"),
                a = "1" == s ? r : "0",
                l = "picaxe.interrupt.setup(" + a + ", " + r + n + "');";
            return e.wrapOutput(t, l)
        }, e.picaxe_advanced_setintoff = function(o) {
            var n = t.getSetintPort(),
                i = "picaxe.interrupt.setup(0, 0, '" + n + "');";
            return e.wrapOutput(o, i)
        }
    }), define("blockly/generators/javascript/control", ["../javascript", "../../block-utils"], function(e, t) {
        e.picaxe_control_start = function(o) {
            var n;
            return n = t.startBlocks.length > 1 ? "//start" + o.startIndex + ":" : "//main:", e.wrapOutput(o, n)
        }
    }), define("blockly/generators/javascript/custom", ["../javascript"], function(e) {
        e.picaxe_custom_outputon = function(t) {
            var o = t.getFieldValue("VALUE"),
                n = "picaxe." + ("1" == o ? "high" : "low");
            return n += "(" + e.getPinName(t) + ");", e.wrapOutput(t, n)
        }
    }), define("blockly/generators/javascript/delays", ["../javascript"], function(e) {
        e.picaxe_delays_pause = function(t) {
            var o = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                n = "picaxe.pause(" + o + ");";
            return e.wrapOutput(t, n)
        }, e.picaxe_delays_sleep = function(t) {
            var o = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                n = parseFloat(o);
            isNaN(n) || (n = Math.abs(n), n = 10 * n / 21, n = Math.floor(n), n = Math.min(n, 65535), o = n.toString(10));
            var i = "picaxe.sleep(" + o + ");";
            return e.wrapOutput(t, i)
        }, e.picaxe_delays_pauseus = function(t) {
            var o = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                n = "picaxe.pauseus(" + o + ");";
            return e.wrapOutput(t, n)
        }, e.picaxe_delays_until_pin = function(t) {
            var o = e.getPinName(t),
                n = t.getFieldValue("STATE"),
                i = "picaxe.pin.read(" + o + ") != " + n,
                r = "do{\n";
            return r += e.getInnerStepCode(t), r += "picaxe.pause(10);\n", r += "}while(" + i + ");", e.wrapOutput(t, r)
        }
    }), define("blockly/generators/javascript/flow", ["../javascript"], function(e) {
        e.getComparisonCode = function(t, o) {
            "undefined" == typeof o && (o = "");
            var n = e.valueToCode(t, "VAR1" + o, e.ORDER_ATOMIC),
                i = t.getFieldValue("OP" + o),
                r = e.valueToCode(t, "VAR2" + o, e.ORDER_ATOMIC);
            return n || (n = 0), r || (r = 0), "<>" == i ? i = "!=" : "=" == i && (i = "=="), n + " " + i + " " + r
        }, e.picaxe_flow_mutator_if = function(t) {
            var o = 0,
                n = e.getComparisonCode(t, 0),
                i = n,
                r = e.statementToCode(t, "THEN" + o),
                s = "if (" + n + "){\n" + r;
            for (o = 1; o <= t.elseifCount_; o++) n = e.getComparisonCode(t, o), r = e.statementToCode(t, "THEN" + o), s += "} else if (" + n + "){\n" + r;
            for (o = 1; o <= t.elseifandCount_; o++) {
                n = e.getComparisonCode(t, 2e3 + o), i = e.getComparisonCode(t, 1e3 + o), r = e.statementToCode(t, "THEN" + (1e3 + o));
                var a = t.getFieldValue("ANDOR" + o);
                a = "AND" == a ? "&&" : "||", s += "} else if ((" + n + ") " + a + " (" + i + ")) {\n" + r
            }
            return t.elseCount_ && (r = e.statementToCode(t, "ELSE"), s += "} else {\n" + r), s += "};", e.wrapOutput(t, s)
        }
    }), define("blockly/generators/javascript/input", ["blocklylib", "../javascript"], function(e, t) {
        t.picaxe_input_ifpin = function(e) {
            var o = t.getPinName(e),
                n = t.statementToCode(e, "THEN"),
                i = e.getFieldValue("STATE"),
                r = "if (picaxe.pin.read(" + o + ") == " + i + "){\n";
            return r += n, r += "}", t.wrapOutput(e, r)
        }, t.picaxe_input_ifpinelse = function(e) {
            var o = t.getPinName(e),
                n = e.getFieldValue("STATE"),
                i = t.statementToCode(e, "THEN"),
                r = t.statementToCode(e, "ELSE"),
                s = "if (picaxe.pin.read(" + o + ") == " + n + "){\n";
            return s += i, s += "} else {\n", s += r, s += "};", t.wrapOutput(e, s)
        }, t.picaxe_input_readadc = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = i + " = picaxe.pin.analog.trigger(" + n + ");\n";
            return r += "picaxe.pause(200);", r += "\nblocklyPostStep(" + o.id + ", false )\n", r += i + " = picaxe.pin.analog.read(" + n + ");", t.wrapOutput(o, r)
        }, t.picaxe_input_readtemp = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = i + " = picaxe.pin.temperature.DS18B20.trigger(" + n + ");\n";
            return r += "picaxe.pause(800);", r += "\nblocklyPostStep(" + o.id + ", false )\n", r += i + " = picaxe.pin.temperature.DS18B20.read(" + n + ");", t.wrapOutput(o, r)
        }, t.picaxe_input_ultra = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = i + " = picaxe.pin.ultrasonic.SRF005.onePin.trigger(" + n + ");\n";
            return r += "picaxe.pause(500);", r += "\nblocklyPostStep(" + o.id + ", false )\n", r += i + " = picaxe.pin.ultrasonic.SRF005.onePin.read(" + n + ");", t.wrapOutput(o, r)
        }, t.picaxe_input_ultra2 = function(o) {
            var n = t.getPinName(o),
                i = t.getPinName2(o),
                r = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                s = r + " = picaxe.pin.ultrasonic.SRF005.twoPin.trigger(" + n + "," + i + ");\n";
            return s += "picaxe.pause(200);", s += "\nblocklyPostStep(" + o.id + ", false )\n", s += r + " = picaxe.pin.ultrasonic.SRF005.twoPin.read(" + n + "," + i + ");", t.wrapOutput(o, s)
        }, t.picaxe_input_irin = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = i + " = picaxe.pin.infrared.LED020.read(" + n + ");";
            return "TRUE" == o.getFieldValue("TV") && (r += "\n" + i + " = " + i + " + 1;"), t.wrapOutput(o, r)
        }, t.picaxe_input_irin_timeout = function(o) {
            var n = t.getPinName(o),
                i = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                r = t.valueToCode(o, "TIMEOUT", t.ORDER_ATOMIC);
            r || (r = "100"), r = "TRUE" == o.getFieldValue("USE_TIMEOUT") ? "[" + r + "], " : "";
            var s = i + " = picaxe.pin.infrared.LED020.read(" + n + ");";
            return "TRUE" == o.getFieldValue("TV") && (s += "\n" + i + " = " + i + " + 1;"), t.wrapOutput(o, s)
        }, t.picaxe_input_inputPin = function(e) {
            var o = t.getPinName(e);
            return ["picaxe.pin.read(" + o + ")", t.ORDER_ATOMIC]
        }, t.picaxe_input_inputPort = function(e) {
            var o = t.getPinName(e);
            return ["picaxe.port.read(" + o + ")", t.ORDER_ATOMIC]
        }
    }), define("blockly/generators/javascript/io", ["../javascript", "../../io"], function(e, t) {
        e.picaxe_io_inputval = function(t) {
            var o = e.getPinName(t);
            return ["picaxe.pin.read(" + o + ")", e.ORDER_ATOMIC]
        }
    }), define("blockly/generators/javascript/loops", ["blocklylib", "../javascript"], function(e, t) {
        t.picaxe_loops_forever = function(e) {
            var o = t.statementToCode(e, "NAME"),
                n = "while(true){\n";
            return n += o, n += "};", t.wrapOutput(e, n)
        }, t.picaxe_loops_repeat = function(e) {
            var o = t.statementToCode(e, "REPEAT"),
                n = t.getComparisonCode(e),
                i = "do{\n";
            return i += o, i += "} while(!(" + n + "));", t.wrapOutput(e, i)
        }, t.picaxe_loops_repeat_pin = function(e) {
            var o = t.statementToCode(e, "REPEAT"),
                n = t.getPinName(e),
                i = e.getFieldValue("STATE"),
                r = "picaxe.pin.read(" + n + ") != " + i,
                s = "do{\n";
            return s += t.getInnerStepCode(e), s += o, s += "}while(" + r + ");", t.wrapOutput(e, s)
        }, t.picaxe_loops_while = function(e) {
            var o = t.statementToCode(e, "DO"),
                n = t.getComparisonCode(e),
                i = "while(" + n + "){\n";
            return i += o, i += "};", t.wrapOutput(e, i)
        }, t.picaxe_loops_while_pin = function(e) {
            var o = t.statementToCode(e, "DO"),
                n = t.getPinName(e),
                i = e.getFieldValue("STATE"),
                r = "picaxe.pin.read(" + n + ") == " + i,
                s = "while(" + r + "){\n";
            return s += t.getInnerStepCode(e), s += o, s += "}", t.wrapOutput(e, s)
        }, t.picaxe_loops_count = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                i = t.valueToCode(o, "FROM", t.ORDER_ATOMIC),
                r = t.valueToCode(o, "TO", t.ORDER_ATOMIC),
                s = t.valueToCode(o, "STEP", t.ORDER_ATOMIC);
            i || (i = 0), r || (r = 0), s || (s = 0);
            var a = t.statementToCode(o, "DO"),
                l = "for (" + n + " = " + i + "; " + n + " <= " + r + "; " + n + " += " + s + "){\n";
            return l += a, l += "};\n", l += n + " -= " + s + ";", t.wrapOutput(o, l)
        }, t.picaxe_loops_countdown = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE),
                i = t.valueToCode(o, "FROM", t.ORDER_ATOMIC),
                r = t.valueToCode(o, "TO", t.ORDER_ATOMIC),
                s = t.valueToCode(o, "STEP", t.ORDER_ATOMIC);
            i || (i = 0), r || (r = 0), s || (s = 0);
            var a = t.statementToCode(o, "DO"),
                l = "";
            return l += 0 == r ? "for (" + n + " = " + i + "; " + n + " < 65000; " + n + " -= " + s + "){\n" : "for (" + n + " = " + i + "; " + n + " >= " + r + "; " + n + " -= " + s + "){\n", l += a, l += "};\n", l += n + " += " + s + ";", t.wrapOutput(o, l)
        }
    }), define("blockly/generators/javascript/motors", ["../javascript"], function(e) {
        e.getMotorListCode = function(e, t) {
            var o = "";
            return e.length > 0 && (o += "picaxe.pin.write([" + e.split(",") + "],0);\n"), t.length > 0 && (o += "picaxe.pin.write([" + t.split(",") + "],1);\n"), o.slice(0, -1)
        }, e.getMotor120Code = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = "",
                i = "";
            o("FL") ? (n = '"B.4","B.5","B.7"', i = '"B.6"') : o("F") ? (n = '"B.5","B.7"', i = '"B.4","B.6"') : o("FR") ? (n = '"B.5","B.6","B.7"', i = '"B.4"') : o("L") ? (n = '"B.4","B.7"', i = '"B.5","B.6"') : o("STOP") ? n = '"B.4","B.5","B.6","B.7"' : o("R") ? (n = '"B.5","B.6"', i = '"B.4","B.7"') : o("BR") ? (n = '"B.4","B.6","B.7"', i = '"B.5"') : o("B") ? (n = '"B.4","B.6"', i = '"B.5","B.7"') : o("BL") && (n = '"B.4","B.5","B.6"', i = '"B.7"');
            var r = e.getMotorListCode(n, i);
            return r
        }, e.getMotorKMR01Code = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = "",
                i = "";
            o("FL") ? (n = '"B.5","B.6","B.7"', i = '"B.4"') : o("F") ? (n = '"B.4","B.6"', i = '"B.5","B.7"') : o("FR") ? (n = '"B.4","B.5","B.7"', i = '"B.6"') : o("R") ? (n = '"B.4","B.7"', i = '"B.5","B.6"') : o("STOP") ? n = '"B.4","B.5","B.6","B.7"' : o("L") ? (n = '"B.5","B.6"', i = '"B.4","B.7"') : o("BL") ? (n = '"B.4","B.6","B.7"', i = '"B.5"') : o("B") ? (n = '"B.5","B.7"', i = '"B.4","B.6"') : o("BR") && (n = '"B.4","B.5","B.6"', i = '"B.7"');
            var r = e.getMotorListCode(n, i);
            return r
        }, e.picaxe_motors_BOT120 = function(t) {
            var o = t.getFieldValue("SPEED");
            return o = o ? -1 != o.indexOf("input") ? 'picaxe.pin.input("C.5", 0);\n' : -1 != o.indexOf("output") ? 'picaxe.pin.output("C.5", 1);\n' : "" : "", o += e.getMotor120Code(t), e.wrapOutput(t, o)
        }, e.picaxe_motors_CHI035 = function(t) {
            var o = e.getMotor120Code(t);
            return e.wrapOutput(t, o)
        }, e.picaxe_motors_AXE120 = function(t) {
            var o = "",
                n = e.valueToCode(t, "LEFT", e.ORDER_ATOMIC),
                i = e.valueToCode(t, "RIGHT", e.ORDER_ATOMIC);
            return (n || i) && (o += 'picaxe.port.DDR.write("B",240);\n', o += 'picaxe.port.write("B",0);\n', o += "picaxe.pause(10);\n"), n && (o += 'picaxe.port.write("B",48);\n', o += 'picaxe.pin.pulse.write("B.6", ' + n + ");\n", o += "picaxe.pause(10);\n"), i && (o += 'picaxe.port.write("B",192);\n', o += 'picaxe.pin.pulse.write("B.4", ' + i + ");\n", o += "picaxe.pause(10);\n"), (n || i) && (o += 'picaxe.port.write("B",0);\n'), o += e.getMotor120Code(t), e.wrapOutput(t, o)
        }, e.picaxe_motors_KMR01 = function(t) {
            var o = "",
                n = e.valueToCode(t, "LEFT", e.ORDER_ATOMIC),
                i = e.valueToCode(t, "RIGHT", e.ORDER_ATOMIC);
            return (n || i) && (o += 'picaxe.port.DDR.write("B",240);\n', o += 'picaxe.port.write("B",0);\n', o += "picaxe.pause(10);\n"), n && (o += 'picaxe.port.write("B",48);\n', o += 'picaxe.pin.pulse.write("B.6", ' + n + ");\n", o += "picaxe.pause(10);\n"), i && (o += 'picaxe.port.write("B",192);\n', o += 'picaxe.pin.pulse.write("B.4", ' + i + ");\n", o += "picaxe.pause(10);\n"), (n || i) && (o += 'picaxe.port.write("B",0);\n'), o += e.getMotorKMR01Code(t), e.wrapOutput(t, o)
        }, e.picaxe_motors_AXE023 = function(t) {
            function o(e) {
                return t.getFieldValue(e) ? "TRUE" == t.getFieldValue(e) : t.getFieldValue("COMMAND_MOTORS") == e
            }
            var n = "",
                i = "";
            o("FL") ? (n = '"C.0","C.1","C.4"', i = '"C.2"') : o("F") ? (n = '"C.1","C.4"', i = '"C.0","C.2"') : o("FR") ? (n = '"C.1","C.2","C.4"', i = '"C.0"') : o("L") ? (n = '"C.0","C.4"', i = '"C.1","C.2"') : o("STOP") ? n = '"C.0","C.1","C.2","C.4"' : o("R") ? (n = '"C.1","C.2"', i = '"C.0","C.4"') : o("BR") ? (n = '"C.0","C.2","C.4"', i = '"C.1"') : o("B") ? (n = '"C.0","C.2"', i = '"C.1","C.4"') : o("BL") && (n = '"C.0","C.1","C.2"', i = '"C.4"');
            var r = e.getMotorListCode(n, i);
            return e.wrapOutput(t, r)
        }, e.picaxe_motors_servo = function(t) {
            var o = "//picaxe_motors_servo;";
            return e.wrapOutput(t, o)
        }, e.picaxe_motors_generic = function(t) {
            var o = t.getFieldValue("MOTORS_TYPE"),
                n = "";
            return "axe023" == o ? n += e.picaxe_motors_AXE023(t) : "axe120" == o || "axe120s" == o ? n += e.picaxe_motors_AXE120(t) : "kmr01" == o || "kmr01s" == o ? n += e.picaxe_motors_KMR01(t) : "chi035" == o ? n += e.picaxe_motors_CHI035(t) : "axe020" == o ? n += e.picaxe_motors_CHI035(t) : "bot120" == o || "bot120s" == o ? n += e.picaxe_motors_BOT120(t) : "servo" == o && (n += e.picaxe_motors_servo(t)), n
        }, e.picaxe_motors_servo_setup = function(t) {
            var o = e.getPinName(t),
                n = e.getPinName2(t),
                i = "picaxe.pin.servo.write(" + o + ", 150);\n";
            return i += "picaxe.pin.servo.write(" + n + ", 150);", e.wrapOutput(t, i)
        }
    }), define("blockly/generators/javascript/output", ["../javascript", "../../io"], function(e, t) {
        function o(e, o) {
            var r, s;
            "08" == t.selectedType.substring(0, 2) ? (r = i[e + ".F"], s = i[e + ".R"]) : (r = n[e + ".F"], s = n[e + ".R"]);
            var a, l;
            "F" == o ? (a = "1", l = "0") : "B" == o ? (a = "0", l = "1") : (a = "0", l = "0");
            var c = "picaxe.pin.write(" + r + ", " + a + ");\n";
            return c += "picaxe.pin.write(" + s + ", " + l + ");"
        }
        var n = {
                "A.R": '"B.0"',
                "A.F": '"B.1"',
                "B.R": '"B.2"',
                "B.F": '"B.3"',
                "C.R": '"B.4"',
                "C.F": '"B.5"',
                "D.R": '"B.6"',
                "D.F": '"B.7"'
            },
            i = {
                "A.R": '"C.0"',
                "A.F": '"C.1"',
                "B.R": '"C.2"',
                "B.F": '"C.4"'
            };
        e.picaxe_output_outputon = function(t) {
            var o = e.getPinName(t),
                n = t.getFieldValue("VALUE"),
                i = "picaxe.pin.write(" + o + "," + n + ");";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_outputonfor = function(t) {
            var o = e.getPinName(t),
                n = t.getFieldValue("VALUE"),
                i = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                r = "picaxe.pin.write(" + o + "," + n + ");\n";
            return r += e.getInnerStepCode(t), r += "picaxe.pause(" + i + ");\n", r += e.getInnerStepCode(t), r += "picaxe.pin.write(" + o + "," + ("1" == n ? 0 : 1) + ");", e.wrapOutput(t, r)
        }, e.picaxe_output_pulseoutput = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                i = "picaxe.pin.toggle(" + o + ");\n";
            return i += e.getInnerStepCode(t), i += "picaxe.pause(" + n + ");\n", i += e.getInnerStepCode(t), i += "picaxe.pin.toggle(" + o + ");", e.wrapOutput(t, i)
        }, e.picaxe_output_motor = function(t) {
            var n = t.getFieldValue("MOTOR"),
                i = t.getFieldValue("DIRECTION"),
                r = o(n, i);
            return e.wrapOutput(t, r)
        }, e.picaxe_output_motorfor = function(t) {
            var n = t.getFieldValue("MOTOR"),
                i = t.getFieldValue("DIRECTION"),
                r = e.valueToCode(t, "TIME", e.ORDER_ATOMIC),
                s = o(n, i);
            return s += "\n", s += e.addLock("picaxe.pause(" + r + ");\n"), s += o(n, "S"), e.wrapOutput(t, s)
        }, e.picaxe_output_sound = function(t) {
            var o = e.valueToCode(t, "NOTE", e.ORDER_ATOMIC),
                n = e.valueToCode(t, "TIME", e.ORDER_ATOMIC);
            o || (o = 0), n || (n = 0);
            var i = e.getPinName(t),
                r = "picaxe.pin.sound.beep(" + i + "," + o + "," + n + ");";
            return r = e.addLock(r), e.wrapOutput(t, r)
        }, e.picaxe_output_play = function(t) {
            var o = e.getPinName(t),
                n = t.getFieldValue("SONG"),
                i = "picaxe.pin.sound.playTune(" + o + "," + n + ");";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_spe035 = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC),
                i = t.getFieldValue("COMMAND"),
                r = "";
            return "play" == i ? (n || (n = 0), r += "picaxe.pin.sound.playMP3(" + o + "," + n + ");") : "stop" == i ? r += "picaxe.pin.sound.stopMP3();" : "pause" == i ? r += "picaxe.pin.sound.pauseMP3();" : "resume" == i ? r += "picaxe.pin.sound.resumeMP3();" : "volume" == i ? r += "picaxe.pin.sound.setVolumeMP3(" + n + ");" : "setup" == i && (r += "picaxe.pin.write(" + o + ",1);"), e.wrapOutput(t, r)
        }, e.picaxe_output_tune = function(t) {
            var o = "/* " + t.getFieldValue("CODE").trim() + " */";
            return e.wrapOutput(t, o)
        }, e.picaxe_output_irout = function(t) {
            var o = e.valueToCode(t, "COMMAND", e.ORDER_ATOMIC);
            o || (o = 0);
            var n = e.getPinName(t),
                i = "picaxe.pin.infrared.LED020.write(" + n + ", 1, " + o + ");";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_servo = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "POSITION", e.ORDER_ATOMIC);
            n || (n = 0);
            var i = "picaxe.pin.servo.write(" + o + "," + n + ");";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_servopos = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "POSITION", e.ORDER_ATOMIC);
            n || (n = 0);
            var i = "picaxe.pin.servo.write(" + o + "," + n + ");";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_pwmout = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "PERIOD", e.ORDER_ATOMIC),
                i = e.valueToCode(t, "DUTY", e.ORDER_ATOMIC);
            n || (n = 0), i || (i = 0);
            var r = "picaxe.pwm.setup(" + o + "," + n + "," + i + ");";
            return e.wrapOutput(t, r)
        }, e.picaxe_output_pins = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC);
            n || (n = 0);
            var i = "picaxe.port.write(" + o + "," + n + ");";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_dirs = function(t) {
            var o = e.getPinName(t),
                n = e.valueToCode(t, "VALUE", e.ORDER_ATOMIC);
            n || (n = 0);
            var i = "picaxe.port.DDR.write(" + o + "," + n + ");";
            return e.wrapOutput(t, i)
        }, e.picaxe_output_high = function(t) {
            var o = e.getPinName(t),
                n = "picaxe.pin.write(" + o + ",1);";
            return e.wrapOutput(t, n)
        }, e.picaxe_output_low = function(t) {
            var o = e.getPinName(t),
                n = "picaxe.pin.write(" + o + ",0);";
            return e.wrapOutput(t, n)
        }, e.picaxe_output_toggle = function(t) {
            var o = e.getPinName(t),
                n = "picaxe.pin.invert(" + o + ");";
            return e.wrapOutput(t, n)
        }
    }), define("blockly/generators/javascript/procedures", ["blocklylib", "../javascript"], function(e, t) {
        t.procedures_callnoreturn = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Procedures.NAME_TYPE),
                i = n + "();";
            return t.wrapOutput(o, i, !0)
        }, t.procedures_defnoreturn = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Procedures.NAME_TYPE),
                i = t.statementToCode(o, "STACK"),
                r = "function " + n + "(){\n";
            return o.warning && (r = r + t.WARNING_COMMAND + "(" + o.id + ");\n"), r += i, r += "};", t.wrapOutput(o, r)
        }
    }), define("blockly/generators/javascript/serial", ["blocklylib", "../javascript"], function(e, t) {
        t.picaxe_serial_debug = function(e) {
            var o = "picaxe.debug();";
            return t.wrapOutput(e, o)
        }, t.picaxe_serial_serout = function(e) {
            var o = t.getPinName(e),
                n = 'picaxe.serial.baud("' + e.getFieldValue("BAUD") + '")',
                i = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC);
            i || (i = 0);
            var r = "TRUE" == e.getFieldValue("ASCII");
            '"' != i[0] && r;
            var s = "picaxe.serial.write(" + o + ", " + n + ", " + i + ");";
            return t.wrapOutput(e, s)
        }, t.picaxe_serial_sertxd = function(e) {
            var o = '"txd"',
                n = 'picaxe.serial.baud("N4800")',
                i = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC);
            i || (i = 0);
            var r = "TRUE" == e.getFieldValue("ASCII");
            '"' != i[0] && r;
            var s = "picaxe.serial.write(" + o + ", " + n + ", " + i + ");";
            return t.wrapOutput(e, s)
        }, t.picaxe_serial_hserout = function(e) {
            var o = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC);
            o || (o = 0);
            var n = "picaxe.serial.EUSART.write(0," + o + ");\n";
            return n += t.getInnerStepCode(e), n += "picaxe.pause(100);", t.wrapOutput(e, n)
        }, t.picaxe_serial_lcd = function(e) {
            var o = 'picaxe.serial.baud("N2400")',
                n = t.getPinName(e),
                i = t.valueToCode(e, "VALUE", t.ORDER_ATOMIC);
            i || (i = 0), '"' != i[0];
            var r = "picaxe.serial.write(" + n + ", " + o + "," + i + " );";
            return t.wrapOutput(e, r)
        }, t.picaxe_serial_lcdcmd = function(e) {
            var o = 'picaxe.serial.baud("N2400")',
                n = t.getPinName(e),
                i = e.getFieldValue("CODETAG"),
                r = "picaxe.serial.write(" + n + ", " + o + ", [ " + i + " ]);\n";
            return "254, 1" == i && (r += t.getInnerStepCode(e), r += "picaxe.pause(10);"), t.wrapOutput(e, r)
        }, t.picaxe_serial_serin = function(o) {
            var n = t.getPinName(o),
                i = 'picaxe.serial.baud("' + o.getFieldValue("BAUD") + '")',
                r = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                s = "TRUE" == o.getFieldValue("ASCII"),
                a = r + " = picaxe.serial.read(" + n + ", " + i + ", " + s + ");";
            return t.wrapOutput(o, a)
        }, t.picaxe_serial_serrxd = function(o) {
            var n = '"rxd"',
                i = 'picaxe.serial.baud("N4800")',
                r = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                s = "TRUE" == o.getFieldValue("ASCII"),
                a = "picaxe.serial.disconnect();\n";
            return a += r + " = picaxe.serial.read(" + n + ", " + i + ", " + s + ");", t.wrapOutput(o, a)
        }, t.picaxe_serial_hserin = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                i = n + " = picaxe.serial.EUSART.read();";
            return t.wrapOutput(o, i)
        }, t.picaxe_serial_hsersetup = function(e) {
            var o = e.getFieldValue("BAUD"),
                n = "TRUE" == e.getFieldValue("INVERT") ? "7" : "1",
                i = 'picaxe.serial.EUSART.setup("' + o + '", ' + n + ");";
            return t.wrapOutput(e, i)
        }
    }), define("blockly/generators/javascript/tasks", ["../javascript"], function(e) {
        e.picaxe_tasks_stop = function(t) {
            var o = "picaxe.tasks.stopActive();";
            return e.wrapOutput(t, o)
        }, e.picaxe_tasks_suspend = function(t) {
            var o = e.valueToCode(t, "TASK", e.ORDER_ATOMIC);
            o || (o = 0);
            var n = "picaxe.tasks.suspend(" + o + ");";
            return e.wrapOutput(t, n)
        }, e.picaxe_tasks_resume = function(t) {
            var o = e.valueToCode(t, "TASK", e.ORDER_ATOMIC);
            o || (o = 0);
            var n = "picaxe.tasks.resume(" + o + ");";
            return e.wrapOutput(t, n)
        }, e.picaxe_tasks_restart = function(t) {
            var o = e.valueToCode(t, "TASK", e.ORDER_ATOMIC);
            o || (o = 0);
            var n = "picaxe.tasks.restart(" + o + ");";
            return e.wrapOutput(t, n)
        }, e.picaxe_tasks_reset = function(t) {
            var o = "picaxe.tasks.reset();";
            return e.wrapOutput(t, o)
        }
    }), define("blockly/generators/javascript/vals", ["blocklylib", "../javascript"], function(e, t) {
        t.picaxe_vals_let = function(o) {
            var n = t.valueToCode(o, "VALUE", t.ORDER_ATOMIC);
            n || (n = 0);
            var i = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                r = i + "=" + n + ";";
            return t.wrapOutput(o, r)
        }, t.picaxe_vals_varop = function(e) {
            var o = t.valueToCode(e, "VAR1", t.ORDER_ATOMIC),
                n = e.getFieldValue("OP"),
                i = t.valueToCode(e, "VAR2", t.ORDER_ATOMIC);
            o || (o = 0), i || (i = 0);
            var r;
            switch (n) {
                case "and":
                    n = "&";
                    break;
                case "or":
                    n = "|";
                    break;
                case "xor":
                    n = "^";
                    break;
                case "*":
                    r = o + "*" + i + " & 0xFFFF";
                    break;
                case "**":
                    r = o + "*" + i + " / 0x10000";
                    break;
                case "min":
                    r = "Math.min(" + o + "," + i + ")";
                    break;
                case "max":
                    r = "Math.max(" + o + "," + i + ")"
            }
            return r || (r = o + " " + n + " " + i), [r, t.ORDER_ATOMIC]
        }, t.picaxe_vals_varcomma = function(e) {
            var o = t.valueToCode(e, "VAR1", t.ORDER_ATOMIC),
                n = t.valueToCode(e, "VAR2", t.ORDER_ATOMIC);
            return o || (o = 0), n || (n = 0), [o + " , " + n, t.ORDER_ATOMIC]
        }, t.picaxe_vals_var = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("VAR"), e.Variables.NAME_TYPE);
            return [n, t.ORDER_ATOMIC]
        }, t.picaxe_vals_val = function(e) {
            var o = e.getFieldValue("VALUE").replace("$", "0x").replace("%", "0b").replace("0B", "0b");
            if (-1 != o.indexOf("0b")) {
                var n = o.substring(2);
                o = parseInt(n, 2)
            }
            return [o, t.ORDER_ATOMIC]
        }, t.picaxe_vals_str = function(e) {
            var o = e.getFieldValue("TEXT");
            return o = '"' + o + '"', [o, t.ORDER_ATOMIC]
        }
    }), define("blockly/generators/javascript/variables", ["blocklylib", "../javascript"], function(e, t) {
        t.picaxe_variables_set = function(o) {
            var n = t.valueToCode(o, "VALUE", t.ORDER_ATOMIC);
            n || (n = 0);
            var i = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                r = i + " = " + n + ";";
            return t.wrapOutput(o, r)
        }, t.picaxe_variables_random = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                i = n + " = Math.round(Math.random() * 65535);";
            return t.wrapOutput(o, i)
        }, t.picaxe_variables_inc = function(o) {
            var n = t.valueToCode(o, "VALUE", t.ORDER_ATOMIC);
            n || (n = 0);
            var i = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                r = i + "=" + i + "+" + n + ";";
            return t.wrapOutput(o, r)
        }, t.picaxe_variables_dec = function(o) {
            var n = t.valueToCode(o, "VALUE", t.ORDER_ATOMIC);
            n || (n = 0);
            var i = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                r = i + "=" + i + "-" + n + ";";
            return t.wrapOutput(o, r)
        }, t.picaxe_variables_bintoascii = function(o) {
            var n = t.variableDB_.getName(o.getFieldValue("NAME"), e.Variables.NAME_TYPE),
                i = t.variableDB_.getName(o.getFieldValue("NAME100"), e.Variables.NAME_TYPE),
                r = t.variableDB_.getName(o.getFieldValue("NAME10"), e.Variables.NAME_TYPE),
                s = t.variableDB_.getName(o.getFieldValue("NAME1"), e.Variables.NAME_TYPE),
                a = i + " = picaxe.bin2ascii(" + n + ", 100);\n";
            return a += r + " = picaxe.bin2ascii(" + n + ", 10);\n", a += s + " = picaxe.bin2ascii(" + n + ", 1);", t.wrapOutput(o, a)
        }
    }), define("blockly/picaxe", ["./blocks/advanced", "./blocks/control", "./blocks/custom", "./blocks/delays", "./blocks/flow", "./blocks/input", "./blocks/io", "./blocks/loops", "./blocks/motors", "./blocks/output", "./blocks/procedures", "./blocks/serial", "./blocks/tasks", "./blocks/vals", "./blocks/variables", "./generators/picaxebasic/advanced", "./generators/picaxebasic/control", "./generators/picaxebasic/custom", "./generators/picaxebasic/delays", "./generators/picaxebasic/flow", "./generators/picaxebasic/input", "./generators/picaxebasic/io", "./generators/picaxebasic/loops", "./generators/picaxebasic/motors", "./generators/picaxebasic/output", "./generators/picaxebasic/procedures", "./generators/picaxebasic/serial", "./generators/picaxebasic/tasks", "./generators/picaxebasic/vals", "./generators/picaxebasic/variables", "./generators/javascript/advanced", "./generators/javascript/control", "./generators/javascript/custom", "./generators/javascript/delays", "./generators/javascript/flow", "./generators/javascript/input", "./generators/javascript/io", "./generators/javascript/loops", "./generators/javascript/motors", "./generators/javascript/output", "./generators/javascript/procedures", "./generators/javascript/serial", "./generators/javascript/tasks", "./generators/javascript/vals", "./generators/javascript/variables", "./generators/picaxebasic", "./generators/javascript"], function() {}), define("boot", ["jquery", "language-selection", "./queue", "./lang", "./ui/tabs", "./ui/ui", "./project", "./controller/controller", "./settings/settings", "./config", "./events", "./blockly/picaxe"], function(e, t, o, n, i, r, s, a, l, c, u) {
        var g, p, h = new o(function() {
            i.init(), r.init(g), s.init(g, p), l.init(), a.init(), u.inited.dispatch()
        });
        h.add(), e.get("xml/example.xml", function(e) {
            p = e.firstChild, h.remove()
        }, "xml"), h.add(), e.get("xml/toolbox.xml", function(e) {
            g = e.firstChild, h.remove()
        }, "xml"), h.add(), "undefined" != typeof chrome && chrome.runtime && "function" == typeof chrome.runtime.getManifest ? (c.version = chrome.runtime.getManifest().version, h.remove()) : e.getJSON("../manifest.json").done(function(e) {
            c.version = e.version, h.remove()
        }), h.add(), n.textLoaded.addOnce(h.remove), t.inited.addOnce(function() {
            n.load(t.getLangCode())
        }), t.init("#languageMenu", "#languageMenuLabel"), h.add(), e.ajax("cloud-marker.txt", {
            complete: function(e) {
                -1 != e.responseText.indexOf("OK") && (h.add(), require(["cloud-controller"], h.remove), h.add(), require(["cloudweb-controller"], h.remove), h.remove())
            },
            error: function(e) {
                h.add(), require(["default-controller"], h.remove), h.remove()
            }
        }), c.isApp && (h.add(), require(["app-controller"], h.remove), h.add(), require(["cloud-controller"], h.remove)), c.isPicaxeEditor && (h.add(), require(["external-api"], h.remove))
    }), "undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery"); + function(e) {
    var t = e.fn.jquery.split(" ")[0].split(".");
    if (t[0] < 2 && t[1] < 9 || 1 == t[0] && 9 == t[1] && t[2] < 1) throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")
}(jQuery), + function(e) {
    function t() {
        var e = document.createElement("bootstrap"),
            t = {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd otransitionend",
                transition: "transitionend"
            };
        for (var o in t)
            if (void 0 !== e.style[o]) return {
                end: t[o]
            };
        return !1
    }
    e.fn.emulateTransitionEnd = function(t) {
        var o = !1,
            n = this;
        e(this).one("bsTransitionEnd", function() {
            o = !0
        });
        var i = function() {
            o || e(n).trigger(e.support.transition.end)
        };
        return setTimeout(i, t), this
    }, e(function() {
        e.support.transition = t(), e.support.transition && (e.event.special.bsTransitionEnd = {
            bindType: e.support.transition.end,
            delegateType: e.support.transition.end,
            handle: function(t) {
                return e(t.target).is(this) ? t.handleObj.handler.apply(this, arguments) : void 0
            }
        })
    })
}(jQuery), + function(e) {
    function t(t) {
        return this.each(function() {
            var o = e(this),
                i = o.data("bs.alert");
            i || o.data("bs.alert", i = new n(this)), "string" == typeof t && i[t].call(o)
        })
    }
    var o = '[data-dismiss="alert"]',
        n = function(t) {
            e(t).on("click", o, this.close)
        };
    n.VERSION = "3.3.4", n.TRANSITION_DURATION = 150, n.prototype.close = function(t) {
        function o() {
            s.detach().trigger("closed.bs.alert").remove()
        }
        var i = e(this),
            r = i.attr("data-target");
        r || (r = i.attr("href"), r = r && r.replace(/.*(?=#[^\s]*$)/, ""));
        var s = e(r);
        t && t.preventDefault(), s.length || (s = i.closest(".alert")), s.trigger(t = e.Event("close.bs.alert")), t.isDefaultPrevented() || (s.removeClass("in"), e.support.transition && s.hasClass("fade") ? s.one("bsTransitionEnd", o).emulateTransitionEnd(n.TRANSITION_DURATION) : o())
    };
    var i = e.fn.alert;
    e.fn.alert = t, e.fn.alert.Constructor = n, e.fn.alert.noConflict = function() {
        return e.fn.alert = i, this
    }, e(document).on("click.bs.alert.data-api", o, n.prototype.close)
}(jQuery), + function(e) {
    function t(t) {
        return this.each(function() {
            var n = e(this),
                i = n.data("bs.button"),
                r = "object" == typeof t && t;
            i || n.data("bs.button", i = new o(this, r)), "toggle" == t ? i.toggle() : t && i.setState(t)
        })
    }
    var o = function(t, n) {
        this.$element = e(t), this.options = e.extend({}, o.DEFAULTS, n), this.isLoading = !1
    };
    o.VERSION = "3.3.4", o.DEFAULTS = {
        loadingText: "loading..."
    }, o.prototype.setState = function(t) {
        var o = "disabled",
            n = this.$element,
            i = n.is("input") ? "val" : "html",
            r = n.data();
        t += "Text", null == r.resetText && n.data("resetText", n[i]()), setTimeout(e.proxy(function() {
            n[i](null == r[t] ? this.options[t] : r[t]), "loadingText" == t ? (this.isLoading = !0, n.addClass(o).attr(o, o)) : this.isLoading && (this.isLoading = !1, n.removeClass(o).removeAttr(o))
        }, this), 0)
    }, o.prototype.toggle = function() {
        var e = !0,
            t = this.$element.closest('[data-toggle="buttons"]');
        if (t.length) {
            var o = this.$element.find("input");
            "radio" == o.prop("type") && (o.prop("checked") && this.$element.hasClass("active") ? e = !1 : t.find(".active").removeClass("active")), e && o.prop("checked", !this.$element.hasClass("active")).trigger("change")
        } else this.$element.attr("aria-pressed", !this.$element.hasClass("active"));
        e && this.$element.toggleClass("active")
    };
    var n = e.fn.button;
    e.fn.button = t, e.fn.button.Constructor = o, e.fn.button.noConflict = function() {
        return e.fn.button = n, this
    }, e(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function(o) {
        var n = e(o.target);
        n.hasClass("btn") || (n = n.closest(".btn")), t.call(n, "toggle"), o.preventDefault()
    }).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]', function(t) {
        e(t.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(t.type))
    })
}(jQuery), + function(e) {
    function t(t) {
        return this.each(function() {
            var n = e(this),
                i = n.data("bs.carousel"),
                r = e.extend({}, o.DEFAULTS, n.data(), "object" == typeof t && t),
                s = "string" == typeof t ? t : r.slide;
            i || n.data("bs.carousel", i = new o(this, r)), "number" == typeof t ? i.to(t) : s ? i[s]() : r.interval && i.pause().cycle()
        })
    }
    var o = function(t, o) {
        this.$element = e(t), this.$indicators = this.$element.find(".carousel-indicators"), this.options = o, this.paused = null, this.sliding = null, this.interval = null, this.$active = null, this.$items = null, this.options.keyboard && this.$element.on("keydown.bs.carousel", e.proxy(this.keydown, this)), "hover" == this.options.pause && !("ontouchstart" in document.documentElement) && this.$element.on("mouseenter.bs.carousel", e.proxy(this.pause, this)).on("mouseleave.bs.carousel", e.proxy(this.cycle, this))
    };
    o.VERSION = "3.3.4", o.TRANSITION_DURATION = 600, o.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0,
        keyboard: !0
    }, o.prototype.keydown = function(e) {
        if (!/input|textarea/i.test(e.target.tagName)) {
            switch (e.which) {
                case 37:
                    this.prev();
                    break;
                case 39:
                    this.next();
                    break;
                default:
                    return
            }
            e.preventDefault()
        }
    }, o.prototype.cycle = function(t) {
        return t || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval)), this
    }, o.prototype.getItemIndex = function(e) {
        return this.$items = e.parent().children(".item"), this.$items.index(e || this.$active)
    }, o.prototype.getItemForDirection = function(e, t) {
        var o = this.getItemIndex(t),
            n = "prev" == e && 0 === o || "next" == e && o == this.$items.length - 1;
        if (n && !this.options.wrap) return t;
        var i = "prev" == e ? -1 : 1,
            r = (o + i) % this.$items.length;
        return this.$items.eq(r)
    }, o.prototype.to = function(e) {
        var t = this,
            o = this.getItemIndex(this.$active = this.$element.find(".item.active"));
        return e > this.$items.length - 1 || 0 > e ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function() {
            t.to(e)
        }) : o == e ? this.pause().cycle() : this.slide(e > o ? "next" : "prev", this.$items.eq(e))
    }, o.prototype.pause = function(t) {
        return t || (this.paused = !0), this.$element.find(".next, .prev").length && e.support.transition && (this.$element.trigger(e.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this
    }, o.prototype.next = function() {
        return this.sliding ? void 0 : this.slide("next")
    }, o.prototype.prev = function() {
        return this.sliding ? void 0 : this.slide("prev")
    }, o.prototype.slide = function(t, n) {
        var i = this.$element.find(".item.active"),
            r = n || this.getItemForDirection(t, i),
            s = this.interval,
            a = "next" == t ? "left" : "right",
            l = this;
        if (r.hasClass("active")) return this.sliding = !1;
        var c = r[0],
            u = e.Event("slide.bs.carousel", {
                relatedTarget: c,
                direction: a
            });
        if (this.$element.trigger(u), !u.isDefaultPrevented()) {
            if (this.sliding = !0, s && this.pause(), this.$indicators.length) {
                this.$indicators.find(".active").removeClass("active");
                var g = e(this.$indicators.children()[this.getItemIndex(r)]);
                g && g.addClass("active")
            }
            var p = e.Event("slid.bs.carousel", {
                relatedTarget: c,
                direction: a
            });
            return e.support.transition && this.$element.hasClass("slide") ? (r.addClass(t), r[0].offsetWidth, i.addClass(a), r.addClass(a), i.one("bsTransitionEnd", function() {
                r.removeClass([t, a].join(" ")).addClass("active"), i.removeClass(["active", a].join(" ")), l.sliding = !1, setTimeout(function() {
                    l.$element.trigger(p)
                }, 0)
            }).emulateTransitionEnd(o.TRANSITION_DURATION)) : (i.removeClass("active"), r.addClass("active"), this.sliding = !1, this.$element.trigger(p)), s && this.cycle(), this
        }
    };
    var n = e.fn.carousel;
    e.fn.carousel = t, e.fn.carousel.Constructor = o, e.fn.carousel.noConflict = function() {
        return e.fn.carousel = n, this
    };
    var i = function(o) {
        var n, i = e(this),
            r = e(i.attr("data-target") || (n = i.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, ""));
        if (r.hasClass("carousel")) {
            var s = e.extend({}, r.data(), i.data()),
                a = i.attr("data-slide-to");
            a && (s.interval = !1), t.call(r, s), a && r.data("bs.carousel").to(a), o.preventDefault()
        }
    };
    e(document).on("click.bs.carousel.data-api", "[data-slide]", i).on("click.bs.carousel.data-api", "[data-slide-to]", i), e(window).on("load", function() {
        e('[data-ride="carousel"]').each(function() {
            var o = e(this);
            t.call(o, o.data())
        })
    })
}(jQuery), + function(e) {
    function t(t) {
        var o, n = t.attr("data-target") || (o = t.attr("href")) && o.replace(/.*(?=#[^\s]+$)/, "");
        return e(n)
    }

    function o(t) {
        return this.each(function() {
            var o = e(this),
                i = o.data("bs.collapse"),
                r = e.extend({}, n.DEFAULTS, o.data(), "object" == typeof t && t);
            !i && r.toggle && /show|hide/.test(t) && (r.toggle = !1), i || o.data("bs.collapse", i = new n(this, r)), "string" == typeof t && i[t]()
        })
    }
    var n = function(t, o) {
        this.$element = e(t), this.options = e.extend({}, n.DEFAULTS, o), this.$trigger = e('[data-toggle="collapse"][href="#' + t.id + '"],[data-toggle="collapse"][data-target="#' + t.id + '"]'), this.transitioning = null, this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger), this.options.toggle && this.toggle()
    };
    n.VERSION = "3.3.4", n.TRANSITION_DURATION = 350, n.DEFAULTS = {
        toggle: !0
    }, n.prototype.dimension = function() {
        var e = this.$element.hasClass("width");
        return e ? "width" : "height"
    }, n.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var t, i = this.$parent && this.$parent.children(".panel").children(".in, .collapsing");
            if (!(i && i.length && (t = i.data("bs.collapse"), t && t.transitioning))) {
                var r = e.Event("show.bs.collapse");
                if (this.$element.trigger(r), !r.isDefaultPrevented()) {
                    i && i.length && (o.call(i, "hide"), t || i.data("bs.collapse", null));
                    var s = this.dimension();
                    this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded", !0), this.$trigger.removeClass("collapsed").attr("aria-expanded", !0), this.transitioning = 1;
                    var a = function() {
                        this.$element.removeClass("collapsing").addClass("collapse in")[s](""), this.transitioning = 0, this.$element.trigger("shown.bs.collapse")
                    };
                    if (!e.support.transition) return a.call(this);
                    var l = e.camelCase(["scroll", s].join("-"));
                    this.$element.one("bsTransitionEnd", e.proxy(a, this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][l])
                }
            }
        }
    }, n.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var t = e.Event("hide.bs.collapse");
            if (this.$element.trigger(t), !t.isDefaultPrevented()) {
                var o = this.dimension();
                this.$element[o](this.$element[o]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1), this.$trigger.addClass("collapsed").attr("aria-expanded", !1), this.transitioning = 1;
                var i = function() {
                    this.transitioning = 0, this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")
                };
                return e.support.transition ? void this.$element[o](0).one("bsTransitionEnd", e.proxy(i, this)).emulateTransitionEnd(n.TRANSITION_DURATION) : i.call(this)
            }
        }
    }, n.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    }, n.prototype.getParent = function() {
        return e(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each(e.proxy(function(o, n) {
            var i = e(n);
            this.addAriaAndCollapsedClass(t(i), i)
        }, this)).end()
    }, n.prototype.addAriaAndCollapsedClass = function(e, t) {
        var o = e.hasClass("in");
        e.attr("aria-expanded", o), t.toggleClass("collapsed", !o).attr("aria-expanded", o)
    };
    var i = e.fn.collapse;
    e.fn.collapse = o, e.fn.collapse.Constructor = n, e.fn.collapse.noConflict = function() {
        return e.fn.collapse = i, this
    }, e(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function(n) {
        var i = e(this);
        i.attr("data-target") || n.preventDefault();
        var r = t(i),
            s = r.data("bs.collapse"),
            a = s ? "toggle" : i.data();
        o.call(r, a)
    })
}(jQuery), + function(e) {
    function t(t) {
        t && 3 === t.which || (e(i).remove(), e(r).each(function() {
            var n = e(this),
                i = o(n),
                r = {
                    relatedTarget: this
                };
            i.hasClass("open") && (i.trigger(t = e.Event("hide.bs.dropdown", r)), t.isDefaultPrevented() || (n.attr("aria-expanded", "false"), i.removeClass("open").trigger("hidden.bs.dropdown", r)))
        }))
    }

    function o(t) {
        var o = t.attr("data-target");
        o || (o = t.attr("href"), o = o && /#[A-Za-z]/.test(o) && o.replace(/.*(?=#[^\s]*$)/, ""));
        var n = o && e(o);
        return n && n.length ? n : t.parent()
    }

    function n(t) {
        return this.each(function() {
            var o = e(this),
                n = o.data("bs.dropdown");
            n || o.data("bs.dropdown", n = new s(this)), "string" == typeof t && n[t].call(o)
        })
    }
    var i = ".dropdown-backdrop",
        r = '[data-toggle="dropdown"]',
        s = function(t) {
            e(t).on("click.bs.dropdown", this.toggle)
        };
    s.VERSION = "3.3.4", s.prototype.toggle = function(n) {
        var i = e(this);
        if (!i.is(".disabled, :disabled")) {
            var r = o(i),
                s = r.hasClass("open");
            if (t(), !s) {
                "ontouchstart" in document.documentElement && !r.closest(".navbar-nav").length && e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click", t);
                var a = {
                    relatedTarget: this
                };
                if (r.trigger(n = e.Event("show.bs.dropdown", a)), n.isDefaultPrevented()) return;
                i.trigger("focus").attr("aria-expanded", "true"), r.toggleClass("open").trigger("shown.bs.dropdown", a)
            }
            return !1
        }
    }, s.prototype.keydown = function(t) {
        if (/(38|40|27|32)/.test(t.which) && !/input|textarea/i.test(t.target.tagName)) {
            var n = e(this);
            if (t.preventDefault(), t.stopPropagation(), !n.is(".disabled, :disabled")) {
                var i = o(n),
                    s = i.hasClass("open");
                if (!s && 27 != t.which || s && 27 == t.which) return 27 == t.which && i.find(r).trigger("focus"), n.trigger("click");
                var a = " li:not(.disabled):visible a",
                    l = i.find('[role="menu"]' + a + ', [role="listbox"]' + a);
                if (l.length) {
                    var c = l.index(t.target);
                    38 == t.which && c > 0 && c--, 40 == t.which && c < l.length - 1 && c++, ~c || (c = 0), l.eq(c).trigger("focus")
                }
            }
        }
    };
    var a = e.fn.dropdown;
    e.fn.dropdown = n, e.fn.dropdown.Constructor = s, e.fn.dropdown.noConflict = function() {
        return e.fn.dropdown = a, this
    }, e(document).on("click.bs.dropdown.data-api", t).on("click.bs.dropdown.data-api", ".dropdown form", function(e) {
        e.stopPropagation()
    }).on("click.bs.dropdown.data-api", r, s.prototype.toggle).on("keydown.bs.dropdown.data-api", r, s.prototype.keydown).on("keydown.bs.dropdown.data-api", '[role="menu"]', s.prototype.keydown).on("keydown.bs.dropdown.data-api", '[role="listbox"]', s.prototype.keydown)
}(jQuery), + function(e) {
    function t(t, n) {
        return this.each(function() {
            var i = e(this),
                r = i.data("bs.modal"),
                s = e.extend({}, o.DEFAULTS, i.data(), "object" == typeof t && t);
            r || i.data("bs.modal", r = new o(this, s)), "string" == typeof t ? r[t](n) : s.show && r.show(n)
        })
    }
    var o = function(t, o) {
        this.options = o, this.$body = e(document.body), this.$element = e(t), this.$dialog = this.$element.find(".modal-dialog"), this.$backdrop = null, this.isShown = null, this.originalBodyPad = null, this.scrollbarWidth = 0, this.ignoreBackdropClick = !1, this.options.remote && this.$element.find(".modal-content").load(this.options.remote, e.proxy(function() {
            this.$element.trigger("loaded.bs.modal")
        }, this))
    };
    o.VERSION = "3.3.4", o.TRANSITION_DURATION = 300, o.BACKDROP_TRANSITION_DURATION = 150, o.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    }, o.prototype.toggle = function(e) {
        return this.isShown ? this.hide() : this.show(e)
    }, o.prototype.show = function(t) {
        var n = this,
            i = e.Event("show.bs.modal", {
                relatedTarget: t
            });
        this.$element.trigger(i), this.isShown || i.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.setScrollbar(), this.$body.addClass("modal-open"), this.escape(), this.resize(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', e.proxy(this.hide, this)), this.$dialog.on("mousedown.dismiss.bs.modal", function() {
            n.$element.one("mouseup.dismiss.bs.modal", function(t) {
                e(t.target).is(n.$element) && (n.ignoreBackdropClick = !0)
            })
        }), this.backdrop(function() {
            var i = e.support.transition && n.$element.hasClass("fade");
            n.$element.parent().length || n.$element.appendTo(n.$body), n.$element.show().scrollTop(0), n.adjustDialog(), i && n.$element[0].offsetWidth, n.$element.addClass("in").attr("aria-hidden", !1), n.enforceFocus();
            var r = e.Event("shown.bs.modal", {
                relatedTarget: t
            });
            i ? n.$dialog.one("bsTransitionEnd", function() {
                n.$element.trigger("focus").trigger(r)
            }).emulateTransitionEnd(o.TRANSITION_DURATION) : n.$element.trigger("focus").trigger(r)
        }))
    }, o.prototype.hide = function(t) {
        t && t.preventDefault(), t = e.Event("hide.bs.modal"), this.$element.trigger(t), this.isShown && !t.isDefaultPrevented() && (this.isShown = !1, this.escape(), this.resize(), e(document).off("focusin.bs.modal"), this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"), this.$dialog.off("mousedown.dismiss.bs.modal"), e.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", e.proxy(this.hideModal, this)).emulateTransitionEnd(o.TRANSITION_DURATION) : this.hideModal())
    }, o.prototype.enforceFocus = function() {
        e(document).off("focusin.bs.modal").on("focusin.bs.modal", e.proxy(function(e) {
            this.$element[0] === e.target || this.$element.has(e.target).length || this.$element.trigger("focus")
        }, this))
    }, o.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", e.proxy(function(e) {
            27 == e.which && this.hide()
        }, this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal")
    }, o.prototype.resize = function() {
        this.isShown ? e(window).on("resize.bs.modal", e.proxy(this.handleUpdate, this)) : e(window).off("resize.bs.modal")
    }, o.prototype.hideModal = function() {
        var e = this;
        this.$element.hide(), this.backdrop(function() {
            e.$body.removeClass("modal-open"), e.resetAdjustments(), e.resetScrollbar(), e.$element.trigger("hidden.bs.modal")
        })
    }, o.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null
    }, o.prototype.backdrop = function(t) {
        var n = this,
            i = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var r = e.support.transition && i;
            if (this.$backdrop = e('<div class="modal-backdrop ' + i + '" />').appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", e.proxy(function(e) {
                    return this.ignoreBackdropClick ? void(this.ignoreBackdropClick = !1) : void(e.target === e.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide()))
                }, this)), r && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !t) return;
            r ? this.$backdrop.one("bsTransitionEnd", t).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION) : t()
        } else if (!this.isShown && this.$backdrop) {
            this.$backdrop.removeClass("in");
            var s = function() {
                n.removeBackdrop(), t && t()
            };
            e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", s).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION) : s()
        } else t && t()
    }, o.prototype.handleUpdate = function() {
        this.adjustDialog()
    }, o.prototype.adjustDialog = function() {
        var e = this.$element[0].scrollHeight > document.documentElement.clientHeight;
        this.$element.css({
            paddingLeft: !this.bodyIsOverflowing && e ? this.scrollbarWidth : "",
            paddingRight: this.bodyIsOverflowing && !e ? this.scrollbarWidth : ""
        })
    }, o.prototype.resetAdjustments = function() {
        this.$element.css({
            paddingLeft: "",
            paddingRight: ""
        })
    }, o.prototype.checkScrollbar = function() {
        var e = window.innerWidth;
        if (!e) {
            var t = document.documentElement.getBoundingClientRect();
            e = t.right - Math.abs(t.left)
        }
        this.bodyIsOverflowing = document.body.clientWidth < e, this.scrollbarWidth = this.measureScrollbar()
    }, o.prototype.setScrollbar = function() {
        var e = parseInt(this.$body.css("padding-right") || 0, 10);
        this.originalBodyPad = document.body.style.paddingRight || "", this.bodyIsOverflowing && this.$body.css("padding-right", e + this.scrollbarWidth)
    }, o.prototype.resetScrollbar = function() {
        this.$body.css("padding-right", this.originalBodyPad)
    }, o.prototype.measureScrollbar = function() {
        var e = document.createElement("div");
        e.className = "modal-scrollbar-measure", this.$body.append(e);
        var t = e.offsetWidth - e.clientWidth;
        return this.$body[0].removeChild(e), t
    };
    var n = e.fn.modal;
    e.fn.modal = t, e.fn.modal.Constructor = o, e.fn.modal.noConflict = function() {
        return e.fn.modal = n, this
    }, e(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(o) {
        var n = e(this),
            i = n.attr("href"),
            r = e(n.attr("data-target") || i && i.replace(/.*(?=#[^\s]+$)/, "")),
            s = r.data("bs.modal") ? "toggle" : e.extend({
                remote: !/#/.test(i) && i
            }, r.data(), n.data());
        n.is("a") && o.preventDefault(), r.one("show.bs.modal", function(e) {
            e.isDefaultPrevented() || r.one("hidden.bs.modal", function() {
                n.is(":visible") && n.trigger("focus")
            })
        }), t.call(r, s, this)
    })
}(jQuery), + function(e) {
    function t(t) {
        return this.each(function() {
            var n = e(this),
                i = n.data("bs.tooltip"),
                r = "object" == typeof t && t;
            !i && /destroy|hide/.test(t) || (i || n.data("bs.tooltip", i = new o(this, r)), "string" == typeof t && i[t]())
        })
    }
    var o = function(e, t) {
        this.type = null, this.options = null, this.enabled = null, this.timeout = null, this.hoverState = null, this.$element = null, this.init("tooltip", e, t)
    };
    o.VERSION = "3.3.4", o.TRANSITION_DURATION = 150, o.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1,
        viewport: {
            selector: "body",
            padding: 0
        }
    }, o.prototype.init = function(t, o, n) {
        if (this.enabled = !0, this.type = t, this.$element = e(o), this.options = this.getOptions(n), this.$viewport = this.options.viewport && e(this.options.viewport.selector || this.options.viewport), this.$element[0] instanceof document.constructor && !this.options.selector) throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");
        for (var i = this.options.trigger.split(" "), r = i.length; r--;) {
            var s = i[r];
            if ("click" == s) this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this));
            else if ("manual" != s) {
                var a = "hover" == s ? "mouseenter" : "focusin",
                    l = "hover" == s ? "mouseleave" : "focusout";
                this.$element.on(a + "." + this.type, this.options.selector, e.proxy(this.enter, this)), this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = e.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    }, o.prototype.getDefaults = function() {
        return o.DEFAULTS
    }, o.prototype.getOptions = function(t) {
        return t = e.extend({}, this.getDefaults(), this.$element.data(), t), t.delay && "number" == typeof t.delay && (t.delay = {
            show: t.delay,
            hide: t.delay
        }), t
    }, o.prototype.getDelegateOptions = function() {
        var t = {},
            o = this.getDefaults();
        return this._options && e.each(this._options, function(e, n) {
            o[e] != n && (t[e] = n)
        }), t
    }, o.prototype.enter = function(t) {
        var o = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
        return o && o.$tip && o.$tip.is(":visible") ? void(o.hoverState = "in") : (o || (o = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, o)), clearTimeout(o.timeout), o.hoverState = "in", o.options.delay && o.options.delay.show ? void(o.timeout = setTimeout(function() {
            "in" == o.hoverState && o.show()
        }, o.options.delay.show)) : o.show())
    }, o.prototype.leave = function(t) {
        var o = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
        return o || (o = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, o)), clearTimeout(o.timeout), o.hoverState = "out", o.options.delay && o.options.delay.hide ? void(o.timeout = setTimeout(function() {
            "out" == o.hoverState && o.hide()
        }, o.options.delay.hide)) : o.hide()
    }, o.prototype.show = function() {
        var t = e.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(t);
            var n = e.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
            if (t.isDefaultPrevented() || !n) return;
            var i = this,
                r = this.tip(),
                s = this.getUID(this.type);
            this.setContent(), r.attr("id", s), this.$element.attr("aria-describedby", s), this.options.animation && r.addClass("fade");
            var a = "function" == typeof this.options.placement ? this.options.placement.call(this, r[0], this.$element[0]) : this.options.placement,
                l = /\s?auto?\s?/i,
                c = l.test(a);
            c && (a = a.replace(l, "") || "top"), r.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(a).data("bs." + this.type, this), this.options.container ? r.appendTo(this.options.container) : r.insertAfter(this.$element);
            var u = this.getPosition(),
                g = r[0].offsetWidth,
                p = r[0].offsetHeight;
            if (c) {
                var h = a,
                    d = this.options.container ? e(this.options.container) : this.$element.parent(),
                    f = this.getPosition(d);
                a = "bottom" == a && u.bottom + p > f.bottom ? "top" : "top" == a && u.top - p < f.top ? "bottom" : "right" == a && u.right + g > f.width ? "left" : "left" == a && u.left - g < f.left ? "right" : a, r.removeClass(h).addClass(a)
            }
            var m = this.getCalculatedOffset(a, u, g, p);
            this.applyPlacement(m, a);
            var y = function() {
                var e = i.hoverState;
                i.$element.trigger("shown.bs." + i.type), i.hoverState = null, "out" == e && i.leave(i)
            };
            e.support.transition && this.$tip.hasClass("fade") ? r.one("bsTransitionEnd", y).emulateTransitionEnd(o.TRANSITION_DURATION) : y()
        }
    }, o.prototype.applyPlacement = function(t, o) {
        var n = this.tip(),
            i = n[0].offsetWidth,
            r = n[0].offsetHeight,
            s = parseInt(n.css("margin-top"), 10),
            a = parseInt(n.css("margin-left"), 10);
        isNaN(s) && (s = 0), isNaN(a) && (a = 0), t.top = t.top + s, t.left = t.left + a, e.offset.setOffset(n[0], e.extend({
            using: function(e) {
                n.css({
                    top: Math.round(e.top),
                    left: Math.round(e.left)
                })
            }
        }, t), 0), n.addClass("in");
        var l = n[0].offsetWidth,
            c = n[0].offsetHeight;
        "top" == o && c != r && (t.top = t.top + r - c);
        var u = this.getViewportAdjustedDelta(o, t, l, c);
        u.left ? t.left += u.left : t.top += u.top;
        var g = /top|bottom/.test(o),
            p = g ? 2 * u.left - i + l : 2 * u.top - r + c,
            h = g ? "offsetWidth" : "offsetHeight";
        n.offset(t), this.replaceArrow(p, n[0][h], g)
    }, o.prototype.replaceArrow = function(e, t, o) {
        this.arrow().css(o ? "left" : "top", 50 * (1 - e / t) + "%").css(o ? "top" : "left", "")
    }, o.prototype.setContent = function() {
        var e = this.tip(),
            t = this.getTitle();
        e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t), e.removeClass("fade in top bottom left right")
    }, o.prototype.hide = function(t) {
        function n() {
            "in" != i.hoverState && r.detach(), i.$element.removeAttr("aria-describedby").trigger("hidden.bs." + i.type), t && t()
        }
        var i = this,
            r = e(this.$tip),
            s = e.Event("hide.bs." + this.type);
        return this.$element.trigger(s), s.isDefaultPrevented() ? void 0 : (r.removeClass("in"), e.support.transition && r.hasClass("fade") ? r.one("bsTransitionEnd", n).emulateTransitionEnd(o.TRANSITION_DURATION) : n(), this.hoverState = null, this)
    }, o.prototype.fixTitle = function() {
        var e = this.$element;
        (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "")
    }, o.prototype.hasContent = function() {
        return this.getTitle()
    }, o.prototype.getPosition = function(t) {
        t = t || this.$element;
        var o = t[0],
            n = "BODY" == o.tagName,
            i = o.getBoundingClientRect();
        null == i.width && (i = e.extend({}, i, {
            width: i.right - i.left,
            height: i.bottom - i.top
        }));
        var r = n ? {
                top: 0,
                left: 0
            } : t.offset(),
            s = {
                scroll: n ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop()
            },
            a = n ? {
                width: e(window).width(),
                height: e(window).height()
            } : null;
        return e.extend({}, i, s, a, r)
    }, o.prototype.getCalculatedOffset = function(e, t, o, n) {
        return "bottom" == e ? {
            top: t.top + t.height,
            left: t.left + t.width / 2 - o / 2
        } : "top" == e ? {
            top: t.top - n,
            left: t.left + t.width / 2 - o / 2
        } : "left" == e ? {
            top: t.top + t.height / 2 - n / 2,
            left: t.left - o
        } : {
            top: t.top + t.height / 2 - n / 2,
            left: t.left + t.width
        }
    }, o.prototype.getViewportAdjustedDelta = function(e, t, o, n) {
        var i = {
            top: 0,
            left: 0
        };
        if (!this.$viewport) return i;
        var r = this.options.viewport && this.options.viewport.padding || 0,
            s = this.getPosition(this.$viewport);
        if (/right|left/.test(e)) {
            var a = t.top - r - s.scroll,
                l = t.top + r - s.scroll + n;
            a < s.top ? i.top = s.top - a : l > s.top + s.height && (i.top = s.top + s.height - l)
        } else {
            var c = t.left - r,
                u = t.left + r + o;
            c < s.left ? i.left = s.left - c : u > s.width && (i.left = s.left + s.width - u)
        }
        return i
    }, o.prototype.getTitle = function() {
        var e, t = this.$element,
            o = this.options;
        return e = t.attr("data-original-title") || ("function" == typeof o.title ? o.title.call(t[0]) : o.title)
    }, o.prototype.getUID = function(e) {
        do e += ~~(1e6 * Math.random()); while (document.getElementById(e));
        return e
    }, o.prototype.tip = function() {
        return this.$tip = this.$tip || e(this.options.template)
    }, o.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    }, o.prototype.enable = function() {
        this.enabled = !0
    }, o.prototype.disable = function() {
        this.enabled = !1
    }, o.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled
    }, o.prototype.toggle = function(t) {
        var o = this;
        t && (o = e(t.currentTarget).data("bs." + this.type), o || (o = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, o))), o.tip().hasClass("in") ? o.leave(o) : o.enter(o)
    }, o.prototype.destroy = function() {
        var e = this;
        clearTimeout(this.timeout), this.hide(function() {
            e.$element.off("." + e.type).removeData("bs." + e.type)
        })
    };
    var n = e.fn.tooltip;
    e.fn.tooltip = t, e.fn.tooltip.Constructor = o, e.fn.tooltip.noConflict = function() {
        return e.fn.tooltip = n, this
    }
}(jQuery), + function(e) {
    function t(t) {
        return this.each(function() {
            var n = e(this),
                i = n.data("bs.popover"),
                r = "object" == typeof t && t;
            !i && /destroy|hide/.test(t) || (i || n.data("bs.popover", i = new o(this, r)), "string" == typeof t && i[t]())
        })
    }
    var o = function(e, t) {
        this.init("popover", e, t)
    };
    if (!e.fn.tooltip) throw new Error("Popover requires tooltip.js");
    o.VERSION = "3.3.4", o.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), o.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype), o.prototype.constructor = o, o.prototype.getDefaults = function() {
        return o.DEFAULTS
    }, o.prototype.setContent = function() {
        var e = this.tip(),
            t = this.getTitle(),
            o = this.getContent();
        e.find(".popover-title")[this.options.html ? "html" : "text"](t), e.find(".popover-content").children().detach().end()[this.options.html ? "string" == typeof o ? "html" : "append" : "text"](o), e.removeClass("fade top bottom left right in"), e.find(".popover-title").html() || e.find(".popover-title").hide()
    }, o.prototype.hasContent = function() {
        return this.getTitle() || this.getContent()
    }, o.prototype.getContent = function() {
        var e = this.$element,
            t = this.options;
        return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content)
    }, o.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    };
    var n = e.fn.popover;
    e.fn.popover = t, e.fn.popover.Constructor = o, e.fn.popover.noConflict = function() {
        return e.fn.popover = n, this
    }
}(jQuery), + function(e) {
    function t(o, n) {
        this.$body = e(document.body), this.$scrollElement = e(e(o).is(document.body) ? window : o), this.options = e.extend({}, t.DEFAULTS, n), this.selector = (this.options.target || "") + " .nav li > a", this.offsets = [], this.targets = [], this.activeTarget = null, this.scrollHeight = 0, this.$scrollElement.on("scroll.bs.scrollspy", e.proxy(this.process, this)), this.refresh(), this.process()
    }

    function o(o) {
        return this.each(function() {
            var n = e(this),
                i = n.data("bs.scrollspy"),
                r = "object" == typeof o && o;
            i || n.data("bs.scrollspy", i = new t(this, r)), "string" == typeof o && i[o]()
        })
    }
    t.VERSION = "3.3.4", t.DEFAULTS = {
        offset: 10
    }, t.prototype.getScrollHeight = function() {
        return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }, t.prototype.refresh = function() {
        var t = this,
            o = "offset",
            n = 0;
        this.offsets = [], this.targets = [], this.scrollHeight = this.getScrollHeight(), e.isWindow(this.$scrollElement[0]) || (o = "position", n = this.$scrollElement.scrollTop()), this.$body.find(this.selector).map(function() {
            var t = e(this),
                i = t.data("target") || t.attr("href"),
                r = /^#./.test(i) && e(i);
            return r && r.length && r.is(":visible") && [
                [r[o]().top + n, i]
            ] || null
        }).sort(function(e, t) {
            return e[0] - t[0]
        }).each(function() {
            t.offsets.push(this[0]), t.targets.push(this[1])
        })
    }, t.prototype.process = function() {
        var e, t = this.$scrollElement.scrollTop() + this.options.offset,
            o = this.getScrollHeight(),
            n = this.options.offset + o - this.$scrollElement.height(),
            i = this.offsets,
            r = this.targets,
            s = this.activeTarget;
        if (this.scrollHeight != o && this.refresh(), t >= n) return s != (e = r[r.length - 1]) && this.activate(e);
        if (s && t < i[0]) return this.activeTarget = null, this.clear();
        for (e = i.length; e--;) s != r[e] && t >= i[e] && (void 0 === i[e + 1] || t < i[e + 1]) && this.activate(r[e])
    }, t.prototype.activate = function(t) {
        this.activeTarget = t, this.clear();
        var o = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]',
            n = e(o).parents("li").addClass("active");
        n.parent(".dropdown-menu").length && (n = n.closest("li.dropdown").addClass("active")), n.trigger("activate.bs.scrollspy")
    }, t.prototype.clear = function() {
        e(this.selector).parentsUntil(this.options.target, ".active").removeClass("active")
    };
    var n = e.fn.scrollspy;
    e.fn.scrollspy = o, e.fn.scrollspy.Constructor = t, e.fn.scrollspy.noConflict = function() {
        return e.fn.scrollspy = n, this
    }, e(window).on("load.bs.scrollspy.data-api", function() {
        e('[data-spy="scroll"]').each(function() {
            var t = e(this);
            o.call(t, t.data())
        })
    })
}(jQuery), + function(e) {
    function t(t) {
        return this.each(function() {
            var n = e(this),
                i = n.data("bs.tab");
            i || n.data("bs.tab", i = new o(this)), "string" == typeof t && i[t]()
        })
    }
    var o = function(t) {
        this.element = e(t)
    };
    o.VERSION = "3.3.4", o.TRANSITION_DURATION = 150, o.prototype.show = function() {
        var t = this.element,
            o = t.closest("ul:not(.dropdown-menu)"),
            n = t.data("target");
        if (n || (n = t.attr("href"), n = n && n.replace(/.*(?=#[^\s]*$)/, "")), !t.parent("li").hasClass("active")) {
            var i = o.find(".active:last a"),
                r = e.Event("hide.bs.tab", {
                    relatedTarget: t[0]
                }),
                s = e.Event("show.bs.tab", {
                    relatedTarget: i[0]
                });
            if (i.trigger(r), t.trigger(s), !s.isDefaultPrevented() && !r.isDefaultPrevented()) {
                var a = e(n);
                this.activate(t.closest("li"), o), this.activate(a, a.parent(), function() {
                    i.trigger({
                        type: "hidden.bs.tab",
                        relatedTarget: t[0]
                    }), t.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: i[0]
                    })
                })
            }
        }
    }, o.prototype.activate = function(t, n, i) {
        function r() {
            s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !1), t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded", !0), a ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade"), t.parent(".dropdown-menu").length && t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !0), i && i()
        }
        var s = n.find("> .active"),
            a = i && e.support.transition && (s.length && s.hasClass("fade") || !!n.find("> .fade").length);
        s.length && a ? s.one("bsTransitionEnd", r).emulateTransitionEnd(o.TRANSITION_DURATION) : r(), s.removeClass("in")
    };
    var n = e.fn.tab;
    e.fn.tab = t, e.fn.tab.Constructor = o, e.fn.tab.noConflict = function() {
        return e.fn.tab = n, this
    };
    var i = function(o) {
        o.preventDefault(), t.call(e(this), "show")
    };
    e(document).on("click.bs.tab.data-api", '[data-toggle="tab"]', i).on("click.bs.tab.data-api", '[data-toggle="pill"]', i)
}(jQuery), + function(e) {
    function t(t) {
        return this.each(function() {
            var n = e(this),
                i = n.data("bs.affix"),
                r = "object" == typeof t && t;
            i || n.data("bs.affix", i = new o(this, r)), "string" == typeof t && i[t]()
        })
    }
    var o = function(t, n) {
        this.options = e.extend({}, o.DEFAULTS, n), this.$target = e(this.options.target).on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", e.proxy(this.checkPositionWithEventLoop, this)), this.$element = e(t), this.affixed = null, this.unpin = null, this.pinnedOffset = null, this.checkPosition()
    };
    o.VERSION = "3.3.4", o.RESET = "affix affix-top affix-bottom", o.DEFAULTS = {
        offset: 0,
        target: window
    }, o.prototype.getState = function(e, t, o, n) {
        var i = this.$target.scrollTop(),
            r = this.$element.offset(),
            s = this.$target.height();
        if (null != o && "top" == this.affixed) return o > i ? "top" : !1;
        if ("bottom" == this.affixed) return null != o ? i + this.unpin <= r.top ? !1 : "bottom" : e - n >= i + s ? !1 : "bottom";
        var a = null == this.affixed,
            l = a ? i : r.top,
            c = a ? s : t;
        return null != o && o >= i ? "top" : null != n && l + c >= e - n ? "bottom" : !1
    }, o.prototype.getPinnedOffset = function() {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(o.RESET).addClass("affix");
        var e = this.$target.scrollTop(),
            t = this.$element.offset();
        return this.pinnedOffset = t.top - e
    }, o.prototype.checkPositionWithEventLoop = function() {
        setTimeout(e.proxy(this.checkPosition, this), 1)
    }, o.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var t = this.$element.height(),
                n = this.options.offset,
                i = n.top,
                r = n.bottom,
                s = e(document.body).height();
            "object" != typeof n && (r = i = n), "function" == typeof i && (i = n.top(this.$element)), "function" == typeof r && (r = n.bottom(this.$element));
            var a = this.getState(s, t, i, r);
            if (this.affixed != a) {
                null != this.unpin && this.$element.css("top", "");
                var l = "affix" + (a ? "-" + a : ""),
                    c = e.Event(l + ".bs.affix");
                if (this.$element.trigger(c), c.isDefaultPrevented()) return;
                this.affixed = a, this.unpin = "bottom" == a ? this.getPinnedOffset() : null, this.$element.removeClass(o.RESET).addClass(l).trigger(l.replace("affix", "affixed") + ".bs.affix")
            }
            "bottom" == a && this.$element.offset({
                top: s - t - r
            })
        }
    };
    var n = e.fn.affix;
    e.fn.affix = t, e.fn.affix.Constructor = o, e.fn.affix.noConflict = function() {
        return e.fn.affix = n, this
    }, e(window).on("load", function() {
        e('[data-spy="affix"]').each(function() {
            var o = e(this),
                n = o.data();
            n.offset = n.offset || {}, null != n.offsetBottom && (n.offset.bottom = n.offsetBottom), null != n.offsetTop && (n.offset.top = n.offsetTop), t.call(o, n)
        })
    })
}(jQuery), define("bootstrap", ["jquery"], function() {}),
    function(e, t) {
        var o = document.createElement("input"),
            n = {
                setSelectionRange: "setSelectionRange" in o || "selectionStart" in o,
                createTextRange: "createTextRange" in o || "selection" in document
            },
            i = /\r\n/g,
            r = /\r/g,
            s = function(t) {
                return "undefined" != typeof t.value ? t.value : e(t).text()
            },
            a = function(t, o) {
                "undefined" != typeof t.value ? t.value = o : e(t).text(o)
            },
            l = function(e, t) {
                var o = s(e).replace(r, ""),
                    n = o.length;
                return "undefined" == typeof t && (t = n), t = Math.floor(t), 0 > t && (t = n + t), 0 > t && (t = 0), t > n && (t = n), t
            },
            c = function(e, t) {
                return e.hasAttribute ? e.hasAttribute(t) : "undefined" != typeof e[t]
            },
            u = function(e, t, o, n) {
                this.start = e || 0, this.end = t || 0, this.length = o || 0, this.text = n || ""
            };
        u.prototype.toString = function() {
            return JSON.stringify(this, null, "    ")
        };
        var g = function(e) {
                return e.selectionStart
            },
            p = function(e) {
                var t, o, n, r, a, l;
                return e.focus(), e.focus(), o = document.selection.createRange(), o && o.parentElement() === e ? (r = s(e), a = r.length, n = e.createTextRange(), n.moveToBookmark(o.getBookmark()), l = e.createTextRange(), l.collapse(!1), t = n.compareEndPoints("StartToEnd", l) > -1 ? r.replace(i, "\n").length : -n.moveStart("character", -a)) : 0
            },
            h = function(e) {
                return e ? n.setSelectionRange ? g(e) : n.createTextRange ? p(e) : t : t
            },
            d = function(e, t) {
                e.setSelectionRange(t, t)
            },
            f = function(e, t) {
                var o = e.createTextRange();
                o.move("character", t), o.select()
            },
            m = function(e, t) {
                e.focus(), t = l(e, t), n.setSelectionRange ? d(e, t) : n.createTextRange && f(e, t)
            },
            y = function(e, t) {
                var o = h(e),
                    n = s(e).replace(r, ""),
                    i = +(o + t.length + (n.length - o)),
                    l = +e.getAttribute("maxlength");
                if (c(e, "maxlength") && i > l) {
                    var u = t.length - (i - l);
                    t = t.substr(0, u)
                }
                a(e, n.substr(0, o) + t + n.substr(o)), m(e, o + t.length)
            },
            v = function(e) {
                var t = new u;
                t.start = e.selectionStart, t.end = e.selectionEnd;
                var o = Math.min(t.start, t.end),
                    n = Math.max(t.start, t.end);
                return t.length = n - o, t.text = s(e).substring(o, n), t
            },
            _ = function(e) {
                var t = new u;
                e.focus();
                var o = document.selection.createRange();
                if (o && o.parentElement() === e) {
                    var n, i, r, a, l = 0,
                        c = 0,
                        g = s(e);
                    n = g.length, i = g.replace(/\r\n/g, "\n"), r = e.createTextRange(), r.moveToBookmark(o.getBookmark()), a = e.createTextRange(), a.collapse(!1), r.compareEndPoints("StartToEnd", a) > -1 ? l = c = n : (l = -r.moveStart("character", -n), l += i.slice(0, l).split("\n").length - 1, r.compareEndPoints("EndToEnd", a) > -1 ? c = n : (c = -r.moveEnd("character", -n), c += i.slice(0, c).split("\n").length - 1)), l -= g.substring(0, l).split("\r\n").length - 1, c -= g.substring(0, c).split("\r\n").length - 1, t.start = l, t.end = c, t.length = t.end - t.start, t.text = i.substr(t.start, t.length)
                }
                return t
            },
            b = function(e) {
                return e ? n.setSelectionRange ? v(e) : n.createTextRange ? _(e) : t : t
            },
            C = function(e, t, o) {
                e.setSelectionRange(t, o)
            },
            E = function(e, t, o) {
                var n = e.createTextRange();
                n.moveEnd("textedit", -1), n.moveStart("character", t), n.moveEnd("character", o - t), n.select()
            },
            S = function(e, t, o) {
                t = l(e, t), o = l(e, o), n.setSelectionRange ? C(e, t, o) : n.createTextRange && E(e, t, o)
            },
            T = function(t, o) {
                var n = e(t),
                    i = n.val(),
                    r = b(t),
                    s = +(r.start + o.length + (i.length - r.end)),
                    a = +n.attr("maxlength");
                if (n.is("[maxlength]") && s > a) {
                    var l = o.length - (s - a);
                    o = o.substr(0, l)
                }
                var c = i.substr(0, r.start),
                    u = i.substr(r.end);
                n.val(c + o + u);
                var g = r.start,
                    p = g + o.length;
                S(t, r.length ? g : p, p)
            },
            k = function(e) {
                var t = window.getSelection(),
                    o = document.createRange();
                o.selectNodeContents(e), t.removeAllRanges(), t.addRange(o)
            },
            A = function(e) {
                var t = document.body.createTextRange();
                t.moveToElementText(e), t.select()
            },
            B = function(t) {
                var o = e(t);
                return o.is("input, textarea") || t.select ? void o.select() : void(n.setSelectionRange ? k(t) : n.createTextRange && A(t))
            },
            x = function() {
                document.selection ? document.selection.empty() : window.getSelection && window.getSelection().removeAllRanges()
            };
        e.extend(e.fn, {
            caret: function() {
                var e = this.filter("input, textarea");
                if (0 === arguments.length) {
                    var t = e.get(0);
                    return h(t)
                }
                if ("number" == typeof arguments[0]) {
                    var o = arguments[0];
                    e.each(function(e, t) {
                        m(t, o)
                    })
                } else {
                    var n = arguments[0];
                    e.each(function(e, t) {
                        y(t, n)
                    })
                }
                return this
            },
            range: function() {
                var e = this.filter("input, textarea");
                if (0 === arguments.length) {
                    var t = e.get(0);
                    return b(t)
                }
                if ("number" == typeof arguments[0]) {
                    var o = arguments[0],
                        n = arguments[1];
                    e.each(function(e, t) {
                        S(t, o, n)
                    })
                } else {
                    var i = arguments[0];
                    e.each(function(e, t) {
                        T(t, i)
                    })
                }
                return this
            },
            selectAll: function() {
                return this.each(function(e, t) {
                    B(t)
                })
            }
        }), e.extend(e, {
            deselectAll: function() {
                return x(), this
            }
        })
    }(window.jQuery || window.Zepto || window.$), define("jquery-caret", ["jquery"], function() {}),
    function(e) {
        "object" == typeof exports ? module.exports = e(require("jquery")) : "function" == typeof define && define.amd ? define("jquery-knob", ["jquery"], e) : e(jQuery)
    }(function(e) {
        var t = {},
            o = Math.max,
            n = Math.min;
        t.c = {}, t.c.d = e(document), t.c.t = function(e) {
            return e.originalEvent.touches.length - 1
        }, t.o = function() {
            var o = this;
            this.o = null, this.$ = null, this.i = null, this.g = null, this.v = null, this.cv = null, this.x = 0, this.y = 0, this.w = 0, this.h = 0, this.$c = null, this.c = null, this.t = 0, this.isInit = !1, this.fgColor = null, this.pColor = null, this.dH = null, this.cH = null, this.eH = null, this.rH = null, this.scale = 1, this.relative = !1, this.relativeWidth = !1, this.relativeHeight = !1, this.$div = null, this.run = function() {
                var t = function(e, t) {
                    var n;
                    for (n in t) o.o[n] = t[n];
                    o._carve().init(), o._configure()._draw()
                };
                if (!this.$.data("kontroled")) {
                    if (this.$.data("kontroled", !0), this.extend(), this.o = e.extend({
                            min: void 0 !== this.$.data("min") ? this.$.data("min") : 0,
                            max: void 0 !== this.$.data("max") ? this.$.data("max") : 100,
                            stopper: !0,
                            readOnly: this.$.data("readonly") || "readonly" === this.$.attr("readonly"),
                            cursor: this.$.data("cursor") === !0 && 30 || this.$.data("cursor") || 0,
                            thickness: this.$.data("thickness") && Math.max(Math.min(this.$.data("thickness"), 1), .01) || .35,
                            lineCap: this.$.data("linecap") || "butt",
                            width: this.$.data("width") || 200,
                            height: this.$.data("height") || 200,
                            displayInput: null == this.$.data("displayinput") || this.$.data("displayinput"),
                            displayPrevious: this.$.data("displayprevious"),
                            fgColor: this.$.data("fgcolor") || "#87CEEB",
                            inputColor: this.$.data("inputcolor"),
                            font: this.$.data("font") || "Arial",
                            fontWeight: this.$.data("font-weight") || "bold",
                            inline: !1,
                            step: this.$.data("step") || 1,
                            rotation: this.$.data("rotation"),
                            draw: null,
                            change: null,
                            cancel: null,
                            release: null,
                            format: function(e) {
                                return e
                            },
                            parse: function(e) {
                                return parseFloat(e)
                            }
                        }, this.o), this.o.flip = "anticlockwise" === this.o.rotation || "acw" === this.o.rotation, this.o.inputColor || (this.o.inputColor = this.o.fgColor), this.$.is("fieldset") ? (this.v = {}, this.i = this.$.find("input"), this.i.each(function(t) {
                            var n = e(this);
                            o.i[t] = n, o.v[t] = o.o.parse(n.val()), n.bind("change blur", function() {
                                var e = {};
                                e[t] = n.val(), o.val(o._validate(e))
                            })
                        }), this.$.find("legend").remove()) : (this.i = this.$, this.v = this.o.parse(this.$.val()), "" === this.v && (this.v = this.o.min), this.$.bind("change blur", function() {
                            o.val(o._validate(o.o.parse(o.$.val())))
                        })), !this.o.displayInput && this.$.hide(), this.$c = e(document.createElement("canvas")).attr({
                            width: this.o.width,
                            height: this.o.height
                        }), this.$div = e('<div style="' + (this.o.inline ? "display:inline;" : "") + "width:" + this.o.width + "px;height:" + this.o.height + 'px;"></div>'), this.$.wrap(this.$div).before(this.$c), this.$div = this.$.parent(), "undefined" != typeof G_vmlCanvasManager && G_vmlCanvasManager.initElement(this.$c[0]), this.c = this.$c[0].getContext ? this.$c[0].getContext("2d") : null, !this.c) throw {
                        name: "CanvasNotSupportedException",
                        message: "Canvas not supported. Please use excanvas on IE8.0.",
                        toString: function() {
                            return this.name + ": " + this.message
                        }
                    };
                    return this.scale = (window.devicePixelRatio || 1) / (this.c.webkitBackingStorePixelRatio || this.c.mozBackingStorePixelRatio || this.c.msBackingStorePixelRatio || this.c.oBackingStorePixelRatio || this.c.backingStorePixelRatio || 1), this.relativeWidth = this.o.width % 1 !== 0 && this.o.width.indexOf("%"), this.relativeHeight = this.o.height % 1 !== 0 && this.o.height.indexOf("%"), this.relative = this.relativeWidth || this.relativeHeight, this._carve(), this.v instanceof Object ? (this.cv = {}, this.copy(this.v, this.cv)) : this.cv = this.v, this.$.bind("configure", t).parent().bind("configure", t), this._listen()._configure()._xy().init(), this.isInit = !0, this.$.val(this.o.format(this.v)), this._draw(), this
                }
            }, this._carve = function() {
                if (this.relative) {
                    var e = this.relativeWidth ? this.$div.parent().width() * parseInt(this.o.width) / 100 : this.$div.parent().width(),
                        t = this.relativeHeight ? this.$div.parent().height() * parseInt(this.o.height) / 100 : this.$div.parent().height();
                    this.w = this.h = Math.min(e, t)
                } else this.w = this.o.width, this.h = this.o.height;
                return this.$div.css({
                    width: this.w + "px",
                    height: this.h + "px"
                }), this.$c.attr({
                    width: this.w,
                    height: this.h
                }), 1 !== this.scale && (this.$c[0].width = this.$c[0].width * this.scale, this.$c[0].height = this.$c[0].height * this.scale, this.$c.width(this.w), this.$c.height(this.h)), this
            }, this._draw = function() {
                var e = !0;
                o.g = o.c, o.clear(), o.dH && (e = o.dH()), e !== !1 && o.draw()
            }, this._touch = function(e) {
                var n = function(e) {
                    var t = o.xy2val(e.originalEvent.touches[o.t].pageX, e.originalEvent.touches[o.t].pageY);
                    t != o.cv && (o.cH && o.cH(t) === !1 || (o.change(o._validate(t)), o._draw()))
                };
                return this.t = t.c.t(e), n(e), t.c.d.bind("touchmove.k", n).bind("touchend.k", function() {
                    t.c.d.unbind("touchmove.k touchend.k"), o.val(o.cv)
                }), this
            }, this._mouse = function(e) {
                var n = function(e) {
                    var t = o.xy2val(e.pageX, e.pageY);
                    t != o.cv && (o.cH && o.cH(t) === !1 || (o.change(o._validate(t)), o._draw()))
                };
                return n(e), t.c.d.bind("mousemove.k", n).bind("keyup.k", function(e) {
                    if (27 === e.keyCode) {
                        if (t.c.d.unbind("mouseup.k mousemove.k keyup.k"), o.eH && o.eH() === !1) return;
                        o.cancel()
                    }
                }).bind("mouseup.k", function(e) {
                    t.c.d.unbind("mousemove.k mouseup.k keyup.k"), o.val(o.cv)
                }), this
            }, this._xy = function() {
                var e = this.$c.offset();
                return this.x = e.left, this.y = e.top, this
            }, this._listen = function() {
                return this.o.readOnly ? this.$.attr("readonly", "readonly") : (this.$c.bind("mousedown", function(e) {
                    e.preventDefault(), o._xy()._mouse(e)
                }).bind("touchstart", function(e) {
                    e.preventDefault(), o._xy()._touch(e)
                }), this.listen()), this.relative && e(window).resize(function() {
                    o._carve().init(), o._draw()
                }), this
            }, this._configure = function() {
                return this.o.draw && (this.dH = this.o.draw), this.o.change && (this.cH = this.o.change), this.o.cancel && (this.eH = this.o.cancel), this.o.release && (this.rH = this.o.release), this.o.displayPrevious ? (this.pColor = this.h2rgba(this.o.fgColor, "0.4"), this.fgColor = this.h2rgba(this.o.fgColor, "0.6")) : this.fgColor = this.o.fgColor, this
            }, this._clear = function() {
                this.$c[0].width = this.$c[0].width
            }, this._validate = function(e) {
                var t = ~~((0 > e ? -.5 : .5) + e / this.o.step) * this.o.step;
                return Math.round(100 * t) / 100
            }, this.listen = function() {}, this.extend = function() {}, this.init = function() {}, this.change = function(e) {}, this.val = function(e) {}, this.xy2val = function(e, t) {}, this.draw = function() {}, this.clear = function() {
                this._clear()
            }, this.h2rgba = function(e, t) {
                var o;
                return e = e.substring(1, 7), o = [parseInt(e.substring(0, 2), 16), parseInt(e.substring(2, 4), 16), parseInt(e.substring(4, 6), 16)], "rgba(" + o[0] + "," + o[1] + "," + o[2] + "," + t + ")"
            }, this.copy = function(e, t) {
                for (var o in e) t[o] = e[o]
            }
        }, t.Dial = function() {
            t.o.call(this), this.startAngle = null, this.xy = null, this.radius = null, this.lineWidth = null, this.cursorExt = null, this.w2 = null, this.PI2 = 2 * Math.PI, this.extend = function() {
                this.o = e.extend({
                    bgColor: this.$.data("bgcolor") || "#EEEEEE",
                    angleOffset: this.$.data("angleoffset") || 0,
                    angleArc: this.$.data("anglearc") || 360,
                    inline: !0
                }, this.o)
            }, this.val = function(e, t) {
                return null == e ? this.v : (e = this.o.parse(e), void(t !== !1 && e != this.v && this.rH && this.rH(e) === !1 || (this.cv = this.o.stopper ? o(n(e, this.o.max), this.o.min) : e, this.v = this.cv, this.$.val(this.o.format(this.v)), this._draw())))
            }, this.xy2val = function(e, t) {
                var i, r;
                return i = Math.atan2(e - (this.x + this.w2), -(t - this.y - this.w2)) - this.angleOffset, this.o.flip && (i = this.angleArc - i - this.PI2), this.angleArc != this.PI2 && 0 > i && i > -.5 ? i = 0 : 0 > i && (i += this.PI2), r = i * (this.o.max - this.o.min) / this.angleArc + this.o.min, this.o.stopper && (r = o(n(r, this.o.max), this.o.min)), r
            }, this.listen = function() {
                var t, i, r, s, a = this,
                    l = function(e) {
                        e.preventDefault();
                        var r = e.originalEvent,
                            s = r.detail || r.wheelDeltaX,
                            l = r.detail || r.wheelDeltaY,
                            c = a._validate(a.o.parse(a.$.val())) + (s > 0 || l > 0 ? a.o.step : 0 > s || 0 > l ? -a.o.step : 0);
                        c = o(n(c, a.o.max), a.o.min), a.val(c, !1), a.rH && (clearTimeout(t), t = setTimeout(function() {
                            a.rH(c), t = null
                        }, 100), i || (i = setTimeout(function() {
                            t && a.rH(c), i = null
                        }, 200)))
                    },
                    c = 1,
                    u = {
                        37: -a.o.step,
                        38: a.o.step,
                        39: a.o.step,
                        40: -a.o.step
                    };
                this.$.bind("keydown", function(t) {
                    var i = t.keyCode;
                    if (i >= 96 && 105 >= i && (i = t.keyCode = i - 48), r = parseInt(String.fromCharCode(i)), isNaN(r) && (13 !== i && 8 !== i && 9 !== i && 189 !== i && (190 !== i || a.$.val().match(/\./)) && t.preventDefault(), e.inArray(i, [37, 38, 39, 40]) > -1)) {
                        t.preventDefault();
                        var l = a.o.parse(a.$.val()) + u[i] * c;
                        a.o.stopper && (l = o(n(l, a.o.max), a.o.min)), a.change(a._validate(l)), a._draw(), s = window.setTimeout(function() {
                            c *= 2
                        }, 30)
                    }
                }).bind("keyup", function(e) {
                    isNaN(r) ? s && (window.clearTimeout(s), s = null, c = 1, a.val(a.$.val())) : a.$.val() > a.o.max && a.$.val(a.o.max) || a.$.val() < a.o.min && a.$.val(a.o.min)
                }), this.$c.bind("mousewheel DOMMouseScroll", l), this.$.bind("mousewheel DOMMouseScroll", l)
            }, this.init = function() {
                (this.v < this.o.min || this.v > this.o.max) && (this.v = this.o.min), this.$.val(this.v), this.w2 = this.w / 2, this.cursorExt = this.o.cursor / 100, this.xy = this.w2 * this.scale, this.lineWidth = this.xy * this.o.thickness, this.lineCap = this.o.lineCap, this.radius = this.xy - this.lineWidth / 2, this.o.angleOffset && (this.o.angleOffset = isNaN(this.o.angleOffset) ? 0 : this.o.angleOffset), this.o.angleArc && (this.o.angleArc = isNaN(this.o.angleArc) ? this.PI2 : this.o.angleArc), this.angleOffset = this.o.angleOffset * Math.PI / 180, this.angleArc = this.o.angleArc * Math.PI / 180, this.startAngle = 1.5 * Math.PI + this.angleOffset, this.endAngle = 1.5 * Math.PI + this.angleOffset + this.angleArc;
                var e = o(String(Math.abs(this.o.max)).length, String(Math.abs(this.o.min)).length, 2) + 2;
                this.o.displayInput && this.i.css({
                    width: (this.w / 2 + 4 >> 0) + "px",
                    height: (this.w / 3 >> 0) + "px",
                    position: "absolute",
                    "vertical-align": "middle",
                    "margin-top": (this.w / 3 >> 0) + "px",
                    "margin-left": "-" + (3 * this.w / 4 + 2 >> 0) + "px",
                    border: 0,
                    background: "none",
                    font: this.o.fontWeight + " " + (this.w / e >> 0) + "px " + this.o.font,
                    "text-align": "center",
                    color: this.o.inputColor || this.o.fgColor,
                    padding: "0px",
                    "-webkit-appearance": "none"
                }) || this.i.css({
                    width: "0px",
                    visibility: "hidden"
                })
            }, this.change = function(e) {
                this.cv = e, this.$.val(this.o.format(e))
            }, this.angle = function(e) {
                return (e - this.o.min) * this.angleArc / (this.o.max - this.o.min)
            }, this.arc = function(e) {
                var t, o;
                return e = this.angle(e), this.o.flip ? (t = this.endAngle + 1e-5, o = t - e - 1e-5) : (t = this.startAngle - 1e-5, o = t + e + 1e-5), this.o.cursor && (t = o - this.cursorExt) && (o += this.cursorExt), {
                    s: t,
                    e: o,
                    d: this.o.flip && !this.o.cursor
                }
            }, this.draw = function() {
                var e, t = this.g,
                    o = this.arc(this.cv),
                    n = 1;
                t.lineWidth = this.lineWidth, t.lineCap = this.lineCap, "none" !== this.o.bgColor && (t.beginPath(), t.strokeStyle = this.o.bgColor, t.arc(this.xy, this.xy, this.radius, this.endAngle - 1e-5, this.startAngle + 1e-5, !0), t.stroke()), this.o.displayPrevious && (e = this.arc(this.v), t.beginPath(), t.strokeStyle = this.pColor, t.arc(this.xy, this.xy, this.radius, e.s, e.e, e.d), t.stroke(), n = this.cv == this.v), t.beginPath(), t.strokeStyle = n ? this.o.fgColor : this.fgColor, t.arc(this.xy, this.xy, this.radius, o.s, o.e, o.d), t.stroke()
            }, this.cancel = function() {
                this.val(this.v)
            }
        }, e.fn.dial = e.fn.knob = function(o) {
            return this.each(function() {
                var n = new t.Dial;
                n.o = o, n.$ = e(this), n.run()
            }).parent()
        }
    }),
    function(e) {
        function t(t) {
            if ("string" == typeof t.data && (t.data = {
                    keys: t.data
                }), t.data && t.data.keys && "string" == typeof t.data.keys) {
                var o = t.handler,
                    n = t.data.keys.toLowerCase().split(" ");
                t.handler = function(t) {
                    if (this === t.target || !(e.hotkeys.options.filterInputAcceptingElements && e.hotkeys.textInputTypes.test(t.target.nodeName) || e.hotkeys.options.filterContentEditable && e(t.target).attr("contenteditable") || e.hotkeys.options.filterTextInputs && e.inArray(t.target.type, e.hotkeys.textAcceptingInputTypes) > -1)) {
                        var i = "keypress" !== t.type && e.hotkeys.specialKeys[t.which],
                            r = String.fromCharCode(t.which).toLowerCase(),
                            s = "",
                            a = {};
                        e.each(["alt", "ctrl", "shift"], function(e, o) {
                            t[o + "Key"] && i !== o && (s += o + "+")
                        }), t.metaKey && !t.ctrlKey && "meta" !== i && (s += "meta+"), t.metaKey && "meta" !== i && s.indexOf("alt+ctrl+shift+") > -1 && (s = s.replace("alt+ctrl+shift+", "hyper+")), i ? a[s + i] = !0 : (a[s + r] = !0, a[s + e.hotkeys.shiftNums[r]] = !0, "shift+" === s && (a[e.hotkeys.shiftNums[r]] = !0));
                        for (var l = 0, c = n.length; c > l; l++)
                            if (a[n[l]]) return o.apply(this, arguments)
                    }
                }
            }
        }
        e.hotkeys = {
            version: "0.8",
            specialKeys: {
                8: "backspace",
                9: "tab",
                10: "return",
                13: "return",
                16: "shift",
                17: "ctrl",
                18: "alt",
                19: "pause",
                20: "capslock",
                27: "esc",
                32: "space",
                33: "pageup",
                34: "pagedown",
                35: "end",
                36: "home",
                37: "left",
                38: "up",
                39: "right",
                40: "down",
                45: "insert",
                46: "del",
                59: ";",
                61: "=",
                96: "0",
                97: "1",
                98: "2",
                99: "3",
                100: "4",
                101: "5",
                102: "6",
                103: "7",
                104: "8",
                105: "9",
                106: "*",
                107: "+",
                109: "-",
                110: ".",
                111: "/",
                112: "f1",
                113: "f2",
                114: "f3",
                115: "f4",
                116: "f5",
                117: "f6",
                118: "f7",
                119: "f8",
                120: "f9",
                121: "f10",
                122: "f11",
                123: "f12",
                144: "numlock",
                145: "scroll",
                173: "-",
                186: ";",
                187: "=",
                188: ",",
                189: "-",
                190: ".",
                191: "/",
                192: "`",
                219: "[",
                220: "\\",
                221: "]",
                222: "'"
            },
            shiftNums: {
                "`": "~",
                1: "!",
                2: "@",
                3: "#",
                4: "$",
                5: "%",
                6: "^",
                7: "&",
                8: "*",
                9: "(",
                0: ")",
                "-": "_",
                "=": "+",
                ";": ": ",
                "'": '"',
                ",": "<",
                ".": ">",
                "/": "?",
                "\\": "|"
            },
            textAcceptingInputTypes: ["text", "password", "number", "email", "url", "range", "date", "month", "week", "time", "datetime", "datetime-local", "search", "color", "tel"],
            textInputTypes: /textarea|input|select/i,
            options: {
                filterInputAcceptingElements: !0,
                filterTextInputs: !0,
                filterContentEditable: !0
            }
        }, e.each(["keydown", "keyup", "keypress"], function() {
            e.event.special[this] = {
                add: t
            }
        })
    }(jQuery || this.jQuery || window.jQuery), define("jquery-hotkeys", ["jquery"], function() {}), define("dropdown-select-plugin", ["jquery", "bootstrap"], function(e) {
        var t = e.fn.dropdown.Constructor,
            o = function(e) {
                return e.parent()
            },
            n = function(t) {
                if ("keydown" !== t.type || /13/.test(t.which)) {
                    var n = e(this);
                    if (!n.is(".disabled, :disabled")) {
                        var i = o(n),
                            r = (i.hasClass("open"), n.find("ul a"));
                        if (r.length) {
                            var s = r.index(t.target);
                            if (-1 != s) {
                                var a = r.eq(s);
                                if (!a.parent().is(".disabled, .no-select")) {
                                    t.preventDefault(), t.stopPropagation();
                                    var l = n.find(".selected");
                                    a.hasClass("selected") || l.is(a) || (a.parent("li").addClass("selected"), l.removeClass("selected"));
                                    var c = n.attr("data-select-label"),
                                        u = r.eq(s).text();
                                    n.find("a").first().text(c ? c.replace("%1", u) : u);
                                    var g = a.parent("li").attr("data-value");
                                    n.attr("data-value", g), n.trigger(t = e.Event("selected.bs.dropdown", {
                                        relatedTarget: this
                                    })), n.removeClass("activated")
                                }
                            }
                        }
                    }
                }
            };
        e.extend(!0, t.prototype, {
            select: n
        }), e(document).on("keydown.bs.dropdown.data-api", '[data-select="true"]', t.prototype.select).on("click.bs.dropdown.data-api", '[data-select="true"]', t.prototype.select)
    }),
    function(e) {
        if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
        else if ("function" == typeof define && define.amd) define("acorn", [], e);
        else {
            var t;
            t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.acorn = e()
        }
    }(function() {
        return function e(t, o, n) {
            function i(s, a) {
                if (!o[s]) {
                    if (!t[s]) {
                        var l = "function" == typeof require && require;
                        if (!a && l) return l(s, !0);
                        if (r) return r(s, !0);
                        var c = new Error("Cannot find module '" + s + "'");
                        throw c.code = "MODULE_NOT_FOUND", c
                    }
                    var u = o[s] = {
                        exports: {}
                    };
                    t[s][0].call(u.exports, function(e) {
                        var o = t[s][1][e];
                        return i(o ? o : e)
                    }, u, u.exports, e, t, o, n)
                }
                return o[s].exports
            }
            for (var r = "function" == typeof require && require, s = 0; s < n.length; s++) i(n[s]);
            return i
        }({
            1: [function(e, t, o) {
                var n = e("./tokentype"),
                    i = e("./state"),
                    r = e("./identifier"),
                    s = e("./util"),
                    a = i.Parser.prototype;
                a.checkPropClash = function(e, t) {
                    if (!(this.options.ecmaVersion >= 6 && (e.computed || e.method || e.shorthand))) {
                        var o = e.key,
                            n = void 0;
                        switch (o.type) {
                            case "Identifier":
                                n = o.name;
                                break;
                            case "Literal":
                                n = String(o.value);
                                break;
                            default:
                                return
                        }
                        var i = e.kind;
                        if (this.options.ecmaVersion >= 6) return void("__proto__" === n && "init" === i && (t.proto && this.raise(o.start, "Redefinition of __proto__ property"), t.proto = !0));
                        var r = void 0;
                        if (s.has(t, n)) {
                            r = t[n];
                            var a = "init" !== i;
                            (!this.strict && !a || !r[i]) && a ^ r.init || this.raise(o.start, "Redefinition of property")
                        } else r = t[n] = {
                            init: !1,
                            get: !1,
                            set: !1
                        };
                        r[i] = !0
                    }
                }, a.parseExpression = function(e, t) {
                    var o = this.start,
                        i = this.startLoc,
                        r = this.parseMaybeAssign(e, t);
                    if (this.type === n.types.comma) {
                        var s = this.startNodeAt(o, i);
                        for (s.expressions = [r]; this.eat(n.types.comma);) s.expressions.push(this.parseMaybeAssign(e, t));
                        return this.finishNode(s, "SequenceExpression")
                    }
                    return r
                }, a.parseMaybeAssign = function(e, t, o) {
                    if (this.type == n.types._yield && this.inGenerator) return this.parseYield();
                    var i = void 0;
                    t ? i = !1 : (t = {
                        start: 0
                    }, i = !0);
                    var r = this.start,
                        s = this.startLoc;
                    this.type != n.types.parenL && this.type != n.types.name || (this.potentialArrowAt = this.start);
                    var a = this.parseMaybeConditional(e, t);
                    if (o && (a = o.call(this, a, r, s)), this.type.isAssign) {
                        var l = this.startNodeAt(r, s);
                        return l.operator = this.value, l.left = this.type === n.types.eq ? this.toAssignable(a) : a, t.start = 0, this.checkLVal(a), this.next(), l.right = this.parseMaybeAssign(e), this.finishNode(l, "AssignmentExpression")
                    }
                    return i && t.start && this.unexpected(t.start), a
                }, a.parseMaybeConditional = function(e, t) {
                    var o = this.start,
                        i = this.startLoc,
                        r = this.parseExprOps(e, t);
                    if (t && t.start) return r;
                    if (this.eat(n.types.question)) {
                        var s = this.startNodeAt(o, i);
                        return s.test = r, s.consequent = this.parseMaybeAssign(), this.expect(n.types.colon), s.alternate = this.parseMaybeAssign(e), this.finishNode(s, "ConditionalExpression")
                    }
                    return r
                }, a.parseExprOps = function(e, t) {
                    var o = this.start,
                        n = this.startLoc,
                        i = this.parseMaybeUnary(t);
                    return t && t.start ? i : this.parseExprOp(i, o, n, -1, e)
                }, a.parseExprOp = function(e, t, o, i, r) {
                    var s = this.type.binop;
                    if (null != s && (!r || this.type !== n.types._in) && s > i) {
                        var a = this.startNodeAt(t, o);
                        a.left = e, a.operator = this.value;
                        var l = this.type;
                        this.next();
                        var c = this.start,
                            u = this.startLoc;
                        return a.right = this.parseExprOp(this.parseMaybeUnary(), c, u, s, r), this.finishNode(a, l === n.types.logicalOR || l === n.types.logicalAND ? "LogicalExpression" : "BinaryExpression"), this.parseExprOp(a, t, o, i, r)
                    }
                    return e
                }, a.parseMaybeUnary = function(e) {
                    if (this.type.prefix) {
                        var t = this.startNode(),
                            o = this.type === n.types.incDec;
                        return t.operator = this.value, t.prefix = !0, this.next(), t.argument = this.parseMaybeUnary(), e && e.start && this.unexpected(e.start), o ? this.checkLVal(t.argument) : this.strict && "delete" === t.operator && "Identifier" === t.argument.type && this.raise(t.start, "Deleting local variable in strict mode"), this.finishNode(t, o ? "UpdateExpression" : "UnaryExpression")
                    }
                    var i = this.start,
                        r = this.startLoc,
                        s = this.parseExprSubscripts(e);
                    if (e && e.start) return s;
                    for (; this.type.postfix && !this.canInsertSemicolon();) {
                        var t = this.startNodeAt(i, r);
                        t.operator = this.value, t.prefix = !1, t.argument = s, this.checkLVal(s), this.next(), s = this.finishNode(t, "UpdateExpression")
                    }
                    return s
                }, a.parseExprSubscripts = function(e) {
                    var t = this.start,
                        o = this.startLoc,
                        n = this.parseExprAtom(e);
                    return e && e.start ? n : this.parseSubscripts(n, t, o)
                }, a.parseSubscripts = function(e, t, o, i) {
                    for (;;)
                        if (this.eat(n.types.dot)) {
                            var r = this.startNodeAt(t, o);
                            r.object = e, r.property = this.parseIdent(!0), r.computed = !1, e = this.finishNode(r, "MemberExpression")
                        } else if (this.eat(n.types.bracketL)) {
                        var r = this.startNodeAt(t, o);
                        r.object = e, r.property = this.parseExpression(), r.computed = !0, this.expect(n.types.bracketR), e = this.finishNode(r, "MemberExpression")
                    } else if (!i && this.eat(n.types.parenL)) {
                        var r = this.startNodeAt(t, o);
                        r.callee = e, r.arguments = this.parseExprList(n.types.parenR, !1), e = this.finishNode(r, "CallExpression")
                    } else {
                        if (this.type !== n.types.backQuote) return e;
                        var r = this.startNodeAt(t, o);
                        r.tag = e, r.quasi = this.parseTemplate(), e = this.finishNode(r, "TaggedTemplateExpression")
                    }
                }, a.parseExprAtom = function(e) {
                    var t = void 0,
                        o = this.potentialArrowAt == this.start;
                    switch (this.type) {
                        case n.types._super:
                            this.inFunction || this.raise(this.start, "'super' outside of function or class");
                        case n.types._this:
                            var i = this.type === n.types._this ? "ThisExpression" : "Super";
                            return t = this.startNode(), this.next(), this.finishNode(t, i);
                        case n.types._yield:
                            this.inGenerator && this.unexpected();
                        case n.types.name:
                            var r = this.start,
                                s = this.startLoc,
                                a = this.parseIdent(this.type !== n.types.name);
                            return o && !this.canInsertSemicolon() && this.eat(n.types.arrow) ? this.parseArrowExpression(this.startNodeAt(r, s), [a]) : a;
                        case n.types.regexp:
                            var l = this.value;
                            return t = this.parseLiteral(l.value), t.regex = {
                                pattern: l.pattern,
                                flags: l.flags
                            }, t;
                        case n.types.num:
                        case n.types.string:
                            return this.parseLiteral(this.value);
                        case n.types._null:
                        case n.types._true:
                        case n.types._false:
                            return t = this.startNode(), t.value = this.type === n.types._null ? null : this.type === n.types._true, t.raw = this.type.keyword, this.next(), this.finishNode(t, "Literal");
                        case n.types.parenL:
                            return this.parseParenAndDistinguishExpression(o);
                        case n.types.bracketL:
                            return t = this.startNode(), this.next(), this.options.ecmaVersion >= 7 && this.type === n.types._for ? this.parseComprehension(t, !1) : (t.elements = this.parseExprList(n.types.bracketR, !0, !0, e), this.finishNode(t, "ArrayExpression"));
                        case n.types.braceL:
                            return this.parseObj(!1, e);
                        case n.types._function:
                            return t = this.startNode(), this.next(), this.parseFunction(t, !1);
                        case n.types._class:
                            return this.parseClass(this.startNode(), !1);
                        case n.types._new:
                            return this.parseNew();
                        case n.types.backQuote:
                            return this.parseTemplate();
                        default:
                            this.unexpected()
                    }
                }, a.parseLiteral = function(e) {
                    var t = this.startNode();
                    return t.value = e, t.raw = this.input.slice(this.start, this.end), this.next(), this.finishNode(t, "Literal")
                }, a.parseParenExpression = function() {
                    this.expect(n.types.parenL);
                    var e = this.parseExpression();
                    return this.expect(n.types.parenR), e
                }, a.parseParenAndDistinguishExpression = function(e) {
                    var t = this.start,
                        o = this.startLoc,
                        i = void 0;
                    if (this.options.ecmaVersion >= 6) {
                        if (this.next(), this.options.ecmaVersion >= 7 && this.type === n.types._for) return this.parseComprehension(this.startNodeAt(t, o), !0);
                        for (var r = this.start, s = this.startLoc, a = [], l = !0, c = {
                                start: 0
                            }, u = void 0, g = void 0; this.type !== n.types.parenR;) {
                            if (l ? l = !1 : this.expect(n.types.comma), this.type === n.types.ellipsis) {
                                u = this.start, a.push(this.parseParenItem(this.parseRest()));
                                break
                            }
                            this.type !== n.types.parenL || g || (g = this.start), a.push(this.parseMaybeAssign(!1, c, this.parseParenItem))
                        }
                        var p = this.start,
                            h = this.startLoc;
                        if (this.expect(n.types.parenR), e && !this.canInsertSemicolon() && this.eat(n.types.arrow)) return g && this.unexpected(g), this.parseParenArrowList(t, o, a);
                        a.length || this.unexpected(this.lastTokStart), u && this.unexpected(u), c.start && this.unexpected(c.start), a.length > 1 ? (i = this.startNodeAt(r, s), i.expressions = a, this.finishNodeAt(i, "SequenceExpression", p, h)) : i = a[0]
                    } else i = this.parseParenExpression();
                    if (this.options.preserveParens) {
                        var d = this.startNodeAt(t, o);
                        return d.expression = i, this.finishNode(d, "ParenthesizedExpression")
                    }
                    return i
                }, a.parseParenItem = function(e) {
                    return e
                }, a.parseParenArrowList = function(e, t, o) {
                    return this.parseArrowExpression(this.startNodeAt(e, t), o)
                };
                var l = [];
                a.parseNew = function() {
                    var e = this.startNode(),
                        t = this.parseIdent(!0);
                    if (this.options.ecmaVersion >= 6 && this.eat(n.types.dot)) return e.meta = t, e.property = this.parseIdent(!0), "target" !== e.property.name && this.raise(e.property.start, "The only valid meta property for new is new.target"), this.finishNode(e, "MetaProperty");
                    var o = this.start,
                        i = this.startLoc;
                    return e.callee = this.parseSubscripts(this.parseExprAtom(), o, i, !0), this.eat(n.types.parenL) ? e.arguments = this.parseExprList(n.types.parenR, !1) : e.arguments = l, this.finishNode(e, "NewExpression")
                }, a.parseTemplateElement = function() {
                    var e = this.startNode();
                    return e.value = {
                        raw: this.input.slice(this.start, this.end).replace(/\r\n?/g, "\n"),
                        cooked: this.value
                    }, this.next(), e.tail = this.type === n.types.backQuote, this.finishNode(e, "TemplateElement")
                }, a.parseTemplate = function() {
                    var e = this.startNode();
                    this.next(), e.expressions = [];
                    var t = this.parseTemplateElement();
                    for (e.quasis = [t]; !t.tail;) this.expect(n.types.dollarBraceL), e.expressions.push(this.parseExpression()), this.expect(n.types.braceR), e.quasis.push(t = this.parseTemplateElement());
                    return this.next(), this.finishNode(e, "TemplateLiteral")
                }, a.parseObj = function(e, t) {
                    var o = this.startNode(),
                        i = !0,
                        r = {};
                    for (o.properties = [], this.next(); !this.eat(n.types.braceR);) {
                        if (i) i = !1;
                        else if (this.expect(n.types.comma), this.afterTrailingComma(n.types.braceR)) break;
                        var s = this.startNode(),
                            a = void 0,
                            l = void 0,
                            c = void 0;
                        this.options.ecmaVersion >= 6 && (s.method = !1, s.shorthand = !1, (e || t) && (l = this.start, c = this.startLoc), e || (a = this.eat(n.types.star))), this.parsePropertyName(s), this.parsePropertyValue(s, e, a, l, c, t), this.checkPropClash(s, r), o.properties.push(this.finishNode(s, "Property"))
                    }
                    return this.finishNode(o, e ? "ObjectPattern" : "ObjectExpression")
                }, a.parsePropertyValue = function(e, t, o, i, s, a) {
                    if (this.eat(n.types.colon)) e.value = t ? this.parseMaybeDefault(this.start, this.startLoc) : this.parseMaybeAssign(!1, a), e.kind = "init";
                    else if (this.options.ecmaVersion >= 6 && this.type === n.types.parenL) t && this.unexpected(), e.kind = "init", e.method = !0, e.value = this.parseMethod(o);
                    else if (this.options.ecmaVersion >= 5 && !e.computed && "Identifier" === e.key.type && ("get" === e.key.name || "set" === e.key.name) && this.type != n.types.comma && this.type != n.types.braceR) {
                        (o || t) && this.unexpected(), e.kind = e.key.name, this.parsePropertyName(e), e.value = this.parseMethod(!1);
                        var l = "get" === e.kind ? 0 : 1;
                        if (e.value.params.length !== l) {
                            var c = e.value.start;
                            "get" === e.kind ? this.raise(c, "getter should have no params") : this.raise(c, "setter should have exactly one param")
                        }
                    } else this.options.ecmaVersion >= 6 && !e.computed && "Identifier" === e.key.type ? (e.kind = "init", t ? ((this.isKeyword(e.key.name) || this.strict && (r.reservedWords.strictBind(e.key.name) || r.reservedWords.strict(e.key.name)) || !this.options.allowReserved && this.isReservedWord(e.key.name)) && this.raise(e.key.start, "Binding " + e.key.name), e.value = this.parseMaybeDefault(i, s, e.key)) : this.type === n.types.eq && a ? (a.start || (a.start = this.start), e.value = this.parseMaybeDefault(i, s, e.key)) : e.value = e.key, e.shorthand = !0) : this.unexpected()
                }, a.parsePropertyName = function(e) {
                    if (this.options.ecmaVersion >= 6) {
                        if (this.eat(n.types.bracketL)) return e.computed = !0, e.key = this.parseMaybeAssign(), this.expect(n.types.bracketR), e.key;
                        e.computed = !1
                    }
                    return e.key = this.type === n.types.num || this.type === n.types.string ? this.parseExprAtom() : this.parseIdent(!0)
                }, a.initFunction = function(e) {
                    e.id = null, this.options.ecmaVersion >= 6 && (e.generator = !1, e.expression = !1)
                }, a.parseMethod = function(e) {
                    var t = this.startNode();
                    this.initFunction(t), this.expect(n.types.parenL), t.params = this.parseBindingList(n.types.parenR, !1, !1);
                    return this.options.ecmaVersion >= 6 && (t.generator = e), this.parseFunctionBody(t, !1), this.finishNode(t, "FunctionExpression")
                }, a.parseArrowExpression = function(e, t) {
                    return this.initFunction(e), e.params = this.toAssignableList(t, !0), this.parseFunctionBody(e, !0), this.finishNode(e, "ArrowFunctionExpression")
                }, a.parseFunctionBody = function(e, t) {
                    var o = t && this.type !== n.types.braceL;
                    if (o) e.body = this.parseMaybeAssign(), e.expression = !0;
                    else {
                        var i = this.inFunction,
                            r = this.inGenerator,
                            s = this.labels;
                        this.inFunction = !0, this.inGenerator = e.generator, this.labels = [], e.body = this.parseBlock(!0), e.expression = !1, this.inFunction = i, this.inGenerator = r, this.labels = s
                    }
                    if (this.strict || !o && e.body.body.length && this.isUseStrict(e.body.body[0])) {
                        var a = {},
                            l = this.strict;
                        this.strict = !0, e.id && this.checkLVal(e.id, !0);
                        for (var c = 0; c < e.params.length; c++) this.checkLVal(e.params[c], !0, a);
                        this.strict = l
                    }
                }, a.parseExprList = function(e, t, o, i) {
                    for (var r = [], s = !0; !this.eat(e);) {
                        if (s) s = !1;
                        else if (this.expect(n.types.comma), t && this.afterTrailingComma(e)) break;
                        var a = void 0;
                        a = o && this.type === n.types.comma ? null : this.type === n.types.ellipsis ? this.parseSpread(i) : this.parseMaybeAssign(!1, i), r.push(a)
                    }
                    return r
                }, a.parseIdent = function(e) {
                    var t = this.startNode();
                    return e && "never" == this.options.allowReserved && (e = !1), this.type === n.types.name ? (!e && (!this.options.allowReserved && this.isReservedWord(this.value) || this.strict && r.reservedWords.strict(this.value) && (this.options.ecmaVersion >= 6 || -1 == this.input.slice(this.start, this.end).indexOf("\\"))) && this.raise(this.start, "The keyword '" + this.value + "' is reserved"), t.name = this.value) : e && this.type.keyword ? t.name = this.type.keyword : this.unexpected(), this.next(), this.finishNode(t, "Identifier")
                }, a.parseYield = function() {
                    var e = this.startNode();
                    return this.next(), this.type == n.types.semi || this.canInsertSemicolon() || this.type != n.types.star && !this.type.startsExpr ? (e.delegate = !1, e.argument = null) : (e.delegate = this.eat(n.types.star), e.argument = this.parseMaybeAssign()), this.finishNode(e, "YieldExpression")
                }, a.parseComprehension = function(e, t) {
                    for (e.blocks = []; this.type === n.types._for;) {
                        var o = this.startNode();
                        this.next(), this.expect(n.types.parenL), o.left = this.parseBindingAtom(), this.checkLVal(o.left, !0), this.expectContextual("of"), o.right = this.parseExpression(), this.expect(n.types.parenR), e.blocks.push(this.finishNode(o, "ComprehensionBlock"))
                    }
                    return e.filter = this.eat(n.types._if) ? this.parseParenExpression() : null, e.body = this.parseExpression(), this.expect(t ? n.types.parenR : n.types.bracketR), e.generator = t, this.finishNode(e, "ComprehensionExpression")
                }
            }, {
                "./identifier": 2,
                "./state": 10,
                "./tokentype": 14,
                "./util": 15
            }],
            2: [function(e, t, o) {
                function n(e, t) {
                    for (var o = 65536, n = 0; n < t.length; n += 2) {
                        if (o += t[n], o > e) return !1;
                        if (o += t[n + 1], o >= e) return !0
                    }
                }

                function i(e, t) {
                    return 65 > e ? 36 === e : 91 > e ? !0 : 97 > e ? 95 === e : 123 > e ? !0 : 65535 >= e ? e >= 170 && u.test(String.fromCharCode(e)) : t === !1 ? !1 : n(e, p)
                }

                function r(e, t) {
                    return 48 > e ? 36 === e : 58 > e ? !0 : 65 > e ? !1 : 91 > e ? !0 : 97 > e ? 95 === e : 123 > e ? !0 : 65535 >= e ? e >= 170 && g.test(String.fromCharCode(e)) : t === !1 ? !1 : n(e, p) || n(e, h)
                }
                o.__esModule = !0, o.isIdentifierStart = i, o.isIdentifierChar = r;
                var s = {
                    3: function(e) {
                        switch (e.length) {
                            case 6:
                                switch (e) {
                                    case "double":
                                    case "export":
                                    case "import":
                                    case "native":
                                    case "public":
                                    case "static":
                                    case "throws":
                                        return !0
                                }
                                return !1;
                            case 4:
                                switch (e) {
                                    case "byte":
                                    case "char":
                                    case "enum":
                                    case "goto":
                                    case "long":
                                        return !0
                                }
                                return !1;
                            case 5:
                                switch (e) {
                                    case "class":
                                    case "final":
                                    case "float":
                                    case "short":
                                    case "super":
                                        return !0
                                }
                                return !1;
                            case 7:
                                switch (e) {
                                    case "boolean":
                                    case "extends":
                                    case "package":
                                    case "private":
                                        return !0
                                }
                                return !1;
                            case 9:
                                switch (e) {
                                    case "interface":
                                    case "protected":
                                    case "transient":
                                        return !0
                                }
                                return !1;
                            case 8:
                                switch (e) {
                                    case "abstract":
                                    case "volatile":
                                        return !0
                                }
                                return !1;
                            case 10:
                                return "implements" === e;
                            case 3:
                                return "int" === e;
                            case 12:
                                return "synchronized" === e
                        }
                    },
                    5: function(e) {
                        switch (e.length) {
                            case 5:
                                switch (e) {
                                    case "class":
                                    case "super":
                                    case "const":
                                        return !0
                                }
                                return !1;
                            case 6:
                                switch (e) {
                                    case "export":
                                    case "import":
                                        return !0
                                }
                                return !1;
                            case 4:
                                return "enum" === e;
                            case 7:
                                return "extends" === e
                        }
                    },
                    6: function(e) {
                        switch (e) {
                            case "enum":
                            case "await":
                                return !0
                        }
                        return !1
                    },
                    strict: function(e) {
                        switch (e.length) {
                            case 9:
                                switch (e) {
                                    case "interface":
                                    case "protected":
                                        return !0
                                }
                                return !1;
                            case 7:
                                switch (e) {
                                    case "package":
                                    case "private":
                                        return !0
                                }
                                return !1;
                            case 6:
                                switch (e) {
                                    case "public":
                                    case "static":
                                        return !0
                                }
                                return !1;
                            case 10:
                                return "implements" === e;
                            case 3:
                                return "let" === e;
                            case 5:
                                return "yield" === e
                        }
                    },
                    strictBind: function(e) {
                        switch (e) {
                            case "eval":
                            case "arguments":
                                return !0
                        }
                        return !1
                    }
                };
                o.reservedWords = s;
                var a = {
                    5: function(e) {
                        switch (e.length) {
                            case 4:
                                switch (e) {
                                    case "case":
                                    case "else":
                                    case "with":
                                    case "null":
                                    case "true":
                                    case "void":
                                    case "this":
                                        return !0
                                }
                                return !1;
                            case 5:
                                switch (e) {
                                    case "break":
                                    case "catch":
                                    case "throw":
                                    case "while":
                                    case "false":
                                        return !0
                                }
                                return !1;
                            case 3:
                                switch (e) {
                                    case "for":
                                    case "try":
                                    case "var":
                                    case "new":
                                        return !0
                                }
                                return !1;
                            case 6:
                                switch (e) {
                                    case "return":
                                    case "switch":
                                    case "typeof":
                                    case "delete":
                                        return !0
                                }
                                return !1;
                            case 8:
                                switch (e) {
                                    case "continue":
                                    case "debugger":
                                    case "function":
                                        return !0
                                }
                                return !1;
                            case 2:
                                switch (e) {
                                    case "do":
                                    case "if":
                                    case "in":
                                        return !0
                                }
                                return !1;
                            case 7:
                                switch (e) {
                                    case "default":
                                    case "finally":
                                        return !0
                                }
                                return !1;
                            case 10:
                                return "instanceof" === e
                        }
                    },
                    6: function(e) {
                        switch (e.length) {
                            case 5:
                                switch (e) {
                                    case "break":
                                    case "catch":
                                    case "throw":
                                    case "while":
                                    case "false":
                                    case "const":
                                    case "class":
                                    case "yield":
                                    case "super":
                                        return !0
                                }
                                return !1;
                            case 4:
                                switch (e) {
                                    case "case":
                                    case "else":
                                    case "with":
                                    case "null":
                                    case "true":
                                    case "void":
                                    case "this":
                                        return !0
                                }
                                return !1;
                            case 6:
                                switch (e) {
                                    case "return":
                                    case "switch":
                                    case "typeof":
                                    case "delete":
                                    case "export":
                                    case "import":
                                        return !0
                                }
                                return !1;
                            case 3:
                                switch (e) {
                                    case "for":
                                    case "try":
                                    case "var":
                                    case "new":
                                    case "let":
                                        return !0
                                }
                                return !1;
                            case 8:
                                switch (e) {
                                    case "continue":
                                    case "debugger":
                                    case "function":
                                        return !0
                                }
                                return !1;
                            case 7:
                                switch (e) {
                                    case "default":
                                    case "finally":
                                    case "extends":
                                        return !0
                                }
                                return !1;
                            case 2:
                                switch (e) {
                                    case "do":
                                    case "if":
                                    case "in":
                                        return !0
                                }
                                return !1;
                            case 10:
                                return "instanceof" === e
                        }
                    }
                };
                o.keywords = a;
                var l = "\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
                    c = "\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
                    u = new RegExp("[" + l + "]"),
                    g = new RegExp("[" + l + c + "]");
                l = c = null;
                var p = [0, 11, 2, 25, 2, 18, 2, 1, 2, 14, 3, 13, 35, 122, 70, 52, 268, 28, 4, 48, 48, 31, 17, 26, 6, 37, 11, 29, 3, 35, 5, 7, 2, 4, 43, 157, 99, 39, 9, 51, 157, 310, 10, 21, 11, 7, 153, 5, 3, 0, 2, 43, 2, 1, 4, 0, 3, 22, 11, 22, 10, 30, 98, 21, 11, 25, 71, 55, 7, 1, 65, 0, 16, 3, 2, 2, 2, 26, 45, 28, 4, 28, 36, 7, 2, 27, 28, 53, 11, 21, 11, 18, 14, 17, 111, 72, 955, 52, 76, 44, 33, 24, 27, 35, 42, 34, 4, 0, 13, 47, 15, 3, 22, 0, 38, 17, 2, 24, 133, 46, 39, 7, 3, 1, 3, 21, 2, 6, 2, 1, 2, 4, 4, 0, 32, 4, 287, 47, 21, 1, 2, 0, 185, 46, 82, 47, 21, 0, 60, 42, 502, 63, 32, 0, 449, 56, 1288, 920, 104, 110, 2962, 1070, 13266, 568, 8, 30, 114, 29, 19, 47, 17, 3, 32, 20, 6, 18, 881, 68, 12, 0, 67, 12, 16481, 1, 3071, 106, 6, 12, 4, 8, 8, 9, 5991, 84, 2, 70, 2, 1, 3, 0, 3, 1, 3, 3, 2, 11, 2, 0, 2, 6, 2, 64, 2, 3, 3, 7, 2, 6, 2, 27, 2, 3, 2, 4, 2, 0, 4, 6, 2, 339, 3, 24, 2, 24, 2, 30, 2, 24, 2, 30, 2, 24, 2, 30, 2, 24, 2, 30, 2, 24, 2, 7, 4149, 196, 1340, 3, 2, 26, 2, 1, 2, 0, 3, 0, 2, 9, 2, 3, 2, 0, 2, 0, 7, 0, 5, 0, 2, 0, 2, 0, 2, 2, 2, 1, 2, 0, 3, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 1, 2, 0, 3, 3, 2, 6, 2, 3, 2, 3, 2, 0, 2, 9, 2, 16, 6, 2, 2, 4, 2, 16, 4421, 42710, 42, 4148, 12, 221, 16355, 541],
                    h = [509, 0, 227, 0, 150, 4, 294, 9, 1368, 2, 2, 1, 6, 3, 41, 2, 5, 0, 166, 1, 1306, 2, 54, 14, 32, 9, 16, 3, 46, 10, 54, 9, 7, 2, 37, 13, 2, 9, 52, 0, 13, 2, 49, 13, 16, 9, 83, 11, 168, 11, 6, 9, 8, 2, 57, 0, 2, 6, 3, 1, 3, 2, 10, 0, 11, 1, 3, 6, 4, 4, 316, 19, 13, 9, 214, 6, 3, 8, 112, 16, 16, 9, 82, 12, 9, 9, 535, 9, 20855, 9, 135, 4, 60, 6, 26, 9, 1016, 45, 17, 3, 19723, 1, 5319, 4, 4, 5, 9, 7, 3, 6, 31, 3, 149, 2, 1418, 49, 4305, 6, 792618, 239]
            }, {}],
            3: [function(e, t, o) {
                function n(e, t) {
                    return new s.Parser(t, e).parse()
                }

                function i(e, t, o) {
                    var n = new s.Parser(o, e, t);
                    return n.nextToken(), n.parseExpression()
                }

                function r(e, t) {
                    return new s.Parser(t, e)
                }
                o.__esModule = !0, o.parse = n, o.parseExpressionAt = i, o.tokenizer = r;
                var s = e("./state"),
                    a = e("./options");
                e("./parseutil"), e("./statement"), e("./lval"), e("./expression"), e("./location"), o.Parser = s.Parser, o.plugins = s.plugins, o.defaultOptions = a.defaultOptions;
                var l = e("./locutil");
                o.Position = l.Position, o.SourceLocation = l.SourceLocation, o.getLineInfo = l.getLineInfo;
                var c = e("./node");
                o.Node = c.Node;
                var u = e("./tokentype");
                o.TokenType = u.TokenType, o.tokTypes = u.types;
                var g = e("./tokencontext");
                o.TokContext = g.TokContext, o.tokContexts = g.types;
                var p = e("./identifier");
                o.isIdentifierChar = p.isIdentifierChar, o.isIdentifierStart = p.isIdentifierStart;
                var h = e("./tokenize");
                o.Token = h.Token;
                var d = e("./whitespace");
                o.isNewLine = d.isNewLine, o.lineBreak = d.lineBreak, o.lineBreakG = d.lineBreakG;
                var f = "2.1.1";
                o.version = f
            }, {
                "./expression": 1,
                "./identifier": 2,
                "./location": 4,
                "./locutil": 5,
                "./lval": 6,
                "./node": 7,
                "./options": 8,
                "./parseutil": 9,
                "./state": 10,
                "./statement": 11,
                "./tokencontext": 12,
                "./tokenize": 13,
                "./tokentype": 14,
                "./whitespace": 16
            }],
            4: [function(e, t, o) {
                var n = e("./state"),
                    i = e("./locutil"),
                    r = n.Parser.prototype;
                r.raise = function(e, t) {
                    var o = i.getLineInfo(this.input, e);
                    t += " (" + o.line + ":" + o.column + ")";
                    var n = new SyntaxError(t);
                    throw n.pos = e, n.loc = o, n.raisedAt = this.pos, n
                }, r.curPosition = function() {
                    return this.options.locations ? new i.Position(this.curLine, this.pos - this.lineStart) : void 0
                }
            }, {
                "./locutil": 5,
                "./state": 10
            }],
            5: [function(e, t, o) {
                function n(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }

                function i(e, t) {
                    for (var o = 1, n = 0;;) {
                        r.lineBreakG.lastIndex = n;
                        var i = r.lineBreakG.exec(e);
                        if (!(i && i.index < t)) return new s(o, t - n);
                        ++o, n = i.index + i[0].length
                    }
                }
                o.__esModule = !0, o.getLineInfo = i;
                var r = e("./whitespace"),
                    s = function() {
                        function e(t, o) {
                            n(this, e), this.line = t, this.column = o
                        }
                        return e.prototype.offset = function(t) {
                            return new e(this.line, this.column + t)
                        }, e
                    }();
                o.Position = s;
                var a = function l(e, t, o) {
                    n(this, l), this.start = t, this.end = o, null !== e.sourceFile && (this.source = e.sourceFile)
                };
                o.SourceLocation = a
            }, {
                "./whitespace": 16
            }],
            6: [function(e, t, o) {
                var n = e("./tokentype"),
                    i = e("./state"),
                    r = e("./identifier"),
                    s = e("./util"),
                    a = i.Parser.prototype;
                a.toAssignable = function(e, t) {
                    if (this.options.ecmaVersion >= 6 && e) switch (e.type) {
                        case "Identifier":
                        case "ObjectPattern":
                        case "ArrayPattern":
                        case "AssignmentPattern":
                            break;
                        case "ObjectExpression":
                            e.type = "ObjectPattern";
                            for (var o = 0; o < e.properties.length; o++) {
                                var n = e.properties[o];
                                "init" !== n.kind && this.raise(n.key.start, "Object pattern can't contain getter or setter"), this.toAssignable(n.value, t)
                            }
                            break;
                        case "ArrayExpression":
                            e.type = "ArrayPattern", this.toAssignableList(e.elements, t);
                            break;
                        case "AssignmentExpression":
                            "=" === e.operator ? (e.type = "AssignmentPattern", delete e.operator) : this.raise(e.left.end, "Only '=' operator can be used for specifying default value.");
                            break;
                        case "ParenthesizedExpression":
                            e.expression = this.toAssignable(e.expression, t);
                            break;
                        case "MemberExpression":
                            if (!t) break;
                        default:
                            this.raise(e.start, "Assigning to rvalue")
                    }
                    return e
                }, a.toAssignableList = function(e, t) {
                    var o = e.length;
                    if (o) {
                        var n = e[o - 1];
                        if (n && "RestElement" == n.type) --o;
                        else if (n && "SpreadElement" == n.type) {
                            n.type = "RestElement";
                            var i = n.argument;
                            this.toAssignable(i, t), "Identifier" !== i.type && "MemberExpression" !== i.type && "ArrayPattern" !== i.type && this.unexpected(i.start), --o
                        }
                    }
                    for (var r = 0; o > r; r++) {
                        var s = e[r];
                        s && this.toAssignable(s, t)
                    }
                    return e
                }, a.parseSpread = function(e) {
                    var t = this.startNode();
                    return this.next(), t.argument = this.parseMaybeAssign(e), this.finishNode(t, "SpreadElement")
                }, a.parseRest = function() {
                    var e = this.startNode();
                    return this.next(), e.argument = this.type === n.types.name || this.type === n.types.bracketL ? this.parseBindingAtom() : this.unexpected(),
                        this.finishNode(e, "RestElement")
                }, a.parseBindingAtom = function() {
                    if (this.options.ecmaVersion < 6) return this.parseIdent();
                    switch (this.type) {
                        case n.types.name:
                            return this.parseIdent();
                        case n.types.bracketL:
                            var e = this.startNode();
                            return this.next(), e.elements = this.parseBindingList(n.types.bracketR, !0, !0), this.finishNode(e, "ArrayPattern");
                        case n.types.braceL:
                            return this.parseObj(!0);
                        default:
                            this.unexpected()
                    }
                }, a.parseBindingList = function(e, t, o) {
                    for (var i = [], r = !0; !this.eat(e);)
                        if (r ? r = !1 : this.expect(n.types.comma), t && this.type === n.types.comma) i.push(null);
                        else {
                            if (o && this.afterTrailingComma(e)) break;
                            if (this.type === n.types.ellipsis) {
                                var s = this.parseRest();
                                this.parseBindingListItem(s), i.push(s), this.expect(e);
                                break
                            }
                            var a = this.parseMaybeDefault(this.start, this.startLoc);
                            this.parseBindingListItem(a), i.push(a)
                        }
                    return i
                }, a.parseBindingListItem = function(e) {
                    return e
                }, a.parseMaybeDefault = function(e, t, o) {
                    if (o = o || this.parseBindingAtom(), !this.eat(n.types.eq)) return o;
                    var i = this.startNodeAt(e, t);
                    return i.operator = "=", i.left = o, i.right = this.parseMaybeAssign(), this.finishNode(i, "AssignmentPattern")
                }, a.checkLVal = function(e, t, o) {
                    switch (e.type) {
                        case "Identifier":
                            this.strict && (r.reservedWords.strictBind(e.name) || r.reservedWords.strict(e.name)) && this.raise(e.start, (t ? "Binding " : "Assigning to ") + e.name + " in strict mode"), o && (s.has(o, e.name) && this.raise(e.start, "Argument name clash in strict mode"), o[e.name] = !0);
                            break;
                        case "MemberExpression":
                            t && this.raise(e.start, (t ? "Binding" : "Assigning to") + " member expression");
                            break;
                        case "ObjectPattern":
                            for (var n = 0; n < e.properties.length; n++) this.checkLVal(e.properties[n].value, t, o);
                            break;
                        case "ArrayPattern":
                            for (var n = 0; n < e.elements.length; n++) {
                                var i = e.elements[n];
                                i && this.checkLVal(i, t, o)
                            }
                            break;
                        case "AssignmentPattern":
                            this.checkLVal(e.left, t, o);
                            break;
                        case "RestElement":
                            this.checkLVal(e.argument, t, o);
                            break;
                        case "ParenthesizedExpression":
                            this.checkLVal(e.expression, t, o);
                            break;
                        default:
                            this.raise(e.start, (t ? "Binding" : "Assigning to") + " rvalue")
                    }
                }
            }, {
                "./identifier": 2,
                "./state": 10,
                "./tokentype": 14,
                "./util": 15
            }],
            7: [function(e, t, o) {
                function n(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }

                function i(e, t, o, n) {
                    return e.type = t, e.end = o, this.options.locations && (e.loc.end = n), this.options.ranges && (e.range[1] = o), e
                }
                o.__esModule = !0;
                var r = e("./state"),
                    s = e("./locutil"),
                    a = function c(e, t, o) {
                        n(this, c), this.type = "", this.start = t, this.end = 0, e.options.locations && (this.loc = new s.SourceLocation(e, o)), e.options.directSourceFile && (this.sourceFile = e.options.directSourceFile), e.options.ranges && (this.range = [t, 0])
                    };
                o.Node = a;
                var l = r.Parser.prototype;
                l.startNode = function() {
                    return new a(this, this.start, this.startLoc)
                }, l.startNodeAt = function(e, t) {
                    return new a(this, e, t)
                }, l.finishNode = function(e, t) {
                    return i.call(this, e, t, this.lastTokEnd, this.lastTokEndLoc)
                }, l.finishNodeAt = function(e, t, o, n) {
                    return i.call(this, e, t, o, n)
                }
            }, {
                "./locutil": 5,
                "./state": 10
            }],
            8: [function(e, t, o) {
                function n(e) {
                    var t = {};
                    for (var o in a) t[o] = e && r.has(e, o) ? e[o] : a[o];
                    return r.isArray(t.onToken) && ! function() {
                        var e = t.onToken;
                        t.onToken = function(t) {
                            return e.push(t)
                        }
                    }(), r.isArray(t.onComment) && (t.onComment = i(t, t.onComment)), t
                }

                function i(e, t) {
                    return function(o, n, i, r, a, l) {
                        var c = {
                            type: o ? "Block" : "Line",
                            value: n,
                            start: i,
                            end: r
                        };
                        e.locations && (c.loc = new s.SourceLocation(this, a, l)), e.ranges && (c.range = [i, r]), t.push(c)
                    }
                }
                o.__esModule = !0, o.getOptions = n;
                var r = e("./util"),
                    s = e("./locutil"),
                    a = {
                        ecmaVersion: 5,
                        sourceType: "script",
                        onInsertedSemicolon: null,
                        onTrailingComma: null,
                        allowReserved: !0,
                        allowReturnOutsideFunction: !1,
                        allowImportExportEverywhere: !1,
                        allowHashBang: !1,
                        locations: !1,
                        onToken: null,
                        onComment: null,
                        ranges: !1,
                        program: null,
                        sourceFile: null,
                        directSourceFile: null,
                        preserveParens: !1,
                        plugins: {}
                    };
                o.defaultOptions = a
            }, {
                "./locutil": 5,
                "./util": 15
            }],
            9: [function(e, t, o) {
                var n = e("./tokentype"),
                    i = e("./state"),
                    r = e("./whitespace"),
                    s = i.Parser.prototype;
                s.isUseStrict = function(e) {
                    return this.options.ecmaVersion >= 5 && "ExpressionStatement" === e.type && "Literal" === e.expression.type && "use strict" === e.expression.raw.slice(1, -1)
                }, s.eat = function(e) {
                    return this.type === e ? (this.next(), !0) : !1
                }, s.isContextual = function(e) {
                    return this.type === n.types.name && this.value === e
                }, s.eatContextual = function(e) {
                    return this.value === e && this.eat(n.types.name)
                }, s.expectContextual = function(e) {
                    this.eatContextual(e) || this.unexpected()
                }, s.canInsertSemicolon = function() {
                    return this.type === n.types.eof || this.type === n.types.braceR || r.lineBreak.test(this.input.slice(this.lastTokEnd, this.start))
                }, s.insertSemicolon = function() {
                    return this.canInsertSemicolon() ? (this.options.onInsertedSemicolon && this.options.onInsertedSemicolon(this.lastTokEnd, this.lastTokEndLoc), !0) : void 0
                }, s.semicolon = function() {
                    this.eat(n.types.semi) || this.insertSemicolon() || this.unexpected()
                }, s.afterTrailingComma = function(e) {
                    return this.type == e ? (this.options.onTrailingComma && this.options.onTrailingComma(this.lastTokStart, this.lastTokStartLoc), this.next(), !0) : void 0
                }, s.expect = function(e) {
                    this.eat(e) || this.unexpected()
                }, s.unexpected = function(e) {
                    this.raise(null != e ? e : this.start, "Unexpected token")
                }
            }, {
                "./state": 10,
                "./tokentype": 14,
                "./whitespace": 16
            }],
            10: [function(e, t, o) {
                function n(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }
                o.__esModule = !0;
                var i = e("./identifier"),
                    r = e("./tokentype"),
                    s = e("./whitespace"),
                    a = e("./options"),
                    l = {};
                o.plugins = l;
                var c = function() {
                    function e(t, o, l) {
                        n(this, e), this.options = a.getOptions(t), this.sourceFile = this.options.sourceFile, this.isKeyword = i.keywords[this.options.ecmaVersion >= 6 ? 6 : 5], this.isReservedWord = i.reservedWords[this.options.ecmaVersion], this.input = String(o), this.loadPlugins(this.options.plugins), l ? (this.pos = l, this.lineStart = Math.max(0, this.input.lastIndexOf("\n", l)), this.curLine = this.input.slice(0, this.lineStart).split(s.lineBreak).length) : (this.pos = this.lineStart = 0, this.curLine = 1), this.type = r.types.eof, this.value = null, this.start = this.end = this.pos, this.startLoc = this.endLoc = this.curPosition(), this.lastTokEndLoc = this.lastTokStartLoc = null, this.lastTokStart = this.lastTokEnd = this.pos, this.context = this.initialContext(), this.exprAllowed = !0, this.strict = this.inModule = "module" === this.options.sourceType, this.potentialArrowAt = -1, this.inFunction = this.inGenerator = !1, this.labels = [], 0 === this.pos && this.options.allowHashBang && "#!" === this.input.slice(0, 2) && this.skipLineComment(2)
                    }
                    return e.prototype.extend = function(e, t) {
                        this[e] = t(this[e])
                    }, e.prototype.loadPlugins = function(e) {
                        for (var t in e) {
                            var o = l[t];
                            if (!o) throw new Error("Plugin '" + t + "' not found");
                            o(this, e[t])
                        }
                    }, e.prototype.parse = function() {
                        var e = this.options.program || this.startNode();
                        return this.nextToken(), this.parseTopLevel(e)
                    }, e
                }();
                o.Parser = c
            }, {
                "./identifier": 2,
                "./options": 8,
                "./tokentype": 14,
                "./whitespace": 16
            }],
            11: [function(e, t, o) {
                var n = e("./tokentype"),
                    i = e("./state"),
                    r = e("./whitespace"),
                    s = i.Parser.prototype;
                s.parseTopLevel = function(e) {
                    var t = !0;
                    for (e.body || (e.body = []); this.type !== n.types.eof;) {
                        var o = this.parseStatement(!0, !0);
                        e.body.push(o), t && (this.isUseStrict(o) && this.setStrict(!0), t = !1)
                    }
                    return this.next(), this.options.ecmaVersion >= 6 && (e.sourceType = this.options.sourceType), this.finishNode(e, "Program")
                };
                var a = {
                        kind: "loop"
                    },
                    l = {
                        kind: "switch"
                    };
                s.parseStatement = function(e, t) {
                    var o = this.type,
                        i = this.startNode();
                    switch (o) {
                        case n.types._break:
                        case n.types._continue:
                            return this.parseBreakContinueStatement(i, o.keyword);
                        case n.types._debugger:
                            return this.parseDebuggerStatement(i);
                        case n.types._do:
                            return this.parseDoStatement(i);
                        case n.types._for:
                            return this.parseForStatement(i);
                        case n.types._function:
                            return !e && this.options.ecmaVersion >= 6 && this.unexpected(), this.parseFunctionStatement(i);
                        case n.types._class:
                            return e || this.unexpected(), this.parseClass(i, !0);
                        case n.types._if:
                            return this.parseIfStatement(i);
                        case n.types._return:
                            return this.parseReturnStatement(i);
                        case n.types._switch:
                            return this.parseSwitchStatement(i);
                        case n.types._throw:
                            return this.parseThrowStatement(i);
                        case n.types._try:
                            return this.parseTryStatement(i);
                        case n.types._let:
                        case n.types._const:
                            e || this.unexpected();
                        case n.types._var:
                            return this.parseVarStatement(i, o);
                        case n.types._while:
                            return this.parseWhileStatement(i);
                        case n.types._with:
                            return this.parseWithStatement(i);
                        case n.types.braceL:
                            return this.parseBlock();
                        case n.types.semi:
                            return this.parseEmptyStatement(i);
                        case n.types._export:
                        case n.types._import:
                            return this.options.allowImportExportEverywhere || (t || this.raise(this.start, "'import' and 'export' may only appear at the top level"), this.inModule || this.raise(this.start, "'import' and 'export' may appear only with 'sourceType: module'")), o === n.types._import ? this.parseImport(i) : this.parseExport(i);
                        default:
                            var r = this.value,
                                s = this.parseExpression();
                            return o === n.types.name && "Identifier" === s.type && this.eat(n.types.colon) ? this.parseLabeledStatement(i, r, s) : this.parseExpressionStatement(i, s)
                    }
                }, s.parseBreakContinueStatement = function(e, t) {
                    var o = "break" == t;
                    this.next(), this.eat(n.types.semi) || this.insertSemicolon() ? e.label = null : this.type !== n.types.name ? this.unexpected() : (e.label = this.parseIdent(), this.semicolon());
                    for (var i = 0; i < this.labels.length; ++i) {
                        var r = this.labels[i];
                        if (null == e.label || r.name === e.label.name) {
                            if (null != r.kind && (o || "loop" === r.kind)) break;
                            if (e.label && o) break
                        }
                    }
                    return i === this.labels.length && this.raise(e.start, "Unsyntactic " + t), this.finishNode(e, o ? "BreakStatement" : "ContinueStatement")
                }, s.parseDebuggerStatement = function(e) {
                    return this.next(), this.semicolon(), this.finishNode(e, "DebuggerStatement")
                }, s.parseDoStatement = function(e) {
                    return this.next(), this.labels.push(a), e.body = this.parseStatement(!1), this.labels.pop(), this.expect(n.types._while), e.test = this.parseParenExpression(), this.options.ecmaVersion >= 6 ? this.eat(n.types.semi) : this.semicolon(), this.finishNode(e, "DoWhileStatement")
                }, s.parseForStatement = function(e) {
                    if (this.next(), this.labels.push(a), this.expect(n.types.parenL), this.type === n.types.semi) return this.parseFor(e, null);
                    if (this.type === n.types._var || this.type === n.types._let || this.type === n.types._const) {
                        var t = this.startNode(),
                            o = this.type;
                        return this.next(), this.parseVar(t, !0, o), this.finishNode(t, "VariableDeclaration"), !(this.type === n.types._in || this.options.ecmaVersion >= 6 && this.isContextual("of")) || 1 !== t.declarations.length || o !== n.types._var && t.declarations[0].init ? this.parseFor(e, t) : this.parseForIn(e, t)
                    }
                    var i = {
                            start: 0
                        },
                        r = this.parseExpression(!0, i);
                    return this.type === n.types._in || this.options.ecmaVersion >= 6 && this.isContextual("of") ? (this.toAssignable(r), this.checkLVal(r), this.parseForIn(e, r)) : (i.start && this.unexpected(i.start), this.parseFor(e, r))
                }, s.parseFunctionStatement = function(e) {
                    return this.next(), this.parseFunction(e, !0)
                }, s.parseIfStatement = function(e) {
                    return this.next(), e.test = this.parseParenExpression(), e.consequent = this.parseStatement(!1), e.alternate = this.eat(n.types._else) ? this.parseStatement(!1) : null, this.finishNode(e, "IfStatement")
                }, s.parseReturnStatement = function(e) {
                    return this.inFunction || this.options.allowReturnOutsideFunction || this.raise(this.start, "'return' outside of function"), this.next(), this.eat(n.types.semi) || this.insertSemicolon() ? e.argument = null : (e.argument = this.parseExpression(), this.semicolon()), this.finishNode(e, "ReturnStatement")
                }, s.parseSwitchStatement = function(e) {
                    this.next(), e.discriminant = this.parseParenExpression(), e.cases = [], this.expect(n.types.braceL), this.labels.push(l);
                    for (var t, o = !1; this.type != n.types.braceR;)
                        if (this.type === n.types._case || this.type === n.types._default) {
                            var i = this.type === n.types._case;
                            t && this.finishNode(t, "SwitchCase"), e.cases.push(t = this.startNode()), t.consequent = [], this.next(), i ? t.test = this.parseExpression() : (o && this.raise(this.lastTokStart, "Multiple default clauses"), o = !0, t.test = null), this.expect(n.types.colon)
                        } else t || this.unexpected(), t.consequent.push(this.parseStatement(!0));
                    return t && this.finishNode(t, "SwitchCase"), this.next(), this.labels.pop(), this.finishNode(e, "SwitchStatement")
                }, s.parseThrowStatement = function(e) {
                    return this.next(), r.lineBreak.test(this.input.slice(this.lastTokEnd, this.start)) && this.raise(this.lastTokEnd, "Illegal newline after throw"), e.argument = this.parseExpression(), this.semicolon(), this.finishNode(e, "ThrowStatement")
                };
                var c = [];
                s.parseTryStatement = function(e) {
                    if (this.next(), e.block = this.parseBlock(), e.handler = null, this.type === n.types._catch) {
                        var t = this.startNode();
                        this.next(), this.expect(n.types.parenL), t.param = this.parseBindingAtom(), this.checkLVal(t.param, !0), this.expect(n.types.parenR), t.guard = null, t.body = this.parseBlock(), e.handler = this.finishNode(t, "CatchClause")
                    }
                    return e.guardedHandlers = c, e.finalizer = this.eat(n.types._finally) ? this.parseBlock() : null, e.handler || e.finalizer || this.raise(e.start, "Missing catch or finally clause"), this.finishNode(e, "TryStatement")
                }, s.parseVarStatement = function(e, t) {
                    return this.next(), this.parseVar(e, !1, t), this.semicolon(), this.finishNode(e, "VariableDeclaration")
                }, s.parseWhileStatement = function(e) {
                    return this.next(), e.test = this.parseParenExpression(), this.labels.push(a), e.body = this.parseStatement(!1), this.labels.pop(), this.finishNode(e, "WhileStatement")
                }, s.parseWithStatement = function(e) {
                    return this.strict && this.raise(this.start, "'with' in strict mode"), this.next(), e.object = this.parseParenExpression(), e.body = this.parseStatement(!1), this.finishNode(e, "WithStatement")
                }, s.parseEmptyStatement = function(e) {
                    return this.next(), this.finishNode(e, "EmptyStatement")
                }, s.parseLabeledStatement = function(e, t, o) {
                    for (var i = 0; i < this.labels.length; ++i) this.labels[i].name === t && this.raise(o.start, "Label '" + t + "' is already declared");
                    for (var r = this.type.isLoop ? "loop" : this.type === n.types._switch ? "switch" : null, i = this.labels.length - 1; i >= 0; i--) {
                        var s = this.labels[i];
                        if (s.statementStart != e.start) break;
                        s.statementStart = this.start, s.kind = r
                    }
                    return this.labels.push({
                        name: t,
                        kind: r,
                        statementStart: this.start
                    }), e.body = this.parseStatement(!0), this.labels.pop(), e.label = o, this.finishNode(e, "LabeledStatement")
                }, s.parseExpressionStatement = function(e, t) {
                    return e.expression = t, this.semicolon(), this.finishNode(e, "ExpressionStatement")
                }, s.parseBlock = function(e) {
                    var t = this.startNode(),
                        o = !0,
                        i = void 0;
                    for (t.body = [], this.expect(n.types.braceL); !this.eat(n.types.braceR);) {
                        var r = this.parseStatement(!0);
                        t.body.push(r), o && e && this.isUseStrict(r) && (i = this.strict, this.setStrict(this.strict = !0)), o = !1
                    }
                    return i === !1 && this.setStrict(!1), this.finishNode(t, "BlockStatement")
                }, s.parseFor = function(e, t) {
                    return e.init = t, this.expect(n.types.semi), e.test = this.type === n.types.semi ? null : this.parseExpression(), this.expect(n.types.semi), e.update = this.type === n.types.parenR ? null : this.parseExpression(), this.expect(n.types.parenR), e.body = this.parseStatement(!1), this.labels.pop(), this.finishNode(e, "ForStatement")
                }, s.parseForIn = function(e, t) {
                    var o = this.type === n.types._in ? "ForInStatement" : "ForOfStatement";
                    return this.next(), e.left = t, e.right = this.parseExpression(), this.expect(n.types.parenR), e.body = this.parseStatement(!1), this.labels.pop(), this.finishNode(e, o)
                }, s.parseVar = function(e, t, o) {
                    for (e.declarations = [], e.kind = o.keyword;;) {
                        var i = this.startNode();
                        if (this.parseVarId(i), this.eat(n.types.eq) ? i.init = this.parseMaybeAssign(t) : o !== n.types._const || this.type === n.types._in || this.options.ecmaVersion >= 6 && this.isContextual("of") ? "Identifier" == i.id.type || t && (this.type === n.types._in || this.isContextual("of")) ? i.init = null : this.raise(this.lastTokEnd, "Complex binding patterns require an initialization value") : this.unexpected(), e.declarations.push(this.finishNode(i, "VariableDeclarator")), !this.eat(n.types.comma)) break
                    }
                    return e
                }, s.parseVarId = function(e) {
                    e.id = this.parseBindingAtom(), this.checkLVal(e.id, !0)
                }, s.parseFunction = function(e, t, o) {
                    return this.initFunction(e), this.options.ecmaVersion >= 6 && (e.generator = this.eat(n.types.star)), (t || this.type === n.types.name) && (e.id = this.parseIdent()), this.parseFunctionParams(e), this.parseFunctionBody(e, o), this.finishNode(e, t ? "FunctionDeclaration" : "FunctionExpression")
                }, s.parseFunctionParams = function(e) {
                    this.expect(n.types.parenL), e.params = this.parseBindingList(n.types.parenR, !1, !1)
                }, s.parseClass = function(e, t) {
                    this.next(), this.parseClassId(e, t), this.parseClassSuper(e);
                    var o = this.startNode(),
                        i = !1;
                    for (o.body = [], this.expect(n.types.braceL); !this.eat(n.types.braceR);)
                        if (!this.eat(n.types.semi)) {
                            var r = this.startNode(),
                                s = this.eat(n.types.star),
                                a = this.type === n.types.name && "static" === this.value;
                            this.parsePropertyName(r), r["static"] = a && this.type !== n.types.parenL, r["static"] && (s && this.unexpected(), s = this.eat(n.types.star), this.parsePropertyName(r)), r.kind = "method";
                            var l = !1;
                            if (!r.computed) {
                                var c = r.key;
                                s || "Identifier" !== c.type || this.type === n.types.parenL || "get" !== c.name && "set" !== c.name || (l = !0, r.kind = c.name, c = this.parsePropertyName(r)), !r["static"] && ("Identifier" === c.type && "constructor" === c.name || "Literal" === c.type && "constructor" === c.value) && (i && this.raise(c.start, "Duplicate constructor in the same class"), l && this.raise(c.start, "Constructor can't have get/set modifier"), s && this.raise(c.start, "Constructor can't be a generator"), r.kind = "constructor", i = !0)
                            }
                            if (this.parseClassMethod(o, r, s), l) {
                                var u = "get" === r.kind ? 0 : 1;
                                if (r.value.params.length !== u) {
                                    var g = r.value.start;
                                    "get" === r.kind ? this.raise(g, "getter should have no params") : this.raise(g, "setter should have exactly one param")
                                }
                            }
                        }
                    return e.body = this.finishNode(o, "ClassBody"), this.finishNode(e, t ? "ClassDeclaration" : "ClassExpression")
                }, s.parseClassMethod = function(e, t, o) {
                    t.value = this.parseMethod(o), e.body.push(this.finishNode(t, "MethodDefinition"))
                }, s.parseClassId = function(e, t) {
                    e.id = this.type === n.types.name ? this.parseIdent() : t ? this.unexpected() : null
                }, s.parseClassSuper = function(e) {
                    e.superClass = this.eat(n.types._extends) ? this.parseExprSubscripts() : null
                }, s.parseExport = function(e) {
                    if (this.next(), this.eat(n.types.star)) return this.expectContextual("from"), e.source = this.type === n.types.string ? this.parseExprAtom() : this.unexpected(), this.semicolon(), this.finishNode(e, "ExportAllDeclaration");
                    if (this.eat(n.types._default)) {
                        var t = this.parseMaybeAssign(),
                            o = !0;
                        return "FunctionExpression" != t.type && "ClassExpression" != t.type || (o = !1, t.id && (t.type = "FunctionExpression" == t.type ? "FunctionDeclaration" : "ClassDeclaration")), e.declaration = t, o && this.semicolon(), this.finishNode(e, "ExportDefaultDeclaration")
                    }
                    return this.shouldParseExportStatement() ? (e.declaration = this.parseStatement(!0), e.specifiers = [], e.source = null) : (e.declaration = null, e.specifiers = this.parseExportSpecifiers(), this.eatContextual("from") ? e.source = this.type === n.types.string ? this.parseExprAtom() : this.unexpected() : e.source = null, this.semicolon()), this.finishNode(e, "ExportNamedDeclaration")
                }, s.shouldParseExportStatement = function() {
                    return this.type.keyword
                }, s.parseExportSpecifiers = function() {
                    var e = [],
                        t = !0;
                    for (this.expect(n.types.braceL); !this.eat(n.types.braceR);) {
                        if (t) t = !1;
                        else if (this.expect(n.types.comma), this.afterTrailingComma(n.types.braceR)) break;
                        var o = this.startNode();
                        o.local = this.parseIdent(this.type === n.types._default), o.exported = this.eatContextual("as") ? this.parseIdent(!0) : o.local, e.push(this.finishNode(o, "ExportSpecifier"))
                    }
                    return e
                }, s.parseImport = function(e) {
                    return this.next(), this.type === n.types.string ? (e.specifiers = c, e.source = this.parseExprAtom(), e.kind = "") : (e.specifiers = this.parseImportSpecifiers(), this.expectContextual("from"), e.source = this.type === n.types.string ? this.parseExprAtom() : this.unexpected()), this.semicolon(), this.finishNode(e, "ImportDeclaration")
                }, s.parseImportSpecifiers = function() {
                    var e = [],
                        t = !0;
                    if (this.type === n.types.name) {
                        var o = this.startNode();
                        if (o.local = this.parseIdent(), this.checkLVal(o.local, !0), e.push(this.finishNode(o, "ImportDefaultSpecifier")), !this.eat(n.types.comma)) return e
                    }
                    if (this.type === n.types.star) {
                        var o = this.startNode();
                        return this.next(), this.expectContextual("as"), o.local = this.parseIdent(), this.checkLVal(o.local, !0), e.push(this.finishNode(o, "ImportNamespaceSpecifier")), e
                    }
                    for (this.expect(n.types.braceL); !this.eat(n.types.braceR);) {
                        if (t) t = !1;
                        else if (this.expect(n.types.comma), this.afterTrailingComma(n.types.braceR)) break;
                        var o = this.startNode();
                        o.imported = this.parseIdent(!0), o.local = this.eatContextual("as") ? this.parseIdent() : o.imported, this.checkLVal(o.local, !0), e.push(this.finishNode(o, "ImportSpecifier"))
                    }
                    return e
                }
            }, {
                "./state": 10,
                "./tokentype": 14,
                "./whitespace": 16
            }],
            12: [function(e, t, o) {
                function n(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }
                o.__esModule = !0;
                var i = e("./state"),
                    r = e("./tokentype"),
                    s = e("./whitespace"),
                    a = function u(e, t, o, i) {
                        n(this, u), this.token = e, this.isExpr = !!t, this.preserveSpace = !!o, this.override = i
                    };
                o.TokContext = a;
                var l = {
                    b_stat: new a("{", !1),
                    b_expr: new a("{", !0),
                    b_tmpl: new a("${", !0),
                    p_stat: new a("(", !1),
                    p_expr: new a("(", !0),
                    q_tmpl: new a("`", !0, !0, function(e) {
                        return e.readTmplToken()
                    }),
                    f_expr: new a("function", !0)
                };
                o.types = l;
                var c = i.Parser.prototype;
                c.initialContext = function() {
                    return [l.b_stat]
                }, c.braceIsBlock = function(e) {
                    if (e === r.types.colon) {
                        var t = this.curContext();
                        if (t === l.b_stat || t === l.b_expr) return !t.isExpr
                    }
                    return e === r.types._return ? s.lineBreak.test(this.input.slice(this.lastTokEnd, this.start)) : e === r.types._else || e === r.types.semi || e === r.types.eof || e === r.types.parenR ? !0 : e == r.types.braceL ? this.curContext() === l.b_stat : !this.exprAllowed
                }, c.updateContext = function(e) {
                    var t = void 0,
                        o = this.type;
                    o.keyword && e == r.types.dot ? this.exprAllowed = !1 : (t = o.updateContext) ? t.call(this, e) : this.exprAllowed = o.beforeExpr
                }, r.types.parenR.updateContext = r.types.braceR.updateContext = function() {
                    if (1 == this.context.length) return void(this.exprAllowed = !0);
                    var e = this.context.pop();
                    e === l.b_stat && this.curContext() === l.f_expr ? (this.context.pop(), this.exprAllowed = !1) : e === l.b_tmpl ? this.exprAllowed = !0 : this.exprAllowed = !e.isExpr
                }, r.types.braceL.updateContext = function(e) {
                    this.context.push(this.braceIsBlock(e) ? l.b_stat : l.b_expr), this.exprAllowed = !0
                }, r.types.dollarBraceL.updateContext = function() {
                    this.context.push(l.b_tmpl), this.exprAllowed = !0
                }, r.types.parenL.updateContext = function(e) {
                    var t = e === r.types._if || e === r.types._for || e === r.types._with || e === r.types._while;
                    this.context.push(t ? l.p_stat : l.p_expr), this.exprAllowed = !0
                }, r.types.incDec.updateContext = function() {}, r.types._function.updateContext = function() {
                    this.curContext() !== l.b_stat && this.context.push(l.f_expr), this.exprAllowed = !1
                }, r.types.backQuote.updateContext = function() {
                    this.curContext() === l.q_tmpl ? this.context.pop() : this.context.push(l.q_tmpl), this.exprAllowed = !1
                }
            }, {
                "./state": 10,
                "./tokentype": 14,
                "./whitespace": 16
            }],
            13: [function(e, t, o) {
                function n(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }

                function i(e, t, o) {
                    try {
                        return new RegExp(e, t)
                    } catch (n) {
                        void 0 !== o && (n instanceof SyntaxError && this.raise(o, "Error parsing regular expression: " + n.message), this.raise(n))
                    }
                }

                function r(e) {
                    return 65535 >= e ? String.fromCharCode(e) : (e -= 65536, String.fromCharCode((e >> 10) + 55296, (1023 & e) + 56320))
                }
                o.__esModule = !0;
                var s = e("./identifier"),
                    a = e("./tokentype"),
                    l = e("./state"),
                    c = e("./locutil"),
                    u = e("./whitespace"),
                    g = function m(e) {
                        n(this, m), this.type = e.type, this.value = e.value, this.start = e.start, this.end = e.end, e.options.locations && (this.loc = new c.SourceLocation(e, e.startLoc, e.endLoc)), e.options.ranges && (this.range = [e.start, e.end])
                    };
                o.Token = g;
                var p = l.Parser.prototype,
                    h = "object" == typeof Packages && "[object JavaPackage]" == Object.prototype.toString.call(Packages);
                p.next = function() {
                    this.options.onToken && this.options.onToken(new g(this)), this.lastTokEnd = this.end, this.lastTokStart = this.start, this.lastTokEndLoc = this.endLoc, this.lastTokStartLoc = this.startLoc, this.nextToken()
                }, p.getToken = function() {
                    return this.next(), new g(this)
                }, "undefined" != typeof Symbol && (p[Symbol.iterator] = function() {
                    var e = this;
                    return {
                        next: function() {
                            var t = e.getToken();
                            return {
                                done: t.type === a.types.eof,
                                value: t
                            }
                        }
                    }
                }), p.setStrict = function(e) {
                    if (this.strict = e, this.type === a.types.num || this.type === a.types.string) {
                        if (this.pos = this.start, this.options.locations)
                            for (; this.pos < this.lineStart;) this.lineStart = this.input.lastIndexOf("\n", this.lineStart - 2) + 1, --this.curLine;
                        this.nextToken()
                    }
                }, p.curContext = function() {
                    return this.context[this.context.length - 1]
                }, p.nextToken = function() {
                    var e = this.curContext();
                    return e && e.preserveSpace || this.skipSpace(), this.start = this.pos, this.options.locations && (this.startLoc = this.curPosition()), this.pos >= this.input.length ? this.finishToken(a.types.eof) : e.override ? e.override(this) : void this.readToken(this.fullCharCodeAtPos())
                }, p.readToken = function(e) {
                    return s.isIdentifierStart(e, this.options.ecmaVersion >= 6) || 92 === e ? this.readWord() : this.getTokenFromCode(e)
                }, p.fullCharCodeAtPos = function() {
                    var e = this.input.charCodeAt(this.pos);
                    if (55295 >= e || e >= 57344) return e;
                    var t = this.input.charCodeAt(this.pos + 1);
                    return (e << 10) + t - 56613888
                }, p.skipBlockComment = function() {
                    var e = this.options.onComment && this.curPosition(),
                        t = this.pos,
                        o = this.input.indexOf("*/", this.pos += 2);
                    if (-1 === o && this.raise(this.pos - 2, "Unterminated comment"), this.pos = o + 2, this.options.locations) {
                        u.lineBreakG.lastIndex = t;
                        for (var n = void 0;
                            (n = u.lineBreakG.exec(this.input)) && n.index < this.pos;) ++this.curLine, this.lineStart = n.index + n[0].length
                    }
                    this.options.onComment && this.options.onComment(!0, this.input.slice(t + 2, o), t, this.pos, e, this.curPosition())
                }, p.skipLineComment = function(e) {
                    for (var t = this.pos, o = this.options.onComment && this.curPosition(), n = this.input.charCodeAt(this.pos += e); this.pos < this.input.length && 10 !== n && 13 !== n && 8232 !== n && 8233 !== n;) ++this.pos, n = this.input.charCodeAt(this.pos);
                    this.options.onComment && this.options.onComment(!1, this.input.slice(t + e, this.pos), t, this.pos, o, this.curPosition())
                }, p.skipSpace = function() {
                    e: for (; this.pos < this.input.length;) {
                        var e = this.input.charCodeAt(this.pos);
                        switch (e) {
                            case 32:
                            case 160:
                                ++this.pos;
                                break;
                            case 13:
                                10 === this.input.charCodeAt(this.pos + 1) && ++this.pos;
                            case 10:
                            case 8232:
                            case 8233:
                                ++this.pos, this.options.locations && (++this.curLine, this.lineStart = this.pos);
                                break;
                            case 47:
                                switch (this.input.charCodeAt(this.pos + 1)) {
                                    case 42:
                                        this.skipBlockComment();
                                        break;
                                    case 47:
                                        this.skipLineComment(2);
                                        break;
                                    default:
                                        break e
                                }
                                break;
                            default:
                                if (!(e > 8 && 14 > e || e >= 5760 && u.nonASCIIwhitespace.test(String.fromCharCode(e)))) break e;
                                ++this.pos
                        }
                    }
                }, p.finishToken = function(e, t) {
                    this.end = this.pos, this.options.locations && (this.endLoc = this.curPosition());
                    var o = this.type;
                    this.type = e, this.value = t, this.updateContext(o)
                }, p.readToken_dot = function() {
                    var e = this.input.charCodeAt(this.pos + 1);
                    if (e >= 48 && 57 >= e) return this.readNumber(!0);
                    var t = this.input.charCodeAt(this.pos + 2);
                    return this.options.ecmaVersion >= 6 && 46 === e && 46 === t ? (this.pos += 3, this.finishToken(a.types.ellipsis)) : (++this.pos, this.finishToken(a.types.dot))
                }, p.readToken_slash = function() {
                    var e = this.input.charCodeAt(this.pos + 1);
                    return this.exprAllowed ? (++this.pos, this.readRegexp()) : 61 === e ? this.finishOp(a.types.assign, 2) : this.finishOp(a.types.slash, 1)
                }, p.readToken_mult_modulo = function(e) {
                    var t = this.input.charCodeAt(this.pos + 1);
                    return 61 === t ? this.finishOp(a.types.assign, 2) : this.finishOp(42 === e ? a.types.star : a.types.modulo, 1)
                }, p.readToken_pipe_amp = function(e) {
                    var t = this.input.charCodeAt(this.pos + 1);
                    return t === e ? this.finishOp(124 === e ? a.types.logicalOR : a.types.logicalAND, 2) : 61 === t ? this.finishOp(a.types.assign, 2) : this.finishOp(124 === e ? a.types.bitwiseOR : a.types.bitwiseAND, 1)
                }, p.readToken_caret = function() {
                    var e = this.input.charCodeAt(this.pos + 1);
                    return 61 === e ? this.finishOp(a.types.assign, 2) : this.finishOp(a.types.bitwiseXOR, 1)
                }, p.readToken_plus_min = function(e) {
                    var t = this.input.charCodeAt(this.pos + 1);
                    return t === e ? 45 == t && 62 == this.input.charCodeAt(this.pos + 2) && u.lineBreak.test(this.input.slice(this.lastTokEnd, this.pos)) ? (this.skipLineComment(3), this.skipSpace(), this.nextToken()) : this.finishOp(a.types.incDec, 2) : 61 === t ? this.finishOp(a.types.assign, 2) : this.finishOp(a.types.plusMin, 1)
                }, p.readToken_lt_gt = function(e) {
                    var t = this.input.charCodeAt(this.pos + 1),
                        o = 1;
                    return t === e ? (o = 62 === e && 62 === this.input.charCodeAt(this.pos + 2) ? 3 : 2, 61 === this.input.charCodeAt(this.pos + o) ? this.finishOp(a.types.assign, o + 1) : this.finishOp(a.types.bitShift, o)) : 33 == t && 60 == e && 45 == this.input.charCodeAt(this.pos + 2) && 45 == this.input.charCodeAt(this.pos + 3) ? (this.inModule && this.unexpected(), this.skipLineComment(4), this.skipSpace(), this.nextToken()) : (61 === t && (o = 61 === this.input.charCodeAt(this.pos + 2) ? 3 : 2), this.finishOp(a.types.relational, o))
                }, p.readToken_eq_excl = function(e) {
                    var t = this.input.charCodeAt(this.pos + 1);
                    return 61 === t ? this.finishOp(a.types.equality, 61 === this.input.charCodeAt(this.pos + 2) ? 3 : 2) : 61 === e && 62 === t && this.options.ecmaVersion >= 6 ? (this.pos += 2, this.finishToken(a.types.arrow)) : this.finishOp(61 === e ? a.types.eq : a.types.prefix, 1)
                }, p.getTokenFromCode = function(e) {
                    switch (e) {
                        case 46:
                            return this.readToken_dot();
                        case 40:
                            return ++this.pos, this.finishToken(a.types.parenL);
                        case 41:
                            return ++this.pos, this.finishToken(a.types.parenR);
                        case 59:
                            return ++this.pos, this.finishToken(a.types.semi);
                        case 44:
                            return ++this.pos, this.finishToken(a.types.comma);
                        case 91:
                            return ++this.pos, this.finishToken(a.types.bracketL);
                        case 93:
                            return ++this.pos, this.finishToken(a.types.bracketR);
                        case 123:
                            return ++this.pos, this.finishToken(a.types.braceL);
                        case 125:
                            return ++this.pos, this.finishToken(a.types.braceR);
                        case 58:
                            return ++this.pos, this.finishToken(a.types.colon);
                        case 63:
                            return ++this.pos, this.finishToken(a.types.question);
                        case 96:
                            if (this.options.ecmaVersion < 6) break;
                            return ++this.pos, this.finishToken(a.types.backQuote);
                        case 48:
                            var t = this.input.charCodeAt(this.pos + 1);
                            if (120 === t || 88 === t) return this.readRadixNumber(16);
                            if (this.options.ecmaVersion >= 6) {
                                if (111 === t || 79 === t) return this.readRadixNumber(8);
                                if (98 === t || 66 === t) return this.readRadixNumber(2)
                            }
                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:
                        case 57:
                            return this.readNumber(!1);
                        case 34:
                        case 39:
                            return this.readString(e);
                        case 47:
                            return this.readToken_slash();
                        case 37:
                        case 42:
                            return this.readToken_mult_modulo(e);
                        case 124:
                        case 38:
                            return this.readToken_pipe_amp(e);
                        case 94:
                            return this.readToken_caret();
                        case 43:
                        case 45:
                            return this.readToken_plus_min(e);
                        case 60:
                        case 62:
                            return this.readToken_lt_gt(e);
                        case 61:
                        case 33:
                            return this.readToken_eq_excl(e);
                        case 126:
                            return this.finishOp(a.types.prefix, 1)
                    }
                    this.raise(this.pos, "Unexpected character '" + r(e) + "'")
                }, p.finishOp = function(e, t) {
                    var o = this.input.slice(this.pos, this.pos + t);
                    return this.pos += t, this.finishToken(e, o)
                };
                var d = !!i("\uffff", "u");
                p.readRegexp = function() {
                    for (var e = this, t = void 0, o = void 0, n = this.pos;;) {
                        this.pos >= this.input.length && this.raise(n, "Unterminated regular expression");
                        var r = this.input.charAt(this.pos);
                        if (u.lineBreak.test(r) && this.raise(n, "Unterminated regular expression"), t) t = !1;
                        else {
                            if ("[" === r) o = !0;
                            else if ("]" === r && o) o = !1;
                            else if ("/" === r && !o) break;
                            t = "\\" === r
                        }++this.pos
                    }
                    var s = this.input.slice(n, this.pos);
                    ++this.pos;
                    var l = this.readWord1(),
                        c = s;
                    if (l) {
                        var g = /^[gmsiy]*$/;
                        this.options.ecmaVersion >= 6 && (g = /^[gmsiyu]*$/), g.test(l) || this.raise(n, "Invalid regular expression flag"), l.indexOf("u") >= 0 && !d && (c = c.replace(/\\u\{([0-9a-fA-F]+)\}/g, function(t, o, i) {
                            return o = Number("0x" + o), o > 1114111 && e.raise(n + i + 3, "Code point out of bounds"), "x"
                        }), c = c.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g, "x"))
                    }
                    var p = null;
                    return h || (i(c, void 0, n), p = i(s, l)), this.finishToken(a.types.regexp, {
                        pattern: s,
                        flags: l,
                        value: p
                    })
                }, p.readInt = function(e, t) {
                    for (var o = this.pos, n = 0, i = 0, r = null == t ? 1 / 0 : t; r > i; ++i) {
                        var s = this.input.charCodeAt(this.pos),
                            a = void 0;
                        if (a = s >= 97 ? s - 97 + 10 : s >= 65 ? s - 65 + 10 : s >= 48 && 57 >= s ? s - 48 : 1 / 0, a >= e) break;
                        ++this.pos, n = n * e + a
                    }
                    return this.pos === o || null != t && this.pos - o !== t ? null : n
                }, p.readRadixNumber = function(e) {
                    this.pos += 2;
                    var t = this.readInt(e);
                    return null == t && this.raise(this.start + 2, "Expected number in radix " + e), s.isIdentifierStart(this.fullCharCodeAtPos()) && this.raise(this.pos, "Identifier directly after number"), this.finishToken(a.types.num, t)
                }, p.readNumber = function(e) {
                    var t = this.pos,
                        o = !1,
                        n = 48 === this.input.charCodeAt(this.pos);
                    e || null !== this.readInt(10) || this.raise(t, "Invalid number");
                    var i = this.input.charCodeAt(this.pos);
                    46 === i && (++this.pos, this.readInt(10), o = !0, i = this.input.charCodeAt(this.pos)), 69 !== i && 101 !== i || (i = this.input.charCodeAt(++this.pos), 43 !== i && 45 !== i || ++this.pos, null === this.readInt(10) && this.raise(t, "Invalid number"), o = !0), s.isIdentifierStart(this.fullCharCodeAtPos()) && this.raise(this.pos, "Identifier directly after number");
                    var r = this.input.slice(t, this.pos),
                        l = void 0;
                    return o ? l = parseFloat(r) : n && 1 !== r.length ? /[89]/.test(r) || this.strict ? this.raise(t, "Invalid number") : l = parseInt(r, 8) : l = parseInt(r, 10), this.finishToken(a.types.num, l);
                }, p.readCodePoint = function() {
                    var e = this.input.charCodeAt(this.pos),
                        t = void 0;
                    if (123 === e) {
                        this.options.ecmaVersion < 6 && this.unexpected();
                        var o = ++this.pos;
                        t = this.readHexChar(this.input.indexOf("}", this.pos) - this.pos), ++this.pos, t > 1114111 && this.raise(o, "Code point out of bounds")
                    } else t = this.readHexChar(4);
                    return t
                }, p.readString = function(e) {
                    for (var t = "", o = ++this.pos;;) {
                        this.pos >= this.input.length && this.raise(this.start, "Unterminated string constant");
                        var n = this.input.charCodeAt(this.pos);
                        if (n === e) break;
                        92 === n ? (t += this.input.slice(o, this.pos), t += this.readEscapedChar(!1), o = this.pos) : (u.isNewLine(n) && this.raise(this.start, "Unterminated string constant"), ++this.pos)
                    }
                    return t += this.input.slice(o, this.pos++), this.finishToken(a.types.string, t)
                }, p.readTmplToken = function() {
                    for (var e = "", t = this.pos;;) {
                        this.pos >= this.input.length && this.raise(this.start, "Unterminated template");
                        var o = this.input.charCodeAt(this.pos);
                        if (96 === o || 36 === o && 123 === this.input.charCodeAt(this.pos + 1)) return this.pos === this.start && this.type === a.types.template ? 36 === o ? (this.pos += 2, this.finishToken(a.types.dollarBraceL)) : (++this.pos, this.finishToken(a.types.backQuote)) : (e += this.input.slice(t, this.pos), this.finishToken(a.types.template, e));
                        if (92 === o) e += this.input.slice(t, this.pos), e += this.readEscapedChar(!0), t = this.pos;
                        else if (u.isNewLine(o)) {
                            switch (e += this.input.slice(t, this.pos), ++this.pos, o) {
                                case 13:
                                    10 === this.input.charCodeAt(this.pos) && ++this.pos;
                                case 10:
                                    e += "\n";
                                    break;
                                default:
                                    e += String.fromCharCode(o)
                            }
                            this.options.locations && (++this.curLine, this.lineStart = this.pos), t = this.pos
                        } else ++this.pos
                    }
                }, p.readEscapedChar = function(e) {
                    var t = this.input.charCodeAt(++this.pos);
                    switch (++this.pos, t) {
                        case 110:
                            return "\n";
                        case 114:
                            return "\r";
                        case 120:
                            return String.fromCharCode(this.readHexChar(2));
                        case 117:
                            return r(this.readCodePoint());
                        case 116:
                            return "	";
                        case 98:
                            return "\b";
                        case 118:
                            return "\x0B";
                        case 102:
                            return "\f";
                        case 13:
                            10 === this.input.charCodeAt(this.pos) && ++this.pos;
                        case 10:
                            return this.options.locations && (this.lineStart = this.pos, ++this.curLine), "";
                        default:
                            if (t >= 48 && 55 >= t) {
                                var o = this.input.substr(this.pos - 1, 3).match(/^[0-7]+/)[0],
                                    n = parseInt(o, 8);
                                return n > 255 && (o = o.slice(0, -1), n = parseInt(o, 8)), n > 0 && (this.strict || e) && this.raise(this.pos - 2, "Octal literal in strict mode"), this.pos += o.length - 1, String.fromCharCode(n)
                            }
                            return String.fromCharCode(t)
                    }
                }, p.readHexChar = function(e) {
                    var t = this.pos,
                        o = this.readInt(16, e);
                    return null === o && this.raise(t, "Bad character escape sequence"), o
                };
                var f;
                p.readWord1 = function() {
                    f = !1;
                    for (var e = "", t = !0, o = this.pos, n = this.options.ecmaVersion >= 6; this.pos < this.input.length;) {
                        var i = this.fullCharCodeAtPos();
                        if (s.isIdentifierChar(i, n)) this.pos += 65535 >= i ? 1 : 2;
                        else {
                            if (92 !== i) break;
                            f = !0, e += this.input.slice(o, this.pos);
                            var a = this.pos;
                            117 != this.input.charCodeAt(++this.pos) && this.raise(this.pos, "Expecting Unicode escape sequence \\uXXXX"), ++this.pos;
                            var l = this.readCodePoint();
                            (t ? s.isIdentifierStart : s.isIdentifierChar)(l, n) || this.raise(a, "Invalid Unicode escape"), e += r(l), o = this.pos
                        }
                        t = !1
                    }
                    return e + this.input.slice(o, this.pos)
                }, p.readWord = function() {
                    var e = this.readWord1(),
                        t = a.types.name;
                    return (this.options.ecmaVersion >= 6 || !f) && this.isKeyword(e) && (t = a.keywords[e]), this.finishToken(t, e)
                }
            }, {
                "./identifier": 2,
                "./locutil": 5,
                "./state": 10,
                "./tokentype": 14,
                "./whitespace": 16
            }],
            14: [function(e, t, o) {
                function n(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }

                function i(e, t) {
                    return new s(e, {
                        beforeExpr: !0,
                        binop: t
                    })
                }

                function r(e) {
                    var t = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1];
                    t.keyword = e, u[e] = c["_" + e] = new s(e, t)
                }
                o.__esModule = !0;
                var s = function g(e) {
                    var t = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1];
                    n(this, g), this.label = e, this.keyword = t.keyword, this.beforeExpr = !!t.beforeExpr, this.startsExpr = !!t.startsExpr, this.isLoop = !!t.isLoop, this.isAssign = !!t.isAssign, this.prefix = !!t.prefix, this.postfix = !!t.postfix, this.binop = t.binop || null, this.updateContext = null
                };
                o.TokenType = s;
                var a = {
                        beforeExpr: !0
                    },
                    l = {
                        startsExpr: !0
                    },
                    c = {
                        num: new s("num", l),
                        regexp: new s("regexp", l),
                        string: new s("string", l),
                        name: new s("name", l),
                        eof: new s("eof"),
                        bracketL: new s("[", {
                            beforeExpr: !0,
                            startsExpr: !0
                        }),
                        bracketR: new s("]"),
                        braceL: new s("{", {
                            beforeExpr: !0,
                            startsExpr: !0
                        }),
                        braceR: new s("}"),
                        parenL: new s("(", {
                            beforeExpr: !0,
                            startsExpr: !0
                        }),
                        parenR: new s(")"),
                        comma: new s(",", a),
                        semi: new s(";", a),
                        colon: new s(":", a),
                        dot: new s("."),
                        question: new s("?", a),
                        arrow: new s("=>", a),
                        template: new s("template"),
                        ellipsis: new s("...", a),
                        backQuote: new s("`", l),
                        dollarBraceL: new s("${", {
                            beforeExpr: !0,
                            startsExpr: !0
                        }),
                        eq: new s("=", {
                            beforeExpr: !0,
                            isAssign: !0
                        }),
                        assign: new s("_=", {
                            beforeExpr: !0,
                            isAssign: !0
                        }),
                        incDec: new s("++/--", {
                            prefix: !0,
                            postfix: !0,
                            startsExpr: !0
                        }),
                        prefix: new s("prefix", {
                            beforeExpr: !0,
                            prefix: !0,
                            startsExpr: !0
                        }),
                        logicalOR: i("||", 1),
                        logicalAND: i("&&", 2),
                        bitwiseOR: i("|", 3),
                        bitwiseXOR: i("^", 4),
                        bitwiseAND: i("&", 5),
                        equality: i("==/!=", 6),
                        relational: i("</>", 7),
                        bitShift: i("<</>>", 8),
                        plusMin: new s("+/-", {
                            beforeExpr: !0,
                            binop: 9,
                            prefix: !0,
                            startsExpr: !0
                        }),
                        modulo: i("%", 10),
                        star: i("*", 10),
                        slash: i("/", 10)
                    };
                o.types = c;
                var u = {};
                o.keywords = u, r("break"), r("case", a), r("catch"), r("continue"), r("debugger"), r("default", a), r("do", {
                    isLoop: !0
                }), r("else", a), r("finally"), r("for", {
                    isLoop: !0
                }), r("function", l), r("if"), r("return", a), r("switch"), r("throw", a), r("try"), r("var"), r("let"), r("const"), r("while", {
                    isLoop: !0
                }), r("with"), r("new", {
                    beforeExpr: !0,
                    startsExpr: !0
                }), r("this", l), r("super", l), r("class"), r("extends", a), r("export"), r("import"), r("yield", {
                    beforeExpr: !0,
                    startsExpr: !0
                }), r("null", l), r("true", l), r("false", l), r("in", {
                    beforeExpr: !0,
                    binop: 7
                }), r("instanceof", {
                    beforeExpr: !0,
                    binop: 7
                }), r("typeof", {
                    beforeExpr: !0,
                    prefix: !0,
                    startsExpr: !0
                }), r("void", {
                    beforeExpr: !0,
                    prefix: !0,
                    startsExpr: !0
                }), r("delete", {
                    beforeExpr: !0,
                    prefix: !0,
                    startsExpr: !0
                })
            }, {}],
            15: [function(e, t, o) {
                function n(e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                }

                function i(e, t) {
                    return Object.prototype.hasOwnProperty.call(e, t)
                }
                o.__esModule = !0, o.isArray = n, o.has = i
            }, {}],
            16: [function(e, t, o) {
                function n(e) {
                    return 10 === e || 13 === e || 8232 === e || 8233 == e
                }
                o.__esModule = !0, o.isNewLine = n;
                var i = /\r\n?|\n|\u2028|\u2029/;
                o.lineBreak = i;
                var r = new RegExp(i.source, "g");
                o.lineBreakG = r;
                var s = /[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/;
                o.nonASCIIwhitespace = s
            }, {}]
        }, {}, [3])(3)
    }), define("simulation/api-events", ["signals"], function(e) {
        return {
            waitStart: new e,
            waitEnd: new e,
            requestReset: new e
        }
    }), define("simulation/synth", ["../events"], function(e) {
        function t() {
            window.clearTimeout(s)
        }
        var o;
        try {
            o = new AudioContext
        } catch (n) {
            console.warn("Web Audio API is not supported in this browser")
        }
        var i, r, s, a = 1;
        e.volumeSet.add(function(e) {
            a = e
        });
        var l = {};
        return l.start = function() {
            o && !i && (r = o.createGain(), r.connect(o.destination), r.gain.value = 0, i = o.createOscillator(), i.connect(r), i.start())
        }, l.stop = function() {
            i && (i.stop(), i.disconnect(), r.disconnect(), i = null, r = null, t())
        }, l.playNote = function(e, o, n) {
            i && (e > 127 && (e -= 128), i.frequency.value = 1 / (88e-6 * (128 - e)), r.gain.value = a), t(), s = window.setTimeout(function() {
                r && (r.gain.value = 0), n && n()
            }, o)
        }, l
    });
var Interpreter = function(e, t) {
    this.initFunc_ = t, this.UNDEFINED = this.createPrimitive(void 0), this.ast = acorn.parse(e);
    var o = this.createScope(this.ast, null);
    this.stateStack = [{
        node: this.ast,
        scope: o,
        thisExpression: o
    }]
};
Interpreter.prototype.step = function() {
    if (0 == this.stateStack.length) return !1;
    var e = this.stateStack[0];
    return this["step" + e.node.type](), !0
}, Interpreter.prototype.run = function() {
    for (; this.step(););
}, Interpreter.prototype.initGlobalScope = function(e) {
    this.setProperty(e, "Infinity", this.createPrimitive(1 / 0), !0), this.setProperty(e, "NaN", this.createPrimitive(NaN), !0), this.setProperty(e, "undefined", this.UNDEFINED, !0), this.setProperty(e, "window", e, !0), this.setProperty(e, "self", e, !1), this.initFunction(e), this.initObject(e), e.parent = this.OBJECT, this.initArray(e), this.initNumber(e), this.initString(e), this.initBoolean(e), this.initDate(e), this.initMath(e), this.initRegExp(e), this.initJSON(e);
    var t, o = this;
    t = function(e) {
        return e = e || o.UNDEFINED, o.createPrimitive(isNaN(e.toNumber()))
    }, this.setProperty(e, "isNaN", this.createNativeFunction(t)), t = function(e) {
        return e = e || o.UNDEFINED, o.createPrimitive(isFinite(e.toNumber()))
    }, this.setProperty(e, "isFinite", this.createNativeFunction(t)), t = function(e) {
        return e = e || o.UNDEFINED, o.createPrimitive(parseFloat(e.toNumber()))
    }, this.setProperty(e, "parseFloat", this.createNativeFunction(t)), t = function(e, t) {
        return e = e || o.UNDEFINED, t = t || o.UNDEFINED, o.createPrimitive(parseInt(e.toString(), t.toNumber()))
    }, this.setProperty(e, "parseInt", this.createNativeFunction(t));
    var n = this.createObject(this.FUNCTION);
    n.eval = !0, this.setProperty(n, "length", this.createPrimitive(1), !0), this.setProperty(e, "eval", n);
    for (var i = ["escape", "unescape", "decodeURI", "decodeURIComponent", "encodeURI", "encodeURIComponent"], r = 0; r < i.length; r++) t = function(e) {
        return function(t) {
            return t = t || o.UNDEFINED, o.createPrimitive(e(t.toString()))
        }
    }(window[i[r]]), this.setProperty(e, i[r], this.createNativeFunction(t));
    this.initFunc_ && this.initFunc_(this, e)
}, Interpreter.prototype.initFunction = function(e) {
    var t, o = this;
    t = function(e) {
        if (this.parent == o.FUNCTION) var t = this;
        else var t = o.createObject(o.FUNCTION);
        if (arguments.length) var n = arguments[arguments.length - 1].toString();
        else var n = "";
        for (var i = [], r = 0; r < arguments.length - 1; r++) i.push(arguments[r].toString());
        if (i = i.join(", "), -1 != i.indexOf(")")) throw new SyntaxError("Function arg string contains parenthesis");
        t.parentScope = o.stateStack[o.stateStack.length - 1].scope;
        var s = acorn.parse("$ = function(" + i + ") {" + n + "};");
        return t.node = s.body[0].expression.right, o.setProperty(t, "length", o.createPrimitive(t.node.length), !0), t
    }, this.FUNCTION = this.createObject(null), this.setProperty(e, "Function", this.FUNCTION), this.FUNCTION.type = "function", this.setProperty(this.FUNCTION, "prototype", this.createObject(null)), this.FUNCTION.nativeFunc = t;
    var n = {
        type: "FunctionApply_",
        params: [],
        id: null,
        body: null,
        start: 0,
        end: 0
    };
    this.setProperty(this.FUNCTION.properties.prototype, "apply", this.createFunction(n, {}), !1, !0);
    var n = {
        type: "FunctionCall_",
        params: [],
        id: null,
        body: null,
        start: 0,
        end: 0
    };
    this.setProperty(this.FUNCTION.properties.prototype, "call", this.createFunction(n, {}), !1, !0), t = function() {
        return o.createPrimitive(this.toString())
    }, this.setProperty(this.FUNCTION.properties.prototype, "toString", this.createNativeFunction(t), !1, !0), this.setProperty(this.FUNCTION, "toString", this.createNativeFunction(t), !1, !0), t = function() {
        return o.createPrimitive(this.valueOf())
    }, this.setProperty(this.FUNCTION.properties.prototype, "valueOf", this.createNativeFunction(t), !1, !0), this.setProperty(this.FUNCTION, "valueOf", this.createNativeFunction(t), !1, !0)
}, Interpreter.prototype.initObject = function(e) {
    var t, o = this;
    t = function(e) {
        if (this.parent == o.OBJECT) var t = this;
        else var t = o.createObject(o.OBJECT);
        return t
    }, this.OBJECT = this.createNativeFunction(t), this.setProperty(e, "Object", this.OBJECT), t = function() {
        return o.createPrimitive(this.toString())
    }, this.setProperty(this.OBJECT.properties.prototype, "toString", this.createNativeFunction(t), !1, !0), t = function() {
        return o.createPrimitive(this.valueOf())
    }, this.setProperty(this.OBJECT.properties.prototype, "valueOf", this.createNativeFunction(t), !1, !0)
}, Interpreter.prototype.initArray = function(e) {
    var t, o = this,
        n = function(e, t) {
            var o = e ? Math.floor(e.toNumber()) : t;
            return isNaN(o) && (o = t), o
        };
    t = function(e) {
        if (this.parent == o.ARRAY) var t = this;
        else var t = o.createObject(o.ARRAY);
        var n = arguments[0];
        if (n && "number" == n.type) {
            if (isNaN(o.arrayIndex(n))) throw new RangeError("Invalid array length");
            t.length = n.data
        } else {
            for (var i = 0; i < arguments.length; i++) t.properties[i] = arguments[i];
            t.length = i
        }
        return t
    }, this.ARRAY = this.createNativeFunction(t), this.setProperty(e, "Array", this.ARRAY), t = function() {
        if (this.length) {
            var e = this.properties[this.length - 1];
            delete this.properties[this.length - 1], this.length--
        } else var e = o.UNDEFINED;
        return e
    }, this.setProperty(this.ARRAY.properties.prototype, "pop", this.createNativeFunction(t), !1, !0), t = function(e) {
        for (var t = 0; t < arguments.length; t++) this.properties[this.length] = arguments[t], this.length++;
        return o.createPrimitive(this.length)
    }, this.setProperty(this.ARRAY.properties.prototype, "push", this.createNativeFunction(t), !1, !0), t = function() {
        if (this.length) {
            for (var e = this.properties[0], t = 1; t < this.length; t++) this.properties[t - 1] = this.properties[t];
            this.length--, delete this.properties[this.length]
        } else var e = o.UNDEFINED;
        return e
    }, this.setProperty(this.ARRAY.properties.prototype, "shift", this.createNativeFunction(t), !1, !0), t = function(e) {
        for (var t = this.length - 1; t >= 0; t--) this.properties[t + arguments.length] = this.properties[t];
        this.length += arguments.length;
        for (var t = 0; t < arguments.length; t++) this.properties[t] = arguments[t];
        return o.createPrimitive(this.length)
    }, this.setProperty(this.ARRAY.properties.prototype, "unshift", this.createNativeFunction(t), !1, !0), t = function() {
        for (var e = 0; e < this.length / 2; e++) {
            var t = this.properties[this.length - e - 1];
            this.properties[this.length - e - 1] = this.properties[e], this.properties[e] = t
        }
        return o.UNDEFINED
    }, this.setProperty(this.ARRAY.properties.prototype, "reverse", this.createNativeFunction(t), !1, !0), t = function(e, t, i) {
        e = n(e, 0), e = 0 > e ? Math.max(this.length + e, 0) : Math.min(e, this.length), t = n(t, 1 / 0), t = Math.min(t, this.length - e);
        for (var r = o.createObject(o.ARRAY), s = e; e + t > s; s++) r.properties[r.length++] = this.properties[s], this.properties[s] = this.properties[s + t];
        for (var s = e + t; s < this.length; s++) delete this.properties[s];
        this.length -= t;
        for (var s = this.length - 1; s >= e; s--) this.properties[s + arguments.length - 2] = this.properties[s];
        this.length += arguments.length - 2;
        for (var s = 2; s < arguments.length; s++) this.properties[e + s - 2] = arguments[s];
        return r
    }, this.setProperty(this.ARRAY.properties.prototype, "splice", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        var i = o.createObject(o.ARRAY),
            r = n(e, 0);
        0 > r && (r = this.length + r), r = Math.max(0, Math.min(r, this.length));
        var s = n(t, this.length);
        0 > s && (s = this.length + s), s = Math.max(0, Math.min(s, this.length));
        for (var a = 0, l = r; s > l; l++) {
            var c = o.getProperty(this, l);
            o.setProperty(i, a++, c)
        }
        return i
    }, this.setProperty(this.ARRAY.properties.prototype, "slice", this.createNativeFunction(t), !1, !0), t = function(e) {
        if (e && void 0 !== e.data) var t = e.toString();
        else var t = void 0;
        for (var n = [], i = 0; i < this.length; i++) n[i] = this.properties[i];
        return o.createPrimitive(n.join(t))
    }, this.setProperty(this.ARRAY.properties.prototype, "join", this.createNativeFunction(t), !1, !0), t = function(e) {
        for (var t = o.createObject(o.ARRAY), n = 0, i = 0; i < this.length; i++) {
            var r = o.getProperty(this, i);
            o.setProperty(t, n++, r)
        }
        for (var i = 0; i < arguments.length; i++) {
            var s = arguments[i];
            if (o.isa(s, o.ARRAY))
                for (var a = 0; a < s.length; a++) {
                    var r = o.getProperty(s, a);
                    o.setProperty(t, n++, r)
                } else o.setProperty(t, n++, s)
        }
        return t
    }, this.setProperty(this.ARRAY.properties.prototype, "concat", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        e = e || o.UNDEFINED;
        var i = n(t, 0);
        0 > i && (i = this.length + i), i = Math.max(0, Math.min(i, this.length));
        for (var r = i; r < this.length; r++) {
            var s = o.getProperty(this, r);
            if (0 == o.comp(s, e)) return o.createPrimitive(r)
        }
        return o.createPrimitive(-1)
    }, this.setProperty(this.ARRAY.properties.prototype, "indexOf", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        e = e || o.UNDEFINED;
        var i = n(t, this.length);
        0 > i && (i = this.length + i), i = Math.max(0, Math.min(i, this.length));
        for (var r = i; r >= 0; r--) {
            var s = o.getProperty(this, r);
            if (0 == o.comp(s, e)) return o.createPrimitive(r)
        }
        return o.createPrimitive(-1)
    }, this.setProperty(this.ARRAY.properties.prototype, "lastIndexOf", this.createNativeFunction(t), !1, !0), t = function(e) {
        var t;
        if (e) {
            var n = e.node,
                i = (n.body, "FunctionDeclaration" == n.type ? n.id : e.node);
            t = function(t, r) {
                for (var s = {
                        callee: i,
                        arguments: n.params,
                        type: "CallExpression",
                        start: 0,
                        end: 0
                    }, a = {
                        expression: s,
                        type: "ExpressionStatement",
                        start: 0,
                        end: 0
                    }, l = o.createScope(e, e.parentScope), c = 0; c < n.params.length; c++) {
                    var u = o.createPrimitive(n.params[c].name),
                        g = arguments.length > c ? arguments[c] : o.UNDEFINED;
                    o.setProperty(l, u, g)
                }
                for (var p = o.createObject(o.ARRAY), c = 0; c < arguments.length; c++) o.setProperty(p, o.createPrimitive(c), arguments[c]);
                o.setProperty(l, "arguments", p), o.stateStack.unshift({
                    node: a,
                    scope: l,
                    breakpoint: !0
                });
                do o.step(); while (!o.stateStack[0].breakpoint);
                return o.stateStack[0].value.data
            }
        }
        for (var r = [], s = 0; s < this.length; s++) r[s] = this.properties[s];
        r.sort(t);
        for (var s = 0; s < r.length; s++) o.setProperty(this, s, r[s]);
        return this
    }, this.setProperty(this.ARRAY.properties.prototype, "sort", this.createNativeFunction(t), !1, !0)
}, Interpreter.prototype.initNumber = function(e) {
    var t, o = this;
    t = function(e) {
        return e = e ? e.toNumber() : 0, this.parent == o.NUMBER ? (this.toBoolean = function() {
            return !!e
        }, this.toNumber = function() {
            return e
        }, void(this.toString = function() {
            return String(e)
        })) : o.createPrimitive(e)
    }, this.NUMBER = this.createNativeFunction(t), this.setProperty(e, "Number", this.NUMBER);
    for (var n = ["MAX_VALUE", "MIN_VALUE", "NaN", "NEGATIVE_INFINITY", "POSITIVE_INFINITY"], i = 0; i < n.length; i++) this.setProperty(this.NUMBER, n[i], this.createPrimitive(Number[n[i]]));
    t = function(e) {
        e = e ? e.toNumber() : void 0;
        var t = this.toNumber();
        return o.createPrimitive(t.toExponential(e))
    }, this.setProperty(this.NUMBER.properties.prototype, "toExponential", this.createNativeFunction(t), !1, !0), t = function(e) {
        e = e ? e.toNumber() : void 0;
        var t = this.toNumber();
        return o.createPrimitive(t.toFixed(e))
    }, this.setProperty(this.NUMBER.properties.prototype, "toFixed", this.createNativeFunction(t), !1, !0), t = function(e) {
        e = e ? e.toNumber() : void 0;
        var t = this.toNumber();
        return o.createPrimitive(t.toPrecision(e))
    }, this.setProperty(this.NUMBER.properties.prototype, "toPrecision", this.createNativeFunction(t), !1, !0), t = function(e) {
        e = e ? e.toNumber() : 10;
        var t = this.toNumber();
        return o.createPrimitive(t.toString(e))
    }, this.setProperty(this.OBJECT.properties.prototype, "toString", this.createNativeFunction(t), !1, !0)
}, Interpreter.prototype.initString = function(e) {
    var t, o = this;
    t = function(e) {
        return e = (e || o.UNDEFINED).toString(), this.parent == o.STRING ? (this.toBoolean = function() {
            return !!e
        }, this.toNumber = function() {
            return Number(e)
        }, this.toString = function() {
            return e
        }, this.valueOf = function() {
            return e
        }, void(this.data = e)) : o.createPrimitive(e)
    }, this.STRING = this.createNativeFunction(t), this.setProperty(e, "String", this.STRING);
    for (var n = ["toLowerCase", "toUpperCase", "toLocaleLowerCase", "toLocaleUpperCase"], i = 0; i < n.length; i++) {
        var t = function(e) {
            return function() {
                return o.createPrimitive(e.apply(this))
            }
        }(String.prototype[n[i]]);
        this.setProperty(this.STRING.properties.prototype, n[i], this.createNativeFunction(t), !1, !0)
    }
    t = function() {
        var e = this.toString();
        return o.createPrimitive(e.replace(/^\s+|\s+$/g, ""))
    }, this.setProperty(this.STRING.properties.prototype, "trim", this.createNativeFunction(t), !1, !0), t = function() {
        var e = this.toString();
        return o.createPrimitive(e.replace(/^\s+/g, ""))
    }, this.setProperty(this.STRING.properties.prototype, "trimLeft", this.createNativeFunction(t), !1, !0), t = function() {
        var e = this.toString();
        return o.createPrimitive(e.replace(/\s+$/g, ""))
    }, this.setProperty(this.STRING.properties.prototype, "trimRight", this.createNativeFunction(t), !1, !0), t = function(e) {
        var t = this.toString();
        return e = (e || o.UNDEFINED).toNumber(), o.createPrimitive(t.charAt(e))
    }, this.setProperty(this.STRING.properties.prototype, "charAt", this.createNativeFunction(t), !1, !0), t = function(e) {
        var t = this.toString();
        return e = (e || o.UNDEFINED).toNumber(), o.createPrimitive(t.charCodeAt(e))
    }, this.setProperty(this.STRING.properties.prototype, "charCodeAt", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        var n = this.toString();
        return e = (e || o.UNDEFINED).toString(), t = t ? t.toNumber() : void 0, o.createPrimitive(n.indexOf(e, t))
    }, this.setProperty(this.STRING.properties.prototype, "indexOf", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        var n = this.toString();
        return e = (e || o.UNDEFINED).toString(), t = t ? t.toNumber() : void 0, o.createPrimitive(n.lastIndexOf(e, t))
    }, this.setProperty(this.STRING.properties.prototype, "lastIndexOf", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        var n = this.toString();
        e = e ? o.isa(e, o.REGEXP) ? e.data : e.toString() : void 0, t = t ? t.toNumber() : void 0;
        for (var i = n.split(e, t), r = o.createObject(o.ARRAY), s = 0; s < i.length; s++) o.setProperty(r, s, o.createPrimitive(i[s]));
        return r
    }, this.setProperty(this.STRING.properties.prototype, "split", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        var n = this.toString();
        return e = e ? e.toNumber() : void 0, t = t ? t.toNumber() : void 0, o.createPrimitive(n.substring(e, t))
    }, this.setProperty(this.STRING.properties.prototype, "substring", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        var n = this.toString();
        return e = e ? e.toNumber() : void 0, t = t ? t.toNumber() : void 0, o.createPrimitive(n.substr(e, t))
    }, this.setProperty(this.STRING.properties.prototype, "substr", this.createNativeFunction(t), !1, !0), t = function(e) {
        for (var t = this.toString(), n = 0; n < arguments.length; n++) t += arguments[n].toString();
        return o.createPrimitive(t)
    }, this.setProperty(this.STRING.properties.prototype, "concat", this.createNativeFunction(t), !1, !0), t = function(e, t) {
        var n = this.toString();
        return e = e ? e.toNumber() : void 0, t = t ? t.toNumber() : void 0, o.createPrimitive(n.slice(e, t))
    }, this.setProperty(this.STRING.properties.prototype, "slice", this.createNativeFunction(t), !1, !0), t = function(e) {
        var t = this.toString();
        e = e ? e.data : void 0;
        var n = t.match(e);
        if (null === n) return o.createPrimitive(null);
        for (var i = o.createObject(o.ARRAY), r = 0; r < n.length; r++) o.setProperty(i, r, o.createPrimitive(n[r]));
        return i
    }, this.setProperty(this.STRING.properties.prototype, "match", this.createNativeFunction(t), !1, !0), t = function(e) {
        var t = this.toString();
        return e = e ? e.data : void 0, o.createPrimitive(t.search(e))
    }, this.setProperty(this.STRING.properties.prototype, "search", this.createNativeFunction(t), !1, !0)
}, Interpreter.prototype.initBoolean = function(e) {
    var t, o = this;
    t = function(e) {
        return e = e ? e.toBoolean() : !1, this.parent == o.STRING ? (this.toBoolean = function() {
            return e
        }, this.toNumber = function() {
            return Number(e)
        }, this.toString = function() {
            return String(e)
        }, void(this.valueOf = function() {
            return e
        })) : o.createPrimitive(e)
    }, this.BOOLEAN = this.createNativeFunction(t), this.setProperty(e, "Boolean", this.BOOLEAN)
}, Interpreter.prototype.initDate = function(e) {
    var t, o = this;
    t = function(e, t, n, i, r, s, a) {
        if (this.parent == o.DATE) var l = this;
        else var l = o.createObject(o.DATE);
        var c = e;
        if (arguments.length)
            if (1 != arguments.length || "string" != c.type && !o.isa(c, o.STRING)) {
                for (var u = [], g = 0; g < arguments.length; g++) u[g] = arguments[g] ? arguments[g].toNumber() : void 0;
                1 == u.length ? l.date = new Date(u[0]) : 2 == u.length ? l.date = new Date(u[0], u[1]) : 3 == u.length ? l.date = new Date(u[0], u[1], u[2]) : 4 == u.length ? l.date = new Date(u[0], u[1], u[2], u[3]) : 5 == u.length ? l.date = new Date(u[0], u[1], u[2], u[3], u[4]) : 6 == u.length ? l.date = new Date(u[0], u[1], u[2], u[3], u[4], u[5]) : l.date = new Date(u[0], u[1], u[2], u[3], u[4], u[5], u[6])
            } else l.date = new Date(c.toString());
        else l.date = new Date;
        return l.toString = function() {
            return String(this.date)
        }, l.toNumber = function() {
            return Number(this.date)
        }, l.valueOf = function() {
            return this.date.valueOf()
        }, l
    }, this.DATE = this.createNativeFunction(t), this.setProperty(e, "Date", this.DATE), t = function() {
        return o.createPrimitive((new Date).getTime())
    }, this.setProperty(this.DATE, "now", this.createNativeFunction(t), !1, !0), t = function(e) {
        return e = e ? e.toString() : void 0, o.createPrimitive(Date.parse(e))
    }, this.setProperty(this.DATE, "parse", this.createNativeFunction(t), !1, !0), t = function(e, t, n, i, r, s, a) {
        for (var l = [], c = 0; c < arguments.length; c++) l[c] = arguments[c] ? arguments[c].toNumber() : void 0;
        return o.createPrimitive(Date.UTC.apply(Date, l))
    }, this.setProperty(this.DATE, "UTC", this.createNativeFunction(t), !1, !0);
    for (var n = ["getDate", "getDay", "getFullYear", "getHours", "getMilliseconds", "getMinutes", "getMonth", "getSeconds", "getTime", "getTimezoneOffset", "getUTCDate", "getUTCDay", "getUTCFullYear", "getUTCHours", "getUTCMilliseconds", "getUTCMinutes", "getUTCMonth", "getUTCSeconds", "getYear"], i = 0; i < n.length; i++) t = function(e) {
        return function() {
            return o.createPrimitive(this.date[e]())
        }
    }(n[i]), this.setProperty(this.DATE.properties.prototype, n[i], this.createNativeFunction(t), !1, !0);
    for (var r = ["setDate", "setFullYear", "setHours", "setMilliseconds", "setMinutes", "setMonth", "setSeconds", "setTime", "setUTCDate", "setUTCFullYear", "setUTCHours", "setUTCMilliseconds", "setUTCMinutes", "setUTCMonth", "setUTCSeconds", "setYear"], i = 0; i < r.length; i++) t = function(e) {
        return function(t) {
            for (var n = [], i = 0; i < arguments.length; i++) n[i] = arguments[i] ? arguments[i].toNumber() : void 0;
            return o.createPrimitive(this.date[e].apply(this.date, n))
        }
    }(r[i]), this.setProperty(this.DATE.properties.prototype, r[i], this.createNativeFunction(t), !1, !0);
    for (var n = ["toDateString", "toISOString", "toGMTString", "toLocaleDateString", "toLocaleString", "toLocaleTimeString", "toTimeString", "toUTCString"], i = 0; i < n.length; i++) t = function(e) {
        return function() {
            return o.createPrimitive(this.date[e]())
        }
    }(n[i]), this.setProperty(this.DATE.properties.prototype, n[i], this.createNativeFunction(t), !1, !0)
}, Interpreter.prototype.initMath = function(e) {
    var t = this,
        o = this.createObject(this.OBJECT);
    this.setProperty(e, "Math", o);
    for (var n = ["E", "LN2", "LN10", "LOG2E", "LOG10E", "PI", "SQRT1_2", "SQRT2"], i = 0; i < n.length; i++) this.setProperty(o, n[i], this.createPrimitive(Math[n[i]]));
    for (var r = ["abs", "acos", "asin", "atan", "atan2", "ceil", "cos", "exp", "floor", "log", "max", "min", "pow", "random", "round", "sin", "sqrt", "tan"], i = 0; i < r.length; i++) {
        var s = function(e) {
            return function() {
                for (var o = 0; o < arguments.length; o++) arguments[o] = arguments[o].toNumber();
                return t.createPrimitive(e.apply(Math, arguments))
            }
        }(Math[r[i]]);
        this.setProperty(o, r[i], this.createNativeFunction(s))
    }
}, Interpreter.prototype.initRegExp = function(e) {
    var t, o = this;
    t = function(e, t) {
        var n;
        return n = this.parent == o.REGEXP ? this : o.createObject(o.REGEXP), e = e.toString(), t = t && t.toString(), o.createRegExp(n, new RegExp(e, t || "")), n
    }, this.REGEXP = this.createNativeFunction(t), this.setProperty(e, "RegExp", this.REGEXP), t = function() {
        return o.createPrimitive(this.data.toString())
    }, this.setProperty(this.REGEXP.properties.prototype, "toString", this.createNativeFunction(t), !1, !0), t = function(e) {
        return e = e.toString(), o.createPrimitive(this.data.test(e))
    }, this.setProperty(this.REGEXP.properties.prototype, "test", this.createNativeFunction(t), !1, !0), t = function(e) {
        e = e.toString(), this.data.lastIndex = o.getProperty(this, "lastIndex").toNumber();
        var t = this.data.exec(e);
        if (o.setProperty(this, "lastIndex", o.createPrimitive(this.data.lastIndex)), t) {
            for (var n = o.createObject(o.ARRAY), i = 0; i < t.length; i++) o.setProperty(n, i, o.createPrimitive(t[i]));
            return o.setProperty(n, "index", o.createPrimitive(t.index)), o.setProperty(n, "input", o.createPrimitive(t.input)), n
        }
        return o.createPrimitive(null)
    }, this.setProperty(this.REGEXP.properties.prototype, "exec", this.createNativeFunction(t), !1, !0)
}, Interpreter.prototype.initJSON = function(e) {
    function t(e) {
        if ("object" != typeof e) return n.createPrimitive(e);
        var o;
        if (e instanceof Array) {
            o = n.createObject(n.ARRAY);
            for (var i = 0; i < e.length; i++) n.setProperty(o, i, t(e[i]))
        } else {
            o = n.createObject(n.OBJECT);
            for (var r in e) n.setProperty(o, r, t(e[r]))
        }
        return o
    }

    function o(e) {
        if (e.isPrimitive) return e.data;
        var t;
        if (e.length) {
            t = [];
            for (var n = 0; n < e.length; n++) t[n] = o(e.properties[n])
        } else {
            t = {};
            for (var i in e.properties) t[i] = o(e.properties[i])
        }
        return t
    }
    var n = this,
        i = n.createObject(this.OBJECT);
    this.setProperty(e, "JSON", i);
    var r = function(e) {
        return function() {
            var o = arguments[0].data,
                n = e.call(JSON, o);
            return t(n)
        }
    }(JSON.parse);
    this.setProperty(i, "parse", this.createNativeFunction(r)), r = function(e) {
        return function() {
            var t = o(arguments[0]);
            return n.createPrimitive(e.call(JSON, t))
        }
    }(JSON.stringify), this.setProperty(i, "stringify", this.createNativeFunction(r))
}, Interpreter.prototype.isa = function(e, t) {
    return e && t ? e.parent == t ? !0 : e.parent && e.parent.prototype ? this.isa(e.parent.prototype, t) : !1 : !1
}, Interpreter.prototype.comp = function(e, t) {
    return e.isPrimitive && "number" == typeof e && isNaN(e.data) || t.isPrimitive && "number" == typeof t && isNaN(t.data) ? NaN : e.isPrimitive && t.isPrimitive ? (e = e.data, t = t.data, t > e ? -1 : e > t ? 1 : 0) : NaN
}, Interpreter.prototype.arrayIndex = function(e) {
    return e = Number(e), !isFinite(e) || e != Math.floor(e) || 0 > e ? NaN : e
}, Interpreter.prototype.createPrimitive = function(e) {
    if (e instanceof RegExp) return this.createRegExp(this.createObject(this.REGEXP), e);
    var t = typeof e,
        o = {
            data: e,
            isPrimitive: !0,
            type: t,
            toBoolean: function() {
                return Boolean(this.data)
            },
            toNumber: function() {
                return Number(this.data)
            },
            toString: function() {
                return String(this.data)
            },
            valueOf: function() {
                return this.data
            }
        };
    return "number" == t ? o.parent = this.NUMBER : "string" == t ? o.parent = this.STRING : "boolean" == t && (o.parent = this.BOOLEAN), o
}, Interpreter.prototype.createObject = function(e) {
    var t = {
        isPrimitive: !1,
        type: "object",
        parent: e,
        fixed: Object.create(null),
        nonenumerable: Object.create(null),
        properties: Object.create(null),
        toBoolean: function() {
            return !0
        },
        toNumber: function() {
            return 0
        },
        toString: function() {
            return "[" + this.type + "]"
        },
        valueOf: function() {
            return this
        }
    };
    return this.isa(t, this.FUNCTION) && (t.type = "function", this.setProperty(t, "prototype", this.createObject(this.OBJECT || null))), this.isa(t, this.ARRAY) && (t.length = 0, t.toString = function() {
        for (var e = [], t = 0; t < this.length; t++) e[t] = this.properties[t].toString();
        return e.join(",")
    }), t
}, Interpreter.prototype.createRegExp = function(e, t) {
    return e.data = t, this.setProperty(e, "lastIndex", this.createPrimitive(e.data.lastIndex), !1, !0), this.setProperty(e, "source", this.createPrimitive(e.data.source), !0, !0), this.setProperty(e, "global", this.createPrimitive(e.data.global), !0, !0), this.setProperty(e, "ignoreCase", this.createPrimitive(e.data.ignoreCase), !0, !0), this.setProperty(e, "multiline", this.createPrimitive(e.data.multiline), !0, !0), e
}, Interpreter.prototype.createFunction = function(e, t) {
    var o = this.createObject(this.FUNCTION);
    return o.parentScope = t || this.getScope(), o.node = e, this.setProperty(o, "length", this.createPrimitive(o.node.params.length), !0), o
}, Interpreter.prototype.createNativeFunction = function(e) {
    var t = this.createObject(this.FUNCTION);
    return t.nativeFunc = e, this.setProperty(t, "length", this.createPrimitive(e.length), !0), t
}, Interpreter.prototype.getProperty = function(e, t) {
    if (t = t.toString(), this.isa(e, this.STRING)) {
        if ("length" == t) return this.createPrimitive(e.data.length);
        var o = this.arrayIndex(t);
        if (!isNaN(o) && o < e.data.length) return this.createPrimitive(e.data[o])
    } else if (this.isa(e, this.ARRAY) && "length" == t) return this.createPrimitive(e.length);
    for (;;) {
        if (e.properties && t in e.properties) return e.properties[t];
        if (!(e.parent && e.parent.properties && e.parent.properties.prototype)) break;
        e = e.parent.properties.prototype
    }
    return this.UNDEFINED
}, Interpreter.prototype.hasProperty = function(e, t) {
    if (t = t.toString(), e.isPrimitive) throw new TypeError("Primitive data type has no properties");
    if ("length" == t && (this.isa(e, this.STRING) || this.isa(e, this.ARRAY))) return !0;
    if (this.isa(e, this.STRING)) {
        var o = this.arrayIndex(t);
        if (!isNaN(o) && o < e.data.length) return !0
    }
    for (;;) {
        if (e.properties && t in e.properties) return !0;
        if (!(e.parent && e.parent.properties && e.parent.properties.prototype)) break;
        e = e.parent.properties.prototype
    }
    return !1
}, Interpreter.prototype.setProperty = function(e, t, o, n, i) {
    if (t = t.toString(), !e.isPrimitive && !e.fixed[t]) {
        if (this.isa(e, this.STRING)) {
            var r = this.arrayIndex(t);
            if ("length" == t || !isNaN(r) && r < e.data.length) return
        }
        if (this.isa(e, this.ARRAY)) {
            var s;
            if ("length" == t) {
                var a = this.arrayIndex(o.toNumber());
                if (isNaN(a)) throw new RangeError("Invalid array length");
                if (a < e.length)
                    for (s in e.properties) s = this.arrayIndex(s), !isNaN(s) && s >= a && delete e.properties[s];
                return void(e.length = a)
            }
            isNaN(s = this.arrayIndex(t)) || (e.length = Math.max(e.length, s + 1))
        }
        e.properties[t] = o, n && (e.fixed[t] = !0), i && (e.nonenumerable[t] = !0)
    }
}, Interpreter.prototype.deleteProperty = function(e, t) {
    return t = t.toString(), e.isPrimitive || e.fixed[t] ? !1 : "length" == t && this.isa(e, this.ARRAY) ? !1 : delete e.properties[t]
}, Interpreter.prototype.getScope = function() {
    for (var e = 0; e < this.stateStack.length; e++)
        if (this.stateStack[e].scope) return this.stateStack[e].scope;
    throw "No scope found."
}, Interpreter.prototype.createScope = function(e, t) {
    var o = this.createObject(null);
    return o.parentScope = t, t || this.initGlobalScope(o), this.populateScope_(e, o), o
}, Interpreter.prototype.getValueFromScope = function(e) {
    for (var t = this.getScope(), o = e.toString(); t;) {
        if (this.hasProperty(t, o)) return this.getProperty(t, o);
        t = t.parentScope
    }
    throw "Unknown identifier: " + o
}, Interpreter.prototype.setValueToScope = function(e, t) {
    for (var o = this.getScope(), n = e.toString(); o;) {
        if (this.hasProperty(o, n)) return this.setProperty(o, n, t);
        o = o.parentScope
    }
    throw "Unknown identifier: " + n
}, Interpreter.prototype.populateScope_ = function(e, t) {
    function o(e) {
        e.constructor == i.ast.constructor && i.populateScope_(e, t)
    }
    if ("VariableDeclaration" == e.type)
        for (var n = 0; n < e.declarations.length; n++) this.setProperty(t, e.declarations[n].id.name, this.UNDEFINED);
    else {
        if ("FunctionDeclaration" == e.type) return void this.setProperty(t, e.id.name, this.createFunction(e, t));
        if ("FunctionExpression" == e.type) return
    }
    var i = this;
    for (var r in e) {
        var s = e[r];
        if (s && "object" == typeof s)
            if ("number" == typeof s.length && s.splice)
                for (var n = 0; n < s.length; n++) o(s[n]);
            else o(s)
    }
}, Interpreter.prototype.getValue = function(e) {
    if (e.length) {
        var t = e[0],
            o = e[1];
        return this.getProperty(t, o)
    }
    return this.getValueFromScope(e)
}, Interpreter.prototype.setValue = function(e, t) {
    if (e.length) {
        var o = e[0],
            n = e[1];
        this.setProperty(o, n, t)
    } else this.setValueToScope(e, t)
}, Interpreter.prototype.stepArrayExpression = function() {
    var e = this.stateStack[0],
        t = e.node,
        o = e.n || 0;
    e.array ? this.setProperty(e.array, o - 1, e.value) : e.array = this.createObject(this.ARRAY), t.elements[o] ? (e.n = o + 1, this.stateStack.unshift({
        node: t.elements[o]
    })) : (e.array.length = e.n || 0, this.stateStack.shift(), this.stateStack[0].value = e.array)
}, Interpreter.prototype.stepAssignmentExpression = function() {
    var e = this.stateStack[0],
        t = e.node;
    if (e.doneLeft)
        if (e.doneRight) {
            this.stateStack.shift();
            var o, n = e.leftSide,
                i = e.value;
            if ("=" == t.operator) o = i;
            else {
                var r = this.getValue(n),
                    s = i,
                    a = r.toNumber(),
                    l = s.toNumber();
                if ("+=" == t.operator) {
                    var c, u;
                    "string" == r.type || "string" == s.type ? (c = r.toString(), u = s.toString()) : (c = a, u = l), o = c + u
                } else if ("-=" == t.operator) o = a - l;
                else if ("*=" == t.operator) o = a * l;
                else if ("/=" == t.operator) o = a / l;
                else if ("%=" == t.operator) o = a % l;
                else if ("<<=" == t.operator) o = a << l;
                else if (">>=" == t.operator) o = a >> l;
                else if (">>>=" == t.operator) o = a >>> l;
                else if ("&=" == t.operator) o = a & l;
                else if ("^=" == t.operator) o = a ^ l;
                else {
                    if ("|=" != t.operator) throw "Unknown assignment expression: " + t.operator;
                    o = a | l
                }
                o = this.createPrimitive(o)
            }
            this.setValue(n, o), this.stateStack[0].value = o
        } else e.doneRight = !0, e.leftSide = e.value, this.stateStack.unshift({
            node: t.right
        });
    else e.doneLeft = !0, this.stateStack.unshift({
        node: t.left,
        components: !0
    })
}, Interpreter.prototype.stepBinaryExpression = function() {
    var e = this.stateStack[0],
        t = e.node;
    if (e.doneLeft)
        if (e.doneRight) {
            this.stateStack.shift();
            var o, n = e.leftValue,
                i = e.value,
                r = this.comp(n, i);
            if ("==" == t.operator || "!=" == t.operator) o = 0 === r, "!=" == t.operator && (o = !o);
            else if ("===" == t.operator || "!==" == t.operator) o = n.isPrimitive && i.isPrimitive ? n.data === i.data : n === i, "!==" == t.operator && (o = !o);
            else if (">" == t.operator) o = 1 == r;
            else if (">=" == t.operator) o = 1 == r || 0 === r;
            else if ("<" == t.operator) o = -1 == r;
            else if ("<=" == t.operator) o = -1 == r || 0 === r;
            else if ("+" == t.operator) {
                if ("string" == n.type || "string" == i.type) var s = n.toString(),
                    a = i.toString();
                else var s = n.toNumber(),
                    a = i.toNumber();
                o = s + a
            } else if ("in" == t.operator) o = this.hasProperty(i, n);
            else {
                var s = n.toNumber(),
                    a = i.toNumber();
                if ("-" == t.operator) o = s - a;
                else if ("*" == t.operator) o = s * a;
                else if ("/" == t.operator) o = s / a;
                else if ("%" == t.operator) o = s % a;
                else if ("&" == t.operator) o = s & a;
                else if ("|" == t.operator) o = s | a;
                else if ("^" == t.operator) o = s ^ a;
                else if ("<<" == t.operator) o = s << a;
                else if (">>" == t.operator) o = s >> a;
                else {
                    if (">>>" != t.operator) throw "Unknown binary operator: " + t.operator;
                    o = s >>> a
                }
            }
            this.stateStack[0].value = this.createPrimitive(o)
        } else e.doneRight = !0, e.leftValue = e.value, this.stateStack.unshift({
            node: t.right
        });
    else e.doneLeft = !0, this.stateStack.unshift({
        node: t.left
    })
}, Interpreter.prototype.stepBreakStatement = function() {
    var e = this.stateStack.shift(),
        t = e.node,
        o = null;
    for (t.label && (o = t.label.name), e = this.stateStack.shift(); e && "callExpression" != e.node.type;) {
        if (o ? o == e.label : e.isLoop || e.isSwitch) return;
        e = this.stateStack.shift()
    }
    throw new SyntaxError("Illegal break statement")
}, Interpreter.prototype.stepBlockStatement = function() {
    var e = this.stateStack[0],
        t = e.node,
        o = e.n_ || 0;
    t.body[o] ? (e.n_ = o + 1, this.stateStack.unshift({
        node: t.body[o]
    })) : this.stateStack.shift()
}, Interpreter.prototype.stepCallExpression = function() {
    var e = this.stateStack[0],
        t = e.node;
    if (e.doneCallee_) {
        if (e.func_) {
            var o = e.n_;
            e.arguments.length != t.arguments.length && (e.arguments[o - 1] = e.value)
        } else {
            if ("function" == e.value.type) e.func_ = e.value;
            else if (e.member_ = e.value[0], e.func_ = this.getValue(e.value), !e.func_ || "function" != e.func_.type) throw new TypeError((e.func_ && e.func_.type) + " is not a function");
            "NewExpression" == e.node.type ? (e.funcThis_ = this.createObject(e.func_), e.isConstructor_ = !0) : e.value.length ? e.funcThis_ = e.value[0] : e.funcThis_ = this.stateStack[this.stateStack.length - 1].thisExpression, e.arguments = [];
            var o = 0
        }
        if (t.arguments[o]) e.n_ = o + 1, this.stateStack.unshift({
            node: t.arguments[o]
        });
        else if (e.doneExec) this.stateStack.shift(), this.stateStack[0].value = e.isConstructor_ ? e.funcThis_ : e.value;
        else {
            if (e.doneExec = !0, e.func_.node && ("FunctionApply_" == e.func_.node.type || "FunctionCall_" == e.func_.node.type)) {
                if (e.funcThis_ = e.arguments.shift(), "FunctionApply_" == e.func_.node.type) {
                    var n = e.arguments.shift();
                    if (n && this.isa(n, this.ARRAY)) {
                        e.arguments = [];
                        for (var i = 0; i < n.length; i++) e.arguments[i] = this.getProperty(n, i)
                    } else e.arguments = []
                }
                e.func_ = e.member_
            }
            if (e.func_.node) {
                for (var r = this.createScope(e.func_.node.body, e.func_.parentScope), i = 0; i < e.func_.node.params.length; i++) {
                    var s = this.createPrimitive(e.func_.node.params[i].name),
                        a = e.arguments.length > i ? e.arguments[i] : this.UNDEFINED;
                    this.setProperty(r, s, a)
                }
                for (var n = this.createObject(this.ARRAY), i = 0; i < e.arguments.length; i++) this.setProperty(n, this.createPrimitive(i), e.arguments[i]);
                this.setProperty(r, "arguments", n);
                var l = {
                    node: e.func_.node.body,
                    scope: r,
                    thisExpression: e.funcThis_
                };
                this.stateStack.unshift(l), e.value = this.UNDEFINED
            } else if (e.func_.nativeFunc) e.value = e.func_.nativeFunc.apply(e.funcThis_, e.arguments);
            else {
                if (!e.func_.eval) throw new TypeError("function not a function (huh?)");
                var c = e.arguments[0];
                if (c)
                    if (c.isPrimitive) {
                        var u = new Interpreter(c.toString());
                        u.stateStack[0].scope.parentScope = this.getScope();
                        var e = {
                            node: {
                                type: "Eval_"
                            },
                            interpreter: u
                        };
                        this.stateStack.unshift(e)
                    } else e.value = c;
                else e.value = this.UNDEFINED
            }
        }
    } else e.doneCallee_ = !0, this.stateStack.unshift({
        node: t.callee,
        components: !0
    })
}, Interpreter.prototype.stepConditionalExpression = function() {
    var e = this.stateStack[0];
    e.done ? (this.stateStack.shift(), "ConditionalExpression" == e.node.type && (this.stateStack[0].value = e.value)) : e.test ? (e.done = !0, e.value.toBoolean() && e.node.consequent ? this.stateStack.unshift({
        node: e.node.consequent
    }) : !e.value.toBoolean() && e.node.alternate && this.stateStack.unshift({
        node: e.node.alternate
    })) : (e.test = !0, this.stateStack.unshift({
        node: e.node.test
    }))
}, Interpreter.prototype.stepContinueStatement = function() {
    var e = this.stateStack[0].node,
        t = null;
    e.label && (t = e.label.name);
    for (var o = this.stateStack[0]; o && "callExpression" != o.node.type;) {
        if (o.isLoop && (!t || t == o.label)) return;
        this.stateStack.shift(), o = this.stateStack[0]
    }
    throw new SyntaxError("Illegal continue statement")
}, Interpreter.prototype.stepDoWhileStatement = function() {
    var e = this.stateStack[0];
    e.isLoop = !0, "DoWhileStatement" == e.node.type && void 0 === e.test && (e.value = this.createPrimitive(!0), e.test = !0), e.test ? (e.test = !1, e.value.toBoolean() ? e.node.body && this.stateStack.unshift({
        node: e.node.body
    }) : this.stateStack.shift()) : (e.test = !0, this.stateStack.unshift({
        node: e.node.test
    }))
}, Interpreter.prototype.stepEmptyStatement = function() {
    this.stateStack.shift()
}, Interpreter.prototype.stepEval_ = function() {
    var e = this.stateStack[0];
    e.interpreter.step() || (this.stateStack.shift(), this.stateStack[0].value = e.interpreter.value || this.UNDEFINED)
}, Interpreter.prototype.stepExpressionStatement = function() {
    var e = this.stateStack[0];
    e.done ? (this.stateStack.shift(), this.value = e.value) : (e.done = !0, this.stateStack.unshift({
        node: e.node.expression
    }))
}, Interpreter.prototype.stepForInStatement = function() {
    var e = this.stateStack[0];
    e.isLoop = !0;
    var t = e.node;
    if (e.doneVariable_)
        if (e.doneObject_) {
            "undefined" == typeof e.iterator && (e.object = e.value, e.iterator = 0);
            var o = null;
            e: do {
                var n = e.iterator;
                for (var i in e.object.properties)
                    if (!(i in e.object.nonenumerable)) {
                        if (0 == n) {
                            o = i;
                            break e
                        }
                        n--
                    }
                e.object = e.object.parent && e.object.parent.properties.prototype, e.iterator = 0
            } while (e.object);
            e.iterator++, null === o ? this.stateStack.shift() : (this.setValueToScope(e.variable, this.createPrimitive(o)), t.body && this.stateStack.unshift({
                node: t.body
            }))
        } else e.doneObject_ = !0, e.variable = e.value, this.stateStack.unshift({
            node: t.right
        });
    else {
        e.doneVariable_ = !0;
        var r = t.left;
        "VariableDeclaration" == r.type && (r = r.declarations[0].id), this.stateStack.unshift({
            node: r,
            components: !0
        })
    }
}, Interpreter.prototype.stepForStatement = function() {
    var e = this.stateStack[0];
    e.isLoop = !0;
    var t = e.node,
        o = e.mode || 0;
    0 == o ? (e.mode = 1, t.init && this.stateStack.unshift({
        node: t.init
    })) : 1 == o ? (e.mode = 2, t.test && this.stateStack.unshift({
        node: t.test
    })) : 2 == o ? (e.mode = 3, e.value && !e.value.toBoolean() ? this.stateStack.shift() : t.body && this.stateStack.unshift({
        node: t.body
    })) : 3 == o && (e.mode = 1, t.update && this.stateStack.unshift({
        node: t.update
    }))
}, Interpreter.prototype.stepFunctionDeclaration = function() {
    this.stateStack.shift()
}, Interpreter.prototype.stepFunctionExpression = function() {
    var e = this.stateStack[0];
    this.stateStack.shift(), this.stateStack[0].value = this.createFunction(e.node)
}, Interpreter.prototype.stepIdentifier = function() {
    var e = this.stateStack[0];
    this.stateStack.shift();
    var t = this.createPrimitive(e.node.name);
    this.stateStack[0].value = e.components ? t : this.getValueFromScope(t)
}, Interpreter.prototype.stepIfStatement = Interpreter.prototype.stepConditionalExpression, Interpreter.prototype.stepLabeledStatement = function() {
    var e = this.stateStack.shift();
    this.stateStack.unshift({
        node: e.node.body,
        label: e.node.label.name
    })
}, Interpreter.prototype.stepLiteral = function() {
    var e = this.stateStack[0];
    this.stateStack.shift(), this.stateStack[0].value = this.createPrimitive(e.node.value)
}, Interpreter.prototype.stepLogicalExpression = function() {
    var e = this.stateStack[0],
        t = e.node;
    if ("&&" != t.operator && "||" != t.operator) throw "Unknown logical operator: " + t.operator;
    e.doneLeft_ ? e.doneRight_ ? (this.stateStack.shift(), this.stateStack[0].value = e.value) : "&&" == t.operator && !e.value.toBoolean() || "||" == t.operator && e.value.toBoolean() ? (this.stateStack.shift(), this.stateStack[0].value = e.value) : (e.doneRight_ = !0, this.stateStack.unshift({
        node: t.right
    })) : (e.doneLeft_ = !0, this.stateStack.unshift({
        node: t.left
    }))
}, Interpreter.prototype.stepMemberExpression = function() {
    var e = this.stateStack[0],
        t = e.node;
    e.doneObject_ ? e.doneProperty_ ? (this.stateStack.shift(), e.components ? this.stateStack[0].value = [e.object, e.value] : this.stateStack[0].value = this.getProperty(e.object, e.value)) : (e.doneProperty_ = !0, e.object = e.value, this.stateStack.unshift({
        node: t.property,
        components: !t.computed
    })) : (e.doneObject_ = !0, this.stateStack.unshift({
        node: t.object
    }))
}, Interpreter.prototype.stepNewExpression = Interpreter.prototype.stepCallExpression, Interpreter.prototype.stepObjectExpression = function() {
    var e = this.stateStack[0],
        t = e.node,
        o = e.valueToggle,
        n = e.n || 0;
    e.object ? o ? e.key = e.value : this.setProperty(e.object, e.key, e.value) : e.object = this.createObject(this.OBJECT), t.properties[n] ? (o ? (e.n = n + 1, this.stateStack.unshift({
        node: t.properties[n].value
    })) : this.stateStack.unshift({
        node: t.properties[n].key,
        components: !0
    }), e.valueToggle = !o) : (this.stateStack.shift(), this.stateStack[0].value = e.object)
}, Interpreter.prototype.stepProgram = Interpreter.prototype.stepBlockStatement, Interpreter.prototype.stepReturnStatement = function() {
    var e = this.stateStack[0],
        t = e.node;
    if (t.argument && !e.done) e.done = !0, this.stateStack.unshift({
        node: t.argument
    });
    else {
        var o = e.value || this.UNDEFINED;
        do {
            if (this.stateStack.shift(), 0 == this.stateStack.length) throw new SyntaxError("Illegal return statement");
            e = this.stateStack[0]
        } while ("CallExpression" != e.node.type);
        e.value = o
    }
}, Interpreter.prototype.stepSequenceExpression = function() {
    var e = this.stateStack[0],
        t = e.node,
        o = e.n || 0;
    t.expressions[o] ? (e.n = o + 1, this.stateStack.unshift({
        node: t.expressions[o]
    })) : (this.stateStack.shift(), this.stateStack[0].value = e.value)
}, Interpreter.prototype.stepSwitchStatement = function() {
    var e = this.stateStack[0];
    if (e.checked = e.checked || [], e.isSwitch = !0, e.test) {
        e.switchValue || (e.switchValue = e.value);
        var t = e.index || 0,
            o = e.node.cases[t];
        if (o)
            if (e.done || e.checked[t] || !o.test) {
                if (e.done || !o.test || 0 == this.comp(e.value, e.switchValue)) {
                    e.done = !0;
                    var n = e.n || 0;
                    if (o.consequent[n]) return this.stateStack.unshift({
                        node: o.consequent[n]
                    }), void(e.n = n + 1)
                }
                e.n = 0, e.index = t + 1
            } else e.checked[t] = !0, this.stateStack.unshift({
                node: o.test
            });
        else this.stateStack.shift()
    } else e.test = !0, this.stateStack.unshift({
        node: e.node.discriminant
    })
}, Interpreter.prototype.stepThisExpression = function() {
    this.stateStack.shift();
    for (var e = 0; e < this.stateStack.length; e++)
        if (this.stateStack[e].thisExpression) return void(this.stateStack[0].value = this.stateStack[e].thisExpression);
    throw "No this expression found."
}, Interpreter.prototype.stepThrowStatement = function() {
    var e = this.stateStack[0],
        t = e.node;
    if (e.argument) throw e.value.toString();
    e.argument = !0, this.stateStack.unshift({
        node: t.argument
    })
}, Interpreter.prototype.stepUnaryExpression = function() {
    var e = this.stateStack[0],
        t = e.node;
    if (e.done) {
        this.stateStack.shift();
        var o;
        if ("-" == t.operator) o = -e.value.toNumber();
        else if ("+" == t.operator) o = e.value.toNumber();
        else if ("!" == t.operator) o = !e.value.toNumber();
        else if ("~" == t.operator) o = ~e.value.toNumber();
        else if ("typeof" == t.operator) o = e.value.type;
        else if ("delete" == t.operator) {
            if (e.value.length) var n = e.value[0],
                i = e.value[1];
            else var n = this.getScope(),
                i = e.value;
            o = this.deleteProperty(n, i)
        } else {
            if ("void" != t.operator) throw "Unknown unary operator: " + t.operator;
            o = void 0
        }
        this.stateStack[0].value = this.createPrimitive(o)
    } else {
        e.done = !0;
        var r = {
            node: t.argument
        };
        "delete" == t.operator && (r.components = !0), this.stateStack.unshift(r)
    }
}, Interpreter.prototype.stepUpdateExpression = function() {
    var e = this.stateStack[0],
        t = e.node;
    if (e.done) {
        this.stateStack.shift();
        var o, n = e.value,
            i = this.getValue(n).toNumber();
        if ("++" == t.operator) o = this.createPrimitive(i + 1);
        else {
            if ("--" != t.operator) throw "Unknown update expression: " + t.operator;
            o = this.createPrimitive(i - 1)
        }
        this.setValue(n, o);
        var r = t.prefix ? r : i;
        this.stateStack[0].value = this.createPrimitive(r)
    } else e.done = !0, this.stateStack.unshift({
        node: t.argument,
        components: !0
    })
}, Interpreter.prototype.stepVariableDeclaration = function() {
    var e = this.stateStack[0],
        t = e.node,
        o = e.n || 0;
    t.declarations[o] ? (e.n = o + 1, this.stateStack.unshift({
        node: t.declarations[o]
    })) : this.stateStack.shift()
}, Interpreter.prototype.stepVariableDeclarator = function() {
    var e = this.stateStack[0],
        t = e.node;
    if (t.init && !e.done) e.done = !0, this.stateStack.unshift({
        node: t.init
    });
    else {
        if (!this.hasProperty(this, t.id.name) || t.init) {
            var o = t.init ? e.value : this.UNDEFINED;
            this.setValue(this.createPrimitive(t.id.name), o)
        }
        this.stateStack.shift()
    }
}, Interpreter.prototype.stepWhileStatement = Interpreter.prototype.stepDoWhileStatement, window.Interpreter = Interpreter, Interpreter.prototype.step = Interpreter.prototype.step, Interpreter.prototype.run = Interpreter.prototype.run, define("interpreter", ["acorn"], function(e) {
    return function() {
        var t;
        return t || e.Interpreter
    }
}(this)), define("simulation/task", ["interpreter"], function(e) {
    function t(e, t, o) {
        this.id = e, this.code = t, this.initFunc = o, this.restart()
    }
    return t.prototype.restart = function() {
        this.interpreter = new e(this.code, this.initFunc), this.openIds = [], this.lastClosed = null, this.suspended = !1, this.complete = !1, this.pauseCount = 0, this.completing = !1
    }, t.prototype.pauseActive = function() {
        return this.pauseCount > 0
    }, t.prototype.reducePause = function(e) {
        this.pauseCount = Math.max(0, this.pauseCount - e)
    }, t.prototype.step = function(e) {
        return this.complete = !this.interpreter.step(), this.complete
    }, t.prototype.suspend = function() {
        this.suspended = !0
    }, t.prototype.resume = function() {
        this.suspended = !1
    }, t.prototype.pause = function(e) {
        this.pauseCount = e
    }, t.prototype.stop = function() {
        this.completing = !0
    }, t.prototype.checkComplete = function() {
        1 == this.completing && (this.completing = !1, this.complete = !0)
    }, t
}), define("simulation/task-utils", ["../blockly/generators/javascript"], function(e) {
    function t(t) {
        for (var o, n = new RegExp("(" + e.PRESTEP_PREFIX + "\\(\\d+, (false|true)\\);\\nfunction ([^\\(]+)\\([^\\)]*\\){[\\s\\S]*?};\\n" + e.POSTSTEP_PREFIX + "\\(\\d+, (false|true)\\));\\n", "g"), i = {}; o = n.exec(t);) i[o[3]] = o[1];
        return i
    }
    var o = {};
    return o.getTaskBlocks = function(o, n) {
        o += "\n\n";
        for (var i, n = t(o), r = Object.keys(n), s = new RegExp("(" + e.PRESTEP_PREFIX + "\\((\\d*), (false|true)\\);\\n)(\\/\\/(main|start(\\d*)):\\n)(" + e.POSTSTEP_PREFIX + "\\((\\d*), (false|true)\\);\\n)([\\s\\S]*?)\\n\\n", "g"), a = [], l = {}; i = s.exec(o);) {
            var c = i[6];
            void 0 == c && (c = "0"), a.push(c);
            var u = i[1] + i[4] + i[7] + i[10];
            r.forEach(function(e) {
                u.indexOf(e + "(") && (u += "\n\n" + n[e])
            }), l[c] = u
        }
        return l
    }, o
}), define("simulation/js-transforms", ["blocklylib", "../blockly/generators/javascript"], function(e, t) {
    function o(e) {
        var o = "function interrupt(){};\n\nfunction " + t.PRESTEP_PREFIX + "(id, isProcCall) {\n  if (interruptState.check()){\n    interruptState.preTrigger();\n    interrupt();\n    interruptState.postTrigger();\n  };\n  " + t.STEP_PREFIX + "(id, isProcCall);\n}\n\n";
        return e = o + e
    }

    function n(t) {
        var o = /(var [A-z0-9]*;\n)+\n/gm,
            n = t.match(o);
        t = t.replace(o, "");
        var i = e.Variables.allVariables(e.mainWorkspace);
        return i.forEach(function(e, o) {
            var n = new RegExp("\\b(" + e + ")\\b", "g"),
                i = "var" + o;
            t = t.replace(n, i)
        }), t = t.replace(/[\s]?(var.?)[\s]?\+=/g, " $1=$1+"), t = t.replace(/[\s]?(var.?)[\s]?\-=/g, " $1=$1-"), t = t.replace(/var([0-9]*)[\s]?=[\s]?([^=;)]*)([;)])/g, "vars.set($1, $2)$3"), t = t.replace(/([^"])\bvar([0-9]*\b)/g, "$1vars.get($2)"), n && (t = n[0] + t), t
    }
    var i = {};
    return i.forInterpreter = function(e) {
        return e = n(e), e = o(e)
    }, i.forParallel = function(e) {
        var o = new RegExp("(" + t.PRESTEP_PREFIX + "\\((\\d*)\\);[\\s\\S]*)");
        return e.replace(o, "while(true){\n$1};")
    }, i.forRangeParser = function(e) {
        var o = "[\\s]*",
            n = [t.BREAK_COMMAND, t.WARNING_COMMAND, t.HIGHLIGHTSTEP_PREFIX];
        n.forEach(function(t) {
            e = e.replace(new RegExp(o + t + "\\([0-9.]*\\);\\n", "g"), "\n")
        }), e = e.replace(new RegExp(t.INNERSTEP_PREFIX + "\\([0-9.']*\\);\\n", "g"), "");
        var i = new RegExp("(\\n{1}|(\\n* +))?" + t.PRESTEP_PREFIX + "\\(([0-9.]*), (false|true)\\);\\n", "g");
        e = e.replace(i, "\n<n id='$3'>"), "\n" == e.charAt(0) && (e = e.substr(1));
        var r = "</n>";
        return e = e.replace(new RegExp(o + t.POSTSTEP_PREFIX + "\\(([0-9]*), (false|true)\\);", "g"), "<!--$1-->" + r)
    }, i
}), define("simulation/tasks", ["./task", "./task-utils", "./js-transforms"], function(e, t, o) {
    function n() {
        return l[r]
    }

    function i(e) {
        l.forEach(function(t) {
            a[t].reducePause(e)
        })
    }
    var r, s = {},
        a = {},
        l = [];
    return s.ready = !1, s.parallel = !1, s.getIds = function() {
        return l.concat()
    }, s.clear = function() {
        s.ready = !1
    }, s.active = function() {
        return -1 == r ? null : a[n()]
    }, s.setup = function(n, i) {
        var c = t.getTaskBlocks(n);
        l = Object.keys(c), a = {}, r = 0, s.parallel = l.length > 1, l.forEach(function(t) {
            var n = o.forInterpreter(c[t]);
            a[t] = new e(t, n, i)
        }), s.ready = !0
    }, s["switch"] = function(e) {
        i(e);
        var t = s.active();
        t && t.checkComplete();
        var o = l.length,
            n = r;
        r = -1;
        for (var c = 0; o > c; c++) {
            n++, n %= l.length;
            var u = l[n],
                g = a[u];
            if (g.pauseActive());
            else if (g.complete);
            else if (!g.suspended) {
                r = n;
                break
            }
        }
    }, s.allComplete = function() {
        return l.every(function(e) {
            return a[e].complete
        })
    }, s.allPaused = function() {
        return l.every(function(e) {
            return a[e].pauseActive()
        })
    }, s.resume = function(e) {
        var t = a[e];
        t && t.resume()
    }, s.suspend = function(e) {
        var t = a[e];
        t && t.suspend()
    }, s.restart = function(e) {
        var t = a[e];
        t && t.restart()
    }, s
}), define("simulation/interrupt-state", ["./pins-state"], function(e) {
    var t, o, n, i = !1,
        r = {};
    return r.setup = function(e, r, s) {
        i = !1, t = e, o = r, n = s
    }, r.preTrigger = function() {
        i = !0, t = 0, o = 0
    }, r.postTrigger = function() {
        i = !1
    }, r.check = function() {
        if (n && !i) {
            var r = t & o;
            return 0 != r && r == (e.getPortByte(n) & o)
        }
        return !1
    }, r
}), define("simulation/rts-serial", ["jquery", "signals", "../picaxe/models", "serial-ports", "./pins-state", "../messages", "../lang", "../events"], function(e, t, o, n, r, s, a, l) {
    function c() {
        if (k) {
            if (m)
                if (C) B++;
                else if (B = 0, S) {
                if (C = !0, S = !1, u(T[0]), T.shift(), T.length > 1) return S = !0, c();
                S = !1
            } else C = !0, u([62, 64, 0, 0, 0, 0]);
            else d("program-error");
            B >= 10 && d("SERIAL_ERROR"), y = setTimeout(c, 110)
        } else clearTimeout(y)
    }

    function u(e) {
        if (m) {
            var t = new Uint8Array(1);
            t[0] = e[b], chrome.serial.send(m, t.buffer, function(t) {
                if (null != chrome.runtime.lastError) d("HARDWARE_ERROR");
                else {
                    if (!(b >= e.length - 1)) return b++, u(e);
                    b = 0, e = []
                }
            })
        }
    }

    function g(e) {
        var t = e.data,
            o = new Uint8Array(t);
        for (i = 0; i < o.length; i++) 91 == o[i] && 91 != o[0] && A.shift(), 93 == o[i] ? (A.push(o[i]), E = A.slice(), p(), C = !1, A = []) : A.push(o[i])
    }

    function p() {
        var e = E[3];
        switch (e) {
            case 65:
                var t = (255 * E[5] + E[6]) / 4;
                break;
            case 104:
                var t = (255 * E[5] + E[6]) / 16;
                break;
            case 117:
                var t = E[6];
                break;
            case 118:
                var t = E[6];
                break;
            default:
                return void h()
        }
        var o = hexString = E[4].toString(16),
            n = o.charAt(0).toUpperCase(),
            i = o.charAt(1);
        o = n + "." + i, r.setAnalog(o, t)
    }

    function h() {
        var e, t, o, n;
        switch (126 & E[2]) {
            case 8:
                o = E[5];
                break;
            case 14:
            case 18:
            case 20:
                t = E[5], o = E[7];
                break;
            case 40:
                n = E[11];
            case 28:
                e = E[5], t = E[7], o = E[9]
        }
        e && r.setPortInput("A", e), t && r.setPortInput("B", t), o && r.setPortInput("C", o), n && r.setPortInput("D", n)
    }

    function d(e) {
        _.disconnect(), s.showSyntaxError(a.get(e))
    }

    function f() {
        var e = o.value.charAt(0).concat(o.value.charAt(1));
        parseFloat(e), void 0 == E[2] ? d("RTS_NO_ANSWER") : (126 & E[2]) != e ? d("WRONG_PICAXE") : (_.connected.dispatch(), k = !0, C = !1, c(), s.showSuccess(a.get("RTS_OK")))
    }
    var m, y, v = !1,
        _ = {},
        b = 0,
        C = !1,
        E = [],
        S = !1,
        T = [],
        k = !1,
        A = [],
        B = 0;
    return _.enabled = new t, _.connected = new t, _.disconnected = new t, _.value = new t, _.apiConnect = function() {
        _.connected.dispatch()
    }, _.apiDisconnect = function() {
        _.disconnected.dispatch()
    }, _.connect = function() {
        if (s.clear(), l.requestBlocklyRedraw.dispatch(), !chrome.serial) return void l.rtsConnect.dispatch();
        if (!v) {
            var e = {
                bitrate: 19200,
                dataBits: "eight",
                stopBits: "one",
                parityBit: "no",
                ctsFlowControl: !1
            };
            chrome.serial.connect(n.value, e, function(e) {
                if (null != chrome.runtime.lastError) d("HARDWARE_ERROR");
                else {
                    m = e.connectionId, chrome.serial.flush(m, function() {}), v = !0, E = [], chrome.serial.onReceive.addListener(g), u([62, 64, 0, 0, 0, 0]);
                    setTimeout(f, 500)
                }
            })
        }
    }, _.disconnect = function() {
        return chrome.serial ? void(m && (k = !1, chrome.serial.disconnect(m, function(e) {
            null != chrome.runtime.lastError ? d("SERIAL_ERROR") : (m = null, chrome.serial.onReceive.removeListener(g), v = !1, _.disconnected.dispatch())
        }))) : void l.rtsDisconnect.dispatch()
    }, _.isConnected = function() {
        return v
    }, _.enable = function(e) {
        _.enabled.dispatch(e)
    }, _.sendPacket = function(e) {
        S = !0, T.push(e)
    }, _
}), define("simulation/rts-command", ["signals", "./rts-serial", "./diagram", "./pins-state"], function(e, t, o, n) {
    function i(e) {
        if (void 0 === e) return t = 0;
        var t = 0,
            o = e.charAt(0),
            n = parseInt(e.charAt(2));
        switch (o) {
            case "A":
                t = n + 16;
                break;
            case "B":
                t = n;
                break;
            case "C":
                t = n + 8;
                break;
            case "D":
                t = n + 24
        }
        return t
    }
    var r = {},
        s = new Uint8Array(6);
    return r.setOutputBoolean = function(e, o) {
        if (t.isConnected()) {
            var n = i(e);
            s = o ? [62, 72, 0, n, 0, 0] : [62, 76, 0, n, 0, 0], t.sendPacket(s)
        }
    }, r.sendTrigger = function(e, o, n) {
        if (!t.isConnected()) return null;
        var r = i(e),
            s = i(n),
            a = [62, o, s, r, 0, 0];
        t.sendPacket(a, !0)
    }, r
}), define("simulation/api", ["./pins-state", "./api-events", "../blockly/audio", "./synth", "./tasks", "./interrupt-state", "./rts-command"], function(e, t, o, n, i, r, s) {
    function a() {
        t.requestReset.dispatch()
    }

    function l(e, t) {
        for (var o = e + ""; o.length < t;) o = "0" + o;
        return o
    }

    function c(e, t, o) {
        s.sendTrigger(e, t, o)
    }
    var u = {
        reset: function() {
            a()
        },
        pause: function(e) {
            i.parallel ? i.active().pause(e) : (t.waitStart.dispatch(), window.setTimeout(function() {
                t.waitEnd.dispatch()
            }, e))
        },
        pauseus: function(e) {
            return u
        },
        sleep: function(e) {
            t.waitStart.dispatch(), window.setTimeout(function() {
                t.waitEnd.dispatch()
            }, 2100 * e)
        },
        bin2ascii: function(e, t) {
            var o;
            switch (t) {
                case 100:
                    o = Math.floor(e / 100);
                    break;
                case 10:
                    o = Math.floor(e / 10) % 10;
                    break;
                default:
                    o = e % 10
            }
            return o + 48
        },
        eeprom: {
            read: function(t) {
                return e.eeprom.read(t)
            },
            write: function(t, o) {
                e.eeprom.write(t, o)
            }
        },
        i2c: {
            setup: function(e, t, o, n) {},
            read: function(t) {
                return e.i2c.read(t)
            },
            write: function(t, o) {
                e.i2c.write(t, o)
            }
        },
        pwm: {
            setup: function(t, o, n) {
                e.setOutputBoolean(t, 0 != n)
            }
        },
        serial: {
            read: function(e, t, o) {
                return 0
            },
            write: function(t, o, n) {
                return "txd" == t ? 0 : void e.setOutputBoolean(t, !1)
            },
            disconnect: function() {
                e.disconnected = !0
            },
            reconnect: function() {
                e.disconnected = !1
            },
            EUSART: {
                read: function() {
                    return 0
                },
                write: function(e, t) {},
                setup: function(e, t) {}
            },
            baud: function(e) {
                return 0
            }
        },
        debug: function() {
            return u
        },
        pin: {
            read: function(t) {
                return e.getPortBoolean(t)
            },
            write: function(t, o) {
                "string" == typeof t && (t = [t]), t.forEach(function(t) {
                    e.setOutputBoolean(t, o), s.setOutputBoolean(t, o)
                })
            },
            set: function(t) {
                e.setOutputBoolean(t, 1), s.setOutputBoolean(t, 1)
            },
            clear: function(t) {
                e.setOutputBoolean(t, 0), s.setOutputBoolean(t, 0)
            },
            invert: function(t) {
                var o = e.getPortBoolean(t);
                e.setOutputBoolean(t, !o), s.setOutputBoolean(t, !o)
            },
            toggle: function(t) {
                var o = e.getPortBoolean(t);
                e.setOutputBoolean(t, !o), s.setOutputBoolean(t, !o)
            },
            DDR: {
                read: function(t) {
                    return e.getDirsBoolean(t)
                },
                write: function(t, o) {
                    e.setDirsBoolean(t, o)
                },
                invert: function(t) {
                    var o = e.getDirsBoolean(t);
                    e.setDirsBoolean(t, !o)
                },
                toggle: function(t) {
                    var o = e.getDirsBoolean(t);
                    e.setDirsBoolean(t, !o)
                }
            },
            input: function(t, o) {
                e.setDirsBoolean(t, 0)
            },
            output: function(t, o) {
                e.setDirsBoolean(t, 1)
            },
            pulsout: function(t, o) {
                var n = e.getPortBoolean(t);
                e.setOutputBoolean(t, !n)
            },
            pulse: {
                write: function(t, o, n) {
                    var i = e.getPortBoolean(t);
                    e.setOutputBoolean(t, !i)
                },
                read: function(e) {},
                count: function(e, t) {}
            },
            sound: {
                beep: function(o, i, r) {
                    e.setOutputBoolean(o, !1), t.waitStart.dispatch(), n.playNote(i, r, function() {
                        t.waitEnd.dispatch()
                    })
                },
                playMP3: function(t, n) {
                    e.setOutputBoolean(t, !0);
                    var i;
                    if (n >= 1 && 255 >= n && (i = n), i) {
                        i = l(i, 4);
                        var r = "assets/MP3/" + i + ".mp3";
                        o.stop(), o.playFile(r)
                    }
                },
                setVolumeMP3: function(e) {
                    o.setVolume(e)
                },
                stopMP3: function() {
                    o.stop()
                },
                resumeMP3: function() {
                    o.resume()
                },
                pauseMP3: function() {
                    o.pause()
                },
                playTune: function(n, i) {
                    e.setOutputBoolean(n, !1);
                    var r;
                    switch (i) {
                        case 0:
                            r = "HappyBirthday";
                            break;
                        case 1:
                            r = "JingleBells";
                            break;
                        case 2:
                            r = "SilentNight";
                            break;
                        case 3:
                            r = "Rudolph"
                    }
                    if (r) {
                        var s = "assets/tunes/" + r + ".wav";
                        t.waitStart.dispatch(), o.playFile(s, function() {
                            t.waitEnd.dispatch()
                        })
                    }
                }
            },
            servo: {
                setup: function(t, o) {
                    e.setOutputBoolean(t, !1)
                },
                write: function(t, o) {
                    e.setOutputBoolean(t, !1)
                }
            },
            analog: {
                read: function(t) {
                    return e.getAnalog(t)
                },
                trigger: function(t) {
                    var o = 65;
                    return e.setInputBoolean(t, !1), c(t, o), e.getAnalog(t)
                }
            },
            temperature: {
                DS18B20: {
                    read: function(t) {
                        return e.getAnalog(t)
                    },
                    trigger: function(t) {
                        var o = 104;
                        return e.setInputBoolean(t, !1), c(t, o), e.getAnalog(t)
                    }
                }
            },
            infrared: {
                LED020: {
                    read: function(t) {
                        return e.setInputBoolean(t, !1), e.getAnalog(t)
                    },
                    write: function(t, o, n) {
                        e.setOutputBoolean(t, !1)
                    }
                }
            },
            ultrasonic: {
                SRF005: {
                    onePin: {
                        read: function(t) {
                            return e.getAnalog(t)
                        },
                        trigger: function(t) {
                            var o = 117;
                            return e.setInputBoolean(t, !1), c(t, o), e.getAnalog(t)
                        }
                    },
                    twoPin: {
                        read: function(t, o) {
                            return e.getAnalog(o)
                        },
                        trigger: function(t, o) {
                            var n = 118;
                            return e.setInputBoolean(o, !1), c(o, n, t), e.getAnalog(o)
                        }
                    }
                },
                SRF004: {
                    read: function(t, o) {
                        return e.setOutputBoolean(t, !1), e.setInputBoolean(o, !1), e.getAnalog(o)
                    }
                }
            }
        },
        port: {
            read: function(t) {
                return e.getPortByte(t)
            },
            write: function(t, o) {
                e.setPort(t, o)
            },
            DDR: {
                read: function(t) {
                    return e.getDirsByte(t)
                },
                write: function(t, o) {
                    e.setDirs(t, o)
                }
            }
        },
        pins: {
            get: function(t) {
                return e.getPortBoolean(t)
            },
            set: function(t, o) {
                e.setOutputBoolean(t, o)
            },
            toggle: function(t) {
                var o = e.getPortBoolean(t);
                e.setOutputBoolean(t, !o)
            },
            pulsout: function(t, o) {
                var n = e.getPortBoolean(t);
                e.setOutputBoolean(t, !n)
            },
            pins: {
                get: function(t) {
                    return e.getPortByte(t)
                },
                set: function(t, o) {
                    e.setPort(t, o)
                }
            },
            port: {
                get: function(t) {
                    return e.getPortByte(t)
                },
                set: function(t, o) {
                    e.setPort(t, o)
                }
            }
        },
        dirs: {
            get: function(t) {
                return e.getDirsBoolean(t)
            },
            set: function(t, o) {
                e.setDirsBoolean(t, o)
            },
            toggle: function(t) {
                var o = e.getDirsBoolean(t);
                e.setDirsBoolean(t, !o)
            },
            dirs: {
                get: function(t) {
                    return e.getDirsByte(t)
                },
                set: function(t, o) {
                    e.setDirs(t, o)
                }
            }
        },
        interrupt: {
            setup: function(e, t, o) {
                r.setup(e, t, o)
            }
        },
        tasks: {
            stopActive: function() {
                var e = i.active();
                e && e.stop()
            },
            suspend: function(e) {
                i.suspend(e)
            },
            resume: function(e) {
                i.resume(e)
            },
            restart: function(e) {
                i.restart(e)
            },
            reset: function() {
                a()
            }
        }
    };
    return u
}), define("simulation/range-parser", ["../blockly/generators/picaxebasic"], function(e) {
    return function(t, o) {
        function n(t) {
            return e.SimulationStartTag.replace("%1", t)
        }

        function i(t) {
            return e.SimulationEndTag.replace("%1", t)
        }

        function r(e, t) {
            var o = e.children;
            o.forEach(function(e) {
                if (void 0 != e) {
                    var o = p[e];
                    o.start -= t, o.end -= t, r(o, t)
                }
            })
        }

        function s(e, t) {
            for (var o = e;;) {
                var n = o.next;
                if (void 0 == n) break;
                o = p[n], o.start -= t, o.end -= t, r(o, t)
            }
        }

        function a(e) {
            var o = t.substring(0, e);
            o = o.replace(/ *$/, "");
            var n = o.match(/\n/g),
                i = n ? n.length : 0,
                r = o.length - o.lastIndexOf("\n");
            return {
                line: i,
                ch: r - 1
            }
        }
        for (var l, c = new RegExp("<n id='([0-9]+)'>", "g"), u = []; l = c.exec(t);) u.push(l[1]);
        var g = (e.SimulationEndTag, $($.parseHTML("<d>" + t + "</d>")[0])),
            p = {};
        return u.forEach(function(e) {
            var o = g.find("#" + e);
            p[e] = {
                parent: o.parent().attr("id"),
                children: o.children().toArray().map(function(e) {
                    return e.id
                }),
                next: o.next().attr("id"),
                prev: o.prev().attr("id"),
                start: t.indexOf(n(e)),
                end: t.indexOf(i(e))
            }
        }), u.forEach(function(e) {
            var t = p[e],
                o = n(e).length,
                a = i(e).length,
                l = o + a;
            t.end -= o;
            for (var c = t;;) {
                var u = c.parent;
                if (void 0 == u) break;
                c = p[u], c.end -= l, s(c, l)
            }
            r(t, o), s(t, l)
        }), t = t.replace(/<n id='[0-9]*'>/g, ""), t = t.replace(/<!--[0-9]*--><\/n>/g, ""), u.forEach(function(e) {
            var n = p[e];
            n.text = t.substring(n.start, n.end), o && (n.startVo = a(n.start), n.endVo = a(n.end - 1))
        }), p
    }
}), define("simulation/variables", [], function() {
    var e, t = {
        get: function(t) {
            return e[t]
        },
        set: function(t, o) {
            e[t] = o
        },
        reset: function() {
            e = new Uint16Array(28)
        }
    };
    return t.reset(), t
}), define("simulation/simulator", ["signals", "acorn", "../blockly/generators/javascript", "../blockly/generators/picaxebasic", "../project", "./api", "./range-parser", "./api-events", "./variables", "./js-transforms", "./tasks", "./interrupt-state"], function(e, t, o, n, i, r, s, a, l, c, u, g) {
    function p() {
        window.clearTimeout(R), R = null
    }

    function h(e) {
        var t = [];
        for (var o in e.properties) t[o] = e.properties[o].valueOf();
        return t
    }

    function d() {
        return function(e, t) {
            function n(t, o) {
                for (var i in t) {
                    var r = t[i],
                        s = typeof r;
                    if ("function" == s) {
                        var a = function(t, o) {
                            return function() {
                                var n = Array.prototype.map.apply(arguments, [function(e) {
                                    return e.hasOwnProperty("length") ? h(e) : e.valueOf()
                                }]);
                                return e.createPrimitive(o.apply(t, n))
                            }
                        }(t, r);
                        e.setProperty(o, i, e.createNativeFunction(a))
                    } else if ("object" == s) {
                        var l = e.createObject(e.OBJECT);
                        e.setProperty(o, i, l), n(r, l)
                    }
                }
            }
            var i = e.createObject(e.OBJECT);
            e.setProperty(t, "picaxe", i), n(r, i);
            var s = e.createObject(e.OBJECT);
            e.setProperty(t, "vars", s), n(l, s);
            var a = e.createObject(e.OBJECT);
            e.setProperty(t, "interruptState", a), n(g, a), e.setProperty(t, o.STEP_PREFIX, e.createNativeFunction(function(t, o) {
                return e.createPrimitive(y(t.valueOf(), o.valueOf()))
            })), e.setProperty(t, o.POSTSTEP_PREFIX, e.createNativeFunction(function(t, o) {
                return e.createPrimitive(_(t.valueOf(), o.valueOf()))
            })), e.setProperty(t, o.INNERSTEP_PREFIX, e.createNativeFunction(function(t) {
                return e.createPrimitive(v(t.valueOf()))
            })), e.setProperty(t, o.BREAK_COMMAND, e.createNativeFunction(function(t) {
                return e.createPrimitive(C(t.valueOf()))
            })), e.setProperty(t, o.WARNING_COMMAND, e.createNativeFunction(function(t) {
                return e.createPrimitive(E(t.valueOf()))
            }))
        }
    }

    function f(e) {
        U.blockHighlit.dispatch(e, I[e], N[e]), D && a.waitEnd.addOnce(function() {
            D = !1, M && w()
        }), m()
    }

    function m() {
        U.stepped.dispatch(), O = !0
    }

    function y(e, t) {
        if (t) return void f(e);
        var o = u.active(),
            n = o.openIds;
        if (n.length > 0) {
            var i = n[n.length - 1],
                r = I[e];
            r.prev != o.lastClosed && f(i)
        }
        n.push(e)
    }

    function v(e) {
        e = e.split(".")[0], f(e)
    }

    function _(e, t) {
        if (!t) {
            var o = u.active(),
                n = o.lastClosed;
            if (o.lastClosed = e, o.openIds.pop(), void 0 != n) {
                var i = I[e];
                if (-1 != i.children.indexOf(n + "")) return
            }
            f(e)
        }
    }

    function b() {
        D = !1, O = !0, M = !1
    }

    function C(e) {
        f(e), b(), U.hitBreakpoint.dispatch()
    }

    function E(e) {
        f(e), b(), U.hitWarning.dispatch(e)
    }

    function S() {
        n.SimulationTagsEnabled = !0;
        var e = i.getBasic();
        n.SimulationTagsEnabled = !1, N = s(e, !0);
        var t = i.getJS(!0);
        I = s(c.forRangeParser(t)), u.setup(t, d()), U.parsed.dispatch()
    }

    function T() {
        u.clear(), x(), p(), D = !1, O = !1, M = !1, l.reset(), U.resetted.dispatch()
    }

    function k() {
        u["switch"](H)
    }

    function A() {
        var e = u.active();
        if (e) {
            var t = e.step();
            t ? u.allComplete() ? (U.complete.dispatch(), T()) : k() : O ? (O = !1, k()) : A()
        }
    }

    function B() {
        a.waitStart.add(function() {
            p(), D = !0
        })
    }

    function x() {
        a.waitStart.removeAll(), a.waitEnd.removeAll()
    }

    function w() {
        u.active() || k(), A(), !M || D || O || (p(), R = window.setTimeout(function() {
            w()
        }, L))
    }
    var I, N, R, L, O = !1,
        D = !1,
        M = !1,
        P = 1e3,
        F = 5,
        H = 100;
    window.acorn = t;
    var U = {};
    return U.parsed = new e, U.stepped = new e, U.complete = new e, U.resetted = new e, U.hitBreakpoint = new e, U.hitWarning = new e, U.blockHighlit = new e, U.reset = function() {
        T()
    }, U.setSpeed = function(e) {
        e = Math.max(Math.min(e, 1), 0), L = F + P * e
    }, U.run = function() {
        u.ready || S(), M = !0, p(), B(), w()
    }, U.pause = function() {
        p(), x()
    }, U.step = function() {
        u.ready || S(), M = !1, p(), x(), u.active() || k(), A()
    }, U
}), define("simulation/controls", ["jquery", "signals", "../events"], function(e, t, o) {
    function n() {
        Array.prototype.forEach.apply(arguments, [function(e) {
            e.addClass("disabled")
        }])
    }

    function i() {
        Array.prototype.forEach.apply(arguments, [function(e) {
            e.removeClass("disabled")
        }])
    }

    function r() {
        n(c), i(l, u, g)
    }

    function s() {
        n(l, u), i(g, c)
    }

    function a(e) {
        var t = e / (f - d);
        y.speedSet.dispatch(t)
    }
    var l = e("#sim-run").click(function(e) {
            s(), y.runClicked.dispatch()
        }),
        c = e("#sim-pause").click(function(e) {
            r(), y.pauseClicked.dispatch()
        }),
        u = e("#sim-step").click(function(e) {
            n(c), i(l, u, g), y.stepClicked.dispatch()
        }),
        g = e("#sim-reset").click(function(e) {
            y.reset(), y.resetClicked.dispatch()
        }),
        p = e("#sim-speed"),
        h = e("#sim-speed-val"),
        d = 1,
        f = 10,
        m = 5;
    p.attr({
        min: d,
        max: f
    }).on("input", function() {
        var e = parseInt(p.val());
        h.text(e), a(e)
    }).val(m), h.text(m), o.inited.addOnce(function() {
        y.reset(), a(m)
    });
    var y = {};
    return y.runClicked = new t, y.pauseClicked = new t, y.stepClicked = new t, y.resetClicked = new t, y.speedSet = new t, y.reset = function() {
        n(c, g), i(l, u)
    }, y.setRunState = function() {
        s()
    }, y.pause = function() {
        r()
    }, y.clickRun = function() {
        l.hasClass("disabled") || l.click()
    }, y
}), define("simulation/model-data", ["jquery"], function(e) {
    var t = {};
    return t.load = function(t, o) {
        e.get("xml/PICAXE/PICAXE-" + t.toUpperCase() + ".XML", function(t) {
            var n = e(t),
                i = n.find("PinToFunctionMap Item"),
                r = {},
                s = !1;
            i.toArray().forEach(function(t) {
                var o = e(t),
                    n = o.find("Key string").text(),
                    i = o.find("Value ArrayOfString string").toArray().map(function(t) {
                        return e(t).text()
                    });
                r[n] = i
            }), o(r, s)
        })
    }, t
}), define("simulation/variables-ui", ["blocklylib", "jquery", "./variables"], function(e, t, o) {
    t(".variables table").hide();
    var n, i = t(".variables tbody"),
        r = {},
        s = !1;
    return r.start = function() {
        n = e.Variables.allVariables(e.mainWorkspace), s = n.length > 0, t(".variables table").toggle(s)
    }, r.hide = function() {
        t(".variables table").hide()
    }, r.update = function() {
        s && (i.empty(), n.forEach(function(e, t) {
            i.append("<tr><td>" + e + "</td><td>" + o.get(t) + "</td></tr>")
        }))
    }, r
}), define("signal-queue", [], function() {
    function e(e) {
        this.actions = 0, this.completeCallback = e;
        var t = this;
        this.add = function(e) {
            t.actions++, e.addOnce(t.remove)
        }, this.remove = function() {
            t.actions--, 0 === t.actions && (t.completeCallback && t.completeCallback(), t.completeCallback = null)
        }
    }
    return e
}), define("simulation/rts-controller", ["jquery", "signals", "./rts-serial", "../config", "../events", "../picaxe/models"], function(e, t, o, n, i, r) {
    function s(t) {
        e("#simulator").toggleClass("connected", t), a.parent().toggleClass("disabled", t), l.parent().toggleClass("disabled", !t), c.parent().toggleClass("disabled", t)
    }(n.isApp || n.isPicaxeEditor) && e("#simulator").addClass("rts"), i.serialAction.add(function() {
        console.log("rts disconnect"), o.disconnect()
    }), i.simulatorClosed.add(function() {
        console.log("rts disconnect"), o.disconnect()
    }), r.valueSet.add(function(e) {
        var t = "08M2,14M2,18M2,20M2,20X2,28X2,40X2".split(",");
        n.isApp || n.isPicaxeEditor ? o.enable(-1 != t.indexOf(e)) : o.enable(!1), n.isPicaxeEditor && o.enable(!1)
    }), o.connected.add(function() {
        s(!0)
    }), o.disconnected.add(function() {
        s(!1)
    }), o.enabled.add(function(t) {
        e("#simulator").toggleClass("rts", t)
    });
    var a = e("#sim-connect").click(function() {
            o.connect()
        }),
        l = e("#sim-disconnect").click(function() {
            o.disconnect()
        }),
        c = e("#sim-download");
    s(!1)
}), define("simulation/controller", ["blocklylib", "jquery", "./diagram", "./pins-state", "./simulator", "./controls", "./api-events", "../picaxe/models", "./model-data", "../events", "../mode", "../ui/menubar", "./variables-ui", "../project", "../settings/settings", "./synth", "../blockly/audio", "signal-queue", "../ui/tabs", "../basiceditor", "./tasks", "../block-editor/block-utils", "./rts-controller", "./rts-serial"], function(e, t, o, n, i, r, s, a, l, c, u, g, p, h, d, f, m, y, v, _, b, C, E, S) {
    function T() {
        o.reset(), h.lock(!1), i.reset(), r.reset(), p.hide(), f.stop()
    }

    function k() {
        h.lock(!0), f.start(), i.run()
    }

    function A() {
        T(), k(), r.setRunState()
    }
    var B, x = "sm-showsimulator";
    s.requestReset.add(A), o.knobInput.add(function(e, t) {
        n.setAnalog(e, Math.round(t))
    }), o.clickInput.add(function(e, t, i) {
        if (!(t || i && !n.disconnected)) {
            var r = n.getPortBoolean(e);
            "undefined" != typeof r && (r = !r, n.setInputBoolean(e, r), o.setPinInput(e, r))
        }
    }), o.clickRxd.add(function(e) {
        n.disconnected || A()
    }), o.clickReset.add(A), r.runClicked.add(k), r.pauseClicked.add(function() {
        i.pause(), m.stop(), f.stop()
    }), r.stepClicked.add(function() {
        h.lock(!0), f.stop(), f.start(), m.stop(), i.step()
    }), r.resetClicked.add(T), r.speedSet.add(function(e) {
        i.setSpeed(e)
    }), i.blockHighlit.add(function(e, o, n) {
        var i = b.getIds().indexOf(b.active().id);
        switch (B[i] = e, C.highlightBlocks(B), v.getActive()) {
            case v.BASIC_TAB:
                _.selectRange(n.startVo, n.endVo);
                break;
            case v.JS_TAB:
                t("#content_js").range(o.start, o.end)
        }
    }), i.complete.add(T), i.parsed.add(function() {
        o.reset(), n.reset(), p.start(), e.mainWorkspace.traceOn(!0), B = b.getIds().map(function() {
            return 0
        })
    }), i.stepped.add(function() {
        p.update()
    }), i.hitBreakpoint.add(function() {
        m.stop(), r.pause(), i.pause()
    }), i.hitWarning.add(function(t) {
        e.mainWorkspace.getBlockById(t).warning.setVisible(!0), T()
    }), i.resetted.add(function() {
        C.clearHighlight(), e.mainWorkspace.traceOn(!1), t("#content_js").range(0, 0), m.stop()
    }), n.dirSet.add(function(e, t) {
        t ? o.markPinAsOutput(e) : o.markPinAsInput(e)
    }), n.bitSet.add(function(e, t) {
        o.setPinOutput(e, t)
    }), n.inputBitSet.add(function(e, t) {
        o.setPinInput(e, t)
    }), t("#simulator .head button.close").click(function() {
        o.hide()
    }), c.modeChanged.add(function(e) {
        e == u.CODE_MODE && o.hide()
    }), o.visibleChanged.add(function(e) {
        g.setCheckbox(x, e), e || (c.simulatorClosed.dispatch(), T())
    });
    var w = new y(function() {
        g.setCheckbox(x, d.get(d.SETTING_SIMULATOR_VISIBLE))
    });
    w.add(c.menuReady), w.add(d.restored), a.valueSet.add(function(e) {
        o.updateModel(e), l.load(e, function(e, t) {
            o.setModelData(e), n.setupModel(e), S.disconnect()
        })
    })
}), require.config({
    shim: {
        bootstrap: {
            deps: ["jquery"]
        },
        blocklylib: {
            exports: "Blockly"
        },
        blob: {
            exports: "Blob"
        },
        "jquery-caret": {
            deps: ["jquery"]
        },
        "dropdown-select-plugin": {
            deps: ["jquery"]
        },
        "jquery-knob": {
            deps: ["jquery"]
        },
        "jquery-hotkeys": {
            deps: ["jquery"]
        },
        interpreter: {
            exports: "Interpreter",
            deps: ["acorn"]
        }
    },
    paths: {
        bootstrap: "../lib/bootstrap/js/bootstrap",
        blocklylib: "../lib/blockly/blockly_compressed",
        jquery: "../lib/jquery-1.11.3",
        blob: "../lib/Blob",
        FileSaver: "../lib/FileSaver",
        signals: "../lib/signals",
        requireLib: "../lib/require",
        "jquery-caret": "../lib/jquery.caret-1.5.2",
        "jquery-knob": "../lib/jquery.knob",
        "jquery-hotkeys": "../lib/jquery.hotkeys",
        "dropdown-select-plugin": "../lib/shared/jquery/dropdown-select-plugin",
        interpreter: "../lib/JS-Interpreter/interpreter",
        acorn: "../lib/JS-Interpreter/acorn_csp",
        "app-controller": "./controller/app-controller",
        "cloud-controller": "./controller/cloud-controller",
        "cloudweb-controller": "./controller/cloudweb-controller",
        "default-controller": "./controller/default-controller",
        "external-api": "./external-api",
        "data-utils": "../lib/shared/data-utils",
        storage: "../lib/shared/storage",
        "serial-ports": "../lib/shared/serial-ports",
        "data-model": "../lib/shared/data-model",
        "language-selection": "../lib/shared/language-selection",
        "lang-codes": "./lang-codes",
        "picaxe-serial": "../lib/shared/picaxe/serial",
        "command-queue": "../lib/shared/command-queue",
        connect: "../lib/shared/picaxe/connect",
        "break": "../lib/shared/picaxe/break",
        "write-page": "../lib/shared/picaxe/write-page",
        "send-cmd": "../lib/shared/picaxe/send-cmd",
        "file-parser": "../lib/shared/picaxe/file-parser",
        "download-progress": "../lib/shared/picaxe/download-progress",
        "firmware-lookup": "../lib/shared/picaxe/firmware-lookup",
        "signal-queue": "../lib/shared/signal-queue"
    }
}), require(["./boot", "jquery", "bootstrap", "jquery-caret", "jquery-knob", "jquery-hotkeys", "dropdown-select-plugin", "./simulation/simulator", "./simulation/controller"], function(e) {}), define("main", function() {}), define("picaxe/local", ["signals", "./models", "serial-ports"], function(e, t, o) {
    function n(e, n, s) {
        var a = [];
        n ? a.push("-s") : a.push("-c" + o.value), s && a.push("-f");
        var l = {
            saveData: e,
            args: a,
            picaxeType: t.value
        };
        r.deviceMessageStarted.dispatch(), chrome.runtime.sendNativeMessage(i, l, function(e) {
            console.log("response from proxy:"), console.dir(e), r.deviceMessageEnded.dispatch(e)
        })
    }
    var i = "com.picaxe.blockly.proxy",
        r = {};
    return r.deviceMessageStarted = new e, r.deviceMessageEnded = new e, r.uploadProgram = function(e) {
        n(e, !1)
    }, r.checkSyntax = function(e) {
        n(e, !0)
    }, r.clearMemory = function() {
        n("end", !1)
    }, r.checkConnection = function() {
        n("end", !1, !0)
    }, r
}), define("cloud/compiler", ["jquery", "../config", "../picaxe/models", "../events"], function(e, t, o, n) {
    var i = {};
    return i.send = function(i, r, s, a) {
        var l = r ? "check" : "compile";
        e.ajax(t.cloudUrl + "/compiler/" + l + ".json", {
            data: {
                code: i,
                platform: o.value.toLowerCase()
            },
            type: "POST",
            contentType: "application/x-www-form-urlencoded",
            dataType: "json",
            complete: function(e, t) {
                console.log("cloud compiler ok");
                var o = e.responseJSON;
                o && (r && "ok" != o.status || s(o))
            },
            error: function(e, t, o) {
                console.log("cloud compiler error " + t + "," + o), 422 == e.status ? (n.compilerError.dispatch(e.responseJSON.errors.join("\n")), a()) : a && a("CLOUD_NA")
            }
        })
    }, i
}), define("command-queue", [], function() {
    function e(e, t) {
        function o() {
            0 == list.length && console.log("CommandQueue complete"), list[0] instanceof Function || console.log("CommandQueue. next item must be a Function");
            var e = list.shift(),
                n = e.apply(this, arguments);
            if (n instanceof Array) {
                var i = n.map(function(e) {
                    var t = function(e) {
                        return e
                    };
                    return t.bind(0, e)
                });
                list = i.concat(list), o()
            } else {
                if (!(n instanceof Function)) return void console.error("CommandQueue. next item must return a Function or an Array");
                var r = n.bind(null, o, t);
                r()
            }
        }
        list = e.concat(), this.start = function() {
            o()
        }
    }
    return e
}), define("connect", [], function() {
    return function(e, t, o, n) {
        var i = {
            bitrate: t.baud,
            dataBits: 7 == t.dataBits ? "seven" : "eight",
            stopBits: 2 == t.stopBits ? "two" : "one",
            parityBit: "no",
            ctsFlowControl: !1
        };
        chrome.serial.connect(e, i, function(e) {
            if (null != chrome.runtime.lastError) n(Error("hardware-error"));
            else {
                var t = e.connectionId;
                chrome.serial.flush(t, function() {
                    o(t)
                })
            }
        })
    }
}), define("break", ["data-utils"], function(e) {
    return function(t, o, n) {
        function i(e) {
            r(), n(Error(e))
        }

        function r() {
            chrome.serial.onReceive.removeListener(s)
        }

        function s(n) {
            var s = n.data;
            a = a ? e.appendBuffer(a, s) : s;
            var h = a.byteLength;
            if (h >= p) {
                var d = new Uint8Array(a),
                    f = d.indexOf(u),
                    m = f + c;
                if (m > h) return;
                for (var y = f; m > y; y++)
                    if (d[y] != u) return;
                window.clearTimeout(l), d[m + 0] != g && (console.error("ERROR " + g + " expected after " + c + " x " + u), i("program-error"));
                var v = d[m + 1];
                r(), console.log("clearBreak"), chrome.serial.clearBreak(t, function(e) {
                    console.log("clearBreak result:" + e), o(v)
                })
            }
        }
        var a, l, c = 64,
            u = 240,
            g = 165,
            p = c + 1 + 1;
        chrome.serial.onReceive.addListener(s), console.log("setBreak"), chrome.serial.setBreak(t, function(e) {
            console.log("setBreak result:" + e)
        }), l = window.setTimeout(function() {
            i("hardware-error")
        }, 5e3)
    }
}), define("download-progress", ["signals"], function(e) {
    return new e
}), define("write-page", ["download-progress"], function(e) {
    return function(t, o, n, i, r) {
        function s() {
            var e = new Uint8Array(1);
            e[0] = u[p], chrome.serial.send(t, e.buffer, function(e) {
                e && !e.error || a("program-error")
            }), g = window.setTimeout(function() {
                a("program-error")
            }, 1e3)
        }

        function a(e) {
            l(), r(Error(e))
        }

        function l() {
            chrome.serial.onReceive.removeListener(c)
        }

        function c(t) {
            window.clearTimeout(g);
            var o = t.data,
                r = new Uint8Array(o);
            r[0] != u[p] ? a("program-error") : (p++, e.dispatch(p / h, n), p >= h ? (console.log("page written"), l(), i()) : s())
        }
        var u = new Uint8Array(o);
        console.log("writing page " + n);
        var g, p = 0,
            h = u.length;
        chrome.serial.onReceive.addListener(c), s()
    }
}), define("send-cmd", [], function() {
    return function(e, t, o, n, i) {
        console.log("send-cmd: 0x" + t.toString(16)), null === e && i(Error("hardware-error"));
        var r = new Uint8Array(1);
        r[0] = t, chrome.serial.send(e, r.buffer, function(e) {
            null != chrome.runtime.lastError ? i(Error("program-error")) : e ? e.error ? i(Error("program-error")) : o ? setTimeout(function() {
                n()
            }, 1) : n() : i(Error("program-error"))
        })
    }
}), define("file-parser", [], function() {
    function e() {
        this.targetTitle = null, this.minFirmware = null, this.maxFirmware = null, this.minExcludedFirmware = null, this.maxExcludedFirmware = null, this.baud = null, this.parity = null, this.dataBits = null, this.stopBits = null, this.useStop = null, this.stopCmd = null, this.startCmds = [], this.progPageUsed = null, this.pages = []
    }

    function t(e) {
        for (var t = 0, o = e.length - 1, n = 0; o >= 0; o--, n++) t = e[o] << 8 * n | t;
        return t
    }

    function o(e, t, o, n) {
        for (var i = [], r = 0; o > r; r++) i.push(e.subarray(t + n * r, t + n * (r + 1)));
        return i
    }

    function n(e, t, o, n) {
        for (var i = [], r = --o; r > -1; r--) i.push(e.subarray(t + n * r, t + n * (r + 1)));
        return i
    }
    var i = {};
    return i.parse = function(i) {
        var r = new Uint8Array(i),
            s = new e;
        s.targetTitle = Array.prototype.map.apply(r.subarray(0, 32), [function(e) {
            return String.fromCharCode(e)
        }]).join(""), s.minFirmware = r[32], s.maxFirmware = r[33], s.minExcludedFirmware = r[34], s.maxExcludedFirmware = r[35], s.baud = t(r.subarray(48, 52)), s.parity = 1 == r[52], s.dataBits = r[53], s.stopBits = r[54], s.useStop = 1 == r[64], s.stopCmd = r[65];
        var a = r[66];
        a && (s.startCmds = Array.prototype.map.apply(r.subarray(67, 67 + a), [function(e) {
            return e
        }]));
        var l = 256 * r[80],
            c = 256 * r[83],
            u = 256 * r[86],
            g = r[81],
            p = r[82],
            h = r[84],
            d = r[85],
            f = (r[87], r[88]),
            m = 256;
        return s.pages = n(r, m, p, l), m += g * l, s.pages = s.pages.concat(o(r, m, d, c)), m += h * c, s.pages = s.pages.concat(o(r, m, f, u)), s
    }, i
}), define("firmware-lookup", [], function() {
    function e(e) {
        var t = (240 & e) >> 4,
            o = 10 > (15 & e);
        switch (t) {
            case 0:
                return "UNKNOWN";
            case 1:
                return o ? "UNKNOWN" : "PICAXE-08M2LE";
            case 2:
                return o ? "PICAXE-18" : "PICAXE-18M2";
            case 3:
                return o ? "PICAXE-28" : "PICAXE-20M";
            case 4:
                return o ? "PICAXE-08" : "PICAXE-08M2";
            case 5:
                return o ? "PICAXE-18A" : "PICAXE-18M";
            case 6:
                return o ? "PICAXE-28A" : "PICAXE-14M2";
            case 7:
                return o ? "PICAXE-28X" : "PICAXE-40X";
            case 8:
                return o ? "PICAXE-18X" : "PICAXE-20M2";
            case 9:
                return o ? "PICAXE-08M" : "PICAXE-14M";
            case 10:
                return o ? "PICAXE-28X1 (40X1)" : " UNKNOWN";
            case 11:
                return "PICAXE-28X2 (40X2)";
            case 12:
                return o ? "PICAXE-20X2" : "UNKNOWN";
            case 13:
                return o ? "UNKNOWN" : "PICAXE-18M2+";
            case 14:
                return "UNKNOWN";
            case 15:
                return "UNKNOWN"
        }
        return "UNKNOWN"
    }
    return e
}), define("picaxe-serial", ["signals", "serial-ports", "command-queue", "connect", "break", "write-page", "send-cmd", "file-parser", "download-progress", "firmware-lookup"], function(e, t, o, n, i, r, s, a, l, c) {
    var u, g, p, h = {};
    return h.connected = new e, h.disconnected = new e, h.downloadProgress = new e, h.messageLogged = new e, l.add(function(e, t) {
        h.downloadProgress.dispatch(t * (1 / g) + e / g)
    }), h.isConnected = function() {
        return null != u
    }, h.checkFirmware = function(e, r, s) {
        function a(e) {
            var o;
            switch (e.message) {
                case "hardware-error":
                    o = [t.value]
            }
            h.disconnect(), s && s(e.message, o)
        }
        var l = [function() {
                return n.bind(0, e, {
                    baud: 4800,
                    dataBits: 8,
                    stopBits: 1
                })
            }, function(e) {
                return u = e, i.bind(0, u)
            }, function(e) {
                return function() {
                    h.disconnect(), r && r(c(e))
                }
            }],
            g = new o(l, a);
        g.start()
    }, h.download = function(e, l, d, f) {
        function m(e) {
            var o;
            switch (e.message) {
                case "hardware-error":
                    o = [t.value];
                    break;
                case "firmware-mismatch":
                    o = [c(p), v.targetTitle]
            }
            h.messageLogged.dispatch(e.message, o, !0), h.disconnect(), f && f()
        }

        function y(e, t) {
            p >= v.minFirmware && p <= v.maxFirmware && !(p >= v.minExcludedFirmware && p <= v.maxExcludedFirmware) ? e() : t(Error("firmware-mismatch"))
        }
        var v = a.parse(l);
        g = v.pages.length, l = null;
        var _ = [function() {
                return n.bind(0, e, v)
            }, function(e) {
                return u = e, i.bind(0, u)
            }, function(e) {
                return h.connected.dispatch(e), p = e, y
            }, function() {
                return h.messageLogged.dispatch("program-start"), v.startCmds.map(function(e) {
                    return s.bind(0, u, e, !0)
                })
            }, function() {
                return v.pages.map(function(e, t) {
                    return r.bind(0, u, e, t)
                })
            }, function() {
                return v.useStop ? s.bind(0, u, v.stopCmd, !1) : function(e) {
                    e()
                }
            }, function() {
                return function() {
                    h.disconnect(), d && d()
                }
            }],
            b = new o(_, m);
        b.start()
    }, h.disconnect = function() {
        u && chrome.serial.disconnect(u, function(e) {
            null != chrome.runtime.lastError ? console.error(chrome.runtime.lastError) : (u = null, h.disconnected.dispatch())
        })
    }, h
}), define("app-controller", ["jquery", "./mode", "./backup", "./basiceditor", "./project", "./picaxe/local", "./picaxe/models", "serial-ports", "./messages", "./lang", "./controller/file-project-commands", "./cloud/files", "./cloud/compiler", "./ui/menubar", "./ui/modals", "./events", "./ui/tabs", "./picaxe/debug/comms", "./picaxe/debug/ui", "picaxe-serial", "./settings/settings", "signal-queue", "data-utils", "storage", "./simulation/controls", "./blockly/io", "../lib/shared/filesystem"], function(e, t, o, n, i, r, s, a, l, c, u, g, p, h, d, f, m, y, v, _, b, C, E, S, T, k, A) {
    function B() {
        return t.isBlocks()
    }

    function x() {
        B() && n.setContent(i.getBasic())
    }

    function w() {
        return null !== a.value ? !0 : (l.show(c.get("SELECT_PORT"), !0), !1)
    }

    function I() {
        w() && (x(), d.showProgressModal(c.get("DOWNLOADING")), r.uploadProgram(n.getContent()))
    }

    function N() {
        w() && (d.showProgressModal(c.get("DOWNLOADING")), r.clearMemory())
    }

    function R() {
        d.showProgressModal(c.get("CHECKING"))
    }

    function L() {
        x(), R(), r.checkSyntax(n.getContent())
    }

    function O() {
        B() ? u.newProject() : u.newFile()
    }

    function D() {
        B() ? u.openProject() : u.openFile()
    }

    function M() {
        B() ? u.saveProject() : u.saveFile()
    }

    function P() {
        return b.get(b.SETTING_ONLINE_COMPILE)
    }

    function F(e) {
        d.hideProgressModal(), e && l.show(c.get(e), !0)
    }

    function H() {
        return t.isBlocks() ? i.getBasic() : n.getContent()
    }

    function U() {
        return "function" != typeof chrome.serial.setBreak ? (d.showMessageModal(c.get("WARNING"), c.get("setbreak-update"), c.get("CLOSE_ACTION"), null, function() {}), !1) : !0
    }

    function V(e) {
        function t() {
            _.downloadProgress.remove(n), _.messageLogged.remove(i)
        }

        function o(e) {
            t(), F(e)
        }
        if (U() && w()) {
            var n, i;
            d.showProgressModal(c.get("DOWNLOADING"), function(e) {
                n = function(t) {
                    e(t)
                }, _.downloadProgress.add(n)
            }, function(e) {
                i = function(t, o, n) {
                    e(t, o), n && f.compilerError.dispatch(c.get(t, o))
                }, _.messageLogged.add(i)
            }), p.send(e, !1, function(e) {
                if (!e.axe) return void o("MISSING_BINARY_DATA");
                var n = E.base64ToArrayBuffer(e.axe);
                _.download(a.value, n, function() {
                    t(), d.hideProgressModal(), l.showSuccess(c.get("COMPILE_SUCCESS"))
                }, o)
            }, o)
        }
    }

    function W() {
        v.enable(), w() && y.connect(a.value, s.value)
    }

    function G() {
        if (P()) {
            if (!U()) return;
            R(), p.send(H(), !0, function(e) {
                d.hideProgressModal(), l.showSuccess(c.get("SYNTAX_OK"))
            }, F)
        } else L()
    }

    function K() {
        P() ? V(H()) : I()
    }

    function j(e) {
        b.set(b.SETTING_ONLINE_COMPILE, e), b.save()
    }
    e("body").addClass("local"), chrome.runtime.getBackgroundPage(function(e) {
        S.setProxies(e.getStorage, e.setStorage), chrome.app.window.current().onClosed.addListener(function() {
            o.save()
        })
    }), e(document).bind("keydown", "f4", G), e(document).bind("keydown", "f5", K), e(document).bind("keydown", "f6", W), e(document).bind("keydown", "ctrl+f5", T.clickRun), e(document).bind("keydown", "ctrl+n", O), e(document).bind("keydown", "ctrl+o", D), e(document).bind("keydown", "ctrl+s", M), e(document).bind("keydown", "cmd+n", O), e(document).bind("keydown", "cmd+o", D), e(document).bind("keydown", "cmd+s", M), f.serialAction.add(function() {
        y.disconnect(), v.disable()
    }), h.itemClicked.add(function(e) {
        switch (e) {
            case "px-m-syntax":
                G();
                break;
            case "px-m-clear-memory":
                f.serialAction.dispatch(), P() ? V("end") : N();
                break;
            case "px-m-upload":
            case "px-m-download":
                f.serialAction.dispatch(), K();
                break;
            case "px-m-debug":
                f.serialAction.dispatch(), W();
                break;
            case "px-pm-openfromcloud":
            case "px-fm-openfromcloud":
                g.showOpenFileDialog();
                break;
            case "px-pm-savetocloud":
            case "px-fm-savetocloud":
                g.showSaveFileAsDialog();
                break;
            case "px-sm-checktype":
                f.serialAction.dispatch(), P() ? _.checkFirmware(a.value, function(e) {
                    l.showSuccess(c.get("CONNECT_SUCCESS", [e]))
                }, function(e, t) {
                    l.show(c.get(e, t), !0)
                }) : (R(), r.checkConnection())
        }
    }), e("#sim-download").click(function() {
        function e() {
            _.downloadProgress.remove(o), _.messageLogged.remove(n)
        }

        function t(t) {
            e(), F(t)
        }
        if (U() && w()) {
            var o, n;
            d.showProgressModal(c.get("DOWNLOADING"), function(e) {
                o = function(t) {
                    e(t)
                }, _.downloadProgress.add(o)
            }, function(e) {
                n = function(t, o, n) {
                    e(t, o), n && f.compilerError.dispatch(c.get(t, o))
                }, _.messageLogged.add(n)
            });
            var i = s.value,
                r = "./assets/connect/" + i + "_connect.axe";
            A.getLocalFileAs(r, "arraybuffer", function(o) {
                _.download(a.value, o, function() {
                    e(), d.hideProgressModal(), l.showSuccess(c.get("COMPILE_SUCCESS"))
                }, t)
            })
        }
    });
    var Y = !0,
        X = "sm-onlinecompile";
    h.settingsMenuShown.add(function(e) {
        a.requestList(function(e, t) {
            h.makePortsMenu(e, Y ? t : -1), Y = !1
        })
    }), h.portSelected.add(function(e) {
        a.set(e)
    }), h.checkboxSet.add(function(e, t) {
        switch (e) {
            case X:
                j(t)
        }
    });
    var z = new C(function() {
        if (-1 != window.navigator.appVersion.toLowerCase().indexOf("cros")) {
            var t = e("#px-" + X).parent();
            t.addClass("disabled"), h.setCheckbox(X, !0), j(!0)
        } else h.setCheckbox(X, b.get(b.SETTING_ONLINE_COMPILE))
    });
    z.add(f.menuReady), z.add(b.restored), r.deviceMessageStarted.add(function() {
        l.clear()
    }), r.deviceMessageEnded.add(function(e) {
        if (d.hideProgressModal(), e)
            if (e.error && e.error.length > 0) f.compilerError.dispatch(e.error);
            else {
                var t = e.output,
                    o = "PASS - firmware ",
                    n = "Compiled successfully.",
                    i = t.indexOf(o);
                if (-1 != i) {
                    var r = t.substring(t.indexOf(o) + o.length);
                    l.showSuccess(c.get("CONNECT_SUCCESS", [r]))
                } else if (-1 != t.indexOf(n))
                    if (-1 != t.indexOf("PASS")) l.showSuccess(c.get("COMPILE_SUCCESS"));
                    else {
                        var s = c.get("SYNTAX_OK"),
                            a = t.split("\n");
                        a.forEach(function(e, t) {
                            e == n && (s = c.get("COMPILE_SUCCESS") + "\n" + a[t + 1])
                        }), l.showSuccess(s)
                    }
            } else window.setTimeout(function() {
            d.showMessageModal(c.get("NO_SOFTWARE_HEAD"), c.get("NO_SOFTWARE_BODY"), c.get("CLOSE_ACTION"), null, function() {})
        }, 500)
    }), a.init()
}), define("default-controller", ["jquery", "./controller/file-project-commands", "./ui/menubar"], function(e, t, o) {
    o.itemClicked.add(function(e) {
        switch (e) {
            case "px-fm-new":
                t.newFile();
                break;
            case "px-pm-new":
                t.newProject();
                break;
            case "px-pm-save":
                t.saveProject();
                break;
            case "px-pm-print":
                window.print();
                break;
            case "px-fm-save":
                t.saveFile();
                break;
            case "px-fm-open":
                t.openFile();
                break;
            case "px-pm-open":
                t.openProject();
                break;
            case "px-pm-merge":
                t.mergeProject();
                break;
            case "px-pm-export":
                break;
            case "px-em-cut":
                t.editorCut();
                break;
            case "px-em-copy":
                t.editorCopy();
                break;
            case "px-em-paste":
                t.editorPaste();
                break;
            case "px-em-select-all":
                t.editorSelectAll();
                break;
            case "px-em-undo":
                t.editorUndo();
                break;
            case "px-em-redo":
                t.editorRedo()
        }
    })
}), define("cloud/../../lib/shared/storage", [], function() {
    var e, t, o = "undefined" != typeof chrome && null != chrome.storage;
    return {
        setProxies: function(o, n) {
            e = n, t = o
        },
        set: function(t, n) {
            if (console.log("storage set", o), o) e ? e(t, n) : chrome.storage.local.set(t, n);
            else {
                if (!window.localStorage) return void console.warn("no local storage available");
                for (var i in t) window.localStorage.setItem(i, t[i]);
                n && n()
            }
        },
        get: function(e, n) {
            if (o) t ? t(e, n) : chrome.storage.local.get(e, n);
            else {
                if (!window.localStorage) return void console.warn("no local storage available");
                var i = {};
                e.forEach(function(e) {
                    var t = window.localStorage.getItem(e);
                    "true" == t ? t = !0 : "false" == t && (t = !1), i[e] = t
                }), n(i)
            }
        }
    }
}), define("cloud/user", ["signals", "./request", "../events", "../config", "../ui/modals", "../lang", "../../lib/shared/storage"], function(e, t, o, n, i, r, s) {
    function a() {
        t("/users/current.json", {
            complete: function(e) {
                l(e.responseJSON)
            }
        })
    }

    function l(e) {
        var t = e ? e.fullname : null;
        g = null != t, p.userIdentified.dispatch(t)
    }

    function c(e, o) {
        t("/users/sign_in.json", {
            type: "POST",
            contentType: "application/x-www-form-urlencoded",
            data: {
                user: {
                    email: e,
                    password: o
                }
            },
            complete: function(e, t) {
                l(e.responseJSON)
            },
            error: function(e, t, o) {
                var n = e.responseJSON ? e.responseJSON.error : null;
                n || (n = r.get("LOGIN_ERROR_BODY")), window.setTimeout(function() {
                    i.showMessageModal(r.get("LOGIN_ERROR_TITLE"), n, r.get("OK_ACTION"), null)
                }, 500)
            }
        })
    }
    var u = "cloudEmail";
    o.inited.addOnce(function() {
        a()
    });
    var g = !1,
        p = {};
    return p.userIdentified = new e, p.isLoggedIn = function() {
        return g
    }, p.editUser = function() {
        var e = "/users/edit";
        n.isApp ? window.open(n.cloudUrl + e) : window.location.href = e
    }, p.login = function() {
        n.isApp && s.get([u], function(e) {
            var t = e[u],
                o = t ? 'value="' + t + '"' : 'placeholder="you@email.com',
                a = '<div class="form-group">  <label for="login-email">' + r.get("EMAIL") + '</label>  <input type="email" class="form-control" id="login-email" ' + o + ' "></div><div class="form-group">  <label for="login-password">' + r.get("PASSWORD") + '</label>  <input type="password" class="form-control" id="login-password" placeholder="Password"></div><div class="link"><a href="' + n.cloudUrl + '" target="_blank">' + r.get("LOGIN_SITE_LINK") + "</a></div>";
            i.showMessageModal(r.get("LOGIN_TITLE"), a, r.get("LOGIN_ACTION"), r.get("CANCEL_ACTION"), function() {
                var e = $("#login-email").val(),
                    t = $("#login-password").val(),
                    o = {};
                o[u] = e, s.set(o, function() {}), c(e, t)
            })
        })
    }, p.gotoLogInPage = function() {
        window.location.href = n.cloudUrl
    }, p.logoff = function() {
        t("/users/sign_out.json", {
            data: JSON.stringify({}),
            type: "DELETE",
            complete: function(e, t) {
                g = !1, n.isApp ? p.userIdentified.dispatch(null) : p.gotoLogInPage()
            }
        })
    }, p
}), define("cloud-controller", ["jquery", "./mode", "./events", "./config", "./cloud/files", "./cloud/user", "./project", "./basiceditor", "./ui/ui", "./controller/picaxe-commands"], function(e, t, o, n, i, r, s, a, l, c) {
    function u() {
        return t.isBlocks()
    }
    e("body").addClass("cloud"), e("#px-um-logout").click(function() {
        r.logoff()
    }), e("#px-um-edit").click(function() {
        r.editUser()
    }), e("#px-um-login").click(function() {
        r.login()
    }), i.fileSelected.add(function(e, t) {
        s.dirty = !1, a.dirty = !1, c.selectModel(t, !0), u() ? s.setFromXml(e) : a.setContent(e)
    }), r.userIdentified.add(function(t) {
        var o = null != t;
        n.isApp || o ? (e("body").toggleClass("signed-in", o), l.setUserName(t)) : r.gotoLogInPage()
    }), o.modeChanged.add(function() {
        i.reset()
    }), o.menuReady.addOnce(function() {
        i.init()
    })
}), define("cloudweb-controller", ["jquery", "../lib/shared/filesystem", "./ui/menubar", "./cloud/files", "./cloud/compiler", "./events", "./messages", "./lang", "./project", "./mode", "./basiceditor", "data-utils", "./controller/file-project-commands"], function(e, t, o, n, i, r, s, a, l, c, u, g, p) {
    function h() {
        o.enableItems(["fm-save", "pm-save"], !1)
    }

    function d() {
        return c.isBlocks() ? l.getBasic() : u.getContent()
    }

    function f(e) {
        e && s.show(a.get(e), !0)
    }
    e("body").addClass("cloudweb"), o.itemClicked.add(function(e) {
        switch (e) {
            case "px-m-syntax":
                i.send(d(), !0, function(e) {
                    s.showSuccess(a.get("SYNTAX_OK"))
                }, f);
                break;
            case "px-m-upload":
            case "px-m-download":
                i.send(d(), !1, function(e) {
                    if (!e.axe) return void(failure && s.show(a.get("MISSING_BINARY_DATA"), !0));
                    var o = g.base64ToArrayBuffer(e.axe),
                        i = n.getFileName();
                    i = i.replace(" ", ""), t.save(o, "application/x-picaxe-object", i, function() {}, function() {})
                }, f);
                break;
            case "px-fm-new":
            case "px-pm-new":
                n.showCreateFileDialog();
                break;
            case "px-pm-save":
            case "px-fm-save":
                n.saveFile();
                break;
            case "px-fm-open":
            case "px-pm-open":
                n.showOpenFileDialog();
                break;
            case "px-pm-saveas":
            case "px-fm-saveas":
                n.showSaveFileAsDialog();
                break;
            case "px-pm-exportlocal":
                p.saveProject();
                break;
            case "px-fm-exportlocal":
                p.saveFile();
                break;
            case "px-fm-importlocal":
                p.openFile();
                break;
            case "px-pm-importlocal":
                p.openProject();
                break;
            case "px-em-cut":
                p.editorCut();
                break;
            case "px-em-copy":
                p.editorCopy();
                break;
            case "px-em-paste":
                p.editorPaste();
                break;
            case "px-em-select-all":
                p.editorSelectAll();
                break;
            case "px-em-undo":
                p.editorUndo();
                break;
            case "px-em-redo":
                p.editorRedo()
        }
    }), n.fileSelected.add(function(e, t) {
        o.enableItems(["pm-save", "fm-save"], !0)
    }), r.modeChanged.add(function() {
        h()
    }), r.menuReady.addOnce(function() {
        h()
    })
}), define("external-api/clipboard", ["blocklylib", "../events", "../block-editor/block-clipboard", "../mode", "../ui/tabs"], function(e, t, o, n, i) {
    function r() {
        return n.isBlocks() && i.getActive() == i.BLOCKS_TAB && !e.WidgetDiv.isVisible()
    }

    function s() {
        return e.Xml.domToText(e.clipboardXml_).replace(/xmlns="[^"]*" /, "")
    }

    function a(t) {
        return t = '<xml xmlns="http://www.w3.org/1999/xhtml">' + t + "</xml>", e.Xml.textToDom(t).firstChild
    }

    function l(o) {
        e.clipboardXml_ = a(o), t.clipboardSet.dispatch()
    }

    function c(t) {
        e.mainWorkspace.paste(a(t))
    }
    var u = "undefined" != typeof eoWebBrowser;
    t.clipboardSet.add(function() {
        u && eoWebBrowser.extInvoke("onCutCopy", [s()])
    });
    var g = {};
    return g.CutBlock = function() {
        o.cut()
    }, g.CopyBlock = function() {
        o.copy()
    }, g.PasteBlock = function() {
        o.paste()
    }, g.CutXML = function() {
        return r() ? (o.cut(), s()) : void 0
    }, g.CopyXML = function() {
        return r() ? (o.copy(), s()) : void 0
    }, g.PasteXML = function(e) {
        r() && (l(e), o.paste())
    }, g.InsertXML = function(e) {
        r() && c(e)
    }, g.GetClipboard = function() {
        return r() ? s() : void 0
    }, g.SetClipboard = function(e) {
        r() && l(e)
    }, g.CanPaste = function() {
        return r() ? null !== e.clipboardXml_ : void 0
    }, g
}), define("external-api/print", ["jquery"], function(e) {
    var t = {};
    return t.SetPrintHeader = function(t) {
        e("header").text(t)
    }, t.SetPrintFooter = function(t) {
        e("footer").text(t)
    }, t.Print = function() {
        window.print()
    }, t.ShowPrintStyle = function(t) {
        e("#print-style").attr("media", t ? "all" : "print")
    }, t
}), define("external-api/breakpoints", ["../block-editor/breakpoints"], function(e) {
    var t = "undefined" != typeof eoWebBrowser;
    e.breakpointSet.add(function(e, o) {
        t && eoWebBrowser.extInvoke("onBreakpointSet", [e, o])
    });
    var o = {};
    return o.BreakpointSet = function(t) {
        e.add(t)
    }, o.BreakpointClear = function(t) {
        e.remove(t)
    }, o.BreakpointClearAll = function() {
        e.removeAll()
    }, o
}), define("external-api/settings", ["../settings/settings"], function(e) {
    function t(t, o) {
        e.set(t, o), e.use(t)
    }
    var o = {};
    return o.EditorSmartIndent = function(o) {
        t(e.SETTING_SMART_INDENT, o)
    }, o.EditorFontSize = function(o) {
        t(e.SETTING_FONT_SIZE, o)
    }, o.EditorTabsToSpaces = function(o) {
        t(e.SETTING_INDENT_WITH_TABS, o)
    }, o.EditorTabSize = function(o) {
        t(e.SETTING_TAB_SIZE, o)
    }, o.EditorWrapLines = function(o) {
        t(e.SETTING_LINE_WRAPPING, o)
    }, o.EditorLineNumbers = function(o) {
        t(e.SETTING_LINE_NUMBERS, o)
    }, o.ShowGrid = function(o) {
        t(e.SETTING_GRID, o)
    }, o.EnableSound = function(o) {
        t(e.SETTING_SOUND, o)
    }, o.ShowTrashCanAtTop = function(o) {
        t(e.SETTING_TRASH_AT_TOP, o)
    }, o
}), define("external-api", ["blocklylib", "jquery", "./mode", "./lang", "./project", "./basiceditor", "./picaxe/models", "./picaxe/debug/ui", "./ui/modals", "./ui/tabs", "./block-editor/block-utils", "./config", "./utils", "./events", "./simulation/diagram", "./block-editor/block-history", "./external-api/clipboard", "./external-api/print", "./external-api/breakpoints", "./external-api/settings", "./settings/settings-ui", "./settings/pin-names-ui", "./settings/pin-names", "./blockly/callbacks", "./blockly/io", "./simulation/rts-serial"], function(e, t, o, n, i, r, s, a, l, c, u, g, p, h, d, f, m, y, v, _, b, C, E, S, T, k) {
    function A() {
        return o.isBlocks() && c.getActive() == c.BLOCKS_TAB
    }

    function B() {
        var o = {
                text: n.get("EDIT_TOOLBOX"),
                enabled: !0,
                callback: function() {
                    w && eoWebBrowser.extInvoke("onCMEditToolbox", [I.GetToolboxXML()])
                }
            },
            i = {
                text: n.get("INSERT_CUSTOM_BLOCK"),
                enabled: !0,
                callback: function() {
                    w && eoWebBrowser.extInvoke("onCMInsertBlock")
                }
            };
        t(".blocklyToolboxDiv").mousedown(function(t) {
            e.isRightButton(t) && e.ContextMenu.show(t, [o, i])
        })
    }

    function x() {
        h.requestBlocklyRedraw.dispatch()
    }
    t("body").addClass("pe");
    var w = "undefined" != typeof eoWebBrowser;
    S.onRunWizard = function(e) {
        w && eoWebBrowser.extInvoke("onRunWizard", [e.type])
    }, S.onOpenSnippet = function(e) {
        w && eoWebBrowser.extInvoke("onOpenSnippet", [e.type, e.id])
    }, h.inited.addOnce(function() {
        B(), w && eoWebBrowser.extInvoke("onBlocklyReady", [])
    }), h.blockAdded.add(function(e) {
        w && eoWebBrowser.extInvoke("onNewBlockAdded", [e.type, e.id])
    }), h.simulatorClosed.add(function() {
        w && eoWebBrowser.extInvoke("onSimulatorClosed", [])
    }), h.debugClosed.add(function() {
        w && eoWebBrowser.extInvoke("onDebugClosed", [])
    }), h.rtsConnect.add(function() {
        w && eoWebBrowser.extInvoke("onRtsConnect", [])
    }), h.rtsDisconnect.add(function() {
        w && eoWebBrowser.extInvoke("onRtsDisconnect", [])
    }), h.rtsProgram.add(function() {
        w && eoWebBrowser.extInvoke("onRtsProgram", [])
    });
    var I = {};
    return I.GetProjectXML = function() {
        return dirty = !1, i.getXml()
    }, I.SetProjectXML = function(e, t) {
        var o = t ? function(e, t) {
            l.showMessageModal(n.get("MERGE_PROJECT"), n.get("MERGE_PROMPT"), n.get("MERGE_ACTION"), n.get("DONT_MERGE_ACTION"), e, t)
        } : null;
        i.setFromXml(e, o)
    }, I.GetBASIC = function(e) {
        return i.getBasic(e)
    }, I.New = function() {
        i.discard(), r.setContent(i.getBasic()), E.reset()
    }, I.Lock = function() {
        i.lock(!0)
    }, I.Unlock = function() {
        i.lock(!1)
    }, I.ShowProgress = function(e) {
        e ? l.showProgressModal(n.get("DOWNLOADING")) : l.hideProgressModal()
    }, I.SetPICAXEType = function(e) {
        s.set(e), T.selectType(e)
    }, I.GetPICAXEType = function() {
        return s.value
    }, I.HighlightBlock = function(e) {
        I.HighlightBlocks([e])
    }, I.HighlightBlocks = function(e) {
        u.highlightBlocks(e)
    }, I.HighlightClear = function() {
        u.clearHighlight()
    }, I.HighlightDisableBlock = function(e) {
        u.disableAllExcept(e)
    }, I.HighlightDisableClear = function() {
        u.clearDisabled();
    }, I.GetVersion = function() {
        return "v" + g.version
    }, I.IsDirty = function() {
        return i.dirty
    }, I.ShowToolbox = function(e) {
        t(".blocklyToolboxDiv").toggle(e), x()
    }, I.ShowTabs = function(e) {
        t("body").toggleClass("no-tabs", !e), x()
    }, I.ShowToolbar = function(e) {
        t("body").toggleClass("pe", !e), I.ShowTabs(e)
    }, I.ShowJs = function(e) {
        t("body").toggleClass("js-tab", !e)
    }, I.ShowSearch = function(e) {
        t("body").toggleClass("pe-search", e)
    }, I.ShowSimulator = function(e) {
        e ? d.show() : d.hide(), x()
    }, I.ShowDebug = function(e) {
        e ? (a.enable(), a.apiConnect(s.value)) : a.disable(), x()
    }, I.apiDebugPacket = function(e) {
        a.apiDebugPacket(e)
    }, I.RtsConnected = function() {
        k.apiConnect()
    }, I.RtsDisconnected = function() {
        k.apiDisconnect()
    }, I.ShowPinNameSettings = function() {
        C.show()
    }, I.ShowCodeSettings = function() {
        b.showCodeSettings()
    }, I.ShowBlocksSettings = function() {
        b.showBlocksSettings()
    }, I.DisableZoomControl = function() {
        e.mainWorkspace.zoomControls_ && (e.mainWorkspace.zoomControls_.dispose(), e.mainWorkspace.zoomControls_ = null)
    }, I.GetToolboxXML = function() {
        return e.Xml.domToText(e.mainWorkspace.options.languageTree)
    }, I.SetToolboxXML = function(t) {
        var o = e.Xml.textToDom(t);
        o.setAttribute("edited", "true"), e.mainWorkspace.updateToolbox(o)
    }, I.TestToolboxXML = function() {
        var e = I.GetToolboxXML();
        I.SetToolboxXML(e)
    }, I.SetLanguage = function(e) {
        n.change(e)
    }, I.GetLanguageCode = function() {
        return n.getLangCode()
    }, I.GetLanguagePhrase = function(e) {
        return n.get(e)
    }, I.GetSelectedBlockIDs = function() {
        return u.getHighlitIds().join(" ")
    }, I.SetBlockField = function(t, o, n) {
        var i = e.mainWorkspace.getBlockById(t);
        i && null !== i.getFieldValue(o) && i.setFieldValue(n, o)
    }, I.GetFieldValue = function(t, o) {
        var n = e.mainWorkspace.getBlockById(t);
        return n ? n.getFieldValue(o) : void 0
    }, I.Undo = function() {
        f.undo()
    }, I.Redo = function() {
        f.redo()
    }, I.CanUndo = function() {
        return A() && f.isUndoAvailable()
    }, I.CanRedo = function() {
        return A() && f.isRedoAvailable()
    }, I.GetActiveTab = function() {
        return c.getActive()
    }, I.IsEditing = function() {
        return e.WidgetDiv.isVisible()
    }, I.EditorUndo = function() {
        r.undo()
    }, I.EditorRedo = function() {
        r.redo()
    }, I.EditorSelectAll = function() {
        r.selectAll()
    }, I.EditorNew = function() {
        r.discard()
    }, I.EditorSetBASIC = function(e) {
        r.setContent(e)
    }, I.EditorGetBASIC = function() {
        return r.getContent()
    }, I.EditorSetError = function(e) {
        r.handleError(e)
    }, I.EditorClearError = function() {
        r.clearError()
    }, I.switchtoBlocks = function() {
        o.switchToBlocks()
    }, I.switchtoCode = function() {
        o.switchToCode()
    }, p.mixin(I, m), p.mixin(I, y), p.mixin(I, v), p.mixin(I, _), I.ShowTabs(!1), window.BlocklyAPI = I, I
});